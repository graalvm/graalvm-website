<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content='/python/assets/img/graalvm.png' />

  
  <title>GraalPy - Documentation</title><link rel="canonical" href="/docs/"><link rel="apple-touch-icon" sizes="180x180" href='/python/assets/img/favicons/apple-touch-icon.png'>
  <link rel="icon" type="image/png" sizes="32x32" href='/python/assets/img/favicons/favicon-32x32.png'>
  <link rel="icon" type="image/png" sizes="16x16" href='/python/assets/img/favicons/favicon-16x16.png'>

  <link rel="stylesheet" href="/python/assets/lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/python/assets/css/style.css">
  <link rel="stylesheet" href="/python/assets/css/highlight.css">

  <script src='/python/assets/lib/jquery/jquery-3.7.1.min.js'></script>

  <script src='/python/assets/lib/bootstrap/js/bootstrap.min.js'></script>

  <script src='/python/assets/lib/sticky-sidebar/resizeSensor.js'></script>
  <script src='/python/assets/lib/sticky-sidebar/sticky-sidebar.min.js'></script>

  <script async defer src="https://buttons.github.io/buttons.js"></script></head>

  <body>
    <header class="site-header site--header">
  <div class="container">
  <div class="wrapper">
    <a class="menu__logo" href="/python/">
      <img src='/python/assets/logo.svg' alt="project logo">
    </a>
    <nav class="site-nav">
      <ul class="menu__list">
        <li class="menu__item">
          <a href='/python/docs/' class="menu__link">Documentation</a>
        </li><li class="menu__item">
          <a href='/python/compatibility/' class="menu__link">Compatibility</a>
        </li>
        <li class="menu__item">
          <div class="stack-container">
            <a href="#" class="menu__link stack__header">Graal Projects</a>
            <div class="stack-menu">
              <div class="stack-row">
                <div class="stack-column">
                  <div class="stack__item">
                    <img alt="GraalVM icon" src="/python/assets/img/header-navigation/graalvm.svg">
                    <a href="https://graalvm.org/" class="item-line">GraalVM</a>
                  </div>
                  <div class="stack__item">
                    <img alt="Graal Stack icon" src="/python/assets/img/header-navigation/graalstack.svg">
                    <a href="https://graal.cloud/" class="item-line">Graal Stack</a>
                  </div>
                  <div class="stack__item">
                    <img alt="Graal Dev Kit for Micronaut icon" src="/python/assets/img/header-navigation/gdk.svg">
                    <a href="https://graal.cloud/gdk/" class="item-line">Graal Dev Kit for Micronaut</a>
                  </div>
                  <div class="stack__item">
                    <img alt="GraalOS icon" src="/python/assets/img/header-navigation/graalos.svg">
                    <a href="https://graal.cloud/graalos/" class="item-line">GraalOS</a>
                  </div>
                </div>
                <div class="stack-column">
                  <div class="stack__item">
                    <img alt="JavaScript icon" src="/python/assets/img/header-navigation/js-navi.svg">
                    <a href="https://graalvm.org/javascript/" class="item-line">GraalJS</a>
                  </div>
                  <div class="stack__item">
                    <img alt="Python icon" src="/python/assets/img/header-navigation/python-navi.svg">
                    <a href="https://graalvm.org/python/" class="item-line">GraalPy</a>
                  </div>
                  <div class="stack__item">
                    <img alt="WebAssembly icon" src="/python/assets/img/header-navigation/wasm-navi.svg">
                    <a href="https://graalvm.org/webassembly/" class="item-line">GraalWasm</a>
                  </div>
                  <div class="stack__item">
                    <img alt="Java icon" src="/python/assets/img/header-navigation/java-navi.svg">
                    <a href='https://graalvm.org/reference-manual/java-on-truffle/' class="item-line">Espresso</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
        <div class="menu__item icons githubstar" tabindex="0">
          <span class="github-widget">
            <a tabindex="-1" class="github-button" href="https://github.com/oracle/graalpython" data-icon="octicon-star"
              data-show-count="true" aria-label="Star oracle/graalpython on GitHub">Star</a>
          </span>
        </div>
      </ul>
      <div role="button" class="menu-btn menu-btn--menu js-show-menu" tabindex="-1" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
    </nav>
  </div>
  </div>
</header>

    <main class="page-content" aria-label="Content">
      <article id="docs-page">
  <div class="row">
    <div class="col-sm-3 docsimpro col-bg">
      <div class="sidebar-wrap">
        <div class="sidebar sidestyle">
          <div class="toc-container">
            <ul class="toc">
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-9 docsmod">
      <div id="content-wrapper" class="docs-content docs-content--with-sidebar">
        <h2 id="getting-started-with-graalpy-on-the-jvm"><a href="#getting-started-with-graalpy-on-the-jvm" class="anchor-link">Getting Started with GraalPy on the JVM</a></h2>

<p>You can use GraalPy with GraalVM JDK, Oracle JDK, or OpenJDK.
To add GraalPy to your Java application, use Maven or Gradle as shown below.
For other build systems (like Ant, Make, CMake, etc.), manual configuration may be required.</p>

<h3 id="version-compatibility"><a href="#version-compatibility" class="anchor-link">Version Compatibility</a></h3>

<p>The following table shows which Python versions are supported by each GraalPy release:</p>

<table>
  <thead>
    <tr>
      <th>GraalPy Version</th>
      <th>Python Version</th>
      <th>GraalVM Platform</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>25.x</td>
      <td>Python 3.12.8</td>
      <td>Oracle GraalVM 25.x, GraalVM Community Edition 25.x</td>
    </tr>
    <tr>
      <td>23.x</td>
      <td>Python 3.10.8</td>
      <td>Oracle GraalVM for JDK 21.x, Oracle GraalVM for JDK 17.x</td>
    </tr>
    <tr>
      <td>22.x</td>
      <td>Python 3.8.5</td>
      <td>GraalVM Enterprise Edition 21.3.x</td>
    </tr>
  </tbody>
</table>

<h4 id="platform-support"><a href="#platform-support" class="anchor-link">Platform support</a></h4>

<p>GraalPy is mostly written in Java and Python, but the Python package ecosystem is rich in native packages that need platform specific support via native libraries that expose platform-specific APIs.
The main operating system is Oracle Linux, the CPU architectures are AMD64 and ARM, and the primary JDK is Oracle GraalVM.
<strong>Linux is recommended for getting started with GraalPy.</strong> Windows and macOS with GraalVM JDK are less well tested, and outside of those combinations only basic test coverage is provided. As macOS and other platforms are not prioritized, some GraalPy features may not work on these platforms.
See <a href="#detailed-test-tier-breakdown">below</a> for a detailed breakdown.</p>

<h3 id="maven"><a href="#maven" class="anchor-link">Maven</a></h3>

<p>GraalPy can generate a Maven project that embeds Python packages into a Java application using <a href="https://central.sonatype.com/namespace/org.graalvm.python">Maven artefacts</a>.</p>

<ol>
  <li>GraalPy project publishes a Maven archetype to generate a starter project:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn archetype:generate <span class="se">\</span>
  <span class="nt">-DarchetypeGroupId</span><span class="o">=</span>org.graalvm.python <span class="se">\</span>
  <span class="nt">-DarchetypeArtifactId</span><span class="o">=</span>graalpy-archetype-polyglot-app <span class="se">\</span>
  <span class="nt">-DarchetypeVersion</span><span class="o">=</span>25.0.2
</code></pre></div>    </div>
  </li>
  <li>Build a native executable using the <a href="https://www.graalvm.org/latest/reference-manual/native-image/">GraalVM Native Image “tool”</a> plugin that was added for you automatically:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> mvn <span class="nt">-Pnative</span> package
</code></pre></div>    </div>
  </li>
  <li>Once completed, run the executable:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ./target/polyglot_app
</code></pre></div>    </div>
    <p>The application prints “hello java” to the console.</p>
  </li>
</ol>

<p>The project uses the <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/package-summary.html">GraalVM Polyglot API</a> with additional features to manage Python virtual environments and integrate Python package dependencies with a Maven workflow.
The Java code and the <em>pom.xml</em> file are heavily documented and the generated code describes available features.</p>

<p>See also <a href="#graalpy-maven-plugin">Embedding Build Tools</a> for more information about the GraalPy Maven Plugin.</p>

<h4 id="creating-cross-platform-jars-with-native-python-packages"><a href="#creating-cross-platform-jars-with-native-python-packages" class="anchor-link">Creating Cross-platform JARs with Native Python Packages</a></h4>

<p>The generated project uses the GraalPy Maven plugin, which makes it easy to add Python dependencies.
However, Python packages may have native components that are specific to the build system.
In order to distribute the resulting application for other systems, follow these steps:</p>

<ol>
  <li>
    <p>Build the project on each deployment platform.
Rename JAR files so they each have a platform-specific name and move them to a temporary directory on the same machine.</p>
  </li>
  <li>
    <p>Unzip each of the JAR files (substituting the correct names for the JAR files).
A special file, <em>vfs/fileslist.txt</em> needs to be concatenated from each JAR file.
Finally, create a new <em>combined.jar</em> from the combination of all files and with the concatenated <em>fileslist.txt</em>.</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> unzip linux.jar <span class="nt">-d</span> combined
 <span class="nb">mv </span>combined/vfs/fileslist.txt fileslist-linux.txt
 unzip windows.jar <span class="nt">-d</span> combined
 <span class="nb">mv </span>combined/vfs/fileslist.txt fileslist-windows.txt
 <span class="nb">cat </span>fileslist-linux.txt fileslist-windows.txt <span class="o">&gt;</span> combined/vfs/fileslist.txt
 <span class="nb">cd </span>combined
 zip <span class="nt">-r</span> ../combined.jar <span class="k">*</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="gradle"><a href="#gradle" class="anchor-link">Gradle</a></h3>

<ol>
  <li>Create a Java application with Gradle using the command below and follow the prompts (select the Groovy build script language, select a test framework, and so on):
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> gradle init <span class="nt">--type</span> java-application <span class="se">\</span>
             <span class="nt">--project-name</span> interop  <span class="se">\</span>
             <span class="nt">--package</span> interop <span class="se">\</span>
             <span class="nt">--no-split-project</span>
</code></pre></div>    </div>

    <p>The project is generated in the current working directory with the following structure:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> └── app
     ├── build.gradle
     └── src
         └── main
             ├── java
             │   └── interop
             │       └── App.java
             └── resources
</code></pre></div>    </div>
  </li>
  <li>Open your project configuration file, <em>app/build.gradle</em>, and modify it as follows.
    <ul>
      <li>Include the GraalPy support and the <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/package-summary.html">GraalVM Polyglot API</a> in the <code>dependencies</code> section:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  implementation<span class="o">(</span><span class="s2">"org.graalvm.polyglot:polyglot:25.0.2"</span><span class="o">)</span>
  implementation<span class="o">(</span><span class="s2">"org.graalvm.python:python-embedding:25.0.2"</span><span class="o">)</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Finally, replace the code in the file named <em>App.java</em> as follows for a small Python embedding:
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">package</span> <span class="nn">interop</span><span class="o">;</span>

 <span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">org.graalvm.python.embedding.GraalPyResources</span><span class="o">;</span>

 <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">try</span> <span class="o">(</span><span class="kt">var</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">createContext</span><span class="o">())</span> <span class="o">{</span>
             <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="s">"'Hello Python!'"</span><span class="o">).</span><span class="na">asString</span><span class="o">());</span>
         <span class="o">}</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>Run the application with Gradle:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ./gradlew run
</code></pre></div>    </div>
    <p>The application prints “Hello Python!” to the console.</p>

    <blockquote>
      <p>Note: The performance of the GraalPy runtime depends on the JDK in which you embed it. For more information, see <a href="https://www.graalvm.org/latest/reference-manual/embed-languages/#runtime-optimization-support">Runtime Optimization Support</a>.</p>
    </blockquote>
  </li>
  <li>
    <p>Optionally, you can also use a third-party Python package.</p>

    <p>5.1. In <em>app/build.gradle</em>:</p>
    <ul>
      <li>add the graalpy-gradle-plugin to the <code>plugins</code> section:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">id</span> <span class="s2">"org.graalvm.python"</span> version <span class="s2">"25.0.2"</span>
</code></pre></div>        </div>
      </li>
      <li>configure the GraalPy Gradle plugin:
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>graalPy <span class="o">{</span>
 packages <span class="o">=</span> <span class="o">[</span><span class="s2">"termcolor==2.2"</span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div>        </div>
      </li>
    </ul>

    <p>5.2. In <em>settings.gradle</em>, add the following <code>pluginManagement</code> configuration.</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pluginManagement <span class="o">{</span>
   repositories <span class="o">{</span>
      gradlePluginPortal<span class="o">()</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>

    <p>5.3. Update the file named <em>App.java</em> as follows:</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kn">package</span> <span class="nn">interop</span><span class="o">;</span>

   <span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>
   <span class="kn">import</span> <span class="nn">org.graalvm.python.embedding.GraalPyResources</span><span class="o">;</span>

   <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
   <span class="o">...</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
       <span class="k">try</span> <span class="o">(</span><span class="nc">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">contextBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
           <span class="nc">String</span> <span class="n">src</span> <span class="o">=</span> <span class="sh">"""
           from termcolor import colored
           colored_text = colored("hello java", "red", attrs=["reverse", "blink"])
           print(colored_text)
           """</span><span class="o">;</span>
           <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="n">src</span><span class="o">);</span>
       <span class="o">}</span>
   <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>See also <a href="#embedding-build-tools">Embedding Build Tools</a> for more information about the GraalPy Gradle Plugin.</p>

<h3 id="ant-cmake-makefile-or-other-build-systems-without-direct-support-for-maven-dependencies"><a href="#ant-cmake-makefile-or-other-build-systems-without-direct-support-for-maven-dependencies" class="anchor-link">Ant, CMake, Makefile or Other Build Systems Without Direct Support for Maven Dependencies</a></h3>

<p>Some (often older) projects may be using Ant, Makefiles, CMake, or other build systems that do not directly support Maven dependencies.
Projects such as <a href="https://ant.apache.org/ivy/history/master/tutorial/start.html">Apache Ivy™</a> enable such build systems to resolve Maven dependencies, but developers may have reasons not to use them.
GraalPy comes with a tool to obtain the required JAR files from Maven.</p>

<ol>
  <li>
    <p>Assuming there is some directory where third-party dependencies are stored for the project and that the build system is set up to put any JAR files there on the classpath, the project directory tree might look similar to this:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ├───lib
 │   └─── ... <span class="k">*</span>.jar dependencies are here
 └───src
     └─── ... <span class="k">*</span>.java files and resources are here
</code></pre></div>    </div>
  </li>
  <li>
    <p><a href="#installing-graalpy">Install GraalPy</a> for your system and ensure you have <code>graalpy</code> on your <code>PATH</code>.
Open a command-line interface and enter your project directory.
Then, as appropriate for your system, run one of the following commands:</p>

    <p>In a POSIX shell:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">export </span><span class="nv">GRAALPY_HOME</span><span class="o">=</span><span class="si">$(</span>graalpy <span class="nt">-c</span> <span class="s1">'print(__graalpython__.home)'</span><span class="si">)</span>
 <span class="s2">"</span><span class="k">${</span><span class="nv">GRAALPY_HOME</span><span class="k">}</span><span class="s2">/libexec/graalpy-polyglot-get"</span> <span class="nt">-a</span> python <span class="nt">-o</span> lib <span class="nt">-v</span> <span class="s2">"25.0.2"</span>
</code></pre></div>    </div>

    <p>In PowerShell:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$GRAALPY_HOME</span> <span class="o">=</span> graalpy <span class="nt">-c</span> <span class="s2">"print(__graalpython__.home)"</span>
 &amp; <span class="s2">"</span><span class="nv">$GRAALPY_HOME</span><span class="s2">/libexec/graalpy-polyglot-get"</span> <span class="nt">-a</span> python <span class="nt">-o</span> lib <span class="nt">-v</span> <span class="s2">"25.0.2"</span>
</code></pre></div>    </div>

    <p>These commands download all GraalPy dependencies into the <em>lib</em> directory.</p>
  </li>
  <li>
    <p>Provided that your build system is set up to pick up the JAR files from <em>lib</em>, the GraalPy embedding code below should work if put in an appropriate place in the project to run as the main class.</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>

 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Hello</span> <span class="o">{</span>
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">try</span> <span class="o">(</span><span class="kt">var</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">Context</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">option</span><span class="o">(</span><span class="s">"engine.WarnInterpreterOnly"</span><span class="o">,</span> <span class="s">"false"</span><span class="o">).</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
             <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="s">"'Hello Python!'"</span><span class="o">).</span><span class="na">asString</span><span class="o">());</span>
         <span class="o">}</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="related-documentation"><a href="#related-documentation" class="anchor-link">Related Documentation</a></h4>

<ul>
  <li><a href="#modern-python-for-the-jvm">Modern Python on the JVM</a></li>
  <li><a href="https://www.graalvm.org/latest/reference-manual/embed-languages/">Embedding Graal languages in Java</a></li>
</ul>

<h2 id="testing-python-applications-and-packages-on-graalpy"><a href="#testing-python-applications-and-packages-on-graalpy" class="anchor-link">Testing Python Applications and Packages on GraalPy</a></h2>

<h3 id="choosing-the-graalpy-runtime"><a href="#choosing-the-graalpy-runtime" class="anchor-link">Choosing the GraalPy Runtime</a></h3>

<p>GraalPy provides a Python 3.12 compliant runtime.
A primary goal is to support PyTorch, SciPy, and their constituent libraries, as well as to work with other data science and machine learning libraries from the rich Python ecosystem.
GraalPy is distributed as an ahead-of-time compiled native executable, compact in size.</p>

<p>GraalPy provides the following capabilities:</p>

<ul>
  <li>CPython-compatible distribution. This is the most compatible option to test Python code on GraalPy, since it most closely resembles the structure of CPython distributions.</li>
  <li>Unique deployment mode for Python applications. Compile a Python application on GraalPy to <a href="#python-standalone-applications">a single native binary</a> that embeds all needed resources.</li>
  <li>Access to GraalVM’s language ecosystems and tools. GraalPy can run many standard Python tools as well as tools from the GraalVM ecosystem.</li>
</ul>

<h4 id="graalpy-distributions"><a href="#graalpy-distributions" class="anchor-link">GraalPy Distributions</a></h4>

<p>GraalPy is available as <strong>GraalPy built on Oracle GraalVM</strong> and <strong>GraalPy Community</strong>.</p>

<ul>
  <li>
    <p>GraalPy built on top of Oracle GraalVM provides the best experience: it comes with additional optimizations, is significantly faster and more memory-efficient. It is licensed under the <a href="https://www.oracle.com/downloads/licenses/graal-free-license.html">GraalVM Free Terms and Conditions (GFTC)</a> license, same as Oracle GraalVM, which permits use by any user including commercial and production use.
Redistribution is permitted as long as it is not for a fee.</p>
  </li>
  <li>
    <p>GraalPy Community is built on top of GraalVM Community Edition, and is fully open-source.</p>
  </li>
</ul>

<p>Two language runtime options are available for the Oracle and Community distributions of GraalPy:</p>

<ul>
  <li>Native
    <ul>
      <li>GraalPy is compiled ahead-of-time to a native executable.</li>
      <li>This means that you do not need a JVM to run GraalPy and it is compact in size.</li>
    </ul>
  </li>
  <li>JVM
    <ul>
      <li>You can easily exploit Java interoperability.</li>
      <li>Peak performance may be higher than the native option.</li>
    </ul>
  </li>
</ul>

<h4 id="graalpy-identification"><a href="#graalpy-identification" class="anchor-link">GraalPy Identification</a></h4>

<p>The four GraalPy runtimes are identified as follows, using the general pattern <em>graalpy(-community)(-jvm)-&lt;version&gt;-&lt;os&gt;-&lt;arch&gt;</em>:</p>

<table>
  <tr>
    <th>&nbsp;</th>
    <th>Oracle</th>
    <th>Community</th>
  </tr>
  <tr>
    <th>Native</th>
    <td>graalpy-&lt;version&gt;-&lt;os&gt;-&lt;arch&gt;</td>
    <td>graalpy-community-&lt;version&gt;-&lt;os&gt;-&lt;arch&gt;</td>
  </tr>
  <tr>
    <th>JVM</th>
    <td>graalpy-jvm-&lt;version&gt;-&lt;os&gt;-&lt;arch&gt;</td>
    <td>graalpy-community-jvm-&lt;version&gt;-&lt;os&gt;-&lt;arch&gt;</td>
  </tr>
</table>

<h4 id="comparison"><a href="#comparison" class="anchor-link">Comparison</a></h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Runtime</th>
      <th style="text-align: left">Native (default)</th>
      <th style="text-align: left">JVM</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Time to start</td>
      <td style="text-align: left">faster</td>
      <td style="text-align: left">slower</td>
    </tr>
    <tr>
      <td style="text-align: left">Time to reach peak performance</td>
      <td style="text-align: left">faster</td>
      <td style="text-align: left">slower</td>
    </tr>
    <tr>
      <td style="text-align: left">Peak performance (also considering GC)</td>
      <td style="text-align: left">good</td>
      <td style="text-align: left">best</td>
    </tr>
    <tr>
      <td style="text-align: left">Java interoperability</td>
      <td style="text-align: left">needs configuration</td>
      <td style="text-align: left">works</td>
    </tr>
  </tbody>
</table>

<h3 id="installing-graalpy"><a href="#installing-graalpy" class="anchor-link">Installing GraalPy</a></h3>

<blockquote>
  <p>NOTE: There will be a delay between GraalPy release and its availability on Pyenv.</p>
</blockquote>

<h4 id="linux"><a href="#linux" class="anchor-link">Linux</a></h4>

<p>The easiest way to install GraalPy on Linux is to use <a href="https://github.com/pyenv/pyenv">Pyenv</a> (the Python version manager).
To install version 25.0.2 using Pyenv, run the following commands:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pyenv <span class="nb">install </span>graalpy-25.0.2
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pyenv shell graalpy-25.0.2
</code></pre></div></div>
<blockquote>
  <p>Before running <code>pyenv install</code>, you may need to update <code>pyenv</code> to include the latest GraalPy versions.</p>
</blockquote>

<p>Alternatively, you can download a compressed GraalPy installation file from <a href="https://github.com/oracle/graalpython/releases">GitHub releases</a>.</p>

<ol>
  <li>Find the download that matches the pattern <em>graalpy-XX.Y.Z-linux-amd64.tar.gz</em> or <em>graalpy-XX.Y.Z-linux-aarch64.tar.gz</em> (depending on your platform) and download.</li>
  <li>Uncompress the file and update your <code>PATH</code> environment variable to include to the <em>graalpy-XX.Y.Z-linux-amd64/bin</em> (or <em>graalpy-XX.Y.Z-linux-aarch64/bin</em>) directory.</li>
</ol>

<h4 id="macos"><a href="#macos" class="anchor-link">macOS</a></h4>

<p>The easiest way to install GraalPy on macOS is to use <a href="https://github.com/pyenv/pyenv">Pyenv</a> (the Python version manager).
To install version 25.0.2 using Pyenv, run the following commands:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pyenv <span class="nb">install </span>graalpy-25.0.2
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pyenv shell graalpy-25.0.2
</code></pre></div></div>
<blockquote>
  <p>Before running <code>pyenv install</code>, you may need to update <code>pyenv</code> to include the latest GraalPy versions.</p>
</blockquote>

<p>Alternatively, you can download a compressed GraalPy installation file from <a href="https://github.com/oracle/graalpython/releases">GitHub releases</a>.</p>

<ol>
  <li>Find the download that matches the pattern <em>graalpy-XX.Y.Z-macos-aarch64.tar.gz</em> and download.</li>
  <li>Remove the quarantine attribute.
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>xattr <span class="nt">-r</span> <span class="nt">-d</span> com.apple.quarantine /path/to/graalpy
</code></pre></div>    </div>
    <p>For example:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>xattr <span class="nt">-r</span> <span class="nt">-d</span> com.apple.quarantine ~/.pyenv/versions/graalpy-25.0.2
</code></pre></div>    </div>
  </li>
  <li>Uncompress the file and update your <code>PATH</code> environment variable to include to the <em>graalpy-XX.Y.Z-macos-aarch64/bin</em> directory.</li>
</ol>

<h4 id="windows"><a href="#windows" class="anchor-link">Windows</a></h4>

<ol>
  <li>Find and download a compressed GraalPy installation file from <a href="https://github.com/oracle/graalpython/releases">GitHub releases</a> that matches the pattern <em>graalpy-XX.Y.Z-windows-amd64.tar.gz</em>.</li>
  <li>Uncompress the file and update your <code>PATH</code> variable to include to the <em>graalpy-XX.Y.Z-windows-amd64/bin</em> directory.</li>
</ol>

<h5 id="windows-limitations"><a href="#windows-limitations" class="anchor-link">Windows Limitations</a></h5>

<p>The Windows distribution of GraalPy has more limitations than its Linux or macOS counterpart, so not all features and packages may be available.</p>

<p>It has the following known issues:</p>
<ul>
  <li>JLine treats Windows as a dumb terminal, with no autocomplete and limited editing capabilities in the REPL</li>
  <li>Interactive <code>help()</code> in the REPL doesn’t work</li>
  <li>Inside a virtual environment:
    <ul>
      <li><em>graalpy.cmd</em> and <em>graalpy.exe</em> are broken</li>
      <li><em>pip.exe</em> cannot be used directly</li>
      <li><code>pip</code> has trouble with cache file loading, use <code>--no-cache-dir</code></li>
      <li>Only pure Python binary wheels can be installed, no native extensions or source builds</li>
      <li>To install a package, use <code>myvenv/Scripts/python.exe -m pip --no-cache-dir install &lt;pkg&gt;</code></li>
    </ul>
  </li>
  <li>Running from PowerShell works better than running from CMD, various scripts will fail on the latter</li>
</ul>

<h3 id="installing-packages"><a href="#installing-packages" class="anchor-link">Installing Packages</a></h3>

<p>The best way of using GraalPy is from a <a href="https://docs.python.org/3/library/venv.html">venv</a> virtual environment.
This generates wrapper scripts and makes the implementation usable from a shell as the standard Python interpreter.</p>

<ol>
  <li>Create a virtual environment with GraalPy by running the following command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> graalpy <span class="nt">-m</span> venv &lt;venv-dir&gt;
</code></pre></div>    </div>
    <p>For example:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> graalpy <span class="nt">-m</span> venv ~/.virtualenvs/graalpy-25.0.2
</code></pre></div>    </div>
  </li>
  <li>Activate the environment in your shell session:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">source</span> &lt;venv-dir&gt;/bin/activate
</code></pre></div>    </div>
    <p>For example:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">source</span> ~/.virtualenvs/graalpy-25.0.2/bin/activate
</code></pre></div>    </div>
  </li>
</ol>

<p>Multiple executables are available in the virtual environment, including: <code>python</code>, <code>python3</code>, and <code>graalpy</code>.</p>

<blockquote>
  <p>Note: To deactivate the Python environment (and return to your shell), run <code>deactivate</code>.</p>
</blockquote>

<p>The <code>pip</code> package installer is available when using a virtual environment.
The GraalPy implementation of <code>pip</code> may choose package versions other than the latest in cases where it ships patches to make these work better.</p>

<h2 id="python-performance"><a href="#python-performance" class="anchor-link">Python Performance</a></h2>

<h3 id="execution-performance"><a href="#execution-performance" class="anchor-link">Execution Performance</a></h3>

<p>GraalPy uses the state-of-the-art just-in-time (JIT) compiler of GraalVM.
When JIT compiled, GraalPy runs Python code ~4x faster than CPython on the official <a href="https://pyperformance.readthedocs.io/">Python Performance Benchmark Suite</a>.
<img src="/python/assets/performance.svg" alt="" /></p>

<p>These benchmarks can be run by installing the <code>pyperformance</code> package and calling <code>pyperformance run</code> on each of CPython and GraalPy.
To get the Jython numbers we adapted the harness and benchmarks because of missing Python 3 support in Jython.
The speedup was then calculated by taking the pair-wise intersection of working benchmarks and calculating the geomean.</p>

<p>Without a JIT compiler, GraalPy currently executes pure Python code around ~4x slower than CPython.
This means that very short running scripts or scripts running without the Graal compiler on Oracle JDK or OpenJDK are expected to be slower.</p>

<p>Many Python packages from the machine learning or data science ecosystems contain C extension code.
This code benefits little from GraalPy’s JIT compilation and suffers from having to emulate CPython implementation details on GraalPy.
When many C extensions are involved, performance can vary a lot depending on the specific interactions of native and Python code.</p>

<h3 id="code-loading-performance-and-footprint"><a href="#code-loading-performance-and-footprint" class="anchor-link">Code Loading Performance and Footprint</a></h3>

<p>It takes time to parse Python code so when using GraalPy to embed another language in Python, observe the general advice for embedding Graal languages related to <a href="https://www.graalvm.org/latest/reference-manual/embed-languages/#code-caching-across-multiple-contexts">code caching</a>.
Furthermore, some Python libraries require loading a large amount of code on startup before they can do any work.
Due to the design of the Python language, incremental parsing is not possible and for some scripts, the parser may represent a significant fraction of runtime and memory.
To mitigate this, GraalPy can cache the bytecode generated during parsing in <em>.pyc</em> files, if appropriate file system access is configured.</p>

<h4 id="creating-and-managing-pyc-files"><a href="#creating-and-managing-pyc-files" class="anchor-link">Creating and Managing </a><em>.pyc</em> Files</h4>

<p>GraalPy automatically creates a <em>.pyc</em> file when there is an invalid or absent <em>.pyc</em> file that matches a corresponding <em>.py</em> file.</p>

<p>When GraalPy imports a Python source file (module) during an execution for the first time, it automatically creates a corresponding <em>.pyc</em> file.
If GraalPy imports the same module again, then it uses the existing <em>.pyc</em> file.
That means that there are no <em>.pyc</em> files for source files that were not yet executed (imported).
GraalPy creates <em>.pyc</em> files entirely through the <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/io/FileSystem.html">FileSystem API</a>, so that a Java application with embedded Python code can manage file system access.</p>

<blockquote>
  <p>Note: GraalPy never deletes a <em>.pyc</em> file.</p>
</blockquote>

<p>Every time GraalPy subsequently executes a script, it reuses the existing <em>.pyc</em> file, or creates a new one.
GraalPy recreates a <em>.pyc</em> file if the timestamp or hashcode of the original source file is changed.
GraalPy generates the hashcode based only on the Python source file by calling <code>source.hashCode()</code>, which is the JDK hash code over the array of source file bytes, calculated with <code>java.util.Arrays.hashCode(byte[])</code>.</p>

<p>GraalPy also recreates <em>.pyc</em> files if a magic number in the Python parser is changed.
The magic number is hard-coded in the source of Python and can not be changed by the user (unless of course that user has access to the bytecode of Python).</p>

<p>The developers of GraalPy change the magic number when the bytecode format changes.
This is an implementation detail, so the magic number does not have to correspond to the version of GraalPy (as in CPython).
The magic number of <code>pyc</code> is a function of the actual Python runtime Java code that is running.
Changes to the magic number are communicated in the release notes so that developers or system administrators can delete old <em>.pyc</em> files when upgrading.</p>

<p>Note that if you use <em>.pyc</em> files, you must allow write-access to GraalPy at least when switching versions or modifying the original source code file.
Otherwise, the regeneration of source code files will fail and every import will have the overhead of accessing each old <em>.pyc</em> file, parsing the code, serializing it, and trying (and failing) to write out a new <em>.pyc</em> file.</p>

<p>GraalPy creates the following directory structure for <em>.pyc</em> files:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>top_directory/
  __pycache__/
    sourceA.graalpy.pyc
    sourceB.graalpy.pyc
  sourceA.py
  sourceB.py
  sub_directory/
    __pycache__/
      sourceX.graalpy.pyc
    sourceX.py
</code></pre></div></div>

<p>By default, GraalPy creates the <em>__pycache__</em> directory on the same directory level as a source code file and in this directory all <em>.pyc</em> files from the same directory are stored.
This directory may store <em>.pyc</em> files created with different versions of Python (including, for example, CPython), so the user may see files ending in <em>.cpython3-6.pyc</em>, for example.</p>

<p><em>.pyc</em> files are largely managed automatically by GraalPy in a manner compatible with CPython.
GraalPy provides options similar to CPython to specify the location of t_.pyc_ files, and if they should be written at all, and both of these options can be changed by guest code.</p>

<p>The creation of <em>.pyc</em> files can be controlled in the <a href="https://docs.python.org/3/using/cmdline.html">same way as CPython</a>:</p>

<ul>
  <li>The GraalPy launcher (<code>graalpy</code>) reads the <code>PYTHONDONTWRITEBYTECODE</code>
environment variable. If this is set to a non-empty string, Python will not
try to create a <em>.pyc</em> file when importing a module.</li>
  <li>The launcher command line option <code>-B</code>, if given, has the same effect as the
above.</li>
  <li>Guest language code can change the attribute <code>dont_write_bytecode</code> of the
<code>sys</code> built-in module at runtime to change the behavior for subsequent
imports.</li>
  <li>The GraalPy launcher reads the <code>PYTHONPYCACHEPREFIX</code> environment variable. If set,
it creates the <em>__pycache__</em> directory at the path specified by the
prefix, and creates a mirror of the directory structure of the source tree 
on-demand to store the <em>.pyc</em> files.</li>
  <li>A guest language code can change the attribute <code>pycache_prefix</code> of the <code>sys</code>
module at runtime to change the location for subsequent imports.</li>
</ul>

<p>Because the developer cannot use environment variables or CPython options to communicate these options to GraalPy, these options are made available as language options:</p>

<ul>
  <li><code>python.DontWriteBytecodeFlag</code> - equivalent to <code>-B</code> or <code>PYTHONDONTWRITEBYTECODE</code></li>
  <li><code>python.PyCachePrefix</code> - equivalent to <code>PYTHONPYCACHEPREFIX</code></li>
</ul>

<p>Note that a Python context will not enable writing <em>.pyc</em> files by default.
The GraalPy launcher enables it by default, but if this is desired in the embedding use case, care should be taken to ensure that the <em>__pycache__</em> location is properly managed and the files in that location are secured against manipulation in the same way as the source code files (<em>.py</em>) from which they were derived.</p>

<p>Note also that to upgrade the application sources to Oracle GraalPy, old <em>.pyc</em> files must be removed by the developer as required.</p>

<h4 id="security-considerations"><a href="#security-considerations" class="anchor-link">Security Considerations</a></h4>

<p>GraalPy performs all file operations (obtaining the data, timestamps, and writing <em>.pyc</em> files) via the <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/io/FileSystem.html">FileSystem API</a>.
Developers can modify all of these operations by means of custom (for example, read-only) <code>FileSystem</code> implementations.
The developer can also effectively disable the creation of <em>.pyc</em> files by disabling I/O permissions for GraalPy.</p>

<p>If <em>.pyc</em> files are not readable, their location is not writable.
If the <em>.pyc</em> files’ serialization data or magic numbers are corrupted in any way, the deserialization fails and GraalPy parses the <em>.py</em> source code file again.
This comes with a minor performance hit <em>only</em> for the parsing of modules, which should not be significant for most applications (provided the application performs actual work in addition to loading Python code).</p>

<h2 id="modern-python-for-the-jvm"><a href="#modern-python-for-the-jvm" class="anchor-link">Modern Python for the JVM</a></h2>

<p>For Python version 2 (now EOL), Jython is the <em>de facto</em> means of interfacing Python and Java.
Most existing Jython code that uses Java integration will be based on a stable Jython release—however, these are only available in Python 2.x versions.
GraalPy, in contrast, is compatible with Python 3.x and does not provide full compatibility with earlier 2.x versions of Jython.</p>

<p>To migrate code from Python 2 to Python 3, follow <a href="https://docs.python.org/3/howto/pyporting.html">the official guide from the Python community</a>.
Once your Jython code is compatible with Python 3, follow this guide to iron out other differences between GraalPy and Jython.</p>

<p>GraalPy’s first-class support for <a href="#interoperability">Java interoperability</a> makes using Java libraries from Python as easy as possible, with special affordances for Java code beyond the generic interoperability support for other Graal languages (languages implemented on the <a href="https://www.graalvm.org/latest/graalvm-as-a-platform/language-implementation-framework/">Truffle framework</a>).</p>

<p>Not all features of Jython are supported on GraalPy.
Some are supported, but disabled by default due to their negative impact on runtime performance.
During migration, you can enable these features using a command line option: <code>--python.EmulateJython</code>.
We recommend to move away from these features, however, to achieve optimal performance.</p>

<h3 id="migrating-jython-scripts"><a href="#migrating-jython-scripts" class="anchor-link">Migrating Jython Scripts</a></h3>

<blockquote>
  <p>To move plain Jython scripts from Jython to GraalPy, use a GraalPy JVM-based runtime.
(For more information, see available <a href="#testing-python-applications-and-packages-on-graalpy">GraalPy Distributions</a>).</p>
</blockquote>

<h4 id="importing-a-java-package"><a href="#importing-a-java-package" class="anchor-link">Importing a Java Package</a></h4>

<p>There are certain features of Jython’s Java integration that are enabled by default on GraalPy.
Here is an example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">java.awt</span> <span class="k">as</span> <span class="n">awt</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">win</span> <span class="o">=</span> <span class="n">awt</span><span class="p">.</span><span class="nc">Frame</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">win</span><span class="p">.</span><span class="nf">setSize</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">win</span><span class="p">.</span><span class="nf">setTitle</span><span class="p">(</span><span class="sh">"</span><span class="s">Hello from Python!</span><span class="sh">"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">win</span><span class="p">.</span><span class="nf">getSize</span><span class="p">().</span><span class="nf">toString</span><span class="p">()</span>
<span class="sh">'</span><span class="s">java.awt.Dimension[width=200,height=200]</span><span class="sh">'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">win</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div>

<p>This example produces the same result when run on both Jython and GraalPy.
However, when the example is run on GraalPy, only packages that are in the <code>java</code> namespace can be imported directly.
To import classes from packages outside the <code>java</code> namespace, use the <code>--python.EmulateJython</code> option.</p>

<blockquote>
  <p>Note: When embedding GraalPy in a modularized application, you may have to
add exports for the required modules according to JSR 376.</p>
</blockquote>

<p>Additionally, it is not possible to import Java packages as Python modules in all circumstances.
For example, this will work:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">java.lang</span> <span class="k">as</span> <span class="n">lang</span>
</code></pre></div></div>

<p>But, this will not work:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">javax.swing</span> <span class="k">as</span> <span class="n">swing</span>
<span class="kn">from</span> <span class="n">javax.swing</span> <span class="kn">import</span> <span class="o">*</span>
</code></pre></div></div>

<p>Instead, import one of the classes directly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">javax.swing.Window</span> <span class="k">as</span> <span class="n">Window</span>
</code></pre></div></div>

<h4 id="basic-object-usage"><a href="#basic-object-usage" class="anchor-link">Basic Object Usage</a></h4>

<p>Constructing and working with Java objects and classes is achieved with conventional
Python syntax.
The methods of a Java object can also be retrieved and referenced as first class objects (bound to their instance), in the same way as Python methods. For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">Random</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rg</span> <span class="o">=</span> <span class="nc">Random</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rg</span><span class="p">.</span><span class="nf">nextInt</span><span class="p">()</span>
<span class="mi">1491444859</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">boundNextInt</span> <span class="o">=</span> <span class="n">rg</span><span class="p">.</span><span class="n">nextInt</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">boundNextInt</span><span class="p">()</span>
<span class="mi">1672896916</span>
</code></pre></div></div>

<h4 id="java-to-python-types-automatic-conversion"><a href="#java-to-python-types-automatic-conversion" class="anchor-link">Java-to-Python Types: Automatic Conversion</a></h4>

<p>Method overloads are resolved by matching the Python arguments in a best-effort manner to the available parameter types.
This approach is also taken when converting data.
The goal here is to make using Java from Python as smooth as possible.
The matching approach taken by GraalPy is similar to Jython, but GraalPy uses a more dynamic approach to matching—Python types emulating <code>int</code> or <code>float</code> are also converted to the appropriate Java types.
This enables you, for example, to use a Pandas frame as <code>double[][]</code> or NumPy array elements as <code>int[]</code> when the elements fit into those Java primitive types.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Java type</th>
      <th style="text-align: left">Python type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>null</code></td>
      <td style="text-align: left"><code>None</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>boolean</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code></td>
      <td style="text-align: left"><code>int</code>, any object that has an <code>__int__</code> method</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>float</code></td>
      <td style="text-align: left"><code>float</code>, any object that has a <code>__float__</code> method</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>char</code></td>
      <td style="text-align: left"><code>str</code> of length 1</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>java.lang.String</code></td>
      <td style="text-align: left"><code>str</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>byte[]</code></td>
      <td style="text-align: left"><code>bytes</code>, <code>bytearray</code>, wrapped Java <code>array</code>, Python list with only the appropriate types</td>
    </tr>
    <tr>
      <td style="text-align: left">Java arrays</td>
      <td style="text-align: left">Wrapped Java <code>array</code> or Python <code>list</code> with only the appropriate types</td>
    </tr>
    <tr>
      <td style="text-align: left">Java objects</td>
      <td style="text-align: left">Wrapped Java object of the appropriate type</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>java.lang.Object</code></td>
      <td style="text-align: left">Any object</td>
    </tr>
  </tbody>
</table>

<h4 id="special-jython-module-jarray"><a href="#special-jython-module-jarray" class="anchor-link">Special Jython Module: </a><code>jarray</code></h4>

<p>GraalPy implements the <code>jarray</code> module (to create primitive Java arrays) for compatibility.
This module is always available, since we have not found its presence to have a negative impact.
For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">jarray</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">jarray</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="sh">'</span><span class="s">i</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>Note that its usage is equivalent to constructing the array type using the <code>java.type</code> function and then populating the array, as follows:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">java</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">java</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="sh">"</span><span class="s">int[]</span><span class="sh">"</span><span class="p">)(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></div>

<p>The code that creates a Java array can also use Python types.
However, implicitly, this may produce a copy of the array data, which can be deceptive when using a Java array as an output parameter:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="nc">ByteArrayInputStream</span><span class="p">(</span><span class="sa">b</span><span class="sh">"</span><span class="s">foobar</span><span class="sh">"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">buf</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span> <span class="c1"># buf is automatically converted to a byte[] array
</span><span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">buf</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="c1"># the converted byte[] array is lost
</span><span class="o">&gt;&gt;&gt;</span> <span class="n">jbuf</span> <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="sh">"</span><span class="s">byte[]</span><span class="sh">"</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">i</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">jbuf</span><span class="p">)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">jbuf</span>
<span class="p">[</span><span class="mi">98</span><span class="p">,</span> <span class="mi">97</span><span class="p">,</span> <span class="mi">122</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="exceptions-from-java"><a href="#exceptions-from-java" class="anchor-link">Exceptions from Java</a></h4>

<p>You can catch Java exceptions as you would expect.
For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">java</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">v</span> <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="nc">Vector</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
<span class="p">...</span>    <span class="n">x</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="nf">elementAt</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="p">...</span> <span class="k">except</span> <span class="n">java</span><span class="p">.</span><span class="n">lang</span><span class="p">.</span><span class="n">ArrayIndexOutOfBoundsException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="p">...</span>    <span class="nf">print</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="nf">getMessage</span><span class="p">())</span>
<span class="bp">...</span>
<span class="mi">7</span> <span class="o">&gt;=</span> <span class="mi">0</span>
</code></pre></div></div>

<h4 id="java-collections"><a href="#java-collections" class="anchor-link">Java Collections</a></h4>

<ul>
  <li>
    <p>Java arrays and collections that implement the <code>java.util.Collection</code> interface can be accessed using the <code>[]</code> syntax.
An empty collection is considered <code>false</code> in boolean conversions.
The length of a collection is exposed by the <code>len</code> built-in function.
For example:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">ArrayList</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="nc">ArrayList</span><span class="p">()</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="sh">"</span><span class="s">foo</span><span class="sh">"</span><span class="p">)</span>
  <span class="bp">True</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="sh">"</span><span class="s">baz</span><span class="sh">"</span><span class="p">)</span>
  <span class="bp">True</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="sh">'</span><span class="s">foo</span><span class="sh">'</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sh">"</span><span class="s">bar</span><span class="sh">"</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
  <span class="mi">1</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">bool</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
  <span class="bp">True</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">bool</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
  <span class="bp">False</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Java iterables that implement the <code>java.lang.Iterable</code> interface can be iterated over using a <code>for</code> loop or the <code>iter</code> built-in function and are accepted by all built-ins that expect an iterable.
For example:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>
  <span class="p">[</span><span class="sh">'</span><span class="s">foo</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bar</span><span class="sh">'</span><span class="p">]</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="nf">iter</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="sh">'</span><span class="s">foo</span><span class="sh">'</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="sh">'</span><span class="s">bar</span><span class="sh">'</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="nc">Traceback </span><span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="nb">StopIteration</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">set</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
  <span class="p">{</span><span class="sh">'</span><span class="s">foo</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">bar</span><span class="sh">'</span><span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>An iterator can be iterated as well. For example:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">ArrayList</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="nc">ArrayList</span><span class="p">()</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="sh">"</span><span class="s">foo</span><span class="sh">"</span><span class="p">)</span>
  <span class="bp">True</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">l</span><span class="p">.</span><span class="nf">iterator</span><span class="p">()</span>  <span class="c1"># Calls the Java iterator methods
</span>  <span class="o">&gt;&gt;&gt;</span> <span class="nf">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="sh">'</span><span class="s">foo</span><span class="sh">'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Mapped collections that implement the <code>java.util.Map</code> interface can be accessed using the <code>[]</code> notation.
An empty map is considered <code>false</code> in boolean conversions. Iteration of a map yields its keys, consistent with <code>dict</code>.
For example:</p>

    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">HashMap</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">m</span> <span class="o">=</span> <span class="nc">HashMap</span><span class="p">()</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="sh">'</span><span class="s">foo</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="sh">'</span><span class="s">foo</span><span class="sh">'</span><span class="p">]</span>
  <span class="mi">5</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">m</span><span class="p">[</span><span class="sh">'</span><span class="s">bar</span><span class="sh">'</span><span class="p">]</span>
  <span class="nc">Traceback </span><span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="sh">"</span><span class="s">&lt;stdin&gt;</span><span class="sh">"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="nb">KeyError</span><span class="p">:</span> <span class="n">bar</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">m</span><span class="p">]</span>
  <span class="p">[</span><span class="sh">'</span><span class="s">foo</span><span class="sh">'</span><span class="p">]</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">bool</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
  <span class="bp">True</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">m</span><span class="p">[</span><span class="sh">'</span><span class="s">foo</span><span class="sh">'</span><span class="p">]</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="nf">bool</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
  <span class="bp">False</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="inheritance-from-java"><a href="#inheritance-from-java" class="anchor-link">Inheritance from Java</a></h4>

<p>Inheriting from a Java class (or implementing a Java interface) is supported with some syntactical and significant behavioral differences from Jython.
To create a class that inherits from a Java class (or implements a Java interface), use the conventional Python <code>class</code> statement.
Declared methods override (implement) superclass (interface) methods when their names match.</p>

<p>It is important to understand that there is actually delegation happening here - when inheriting from Java, two classes are created, one in Java and one in Python.
These reference each other and any methods that are declared in Python that override or implement a Java method on the superclass are declared on the Java side as delegating to Python.
The created object does not behave like a Python object but instead in the same way as a foreign Java object.
The reason for this is that when you create an instance of your new class, you get a reference to the <em>Java</em> object.</p>

<h5 id="inheritance-behavior-up-to-graalpy-version-251"><a href="#inheritance-behavior-up-to-graalpy-version-251" class="anchor-link">Inheritance behavior up to GraalPy version 25.1</a></h5>

<p>When inheriting from a Java class, you can pass the keyword <code>new_style=False</code>.
This is the default up to and including GraalPy version 25.1.
The generated class is a Java object and no forwarding to the Python-side happens by default.
To call Python methods that do <em>not</em> override or implement methods that already existed on the superclass, you need to use the special <code>this</code> attribute.
Once you are in a Python method, your <code>self</code> refers to the Python object, and to get back from a Python method to Java, use the special attribute <code>__super__</code>.
And since we do not expose static members on the instance side, if you need to call a static method from an instance on the Java side, use <code>getClass().static</code> to get to the meta-object holding the static members.</p>

<p>One important consequence of the two-object-schema here is that the <code>__init__</code> method on the Python object is actually called <em>before</em> the connection to the Java side is established.
So you cannot currently override construction of the Java object or run code during initialization that would affect the Java half of the combined structure.
You will have to create a factory method if you want to achieve this.</p>

<p>For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">atexit</span>
<span class="kn">from</span> <span class="n">java.util.logging</span> <span class="kn">import</span> <span class="n">Logger</span><span class="p">,</span> <span class="n">Handler</span>


<span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">Handler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">logged</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">publish</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">logged</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">(</span><span class="sh">"</span><span class="s">mylog</span><span class="sh">"</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">setUseParentHandlers</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="nc">MyHandler</span><span class="p">()</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
<span class="c1"># Make sure the handler is not used after the Python context has been closed
</span><span class="n">atexit</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">logger</span><span class="p">.</span><span class="nf">removeHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">))</span>

<span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sh">"</span><span class="s">Hi</span><span class="sh">"</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">warning</span><span class="p">(</span><span class="sh">"</span><span class="s">Bye</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># The python attributes/methods of the object are accessed through 'this' attribute
</span><span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">handler</span><span class="p">.</span><span class="n">this</span><span class="p">.</span><span class="n">logged</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">Python captured message </span><span class="sh">"</span><span class="si">{</span><span class="n">record</span><span class="p">.</span><span class="nf">getMessage</span><span class="p">()</span><span class="si">}</span><span class="sh">"</span><span class="s"> at level </span><span class="si">{</span><span class="n">record</span><span class="p">.</span><span class="nf">getLevel</span><span class="p">().</span><span class="nf">getName</span><span class="p">()</span><span class="si">}</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>

<p>For more information about how the generated Java subclass behaves, see the <a href="https://www.graalvm.org/truffle/javadoc/com/oracle/truffle/api/TruffleLanguage.Env.html#createHostAdapter(java.lang.Object%5B%5D)">Truffle documentation</a>.</p>

<h5 id="inheritance-behavior-from-graalpy-251"><a href="#inheritance-behavior-from-graalpy-251" class="anchor-link">Inheritance behavior from GraalPy 25.1</a></h5>

<p>When inheriting from a Java class, you can pass the keyword <code>new_style=True</code>.
This is the default after GraalPy version 25.1.
The generated class is a Java object, but attribute lookup is dispatched to the Python object as needed.</p>

<p>Multiple levels of inheritance are supported, and <code>super()</code> calls both in the constructor override via <code>__new__</code> as well as in Java method overrides work as expected.
The <code>self</code> in a method refers to the Java object, but any access that does not refer to a field or method on the Java class is transparently dispatched to the Python side.
Static methods can be called both from the instance as well as the class.</p>

<p>For example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">java.util.logging</span> <span class="kn">import</span> <span class="n">Level</span>

<span class="k">class</span> <span class="nc">PythonLevel</span><span class="p">(</span><span class="n">Level</span><span class="p">,</span> <span class="n">new_style</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">default name</span><span class="sh">"</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Provide a default constructor that modifies
        the construction of the Java instance</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="nf">super</span><span class="p">().</span><span class="nf">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwarg</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">After the instance is created, initialize the
        misc_value field</span><span class="sh">"""</span>
        <span class="n">self</span><span class="p">.</span><span class="n">misc_value</span> <span class="o">=</span> <span class="mi">42</span>

    <span class="k">def</span> <span class="nf">getName</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">This overrides the Java method on
        java.util.logging.Level</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="nf">super</span><span class="p">().</span><span class="nf">getName</span><span class="p">()</span> <span class="o">+</span> <span class="sh">"</span><span class="s"> from Python with super()</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">pythonName</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">This adds a method that is only visible from Python,
        but self and super calls work as expected</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">PythonName for Level </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="nf">intValue</span><span class="p">()</span><span class="si">}</span><span class="s"> named </span><span class="si">{</span><span class="nf">super</span><span class="p">().</span><span class="nf">getName</span><span class="p">()</span><span class="si">}</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">callStaticFromPython</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Java static methods can be called from the
        instance as well as the class</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>


<span class="n">pl</span> <span class="o">=</span> <span class="nc">PythonLevel</span><span class="p">()</span>
<span class="k">assert</span> <span class="nf">issubclass</span><span class="p">(</span><span class="n">PythonLevel</span><span class="p">,</span> <span class="n">Level</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">PythonLevel</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="sh">"</span><span class="s">INFO</span><span class="sh">"</span><span class="p">).</span><span class="nf">getName</span><span class="p">()</span> <span class="o">==</span> <span class="sh">"</span><span class="s">INFO</span><span class="sh">"</span>
</code></pre></div></div>

<h3 id="embedding-python-into-java"><a href="#embedding-python-into-java" class="anchor-link">Embedding Python into Java</a></h3>

<p>The other way to use Jython was to embed it into a Java application. There were two options for such an embedding.</p>

<ol>
  <li>
    <p>Use the <code>PythonInterpreter</code> object that Jython provides.
Existing code using Jython in this manner depends directly on the Jython package (for example, in the Maven configuration), because the Java code has references to Jython internal classes.
These classes do not exist in GraalVM, and no equivalent classes are exposed.
To migrate from this usage, switch to the <a href="https://central.sonatype.com/artifact/org.graalvm.sdk/graal-sdk">GraalVM SDK</a>.
Using this SDK, no APIs particular to Python are exposed, everything is achieved via the GraalVM API, with maximum configurability of the Python runtime.
Refer to the <a href="#getting-started-with-graalpy-on-the-jvm">Getting Started</a> documentation for preparing a setup.</p>
  </li>
  <li>
    <p>Embed Jython in Java via <a href="https://www.jcp.org/en/jsr/detail?id=223">JSR 223</a> by using the classes of the the <code>javax.script</code> package, and, in particular, via the <code>ScriptEngine</code> class.
We do not recommend this approach, because the <code>ScriptEngine</code> APIs are not a clean fit for the options and capabilities of GraalPy.
However, to migrate existing code, we provide an example ScriptEngine implementation that you can inline into your project.
Refer to <a href="https://www.graalvm.org/latest/reference-manual/embed-languages/#compatibility-with-jsr-223-scriptengine">the reference manual for embedding</a> for details.</p>
  </li>
</ol>

<h3 id="python-context-options">
<a href="#python-context-options" class="anchor-link">Python Context Options</a>
</h3>
<p>Below are the options you can set on contexts for GraalPy.</p>
<p>
  <strong>CheckHashPycsMode</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Value of the --check-hash-based-pycs command line option - &#39;default&#39; means the &#39;check_source&#39; flag in hash-based pycs determines invalidation - &#39;always&#39; causes the interpreter to hash the source file for invalidation regardless of value of &#39;check_source&#39; bit - &#39;never&#39; causes the interpreter to always assume hash-based pycs are valid The default value is &#39;default&#39;. See PEP 552 &#39;Deterministic pycs&#39; for more details. Accepts: <code>default|always|never</code>
</p>

<p>
  <strong>CompressionModulesBackend</strong>
   (Has to be the same for all Contexts in an Engine)
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Choose the backend for the Zlib, Bz2, and LZMA modules. Accepts: <code>java|native</code>
</p>

<p>
  <strong>CoreHome</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the location of what is usually lib/graalpy&lt;graalvm_major&gt;.&lt;graalvm_minor&gt;. Overrides any environment variables or Java options. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>DontWriteBytecodeFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -B flag. Don&#39;t write bytecode files. Accepts: <code>true|false</code>
</p>

<p>
  <strong>EmulateJython</strong>
   (Has to be the same for all Contexts in an Engine)
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Emulate some Jython features that can cause performance degradation. Accepts: <code>true|false</code>
</p>

<p>
  <strong>IgnoreEnvironmentFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -E flag. Ignore PYTHON* environment variables. Accepts: <code>true|false</code>
</p>

<p>
  <strong>InspectFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -i flag. Inspect interactively after running a script. Accepts: <code>true|false</code>
</p>

<p>
  <strong>InstallSignalHandlers</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Install default signal handlers on startup. Accepts: <code>true|false</code>
</p>

<p>
  <strong>IntMaxStrDigits</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -X int_max_str_digits option.
</p>

<p>
  <strong>IsolateFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -I flag. Isolate from the users environment by not adding the cwd to the path. Accepts: <code>true|false</code>
</p>

<p>
  <strong>NoSiteFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -S flag. Don&#39;t imply &#39;import site&#39; on initialization. Accepts: <code>true|false</code>
</p>

<p>
  <strong>NoUserSiteFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -s flag. Don&#39;t add user site directory to sys.path. Accepts: <code>true|false</code>
</p>

<p>
  <strong>PosixModuleBackend</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to setting PYTHONHASHSEED environment variable. Accepts: <code>random|[0,4294967295]</code>
</p>

<p>
  <strong>PyCachePrefix</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If this is set, GraalPy will write .pyc files in a mirror directory tree at this path, instead of in __pycache__ directories within the source tree. Equivalent to setting the PYTHONPYCACHEPREFIX environment variable for the standard launcher. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>PythonOptimizeFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove assert statements and any code conditional on the value of __debug__. Accepts: <code>true|false</code>
</p>

<p>
  <strong>PythonPath</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to setting the PYTHONPATH environment variable for the standard launcher. &#39;:&#39;-separated list of directories prefixed to the default module search path. Accepts: <code>&lt;path&gt;[:&lt;path&gt;]</code>
</p>

<p>
  <strong>QuietFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -q flag. Don&#39;t print version and copyright messages on interactive startup. Accepts: <code>true|false</code>
</p>

<p>
  <strong>SafePathFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -P flag. Don&#39;t prepend a potentially unsafe path to sys.path. Accepts: <code>true|false</code>
</p>

<p>
  <strong>Sha3ModuleBackend</strong>
   (Has to be the same for all Contexts in an Engine)
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Choose the backend for the Sha3 module. Accepts: <code>java|native</code>
</p>

<p>
  <strong>StandardStreamEncoding</strong>
   (Has to be the same for all Contexts in an Engine)
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to setting the PYTHONIOENCODING environment variable for the standard launcher. Accepts: <code>&lt;Encoding&gt;[:&lt;errors&gt;]</code>
</p>

<p>
  <strong>StdLibHome</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the location of lib/python. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>SysPrefix</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the location of sys.prefix. Overrides any environment variables or Java options. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>UnbufferedIO</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -u flag. Force stdout and stderr to be unbuffered. Accepts: <code>true|false</code>
</p>

<p>
  <strong>VerboseFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -v flag. Turn on verbose mode. Accepts: <code>true|false</code>
</p>

<p>
  <strong>WarnDefaultEncodingFlag</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to the Python -X warn_default_encoding flag. Enable opt-in EncodingWarning for &#39;encoding=None&#39;. Accepts: <code>true|false</code>
</p>

<p>
  <strong>WarnOptions</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent to setting the PYTHONWARNINGS environment variable for the standard launcher. Accepts: <code>&lt;action&gt;[:&lt;message&gt;[:&lt;category&gt;[:&lt;module&gt;[:&lt;line&gt;]]]][,&lt;action&gt;[:&lt;message&gt;[:&lt;category&gt;[:&lt;module&gt;[:&lt;line&gt;]]]]]</code>
</p>

<p>
  <strong>AlwaysRunExcepthook</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This option is set by the Python launcher to tell the language it can print exceptions directly. Accepts: <code>true|false</code>
</p>

<p>
  <strong>BaseExecutable</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The sys._base_executable path. Set by the launcher, but may need to be overridden in certain special situations. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>Executable</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The sys.executable path. Set by the launcher, but may need to be overridden in certain special situations. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>ForceImportSite</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Force to automatically import site.py module. Accepts: <code>true|false</code>
</p>

<p>
  <strong>InitialLocale</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the language and territory, which will be used for initial locale. Format: &#39;language[_territory]&#39;, e.g., &#39;en_GB&#39;. Leave empty to use the JVM default locale.
</p>

<p>
  <strong>PythonHome</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the home of Python. Equivalent of GRAAL_PYTHONHOME env variable. Determines default values for the CoreHome, StdLibHome, SysBasePrefix, SysPrefix. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>SysBasePrefix</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the location of sys.base_prefix. Overrides any environment variables or Java options. Accepts: <code>&lt;path&gt;</code>
</p>

<p>
  <strong>UnsupportedPlatformEmulates</strong>
   (Has to be the same for all Contexts in an Engine)
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Allow running on unsupported platforms, making GraalPy behave as if running on macOS, Windows, or Linux. This option is useful to run GraalPy on platforms with a compliant Java implementation, but without native support for GraalPy. When this option is set, native libraries cannot be loaded and the Java backends must be used for common operating system libraries provided by Python. Accepts: <code>windows|macos|linux</code>
</p>

<p>
  <strong>VenvlauncherCommand</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option used by the venvlauncher to pass on the launcher target command.
</p>

<p>
  <strong>WarnExperimentalFeatures</strong>
  
</p>
<p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Print warnings when using experimental features at runtime. Accepts: <code>true|false</code>
</p>

<h2 id="native-executables-with-python"><a href="#native-executables-with-python" class="anchor-link">Native Executables with Python</a></h2>

<p>GraalPy supports GraalVM Native Image to generate native binaries of Java applications that embed Python code.</p>

<h3 id="quickstart"><a href="#quickstart" class="anchor-link">Quickstart</a></h3>

<p>If you started with the <a href="#getting-started-with-graalpy-on-the-jvm">Maven archetype</a>, the generated <em>pom.xml</em> file already includes the necessary configuration for creating a native executable using the <a href="https://graalvm.github.io/native-build-tools/latest/maven-plugin.html">Maven plugin for Native Image building</a>.</p>

<p>To build the application, run:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn <span class="nt">-Pnative</span> package
</code></pre></div></div>

<p>This command packages the project and creates a native executable.</p>

<p>The generated <em>pom.xml</em> and <em>Main.java</em> files explain how Python resources are included in the resulting binary.
The generated project serves as a starting point and includes the entire Python standard library by default, allowing your Python code to use any standard library modules.
You can manually remove unused Python libraries to reduce both the executable size and startup time.
The created example demonstrates useful default options for the Python context, but you can adjust these settings to control what your Python code can access.</p>

<h3 id="reducing-binary-size"><a href="#reducing-binary-size" class="anchor-link">Reducing Binary Size</a></h3>

<p>Python is a feature-rich language with an extensive standard library.
This can result in large native executables when embedding GraalPy in Java applications.
You can significantly reduce the size by excluding components your application doesn’t need by considering what your Python code actually uses.</p>

<h4 id="removing-pre-initialized-python-heap"><a href="#removing-pre-initialized-python-heap" class="anchor-link">Removing Pre-initialized Python Heap</a></h4>

<p>By default, GraalPy includes a pre-initialized Python context in the executable for faster startup.
Disabling this reduces the binary size by about 15MiB.
You should remove this if:</p>
<ul>
  <li>You are creating more than one context</li>
  <li>Binary size is more important than a slight startup delay</li>
</ul>

<p>To remove the pre-initialized heap, add this flag to your build configuration:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-Dpolyglot</span>.image-build-time.PreinitializeContexts<span class="o">=</span>
</code></pre></div></div>

<h4 id="disabling-runtime-compilation-of-python-code"><a href="#disabling-runtime-compilation-of-python-code" class="anchor-link">Disabling Runtime Compilation of Python Code</a></h4>

<p>If binary size is significantly more important than execution speed, you can disable JIT compilation entirely.
This will reduce binary size by around 40%.
You should use this if:</p>

<ul>
  <li>Your Python scripts are very short-running</li>
  <li>Performance is not critical</li>
  <li>Your scripts spend most time on I/O operations</li>
</ul>

<p>Be aware that this may significantly impact your Python performance, so be sure to test the runtime behavior of your actual use cases when choosing to use this option.</p>

<p>This can be achieved by passing the following options:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-Dtruffle</span>.TruffleRuntime<span class="o">=</span>com.oracle.truffle.api.impl.DefaultTruffleRuntime
<span class="nt">-Dpolyglot</span>.engine.WarnInterpreterOnly<span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

<h4 id="summary"><a href="#summary" class="anchor-link">Summary</a></h4>

<p>Combining these approaches can reduce the binary size by 50% or more.
Since every application is different, experiment with different combinations to find what works best for your specific use case.</p>

<h3 id="shipping-python-packages"><a href="#shipping-python-packages" class="anchor-link">Shipping Python Packages</a></h3>

<p>Our Maven archetype by default is set up to include all needed Python files in the native binary itself, so the image is self-contained.</p>

<h2 id="python-standalone-applications"><a href="#python-standalone-applications" class="anchor-link">Python Standalone Applications</a></h2>

<p>GraalPy enables you to package your Python applications or libraries into native executables or JAR files with no external dependencies. This means users can run your application without installing Python or any packages.</p>

<p>GraalPy uses the <a href="https://github.com/oracle/graal/tree/master/truffle">Truffle framework</a> to bundle your Python code, dependencies, and the Python runtime into standalone executables. Truffle’s filesystem virtualization allows everything to work from a single file, though packages with native C extensions may have limitations.</p>

<p>GraalPy includes a module named <code>standalone</code> to create a Python binary for Linux, macOS, and Windows. The module bundles all your application’s resources into a single file.</p>

<blockquote>
  <p><strong>Prerequisite:</strong> GraalPy 23.1.0 or later. <a href="https://github.com/oracle/graalpython/releases">Download here</a> or verify your version with <code>graalpy --version</code>.</p>
</blockquote>

<h3 id="quickstart-of-python-standalone-applications"><a href="#quickstart-of-python-standalone-applications" class="anchor-link">Quickstart of Python Standalone Applications</a></h3>

<p>To create an native executable from a Python file with its dependencies, use this command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>graalpy <span class="nt">-m</span> standalone native <span class="se">\</span>
      <span class="nt">--module</span> my_script.py <span class="se">\</span>
      <span class="nt">--output</span> my_binary <span class="se">\</span>
      <span class="nt">--venv</span> my_env
</code></pre></div></div>

<p>Where:</p>

<ul>
  <li><code>--module my_script.py</code> states the main Python file that contains your application’s entry point</li>
  <li><code>--output my_binary</code> states the name for your standalone executable (no file extension needed)</li>
  <li><code>--venv my_env</code> states the path to virtual environment with installed packages (you can omit this if there are no dependencies)</li>
</ul>

<p>This produces a native <em>my_binary</em> file which includes your Python code, the GraalPy runtime, and the Python standard library in a single, self-contained executable.
Use <code>graalpy -m standalone native --help</code> for further options.</p>

<h4 id="security-considerations-of-python-standalone-applications"><a href="#security-considerations-of-python-standalone-applications" class="anchor-link">Security Considerations of Python Standalone Applications</a></h4>

<p>Standalone executables do not protect your source code. Your Python code becomes bytecode, and bytecode can be easily decompiled back to readable Python code.</p>

<h2 id="interoperability"><a href="#interoperability" class="anchor-link">Interoperability</a></h2>

<p>GraalPy can interoperate with Java and other Graal languages that are implemented on the <a href="https://www.graalvm.org/latest/graalvm-as-a-platform/language-implementation-framework/">Truffle framework</a>.
This means that you can use other languages’ objects and functions directly from your Python scripts.
This interoperability works in both directions. Python can call other languages, and other languages can call Python code.</p>

<h3 id="interacting-with-java-from-python-scripts"><a href="#interacting-with-java-from-python-scripts" class="anchor-link">Interacting with Java from Python scripts</a></h3>

<p>Java is the host language of the JVM and runs the GraalPy interpreter itself. This means you can seamlessly access any Java class available in your classpath directly from Python.</p>

<h4 id="basic-java-access"><a href="#basic-java-access" class="anchor-link">Basic Java access</a></h4>

<p>Import the <code>java</code> module to access Java classes and methods:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">java</span>
<span class="n">BigInteger</span> <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="sh">"</span><span class="s">java.math.BigInteger</span><span class="sh">"</span><span class="p">)</span>
<span class="n">myBigInt</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="p">.</span><span class="nf">valueOf</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="c1"># Call Java methods directly
</span><span class="n">myBigInt</span><span class="p">.</span><span class="nf">shiftLeft</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span> <span class="c1"># returns a &lt;JavaObject[java.math.BigInteger] at ...&gt;
# Java method names that are Python keywords must be accessed using `getattr`
</span><span class="nf">getattr</span><span class="p">(</span><span class="n">myBigInt</span><span class="p">,</span> <span class="sh">"</span><span class="s">not</span><span class="sh">"</span><span class="p">)()</span> <span class="c1"># returns a &lt;JavaObject[java.math.BigInteger] at ...&gt;
</span><span class="n">byteArray</span> <span class="o">=</span> <span class="n">myBigInt</span><span class="p">.</span><span class="nf">toByteArray</span><span class="p">()</span>
<span class="c1"># Java arrays can act like Python lists
</span><span class="k">assert</span> <span class="nf">len</span><span class="p">(</span><span class="n">byteArray</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">byteArray</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">42</span>
</code></pre></div></div>

<h4 id="importing-java-packages"><a href="#importing-java-packages" class="anchor-link">Importing Java packages</a></h4>

<p>You can import packages from the <code>java</code> namespace using conventional Python import syntax:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">java.util.ArrayList</span>
<span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">ArrayList</span>
<span class="k">assert</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">ArrayList</span> <span class="o">==</span> <span class="n">ArrayList</span>

<span class="n">al</span> <span class="o">=</span> <span class="nc">ArrayList</span><span class="p">()</span>
<span class="n">al</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">al</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="k">assert</span> <span class="nf">list</span><span class="p">(</span><span class="n">al</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
</code></pre></div></div>

<h4 id="java-module-methods"><a href="#java-module-methods" class="anchor-link">Java module methods</a></h4>

<p>In addition to the <code>type</code> built-in method, the <code>java</code> module exposes the following methods:</p>

<table>
  <thead>
    <tr>
      <th>Built-in</th>
      <th>Specification</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>instanceof(obj, class)</code></td>
      <td>Returns <code>True</code> if <code>obj</code> is an instance of <code>class</code> (<code>class</code> must be a foreign object class).</td>
    </tr>
    <tr>
      <td><code>is_function(obj)</code></td>
      <td>Returns <code>True</code> if <code>obj</code> is a Java host language function wrapped using interop.</td>
    </tr>
    <tr>
      <td><code>is_object(obj)</code></td>
      <td>Returns <code>True</code> if <code>obj</code> is a Java host language object wrapped using interop.</td>
    </tr>
    <tr>
      <td><code>is_symbol(obj)</code></td>
      <td>Returns <code>True</code> if <code>obj</code> is a Java host symbol, representing the constructor and static members of a Java class, as obtained by <code>java.type</code>.</td>
    </tr>
  </tbody>
</table>

<p>Here’s how to use these methods in practice:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ArrayList</span> <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="sh">'</span><span class="s">java.util.ArrayList</span><span class="sh">'</span><span class="p">)</span>
<span class="n">my_list</span> <span class="o">=</span> <span class="nc">ArrayList</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">java</span><span class="p">.</span><span class="nf">is_symbol</span><span class="p">(</span><span class="n">ArrayList</span><span class="p">)</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">java</span><span class="p">.</span><span class="nf">is_symbol</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">java</span><span class="p">.</span><span class="nf">is_object</span><span class="p">(</span><span class="n">ArrayList</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">java</span><span class="p">.</span><span class="nf">is_function</span><span class="p">(</span><span class="n">my_list</span><span class="p">.</span><span class="n">add</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">java</span><span class="p">.</span><span class="nf">instanceof</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span> <span class="n">ArrayList</span><span class="p">)</span>
</code></pre></div></div>

<p>See the <a href="https://github.com/oracle/graal/blob/master/docs/reference-manual/polyglot-programming.md">Polyglot Programming</a> and <a href="https://github.com/oracle/graal/blob/master/docs/reference-manual/embedding/embed-languages.md">Embed Languages</a> documentation for more information about interoperability with other programming languages.</p>

<h3 id="interacting-with-foreign-objects-from-python-scripts"><a href="#interacting-with-foreign-objects-from-python-scripts" class="anchor-link">Interacting with foreign objects from Python scripts</a></h3>

<p>When you use foreign objects in Python, GraalPy automatically makes them behave like their Python equivalents.</p>

<p>For example, a Java <code>ArrayList</code> acts like a Python <code>list</code>, and a Java <code>HashMap</code> acts like a Python <code>dict</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">ArrayList</span><span class="p">,</span> <span class="n">HashMap</span>
<span class="nf">type</span><span class="p">(</span><span class="nc">ArrayList</span><span class="p">()).</span><span class="nf">mro</span><span class="p">()</span> <span class="c1"># =&gt; [&lt;class 'polyglot.ForeignList'&gt;, &lt;class 'list'&gt;, &lt;class 'polyglot.ForeignObject'&gt;, &lt;class 'object'&gt;]
</span><span class="nf">type</span><span class="p">(</span><span class="nc">HashMap</span><span class="p">()).</span><span class="nf">mro</span><span class="p">()</span> <span class="c1"># =&gt; [&lt;class 'polyglot.ForeignDict'&gt;, &lt;class 'dict'&gt;, &lt;class 'polyglot.ForeignObject'&gt;, &lt;class 'object'&gt;]
</span></code></pre></div></div>

<p>This means you can use Python methods on foreign objects:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">ArrayList</span><span class="p">,</span> <span class="n">HashMap</span>
<span class="c1"># ArrayList behaves like a Python list so you can use Python methods
</span><span class="n">l</span> <span class="o">=</span> <span class="nc">ArrayList</span><span class="p">()</span>
<span class="n">l</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Python list method - l: [1]
</span><span class="n">l</span><span class="p">.</span><span class="nf">extend</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="c1"># Python list method - l: [1, 2, 3]
</span><span class="n">l</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># Java ArrayList method still works - l: [1, 2, 3, 4]
</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="c1"># Python slicing works - returns [2, 3]
</span><span class="n">l</span><span class="p">.</span><span class="nf">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Python list method - returns 2, l: [1, 3, 4]
</span><span class="n">l</span><span class="p">.</span><span class="nf">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># Python list method - l: [1, 2, 3, 4]
</span><span class="n">l</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span> <span class="c1"># Python comparison works - True
</span>
<span class="c1"># HashMap behaves like a Python dict so you can use Python methods
</span><span class="n">h</span> <span class="o">=</span> <span class="nc">HashMap</span><span class="p">()</span>
<span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># Python dict syntax - h: {1: 2}
</span><span class="n">h</span><span class="p">.</span><span class="nf">setdefault</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="c1"># Python dict method - h: {1: 2, 3: 4}
</span><span class="n">h</span> <span class="o">|=</span> <span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span> <span class="c1"># Python dict operator - h: {1: 2, 3: 6}
</span><span class="n">h</span> <span class="o">==</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span> <span class="c1"># Python comparison works - True
</span></code></pre></div></div>

<p>When a method is defined both in Python and on the foreign object, the Python’s method takes precedence.</p>

<p>To call the foreign method explicitly, use <code>super(type_owning_the_python_method, foreign_object).method(*args)</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">java.util</span> <span class="kn">import</span> <span class="n">ArrayList</span>
<span class="n">l</span> <span class="o">=</span> <span class="nc">ArrayList</span><span class="p">()</span>
<span class="n">l</span><span class="p">.</span><span class="nf">extend</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>
<span class="n">l</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span> <span class="c1"># Calls Python list.remove()
</span><span class="k">assert</span> <span class="n">l</span> <span class="o">==</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>

<span class="nf">super</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">l</span><span class="p">).</span><span class="nf">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Calls Java's ArrayList.remove()
</span><span class="k">assert</span> <span class="n">l</span> <span class="o">==</span> <span class="p">[</span><span class="mi">6</span><span class="p">]</span>
</code></pre></div></div>

<p>See the <a href="#interop-types-to-python">Interop Types to Python</a> section for more interop traits and how they map to Python types.</p>

<h3 id="interacting-with-other-dynamic-languages-from-python-scripts"><a href="#interacting-with-other-dynamic-languages-from-python-scripts" class="anchor-link">Interacting with other dynamic languages from Python scripts</a></h3>

<p>The <em>polyglot</em> API allows non-JVM specific interactions with other languages from Python scripts.
This includes all interactions with dynamic languages supported via the <a href="https://www.graalvm.org/latest/graalvm-as-a-platform/language-implementation-framework/">Truffle framework</a>, including JavaScript and Ruby.</p>

<h3 id="multi-threading-and-other-languages"><a href="#multi-threading-and-other-languages" class="anchor-link">Multi-threading and other languages</a></h3>

<p>GraalPy implements the Python global interpreter lock (GIL), which prevents any two threads from executing Python code at the same instant.
When methods in other languages are called from Python, no Python code is running while the other language executes.
To give other Python threads a chance to run at this point in time, GraalPy releases the GIL around such foreign method calls by default.
This (un)locking of the GIL can impact performance negatively if the foreign code runs only for a very short while, however, so this behavior can be controlled per dynamic scope using Python context managers.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">JavaFile</span><span class="p">(</span><span class="n">io</span><span class="p">.</span><span class="n">FileIO</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="c1"># Unlock the GIL when doing IO in Java
</span>        <span class="k">with</span> <span class="n">polyglot</span><span class="p">.</span><span class="nf">gil_locked_during_interop</span><span class="p">(</span><span class="bp">False</span><span class="p">):</span>
            <span class="n">self</span><span class="p">.</span><span class="n">java_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<span class="k">with</span> <span class="n">polyglot</span><span class="p">.</span><span class="nf">gil_locked_during_interop</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
    <span class="c1"># Keep the GIL locked when accessing Java maps, because those method calls will return very quickly
</span>    <span class="n">some_file</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">java_map</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">key1</span><span class="p">)</span> <span class="o">+</span> <span class="n">java_map</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">key2</span><span class="p">))</span>
</code></pre></div></div>

<p>Beware of always keeping the GIL locked.
That may lead to deadlocks if the foreign language attempts to wait on another thread of execution, and that thread tries to call back into Python.</p>

<h4 id="installing-other-dynamic-languages"><a href="#installing-other-dynamic-languages" class="anchor-link">Installing other dynamic languages</a></h4>

<p>To use other languages, like JavaScript, you need to add their Maven dependencies to your project.</p>

<p>If you’re using Maven with GraalPy, add the JavaScript dependency to your <em>pom.xml</em> file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.graalvm.polyglot<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>js<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>25.0.2<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<aside>
  <p>For Python developers, you need to install other languages using the <code>libexec/graalpy-polyglot-get</code> command from your GraalPy installation directory.</p>

  <p>To install JavaScript, for example:</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>libexec/graalpy-polyglot-get js
</code></pre></div>  </div>

</aside>

<h4 id="examples"><a href="#examples" class="anchor-link">Examples</a></h4>

<p>Here are practical examples of using the <code>polyglot</code> API to work with JavaScript from Python:</p>

<ol>
  <li>Import the <code>polyglot</code> module to interact with other languages:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">polyglot</span>
</code></pre></div>    </div>
  </li>
  <li>Evaluate inlined code in another language:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">polyglot</span><span class="p">.</span><span class="nf">eval</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="sh">"</span><span class="s">1 + 1</span><span class="sh">"</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="sh">"</span><span class="s">js</span><span class="sh">"</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</code></pre></div>    </div>
  </li>
  <li>Evaluate code from a file:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">./my_js_file.js</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">w</span><span class="sh">"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">Polyglot.export(</span><span class="sh">'</span><span class="s">JSMath</span><span class="sh">'</span><span class="s">, Math)</span><span class="sh">"</span><span class="p">)</span>
<span class="n">polyglot</span><span class="p">.</span><span class="nf">eval</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="sh">"</span><span class="s">./my_js_file.js</span><span class="sh">"</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="sh">"</span><span class="s">js</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>Import a global value from the polyglot scope:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Math</span> <span class="o">=</span> <span class="n">polyglot</span><span class="p">.</span><span class="nf">import_value</span><span class="p">(</span><span class="sh">"</span><span class="s">JSMath</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>This global value should then work as expected:</p>
    <ul>
      <li>Accessing attributes reads from the <em>polyglot members</em> namespace:
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">Math</span><span class="p">.</span><span class="n">E</span> <span class="o">==</span> <span class="mf">2.718281828459045</span>
</code></pre></div>        </div>
      </li>
      <li>Calling a method on the result attempts to do a straight <code>invoke</code> and falls back to reading the member and trying to execute it.
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">Math</span><span class="p">.</span><span class="nf">toString</span><span class="p">()</span> <span class="o">==</span> <span class="sh">"</span><span class="s">[object Math]</span><span class="sh">"</span>
</code></pre></div>        </div>
      </li>
      <li>Accessing items is supported both with strings and numbers.
        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">assert</span> <span class="n">Math</span><span class="p">[</span><span class="sh">"</span><span class="s">PI</span><span class="sh">"</span><span class="p">]</span> <span class="o">==</span> <span class="mf">3.141592653589793</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Use the JavaScript regular expression engine to match Python strings:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">js_re</span> <span class="o">=</span> <span class="n">polyglot</span><span class="p">.</span><span class="nf">eval</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="sh">"</span><span class="s">RegExp()</span><span class="sh">"</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="sh">"</span><span class="s">js</span><span class="sh">"</span><span class="p">)</span>

<span class="n">pattern</span> <span class="o">=</span> <span class="n">js_re</span><span class="p">.</span><span class="nf">compile</span><span class="p">(</span><span class="sh">"</span><span class="s">.*(?:we have (?:a )?matching strings?(?:[!</span><span class="se">\\</span><span class="s">?] )?)(.*)</span><span class="sh">"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">pattern</span><span class="p">.</span><span class="nf">exec</span><span class="p">(</span><span class="sh">"</span><span class="s">This string does not match</span><span class="sh">"</span><span class="p">):</span> <span class="k">raise</span> <span class="nc">SystemError</span><span class="p">(</span><span class="sh">"</span><span class="s">that shouldn</span><span class="sh">'</span><span class="s">t happen</span><span class="sh">"</span><span class="p">)</span>

<span class="n">md</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">.</span><span class="nf">exec</span><span class="p">(</span><span class="sh">"</span><span class="s">Look, we have matching strings! This string was matched by Graal.js</span><span class="sh">"</span><span class="p">)</span>

<span class="k">assert</span> <span class="sh">"</span><span class="s">Graal.js</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">md</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div>    </div>

    <p>This program matches Python strings using the JavaScript regular expression object. Python reads the captured group from the JavaScript result and checks for a substring in it.</p>
  </li>
</ol>

<h3 id="exporting-python-objects-to-other-languages"><a href="#exporting-python-objects-to-other-languages" class="anchor-link">Exporting Python Objects to other languages</a></h3>

<p>Use the <code>polyglot</code> module to expose Python objects to JVM languages and other Graal languages (languages implemented on the <a href="https://www.graalvm.org/latest/graalvm-as-a-platform/language-implementation-framework/">Truffle framework</a>).</p>

<p>This allows other languages to call your Python code directly.</p>

<ol>
  <li>You can export a Python object so other languages can access it:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">ssl</span>
<span class="n">polyglot</span><span class="p">.</span><span class="nf">export_value</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">ssl</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="sh">"</span><span class="s">python_ssl</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>Then use it, for example, from JavaScript code:</p>
    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Polyglot</span><span class="p">.</span><span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">python_ssl</span><span class="dl">'</span><span class="p">).</span><span class="nf">get_server_certificate</span><span class="p">([</span><span class="dl">"</span><span class="s2">oracle.com</span><span class="dl">"</span><span class="p">,</span> <span class="mi">443</span><span class="p">])</span>
</code></pre></div>    </div>
  </li>
  <li>You can decorate a Python function to export it by name:
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@polyglot.export_value</span>
<span class="k">def</span> <span class="nf">python_method</span><span class="p">():</span>
    <span class="k">return</span> <span class="sh">"</span><span class="s">Hello from Python!</span><span class="sh">"</span>
</code></pre></div>    </div>

    <p>Then use it, for example, from Java code:</p>
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.python.embedding.GraalPyResources</span><span class="o">;</span>
   
<span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">(</span><span class="kt">var</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">createContext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="nc">Source</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="s">"file:///python_script.py"</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>

            <span class="nc">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span>
                <span class="nf">getPolyglotBindings</span><span class="o">().</span>
                <span class="n">getMember</span><span class="o">(</span><span class="s">"python_method"</span><span class="o">).</span>
                <span class="n">execute</span><span class="o">().</span>
                <span class="n">asString</span><span class="o">();</span>
            <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"Hello from Python!"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="mapping-types-between-python-and-other-languages"><a href="#mapping-types-between-python-and-other-languages" class="anchor-link">Mapping types between Python and other languages</a></h3>

<p>The interop protocol defines different types and traits that determine foreign objects behavior and restrictions when used in Python.</p>

<h4 id="interop-types-to-python"><a href="#interop-types-to-python" class="anchor-link">Interop Types to Python</a></h4>

<p>All foreign objects passed into Python have the Python type <code>polyglot.ForeignObject</code> or a subclass.</p>

<p>Types not listed in the table below have no special interpretation in Python.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Interop Type</th>
      <th style="text-align: left">Inherits from</th>
      <th style="text-align: left">Python Interpretation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>array</code></td>
      <td style="text-align: left">ForeignList, <code>list</code></td>
      <td style="text-align: left">An <code>array</code> behaves like a Python <code>list</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>boolean</code></td>
      <td style="text-align: left">ForeignBoolean, ForeignNumber</td>
      <td style="text-align: left"><code>boolean</code> behaves like Python booleans, including the fact that in Python, all booleans are also integers (<code>1</code> and <code>0</code> for <code>true</code> and <code>false</code>, respectively).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>buffer</code></td>
      <td style="text-align: left">ForeignObject</td>
      <td style="text-align: left">Buffers work like Python buffer objects (such as those used with <code>memoryview</code>) to avoid copying data.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>exception</code></td>
      <td style="text-align: left">ForeignException, <code>BaseException</code></td>
      <td style="text-align: left">An <code>exception</code> can be caught in a generic <code>except</code> clause.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>executable</code></td>
      <td style="text-align: left">ForeignExecutable</td>
      <td style="text-align: left">An <code>executable</code> object can be executed as a function, but never with keyword arguments.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>hash</code></td>
      <td style="text-align: left">ForeignDict, <code>dict</code></td>
      <td style="text-align: left">A <code>hash</code> behaves like a Python <code>dict</code>, with any “hashable” object as a key. “Hashable” follows Python semantics: generally every interop type with an identity is deemed “hashable”.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>instantiable</code></td>
      <td style="text-align: left">ForeignInstantiable</td>
      <td style="text-align: left">An <code>instantiable</code> object can be called just like a Python type, but never with keyword arguments.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>iterable</code></td>
      <td style="text-align: left">ForeignIterable</td>
      <td style="text-align: left">An <code>iterable</code> is treated in the same way as any Python object with an <code>__iter__</code> method. That is, it can be used in a loop and other places that accept Python iterables.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>iterator</code></td>
      <td style="text-align: left">ForeignIterator, <code>iterator</code></td>
      <td style="text-align: left">An <code>iterator</code> is treated in the same way as any Python object with a <code>__next__</code> method.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>members</code></td>
      <td style="text-align: left">ForeignObject</td>
      <td style="text-align: left">Objects with <code>members</code> can be accessed using Python dot notation (<code>.</code>) or <code>getattr()</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>MetaObject</code></td>
      <td style="text-align: left">ForeignAbstractClass</td>
      <td style="text-align: left">Meta objects can be used in subtype and <code>isinstance</code> checks.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>null</code></td>
      <td style="text-align: left">ForeignNone, <code>NoneType</code></td>
      <td style="text-align: left"><code>null</code> behaves like Python <code>None</code>. All interop null values (including JavaScript <code>undefined</code> and <code>null</code>) are treated as <code>None</code> in Python.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>number</code></td>
      <td style="text-align: left">ForeignNumber</td>
      <td style="text-align: left"><code>number</code> behaves like Python numbers (<code>int</code> and <code>float</code>). Foreign ranges are imported in some places such as typed arrays.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>string</code></td>
      <td style="text-align: left">ForeignString, <code>str</code></td>
      <td style="text-align: left">Behaves in the same way as a Python string.</td>
    </tr>
  </tbody>
</table>

<p>Foreign numbers inherit from <code>polyglot.ForeignNumber</code> and not <code>int</code> or <code>float</code> because <code>InteropLibrary</code> has currently no way to differentiate integers and floats.</p>

<p>However:</p>

<ul>
  <li>When foreign numbers are represented as Java primitives <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, they are considered Python <code>int</code> objects.</li>
  <li>When foreign numbers are represented as Java primitives <code>float</code>, <code>double</code>, they are considered Python <code>float</code> objects.</li>
  <li>When foreign booleans are represented as Java primitives <code>boolean</code>, they are considered Python <code>bool</code> objects.</li>
</ul>

<h4 id="python-to-interop-types"><a href="#python-to-interop-types" class="anchor-link">Python to Interop Types</a></h4>

<p>The following table shows how Python objects are converted to interop types when passed to other languages:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Interop Type</th>
      <th style="text-align: left">Python Interpretation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>array</code></td>
      <td style="text-align: left">Any object with <code>__getitem__</code> and <code>__len__</code> methods, but not if it also has <code>keys</code>, <code>values</code>, and <code>items</code> methods (in the same way that <code>dict</code> does.)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>boolean</code></td>
      <td style="text-align: left">Only subtypes of Python <code>bool</code>. Note that in contrast to Python semantics, Python <code>bool</code> is <em>never</em> also an interop number.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>exception</code></td>
      <td style="text-align: left">Any Python <code>BaseException</code> subtype.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>executable</code></td>
      <td style="text-align: left">Any Python object with a <code>__call__</code> method.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>hash</code></td>
      <td style="text-align: left">Only subtypes of <code>dict</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>instantiable</code></td>
      <td style="text-align: left">Any Python <code>type</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>iterable</code></td>
      <td style="text-align: left">Any Python object that has <code>__iter__</code> or <code>__getitem__</code> methods.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>iterator</code></td>
      <td style="text-align: left">Any Python object with a <code>__next__</code> method.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>members</code></td>
      <td style="text-align: left">Any Python object. Note that the rules for readable/writable are a bit ad-hoc, since checking that is not part of the Python MOP.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>MetaObject</code></td>
      <td style="text-align: left">Any Python <code>type</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>null</code></td>
      <td style="text-align: left">Only <code>None</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>number</code></td>
      <td style="text-align: left">Only subtypes of <code>int</code> and <code>float</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>string</code></td>
      <td style="text-align: left">Only subtypes of <code>str</code>.</td>
    </tr>
  </tbody>
</table>

<h3 id="the-interoperability-extension-api"><a href="#the-interoperability-extension-api" class="anchor-link">The Interoperability Extension API</a></h3>

<p>You can extend the interoperability protocol directly from Python through a simple API defined in the <code>polyglot</code> module.
This API lets you define interoperability behavior for custom or user-defined types that are not automatically supported.
This is particularly useful for external types which are not compatible by default with the interop protocol.
For example, <code>numpy</code> numeric types (for example, <code>numpy.int32</code>) which are not supported by default by the interop protocol need special handling to work properly with other languages.</p>

<p>The <code>polyglot</code> module provides these functions for customizing interop behavior:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Function</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>register_interop_behavior</code></td>
      <td style="text-align: left">Takes the receiver <strong>type</strong> as the first argument. The remaining keyword arguments correspond to the respective interop messages. Not all interop messages are supported.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>get_registered_interop_behavior</code></td>
      <td style="text-align: left">Takes the receiver <strong>type</strong> as the first argument. Returns the list of extended interop messages for the given type.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>@interop_behavior</code></td>
      <td style="text-align: left">Class decorator that takes the receiver <strong>type</strong> as the only argument. The interop messages are extended via <strong>static</strong> methods defined in the decorated class (supplier).</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>register_interop_type</code></td>
      <td style="text-align: left">Takes a <code>foreign class</code> and <code>python class</code> as positional arguments and <code>allow_method_overwrites</code> as an optional argument (default: <code>False</code>). Every instance of the foreign class is then treated as an instance of the given python class.</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>@interop_type</code></td>
      <td style="text-align: left">Class decorator that takes the <code>foreign class</code> and optionally <code>allow_method_overwrites</code> as arguments. The instances of the foreign class will be treated as an instance of the annotated python class.</td>
    </tr>
  </tbody>
</table>

<h4 id="interop-behavior-usage-example"><a href="#interop-behavior-usage-example" class="anchor-link">Interop behavior usage example</a></h4>

<p>You can use the <code>register_interop_behavior</code> API to add custom interop behavior to existing types:</p>

<p>For example, to make <code>numpy.int32</code> work properly with other languages:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">polyglot</span>
<span class="kn">import</span> <span class="n">numpy</span>

<span class="n">polyglot</span><span class="p">.</span><span class="nf">register_interop_behavior</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">int32</span><span class="p">,</span>
    <span class="n">is_number</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">fitsInByte</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="o">-</span><span class="mi">128</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">128</span><span class="p">,</span>
    <span class="n">fitsInShort</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="o">-</span><span class="mh">0x8000</span> <span class="o">&lt;=</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mh">0x8000</span><span class="p">,</span>
    <span class="n">fitsInInt</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">fitsInLong</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">fitsInBigInteger</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">asByte</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">asShort</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">asInt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">asLong</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">asBigInteger</span> <span class="o">=</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Alternatively, you can use the <code>@interop_behavior</code> decorator when you need to define multiple behaviors for a type.
With this decorator, you define interop behaviors using <strong>static</strong> methods in a decorated class.
The static method names must match the keyword argument names used by <code>register_interop_behavior</code>.</p>

<p>The following example uses the decorator approach for <code>numpy.float64</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">polyglot</span> <span class="kn">import</span> <span class="n">interop_behavior</span>
<span class="kn">import</span> <span class="n">numpy</span>


<span class="nd">@interop_behavior</span><span class="p">(</span><span class="n">numpy</span><span class="p">.</span><span class="n">float64</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Float64InteropBehaviorSupplier</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_number</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">fitsInDouble</span><span class="p">(</span><span class="n">_</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">asDouble</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
        <span class="k">return</span> <span class="nf">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</code></pre></div></div>

<p>Both classes can then behave as expected when embedded:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.python.embedding.GraalPyResources</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">(</span><span class="kt">var</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">createContext</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="nc">Files</span><span class="o">.</span><span class="na">readString</span><span class="o">(</span><span class="nc">Path</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"path/to/interop/behavior/script.py"</span><span class="o">)));</span>
            <span class="k">assert</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="s">"numpy.float64(12)"</span><span class="o">).</span><span class="na">asDouble</span><span class="o">()</span> <span class="o">==</span> <span class="mf">12.0</span><span class="o">;</span>
            <span class="k">assert</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="s">"numpy.int32(12)"</span><span class="o">).</span><span class="na">asByte</span><span class="o">()</span> <span class="o">==</span> <span class="mi">12</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="interop-types-usage-example"><a href="#interop-types-usage-example" class="anchor-link">Interop types usage example</a></h4>

<p>The <code>register_interop_type</code> API allows the usage of python classes for foreign objects.
When you register a Python class for a foreign type, instances of that foreign object will no longer have the default <code>polyglot.ForeignObject</code> or <code>polyglot.Foreign* class</code>.
Instead, GraalPy creates a new generated class that inherits from both your Python class and <code>polyglot.ForeignObject</code>.
This lets you add Python methods to foreign objects, and map foreign functionality to Python’s magic methods or more idiomatic Python patterns.</p>

<p>This is a simple Java class to customize:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">org.example</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">MyJavaClass</span> <span class="o">{</span>
      <span class="kd">private</span> <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
      <span class="kd">private</span> <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>

      <span class="kd">public</span> <span class="nf">MyJavaClass</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getX</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">x</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getY</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">y</span><span class="o">;</span>
      <span class="o">}</span>
   <span class="o">}</span>
</code></pre></div></div>

<p>The following snippet sets up the Java environment and makes the object available to Python:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.example.MyJavaClass</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.python.embedding.GraalPyResources</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>

   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">MyJavaClass</span> <span class="n">myJavaObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyJavaClass</span><span class="o">(</span><span class="mi">42</span><span class="o">,</span> <span class="mi">17</span><span class="o">);</span>
      <span class="k">try</span> <span class="o">(</span><span class="kt">var</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">createContext</span><span class="o">())</span> <span class="o">{</span>
         <span class="c1">// myJavaObject will be globally available in example.py as my_java_object</span>
         <span class="n">context</span><span class="o">.</span><span class="na">getBindings</span><span class="o">(</span><span class="s">"python"</span><span class="o">).</span><span class="na">putMember</span><span class="o">(</span><span class="s">"my_java_object"</span><span class="o">,</span> <span class="n">myJavaObject</span><span class="o">);</span>
         <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="nc">Source</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="s">"example.py"</span><span class="o">));</span>
      <span class="o">}</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This snippet states how to customize the Java object’s behavior using Python classes:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># example.py
</span><span class="kn">import</span> <span class="n">java</span>
<span class="kn">from</span> <span class="n">polyglot</span> <span class="kn">import</span> <span class="n">register_interop_type</span>

<span class="nf">print</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">.</span><span class="nf">getX</span><span class="p">())</span> <span class="c1"># 42
</span><span class="nf">print</span><span class="p">(</span><span class="nf">type</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">))</span> <span class="c1"># &lt;class 'polyglot.ForeignObject'&gt;
</span>
<span class="k">class</span> <span class="nc">MyPythonClass</span><span class="p">:</span>
   <span class="k">def</span> <span class="nf">get_tuple</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
      <span class="nf">return </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="nf">getX</span><span class="p">(),</span> <span class="n">self</span><span class="p">.</span><span class="nf">getY</span><span class="p">())</span>

<span class="n">foreign_class</span> <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="sh">"</span><span class="s">org.example.MyJavaClass</span><span class="sh">"</span><span class="p">)</span>

<span class="nf">register_interop_type</span><span class="p">(</span><span class="n">foreign_class</span><span class="p">,</span> <span class="n">MyPythonClass</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">.</span><span class="nf">get_tuple</span><span class="p">())</span> <span class="c1"># (42, 17)
</span><span class="nf">print</span><span class="p">(</span><span class="nf">type</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">))</span> <span class="c1"># &lt;class 'polyglot.Java_org.example.MyJavaClass_generated'&gt;
</span><span class="nf">print</span><span class="p">(</span><span class="nf">type</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">).</span><span class="nf">mro</span><span class="p">())</span> <span class="c1"># [polyglot.Java_org.example.MyJavaClass_generated, MyPythonClass, polyglot.ForeignObject, object]
</span>
<span class="k">class</span> <span class="nc">MyPythonClassTwo</span><span class="p">:</span>
   <span class="k">def</span> <span class="nf">get_tuple</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
      <span class="nf">return </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="nf">getY</span><span class="p">(),</span> <span class="n">self</span><span class="p">.</span><span class="nf">getX</span><span class="p">())</span>

   <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">MyJavaInstance(x=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="nf">getX</span><span class="p">()</span><span class="si">}</span><span class="s">, y=</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="nf">getY</span><span class="p">()</span><span class="si">}</span><span class="s">)</span><span class="sh">"</span>

<span class="c1"># If 'allow_method_overwrites=True' is not given, this would lead to an error due to the method conflict of 'get_tuple'
</span><span class="nf">register_interop_type</span><span class="p">(</span><span class="n">foreign_class</span><span class="p">,</span> <span class="n">MyPythonClassTwo</span><span class="p">,</span> <span class="n">allow_method_overwrites</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># A newly registered class will be before already registered classes in the mro.
# It allows overwriting methods from already registered classes with the flag 'allow_method_overwrites=True'
</span><span class="nf">print</span><span class="p">(</span><span class="nf">type</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">).</span><span class="nf">mro</span><span class="p">())</span> <span class="c1"># [generated_class, MyPythonClassTwo, MyPythonClass, polyglot.ForeignObject, object]
</span>
<span class="nf">print</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">.</span><span class="nf">get_tuple</span><span class="p">())</span> <span class="c1"># (17, 42)
</span><span class="nf">print</span><span class="p">(</span><span class="n">my_java_object</span><span class="p">)</span> <span class="c1"># MyJavaInstance(x=42, y=17)
</span></code></pre></div></div>

<p>For simpler cases, you can use the <code>@interop_type</code> decorator:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">java</span>
<span class="kn">from</span> <span class="n">polyglot</span> <span class="kn">import</span> <span class="n">interop_type</span>

<span class="n">foreign_class</span> <span class="o">=</span> <span class="n">java</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="sh">"</span><span class="s">org.example.MyJavaClass</span><span class="sh">"</span><span class="p">)</span>

<span class="nd">@interop_type</span><span class="p">(</span><span class="n">foreign_class</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyPythonClass</span><span class="p">:</span>
   <span class="k">def</span> <span class="nf">get_tuple</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
      <span class="nf">return </span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="nf">getX</span><span class="p">(),</span> <span class="n">self</span><span class="p">.</span><span class="nf">getY</span><span class="p">())</span>
</code></pre></div></div>

<h4 id="supported-messages"><a href="#supported-messages" class="anchor-link">Supported messages</a></h4>

<p>Most interop messages are supported by the interop behavior extension API. The naming convention for <code>register_interop_behavior</code> keyword arguments uses <em>snake_case</em>, so the interop <code>fitsInLong</code> message becomes <code>fits_in_long</code>. 
Each message can be extended with either a <strong>pure Python function</strong> (no default keyword arguments, free vars, or cell vars allowed) or a <strong>boolean constant</strong>.</p>

<p>The following table describes the supported interop messages:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Message</th>
      <th style="text-align: left">Extension argument name</th>
      <th style="text-align: left">Expected return type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code>isBoolean</code></td>
      <td style="text-align: left"><code>is_boolean</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isDate</code></td>
      <td style="text-align: left"><code>is_date</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isDuration</code></td>
      <td style="text-align: left"><code>is_duration</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isExecutable</code></td>
      <td style="text-align: left"><code>is_executable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isIterator</code></td>
      <td style="text-align: left"><code>is_iterator</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isNumber</code></td>
      <td style="text-align: left"><code>is_number</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isString</code></td>
      <td style="text-align: left"><code>is_string</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isTime</code></td>
      <td style="text-align: left"><code>is_time</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isTimeZone</code></td>
      <td style="text-align: left"><code>is_time_zone</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>fitsInBigInteger</code></td>
      <td style="text-align: left"><code>fits_in_big_integer</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>fitsInByte</code></td>
      <td style="text-align: left"><code>fits_in_byte</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>fitsInDouble</code></td>
      <td style="text-align: left"><code>fits_in_double</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>fitsInFloat</code></td>
      <td style="text-align: left"><code>fits_in_float</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>fitsInInt</code></td>
      <td style="text-align: left"><code>fits_in_int</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>fitsInLong</code></td>
      <td style="text-align: left"><code>fits_in_long</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>fitsInShort</code></td>
      <td style="text-align: left"><code>fits_in_short</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asBigInteger</code></td>
      <td style="text-align: left"><code>as_big_integer</code></td>
      <td style="text-align: left"><code>int</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asBoolean</code></td>
      <td style="text-align: left"><code>as_boolean</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asByte</code></td>
      <td style="text-align: left"><code>as_byte</code></td>
      <td style="text-align: left"><code>int</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asDate</code></td>
      <td style="text-align: left"><code>as_date</code></td>
      <td style="text-align: left">tuple: (<code>year</code>: int, <code>month</code>: int, <code>day</code>: int)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asDouble</code></td>
      <td style="text-align: left"><code>as_double</code></td>
      <td style="text-align: left"><code>float</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asDuration</code></td>
      <td style="text-align: left"><code>as_duration</code></td>
      <td style="text-align: left">tuple: (<code>seconds</code>: int, <code>nano_adjustment</code>: int)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asFloat</code></td>
      <td style="text-align: left"><code>as_float</code></td>
      <td style="text-align: left"><code>float</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asInt</code></td>
      <td style="text-align: left"><code>as_int</code></td>
      <td style="text-align: left"><code>int</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asLong</code></td>
      <td style="text-align: left"><code>as_long</code></td>
      <td style="text-align: left"><code>int</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asShort</code></td>
      <td style="text-align: left"><code>as_short</code></td>
      <td style="text-align: left"><code>int</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asString</code></td>
      <td style="text-align: left"><code>as_string</code></td>
      <td style="text-align: left"><code>str</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asTime</code></td>
      <td style="text-align: left"><code>as_time</code></td>
      <td style="text-align: left">tuple: (<code>hour</code>: int, <code>minute</code>: int, <code>second</code>: int, <code>microsecond</code>: int)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>asTimeZone</code></td>
      <td style="text-align: left"><code>as_time_zone</code></td>
      <td style="text-align: left"><code>str</code> (timezone name) or <code>int</code> (UTC delta in seconds)</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>execute</code></td>
      <td style="text-align: left"><code>execute</code></td>
      <td style="text-align: left"><code>object</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>readArrayElement</code></td>
      <td style="text-align: left"><code>read_array_element</code></td>
      <td style="text-align: left"><code>object</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>getArraySize</code></td>
      <td style="text-align: left"><code>get_array_size</code></td>
      <td style="text-align: left"><code>int</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>hasArrayElements</code></td>
      <td style="text-align: left"><code>has_array_elements</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isArrayElementReadable</code></td>
      <td style="text-align: left"><code>is_array_element_readable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isArrayElementModifiable</code></td>
      <td style="text-align: left"><code>is_array_element_modifiable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isArrayElementInsertable</code></td>
      <td style="text-align: left"><code>is_array_element_insertable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isArrayElementRemovable</code></td>
      <td style="text-align: left"><code>is_array_element_removable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>removeArrayElement</code></td>
      <td style="text-align: left"><code>remove_array_element</code></td>
      <td style="text-align: left"><code>None</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>writeArrayElement</code></td>
      <td style="text-align: left"><code>write_array_element</code></td>
      <td style="text-align: left"><code>None</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>hasIterator</code></td>
      <td style="text-align: left"><code>has_iterator</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>hasIteratorNextElement</code></td>
      <td style="text-align: left"><code>has_iterator_next_element</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>getIterator</code></td>
      <td style="text-align: left"><code>get_iterator</code></td>
      <td style="text-align: left">Python iterator</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>getIteratorNextElement</code></td>
      <td style="text-align: left"><code>get_iterator_next_element</code></td>
      <td style="text-align: left"><code>object</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>hasHashEntries</code></td>
      <td style="text-align: left"><code>has_hash_entries</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>getHashEntriesIterator</code></td>
      <td style="text-align: left"><code>get_hash_entries_iterator</code></td>
      <td style="text-align: left">Python iterator</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>getHashKeysIterator</code></td>
      <td style="text-align: left"><code>get_hash_keys_iterator</code></td>
      <td style="text-align: left">Python iterator</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>getHashSize</code></td>
      <td style="text-align: left"><code>get_hash_size</code></td>
      <td style="text-align: left"><code>int</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>getHashValuesIterator</code></td>
      <td style="text-align: left"><code>get_hash_values_iterator</code></td>
      <td style="text-align: left">Python iterator</td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isHashEntryReadable</code></td>
      <td style="text-align: left"><code>is_hash_entry_readable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isHashEntryModifiable</code></td>
      <td style="text-align: left"><code>is_hash_entry_modifiable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isHashEntryInsertable</code></td>
      <td style="text-align: left"><code>is_hash_entry_insertable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>isHashEntryRemovable</code></td>
      <td style="text-align: left"><code>is_hash_entry_removable</code></td>
      <td style="text-align: left"><code>bool</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>readHashValue</code></td>
      <td style="text-align: left"><code>read_hash_value</code></td>
      <td style="text-align: left"><code>object</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>writeHashEntry</code></td>
      <td style="text-align: left"><code>write_hash_entry</code></td>
      <td style="text-align: left"><code>None</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code>removeHashEntry</code></td>
      <td style="text-align: left"><code>remove_hash_entry</code></td>
      <td style="text-align: left"><code>None</code></td>
    </tr>
  </tbody>
</table>

<h2 id="embedding-build-tools"><a href="#embedding-build-tools" class="anchor-link">Embedding Build Tools</a></h2>

<blockquote>
  <p><strong>Note</strong>: The GraalPy build tools are being developed <a href="https://github.com/oracle/graalpy-extensions">GraalPy Extensions repository</a> on GitHub.</p>
</blockquote>

<p>The GraalPy <strong>Maven</strong> and <strong>Gradle</strong> plugins simplify embedding Python in Java applications by automatically managing Python resources during your build process:</p>

<ul>
  <li><strong>Your Python code</strong>: Application files, modules, and scripts that are part of your project</li>
  <li><strong>Third-party packages</strong>: Python libraries (like NumPy, requests) automatically installed in the build according to your plugin configuration.</li>
</ul>

<p>These plugins handle the complexity of packaging Python code with your Java application, ensuring all dependencies are available at runtime but you need to configure your Java application to access them at runtime.
The <a href="https://github.com/oracle/graalpy-extensions/blob/main/org.graalvm.python.embedding/src/main/java/org/graalvm/python/embedding/GraalPyResources.java">GraalPyResources</a> API provides factory methods that create a preconfigured GraalPy Context.</p>

<blockquote>
  <p>The preconfigured GraalPy Context is a GraalVM Context that has been automatically set up with the right settings to access your Python resources without you having to manually configure all the details.</p>
</blockquote>

<h3 id="deployment"><a href="#deployment" class="anchor-link">Deployment</a></h3>

<p>You can choose between two deployment approaches:</p>

<ul>
  <li><strong>Virtual Filesystem</strong>: Resources are embedded within your JAR or executable</li>
  <li><strong>External Directory</strong>: Resources are stored in a separate directory</li>
</ul>

<h4 id="virtual-filesystem"><a href="#virtual-filesystem" class="anchor-link">Virtual Filesystem</a></h4>

<p>With the Virtual Filesystem approach, your Python resources are embedded directly inside your JAR file or Native Image executable as standard Java resources. This creates a self-contained application with everything bundled together.</p>

<p>This approach involves the following steps:</p>

<ul>
  <li>Python files are packaged as Java resources in dedicated resource directories (like <code>src/main/resources</code>)</li>
  <li>Multiple resource directories are merged during the build process by Maven or Gradle</li>
  <li>You can configure the Java resource path (default: <code>org.graalvm.python.vfs</code>) that gets mapped to a Virtual Filesystem mount point in Python (default: <code>/graalpy_vfs</code>)</li>
  <li>GraalPy’s Virtual Filesystem transparently maps these resources to Python file paths</li>
  <li>Your Python code can use normal file operations (<code>open()</code>, <code>import</code>, etc.) without knowing the files are embedded</li>
</ul>

<p>For example, a file at <code>src/main/resources/org.graalvm.python.vfs/src/mymodule.py</code> becomes accessible to Python as <code>/graalpy_vfs/src/mymodule.py</code>.</p>

<p>You can customize the resource path (default: <code>org.graalvm.python.vfs</code>) and mount point (default: <code>/graalpy_vfs</code>) to avoid conflicts with other libraries.</p>

<p>To use the Virtual Filesystem in your Java application, use the factory methods in the <a href="https://github.com/oracle/graalpy-extensions/blob/main/org.graalvm.python.embedding/src/main/java/org/graalvm/python/embedding/GraalPyResources.java">GraalPyResources</a> API:</p>

<ul>
  <li><code>GraalPyResources.createContext()</code> - Creates a ready-to-use context with default Virtual Filesystem configuration</li>
  <li><code>GraalPyResources.contextBuilder()</code> - Returns a context builder for additional customization before creating the context</li>
  <li><code>GraalPyResources.contextBuilder(VirtualFileSystem)</code> - Returns a context builder with a custom Virtual Filesystem configuration</li>
</ul>

<h5 id="java-resource-path"><a href="#java-resource-path" class="anchor-link">Java Resource Path</a></h5>

<p>When building reusable libraries, use a unique Java resource path to prevent conflicts with other Virtual Filesystem users. This ensures your library’s Python resources don’t interfere with other libraries on the classpath.</p>

<p>The recommended path is:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRAALPY-VFS/<span class="k">${</span><span class="nv">project</span><span class="p">.groupId</span><span class="k">}</span>/<span class="k">${</span><span class="nv">project</span><span class="p">.artifactId</span><span class="k">}</span>
</code></pre></div></div>

<p>This path must be configured identically in both your build plugin and runtime code using the <code>VirtualFileSystem$Builder#resourceDirectory</code> API.</p>

<blockquote>
  <p><strong>Java Module System compatibility:</strong> The “GRAALPY-VFS” prefix bypasses module encapsulation rules since it’s not a valid Java package name, eliminating the need for additional module system configuration that would otherwise be required for accessing resources in named modules.</p>
</blockquote>

<h5 id="extracting-files-from-virtual-filesystem"><a href="#extracting-files-from-virtual-filesystem" class="anchor-link">Extracting files from Virtual Filesystem</a></h5>

<p>Some files need to exist on the real filesystem rather than staying embedded as Java resources.</p>

<p>This is required for Python C extensions (<code>.so</code>, <code>.dylib</code>, <code>.pyd</code>, <code>.dll</code>) and font files (<code>.ttf</code>) that must be accessed by the operating system loader outside the Truffle sandbox.
GraalPy automatically extracts these file types to a temporary directory when first accessed, then delegates to the real files for subsequent operations.</p>

<p>Use the <code>VirtualFileSystem$Builder#extractFilter</code> API to modify which files get extracted automatically. For full control, extract all resources to a user-defined directory before creating your GraalPy context:</p>

<ul>
  <li><code>GraalPyResources.extractVirtualFileSystemResources(VirtualFileSystem vfs, Path externalResourcesDirectory)</code> - Extract resources to a specified directory</li>
  <li><code>GraalPyResources.contextBuilder(Path externalResourcesDirectory)</code> - Create a context builder using the extracted resources directory</li>
</ul>

<p>For more information, see <a href="https://github.com/oracle/graalpy-extensions/blob/main/org.graalvm.python.embedding/src/main/java/org/graalvm/python/embedding/GraalPyResources.java">GraalPyResources</a>.</p>

<h4 id="external-directory"><a href="#external-directory" class="anchor-link">External Directory</a></h4>

<p>With the External Directory approach, your Python resources are stored in a separate directory on the filesystem rather than being embedded as Java resources. This creates a deployment where Python files exist as regular files that you must distribute alongside your application.</p>

<p>This approach involves the following steps:</p>

<ul>
  <li>Python files remain as regular filesystem files (not embedded as Java resources)</li>
  <li>You are responsible for deploying and managing the external directory</li>
  <li>Python code accesses files directly from the real filesystem</li>
  <li>Smaller JAR/executable size since Python resources aren’t embedded</li>
</ul>

<p>To use an external directory, create your GraalPy context with:</p>
<ul>
  <li><code>GraalPyResources.createContextBuilder(Path)</code> - Creates a context builder pointing to your external directory path</li>
</ul>

<h3 id="directory-structure"><a href="#directory-structure" class="anchor-link">Directory Structure</a></h3>

<p>The <a href="https://github.com/oracle/graalpy-extensions/blob/main/org.graalvm.python.embedding/src/main/java/org/graalvm/python/embedding/GraalPyResources.java">GraalPyResources</a> factory methods rely on this directory structure, which includes a standard <a href="https://docs.python.org/3.11/tutorial/venv.html">Python virtual environment</a> in the <code>venv</code> subdirectory:</p>

<table>
  <thead>
    <tr>
      <th>Directory</th>
      <th>Purpose</th>
      <th>Management</th>
      <th>Python Path</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>${root}/src/</code></td>
      <td>Your Python application code</td>
      <td><strong>You manage</strong></td>
      <td>Default search path (equivalent to <code>PYTHONPATH</code>)</td>
    </tr>
    <tr>
      <td><code>${root}/venv/</code></td>
      <td>Third-party Python packages</td>
      <td><strong>Plugin manages</strong></td>
      <td>Context configured as if executed from this virtual environment</td>
    </tr>
  </tbody>
</table>

<p>The <code>${root}</code> placeholder refers to different locations depending on your deployment approach:</p>

<ul>
  <li><strong>Virtual Filesystem</strong>: <code>/graalpy_vfs</code> (Python) / <code>${project_resources_directory}/org.graalvm.python.vfs</code> (Java)</li>
  <li><strong>External Directory</strong>: Filesystem path like <code>python-resources/</code></li>
</ul>

<p>The GraalPy Context is automatically configured to run within this virtual environment, making all installed packages available for import.</p>

<blockquote>
  <p><strong>Important</strong>: Plugin completely manages <code>venv/</code> - any manual changes will be overridden during builds.</p>
</blockquote>

<h3 id="python-dependency-management-for-reproducible-builds"><a href="#python-dependency-management-for-reproducible-builds" class="anchor-link">Python Dependency Management for Reproducible Builds</a></h3>

<p>Python packages typically specify dependencies as version ranges (e.g., <code>B&gt;=2.0.0</code>) rather than fixed versions.
This means today’s build might install <code>B==2.0.0</code>, but tomorrow’s clean build could pull the newly released <code>B==2.0.1</code>, potentially introducing breaking changes or GraalPy incompatibilities.</p>

<h4 id="locking-dependencies"><a href="#locking-dependencies" class="anchor-link">Locking Dependencies</a></h4>

<p><strong>We highly recommend locking all Python dependencies</strong> when packages change. Run a Maven goal or Gradle task to generate <em>graalpy.lock</em>, which captures exact versions of all dependencies (those specified explicitly in the <em>pom.xml</em> or <em>build.gradle</em> files and all their transitive dependencies).</p>

<p>Commit the <em>graalpy.lock</em> file to version control (e.g., git). Once this file exists, Maven or Gradle builds will install the exact same package versions captured in the <em>graalpy.lock</em> file.</p>

<p>If you modify dependencies in <em>pom.xml</em> or <em>build.gradle</em> and they no longer match what’s in <em>graalpy.lock</em>, the build will fail and the user will be asked to explicitly regenerate the <em>graalpy.lock</em> file.</p>

<p>We recommend specifying dependencies without version numbers in the <em>pom.xml</em> or <em>build.gradle</em> file. GraalPy automatically installs compatible versions for well-known packages.</p>

<p>Once installed, lock these versions to ensure reproducible builds.</p>

<p>See the “Locking Python Packages” sections below for specific Maven and Gradle commands.</p>

<p>For information on the specific Maven or Gradle lock packages actions, see the <a href="#locking-python-packages">Locking Python Packages</a> section.</p>

<h3 id="graalpy-maven-plugin"><a href="#graalpy-maven-plugin" class="anchor-link">GraalPy Maven Plugin</a></h3>

<p>The GraalPy Maven Plugin automates Python resource management in Maven-based Java projects. It downloads Python packages, creates virtual environments, and configures deployment for both Virtual Filesystem (embedded) and External Directory approaches.</p>

<h4 id="maven-plugin-configuration"><a href="#maven-plugin-configuration" class="anchor-link">Maven Plugin Configuration</a></h4>

<p>Configure the plugin in your <em>pom.xml</em> file with these elements:</p>

<table>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>packages</code></td>
      <td>Python dependencies using pip syntax (e.g., <code>requests&gt;=2.25.0</code>) - optional</td>
    </tr>
    <tr>
      <td><code>requirementsFile</code></td>
      <td>Path to pip-compatible <em>requirements.txt</em> file - optional, mutually exclusive with <code>packages</code></td>
    </tr>
    <tr>
      <td><code>resourceDirectory</code></td>
      <td>Custom path for <a href="#virtual-filesystem">Virtual Filesystem</a> deployment (must match Java runtime configuration)</td>
    </tr>
    <tr>
      <td><code>externalDirectory</code></td>
      <td>Path for <a href="#external-directory">External Directory</a> deployment (mutually exclusive with <code>resourceDirectory</code>)</td>
    </tr>
  </tbody>
</table>

<p>Add the plugin configuration to your <em>pom.xml</em> file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.graalvm.python<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>graalpy-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
        <span class="c">&lt;!-- Python packages (pip-style syntax) --&gt;</span>
        <span class="nt">&lt;packages&gt;</span>
            <span class="nt">&lt;package&gt;</span>termcolor==2.2<span class="nt">&lt;/package&gt;</span>
        <span class="nt">&lt;/packages&gt;</span>
        
        <span class="c">&lt;!-- Choose ONE deployment approach: --&gt;</span>
        <span class="c">&lt;!-- Virtual Filesystem (embedded) --&gt;</span>
        <span class="nt">&lt;resourceDirectory&gt;</span>GRAALPY-VFS/${project.groupId}/${project.artifactId}<span class="nt">&lt;/resourceDirectory&gt;</span>
        
        <span class="c">&lt;!-- OR External Directory (separate files) --&gt;</span>
        <span class="nt">&lt;externalDirectory&gt;</span>${basedir}/python-resources<span class="nt">&lt;/externalDirectory&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div>

<h5 id="using-requirementstxt"><a href="#using-requirementstxt" class="anchor-link">Using </a><code>requirements.txt</code></h5>

<p>The <code>requirementsFile</code> element declares a path to a pip-compatible <em>requirements.txt</em> file.
When configured, the plugin forwards this file directly to pip using <code>pip install -r</code>,
allowing full use of pip’s native dependency format.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;requirementsFile&gt;</span>requirements.txt<span class="nt">&lt;/requirementsFile&gt;</span>
    ...
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Important:</strong> You must configure either <code>packages</code> or <code>requirementsFile</code>, but not both.</p>

  <p>When <code>requirementsFile</code> is used:</p>
  <ul>
    <li>the GraalPy lock file is <strong>not created and not used</strong></li>
    <li>the <code>lock-packages</code> goal is <strong>disabled</strong></li>
    <li>dependency locking must be handled externally by pip (for example using <code>pip freeze</code>)</li>
  </ul>

  <p>Mixing <code>packages</code> and <code>requirementsFile</code> in the same configuration is not supported.</p>
</blockquote>

<h5 id="excluding-build-only-packages"><a href="#excluding-build-only-packages" class="anchor-link">Excluding Build-Only Packages</a></h5>

<p>You can remove build-only packages from final JAR using <code>maven-jar-plugin</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;plugin&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.4.2<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;excludes&gt;</span>
            <span class="nt">&lt;exclude&gt;</span>**/site-packages/pip*/**<span class="nt">&lt;/exclude&gt;</span>
            <span class="nt">&lt;exclude&gt;</span>**/site-packages/setuptools*/**<span class="nt">&lt;/exclude&gt;</span>
        <span class="nt">&lt;/excludes&gt;</span>
    <span class="nt">&lt;/configuration&gt;</span>
  <span class="nt">&lt;/plugin&gt;</span>
</code></pre></div></div>

<h4 id="locking-python-packages"><a href="#locking-python-packages" class="anchor-link">Locking Python Packages</a></h4>

<p>Generate a lock file to ensure reproducible builds:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mvn org.graalvm.python:graalpy-maven-plugin:lock-packages
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> This action overwrites any existing <em>graalpy.lock</em> file.</p>
</blockquote>

<p>To customize the lock file path, configure <em>graalPyLockFile</em> :</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;graalPyLockFile&gt;</span>${basedir}/graalpy.lock<span class="nt">&lt;/graalPyLockFile&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> This only changes the path (defaults to <em>${basedir}/graalpy.lock</em>). To generate the lock file, run the <code>lock-packages</code> goal.</p>
</blockquote>

<p>For more information of this feature, please see the
<a href="#python-dependency-management-for-reproducible-builds">Python Dependency Management for Reproducible Builds</a> section.</p>

<h3 id="graalpy-gradle-plugin"><a href="#graalpy-gradle-plugin" class="anchor-link">GraalPy Gradle Plugin</a></h3>

<p>The GraalPy Gradle Plugin automates Python resource management in Gradle-based Java projects. It downloads Python packages, creates virtual environments, and configures deployment for both Virtual Filesystem (embedded) and External Directory approaches.</p>

<h4 id="gradle-plugin-configuration"><a href="#gradle-plugin-configuration" class="anchor-link">Gradle Plugin Configuration</a></h4>

<p>Configure the plugin in your <em>build.gradle</em> file with these elements:</p>

<table>
  <thead>
    <tr>
      <th>Element</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>packages</code></td>
      <td>Python dependencies using pip syntax (e.g., <code>requests&gt;=2.25.0</code>)</td>
    </tr>
    <tr>
      <td><code>resourceDirectory</code></td>
      <td>Custom path for <a href="#virtual-filesystem">Virtual Filesystem</a> deployment (must match Java runtime configuration)</td>
    </tr>
    <tr>
      <td><code>externalDirectory</code></td>
      <td>Path for <a href="#external-directory">External Directory</a> deployment (mutually exclusive with <code>resourceDirectory</code>)</td>
    </tr>
  </tbody>
</table>

<p>Add the plugin configuration to your <em>build.gradle</em> file:</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
    <span class="n">id</span> <span class="s1">'org.graalvm.python'</span> <span class="n">version</span> <span class="s1">'25.0.2'</span>
<span class="o">}</span>

<span class="n">graalPy</span> <span class="o">{</span>
    <span class="c1">// Python packages (pip-style syntax)</span>
    <span class="n">packages</span> <span class="o">=</span> <span class="o">[</span><span class="s2">"termcolor==2.2"</span><span class="o">]</span>
    
    <span class="c1">// Choose ONE deployment approach:</span>
    <span class="c1">// Virtual Filesystem (embedded)</span>
    <span class="n">resourceDirectory</span> <span class="o">=</span> <span class="s2">"GRAALPY-VFS/my.group.id/artifact.id"</span>
    
    <span class="c1">// OR External Directory (separate files)</span>
    <span class="n">externalDirectory</span> <span class="o">=</span> <span class="n">file</span><span class="o">(</span><span class="s2">"$rootDir/python-resources"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The plugin automatically injects these dependencies of the same version as the plugin version:</p>

<ul>
  <li><code>org.graalvm.python:python</code></li>
  <li><code>org.graalvm.python:python-embedding</code></li>
</ul>

<h4 id="locking-python-packages-1"><a href="#locking-python-packages-1" class="anchor-link">Locking Python Packages</a></h4>

<p>Generate a lock file to ensure reproducible builds:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gradle graalPyLockPackages
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> This overwrites any existing <em>graalpy.lock</em> file.</p>
</blockquote>

<p>To customize the lock file path, configure <em>graalPyLockFile</em>:</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">graalPy</span> <span class="o">{</span>
    <span class="n">graalPyLockFile</span> <span class="o">=</span> <span class="n">file</span><span class="o">(</span><span class="s2">"$rootDir/graalpy.lock"</span><span class="o">)</span>
    <span class="o">...</span>
  <span class="o">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> This only changes the path (defaults to <em>$rootDir/graalpy.lock</em>). To generate the lock file, run the <code>graalPyLockPackages</code> task.</p>
</blockquote>

<p>For more information of this feature, please see the
<a href="#python-dependency-management-for-reproducible-builds">Python Dependency Management for Reproducible Builds</a> section.</p>

<h3 id="related-documentation"><a href="#related-documentation" class="anchor-link">Related Documentation</a></h3>

<ul>
  <li><a href="https://www.graalvm.org/reference-manual/embed-languages/">Embedding Graal languages in Java</a></li>
  <li><a href="#permissions-for-python-embeddings">Permissions for Python Embeddings</a></li>
  <li><a href="https://github.com/oracle/graalpy-extensions">GraalPy extensions on GitHub</a></li>
</ul>

<h2 id="permissions-for-python-embeddings"><a href="#permissions-for-python-embeddings" class="anchor-link">Permissions for Python Embeddings</a></h2>

<p>When embedding GraalPy in Java applications, you need to understand how Python scripts access system resources and what security limitations apply.</p>

<p>GraalPy integrates with the <a href="https://www.graalvm.org/latest/reference-manual/embed-languages/#controlling-access-to-host-functions">GraalVM Polyglot Sandbox</a> to provide configurable access control for embedded Python code.</p>

<h3 id="pythons-posix-interface"><a href="#pythons-posix-interface" class="anchor-link">Python</a>’s POSIX Interface</h3>

<p>GraalPy exposes the operating system interface to Python scripts in a GraalPy-specific way.
By default, all access is routed through Java interfaces, but some packages rely on POSIX API details and require direct native access.</p>

<p>Graal languages (implemented on the <a href="https://www.graalvm.org/latest/graalvm-as-a-platform/language-implementation-framework/">Truffle framework</a>) typically implement system-related functions using the <a href="https://github.com/oracle/graal/blob/master/truffle/docs/README.md">Truffle abstraction layer</a>. This layer is OS-independent and provides extension points when embedding GraalPy or other Graal languages into Java applications. For example, see the <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/io/FileSystem.html">Truffle FileSystem service-provider</a>.</p>

<p>The standard Python library also provides an OS abstraction, but exposes lower level interfaces. For example, the <code>os</code> module directly exposes some POSIX functions.
On non-POSIX platforms, this interface is emulated to a degree.</p>

<p>GraalPy provides two alternative implementations (“backends”) of system-related functionality for built-in Python modules such as <code>os</code>. The <code>PosixModuleBackend</code> option determines which backend is used: <code>native</code> or <code>java</code>.</p>

<h4 id="native-backend"><a href="#native-backend" class="anchor-link">Native Backend</a></h4>

<p>The native backend directly calls the POSIX API in mostly the same way as CPython (the reference Python implementation).</p>

<p>This approach is the most compatible with CPython and provides bare access to the underlying OS interface without an intermediate emulation layer.</p>

<p>However, this implementation bypasses the Truffle abstraction layer by default. This means:</p>
<ul>
  <li><strong>No sandboxing</strong> protection</li>
  <li><strong>No support</strong> for custom <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/io/FileSystem.html">Truffle FileSystem service-provider</a> implementations</li>
  <li><strong>No support</strong> for other Polyglot API providers related to system interfaces</li>
</ul>

<p>The native backend is chosen by default when GraalPy is started via the <code>graalpy</code> launcher or any other Python-related launcher.</p>

<h5 id="limitations-of-the-native-backend"><a href="#limitations-of-the-native-backend" class="anchor-link">Limitations of the Native Backend</a></h5>

<p>Known limitations:</p>

<ul>
  <li><code>os.fork</code> is not supported</li>
  <li><code>_posixsubprocess.fork_exec</code> does not support the <code>preexec_fn</code> parameter</li>
</ul>

<h4 id="java-backend"><a href="#java-backend" class="anchor-link">Java Backend</a></h4>

<p>The Java backend uses the <a href="https://github.com/oracle/graal/blob/master/truffle/docs/README.md">Truffle abstraction layer</a>, which provides:</p>

<ul>
  <li><strong>Sandboxing support</strong> for security</li>
  <li><strong>Custom Polyglot API providers</strong> for system interfaces</li>
  <li><strong>Cross-platform compatibility</strong></li>
</ul>

<p>Because this abstraction is POSIX-agnostic, it cannot expose all necessary functionality. Some functionality is emulated, and some is unsupported.</p>

<p>The Java backend is the default when <a href="https://github.com/oracle/graal/blob/master/docs/reference-manual/embedding/embed-languages.md">embedding GraalPy in Java applications</a> using the <code>Context</code> API.</p>

<h5 id="limitations-of-the-java-backend"><a href="#limitations-of-the-java-backend" class="anchor-link">Limitations of the Java Backend</a></h5>

<p>To help identify compatibility issues, GraalPy can log information about known incompatibilities of functions executed at runtime. To enable this logging, use: <code>--log.python.compatibility.level=FINE</code></p>

<p>Known limitations of the Java backend are:</p>

<p><strong>State Isolation:</strong></p>

<p>The Java backend’s state is disconnected from the actual OS state:</p>

<ul>
  <li><strong>File descriptors:</strong> Python-level file descriptors are not usable in native code</li>
  <li><strong>Current working directory:</strong> Initialized to the startup directory but maintained separately. For example, <code>os.chdir()</code> in Python does not change the actual process working directory</li>
  <li><strong>umask:</strong> Same limitation as working directory, but always initialized to <code>0022</code> regardless of the actual system value</li>
</ul>

<p><strong>Other Limitations:</strong></p>

<ul>
  <li><strong>File timestamps:</strong> Resolution depends on the JDK. The Java backend can only guarantee seconds resolution</li>
  <li><strong>File access checks:</strong> <code>os.access()</code> and functionality based on the <code>faccessat</code> POSIX function do not support:
    <ul>
      <li>Effective IDs</li>
      <li><code>follow_symlinks=False</code> unless the mode is only <code>F_OK</code></li>
    </ul>
  </li>
</ul>

<h3 id="python-native-extensions"><a href="#python-native-extensions" class="anchor-link">Python Native Extensions</a></h3>

<p>Python native extensions run by default as native binaries with full access to the underlying system. This means they bypass the security controls described above.</p>

<p>For more information about limitations when embedding native extensions, see <a href="#embedding-limitations">Embedding limitations</a>.</p>

<h2 id="tooling-support-for-python"><a href="#tooling-support-for-python" class="anchor-link">Tooling Support for Python</a></h2>

<h3 id="debugging"><a href="#debugging" class="anchor-link">Debugging</a></h3>

<p>GraalPy provides the standard Python debugger <code>pdb</code>.
Refer to the official <a href="https://docs.python.org/3/library/pdb.html">PDB documentation</a> for usage.
The built-in <code>breakpoint()</code> function uses <code>pdb</code> by default.</p>

<p>GraalPy also comes with built-in support for graphical debugging through Chrome’s developer tools.
To enable the debugger, pass the <code>--inspect</code> command-line option.
You can inspect variables, set watch expressions, interactively evaluate code snippets, and so on.</p>

<ol>
  <li>
    <p>Run a Python script using the command-line option <code>--inspect</code>:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> graalpy <span class="nt">--inspect</span> my_script.py
</code></pre></div>    </div>
  </li>
  <li>
    <p>You should see output similar to:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Debugger listening on ws://127.0.0.1:9229/VrhCaY7wR5tIqy2zLsdFr3f7ixY3QB6kVQ0S54_SOMo
 For <span class="nb">help</span>, see: https://www.graalvm.org/tools/chrome-debugger
 E.g. <span class="k">in </span>Chrome open: devtools://devtools/bundled/js_app.html?ws<span class="o">=</span>127.0.0.1:9229/VrhCaY7wR5tIqy2zLsdFr3f7ixY3QB6kVQ0S54_SOMo
</code></pre></div>    </div>
  </li>
  <li>
    <p>Open Chrome browser and enter the provided URL.</p>

    <p>You can now:</p>
    <ul>
      <li>Inspect the call stack and variables</li>
      <li>Set breakpoints and step through code</li>
      <li>Evaluate expressions in the console</li>
      <li>View variable values in tooltips</li>
    </ul>

    <p>For example:</p>

    <p><img src="/python/assets/Chrome_Inspector.png" alt="Chrome Inspector" /></p>
  </li>
</ol>

<h3 id="profiling"><a href="#profiling" class="anchor-link">Profiling</a></h3>

<p>GraalPy provides three main profiling capabilities: CPU sampling, CPU tracing, and memory tracing. Each tool is described below.</p>

<p>For complete options, use: <code>graalpy --help:tools</code></p>

<h4 id="cpu-sampler"><a href="#cpu-sampler" class="anchor-link">CPU Sampler</a></h4>

<p>Use the <code>--cpusampler</code> command-line option to take a CPU sample. For example:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>graalpy <span class="nt">--cpusampler</span> my_script.py
</code></pre></div></div>

<p>You should see output similar to:</p>

<details>
  <summary>CPU Sampler Output (Click to expand)</summary>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">--------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
Sampling Histogram. Recorded 564 samples with period 10ms. Missed 235 samples.
  Self Time: Time spent on the top of the stack.
  Total Time: Time spent somewhere on the stack.
<span class="nt">--------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
Thread[main,5,main]
 Name                                                                       <span class="o">||</span>             Total Time    <span class="o">||</span>              Self Time    <span class="o">||</span> Location            
<span class="nt">--------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
 parse_starttag                                                             <span class="o">||</span>             1090ms  19.3% <span class="o">||</span>              570ms  10.1% <span class="o">||</span> &lt;install-dir&gt;/lib/python3.10/html/parser.py~300-347:11658-13539
 match                                                                      <span class="o">||</span>              190ms   3.4% <span class="o">||</span>              190ms   3.4% <span class="o">||</span> &lt;venv-dir&gt;/lib/python3.10/site-packages/soupsieve/css_parser.py~320-323:9862-10026
 _replace_cdata_list_attribute_values                                       <span class="o">||</span>              190ms   3.4% <span class="o">||</span>              190ms   3.4% <span class="o">||</span> &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/builder/__init__.py~295-331:11245-13031
 goahead                                                                    <span class="o">||</span>             1430ms  25.4% <span class="o">||</span>              150ms   2.7% <span class="o">||</span> &lt;install-dir&gt;/lib/python3.10/html/parser.py~133-250:4711-9678
 check_for_whole_start_tag                                                  <span class="o">||</span>              130ms   2.3% <span class="o">||</span>              130ms   2.3% <span class="o">||</span> &lt;install-dir&gt;/lib/python3.10/html/parser.py~351-382:13647-14758
 &lt;module&gt;                                                                   <span class="o">||</span>              800ms  14.2% <span class="o">||</span>              130ms   2.3% <span class="o">||</span> &lt;venv-dir&gt;/lib/python3.10/site-packages/soupsieve/css_parser.py~1-1296:0-47061
 ...
<span class="nt">--------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</code></pre></div>  </div>

</details>

<h4 id="cpu-tracer"><a href="#cpu-tracer" class="anchor-link">CPU Tracer</a></h4>

<p>Use the <code>--cputracer --cputracer.TraceStatements</code> command-line options to trace CPU usage. For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>graalpy <span class="nt">--cputracer</span> <span class="nt">--cputracer</span>.TraceStatements my_script.py
</code></pre></div></div>

<p>You should see output similar to:</p>

<details>
  <summary>CPU Tracer Output (Click to expand)</summary>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">--------------------------------------------------------------------------------------------------------------------</span>
Tracing Histogram. Counted a total of 1135 element executions.
  Total Count: Number of <span class="nb">times </span>the element was executed and percentage of total executions.
  Interpreted Count: Number of <span class="nb">times </span>the element was interpreted and percentage of total executions of this element.
  Compiled Count: Number of <span class="nb">times </span>the compiled element was executed and percentage of total executions of this element.
<span class="nt">--------------------------------------------------------------------------------------------------------------------</span>
 Name                                |          Total Count |    Interpreted Count |       Compiled Count | Location
<span class="nt">--------------------------------------------------------------------------------------------------------------------</span>
 get_newfunc_typeid                  |           110   9.7% |           110 100.0% |             0   0.0% | capi.c~596:0
 PyTruffle_PopulateType              |           110   9.7% |           110 100.0% |             0   0.0% | capi.c~721:0
 PyTruffle_AllocMemory               |            86   7.6% |            86 100.0% |             0   0.0% | obmalloc.c~77:0
 PyTruffle_AllocateType              |            66   5.8% |            66 100.0% |             0   0.0% | capi.c~874:0
 PyMem_RawMalloc                     |            66   5.8% |            66 100.0% |             0   0.0% | obmalloc.c~170:0
 initialize_type_structure           |            50   4.4% |            50 100.0% |             0   0.0% | capi.c~181:0
 _Py_TYPE                            |            45   4.0% |            45 100.0% |             0   0.0% | object_shared.c~55:0
 PyType_GetFlags                     |            41   3.6% |            41 100.0% |             0   0.0% | typeobject_shared.c~44:0
 get_tp_name                         |            37   3.3% |            37 100.0% |             0   0.0% | capi.c~507:0
 ...    
<span class="nt">--------------------------------------------------------------------------------------------------------------------</span>
</code></pre></div>  </div>

</details>

<h4 id="memory-tracer"><a href="#memory-tracer" class="anchor-link">Memory Tracer</a></h4>

<p>Use the <code>--memtracer --memtracer.TraceStatements</code> command-line options to trace memory usage. For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>graalpy <span class="nt">--experimental-options</span> <span class="nt">--memtracer</span> <span class="nt">--memtracer</span>.TraceStatements my_script.py
</code></pre></div></div>

<p>You should see output similar to:</p>

<details>
  <summary>Memory Tracer Output (Click to expand)</summary>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">----------------------------------------------------------------------------</span>
 Location Histogram with Allocation Counts. Recorded a total of 565 allocations.
   Total Count: Number of allocations during the execution of this element.
   Self Count: Number of allocations <span class="k">in </span>this element alone <span class="o">(</span>excluding sub calls<span class="o">)</span><span class="nb">.</span>
<span class="nt">----------------------------------------------------------------------------</span>
 Name                         |      Self Count |     Total Count | Location
<span class="nt">----------------------------------------------------------------------------</span>
 PyTruffle_PopulateType       |      440  77.9% |      440  77.9% | capi.c~721:0
 PyType_Ready                 |       61  10.8% |       68  12.0% | typeobject.c~463:0
 _PyObject_MakeTpCall         |       20   3.5% |       24   4.2% | object.c~155:0
 PyUnicode_FromString         |       11   1.9% |       11   1.9% | capi.c~2161:0
 PyErr_NewException           |       11   1.9% |       11   1.9% | capi.c~1537:0
 _PyUnicode_AsASCIIString     |        6   1.1% |        6   1.1% | capi.c~2281:0
 PyDict_New                   |        4   0.7% |        4   0.7% | capi.c~1505:0
 PyTuple_New                  |        4   0.7% |        4   0.7% | capi.c~2097:0
 PyUnicode_FromStringAndSize  |        3   0.5% |        3   0.5% | unicodeobject.c~171:0
 ...
<span class="nt">----------------------------------------------------------------------------</span>
</code></pre></div>  </div>

</details>

<h3 id="coverage"><a href="#coverage" class="anchor-link">Coverage</a></h3>

<p>GraalPy provides its own implementation of the <a href="https://pypi.org/project/coverage/">Coverage.py tool</a> to measure code coverage of Python programs.
Enable it using the <code>--coverage</code> command-line option, as shown below.
(For details, use the <code>graalpy --help:tools</code> command.)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>graalpy <span class="nt">--coverage</span> my_script.py
</code></pre></div></div>
<p>You should see output similar to:</p>

<details>
  <summary>Coverage Output (Click to expand)</summary>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">------------------------------------------------------------------------------------------------------------------------------------------------</span>
Code coverage histogram.
  Shows what percent of each element was covered during execution
<span class="nt">------------------------------------------------------------------------------------------------------------------------------------------------</span>
 Path                                                                          |  Statements |    Lines |    Roots
<span class="nt">------------------------------------------------------------------------------------------------------------------------------------------------</span>
 &lt;venv-dir&gt;/lib/python3.10/site-packages/_distutils_hack/__init__.py           |       0.00% |    0.00% |    0.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/__init__.py                       |      56.10% |   56.14% |   55.26%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/builder/__init__.py               |      79.12% |   78.84% |   50.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/builder/_html5lib.py              |       2.41% |    2.46% |    2.38%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/builder/_htmlparser.py            |      69.08% |   68.67% |   83.33%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/builder/_lxml.py                  |       3.72% |    3.78% |    4.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/css.py                            |      32.73% |   31.48% |   15.38%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/dammit.py                         |      65.46% |   65.29% |   24.14%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/element.py                        |      44.15% |   43.13% |   31.08%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/bs4/formatter.py                      |      73.49% |   74.36% |   66.67%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/certifi/__init__.py                   |     100.00% |  100.00% |  100.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/certifi/core.py                       |      33.33% |   33.33% |   25.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/__init__.py        |     100.00% |  100.00% |  100.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/api.py             |      11.87% |   11.94% |   16.67%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/assets/__init__.py |     100.00% |  100.00% |  100.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/cd.py              |      12.81% |   13.54% |    4.35%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/constant.py        |     100.00% |  100.00% |  100.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/legacy.py          |      25.00% |   25.00% |   50.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/md.py              |      22.05% |   20.37% |   17.24%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/models.py          |      38.46% |   38.50% |    9.30%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/utils.py           |      26.79% |   26.89% |    3.33%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/charset_normalizer/version.py         |     100.00% |  100.00% |  100.00%
 &lt;venv-dir&gt;/lib/python3.10/site-packages/idna/__init__.py                      |     100.00% |  100.00% |  100.00%
 &lt;install-dir&gt;/lib/python3.10/collections/abc.py                               |     100.00% |  100.00% |  100.00%
 &lt;install-dir&gt;/lib/python3.10/contextlib.py                                    |      40.80% |   37.99% |   31.71%
 &lt;install-dir&gt;/lib/python3.10/copy.py                                          |      36.36% |   36.41% |   21.43%
 &lt;install-dir&gt;/lib/python3.10/copyreg.py                                       |       3.20% |    3.20% |    7.69%
 &lt;install-dir&gt;/lib/python3.10/csv.py                                           |      25.17% |   23.91% |   25.00%
 &lt;install-dir&gt;/lib/python3.10/datetime.py                                      |      30.32% |   30.01% |   14.74%
 &lt;install-dir&gt;/lib/python3.10/email/__init__.py                                |      42.86% |   42.86% |   20.00%
 &lt;install-dir&gt;/lib/python3.10/email/_encoded_words.py                          |      35.11% |   34.44% |   14.29%
 &lt;install-dir&gt;/lib/python3.10/email/_parseaddr.py                              |      12.64% |   12.15% |   10.71%
 &lt;install-dir&gt;/lib/python3.10/email/_policybase.py                             |      55.22% |   54.69% |   39.29%
 &lt;install-dir&gt;/lib/python3.10/email/base64mime.py                              |      35.00% |   35.00% |   20.00%
 &lt;install-dir&gt;/lib/python3.10/typing.py                                        |      49.86% |   48.93% |   34.60%
 &lt;install-dir&gt;/lib/python3.10/urllib/__init__.py                               |     100.00% |  100.00% |  100.00%
 &lt;install-dir&gt;/lib/python3.10/warnings.py                                      |      21.29% |   20.77% |   25.00%
 &lt;install-dir&gt;/lib/python3.10/weakref.py                                       |      37.93% |   36.78% |   23.68%
 &lt;install-dir&gt;/lib/python3.10/zipfile.py                                       |      17.86% |   17.23% |   11.03%
 &lt;src-dir&gt;/my_script.py                                                        |     100.00% |  100.00% |  100.00%
<span class="nt">------------------------------------------------------------------------------------------------------------------------------------------------</span>
</code></pre></div>  </div>

</details>

<h3 id="trace"><a href="#trace" class="anchor-link">Trace</a></h3>

<p>The standard Python <code>trace</code> module is also provided.</p>
<blockquote>
  <p>Note: This works in the same way as CPython.</p>
</blockquote>

<p>The programmatic API also works but with limitations: it currently tracks only line counts and called functions, not calls themselves.</p>

<p>For example, running this command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>graalpy <span class="nt">-m</span> trace <span class="nt">-c</span> <span class="nt">-s</span> text_styler.py Welcome to GraalPy!
</code></pre></div></div>

<p>You should see output similar to:</p>

<details>
  <summary>CPU Tracer Output (Click to expand)</summary>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_       __     __                             __     
| |     / /__  / /________  ____ ___  ___     / /_____
| | /| / / _ <span class="se">\/</span> / ___/ __ <span class="se">\/</span> __ <span class="sb">`</span>__ <span class="se">\/</span> _ <span class="se">\ </span>  / __/ __ <span class="se">\</span>
| |/ |/ /  __/ / /__/ /_/ / / / / / /  __/  / /_/ /_/ /
|__/|__/<span class="se">\_</span>__/_/<span class="se">\_</span>__/<span class="se">\_</span>___/_/ /_/ /_/<span class="se">\_</span>__/   <span class="se">\_</span>_/<span class="se">\_</span>___/
                                                        
   ______                 ______        __
  / ____/________ _____ _/ / __ <span class="se">\_</span>_  __/ /
 / / __/ ___/ __ <span class="sb">`</span>/ __ <span class="sb">`</span>/ / /_/ / / / / /
/ /_/ / /  / /_/ / /_/ / / ____/ /_/ /_/ 
<span class="se">\_</span>___/_/   <span class="se">\_</span>_,_/<span class="se">\_</span>_,_/_/_/    <span class="se">\_</span>_, <span class="o">(</span>_<span class="o">)</span>  
                              /____/     
 
lines   cov%   module   <span class="o">(</span>path<span class="o">)</span>
    9   100%   __about__   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/__about__.py<span class="o">)</span>
   51   100%   __future__   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/__future__.py<span class="o">)</span>
    1   100%   __init__   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pyfiglet/fonts/__init__.py<span class="o">)</span>
   27   100%   _adapters   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/importlib/_adapters.py<span class="o">)</span>
   25   100%   _common   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/importlib/_common.py<span class="o">)</span>
   44   100%   _manylinux   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/_manylinux.py<span class="o">)</span>
   20   100%   _musllinux   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/_musllinux.py<span class="o">)</span>
   66   100%   _osx_support   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/_osx_support.py<span class="o">)</span>
   43   100%   _parseaddr   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/_parseaddr.py<span class="o">)</span>
   62   100%   _policybase   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/_policybase.py<span class="o">)</span>
   20   100%   _structures   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/_structures.py<span class="o">)</span>
  105   100%   abc   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/importlib/abc.py<span class="o">)</span>
   18   100%   actions   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/actions.py<span class="o">)</span>
   41   100%   appdirs   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/appdirs.py<span class="o">)</span>
   59   100%   <span class="nb">base64</span>   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/base64.py<span class="o">)</span>
   14   100%   base64mime   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/base64mime.py<span class="o">)</span>
   11   100%   bisect   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/bisect.py<span class="o">)</span>
  124   100%   calendar   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/calendar.py<span class="o">)</span>
   94   100%   charset   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/charset.py<span class="o">)</span>
  122   100%   common   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/common.py<span class="o">)</span>
   40   100%   context   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/jaraco/context.py<span class="o">)</span>
    3   100%   contextlib   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/contextlib.py<span class="o">)</span>
   91   100%   copy   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/copy.py<span class="o">)</span>
 1497   100%   core   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/core.py<span class="o">)</span>
  108   100%   dataclasses   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/dataclasses.py<span class="o">)</span>
   31   100%   datetime   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/datetime.py<span class="o">)</span>
    9   100%   encoders   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/encoders.py<span class="o">)</span>
 2493   100%   entities   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/html/entities.py<span class="o">)</span>
   58   100%   errors   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/errors.py<span class="o">)</span>
   49   100%   exceptions   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/exceptions.py<span class="o">)</span>
    5   100%   expat   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/xml/parsers/expat.py<span class="o">)</span>
   41   100%   feedparser   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/feedparser.py<span class="o">)</span>
   45   100%   functools   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/jaraco/functools.py<span class="o">)</span>
   69   100%   gettext   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/gettext.py<span class="o">)</span>
   56   100%   header   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/header.py<span class="o">)</span>
  162   100%   helpers   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/helpers.py<span class="o">)</span>
    1   100%   inspect   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/inspect.py<span class="o">)</span>
   47   100%   linecache   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/linecache.py<span class="o">)</span>
   95   100%   markers   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/markers.py<span class="o">)</span>
  192   100%   more   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/more_itertools/more.py<span class="o">)</span>
  204   100%   optparse   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/optparse.py<span class="o">)</span>
   14   100%   os   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/os.py<span class="o">)</span>
  167   100%   parse   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/urllib/parse.py<span class="o">)</span>
   19   100%   parser   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/parser.py<span class="o">)</span>
  242   100%   pathlib   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/pathlib.py<span class="o">)</span>
   66   100%   pkgutil   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/pkgutil.py<span class="o">)</span>
  137   100%   platform   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/platform.py<span class="o">)</span>
  102   100%   plistlib   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/plistlib.py<span class="o">)</span>
   79   100%   pprint   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/pprint.py<span class="o">)</span>
   54   100%   queue   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/queue.py<span class="o">)</span>
   21   100%   quopri   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/quopri.py<span class="o">)</span>
   32   100%   quoprimime   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/email/quoprimime.py<span class="o">)</span>
  101   100%   random   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/random.py<span class="o">)</span>
   43   100%   recipes   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/more_itertools/recipes.py<span class="o">)</span>
   51   100%   requirements   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/requirements.py<span class="o">)</span>
   46   100%   resources   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/importlib/resources.py<span class="o">)</span>
  155   100%   results   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/results.py<span class="o">)</span>
   79   100%   selectors   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/selectors.py<span class="o">)</span>
   30   100%   signal   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/signal.py<span class="o">)</span>
   94   100%   socket   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/socket.py<span class="o">)</span>
  143   100%   specifiers   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/specifiers.py<span class="o">)</span>
   50   100%   string   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/string.py<span class="o">)</span>
  118   100%   subprocess   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/subprocess.py<span class="o">)</span>
   96   100%   sysconfig   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/sysconfig.py<span class="o">)</span>
   67   100%   tags   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/tags.py<span class="o">)</span>
  119   100%   tempfile   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/tempfile.py<span class="o">)</span>
   35   100%   testing   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/testing.py<span class="o">)</span>
    7   100%   text_styler   <span class="o">(</span>&lt;src-dir&gt;/text_styler.py<span class="o">)</span>
   51   100%   textwrap   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/textwrap.py<span class="o">)</span>
    2   100%   threading   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/threading.py<span class="o">)</span>
   32   100%   tokenize   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/tokenize.py<span class="o">)</span>
   43   100%   traceback   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/traceback.py<span class="o">)</span>
  703   100%   typing   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/typing.py<span class="o">)</span>
  238   100%   unicode   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/unicode.py<span class="o">)</span>
   76   100%   util   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/pyparsing/util.py<span class="o">)</span>
   20   100%   utils   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pkg_resources/_vendor/packaging/utils.py<span class="o">)</span>
    1   100%   version   <span class="o">(</span>&lt;venv-dir&gt;/lib/python3.10/site-packages/pyfiglet/version.py<span class="o">)</span>
   16   100%   warnings   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/warnings.py<span class="o">)</span>
  127   100%   weakref   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/weakref.py<span class="o">)</span>
  432   100%   zipfile   <span class="o">(</span>&lt;install-dir&gt;/lib/python3.10/zipfile.py<span class="o">)</span>
</code></pre></div>  </div>

</details>

<h3 id="using-pycharm-with-graalpy"><a href="#using-pycharm-with-graalpy" class="anchor-link">Using PyCharm with GraalPy</a></h3>

<p>You can use GraalPy in PyCharm to create a virtual environment, install packages, and develop and run your Python application.</p>

<ol>
  <li>
    <p>Install <code>graalpy</code>. (For more information, see <a href="#testing-python-applications-and-packages-on-graalpy">Installing GraalPy</a>.)</p>
  </li>
  <li>
    <p>Install PyCharm. (For more information, see <a href="https://www.jetbrains.com/help/pycharm/installation-guide.html">Install PyCharm</a>.)</p>
  </li>
  <li>
    <p>Create, or open, a Python project.
(For more information, see <a href="https://www.jetbrains.com/help/pycharm/creating-empty-project.html">Create a Python project</a>, or <a href="https://www.jetbrains.com/help/pycharm/open-projects.html">Open, reopen, and close projects</a>, respectively.)</p>
  </li>
  <li>Create a new virtual environment using GraalPy:
    <ul>
      <li>In PyCharm settings, set the interpreter to your GraalPy installation</li>
      <li>Create a new <code>venv</code> virtual environment
(For more information, see <a href="https://www.jetbrains.com/help/pycharm/creating-virtual-environment.html#python_create_virtual_env">Create a virtualenv environment</a>.)</li>
    </ul>
  </li>
  <li>
    <p>Install packages using pip or PyCharm’s package manager.
(For more information, see <a href="https://www.jetbrains.com/help/pycharm/installing-uninstalling-and-upgrading-packages.html">Install, uninstall, and upgrade packages</a>.)</p>
  </li>
  <li>Use the PyCharm menu items to <a href="https://www.jetbrains.com/help/pycharm/running-applications.html">run your Python application</a>. 
Alternatively, use the terminal emulator to run the <code>graalpy</code> command.</li>
</ol>

<h3 id="using-visual-studio-code-with-graalpy"><a href="#using-visual-studio-code-with-graalpy" class="anchor-link">Using Visual Studio Code with GraalPy</a></h3>

<p>You can use GraalPy in Visual Studio (VS) Code to create a virtual environment, install packages, and develop and run your Python application.</p>

<ol>
  <li>
    <p>Install <code>graalpy</code>. (For more information, see <a href="#testing-python-applications-and-packages-on-graalpy">Installing GraalPy</a>.)</p>
  </li>
  <li>
    <p>Install VS Code and the Python Extension, following the instructions here: <a href="https://code.visualstudio.com/docs/python/python-tutorial#_prerequisites">Install Visual Studio Code and the Python Extension</a>.</p>
  </li>
  <li>
    <p>Create, or open, a Python file.</p>
  </li>
  <li>
    <p>Create a new <em>venv</em> virtual environment for your Python project.
(For more information, see <a href="https://code.visualstudio.com/docs/python/environments#_creating-environments">Creating environments</a>.)</p>
  </li>
  <li>
    <p>Install packages by following the VS Code instructions.
(For more information, see <a href="https://code.visualstudio.com/docs/python/python-tutorial#_install-and-use-packages">Install and use packages</a>.)</p>
  </li>
  <li>
    <p>Use the VS Code menu items to run your Python application. (For more information, see <a href="https://code.visualstudio.com/docs/python/python-tutorial#_run-python-code">Run Hello World</a>.)
Alternatively, use a VS Code terminal emulator to run the <code>graalpy</code> command.</p>
  </li>
  <li>
    <p>You can use VS Code’s built-in Python debugger to set breakpoints, inspect variables, and step through your code just like with standard Python.</p>
  </li>
</ol>

<h2 id="graalpy-troubleshooting"><a href="#graalpy-troubleshooting" class="anchor-link">GraalPy Troubleshooting</a></h2>

<p>This guide helps you resolve common issues when using GraalPy, whether running it standalone or embedded in Java applications.</p>

<h3 id="virtual-filesystem-issues"><a href="#virtual-filesystem-issues" class="anchor-link">Virtual FileSystem Issues</a></h3>

<h4 id="virtualfilesystem-cannot-load-files"><a href="#virtualfilesystem-cannot-load-files" class="anchor-link">VirtualFileSystem Cannot Load Files</a></h4>

<p>Some files may fail to load from the Virtual Filesystem even though they’re included as resources. GraalPy automatically <a href="#extracting-files-from-virtual-filesystem">extracts certain file types</a> to the real filesystem, but you may still encounter errors.</p>

<p>Example error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ImportError: cannot load /graalpy_vfs/venv/lib/python3.11/site-packages/_cffi_backend.graalpy250dev09433ef706-311-native-aarch64-darwin.so:
NFIUnsatisfiedLinkError: dlopen<span class="o">(</span>/graalpy_vfs/venv/lib/python3.11/site-packages/_cffi_backend.graalpy250dev09433ef706-311-native-aarch64-darwin.so, 0x0002<span class="o">)</span>:
</code></pre></div></div>

<p>This indicates that the native extension requires access to the real filesystem.</p>

<p><strong>Solution</strong>: Depending on how you <a href="#deployment">deploy Python resources</a>, choose one of these approaches:</p>

<h5 id="option-1-package-resources-in-jarexecutable"><a href="#option-1-package-resources-in-jarexecutable" class="anchor-link">Option 1: Package Resources in JAR/Executable</a></h5>

<p>If the problematic file is not automatically extracted (files other than <code>.so</code>, <code>.dylib</code>, <code>.pyd</code>, <code>.dll</code>, or <code>.ttf</code>), add it to the extraction filter:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">VirtualFileSystem</span> <span class="n">vfs</span> <span class="o">=</span> <span class="nc">VirtualFileSystem</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extractFilter</span><span class="o">(</span><span class="n">filename</span> <span class="o">-&gt;</span> <span class="n">filename</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">".your_extension"</span><span class="o">))</span>
    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p>If that doesn’t resolve the issue, extract all resources to an external directory:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Extract the Python resources from the jar or native image into a directory</span>
<span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">extractVirtualFileSystemResources</span><span class="o">(</span><span class="nc">VirtualFileSystem</span><span class="o">.</span><span class="na">create</span><span class="o">(),</span> <span class="n">externalResourceDirectoryPath</span><span class="o">);</span>
<span class="c1">// Create a GraalPy context configured with the external directory</span>
<span class="nc">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">contextBuilder</span><span class="o">(</span><span class="n">externalResourceDirectoryPath</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<h5 id="option-2-use-external-directory"><a href="#option-2-use-external-directory" class="anchor-link">Option 2: Use External Directory</a></h5>

<p>Configure your build tool to use an external directory by setting:</p>

<ul>
  <li><strong>Maven</strong>: <code>externalDirectory</code> tag in <a href="#graalpy-maven-plugin">Maven plugin</a></li>
  <li><strong>Gradle</strong>: <code>externalDirectory</code> field in <a href="#graalpy-gradle-plugin">Gradle plugin</a></li>
</ul>

<p>Then configure your context:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create a context configured with an external Python resource directory</span>
<span class="nc">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">contextBuilder</span><span class="o">(</span><span class="n">externalResourceDirectoryPath</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Important</strong>: When switching from Virtual FileSystem to external directory, move all user files from the previous Virtual FileSystem resource root to the new directory.</p>
</blockquote>

<p>For more details about the Python resources in GraalPy Embedding please refer to the <a href="#embedding-build-tools">Embedding Build Tools</a> documentation.</p>

<p>For more details about GraalPy context and Virtual FileSystem configuration please refer to <a href="https://github.com/oracle/graalpython/blob/master/graalpython/org.graalvm.python.embedding/src/org/graalvm/python/embedding/GraalPyResources.java">GraalPyResources</a> and
<a href="https://github.com/oracle/graalpython/blob/master/graalpython/org.graalvm.python.embedding/src/org/graalvm/python/embedding/VirtualFileSystem.java">VirtualFileSystem</a> javadoc.</p>

<h3 id="posix-backend-issues"><a href="#posix-backend-issues" class="anchor-link">POSIX Backend Issues</a></h3>

<h4 id="issues-with-java-posix-backend"><a href="#issues-with-java-posix-backend" class="anchor-link">Issues with Java POSIX Backend</a></h4>

<p>The Virtual FileSystem relies on GraalPy’s Java POSIX backend. Some Python packages bypass Python’s I/O and directly access files through native extensions.</p>

<p>Example error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NotImplementedError: <span class="s1">'PyObject_AsFileDescriptor'</span> not supported when using <span class="s1">'java'</span> posix backend
</code></pre></div></div>

<p>This indicates that a Python package requires direct file descriptor access which is not supported by the Java POSIX backend.</p>

<p><strong>Solution</strong>: Override the default Java backend by setting the native POSIX backend and extract resources from the Virtual FileSystem.</p>

<p>Depending on how you <a href="#deployment">deploy Python resources</a> in your application, you can do one of the following:</p>

<ul>
  <li>
    <p>if you need to package Python resources within your Jar or Native Image executable, then:</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Extract resources and configure native backend</span>
<span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">extractVirtualFileSystemResources</span><span class="o">(</span><span class="nc">VirtualFileSystem</span><span class="o">.</span><span class="na">create</span><span class="o">(),</span> <span class="n">externalResourceDirectoryPath</span><span class="o">);</span>
<span class="c1">// create a Context.Builder configured with an external python resource directory</span>
<span class="nc">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">contextBuilder</span><span class="o">(</span><span class="n">externalResourceDirectoryPath</span><span class="o">);</span>
<span class="c1">// override the python.PosixModuleBackend option with "native"</span>
<span class="n">builder</span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="s">"python.PosixModuleBackend"</span><span class="o">,</span> <span class="s">"native"</span><span class="o">);</span>
<span class="c1">// create a context</span>
<span class="nc">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>or if you’re able to ship Python resources in a separate directory, you have to set the <code>externalDirectory</code> tag in
<a href="#graalpy-maven-plugin">Maven</a> or <code>externalDirectory</code> field in <a href="#graalpy-gradle-plugin">Gradle</a>
and configure the GraalPy context accordingly:</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// create a Context.Builder configured with an external python resource directory</span>
<span class="nc">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="nc">GraalPyResources</span><span class="o">.</span><span class="na">contextBuilder</span><span class="o">(</span><span class="n">externalResourceDirectoryPath</span><span class="o">);</span>
<span class="c1">// override the python.PosixModuleBackend option with "native"</span>
<span class="n">builder</span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="s">"python.PosixModuleBackend"</span><span class="o">,</span> <span class="s">"native"</span><span class="o">);</span>
<span class="c1">// create a context</span>
<span class="nc">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div>    </div>
  </li>
</ul>

<blockquote>
  <p><strong>Important</strong>: When switching from Virtual FileSystem to external directory, move all user files from the previous Virtual FileSystem resource root to the new directory.</p>
</blockquote>

<p>For more details about the Python resources in GraalPy Embedding please refer to the <a href="#embedding-build-tools">Embedding Build Tools</a> documentation.</p>

<p>For more details about GraalPy context and Virtual FileSystem configuration please refer to <a href="https://github.com/oracle/graalpython/blob/master/graalpython/org.graalvm.python.embedding/src/org/graalvm/python/embedding/GraalPyResources.java">GraalPyResources</a> and
<a href="https://github.com/oracle/graalpython/blob/master/graalpython/org.graalvm.python.embedding/src/org/graalvm/python/embedding/VirtualFileSystem.java">VirtualFileSystem</a> javadoc.</p>

<h3 id="import-and-compatibility-issues"><a href="#import-and-compatibility-issues" class="anchor-link">Import and Compatibility Issues</a></h3>

<h4 id="importerror-reports-unknown-location"><a href="#importerror-reports-unknown-location" class="anchor-link">ImportError Reports </a>“Unknown Location”</h4>

<p>An <code>ImportError</code> ending with <code>(unknown location)</code> typically occurs when an embedded Python package was built for a different operating system.</p>

<p>Example error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ImportError: cannot import name <span class="s1">'exceptions'</span> from <span class="s1">'cryptography.hazmat.bindings._rust'</span> <span class="o">(</span>unknown location<span class="o">)</span>
</code></pre></div></div>

<p>This indicates that the Python package contains platform-specific native extensions that are incompatible with your current operating system.</p>

<p><strong>Solution</strong>: Rebuild your project on the target operating system before running it.</p>

<h3 id="dependency-and-build-issues"><a href="#dependency-and-build-issues" class="anchor-link">Dependency and Build Issues</a></h3>

<h4 id="graalvm-jdk-compatibility"><a href="#graalvm-jdk-compatibility" class="anchor-link">GraalVM JDK Compatibility</a></h4>

<p>To enable runtime compilation when running GraalPy from a Maven or Gradle application, you must use compatible versions of GraalPy and Polyglot API dependencies with your GraalVM JDK version.</p>

<p>Example error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Your Java runtime <span class="s1">'23.0.1+11-jvmci-b01'</span> with compiler version <span class="s1">'24.1.1'</span> is incompatible with polyglot version <span class="s1">'24.1.0'</span><span class="nb">.</span>
</code></pre></div></div>

<p>This indicates version misalignment between your GraalVM JDK, compiler, and Polyglot dependencies.</p>

<p><strong>Solution</strong>: Align the versions of your GraalPy and Polyglot dependencies according to the error message:</p>

<ul>
  <li>Upgrade your JDK version, or</li>
  <li>Update your Polyglot and GraalPy dependencies</li>
</ul>

<p>Note: This can also apply when dependencies are transitively pulled in by other artifacts, for example, <code>micronaut-graalpy</code>.</p>

<h4 id="deprecated-dependencies"><a href="#deprecated-dependencies" class="anchor-link">Deprecated Dependencies</a></h4>

<p>You may encounter issues when using outdated or discontinued dependency artifacts in your project configuration.</p>

<p>Example error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Could not find artifact org.graalvm.python:python-language-enterprise
</code></pre></div></div>

<p>This indicates you’re trying to use a deprecated or discontinued dependency.</p>

<p><strong>Solution</strong>: Replace <code>python-language-enterprise</code> with <code>org.graalvm.polyglot:python</code>.</p>

<h4 id="macos-build-system-issues-mesoncython"><a href="#macos-build-system-issues-mesoncython" class="anchor-link">macOS Build System Issues (Meson/Cython)</a></h4>

<p>On macOS, you may encounter build system errors when installing Python packages that use Meson or Cython.</p>

<p>Example error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>../meson.build:1:0: ERROR: Failed running <span class="s1">'cython'</span>, binary or interpreter not executable.
</code></pre></div></div>

<p>This is caused by the GraalPy launcher used internally by the Maven or Gradle GraalPy plugin for installing Python packages.</p>

<p><strong>Solution</strong>: Set the Java system property <code>graalpy.vfs.venvLauncher</code> to a launcher from a downloaded <a href="https://github.com/oracle/graalpython/releases/">GraalPy</a> distribution with a version matching your GraalPy Maven artifacts version.</p>

<p>Example command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvn package <span class="nt">-Dgraalpy</span>.vfs.venvLauncher<span class="o">={</span>graalpy_directory<span class="o">}</span>/Contents/Home/bin/graalpy
</code></pre></div></div>

<h4 id="missing-language-dependencies"><a href="#missing-language-dependencies" class="anchor-link">Missing Language Dependencies</a></h4>

<p>When running GraalPy applications, you may encounter runtime errors indicating missing language implementations.</p>

<p>Example error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java.lang.IllegalStateException: No language and polyglot implementation was found on the module-path. Make sure at least one language is added to the module-path.
</code></pre></div></div>

<p>This indicates that the Python language dependency is missing from your Maven or Gradle configuration.</p>

<p><strong>Solution</strong>: Add one of these dependencies to your project:</p>

<ul>
  <li><code>org.graalvm.polyglot:python</code> (Oracle GraalVM)</li>
  <li><code>org.graalvm.polyglot:python-community</code> (Community Edition)</li>
</ul>

<h2 id="detailed-test-tier-breakdown"><a href="#detailed-test-tier-breakdown" class="anchor-link">Detailed Test Tier Breakdown</a></h2>

<p>GraalPy organizes platform testing into tiers that indicate the level of testing rigor and support you can expect for different platform configurations. This tiering system helps you understand:</p>

<ul>
  <li>How thoroughly your platform is tested</li>
  <li>What level of stability to expect</li>
  <li>Which features are fully supported vs. experimental</li>
</ul>

<p>Platforms are identified using the target tuple format: <code>[CPU architecture]-[Operating System]-[libc]-[JDK]-[Java version]</code>. JDK names follow <a href="https://sdkman.io/">SDKMAN!</a> conventions, and “graal” refers to both Oracle GraalVM and GraalVM Community Edition (including Native Image).</p>

<blockquote>
  <p><strong>Important:</strong> GraalPy test tiers are similar to <a href="https://peps.python.org/pep-0011/">CPython Platform Support Tiers</a>, but do not constitute or imply any commitment to support.</p>
</blockquote>

<p>Pure Python code runs reliably on GraalPy with recent JDKs when JIT compilation is disabled. However, advanced features like native extensions, platform-specific APIs, and JIT compilation have varying support depending on your platform tier.</p>

<h3 id="tier-1"><a href="#tier-1" class="anchor-link">Tier 1</a></h3>

<ul>
  <li><strong>Stability:</strong> CI failures block releases. Changes which would break the main or release branches are not allowed to be merged; any breakage should be fixed or reverted immediately.</li>
  <li><strong>Responsibility:</strong> All core developers are responsible to keep main, and thus these platforms, working.</li>
  <li><strong>Coverage:</strong> Platform-specific Python APIs and Python C extensions are fully tested.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Platform</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>amd64-linux-glibc-graal-latest</td>
      <td>Oracle Linux 8 or similar.</td>
    </tr>
    <tr>
      <td>aarch64-linux-glibc-graal-latest</td>
      <td>Oracle Linux 8 or similar.</td>
    </tr>
  </tbody>
</table>

<h3 id="tier-2"><a href="#tier-2" class="anchor-link">Tier 2</a></h3>

<ul>
  <li><strong>Stability:</strong> CI failures block releases. Changes which would break the main or release branches are not allowed to be merged; any breakage should be fixed or tests marked as skipped.</li>
  <li><strong>Test Coverage:</strong> Circa 10% of tests running on Tier 1 platforms may be skipped on Tier 2 platforms.</li>
  <li><strong>Feature Support:</strong> Platform-specific Python APIs are fully tested; Python C extensions may have more issues than on Tier 1 platforms.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Platform</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>aarch64-macos-darwin-graal-latest</td>
      <td>macOS on M-series CPUs.</td>
    </tr>
  </tbody>
</table>

<h3 id="tier-3"><a href="#tier-3" class="anchor-link">Tier 3</a></h3>

<ul>
  <li><strong>Stability:</strong> CI failures block releases. Changes which would break the main or release branches are not allowed to be merged; any breakage should be fixed or tests marked as skipped.</li>
  <li><strong>Test Coverage:</strong> Circa 25% of tests running on Tier 1 platforms may be skipped on Tier 3.</li>
  <li><strong>Feature Support:</strong> Tests for platform-specific Python APIs and Python C extension are run, but not prioritized.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Platform</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>amd64-windows-msvc-graal-latest</td>
      <td>Windows 11, Windows Server 2025, or newer.</td>
    </tr>
    <tr>
      <td>amd64-linux-glibc-oracle-21</td>
      <td>JDK 21 is tested without JIT compilation.</td>
    </tr>
    <tr>
      <td>aarch64-linux-glibc-oracle-21</td>
      <td>JDK 21 is tested without JIT compilation.</td>
    </tr>
    <tr>
      <td>aarch64-macos-darwin-oracle-21</td>
      <td>JDK 21 is tested without JIT compilation.</td>
    </tr>
    <tr>
      <td>amd64-macos-darwin-oracle-21</td>
      <td>JDK 21 is tested without JIT compilation.</td>
    </tr>
    <tr>
      <td>amd64-windows-msvc-oracle-21</td>
      <td>JDK 21 is tested without JIT compilation.</td>
    </tr>
  </tbody>
</table>

<h3 id="tier-4"><a href="#tier-4" class="anchor-link">Tier 4</a></h3>

<ul>
  <li><strong>Stability:</strong> CI failures do not block releases. Tests may be broken on the main and release branches.</li>
  <li><strong>Test Coverage:</strong> Smoke tests with platform-agnostic pure Python workloads are run on a regular schedule.</li>
  <li><strong>Feature Support:</strong> Only basic pure Python functionality is tested; platform-specific features and extensions are not prioritized.</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Platform</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>amd64-linux-musl-graal-latest</td>
      <td>Ensures GraalPy can be built for and used on musl libc platforms such as Alpine Linux.</td>
    </tr>
    <tr>
      <td>amd64-linux-glibc-j9-17</td>
      <td>Ensures that non-Oracle JVMs work for pure Python code without JIT.</td>
    </tr>
    <tr>
      <td>ppc64le-linux-glibc-oracle-17</td>
      <td>Ensures that other architectures (ppc64le, s390x, risc-v) work for pure Python code without JIT.</td>
    </tr>
  </tbody>
</table>


      </div>
      <div role="button" class="menu-btn menu-btn--sidebar js-show-sidebar" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
    </div>
  </div>
</article>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      var tocContainer = document.querySelector('.toc');
      var contentWrapper = document.querySelector('#content-wrapper');

      if (tocContainer && contentWrapper) {
          var headings = contentWrapper.querySelectorAll('h1, h2, h3');

          if (headings.length > 0) {
              var ul = document.createElement('ul');

              headings.forEach(function (heading) {
                  var li = document.createElement('li');
                  var a = document.createElement('a');
                  a.href = '#' + heading.id;
                  a.textContent = heading.textContent;

                  li.classList.add(heading.tagName.toLowerCase());

                  li.style.listStyleType = 'none';

                  li.appendChild(a);
                  ul.appendChild(li);
              });

              tocContainer.appendChild(ul);
          } else {
              tocContainer.innerHTML = '<p>No table of contents available.</p>';
          }
      }
  });
</script>
    </main>
    <footer class="footer footer__mobile">
  <div class="container">
    <div class="row footer-content">
      <div class="footer__logo">
        <div class="rubber-footer">
          <img src='/python/assets/logo.svg' alt="project logo">
        </div>
      </div>
      <div class="footer__columns">
        <div class="footer__columns-item">
          <h6 class="title-footer">Open Source</h6>
          <ul class="footer-list">
            <li class="footer-list__item"><a target="_blank" href="https://github.com/oracle/graalpython">Project Repository</a></li>
            <li class="footer-list__item"><a target="_blank" href="https://github.com/graalvm/graal-languages-demos/">Demos and Guides</a></li>
            <li class="footer-list__item"><a target="_blank" href="https://github.com/oracle/graalpython/blob/master/CONTRIBUTING.md">Contributing</a></li>
          </ul>
        </div>
        <div class="footer__columns-item">
          <h6 class="title-footer">Help</h6>
          <ul class="footer-list">
            <li class="footer-list__item"><a target="_blank" href="https://github.com/oracle/graalpython/issues">File an issue</a></li>
            <li class="footer-list__item"><a target="_blank" href="https://www.graalvm.org/slack-invitation/">GraalVM Slack</a></li>
            <li class="footer-list__item"><a target="_blank" href="https://github.com/oracle/graalpython">License</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
      <div class="row">
        <div class="col-sm-12">
          <p class="copyright">
            Copyright © 2026. All rights reserved.
        </div>
      </div>
    </div>
  </div>
</footer>

    <script src='/python/assets/js/main.js'></script>
    <script src='/python/assets/js/sidebar.js'></script>
  </body>
</html>

<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>Instrumentation (GraalVM Truffle Java API Reference)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.oracle.truffle.api.bytecode, annotation type: Instrumentation">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><b>GraalVM Truffle Java API Reference<br>25.0.0-dev</b><br>ad4af929c97d3f82a55ae8115553e3700d5d8383</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">com.oracle.truffle.api.bytecode</a></li>
<li><a href="Instrumentation.html" class="current-selection">Instrumentation</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#forceCached()" tabindex="0">forceCached</a></li>
<li><a href="#javadoc()" tabindex="0">javadoc</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface Instrumentation" class="title">Annotation Interface Instrumentation</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#SOURCE" title="class or interface in java.lang.annotation" class="external-link">SOURCE</a>)
<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">Instrumentation</span></div>
<div class="block">Instrumentations are operations that can be dynamically enabled at runtime. Dynamically enabling
them at runtime allows them to be used to implement features that are not commonly enabled, like
tracing, language internal debugging, profiling or taint tracking.
<p>
Instrumentations are emitted like regular operations with the <a href="BytecodeBuilder.html" title="class in com.oracle.truffle.api.bytecode"><code>builder</code></a>,
but only generate instructions if they are enabled in the <a href="BytecodeConfig.html" title="class in com.oracle.truffle.api.bytecode"><code>BytecodeConfig</code></a>. A bytecode
config with enabled instrumentations can be provided at parse time, when deserializing or using
the <a href="BytecodeRootNodes.html#update(com.oracle.truffle.api.bytecode.BytecodeConfig)"><code>update</code></a> method at any time.
<p>
Unlike regular operations, instrumentations must have transparent stack effects. This is
important to ensure that that the stack layout remains compatible when instrumentations are
enabled at runtime. This means that instrumentations can either have no dynamic operands and no
return value or one dynamic operand and one return value. Note that instrumentations can declare
<a href="ConstantOperand.html" title="annotation interface in com.oracle.truffle.api.bytecode"><code>constant operands</code></a> since those do not affect the stack.
<p>
Instrumentations with one operand and return value may freely modify values observed at runtime.
<a href="GenerateBytecode.html#boxingEliminationTypes()"><code>Boxing elimination</code></a> is reset when new
instrumentations are enabled, but it will also work for instrumentation operations.
<p>
Note that instrumentations cannot specify any <a href="Operation.html#tags()"><code>tags</code></a>, because tags must be
stable and new tags cannot be specified at runtime. Instrumentations can also not be used as
boolean converters for <a href="ShortCircuitOperation.html" title="annotation interface in com.oracle.truffle.api.bytecode"><code>short circuits</code></a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#forceCached()" class="member-name-link">forceCached</a></code></div>
<div class="col-last even-row-color">
<div class="block">Whether executing this operation should force the uncached interpreter (if enabled) to
transition to cached.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#javadoc()" class="member-name-link">javadoc</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Optional documentation for the instrumentation.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="forceCached()">
<h3>forceCached</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">forceCached</span></div>
<div class="block">Whether executing this operation should force the uncached interpreter (if enabled) to
transition to cached.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Operation.html#forceCached()"><code>Operation.forceCached()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="javadoc()">
<h3>javadoc</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">javadoc</span></div>
<div class="block">Optional documentation for the instrumentation. This documentation is included in the javadoc
for the generated interpreter.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>""</code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><center>Copyright &copy; 2012, 2025, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</footer>
</main>
</div>
</body>
</html>

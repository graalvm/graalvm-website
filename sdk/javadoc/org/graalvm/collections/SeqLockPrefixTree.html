<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>SeqLockPrefixTree (GraalVM SDK Java API Reference)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SeqLockPrefixTree (GraalVM SDK Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM SDK Java API Reference<br>22.3.0-dev</b><br>49419df74cf8478249ef325ac4ca8c62dabf0316</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/graalvm/collections/Pair.html" title="class in org.graalvm.collections"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/graalvm/collections/SeqLockPrefixTree.Node.html" title="class in org.graalvm.collections"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/graalvm/collections/SeqLockPrefixTree.html" target="_top">Frames</a></li>
<li><a href="SeqLockPrefixTree.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.graalvm.collections</div>
<h2 title="Class SeqLockPrefixTree" class="title">Class SeqLockPrefixTree</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.graalvm.collections.SeqLockPrefixTree</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">SeqLockPrefixTree</span>
extends <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Thread-safe prefix-tree implementation in which keys are sequences of 64-bit values, and the
 values are 64-bit values.
 <p>
 The prefix tree supports a single operation <code>root</code>, which returns the root node. The nodes
 support the following operations: <code>at</code> to obtain a child node, <code>value</code> to obtain the
 value at the current node, <code>setValue</code> to atomically set the value and <code>incValue</code> to
 atomically increment the value.
 <p>
 The prefix tree is implemented as follows. The tree points to the root node. Each node points to
 a set of child nodes, where each child is associated with a key. Each node additionally holds an
 arity, which is the number of children, and the 64-bit value of that node.
 <p>
 The set of child nodes can be represented as <code>null</code> if the set is empty, an array-list if
 the the set is small, or a hash table if the set is large. In all cases, the keys and the child
 nodes are kept in separate arrays.
 <p>
 The <code>at</code> operation, which takes a node and a key, and returns the corresponding child node,
 deserves an additional explanation. This operation creates an existing child associated with the
 key, or atomically creates a new child, if there was no child for that key.
 <p>
 The <code>at</code> operation is implemented as follows. There is a fast-path, which executes when the
 child node already exists, and there are no concurrent modifications at that node, and the
 slow-path, which executes when the child does not exist or when there is a concurrent
 modification. To ensure that the slow path does not obtain a monitor, the fast-path relies on a
 <i>seqlock</i>. This is a lightweight read-write lock that consists of a single 64-bit counter,
 whose value is even when the lock is in the read mode, and odd when the lock is in the write
 mode. The lock can be held by any number of readers, but at most 1 writer at any time.
 <p>
 In the read-mode, the reader must verify that the value of the lock is even and that it did not
 change from the point when the read started until the point when the read ended, and additionally
 takes care that reading an invalid state does not crash the execution. If the read fails for
 either of these reasons, the reader proceeds to the write-mode. In the write-mode, the reader or
 the writer enters a heavy lock (i.e. monitor) and then increments the seqlock's value by one,
 does the modification, and then increments the seqlock's value by one to make it even again. The
 volatile access semantics of the seqlock's value, along with the fact that the node's data only
 "grows" over time, are the properties that ensure the correctness of this implementation.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>22.3</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/graalvm/collections/SeqLockPrefixTree.Node.html" title="class in org.graalvm.collections">SeqLockPrefixTree.Node</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/graalvm/collections/SeqLockPrefixTree.html#SeqLockPrefixTree--">SeqLockPrefixTree</a></span>()</code>
<div class="block">Create new <a href="../../../org/graalvm/collections/SeqLockPrefixTree.html" title="class in org.graalvm.collections"><code>SeqLockPrefixTree</code></a> with root being a Node with key 0.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../org/graalvm/collections/SeqLockPrefixTree.Node.html" title="class in org.graalvm.collections">SeqLockPrefixTree.Node</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/graalvm/collections/SeqLockPrefixTree.html#root--">root</a></span>()</code>
<div class="block">The root node of the tree.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SeqLockPrefixTree--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SeqLockPrefixTree</h4>
<pre>public&nbsp;SeqLockPrefixTree()</pre>
<div class="block">Create new <a href="../../../org/graalvm/collections/SeqLockPrefixTree.html" title="class in org.graalvm.collections"><code>SeqLockPrefixTree</code></a> with root being a Node with key 0.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>22.3</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="root--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>root</h4>
<pre>public&nbsp;<a href="../../../org/graalvm/collections/SeqLockPrefixTree.Node.html" title="class in org.graalvm.collections">SeqLockPrefixTree.Node</a>&nbsp;root()</pre>
<div class="block">The root node of the tree.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the root of the tree</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>22.3</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM SDK Java API Reference<br>22.3.0-dev</b><br>49419df74cf8478249ef325ac4ca8c62dabf0316</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/graalvm/collections/Pair.html" title="class in org.graalvm.collections"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/graalvm/collections/SeqLockPrefixTree.Node.html" title="class in org.graalvm.collections"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/graalvm/collections/SeqLockPrefixTree.html" target="_top">Frames</a></li>
<li><a href="SeqLockPrefixTree.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><center>Copyright &copy; 2012, 2022, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>ThreadLocalAction (GraalVM Truffle Java API Reference)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ThreadLocalAction (GraalVM Truffle Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>22.3.0-dev</b><br>72f94f47257a158f054af3e905c0caee50c953e4</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/oracle/truffle/api/RootCallTarget.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.Access.html" title="class in com.oracle.truffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/oracle/truffle/api/ThreadLocalAction.html" target="_top">Frames</a></li>
<li><a href="ThreadLocalAction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.oracle.truffle.api</div>
<h2 title="Class ThreadLocalAction" class="title">Class ThreadLocalAction</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.oracle.truffle.api.ThreadLocalAction</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">ThreadLocalAction</span>
extends <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Represents an action that is executed at a <a href="../../../../com/oracle/truffle/api/TruffleSafepoint.html" title="class in com.oracle.truffle.api"><code>safepoint</code></a> location of the
 guest language execution. Thread local actions can be submitted by
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#submitThreadLocal-java.lang.Thread:A-com.oracle.truffle.api.ThreadLocalAction-"><code>languages</code></a> or
 <a href="../../../../com/oracle/truffle/api/instrumentation/TruffleInstrument.Env.html#submitThreadLocal-com.oracle.truffle.api.TruffleContext-java.lang.Thread:A-com.oracle.truffle.api.ThreadLocalAction-"><code>instruments</code></a>. When an action is submitted it will be <a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html#perform-com.oracle.truffle.api.ThreadLocalAction.Access-"><code>performed</code></a> locally
 on the threads they are submitted to. After submitting a thread local action a <a href="http://docs.oracle.com/javase/17/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> is
 returned that allows to wait for and cancel the submitted action.
 <p>
 Thread local actions can be configured to allow side-effects using the constructor of the action.
 If side-effects are allowed (<code>true</code>), then the thread-local action is allowed to throw
 non-internal guest language exceptions from the action and modify the observable guest
 application state. Otherwise, the action is not allowed to modify the observable state, and any
 non-internal guest language exception will be transformed to an internal error of type
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/AssertionError.html?is-external=true" title="class or interface in java.lang"><code>AssertionError</code></a>. Side-effects may be temporarily
 <a href="../../../../com/oracle/truffle/api/TruffleSafepoint.html#setAllowSideEffects-boolean-"><code>disabled</code></a> by the guest language.
 <p>
 Thread local actions can also be set to be executed in a synchronous or asynchronous way. A
 submitted synchronous thread-local action waits until it is started on all threads that it was
 submitted on. Then the action is <a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html#perform-com.oracle.truffle.api.ThreadLocalAction.Access-"><code>performed</code></a> on all
 threads. After they were performed on a thread, the action waits for all threads to complete. No
 synchronous thread-local actions can be submitted while performing synchronous actions, as this
 may lead to deadlocks. If a synchronous event is submitted during a synchronous event, then a
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> is thrown when the action is submitted. Asynchronous thread-local
 actions might start and complete to perform independently of each other. There is no restriction
 on how they may be submitted.
 <p>
 Thread local actions are guaranteed to be executed in the same order as they were submitted for a
 context. If a context has pending thread-local actions, the actions may be canceled when the
 context is canceled or closed invalid. Exceptions thrown by the action will be forwarded handled
 by the guest language implementation. The only exception is for truffle exceptions that are
 thrown for non-side-effecting events.
 <p>
 Example Usage:

 <pre>
 Env env; // language or instrument environment

 env.submitThreadLocal(null, new ThreadLocalAction(true, true) {
     &#64;Override
     protected void perform(Access access) {
         assert access.getThread() == Thread.currentThread();
     }

     &#64;Override
     protected String name() {
        return "MyAction"
     }

 });

 </pre>

 <p>
 Further information can be found in the
 <a href="http://github.com/oracle/graal/blob/master/truffle/docs/Safepoints.md">safepoint
 tutorial</a>.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleSafepoint.html" title="class in com.oracle.truffle.api"><code>TruffleSafepoint</code></a>, 
<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#submitThreadLocal-java.lang.Thread:A-com.oracle.truffle.api.ThreadLocalAction-"><code>TruffleLanguage.Env.submitThreadLocal(java.lang.Thread[], com.oracle.truffle.api.ThreadLocalAction)</code></a>, 
<a href="../../../../com/oracle/truffle/api/instrumentation/TruffleInstrument.Env.html#submitThreadLocal-com.oracle.truffle.api.TruffleContext-java.lang.Thread:A-com.oracle.truffle.api.ThreadLocalAction-"><code>TruffleInstrument.Env.submitThreadLocal(com.oracle.truffle.api.TruffleContext, java.lang.Thread[], com.oracle.truffle.api.ThreadLocalAction)</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.Access.html" title="class in com.oracle.truffle.api">ThreadLocalAction.Access</a></span></code>
<div class="block">Argument class for <a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html#perform-com.oracle.truffle.api.ThreadLocalAction.Access-"><code>ThreadLocalAction.perform(Access)</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html#ThreadLocalAction-boolean-boolean-">ThreadLocalAction</a></span>(boolean&nbsp;hasSideEffects,
                 boolean&nbsp;synchronous)</code>
<div class="block">Creates a new thread local action.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html#ThreadLocalAction-boolean-boolean-boolean-">ThreadLocalAction</a></span>(boolean&nbsp;hasSideEffects,
                 boolean&nbsp;synchronous,
                 boolean&nbsp;recurring)</code>
<div class="block">Creates a new thread local action.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html#perform-com.oracle.truffle.api.ThreadLocalAction.Access-">perform</a></span>(<a href="../../../../com/oracle/truffle/api/ThreadLocalAction.Access.html" title="class in com.oracle.truffle.api">ThreadLocalAction.Access</a>&nbsp;access)</code>
<div class="block">Performs the thread local action on a given thread.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ThreadLocalAction-boolean-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ThreadLocalAction</h4>
<pre>protected&nbsp;ThreadLocalAction(boolean&nbsp;hasSideEffects,
                            boolean&nbsp;synchronous)</pre>
<div class="block">Creates a new thread local action.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hasSideEffects</code> - true if the event may have side-effects else false.</dd>
<dd><code>synchronous</code> - true if the event should run synchronous else the event will run
            asynchronous.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html" title="class in com.oracle.truffle.api"><code>ThreadLocalAction</code></a></dd>
</dl>
</li>
</ul>
<a name="ThreadLocalAction-boolean-boolean-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ThreadLocalAction</h4>
<pre>protected&nbsp;ThreadLocalAction(boolean&nbsp;hasSideEffects,
                            boolean&nbsp;synchronous,
                            boolean&nbsp;recurring)</pre>
<div class="block">Creates a new thread local action.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>hasSideEffects</code> - true if the event may have side-effects else false.</dd>
<dd><code>synchronous</code> - true if the event should run synchronous else the event will run
            asynchronous.</dd>
<dd><code>recurring</code> - true if the event should be rescheduled until cancelled, else false.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html" title="class in com.oracle.truffle.api"><code>ThreadLocalAction</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="perform-com.oracle.truffle.api.ThreadLocalAction.Access-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>perform</h4>
<pre>protected abstract&nbsp;void&nbsp;perform(<a href="../../../../com/oracle/truffle/api/ThreadLocalAction.Access.html" title="class in com.oracle.truffle.api">ThreadLocalAction.Access</a>&nbsp;access)</pre>
<div class="block">Performs the thread local action on a given thread.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>access</code> - allows access to the current thread, the code location and whether a context
            was active while executing the event.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.html" title="class in com.oracle.truffle.api"><code>ThreadLocalAction</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>22.3.0-dev</b><br>72f94f47257a158f054af3e905c0caee50c953e4</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/oracle/truffle/api/RootCallTarget.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/oracle/truffle/api/ThreadLocalAction.Access.html" title="class in com.oracle.truffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/oracle/truffle/api/ThreadLocalAction.html" target="_top">Frames</a></li>
<li><a href="ThreadLocalAction.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><center>Copyright &copy; 2012, 2022, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</body>
</html>

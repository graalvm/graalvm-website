<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (26) -->
<title>ExportLibrary (GraalVM Truffle Java API Reference)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.oracle.truffle.api.library, annotation type: ExportLibrary">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><b>GraalVM Truffle Java API Reference<br>26.0.0-dev</b><br>9ec2ad24f1f50916bacfd91b16a28e10f9168b52</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">com.oracle.truffle.api.library</a></li>
<li><a href="ExportLibrary.html" class="current-selection">ExportLibrary</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#annotation-interface-required-element-summary" tabindex="0">Required Element Summary</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#value()" tabindex="0">value</a></li>
<li><a href="#receiverType()" tabindex="0">receiverType</a></li>
<li><a href="#delegateTo()" tabindex="0">delegateTo</a></li>
<li><a href="#priority()" tabindex="0">priority</a></li>
<li><a href="#transitionLimit()" tabindex="0">transitionLimit</a></li>
<li><a href="#useForAOT()" tabindex="0">useForAOT</a></li>
<li><a href="#useForAOTPriority()" tabindex="0">useForAOTPriority</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface ExportLibrary" class="title">Annotation Interface ExportLibrary</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
<a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/annotation/Repeatable.html" title="class or interface in java.lang.annotation" class="external-link">@Repeatable</a>(<a href="ExportLibrary.Repeat.html" title="annotation interface in com.oracle.truffle.api.library">ExportLibrary.Repeat</a>.class)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">ExportLibrary</span></div>
<div class="block">Allows to export messages of Truffle libraries. The exported library <a href="#value()"><code>value</code></a> specifies the library class that is exported. If there are abstract methods specified by a
library then those messages need to be implemented. A receiver may export multiple libraries at
the same time, by specifying multiple export annotations. Subclasses of the receiver type inherit
all exported messages and may also be exported again. In this case the subclass overrides the
base class export.

<h3 id="method-exports-heading">Method Exports</h3>

Messages are exported by specifying methods annotated by
<a href="ExportMessage.html" title="annotation interface in com.oracle.truffle.api.library">@ExportMessage</a> that match the name and signature of a library message.
By default the message name is inferred by the method name and the library is automatically
detected if it can be unambiguously identified by its simple name. If the receiver type is
implicit then the receiver type parameter can be omitted. Exported messages allow the use of
<a href="../dsl/Cached.html" title="annotation interface in com.oracle.truffle.api.dsl">Cached</a> and <a href="CachedLibrary.html" title="annotation interface in com.oracle.truffle.api.library">CachedLibrary</a> parameters at the end of the method. This
allows the use of nodes in implementations.

<p>
<h4 id="usage-example-heading">Usage example</h4>

Example usage with implicit receiver type:

<pre>
&#64;ExportLibrary(ArrayLibrary.class)
static final class BufferArray {

    private int length;
    private int[] buffer;

    BufferArray(int length) {
        this.length = length;
        this.buffer = new int[length];
    }

    &#64;ExportMessage
    boolean isArray() {
        return true;
    }

    &#64;ExportMessage
    int read(int index) {
        return buffer[index];
    }
}
</pre>

<h3 id="class-exports-heading">Class exports</h3>

If a message export requires more than one <a href="../dsl/Specialization.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>specialization</code></a> then the export
must be specified as class. In this case the simple name of the message is resolved by using the
class name and turning the first character lower-case. So for an exported class named
<code>Read</code> the message <code>read</code> would be used. It is not allowed to use a method
export and a class export for the same message at the same time. Multiple <a href="ExportMessage.html" title="annotation interface in com.oracle.truffle.api.library"><code>ExportMessage</code></a>
annotations may be used for the same method or class to export them for multiple messages. In
this case the <a href="ExportMessage.html#name()"><code>message name</code></a> needs to be specified explicitly and the
target signatures need to match for all exported messages.

<p>
<h4 id="usage-example-heading1">Usage example</h4>

<pre>
&#64;ExportLibrary(value = ArrayLibrary.class)
static final class SequenceArray {

    final int start;
    final int stride;
    final int length;

    SequenceArray(int start, int stride, int length) {
        this.start = start;
        this.stride = stride;
        this.length = length;
    }

    &#64;ExportMessage
    boolean isArray() {
        return true;
    }

    &#64;ExportMessage
    static class Read {
        &#64;Specialization(guards = {"seq.stride == cachedStride",
                        "seq.start  == cachedStart"}, limit = "1")
        static int doSequenceCached(SequenceArray seq, int index,
                        &#64;Cached("seq.start") int cachedStart,
                        &#64;Cached("seq.stride") int cachedStride) {
            return cachedStart + cachedStride * index;
        }

        &#64;Specialization(replaces = "doSequenceCached")
        static int doSequence(SequenceArray seq, int index) {
            return doSequenceCached(seq, index, seq.start, seq.stride);
        }
    }
}
</pre>

<h3 id="explicit-receiver-types-heading">Explicit Receiver Types</h3>

For <a href="GenerateLibrary.DefaultExport.html" title="annotation interface in com.oracle.truffle.api.library"><code>default exports</code></a> or types that support <a href="DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><code>dynamic dispatch</code></a> the export may declare an <a href="#receiverType()"><code>explicit receiver type</code></a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="GenerateLibrary.html" title="annotation interface in com.oracle.truffle.api.library"><code>GenerateLibrary</code></a></li>
<li><a href="CachedLibrary.html" title="annotation interface in com.oracle.truffle.api.library"><code>CachedLibrary</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static @interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ExportLibrary.Repeat.html" class="type-name-link" title="annotation interface in com.oracle.truffle.api.library">ExportLibrary.Repeat</a></code></div>
<div class="col-last even-row-color">
<div class="block">Repeat annotation for <a href="ExportLibrary.html" title="annotation interface in com.oracle.truffle.api.library"><code>ExportLibrary</code></a>.</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE REQUIRED MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-required-element-summary">
<h2>Required Element Summary</h2>
<div class="caption"><span>Required Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Required Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a><wbr>&lt;? extends <a href="Library.html" title="class in com.oracle.truffle.api.library">Library</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#value()" class="member-name-link">value</a></code></div>
<div class="col-last even-row-color">
<div class="block">The library class that specifies the messages that are exported.</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#delegateTo()" class="member-name-link">delegateTo</a></code></div>
<div class="col-last even-row-color">
<div class="block">Automatically forwards all messages of the library which are not exported to the value of a
delegate field.</div>
</div>
<div class="col-first odd-row-color"><code>int</code></div>
<div class="col-second odd-row-color"><code><a href="#priority()" class="member-name-link">priority</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specifies the priority for service provider lookup based default exports.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a><wbr>&lt;?&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#receiverType()" class="member-name-link">receiverType</a></code></div>
<div class="col-last even-row-color">
<div class="block">The explicit receiver type to use if specified.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#transitionLimit()" class="member-name-link">transitionLimit</a></code></div>
<div class="col-last odd-row-color">
<div class="block">By default export libraries don't allow changes in the behavior of accepts for a receiver
instance.</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#useForAOT()" class="member-name-link">useForAOT</a></code></div>
<div class="col-last even-row-color">
<div class="block">Enables <a href="../dsl/AOTSupport.html#prepareForAOT(com.oracle.truffle.api.nodes.RootNode)"><code>AOT
preparation</code></a> for this export.</div>
</div>
<div class="col-first odd-row-color"><code>int</code></div>
<div class="col-second odd-row-color"><code><a href="#useForAOTPriority()" class="member-name-link">useForAOTPriority</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specifies the priority for the export when used for AOT preparation.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="value()">
<h3>value</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="Library.html" title="class in com.oracle.truffle.api.library">Library</a>&gt;</span>&nbsp;<span class="element-name">value</span></div>
<div class="block">The library class that specifies the messages that are exported.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="receiverType()">
<h3>receiverType</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;?&gt;</span>&nbsp;<span class="element-name">receiverType</span></div>
<div class="block">The explicit receiver type to use if specified. This is useful to specifying the receiver
type for <a href="GenerateLibrary.DefaultExport.html" title="annotation interface in com.oracle.truffle.api.library"><code>default exports</code></a> or types that are
<a href="DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><code>dynamically dispatched</code></a>. If specified, all exported methods
need to be declared statically with the receiver type argument as first parameter.

<h4 id="usage-example-heading2">Usage example</h4>

<pre>
&#64;ExportLibrary(value = ArrayLibrary.class, receiverType = Integer.class)
static final class ScalarIntegerArray {

    &#64;ExportMessage
    static boolean isArray(Integer receiver) {
        return true;
    }

    &#64;ExportMessage
    int read(Integer receiver, int index) {
        if (index == 0) {
            return receiver;
        } else {
            throw new ArrayIndexOutOfBoundsException(index);
        }
    }
}
</pre></div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>java.lang.Void.class</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="delegateTo()">
<h3>delegateTo</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">delegateTo</span></div>
<div class="block">Automatically forwards all messages of the library which are not exported to the value of a
delegate field. This can be used to conveniently build wrapper types that do not delegate all
but only some of the messages. To forward messages from unknown libraries, this can be
combined with <a href="ReflectionLibrary.html" title="class in com.oracle.truffle.api.library"><code>reflection proxies</code></a>.
<p>
The specified field name must link to a field in the specified <a href="#receiverType()"><code>receiver type</code></a>, or in the annotated type if no receiver type is specified. The field must
have the modifier <code>final</code>. The specified field must be visible to the generated
code and therefore not private. The referenced field must not be static.
<p>
<h4 id="usage-example-heading3">Usage example</h4>

<pre>
&#64;GenerateLibrary
public abstract class ArrayLibrary extends Library {
    public String toDisplayString(Object receiver) {
        return receiver.toString();
    }

    public String otherMessage(Object receiver) {
        return "otherResult";
    }
}
</pre>

In the following wrapper all messages of ArrayLibrary will be forwarded to the value of the
delegate field.

<pre>
&#64;ExportLibrary(value = ArrayLibrary.class, delegateTo = "delegate")
final class ArrayDelegateWrapper {

    final Object delegate;

    ArrayDelegateWrapper(Object delegate) {
        this.delegate = delegate;
    }

}
</pre>

In the following wrapper the toDisplayString will be re-exported and not delegated to the
delegate field. All other messages of the ArrayLibrary are implicitly delegated to the value
of the delegate field.

<pre>
&#64;ExportLibrary(value = ArrayLibrary.class, delegateTo = "delegate")
final class ArrayOverrideWrapper {

    final Object delegate;

    ArrayOverrideWrapper(Object delegate) {
        this.delegate = delegate;
    }

    &#64;ExportMessage
    final String toDisplayString() {
        return "Wrapped";
    }
}

</pre>

In the following wrapper the toDisplayString will be exported but forwards to the delegate
manually adding brackets around the delegate value.

<pre>
&#64;ExportLibrary(value = ArrayLibrary.class, delegateTo = "delegate")
final class ArrayManualDelegateWrapper {

    final Object delegate;

    ArrayManualDelegateWrapper(Object delegate) {
        this.delegate = delegate;
    }

    &#64;ExportMessage
    final String toDisplayString(
                    &#64;CachedLibrary("this.delegate") ArrayLibrary arrayLibrary) {
        return "Wrapped[" + arrayLibrary.toDisplayString(delegate) + "]";
    }
}
</pre>


In the following wrapper the toDisplayString message is re-exported. Other messages of the
ArrayLibrary are delegated as well as all messages of any other library that supports
reflection.

<pre>
&#64;ExportLibrary(value = ArrayLibrary.class, delegateTo = "delegate")
&#64;ExportLibrary(value = ReflectionLibrary.class, delegateTo = "delegate")
final class ArrayFullWrapper {

    final Object delegate;

    ArrayFullWrapper(Object delegate) {
        this.delegate = delegate;
    }

    &#64;ExportMessage
    final String toDisplayString() {
        return "Wrapped";
    }
}
</pre></div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>""</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="priority()">
<h3>priority</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">priority</span></div>
<div class="block">Specifies the priority for service provider lookup based default exports. Needs to be
specified for exports with explicit receiver type, that are not declared as default exports.
Positive values indicate a priority higher than library builtin <a href="GenerateLibrary.DefaultExport.html" title="annotation interface in com.oracle.truffle.api.library"><code>default
exports</code></a>, negative values lower than default exports. A priority equal to 0 is invalid.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.1</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>0</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="transitionLimit()">
<h3>transitionLimit</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">transitionLimit</span></div>
<div class="block">By default export libraries don't allow changes in the behavior of accepts for a receiver
instance. If this assumption is violated then an <a href="https://docs.oracle.com/en/java/javase/26/docs/api/java.base/java/lang/AssertionError.html" title="class or interface in java.lang" class="external-link"><code>AssertionError</code></a> is thrown. If the
transition limit is set then the accepts condition is allowed to transition from
<code>true</code> to <code>false</code> for a library created for a receiver instance. The
limit expression specifies how many fallback library instances should be created until the
library is dispatching to uncached cases of the library. By default accepts transitions are
not allowed. Note this option is only relevant if you use a custom accepts implementation in
the export. If the receiver transitions in parallel then there are no guarantees provided.
The library caller is responsible to provide proper synchronization.
<p>
This feature is useful to implement runtime value representations that dynamically transition
from one state to the next. With arrays, a common example is the access strategy that changes
from sparse or dense arrays. Another use-case is the Truffle object model, where the shape
should be used in the accepts condition, to common out the shape check, but at the same time
the shape should be able to transition due to a property write.
<p>
The transition limit expression is allowed to access visible static fields or methods of the
enclosing class. If the limit needs to be looked up from an option it is recommended to
extract the option lookup in a static Java method.
<p>
<b>Performance note:</b> If any number of transitions is enabled, the accepts guard of this
library effectively needs to be repeated on every message invocation of this export. It is
therefore recommended to not set this property for performance reasons, if possible. It is
also recommended to double check that the duplicated accepts guard for every message is
eliminated in the compiler graphs after Partial evaluation.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Library.html#accepts(java.lang.Object)"><code>Library.accepts(Object)</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>""</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="useForAOT()">
<h3>useForAOT</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">useForAOT</span></div>
<div class="block">Enables <a href="../dsl/AOTSupport.html#prepareForAOT(com.oracle.truffle.api.nodes.RootNode)"><code>AOT
preparation</code></a> for this export. An exported library must use the <a href="../dsl/GenerateAOT.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>GenerateAOT</code></a> annotation
on the library class to allow exports to enable AOT. Multiple AOT exports may be specified
for each library. The library may be used for implicit and explicit receivers, dynamic
dispatch and default exports. Merged libraries are currently not supported for AOT enabled
exports. A <a href="#useForAOTPriority()"><code>priority</code></a> must be set in order to resolve a
deterministic order for AOT initialized exports.
<p>
All exported libraries with AOT enabled are loaded and initialized eagerly when a library
that supports AOT is used for the first time. In order for this to work the exported library
automatically generates subclass of <a href="provider/EagerExportProvider.html" title="interface in com.oracle.truffle.api.library.provider"><code>EagerExportProvider</code></a>, that must be registered in
the module descriptor as a provided service. When the language is compiled using native-image
then this is not necessary as native-image compilation discovers all AOT exports for a
library during native image generation.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>21.2</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="useForAOTPriority()">
<h3>useForAOTPriority</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">useForAOTPriority</span></div>
<div class="block">Specifies the priority for the export when used for AOT preparation. A higher priority
indicates that this export should be ordered earlier in the code rather than later. For
example if a library has two exports and one has a higher priority then the export with the
higher priority with be inserted first in the inline cache. Consequently, the library export
accepts method will be invoked earlier for a higher priority.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>21.2</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>0</code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><center>Copyright &copy; 2012, 2025, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</footer>
</main>
</div>
</body>
</html>

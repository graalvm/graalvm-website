<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>GenerateLibrary.Abstract (GraalVM Truffle Java API Reference)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.oracle.truffle.api.library, annotation type: GenerateLibrary, annotation type: Abstract">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><b>GraalVM Truffle Java API Reference<br>25.1.0-dev</b><br>4a74b8f61a7e88ceca8c3cd74d5a0fd776697fef</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">com.oracle.truffle.api.library</a></li>
<li><a href="GenerateLibrary.html">GenerateLibrary</a></li>
<li><a href="GenerateLibrary.Abstract.html" class="current-selection">Abstract</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#ifExported()" tabindex="0">ifExported</a></li>
<li><a href="#ifExportedAsWarning()" tabindex="0">ifExportedAsWarning</a></li>
<li><a href="#replacementOf()" tabindex="0">replacementOf</a></li>
<li><a href="#replacementMethod()" tabindex="0">replacementMethod</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface GenerateLibrary.Abstract" class="title">Annotation Interface GenerateLibrary.Abstract</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Enclosing class:</dt>
<dd><code><a href="GenerateLibrary.html" title="annotation interface in com.oracle.truffle.api.library">GenerateLibrary</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#CLASS" title="class or interface in java.lang.annotation" class="external-link">CLASS</a>)
<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/ElementType.html#METHOD" title="class or interface in java.lang.annotation" class="external-link">METHOD</a>)
</span><span class="modifiers">public static @interface </span><span class="element-name type-name-label">GenerateLibrary.Abstract</span></div>
<div class="block">Makes a library message abstract, but allows to keep a default implementation. By default,
abstract messages throw an <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/AbstractMethodError.html" title="class or interface in java.lang" class="external-link"><code>AbstractMethodError</code></a> if they are not exported for a given
receiver type. To customize this behavior the library message can specify a method body and
annotate it with <a href="GenerateLibrary.Abstract.html" title="annotation interface in com.oracle.truffle.api.library"><code>GenerateLibrary.Abstract</code></a> to keep requiring an implementation from exports.
<p>
<b>For example:</b>

<pre>
&#64;GenerateLibrary
public abstract class ArrayLibrary extends Library {

    &#64;Abstract(ifExported = "read")
    public boolean isArray(Object receiver) {
        return false;
    }

    &#64;Abstract(ifExported = "isArray")
    public int read(Object receiver, int index) {
        throw new UnsupportedOperationException();
    }
}
</pre>

In this example a receiver that does not export the <code>ArrayLibrary</code> will return
<code>false</code> for <code>isArray</code> and throw an
<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/UnsupportedOperationException.html" title="class or interface in java.lang" class="external-link">UnsupportedOperationException</a> for <code>read</code> calls. A message may be made
conditionally abstract by specifying the <a href="#ifExported()"><code>ifExported()</code></a> attribute.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#ifExported()"><code>ifExported()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#ifExported()" class="member-name-link">ifExported</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies a message to be abstract only if another message is implemented.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#ifExportedAsWarning()" class="member-name-link">ifExportedAsWarning</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specifies a message to be abstract only if another message is implemented.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#replacementMethod()" class="member-name-link">replacementMethod</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies a custom replacement method to handle delegation for a message declared with
<a href="#replacementOf()"><code>replacementOf()</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#replacementOf()" class="member-name-link">replacementOf</a></code></div>
<div class="col-last odd-row-color">
<div class="block">A tool to deprecate and replace messages during library evolution.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="ifExported()">
<h3>ifExported</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">ifExported</span></div>
<div class="block">Specifies a message to be abstract only if another message is implemented. Multiple other
messages can be specified. If the list is empty, the message is always abstract unless
<a href="#ifExportedAsWarning()"><code>ifExportedAsWarning()</code></a> is not empty. If the list is not empty it takes
precedence over <a href="#ifExportedAsWarning()"><code>ifExportedAsWarning()</code></a>.
<p>
<b>For example:</b>

<pre>
&#64;GenerateLibrary
public abstract class ArrayLibrary extends Library {

    &#64;Abstract(ifExported = "read")
    public boolean isArray(Object receiver) {
        return false;
    }

    &#64;Abstract(ifExported = "isArray")
    public int read(Object receiver, int index) {
        throw new UnsupportedOperationException();
    }
}
</pre>

In this example the isArray message only needs to be exported if the read message is
exported and vice-versa.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>{}</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="ifExportedAsWarning()">
<h3>ifExportedAsWarning</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">ifExportedAsWarning</span></div>
<div class="block">Specifies a message to be abstract only if another message is implemented. Multiple other
messages can be specified. The message is not actually made abstract unless it is in the
<a href="#ifExported()"><code>ifExported()</code></a> list. Only a warning is produced that prompts the user to
implement the message
<p>
<b>For example:</b>

<pre>
&#64;GenerateLibrary
public abstract class MaybeNumberLibrary extends Library {

    public boolean isNumber(Object receiver) {
        return false;
    }

    &#64;Abstract(ifExportedAsWarning = "isNumber")
    public Number getNumber(Object receiver) {
        throw new UnsupportedOperationException();
    }
}
</pre>

In this example, if the isNumber message is exported and the getNumber message is not,
the user gets a warning.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>23.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>{}</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="replacementOf()">
<h3>replacementOf</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">replacementOf</span></div>
<div class="block">A tool to deprecate and replace messages during library evolution.
<p>
The primary use case is to facilitate transitions from one message to another by
designating a new message as a replacement for an older, deprecated message. When this
annotation is present, and the deprecated message is not explicitly implemented, a
default implementation is generated that delegates from the deprecated message to its
designated replacement. The message specification may optionally include argument types
in parentheses. When delegation cannot be handled automatically, a custom implementation
can be provided using <a href="#replacementMethod()"><code>replacementMethod()</code></a>.
<p>
The migration behavior between deprecated and replacement messages depends on whether the
exporter (the library implementer) and the client (the library user) have migrated to the
new API. The following combinations are supported:
<ol>
<li><b>Both exporter and client use the deprecated API:</b> The original deprecated
message is used exactly as before deprecation. No delegation or generated replacement is
involved.</li>
<li><b>Exporter uses the deprecated API, client uses the new API:</b> The default
implementation of the new message is used. It delegates to the exporter's implementation
of the deprecated message.</li>
<li><b>Exporter uses the new API, client uses the deprecated API:</b> The annotation
processor generates an implementation of the deprecated message that delegates to the
exporter's new message. When the default delegation is insufficient, the
<a href="#replacementMethod()"><code>replacementMethod()</code></a> can be used to provide a custom conversion or adapter.</li>
<li><b>Both exporter and client use the new API:</b> The generated deprecated message is
no longer needed and can be safely removed once all usages have migrated.</li>
</ol>
<p>
<b>Example:</b>

<pre>
&#64;GenerateLibrary
public abstract class ArrayLibrary extends Library {

    &#64;Abstract(ifExported = "isArray")
    &#64;Deprecated
    public int read(Object receiver, int index) {
        throw new UnsupportedOperationException();
    }

    &#64;Abstract(ifExported = "isArray", replacementOf = "read(Object, int)")
    public int read(Object receiver, long index) {
        throw new UnsupportedOperationException();
    }
}
</pre>

In this example, the <code>read(Object, long)</code> message replaces
<code>read(Object, int)</code>. If only the new message is implemented, the following
delegation is generated automatically:

<pre>
public int read(Object receiver, int index) {
    return read(receiver, (long) index);
}
</pre>

Legacy clients can continue calling the deprecated message, while exporters need only
implement the new message signature.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>25.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#replacementMethod()"><code>replacementMethod()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>""</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="replacementMethod()">
<h3>replacementMethod</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">replacementMethod</span></div>
<div class="block">Specifies a custom replacement method to handle delegation for a message declared with
<a href="#replacementOf()"><code>replacementOf()</code></a>.
<p>
This attribute provides a way to manually implement delegation logic when automatic
delegation from the deprecated message to its replacement cannot be generated correctly.
Typical reasons include differences in argument semantics, necessary type conversions, or
behavioral changes that cannot be inferred automatically.
<p>
This element is only valid when <a href="#replacementOf()"><code>replacementOf()</code></a> is also set. Using it without
<code>replacementOf</code> will result in a compilation error. The specified method must have
a compatible signature and be accessible from the annotated message.

<p>
<b>Example:</b>

<pre>
&#64;Abstract(ifExported = "isArray", replacementOf = "read(Object, int)", replacementMethod = "readLegacy")
public int read(Object receiver, long unsignedIndex) {
    throw new UnsupportedOperationException();
}

protected final int readLegacy(Object receiver, int index) {
    long unsignedIndex = Integer.toUnsignedLong(index);
    return read(receiver, unsignedIndex);
}
</pre>

In this example, the deprecated <code>read(Object, int)</code> message cannot be automatically
delegated to <code>read(Object, long)</code> because the index must be treated as unsigned.
The custom <code>readLegacy</code> method therefore provides the correct conversion logic.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>25.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#replacementOf()"><code>replacementOf()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>""</code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><center>Copyright &copy; 2012, 2025, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</footer>
</main>
</div>
</body>
</html>

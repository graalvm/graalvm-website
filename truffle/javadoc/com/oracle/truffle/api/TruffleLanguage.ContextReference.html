<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TruffleLanguage.ContextReference (GraalVM Truffle Java API Reference)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TruffleLanguage.ContextReference (GraalVM Truffle Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":6};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>22.3.0-dev</b><br>58695347dbdb814e3b920cda6b4780cef63e86db</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextThreadLocalFactory.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/oracle/truffle/api/TruffleLanguage.ContextReference.html" target="_top">Frames</a></li>
<li><a href="TruffleLanguage.ContextReference.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.oracle.truffle.api</div>
<h2 title="Class TruffleLanguage.ContextReference" class="title">Class TruffleLanguage.ContextReference&lt;C&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.oracle.truffle.api.TruffleLanguage.ContextReference&lt;C&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public abstract static class <span class="typeNameLabel">TruffleLanguage.ContextReference&lt;C&gt;</span>
extends <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Represents a reference to the current context. The current context is a thread local value
 that changes when polyglot context is entered or left. Context references are created using
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html#create-java.lang.Class-"><code>TruffleLanguage.ContextReference.create(Class)</code></a> and are intended to be stored in static final fields and accessed at
 runtime using <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html#get-com.oracle.truffle.api.nodes.Node-"><code>TruffleLanguage.ContextReference.get(Node)</code></a> with the current <a href="../../../../com/oracle/truffle/api/nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a>, if available,
 as parameter.
 <p>
 Example intended usage:

 <pre>
 public final class MyContext  {

     private static final ContextReference&lt;MyContext&gt; REFERENCE =
                    ContextReference.create(MyLanguage.class);

     public static MyContext get(Node node) {
          return REFERENCE.get(node);
     }
 }

 &#64;Registration(...)
 public final class MyLanguage extends TruffleLanguage<MyContext> {

    // ...

    private static final LanguageReference&lt;MyLanguage&gt; REFERENCE =
                   LanguageReference.create(MyLanguage.class);

    public static MyLanguage get(Node node) {
         return REFERENCE.get(node);
    }
 }

 public final class MyLanguageNode extends Node {

     // ...
     public Object execute(VirtualFrame frame) {
         MyContext currentContext = getContext();
         MyLanguage currentLanguage = getLanguage();

         // use context or language on the fast-path

         // references can also be used behind the boundary
         exampleBoundary();
     }

     &#64;TruffleBoundary
     public void exampleBoundary() {
        MyLanguage currentLanguage = MyLanguage.get(null);
        MyContext currentContext = MyContext.get(null);

        // use context or language on the slow-path
     }

     public final MyLanguage getLanguage() {
         return MyLanguage.get(this);
     }

     public final MyContext getContext() {
         return MyContext.get(this);
     }
 }
 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.25 revised in 21.3</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html#ContextReference--">ContextReference</a></span>()</code>
<div class="block">Constructors for subclasses.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static &lt;T extends <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&lt;C&gt;,C&gt;<br><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api">TruffleLanguage.ContextReference</a>&lt;C&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html#create-java.lang.Class-">create</a></span>(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;T&gt;&nbsp;languageClass)</code>
<div class="block">Creates a new instance of a context reference for an registered language.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="type parameter in TruffleLanguage.ContextReference">C</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html#get-com.oracle.truffle.api.nodes.Node-">get</a></span>(<a href="../../../../com/oracle/truffle/api/nodes/Node.html" title="class in com.oracle.truffle.api.nodes">Node</a>&nbsp;node)</code>
<div class="block">Returns the current language context associated with the current thread.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ContextReference--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ContextReference</h4>
<pre>protected&nbsp;ContextReference()</pre>
<div class="block">Constructors for subclasses.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="get-com.oracle.truffle.api.nodes.Node-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public abstract&nbsp;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="type parameter in TruffleLanguage.ContextReference">C</a>&nbsp;get(<a href="../../../../com/oracle/truffle/api/nodes/Node.html" title="class in com.oracle.truffle.api.nodes">Node</a>&nbsp;node)</pre>
<div class="block">Returns the current language context associated with the current thread. An enclosing
 node should be provided as parameter if available, otherwise <code>null</code> may be
 provided. This method is designed to be called safely from compiled code paths. In order
 to maximize efficiency in compiled code paths, a partial evaluation constant and adopted
 node should be passed as parameter. If this is the case then the return context will get
 constant folded in compiled code paths if there is a only single language instance for
 the enclosing engine or lookup location/node.
 <p>
 The current context might vary between <a href="../../../../com/oracle/truffle/api/nodes/RootNode.html#execute-com.oracle.truffle.api.frame.VirtualFrame-"><code>executions</code></a>
 if resources or code is <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#SHARED"><code>shared</code></a> between multiple contexts or
 when used as part of an InteropLibrary export. It is recommended to *not* cache values of
 the context in the AST to reduce footprint. Getting it through a context reference will
 either constant fold or be very efficient in compiled code paths.
 <p>
 If a context is accessed during <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>context
 creation</code></a>, on an unknown Thread, or in the language class constructor an
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> is thrown.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.3</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api"><code>for a full usage example</code></a></dd>
</dl>
</li>
</ul>
<a name="create-java.lang.Class-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>create</h4>
<pre>public static&nbsp;&lt;T extends <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&lt;C&gt;,C&gt;&nbsp;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api">TruffleLanguage.ContextReference</a>&lt;C&gt;&nbsp;create(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;T&gt;&nbsp;languageClass)</pre>
<div class="block">Creates a new instance of a context reference for an registered language. Throws
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang"><code>IllegalArgumentException</code></a> if the provided language class is not
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html" title="annotation in com.oracle.truffle.api"><code>registered</code></a>. Guaranteed to always return the same context reference
 for a given language class.
 <p>
 See <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.ContextReference</code></a> for a usage example.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.3</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>22.3.0-dev</b><br>58695347dbdb814e3b920cda6b4780cef63e86db</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextThreadLocalFactory.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/oracle/truffle/api/TruffleLanguage.ContextReference.html" target="_top">Frames</a></li>
<li><a href="TruffleLanguage.ContextReference.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><center>Copyright &copy; 2012, 2022, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</body>
</html>

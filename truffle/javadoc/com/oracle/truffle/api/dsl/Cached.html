<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>Cached (GraalVM Truffle Java API Reference)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.oracle.truffle.api.dsl, annotation type: Cached">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><b>GraalVM Truffle Java API Reference<br>25.1.0-dev</b><br>ed9a330828090733325599fff04c3dab72c8717d</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">com.oracle.truffle.api.dsl</a></li>
<li><a href="Cached.html" class="current-selection">Cached</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#value()" tabindex="0">value</a></li>
<li><a href="#uncached()" tabindex="0">uncached</a></li>
<li><a href="#dimensions()" tabindex="0">dimensions</a></li>
<li><a href="#allowUncached()" tabindex="0">allowUncached</a></li>
<li><a href="#inline()" tabindex="0">inline</a></li>
<li><a href="#inlineMethod()" tabindex="0">inlineMethod</a></li>
<li><a href="#parameters()" tabindex="0">parameters</a></li>
<li><a href="#weak()" tabindex="0">weak</a></li>
<li><a href="#adopt()" tabindex="0">adopt</a></li>
<li><a href="#neverDefault()" tabindex="0">neverDefault</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface Cached" class="title">Annotation Interface Cached</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#CLASS" title="class or interface in java.lang.annotation" class="external-link">CLASS</a>)
<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/annotation/ElementType.html#PARAMETER" title="class or interface in java.lang.annotation" class="external-link">PARAMETER</a>)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">Cached</span></div>
<div class="block"><p>
A parameter annotated with <a href="Cached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>Cached</code></a> in a <a href="Specialization.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>Specialization</code></a> refers to a <b>cached</b>
value of a specialization instance. A cached parameter value is initialized once using the
initializer expression at specialization instantiation. For each call of the specialization
method the cached value is provided by using the annotated parameter from the method body. Cache
initializers are potentially executed before guard expressions declared in
<a href="Specialization.html#guards()"><code>Specialization.guards()</code></a>.
</p>
<p>
A typical specialization may define multiple dynamic and multiple cached parameters. Dynamic
parameter values are typically provided by executing child nodes of the operation. Cached
parameters are initialized and stored once per specialization instantiation. Cached parameters
are always constant at compile time. You may verify this by invoking
<a href="../CompilerAsserts.html#compilationConstant(java.lang.Object)"><code>CompilerAsserts.compilationConstant(Object)</code></a> on any cached parameter. For consistency
between specialization declarations cached parameters must be declared last in a specialization
method.
</p>
<p>
The initializer expression of a cached parameter is defined using a subset of Java. This subset
includes field/parameter accesses, function calls, type exact infix comparisons (==, !=, &lt;, &lt;=,
&gt;, &gt;=), logical negation (!), logical disjunction (||), null, true, false, and integer literals.
The return type of the initializer expression must be assignable to the parameter type. If the
annotated parameter type is derived from <a href="../nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> then the <a href="../nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> instance is allowed
to use the <a href="../nodes/Node.html#replace(T)"><code>Node.replace(Node)</code></a> method to replace itself. Bound elements without receivers
are resolved using the following order:
<ol>
<li>Dynamic and cached parameters of the enclosing specialization.</li>
<li>Fields defined using <a href="NodeField.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>NodeField</code></a> for the enclosing node.</li>
<li>Public constructors of the type of the annotated parameter using the <code>new</code> keyword
as method name.</li>
<li>Public and static methods or fields of the type of the annotated parameter.</li>
<li>Non-private, static or virtual methods or fields of enclosing node.</li>
<li>Non-private, static or virtual methods or fields of super types of the enclosing node.</li>
<li>Public and static methods or fields imported using <a href="ImportStatic.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>ImportStatic</code></a>.</li>
</ol>

The following examples explain the intended use of the <a href="Cached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>Cached</code></a> annotation. All of the
examples have to be enclosed in the following node declaration:
</p>

<pre>
<a href="NodeChild.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>@NodeChild</code></a>("operand")
abstract TestNode extends Node {
  abstract void execute(Object operandValue);
  // ... example here ...
}
</pre>

<ol>
<li>This example defines one dynamic and one cached parameter. The operand parameter is
representing the dynamic value of the operand while the cachedOperand is initialized once at
first execution of the specialization (specialization instantiation time).

<pre>
 &#064;Specialization
 void doCached(int operand, <code>@Cached</code>(&quot;operand&quot;) int cachedOperand) {
     CompilerAsserts.compilationConstant(cachedOperand);
     ...
 }

 Example executions:
 execute(1) =&gt; doCached(1, 1) // new instantiation, localOperand is bound to 1
 execute(0) =&gt; doCached(0, 1)
 execute(2) =&gt; doCached(2, 1)

</pre>

</li>
<li>We extend the previous example by a guard for the cachedOperand value to be equal to the
dynamic operand value. This specifies that the specialization is instantiated for each individual
operand value that is provided. There are a lot of individual <code>int</code> values and for
each individual <code>int</code> value a new specialization would get instantiated. The
<a href="Specialization.html#limit()"><code>Specialization.limit()</code></a> property defines a limit for the number of specializations that
can get instantiated. If the specialization instantiation limit is reached then no further
specializations are instantiated. Like for other specializations if there are no more
specializations defined an <a href="UnsupportedSpecializationException.html" title="class in com.oracle.truffle.api.dsl"><code>UnsupportedSpecializationException</code></a> is thrown. The default
specialization instantiation limit is <code>3</code>.

<pre>
&#064;Specialization(guards = &quot;operand == cachedOperand&quot;)
void doCached(int operand, <code>@Cached</code>(&quot;operand&quot;) int cachedOperand) {
   CompilerAsserts.compilationConstant(cachedOperand);
   ...
}

Example executions:
execute(0) =&gt; doCached(0, 0) // new instantiation, cachedOperand is bound to 0
execute(1) =&gt; doCached(1, 1) // new instantiation, cachedOperand is bound to 1
execute(1) =&gt; doCached(1, 1)
execute(2) =&gt; doCached(2, 2) // new instantiation, cachedOperand is bound to 2
execute(3) =&gt; throws UnsupportedSpecializationException // instantiation limit overflows

</pre>

</li>
<li>To handle the limit overflow we extend our example by an additional specialization named
<code>doNormal</code>. This specialization has the same type restrictions but does not have local
state nor the operand identity guard. It is also declared after <code>doCached</code> therefore
it is only instantiated if the limit of the <code>doCached</code> specialization has been
reached. In other words <code>doNormal</code> is more generic than <code>doCached</code> . The
<code>doNormal</code> specialization uses <code>replaces=&quot;doCached&quot;</code> to specify
that all instantiations of <code>doCached</code> get removed if <code>doNormal</code> is
instantiated. Alternatively if the <code>replaces</code> relation is omitted then all
<code>doCached</code> instances remain but no new instances are created.

<pre>
&#064;Specialization(guards = &quot;operand == cachedOperand&quot;)
void doCached(int operand, <code>@Cached</code>(&quot;operand&quot;) int cachedOperand) {
   CompilerAsserts.compilationConstant(cachedOperand);
   ...
}

&#064;Specialization(replaces = &quot;doCached&quot;)
void doNormal(int operand) {...}

Example executions with replaces = &quot;doCached&quot;:
execute(0) =&gt; doCached(0, 0) // new instantiation, cachedOperand is bound to 0
execute(1) =&gt; doCached(1, 1) // new instantiation, cachedOperand is bound to 1
execute(1) =&gt; doCached(1, 1)
execute(2) =&gt; doCached(2, 2) // new instantiation, cachedOperand is bound to 2
execute(3) =&gt; doNormal(3)    // new instantiation of doNormal due to limit overflow; doCached gets removed.
execute(1) =&gt; doNormal(1)

Example executions without replaces = &quot;doCached&quot;:
execute(0) =&gt; doCached(0, 0) // new instantiation, cachedOperand is bound to 0
execute(1) =&gt; doCached(1, 1) // new instantiation, cachedOperand is bound to 1
execute(1) =&gt; doCached(1, 1)
execute(2) =&gt; doCached(2, 2) // new instantiation, cachedOperand is bound to 2
execute(3) =&gt; doNormal(3)    // new instantiation of doNormal due to limit overflow
execute(1) =&gt; doCached(1, 1)

</pre>

</li>
<li>This next example shows how methods from the enclosing node can be used to initialize cached
parameters. Please note that the visibility of transformLocal must not be <code>private</code>.

<pre>
&#064;Specialization
void s(int operand, <code>@Cached</code>(&quot;transformLocal(operand)&quot;) int cachedOperand) {
}

int transformLocal(int operand) {
    return operand &amp; 0x42;
}

</li>
</pre>

<li>The <code>new</code> keyword can be used to initialize a cached parameter using a constructor
of the parameter type.

<pre>
&#064;Specialization
void s(Object operand, <code>@Cached</code>(&quot;new()&quot;) OtherNode someNode) {
    someNode.execute(operand);
}

static class OtherNode extends Node {

    public String execute(Object value) {
        throw new UnsupportedOperationException();
    }
}

</pre>

</li>
<li>Java types without public constructor but with a static factory methods can be initialized by
just referencing its static factory method and its parameters. In this case
<a href="../profiles/BranchProfile.html#create()"><code>BranchProfile.create()</code></a> is used to instantiate the
<a href="../profiles/BranchProfile.html" title="class in com.oracle.truffle.api.profiles"><code>BranchProfile</code></a> instance.

<pre>
&#064;Specialization
void s(int operand, <code>@Cached</code>(&quot;create()&quot;) BranchProfile profile) {
}
</pre>

</li>
</ol></div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.8 or earlier</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Specialization.html#guards()"><code>Specialization.guards()</code></a></li>
<li><a href="Specialization.html#replaces()"><code>Specialization.replaces()</code></a></li>
<li><a href="Specialization.html#limit()"><code>Specialization.limit()</code></a></li>
<li><a href="ImportStatic.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>ImportStatic</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static @interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="Cached.Exclusive.html" class="type-name-link" title="annotation interface in com.oracle.truffle.api.dsl">Cached.Exclusive</a></code></div>
<div class="col-last even-row-color">
<div class="block">Disallows any sharing with other cached parameters.</div>
</div>
<div class="col-first odd-row-color"><code>static @interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="Cached.Shared.html" class="type-name-link" title="annotation interface in com.oracle.truffle.api.dsl">Cached.Shared</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Allows sharing between multiple Cached parameters between multiple specializations or
exported library messages.</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#adopt()" class="member-name-link">adopt</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies whether the cached parameter values of type <a href="../nodes/NodeInterface.html" title="interface in com.oracle.truffle.api.nodes"><code>NodeInterface</code></a> should be adopted
as its child by the current node.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#allowUncached()" class="member-name-link">allowUncached</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Allows the <a href="#value()"><code>value()</code></a> to be used for <a href="#uncached()"><code>uncached()</code></a>.</div>
</div>
<div class="col-first even-row-color"><code>int</code></div>
<div class="col-second even-row-color"><code><a href="#dimensions()" class="member-name-link">dimensions</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies the number of array dimensions to be marked as <a href="../CompilerDirectives.CompilationFinal.html" title="annotation interface in com.oracle.truffle.api"><code>compilation
final</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#inline()" class="member-name-link">inline</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Enables inlining of the cached parameter if supported.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#inlineMethod()" class="member-name-link">inlineMethod</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies an alternative method name for node object inlining.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#neverDefault()" class="member-name-link">neverDefault</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Returns <code>true</code> if the cache initializer never returns the default value of its
parameter type at runtime.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#parameters()" class="member-name-link">parameters</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specifies the bindings used for the $parameters variable in cached or uncached initializers.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#uncached()" class="member-name-link">uncached</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Defines the initializer that is used for <a href="GenerateUncached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>uncached</code></a> nodes or uncached
versions of exported library messages.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#value()" class="member-name-link">value</a></code></div>
<div class="col-last even-row-color">
<div class="block">Defines the initializer expression of the cached parameter value.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#weak()" class="member-name-link">weak</a></code></div>
<div class="col-last odd-row-color">
<div class="block">If set to <code>true</code> then weak references will be used to refer to this cached value
in the generated node.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="value()">
<h3>value</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">value</span></div>
<div class="block">Defines the initializer expression of the cached parameter value.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.8 or earlier</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Cached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>Cached</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>"create($parameters)"</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="uncached()">
<h3>uncached</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">uncached</span></div>
<div class="block">Defines the initializer that is used for <a href="GenerateUncached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>uncached</code></a> nodes or uncached
versions of exported library messages.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="GenerateUncached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>GenerateUncached</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>"getUncached($parameters)"</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="dimensions()">
<h3>dimensions</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">dimensions</span></div>
<div class="block">Specifies the number of array dimensions to be marked as <a href="../CompilerDirectives.CompilationFinal.html" title="annotation interface in com.oracle.truffle.api"><code>compilation
final</code></a>. This value must be specified for all array-typed cached values except <a href="../nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>node</code></a> arrays and must be left unspecified in other cases where it has no meaning.

The allowed range is from 0 to the number of declared array dimensions (inclusive).
Specifically, a <code>dimensions</code> value of 0 marks only the reference to the (outermost)
array as final but not its elements, a value of 1 marks the outermost array and all its
elements as final but not the elements of any nested arrays.

If not specified and the cached value type is an array type then this will cause a warning
and in later releases an error.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.26</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../CompilerDirectives.CompilationFinal.html#dimensions()"><code>CompilerDirectives.CompilationFinal.dimensions()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>-1</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allowUncached()">
<h3>allowUncached</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">allowUncached</span></div>
<div class="block">Allows the <a href="#value()"><code>value()</code></a> to be used for <a href="#uncached()"><code>uncached()</code></a>. This is useful if the
expression is the same for <a href="#value()"><code>value()</code></a> and <a href="#uncached()"><code>uncached()</code></a>. By setting
<a href="#allowUncached()"><code>allowUncached()</code></a> to <code>true</code> it is not necessary to repeat the
<a href="#value()"><code>value()</code></a> expression in the <a href="#uncached()"><code>uncached()</code></a> expression. This flag cannot be set in
combination with <a href="#uncached()"><code>uncached()</code></a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="inline()">
<h3>inline</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">inline</span></div>
<div class="block">Enables inlining of the cached parameter if supported. The type of a cached parameter is
considered inlinable if it declares a static method called <code>inline</code> with a single
parameter of type <a href="InlineSupport.InlineTarget.html" title="class in com.oracle.truffle.api.dsl"><code>InlineSupport.InlineTarget</code></a>. For specializing DSL nodes the <a href="GenerateInline.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>GenerateInline</code></a>
is sufficient to be enabled for the cached target type, the static inline method will be
resolved automatically from the generated code of the target type.
<p>
Inlining is enabled by default if:
<ul>
<li><a href="GenerateInline.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>GenerateInline</code></a> is set to <code>true</code> for the declaring specializing node
type.
<li>The <a href="GenerateCached.html#alwaysInlineCached()"><code>GenerateCached.alwaysInlineCached()</code></a> property is set to <code>true</code> for
the declaring specializing node type.
<li>If a target parameter type is a specializing node and has <a href="GenerateInline.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>GenerateInline</code></a> enabled
but <a href="GenerateCached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>GenerateCached</code></a> disabled.
</ul>
Else, inlining is disabled by default. If a node is inlinable but is not inlined by default,
the DSL will emit a warning to indicate this possibility.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>23.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="InlineSupport.html" title="class in com.oracle.truffle.api.dsl"><code>InlineSupport</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="inlineMethod()">
<h3>inlineMethod</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">inlineMethod</span></div>
<div class="block">Specifies an alternative method name for node object inlining. Instead of looking up the
inline method from the receiver type use an accessible enclosing method of the given name
instead. The method must have a single parameter <a href="InlineSupport.InlineTarget.html" title="class in com.oracle.truffle.api.dsl"><code>InlineSupport.InlineTarget</code></a> and return a type
compatible to the cached type. This can be useful if you want to route calls to the inline
method through an abstraction that does not allow direct type access to the node classes. It
is expected that this property is only needed rarely.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>23.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>""</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="parameters()">
<h3>parameters</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">parameters</span></div>
<div class="block">Specifies the bindings used for the $parameters variable in cached or uncached initializers.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>{}</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="weak()">
<h3>weak</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">weak</span></div>
<div class="block">If set to <code>true</code> then weak references will be used to refer to this cached value
in the generated node. The default value is <code>false</code>. The weak cached parameter is
guaranteed to not become <code>null</code> in guards or specialization method invocations. If
a weak cached parameter gets collected by the GC, then any compiled code remain unaffected
and the specialization instance will not be removed. Specializations with collected cached
references continue to count to the specialization limit. This is necessary to provide an
upper bound for the number of invalidations that may happen for this specialization.
<p>
A weak cached parameter implicitly adds a <code>weakRef.get() != null</code> guard that is
invoked before the cached value is referenced for the first time. This means that
specializations which previously did not result in fall-through behavior may now
fall-through. This is important if used in combination with <a href="Fallback.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>Fallback</code></a>. Weak cached
parameters that are used as part of <a href="GenerateUncached.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>uncached</code></a> nodes, execute the
cached initializer for each execution and therefore implicitly do not use a weak reference.
<p>
Example usage:

<pre>
&#64;GenerateUncached
abstract class WeakInlineCacheNode extends Node {

    abstract Object execute(Object arg0);

    &#64;Specialization(guards = "cachedArg.equals(arg)", limit = "3")
    Object s0(String arg,
                    &#64;Cached(value = "arg", weak = true) String cachedArg) {
        assertNotNull(cachedStorage);
        return arg;
    }
}
</pre></div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../utilities/TruffleWeakReference.html" title="class in com.oracle.truffle.api.utilities"><code>TruffleWeakReference</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="adopt()">
<h3>adopt</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">adopt</span></div>
<div class="block">Specifies whether the cached parameter values of type <a href="../nodes/NodeInterface.html" title="interface in com.oracle.truffle.api.nodes"><code>NodeInterface</code></a> should be adopted
as its child by the current node. The default value is <code>true</code>, therefore all
cached values of type <a href="../nodes/NodeInterface.html" title="interface in com.oracle.truffle.api.nodes"><code>NodeInterface</code></a> and arrays of the same type are adopted. If the
value is set to <code>false</code>, then no adoption is performed. It is useful to set adopt
to <code>false</code> when nodes need to be referenced more than once in the AST.
<p>
If the type of the field is an <a href="../nodes/NodeInterface.html" title="interface in com.oracle.truffle.api.nodes"><code>NodeInterface</code></a> array and adopt is set to
<code>false</code>, then the compilation final <a href="#dimensions()"><code>dimensions</code></a>
attribute needs to be specified explicitly.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.2</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>true</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="neverDefault()">
<h3>neverDefault</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">neverDefault</span></div>
<div class="block">Returns <code>true</code> if the cache initializer never returns the default value of its
parameter type at runtime. For reference types the default value is <code>null</code>, for
primitive values 0. By default, default values in cache initializers are allowed. The DSL may
use the default state of a cache for optimizations in the generated code layout. The DSL
informs with a warning when the use of this property has an effect and is recommended to be
set. Alternatively to specifying <a href="#neverDefault()"><code>neverDefault()</code></a>, the <a href="NeverDefault.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>NeverDefault</code></a> annotation
may be used on the method or field bound by the cache initializer.
<p>
If a cache initializer returns the illegal default value when this property is set to
<code>true</code> then the node will throw an <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> at runtime.
<p></div>
<dl class="notes">
<dt>Since:</dt>
<dd>23.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="NeverDefault.html" title="annotation interface in com.oracle.truffle.api.dsl"><code>NeverDefault</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><center>Copyright &copy; 2012, 2025, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</footer>
</main>
</div>
</body>
</html>

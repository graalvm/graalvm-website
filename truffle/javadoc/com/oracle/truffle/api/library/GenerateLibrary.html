<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>GenerateLibrary (GraalVM Truffle Java API Reference)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GenerateLibrary (GraalVM Truffle Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>20.2.0-dev</b><br>8aac8f4686f75b1a02f220e10b81130edc2cd9f2</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/oracle/truffle/api/library/ExportMessage.Repeat.html" title="annotation in com.oracle.truffle.api.library"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.Abstract.html" title="annotation in com.oracle.truffle.api.library"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/api/library/GenerateLibrary.html" target="_top">Frames</a></li>
<li><a href="GenerateLibrary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.oracle.truffle.api.library</div>
<h2 title="Annotation Type GenerateLibrary" class="title">Annotation Type GenerateLibrary</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true" title="class or interface in java.lang.annotation">@Retention</a>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Retention.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/RetentionPolicy.html?is-external=true#RUNTIME" title="class or interface in java.lang.annotation">RUNTIME</a>)
 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true" title="class or interface in java.lang.annotation">@Target</a>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/Target.html?is-external=true#value--" title="class or interface in java.lang.annotation">value</a>=<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html?is-external=true#TYPE" title="class or interface in java.lang.annotation">TYPE</a>)
public @interface <span class="memberNameLabel">GenerateLibrary</span></pre>
<div class="block">Libraries are specified with <code>public</code> and <code>abstract</code> Java classes that
 extend the <a href="../../../../../com/oracle/truffle/api/library/Library.html" title="class in com.oracle.truffle.api.library">Library</a> class and are annotated by <code>@GenerateLibrary</code>. A
 library consists of a set of messages, that are specified using public Java methods. The methods
 may be abstract or use default implementations. The first parameter of every library message is
 the receiver parameter, which must be a non-primitive type and consistent across all messages of
 a library. There are no restrictions on the return type or argument types of a message. Every
 method that specifies a message must have a name that is unique per library. Final or private
 methods will always be ignored by the generator. Parameter type overloading is currently not
 supported for messages, therefore every public method must have a unique name per library.
 Generic type arguments local to messages are generally supported, but generic type arguments on
 the library type are not yet supported.
 <p>

 <h3>Basic Usage</h3>

 The following example specifies a basic library for arrays:

 <pre>
 &#64;GenerateLibrary
 public abstract class ArrayLibrary extends Library {

     public boolean isArray(Object receiver) {
         return false;
     }

     public abstract int read(Object receiver, int index);
 }
 </pre>

 Messages that are not implemented and have no default implementation throw an
 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AbstractMethodError.html?is-external=true" title="class or interface in java.lang"><code>AbstractMethodError</code></a>. The <a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.Abstract.html" title="annotation in com.oracle.truffle.api.library"><code>GenerateLibrary.Abstract</code></a> annotation can be used, to provide a default
 implementation for receiver types but at the same time make the message abstract.
 <p>
 A library class may also specify <a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.DefaultExport.html" title="annotation in com.oracle.truffle.api.library"><code>default exports</code></a> that can be used to
 dispatch to receiver types that don't export the library. Since the receiver type for default
 exports can be specified explicitly, it can be used to provide a default implementation for
 receiver types of third parties or the JDK. For example the Truffle interop library has default
 exports for most <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Number.html?is-external=true" title="class or interface in java.lang"><code>Number</code></a> types, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> and <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang"><code>Boolean</code></a> type.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.DefaultExport.html" title="annotation in com.oracle.truffle.api.library"><code>to specify default exports.</code></a>, 
<a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.Abstract.html" title="annotation in com.oracle.truffle.api.library"><code>to make messages abstract if they have a default implemetnation</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.optional.element.summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;? extends <a href="../../../../../com/oracle/truffle/api/library/Library.html" title="class in com.oracle.truffle.api.library">Library</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.html#assertions--">assertions</a></span></code>
<div class="block">Specifies an assertion wrapper class that can be used to verify pre and post conditions of a
 library.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.html#defaultExportLookupEnabled--">defaultExportLookupEnabled</a></span></code>
<div class="block">Allows the library to lookup additional default exports using a service provider interface.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.html#dynamicDispatchEnabled--">dynamicDispatchEnabled</a></span></code>
<div class="block">Allows the use of <a href="../../../../../com/oracle/truffle/api/library/DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><code>DynamicDispatchLibrary</code></a> with this library.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.html#receiverType--">receiverType</a></span></code>
<div class="block">Restricts the receiver type for exports that implement this library.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation.type.element.detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="assertions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertions</h4>
<pre>public abstract&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;? extends <a href="../../../../../com/oracle/truffle/api/library/Library.html" title="class in com.oracle.truffle.api.library">Library</a>&gt;&nbsp;assertions</pre>
<div class="block">Specifies an assertion wrapper class that can be used to verify pre and post conditions of a
 library. Assertion wrappers are only inserted when assertions (-ea) are enabled. It is
 required that assertion wrappers don't introduce additional side-effects and call the
 delegate methods exactly once. If assertions are disabled no library wrapper will be inserted
 therefore not performing any checks when library messages are invoked.
 <p>

 <b>Example Usage:</b>

 <pre>
 &#64;GenerateLibrary(assertions = ArrayAssertions.class)
 public abstract class ArrayLibrary extends Library {

     public boolean isArray(Object receiver) {
         return false;
     }

     public int read(Object receiver, int index) {
         throw new UnsupportedOperationException();
     }

     static class ArrayAssertions extends ArrayLibrary {

         &#64;Child private ArrayLibrary delegate;

         ArrayAssertions(ArrayLibrary delegate) {
             this.delegate = delegate;
         }

         &#64;Override
         public boolean isArray(Object receiver) {
             return delegate.isArray(receiver);
         }

         &#64;Override
         public int read(Object receiver, int index) {
             int result = super.read(receiver, index);
             assert delegate.isArray(receiver) : "if a read was successful the receiver must be an array";
             return result;
         }

         &#64;Override
         public boolean accepts(Object receiver) {
             return delegate.accepts(receiver);
         }
     }
 }

 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>com.oracle.truffle.api.library.Library.class</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="receiverType--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiverType</h4>
<pre>public abstract&nbsp;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&lt;?&gt;&nbsp;receiverType</pre>
<div class="block">Restricts the receiver type for exports that implement this library. This allows to have
 different receiver type in message methods, but require export receiver types to implement or
 extend a declared class. Default exports are not affected by this restriction and can
 therefore export the library for any receiver type the message methods first parameter is
 compatible with.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>java.lang.Object.class</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="defaultExportLookupEnabled--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defaultExportLookupEnabled</h4>
<pre>public abstract&nbsp;boolean&nbsp;defaultExportLookupEnabled</pre>
<div class="block">Allows the library to lookup additional default exports using a service provider interface.
 <a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.html" title="annotation in com.oracle.truffle.api.library"><code>Exports</code></a> for this library with explicit receiver type will automatically
 be interpreted as additional default exports. External default exports may specify with the
 <a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.html#priority--"><code>priority</code></a> whether they are looked up before or after existing
 default exports specified for the library. Default exports always have a lower priority than
 explicit exports on the receiver type or exports that use dynamic dispatch.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>20.1</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../com/oracle/truffle/api/library/ExportLibrary.html#priority--"><code>ExportLibrary.priority()</code></a></dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>false</dd>
</dl>
</li>
</ul>
</li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="dynamicDispatchEnabled--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>dynamicDispatchEnabled</h4>
<pre>public abstract&nbsp;boolean&nbsp;dynamicDispatchEnabled</pre>
<div class="block">Allows the use of <a href="../../../../../com/oracle/truffle/api/library/DynamicDispatchLibrary.html" title="class in com.oracle.truffle.api.library"><code>DynamicDispatchLibrary</code></a> with this library. By default dynamic
 dispatch is enabled. If this flag is set to <code>false</code> then the
 <a href="../../../../../com/oracle/truffle/api/library/DynamicDispatchLibrary.html#dispatch-java.lang.Object-"><code>dispatch</code></a> method will not be used for this
 library. Only default exports and exports declared with the receiver type will be used
 instead for this library.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>20.1</dd>
</dl>
<dl>
<dt>Default:</dt>
<dd>true</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>20.2.0-dev</b><br>8aac8f4686f75b1a02f220e10b81130edc2cd9f2</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/oracle/truffle/api/library/ExportMessage.Repeat.html" title="annotation in com.oracle.truffle.api.library"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/oracle/truffle/api/library/GenerateLibrary.Abstract.html" title="annotation in com.oracle.truffle.api.library"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/api/library/GenerateLibrary.html" target="_top">Frames</a></li>
<li><a href="GenerateLibrary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.optional.element.summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#annotation.type.element.detail">Element</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><center>Copyright &copy; 2012, 2020, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</body>
</html>

<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>BytecodeOSRNode (GraalVM Truffle Java API Reference)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.oracle.truffle.api.nodes, interface: BytecodeOSRNode">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../search.html">Search</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language"><b>GraalVM Truffle Java API Reference<br>25.1.0-dev</b><br>0143a21f1f1914396f9554429d7ed7e84b5e31f7</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">com.oracle.truffle.api.nodes</a></li>
<li><a href="BytecodeOSRNode.html" class="current-selection">BytecodeOSRNode</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)" tabindex="0">executeOSR(VirtualFrame, int, Object)</a></li>
<li><a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)" tabindex="0">executeOSR(VirtualFrame, long, Object)</a></li>
<li><a href="#getOSRMetadata()" tabindex="0">getOSRMetadata()</a></li>
<li><a href="#setOSRMetadata(java.lang.Object)" tabindex="0">setOSRMetadata(Object)</a></li>
<li><a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)" tabindex="0">copyIntoOSRFrame(VirtualFrame, VirtualFrame, int, Object)</a></li>
<li><a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)" tabindex="0">copyIntoOSRFrame(VirtualFrame, VirtualFrame, long, Object)</a></li>
<li><a href="#transferOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)" tabindex="0">transferOSRFrame(VirtualFrame, VirtualFrame, long, Object)</a></li>
<li><a href="#restoreParentFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame)" tabindex="0">restoreParentFrame(VirtualFrame, VirtualFrame)</a></li>
<li><a href="#prepareOSR(int)" tabindex="0">prepareOSR(int)</a></li>
<li><a href="#prepareOSR(long)" tabindex="0">prepareOSR(long)</a></li>
<li><a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode)" tabindex="0">pollOSRBackEdge(BytecodeOSRNode)</a></li>
<li><a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode,int)" tabindex="0">pollOSRBackEdge(BytecodeOSRNode, int)</a></li>
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)" tabindex="0">tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</a></li>
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)" tabindex="0">tryOSR(BytecodeOSRNode, long, Object, Runnable, VirtualFrame)</a></li>
<li><a href="#storeParentFrameInArguments(com.oracle.truffle.api.frame.VirtualFrame)" tabindex="0">storeParentFrameInArguments(VirtualFrame)</a></li>
<li><a href="#restoreParentFrameFromArguments(java.lang.Object%5B%5D)" tabindex="0">restoreParentFrameFromArguments(Object[])</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Interface BytecodeOSRNode" class="title">Interface BytecodeOSRNode</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="NodeInterface.html" title="interface in com.oracle.truffle.api.nodes">NodeInterface</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">BytecodeOSRNode</span><span class="extends-implements">
extends <a href="NodeInterface.html" title="interface in com.oracle.truffle.api.nodes">NodeInterface</a></span></div>
<div class="block">Interface for Truffle bytecode nodes which can be on-stack replaced (OSR).
<p>
There are a few restrictions Bytecode OSR nodes must satisfy in order for OSR to work correctly:
<ol>
<li>The node must extend <a href="Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> or a subclass of <a href="Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a>.</li>
<li>The node must provide storage for the OSR metadata maintained by the runtime using an
instance field. The field must be
<a href="../CompilerDirectives.CompilationFinal.html" title="annotation interface in com.oracle.truffle.api"><code>@CompilationFinal</code></a>, and the
<a href="#getOSRMetadata()"><code>getOSRMetadata()</code></a> and <a href="#setOSRMetadata(java.lang.Object)"><code>setOSRMetadata(Object)</code></a> methods must
proxy accesses to it.</li>
<li>The node should call <a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode)"><code>pollOSRBackEdge(BytecodeOSRNode)</code></a> and
<a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a> as described by their documentation.</li>
<li>The node should implement either <a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>executeOSR(VirtualFrame, int, Object)</code></a> or
<a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>executeOSR(VirtualFrame, long, Object)</code></a> (see note below).
</ol>

<p>
For performance reasons, the parent frame may be copied into a new frame used for OSR. If this
happens, <a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, int, Object)</code></a> is
used to perform the copy, and <a href="#restoreParentFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame)"><code>restoreParentFrame(VirtualFrame, VirtualFrame)</code></a> is used to copy the OSR
frame contents back into the parent frame after OSR. A node may override these methods; by
default, they perform slot-wise copies.

<p>
A node may also wish to override <a href="#prepareOSR(int)"><code>prepareOSR(int)</code></a> to perform initialization.
This method will be called before compilation, and can be useful to avoid deoptimizing inside
compiled code.

<p>
Starting in 24.2, Bytecode OSR supports <code>long</code> values for <code>target</code> dispatch
locations. An interpreter can use <code>long</code> targets by invoking
<a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, long, Object, Runnable, VirtualFrame)</code></a> (instead of
<a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a>). Refer to the
documentation for the <code>long</code> overload for more details.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>21.3</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab5" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab5', 3)" class="table-tab">Default Methods</button><button id="method-summary-table-tab6" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab6', 3)" class="table-tab">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)" class="member-name-link">copyIntoOSRFrame</a><wbr>(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame,
 int&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;targetMetadata)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Copies the contents of the <code>parentFrame</code> into the <code>osrFrame</code> used to execute OSR.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)" class="member-name-link">copyIntoOSRFrame</a><wbr>(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;targetMetadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Overload of <a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, int, Object)</code></a> with a
<code>long</code> target.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)" class="member-name-link">executeOSR</a><wbr>(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 int&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Entrypoint to invoke this node through OSR.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)" class="member-name-link">executeOSR</a><wbr>(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Overload of <a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>executeOSR(VirtualFrame, int, Object)</code></a> with a <code>long</code> target.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getOSRMetadata()" class="member-name-link">getOSRMetadata</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Gets the OSR metadata for this instance.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab6"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab6"><code><a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode)" class="member-name-link">pollOSRBackEdge</a><wbr>(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">use <a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode,int)"><code>pollOSRBackEdge(BytecodeOSRNode, int)</code></a> instead.</div>
</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode,int)" class="member-name-link">pollOSRBackEdge</a><wbr>(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode,
 int&nbsp;loopCountIncrement)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Reports a back edge, returning whether to try performing OSR.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#prepareOSR(int)" class="member-name-link">prepareOSR</a><wbr>(int&nbsp;target)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Initialization hook which will be invoked before OSR compilation.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#prepareOSR(long)" class="member-name-link">prepareOSR</a><wbr>(long&nbsp;target)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Overload of <a href="#prepareOSR(int)"><code>prepareOSR(int)</code></a> with a <code>long</code> target.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#restoreParentFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame)" class="member-name-link">restoreParentFrame</a><wbr>(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Restores the contents of the <code>osrFrame</code> back into the <code>parentFrame</code> after OSR.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="../frame/Frame.html" title="interface in com.oracle.truffle.api.frame">Frame</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#restoreParentFrameFromArguments(java.lang.Object%5B%5D)" class="member-name-link">restoreParentFrameFromArguments</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>[]&nbsp;arguments)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Return the parent frame that was stored in an arguments array by a previous call to
<a href="#storeParentFrameInArguments(com.oracle.truffle.api.frame.VirtualFrame)"><code>storeParentFrameInArguments(VirtualFrame)</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setOSRMetadata(java.lang.Object)" class="member-name-link">setOSRMetadata</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;osrMetadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Sets the OSR metadata for this instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#storeParentFrameInArguments(com.oracle.truffle.api.frame.VirtualFrame)" class="member-name-link">storeParentFrameInArguments</a><wbr>(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Produce the arguments that will be used to perform the call to the new OSR root.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code>default void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5"><code><a href="#transferOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)" class="member-name-link">transferOSRFrame</a><wbr>(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;targetMetadata)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab5">
<div class="block">Helper method that can be called by implementations of
<a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, long, Object)</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)" class="member-name-link">tryOSR</a><wbr>(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode,
 int&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>&nbsp;beforeTransfer,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Tries to perform OSR.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)" class="member-name-link">tryOSR</a><wbr>(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>&nbsp;beforeTransfer,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Overload of <a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a> with a
<code>long</code> target.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)">
<h3>executeOSR</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">executeOSR</span><wbr><span class="parameters">(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 int&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState)</span></div>
<div class="block">Entrypoint to invoke this node through OSR. Implementers must override this method (or its
<a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>long overload</code></a>). The implementation should
execute bytecode starting from the given <code>target</code> location (e.g., bytecode index).

<p>
The <code>osrFrame</code> may be the parent frame, but for performance reasons could also be a new
frame. In case a new frame is created, the frame's <a href="../frame/Frame.html#getArguments()"><code>arguments</code></a>
will be provided by <a href="#storeParentFrameInArguments(com.oracle.truffle.api.frame.VirtualFrame)"><code>storeParentFrameInArguments(VirtualFrame)</code></a>.

<p>
Typically, a bytecode node's <a href="ExecutableNode.html#execute(com.oracle.truffle.api.frame.VirtualFrame)"><code>execute(VirtualFrame)</code></a> method already contains a dispatch loop. This loop can be extracted
into a separate method which can also be used by this method. For example:

<pre>
Object execute(VirtualFrame frame) {
  return dispatchFromBCI(frame, 0);
}
Object executeOSR(VirtualFrame osrFrame, int target, Object interpreterState) {
  return dispatchFromBCI(osrFrame, target);
}
Object dispatchFromBCI(VirtualFrame frame, int bci) {
    // main dispatch loop
    while(true) {
        switch(instructions[bci]) {
            ...
        }
    }
}
</pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>osrFrame</code> - the frame to use for OSR.</dd>
<dd><code>target</code> - the target location to execute from (e.g., bytecode index).</dd>
<dd><code>interpreterState</code> - other interpreter state used to resume execution. See
           <a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a> for more
           details.</dd>
<dt>Returns:</dt>
<dd>the result of execution.</dd>
<dt>Since:</dt>
<dd>21.3</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>executeOSR(VirtualFrame, long, Object)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)">
<h3>executeOSR</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">executeOSR</span><wbr><span class="parameters">(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState)</span></div>
<div class="block">Overload of <a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>executeOSR(VirtualFrame, int, Object)</code></a> with a <code>long</code> target. An
interpreter that uses <code>long</code> targets must override this method.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, long, Object, Runnable, VirtualFrame)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getOSRMetadata()">
<h3>getOSRMetadata</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">getOSRMetadata</span>()</div>
<div class="block">Gets the OSR metadata for this instance.
<p>
The metadata must be stored on a
<a href="../CompilerDirectives.CompilationFinal.html" title="annotation interface in com.oracle.truffle.api"><code>@CompilationFinal</code></a> instance
field. Refer to the documentation for this interface for a more complete description.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the OSR metadata.</dd>
<dt>Since:</dt>
<dd>21.3</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setOSRMetadata(java.lang.Object)">
<h3>setOSRMetadata</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setOSRMetadata</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;osrMetadata)</span></div>
<div class="block">Sets the OSR metadata for this instance.
<p>
The metadata must be stored on a
<a href="../CompilerDirectives.CompilationFinal.html" title="annotation interface in com.oracle.truffle.api"><code>@CompilationFinal</code></a> instance
field. Refer to the documentation for this interface for a more complete description.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>osrMetadata</code> - the OSR metadata.</dd>
<dt>Since:</dt>
<dd>21.3</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)">
<h3>copyIntoOSRFrame</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">copyIntoOSRFrame</span><wbr><span class="parameters">(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame,
 int&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;targetMetadata)</span></div>
<div class="block">Copies the contents of the <code>parentFrame</code> into the <code>osrFrame</code> used to execute OSR.
By default, performs a slot-wise copy of the frame.

<p>
NOTE: This method is only used if the Truffle runtime decides to copy the frame. OSR may also
reuse the parent frame directly.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>osrFrame</code> - the frame to use for OSR.</dd>
<dd><code>parentFrame</code> - the frame used before performing OSR.</dd>
<dd><code>target</code> - the target location OSR will execute from (e.g., bytecode index).</dd>
<dd><code>targetMetadata</code> - Additional metadata associated with this <code>target</code> for the default
           frame transfer behavior.</dd>
<dt>Since:</dt>
<dd>22.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, long, Object)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)">
<h3>copyIntoOSRFrame</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">copyIntoOSRFrame</span><wbr><span class="parameters">(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;targetMetadata)</span></div>
<div class="block">Overload of <a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, int, Object)</code></a> with a
<code>long</code> target. An interpreter that uses <code>long</code> targets must override this method.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, long, Object, Runnable, VirtualFrame)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="transferOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)">
<h3>transferOSRFrame</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">transferOSRFrame</span><wbr><span class="parameters">(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;targetMetadata)</span></div>
<div class="block">Helper method that can be called by implementations of
<a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, long, Object)</code></a>. Should not be
overridden.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, long, Object, Runnable, VirtualFrame)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="restoreParentFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame)">
<h3>restoreParentFrame</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">restoreParentFrame</span><wbr><span class="parameters">(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;osrFrame,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</span></div>
<div class="block">Restores the contents of the <code>osrFrame</code> back into the <code>parentFrame</code> after OSR. By
default, performs a slot-wise copy of the frame.
<p>
Though a bytecode interpreter might not explicitly use <code>parentFrame</code> after OSR, it is
necessary to restore the state into <code>parentFrame</code> if it may be accessed through
instrumentation.

<p>
NOTE: This method is only used if the Truffle runtime decided to copy the frame using
<a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, int, Object)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>osrFrame</code> - the frame which was used for OSR.</dd>
<dd><code>parentFrame</code> - the frame which will be used by the parent after returning from OSR.</dd>
<dt>Since:</dt>
<dd>21.3</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="prepareOSR(int)">
<h3>prepareOSR</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">prepareOSR</span><wbr><span class="parameters">(int&nbsp;target)</span></div>
<div class="block">Initialization hook which will be invoked before OSR compilation. This hook can be used to
perform any necessary initialization before compilation happens.

<p>
For example, consider a field which must be initialized in the interpreter:

<pre>
@CompilationFinal Object field;
Object getField() {
    if (field == null) {
        CompilerDirectives.transferToInterpreterAndInvalidate();
        field = new Object();
    }
    return field;
}
</pre>
<p>
If the field is accessed from compiled OSR code, it may trigger a deoptimization in order to
initialize the field. Using <a href="#prepareOSR(int)"><code>prepareOSR(int)</code></a> to initialize the field can
prevent this.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>target</code> - the target location OSR will execute from (e.g., bytecode index).</dd>
<dt>Since:</dt>
<dd>21.3</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#prepareOSR(long)"><code>prepareOSR(long)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="prepareOSR(long)">
<h3>prepareOSR</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">prepareOSR</span><wbr><span class="parameters">(long&nbsp;target)</span></div>
<div class="block">Overload of <a href="#prepareOSR(int)"><code>prepareOSR(int)</code></a> with a <code>long</code> target. An interpreter that uses
<code>long</code> targets must override this method.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, long, Object, Runnable, VirtualFrame)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode)">
<h3>pollOSRBackEdge</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Deprecated.html#since()" title="class or interface in java.lang" class="external-link">since</a>="25.0")
</span><span class="modifiers">static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">pollOSRBackEdge</span><wbr><span class="parameters">(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">use <a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode,int)"><code>pollOSRBackEdge(BytecodeOSRNode, int)</code></a> instead. It is recommended to
            batch up polls in the interpreter implementation. Important note:
            <a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode)"><code>pollOSRBackEdge(BytecodeOSRNode)</code></a> did implicitly
            <a href="../TruffleSafepoint.html#poll(com.oracle.truffle.api.nodes.Node)"><code>poll</code></a> Truffle safepoints. The new method is no
            longer doing that. Make sure your bytecode interpreter contains a call to
            <a href="../TruffleSafepoint.html#poll(com.oracle.truffle.api.nodes.Node)"><code>TruffleSafepoint.poll(Node)</code></a> on loop back-edges when migrating.</div>
</div>
<div class="block">Reports a back edge, returning whether to try performing OSR.

<p>
An interpreter must ensure this method returns <code>true</code> immediately before calling
<a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a>. For example:

<pre>
if (BytecodeOSRNode.pollOSRBackEdge(this)) {
  Object osrResult = BytecodeOSRNode.tryOSR(...);
  ...
}
</pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>osrNode</code> - the node to report a back-edge for.</dd>
<dt>Returns:</dt>
<dd>whether to try OSR.</dd>
<dt>Since:</dt>
<dd>21.3</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode,int)">
<h3>pollOSRBackEdge</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">pollOSRBackEdge</span><wbr><span class="parameters">(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode,
 int&nbsp;loopCountIncrement)</span></div>
<div class="block">Reports a back edge, returning whether to try performing OSR.

<p>
An interpreter must ensure this method returns <code>true</code> immediately before calling
<a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a>. For example:

<pre>
if (BytecodeOSRNode.pollOSRBackEdge(this, 1)) {
  Object osrResult = BytecodeOSRNode.tryOSR(...);
  ...
}
</pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>osrNode</code> - the node to report a back-edge for.</dd>
<dd><code>loopCountIncrement</code> - the number iterations incremented. Value must be &gt; 0.</dd>
<dt>Returns:</dt>
<dd>whether to try OSR.</dd>
<dt>Since:</dt>
<dd>25.0</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)">
<h3>tryOSR</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">tryOSR</span><wbr><span class="parameters">(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode,
 int&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>&nbsp;beforeTransfer,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</span></div>
<div class="block">Tries to perform OSR. This method must only be called immediately after a <code>true</code> result
from <a href="#pollOSRBackEdge(com.oracle.truffle.api.nodes.BytecodeOSRNode)"><code>pollOSRBackEdge(BytecodeOSRNode)</code></a>.

<p>
Depending on the Truffle runtime, this method can trigger OSR compilation and then (typically
in a subsequent call) transfer to OSR code. If OSR occurs, this method returns the result of
OSR execution. The caller of this method can forward the result back to its caller rather
than continuing execution from the <code>target</code>. For example:

<pre>
if (BytecodeOSRNode.pollOSRBackEdge(this)) {
  Object osrResult = BytecodeOSRNode.tryOSR(...);
  if (osrResult != null) return osrResult;
}
</pre>
<p>
The optional <code>interpreterState</code> parameter will be forwarded to
<a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>executeOSR(VirtualFrame, int, Object)</code></a> when OSR is performed. It should consist of additional
interpreter state (e.g., data pointers) needed to resume execution from <code>target</code>. The
state should be fixed (i.e., final) for the given <code>target</code>. For example:

<pre>
// class definition
class InterpreterState {
    final int dataPtr;
    InterpreterState(int dataPtr) { ... }
}

// call site
Object osrResult = BytecodeOSRNode.tryOSR(this, target, new InterpreterState(dataPtr), ...);

// executeOSR
Object executeOSR(VirtualFrame osrFrame, int target, Object interpreterState) {
    InterpreterState state = (InterpreterState) interpreterState;
    return dispatchFromBCI(osrFrame, target, interpreterState.dataPtr);
}
</pre>
<p>
The optional <code>beforeTransfer</code> callback will be called before transferring control to
the OSR target. Since this method may or may not perform a transfer, it is a way to ensure
certain actions (e.g., instrumentation events) occur before transferring to OSR code. For
example:

<pre>
// call site
Object osrResult = BytecodeNode.tryOSR(this, target, ..., () -&gt; {
   instrument.notify(current, target);
});
</pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>osrNode</code> - the node to try OSR for.</dd>
<dd><code>target</code> - the target location OSR will execute from (e.g., bytecode index).</dd>
<dd><code>interpreterState</code> - other interpreter state used to resume execution.</dd>
<dd><code>beforeTransfer</code> - a callback invoked before OSR. Can be <code>null</code>.</dd>
<dd><code>parentFrame</code> - frame at the current point of execution.</dd>
<dt>Returns:</dt>
<dd>the result if OSR was performed, or <code>null</code> otherwise.</dd>
<dt>Since:</dt>
<dd>21.3</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, long, Object, Runnable, VirtualFrame)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,long,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)">
<h3>tryOSR</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">tryOSR</span><wbr><span class="parameters">(<a href="BytecodeOSRNode.html" title="interface in com.oracle.truffle.api.nodes">BytecodeOSRNode</a>&nbsp;osrNode,
 long&nbsp;target,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;interpreterState,
 <a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Runnable.html" title="class or interface in java.lang" class="external-link">Runnable</a>&nbsp;beforeTransfer,
 <a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</span></div>
<div class="block">Overload of <a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a> with a
<code>long</code> target. An interpreter that uses <code>long</code> targets should call this method.
<p>
If an interpreter uses a <code>long</code> representation, it <strong>must</strong> override the
hooks that define <code>long</code> overloads, namely
<a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>executeOSR(VirtualFrame, long, Object)</code></a>,
<a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, long, Object)</code></a>, and
<a href="#prepareOSR(long)"><code>prepareOSR(long)</code></a>. Overriding is necessary because the default <code>long</code> overloads
call their <code>int</code> overloads for backwards compatibility, and these calls will fail for
<code>long</code>-sized targets.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>24.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#tryOSR(com.oracle.truffle.api.nodes.BytecodeOSRNode,int,java.lang.Object,java.lang.Runnable,com.oracle.truffle.api.frame.VirtualFrame)"><code>tryOSR(BytecodeOSRNode, int, Object, Runnable, VirtualFrame)</code></a></li>
<li><a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>executeOSR(VirtualFrame, long, Object)</code></a></li>
<li><a href="#copyIntoOSRFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame,long,java.lang.Object)"><code>copyIntoOSRFrame(VirtualFrame, VirtualFrame, long, Object)</code></a></li>
<li><a href="#prepareOSR(long)"><code>prepareOSR(long)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="storeParentFrameInArguments(com.oracle.truffle.api.frame.VirtualFrame)">
<h3>storeParentFrameInArguments</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>[]</span>&nbsp;<span class="element-name">storeParentFrameInArguments</span><wbr><span class="parameters">(<a href="../frame/VirtualFrame.html" title="interface in com.oracle.truffle.api.frame">VirtualFrame</a>&nbsp;parentFrame)</span></div>
<div class="block">Produce the arguments that will be used to perform the call to the new OSR root. It will
become the arguments array of the frame passed into <a href="#executeOSR(com.oracle.truffle.api.frame.VirtualFrame,int,java.lang.Object)"><code>executeOSR(VirtualFrame, int, Object)</code></a> in case a new frame
is generated for the call for performance reasons. The contents are up to language, Truffle
only requires that a subsequent call to <a href="#restoreParentFrame(com.oracle.truffle.api.frame.VirtualFrame,com.oracle.truffle.api.frame.VirtualFrame)"><code>restoreParentFrame(VirtualFrame, VirtualFrame)</code></a> with the arguments array
will return the same object as was passed into the <code>parentFrame</code> argument. By default,
this method creates a new one-element array, which discards the original frame arguments.
Override this method to be able to preserve a subset of the original frame arguments. It is
permitted to modify arguments array of <code>parentFrame</code> and return it. This is called only
in the interpreter, therefore the frame is not virtual and it is safe to store it into the
arguments array.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>parentFrame</code> - the frame object to be stored in the resulting arguments array</dd>
<dt>Returns:</dt>
<dd>arguments array containing <code>parentFrame</code></dd>
<dt>Since:</dt>
<dd>22.2</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="restoreParentFrameFromArguments(java.lang.Object[])">
<h3>restoreParentFrameFromArguments</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">default</span>&nbsp;<span class="return-type"><a href="../frame/Frame.html" title="interface in com.oracle.truffle.api.frame">Frame</a></span>&nbsp;<span class="element-name">restoreParentFrameFromArguments</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>[]&nbsp;arguments)</span></div>
<div class="block">Return the parent frame that was stored in an arguments array by a previous call to
<a href="#storeParentFrameInArguments(com.oracle.truffle.api.frame.VirtualFrame)"><code>storeParentFrameInArguments(VirtualFrame)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>arguments</code> - frame arguments originally produced by <a href="#storeParentFrameInArguments(com.oracle.truffle.api.frame.VirtualFrame)"><code>storeParentFrameInArguments(VirtualFrame)</code></a>.</dd>
<dt>Returns:</dt>
<dd>stored parent frame</dd>
<dt>Since:</dt>
<dd>22.2</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><center>Copyright &copy; 2012, 2025, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</footer>
</main>
</div>
</body>
</html>

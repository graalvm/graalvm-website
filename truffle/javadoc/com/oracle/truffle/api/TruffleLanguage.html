<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TruffleLanguage (GraalVM Truffle Java API Reference)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TruffleLanguage (GraalVM Truffle Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":6,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>22.3.0-dev</b><br>599e7a860bd1e41ba5d06f8ffd863f4f40f7bca0</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/oracle/truffle/api/TruffleFile.FileTypeDetector.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextLocalFactory.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/oracle/truffle/api/TruffleLanguage.html" target="_top">Frames</a></li>
<li><a href="TruffleLanguage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.oracle.truffle.api</div>
<h2 title="Class TruffleLanguage" class="title">Class TruffleLanguage&lt;C&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.oracle.truffle.api.TruffleLanguage&lt;C&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>C</code> - internal state of the language associated with every thread that is executing program
            <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#parse-com.oracle.truffle.api.TruffleLanguage.ParsingRequest-"><code>parsed</code></a> by the
            language</dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="typeNameLabel">TruffleLanguage&lt;C&gt;</span>
extends <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A Truffle language implementation contains all the services a language should provide to make it
 composable with other languages. Implementation classes must be annotated with
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html" title="annotation in com.oracle.truffle.api"><code>TruffleLanguage.Registration</code></a> in order to be discoverable by the <a href="../../../../org/graalvm/polyglot/package-summary.html">Polyglot
 API</a>.

 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> subclasses must provide a public default constructor.

 <h4>Lifecycle</h4>

 A language implementation becomes available for use by an engine when metadata is added using the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html" title="annotation in com.oracle.truffle.api"><code>TruffleLanguage.Registration</code></a> annotation and the implementation's JAR file placed on the host Java Virtual
 Machine's class path.
 <p>
 A newly created engine locates all available language implementations and creates a
 <a href="../../../../org/graalvm/polyglot/Language.html" title="class in org.graalvm.polyglot">descriptor</a> for each. The descriptor holds the
 language's registered metadata, but its execution environment is not initialized until the
 language is needed for code execution. That execution environment remains initialized for the
 lifetime of the engine and is isolated from the environment in any other engine instance.
 <p>
 Language global state can be shared between multiple context instances by saving them in a custom
 field of the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> subclass. Languages may control sharing between multiple
 contexts using its <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#contextPolicy--"><code>context policy</code></a>. By default the context
 policy is <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#EXCLUSIVE"><code>exclusive</code></a>: each context has its own separate
 TruffleLanguage instance.
 <p>
 If the context policy is more permissive then the implementation needs to manually ensure data
 isolation between the contexts. This means that state associated with a context must not be
 stored in a TruffleLanguage subclass. ASTs and assumptions can be shared across multiple contexts
 if modifying them does not affect language semantics. Languages are strongly discouraged from
 using static mutable state in their languages. Instead <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> instances should
 be used instead to store global state and their sharing should be configured using
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#contextPolicy--"><code>context policy</code></a>.
 <p>
 Whenever an engine is disposed then each initialized language context will be
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>disposed</code></a>.


 <h4>Context Policy and Sharing</h4>

 The number of <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> instances per polyglot <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>context</code></a> is configured by the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#contextPolicy--"><code>context policy</code></a>. By default an
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#EXCLUSIVE"><code>exclusive</code></a> <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> instance is created
 for every <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>polyglot context</code></a> or
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#newContextBuilder--"><code>inner context</code></a>. With policy
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a>, language instances will be reused after a language context was
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>disposed</code></a>. With policy <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#SHARED"><code>shared</code></a>, a language will also be reused if active contexts are not yet disposed. Language
 instances will only be shared or reused if they are
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#areOptionsCompatible-org.graalvm.options.OptionValues-org.graalvm.options.OptionValues-"><code>compatible</code></a>. Language
 implementations are encouraged to support the most permissive context policy possible. Please see
 the individual <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api"><code>policies</code></a> for details on the implications on the language
 implementation.
 <p>
 The following illustration shows the cardinalities of the individual components:

 <pre>
  N: unbounded
  P: N for exclusive, 1 for shared context policy
  L: number of installed languages
  I: number of installed instruments

  - 1 : Host VM Processs
   - N : <a href="../../../../org/graalvm/polyglot/Engine.html" title="class in org.graalvm.polyglot">Engine</a>
     - N : <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot">Context</a>
       - L : Language Context
     - P * L : <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>
     - I : <a href="../../../../org/graalvm/polyglot/Instrument.html" title="class in org.graalvm.polyglot">Instrument</a>
       - 1 : <a href="../../../../com/oracle/truffle/api/instrumentation/TruffleInstrument.html" title="class in com.oracle.truffle.api.instrumentation"><code>TruffleInstrument</code></a>
 </pre>

 For more information on sharing between multiple contexts please see <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api"><code>TruffleLanguage.ContextPolicy</code></a>.

 <h4>Parse Caching</h4>

 The result of the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#parse-com.oracle.truffle.api.TruffleLanguage.ParsingRequest-"><code>parsing request</code></a> is cached per language instance,
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getSource--"><code>source</code></a>, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getArgumentNames--"><code>argument
 names</code></a> and environment <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#getOptions--"><code>options</code></a>. The scope of the caching is influenced
 by the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#contextPolicy--"><code>context policy</code></a>. Caching may be
 <a href="../../../../com/oracle/truffle/api/source/Source.html#isCached--"><code>disabled</code></a> for certain sources. It is enabled for new sources by default.

 <h4>Language Configuration</h4>

 On <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>context creation</code></a> each language context is provided with
 information about the environment <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>environment </code></a>. Language can optionally declare
 <a href="../../../../org/graalvm/polyglot/Context.Builder.html#option-java.lang.String-java.lang.String-"><code>configurable</code></a> options in
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#getOptionDescriptors--"><code>TruffleLanguage.getOptionDescriptors()</code></a>.

 <h4>Polyglot Bindings</h4>

 Language implementations communicate with one another (and with instrumentation-based tools such
 as debuggers) by reading/writing named values into the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#getPolyglotBindings--"><code>polyglot
 bindings</code></a>. This bindings object is used to implement guest language export/import statements used
 for <em>language interoperation</em>.
 <p>
 A language implementation can also <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#importSymbol-java.lang.String-">import</a> or
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#exportSymbol-java.lang.String-java.lang.Object-">export</a> a global symbol by name. The scope may be
 accessed from multiple threads at the same time. Existing keys are overwritten.

 <h4>Configuration vs. Initialization</h4>

 To ensure that a Truffle language can be used in a language-agnostic way, the implementation
 should be designed to decouple its configuration and initialization from language specifics as
 much as possible. One aspect of this is the initialization and start of execution via the
 <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>, which should be designed in a generic way.
 Language-specific entry points, for instance to emulate the command-line interface of an existing
 implementation, should be handled externally.

 <h4>Multi-threading</h4>

 There are two kinds of threads that access contexts of Truffle guest languages:
 <ul>
 <li>Internal threads are <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#createThread-java.lang.Runnable-"><code>created</code></a> and managed by a language for
 a context. All internally created threads need to be stopped when the context is
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>disposed</code></a>.
 <li>External threads are created and managed by the host application / language launcher. The
 host application is allowed to use language contexts from changing threads, sequentially or at
 the same time if the language <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#isThreadAccessAllowed-java.lang.Thread-boolean-"><code>allows</code></a> it.
 </ul>
 <p>
 By default every <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>context</code></a> only allows access from one thread at the
 same time. Therefore if the context is tried to be accessed from multiple threads at the same
 time the access will fail. Languages that want to allow multi-threaded access to a context may
 override <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#isThreadAccessAllowed-java.lang.Thread-boolean-"><code>TruffleLanguage.isThreadAccessAllowed(Thread, boolean)</code></a> and return <code>true</code> also for
 multi-threaded accesses. Initialization actions for multi-threaded access can be performed by
 overriding <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeMultiThreading-C-"><code>TruffleLanguage.initializeMultiThreading(Object)</code></a>. Threads are
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeThread-C-java.lang.Thread-"><code>initialized</code></a> and <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>disposed</code></a> before and after use with a context. Languages may <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#createThread-java.lang.Runnable-"><code>create</code></a> new threads if the environment <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#isCreateThreadAllowed--"><code>allows</code></a> it.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8 or earlier</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>for embedding of Truffle languages in Java host applications.</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextLocalFactory</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextLocalFactory.html" title="type parameter in TruffleLanguage.ContextLocalFactory">C</a>,<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextLocalFactory.html" title="type parameter in TruffleLanguage.ContextLocalFactory">T</a>&gt;</span></code>
<div class="block">Context local factory for Truffle languages.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api">TruffleLanguage.ContextPolicy</a></span></code>
<div class="block">Defines the supported policy for reusing <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>languages</code></a> per context.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api">TruffleLanguage.ContextReference</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="type parameter in TruffleLanguage.ContextReference">C</a>&gt;</span></code>
<div class="block">Represents a reference to the current context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextThreadLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextThreadLocalFactory</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextThreadLocalFactory.html" title="type parameter in TruffleLanguage.ContextThreadLocalFactory">C</a>,<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextThreadLocalFactory.html" title="type parameter in TruffleLanguage.ContextThreadLocalFactory">T</a>&gt;</span></code>
<div class="block">Context thread local factory for Truffle languages.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a></span></code>
<div class="block">Represents execution environment of the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html" title="enum in com.oracle.truffle.api">TruffleLanguage.ExitMode</a></span></code>
<div class="block">Mode of exit operation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.InlineParsingRequest</a></span></code>
<div class="block">Request for inline parsing.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.LanguageReference.html" title="class in com.oracle.truffle.api">TruffleLanguage.LanguageReference</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.LanguageReference.html" title="type parameter in TruffleLanguage.LanguageReference">L</a> extends <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&gt;</span></code>
<div class="block">Represents a reference to the current language instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.ParsingRequest</a></span></code>
<div class="block">Request for parsing.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.Provider.html" title="interface in com.oracle.truffle.api">TruffleLanguage.Provider</a></span></code>
<div class="block">Used to register a <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> using a <a href="http://docs.oracle.com/javase/17/docs/api/java/util/ServiceLoader.html?is-external=true" title="class or interface in java.util"><code>ServiceLoader</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html" title="annotation in com.oracle.truffle.api">TruffleLanguage.Registration</a></span></code>
<div class="block">The annotation to use to register your language to the <a href="../../../../org/graalvm/polyglot/package-summary.html"><code>Polyglot
 API</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#TruffleLanguage--">TruffleLanguage</a></span>()</code>
<div class="block">Constructor to be called by subclasses.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#areOptionsCompatible-org.graalvm.options.OptionValues-org.graalvm.options.OptionValues-">areOptionsCompatible</a></span>(<a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;firstOptions,
                    <a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;newOptions)</code>
<div class="block">Returns <code>true</code> if the combination of two sets of options allow to
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#SHARED"><code>share</code></a> or <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a> the same language
 instance, else <code>false</code>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected abstract <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-">createContext</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;env)</code>
<div class="block">Creates internal representation of the executing context suitable for given environment.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected &lt;T&gt;&nbsp;<a href="../../../../com/oracle/truffle/api/ContextLocal.html" title="class in com.oracle.truffle.api">ContextLocal</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContextLocal-com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory-">createContextLocal</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextLocalFactory</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,T&gt;&nbsp;factory)</code>
<div class="block">Creates a new context local reference for this Truffle language.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected &lt;T&gt;&nbsp;<a href="../../../../com/oracle/truffle/api/ContextThreadLocal.html" title="class in com.oracle.truffle.api">ContextThreadLocal</a>&lt;T&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContextThreadLocal-com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory-">createContextThreadLocal</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextThreadLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextThreadLocalFactory</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,T&gt;&nbsp;factory)</code>
<div class="block">Creates a new context thread local reference for this Truffle language.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-">disposeContext</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code>
<div class="block">Disposes the context created by
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeThread-C-java.lang.Thread-">disposeThread</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
             <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread)</code>
<div class="block">Invoked the last time code will be executed for this thread and context.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#exitContext-C-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-">exitContext</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
           <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html" title="enum in com.oracle.truffle.api">TruffleLanguage.ExitMode</a>&nbsp;exitMode,
           int&nbsp;exitCode)</code>
<div class="block">Performs language exit event actions that are necessary before language contexts are
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>finalized</code></a>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-">finalizeContext</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code>
<div class="block">Performs language context finalization actions that are necessary before language contexts
 are <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>disposed</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#getAsynchronousStackDepth--">getAsynchronousStackDepth</a></span>()</code>
<div class="block">Get the depth of asynchronous stack.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#getLanguageHome--">getLanguageHome</a></span>()</code>
<div class="block">Returns the home location for this language.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#getLanguageView-C-java.lang.Object-">getLanguageView</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
               <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;value)</code>
<div class="block">Wraps the value to provide language-specific information for primitive and foreign values.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../org/graalvm/options/OptionDescriptors.html" title="interface in org.graalvm.options">OptionDescriptors</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#getOptionDescriptors--">getOptionDescriptors</a></span>()</code>
<div class="block">Returns a set of option descriptors that are supported by this language.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#getScope-C-">getScope</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code>
<div class="block">Get a top scope of the language, if any.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeContext-C-">initializeContext</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code>
<div class="block">Perform any complex initialization.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeMultipleContexts--">initializeMultipleContexts</a></span>()</code>
<div class="block">Initializes this language instance for use with multiple contexts.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeMultiThreading-C-">initializeMultiThreading</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code>
<div class="block">Invoked before the context is accessed from multiple threads at the same time.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeThread-C-java.lang.Thread-">initializeThread</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
                <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread)</code>
<div class="block">Invoked before a context is accessed from a new thread.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#isThreadAccessAllowed-java.lang.Thread-boolean-">isThreadAccessAllowed</a></span>(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread,
                     boolean&nbsp;singleThreaded)</code>
<div class="block">Returns <code>true</code> if code of this language is allowed to be executed on this thread.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#isVisible-C-java.lang.Object-">isVisible</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
         <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;value)</code>
<div class="block">Decides whether the result of evaluating an interactive source should be printed to stdout.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../com/oracle/truffle/api/nodes/ExecutableNode.html" title="class in com.oracle.truffle.api.nodes">ExecutableNode</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#parse-com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest-">parse</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.InlineParsingRequest</a>&nbsp;request)</code>
<div class="block">Parses the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html#getSource--"><code>provided source snippet</code></a> at the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html#getLocation--"><code>provided location</code></a> and generates its appropriate
 AST representation.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../com/oracle/truffle/api/CallTarget.html" title="interface in com.oracle.truffle.api">CallTarget</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#parse-com.oracle.truffle.api.TruffleLanguage.ParsingRequest-">parse</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.ParsingRequest</a>&nbsp;request)</code>
<div class="block">Parses the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getSource--"><code>provided source</code></a> and generates its appropriate
 AST representation.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#patchContext-C-com.oracle.truffle.api.TruffleLanguage.Env-">patchContext</a></span>(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
            <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;newEnv)</code>
<div class="block">Notifies the language with pre-initialized context about <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> change.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TruffleLanguage--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TruffleLanguage</h4>
<pre>protected&nbsp;TruffleLanguage()</pre>
<div class="block">Constructor to be called by subclasses. Language should not create any <a href="../../../../com/oracle/truffle/api/nodes/RootNode.html" title="class in com.oracle.truffle.api.nodes"><code>RootNode</code></a>s in
 its constructor. The RootNodes created in the language constructor are not associated with a
 Context and they don't respect Context's engine options. The needed RootNodes can be created
 in the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(Env)</code></a>.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8 or earlier</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="areOptionsCompatible-org.graalvm.options.OptionValues-org.graalvm.options.OptionValues-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>areOptionsCompatible</h4>
<pre>protected&nbsp;boolean&nbsp;areOptionsCompatible(<a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;firstOptions,
                                       <a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;newOptions)</pre>
<div class="block">Returns <code>true</code> if the combination of two sets of options allow to
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#SHARED"><code>share</code></a> or <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a> the same language
 instance, else <code>false</code>. If options are incompatible then a new language instance
 will be created for a new context. The default implementation returns <code>true</code>.
 <p>
 If the context policy of a language is set to <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#EXCLUSIVE"><code>exclusive</code></a>
 (default behavior) then <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#areOptionsCompatible-org.graalvm.options.OptionValues-org.graalvm.options.OptionValues-"><code>TruffleLanguage.areOptionsCompatible(OptionValues, OptionValues)</code></a> will never
 be invoked as <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> instances will not be shared for multiple contexts. For
 the other context policies <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a> and <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html#SHARED"><code>shared</code></a> this method can be used to further restrict the reuse of language instances.
 Compatibility influences <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#parse-com.oracle.truffle.api.TruffleLanguage.ParsingRequest-"><code>parse caching</code></a> because it uses the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> instance as a key.
 <p>
 Example usage of areOptionsCompatible if sharing of the language instances and parse caching
 should be restricted by the script version option:

 <pre class='snippet'><b>class</b> CompatibleLanguage <b>extends</b> <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a>&gt; {

    &#064;<a href="../../../../com/oracle/truffle/api/Option.html" title="annotation in com.oracle.truffle.api"><code>Option</code></a>(help = <em>""</em>, category = <a href="../../../../org/graalvm/options/OptionCategory.html" title="enum in org.graalvm.options"><code>OptionCategory</code></a>.USER)
    <b>static</b> <b>final</b> <a href="../../../../org/graalvm/options/OptionKey.html" title="class in org.graalvm.options"><code>OptionKey</code></a>&lt;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a>&gt; ScriptVersion
                = <b>new</b> <a href="../../../../org/graalvm/options/OptionKey.html" title="class in org.graalvm.options"><code>OptionKey</code></a>&lt;&gt;(<em>"ECMA2017"</em>);

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>boolean</b> areOptionsCompatible(<a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options"><code>OptionValues</code></a> firstOptions,
                    <a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options"><code>OptionValues</code></a> newOptions) {
        <b>return</b> firstOptions.get(ScriptVersion).
                        equals(newOptions.get(ScriptVersion));
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <a href="../../../../org/graalvm/options/OptionDescriptors.html" title="interface in org.graalvm.options"><code>OptionDescriptors</code></a> getOptionDescriptors() {
        <b>return</b> <b>new</b> CompatibleLanguageOptionDescriptors();
    }
}
</pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>firstOptions</code> - the options used to create the first context, never <code>null</code></dd>
<dd><code>newOptions</code> - the options that will be used for the new context, never <code>null</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api"><code>TruffleLanguage.ContextPolicy</code></a>, 
<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#parse-com.oracle.truffle.api.TruffleLanguage.ParsingRequest-"><code>TruffleLanguage.parse(ParsingRequest)</code></a></dd>
</dl>
</li>
</ul>
<a name="createContext-com.oracle.truffle.api.TruffleLanguage.Env-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createContext</h4>
<pre>protected abstract&nbsp;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;createContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;env)</pre>
<div class="block">Creates internal representation of the executing context suitable for given environment. Each
 time the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> is used by a new
 <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>, the system calls this method to let the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> prepare for <em>execution</em>. The returned execution
 context is completely language specific; it is however expected it will contain reference to
 here-in provided <code>env</code> and adjust itself according to parameters provided by the
 <code>env</code> object.
 <p>
 The context created by this method is accessible using <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api"><code>context
 references</code></a>. An <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> is thrown if the context is tried to be
 accessed while the createContext method is executed.
 <p>
 This method shouldn't perform any complex operations. The runtime system is just being
 initialized and for example making
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#parsePublic-com.oracle.truffle.api.source.Source-java.lang.String...-"><code>calls into
 other languages</code></a> and assuming your language is already initialized and others can see it
 would be wrong - until you return from this method, the initialization isn't over. The same
 is true for instrumentation, the instruments cannot receive any meta data about code executed
 during context creation. Should there be a need to perform complex initialization, do it by
 overriding the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeContext-C-"><code>TruffleLanguage.initializeContext(java.lang.Object)</code></a> method.
 <p>
 Additional services provided by the language must be
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#registerService-java.lang.Object-"><code>registered</code></a> by this method otherwise
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> is thrown.
 <p>
 May return <code>null</code> if the language does not need any per-<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot">context</a>
 state. Otherwise it should return a new object instance every time it is called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>env</code> - the environment the language is supposed to operate in</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>internal data of the language in given environment or <code>null</code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8 or earlier</dd>
</dl>
</li>
</ul>
<a name="initializeContext-java.lang.Object-">
<!--   -->
</a><a name="initializeContext-C-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeContext</h4>
<pre>protected&nbsp;void&nbsp;initializeContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)
                          throws <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Perform any complex initialization. The
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a> factory method shouldn't
 do any complex operations. Just create the instance of the context, let the runtime system
 register it properly. Should there be a need to perform complex initialization, override this
 method and let the runtime call it <em>later</em> to finish any <em>post initialization</em>
 actions. Example:

 <pre class='snippet'><b>class</b> PostInitLanguage <b>extends</b> <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>&lt;<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>&gt; {
    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> createContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> env) {
        <em>// "quickly" create the context</em>
        <b>return</b> <b>new</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>(env);
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeContext(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context) <b>throws</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io"><code>IOException</code></a> {
        <em>// called "later" to finish the initialization</em>
        <em>// for example call into another language</em>
        <a href="../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a> source = <a href="../../../../com/oracle/truffle/api/source/Source.html" title="class in com.oracle.truffle.api.source"><code>Source</code></a>.newBuilder(<em>"js"</em>,
                            <em>"function(x, y) x * y"</em>,
                            <em>"mul.js"</em>).build();
        context.mul = context.env.parsePublic(source);
    }
}
</pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context created by
            <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - if something goes wrong</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.17</dd>
</dl>
</li>
</ul>
<a name="finalizeContext-java.lang.Object-">
<!--   -->
</a><a name="finalizeContext-C-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalizeContext</h4>
<pre>protected&nbsp;void&nbsp;finalizeContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</pre>
<div class="block">Performs language context finalization actions that are necessary before language contexts
 are <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>disposed</code></a>. However, in case the underlying polyglot
 context is being cancelled or hard-exited, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>TruffleLanguage.disposeContext(Object)</code></a> is called even if
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>TruffleLanguage.finalizeContext(Object)</code></a> throws an
 <a href="../../../../com/oracle/truffle/api/exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or a <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ThreadDeath.html?is-external=true" title="class or interface in java.lang"><code>ThreadDeath</code></a>
 cancel or exit exception.
 <p>
 For the hard exit a language is supposed to run its finalization actions that require running
 guest code in <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#exitContext-C-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-"><code>TruffleLanguage.exitContext(Object, ExitMode, int)</code></a>, but please note that after
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#exitContext-C-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-"><code>TruffleLanguage.exitContext(Object, ExitMode, int)</code></a> runs for a language, the language can still be
 invoked from <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#exitContext-C-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-"><code>TruffleLanguage.exitContext(Object, ExitMode, int)</code></a> for a different language. Therefore,
 for instance, finalization for standard streams should both flush and set them to unbuffered
 mode at the end of exitContext, so that running guest code is not required to dispose the
 streams after that point.
 <p>
 Context finalization is invoked even if a context was cancelled. In such a case, if guest
 code would run as part of the finalization, it would be cancelled at the next polled
 <a href="../../../../com/oracle/truffle/api/TruffleSafepoint.html" title="class in com.oracle.truffle.api"><code>safepoint</code></a>. If there is guest code that always needs to run even if
 cancelled, e.g. to prevent resource leakage, use
 <a href="../../../../com/oracle/truffle/api/TruffleSafepoint.html#setAllowActions-boolean-"><code>TruffleSafepoint.setAllowActions(boolean)</code></a> to temporarily disable safepoints while
 executing that code.
 <p>
 All installed languages must remain usable after finalization. The finalization order can be
 influenced by specifying <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#dependentLanguages--"><code>language dependencies</code></a>. By
 default internal languages are finalized last, otherwise, the default order is unspecified
 but deterministic.
 <p>
 While the finalization code is run, other language contexts may become initialized. In such a
 case, the finalization order may be non-deterministic and/or not respect the order specified
 by language dependencies.
 <p>
 All threads <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#createThread-java.lang.Runnable-"><code>created</code></a> by the language must be stopped and
 joined during finalizeContext. The languages are responsible for fulfilling that contract,
 otherwise, an <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/AssertionError.html?is-external=true" title="class or interface in java.lang"><code>AssertionError</code></a> is thrown. It's not safe to use the
 <a href="http://docs.oracle.com/javase/17/docs/api/java/util/concurrent/ExecutorService.html?is-external=true#awaitTermination-long-java.util.concurrent.TimeUnit-" title="class or interface in java.util.concurrent"><code>ExecutorService.awaitTermination(long, java.util.concurrent.TimeUnit)</code></a> to detect
 Thread termination as the polyglot thread may be cancelled before executing the executor
 worker.
 <p>
 During finalizeContext, all unclosed inner contexts <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#newContextBuilder--"><code>created</code></a>
 by the language must be left on all threads where the contexts are still active. No active
 inner context is allowed after <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>TruffleLanguage.finalizeContext(Object)</code></a> returns, otherwise it is an
 internal error.
 <p>
 Non-active inner contexts <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#newContextBuilder--"><code>created</code></a> by the language that are
 still unclosed after <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>TruffleLanguage.finalizeContext(Object)</code></a> returns are automatically closed by
 Truffle.
 <p>
 Typical implementation looks like:

 <pre class='snippet'><b>class</b> AsyncThreadLanguage <b>extends</b> <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>&lt;<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>&gt; {

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> createContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> env) {
        <b>return</b> <b>new</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>(env);
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>boolean</b> isThreadAccessAllowed(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread,
                    <b>boolean</b> singleThreaded) {
        <em>// allow access from any thread instead of just one</em>
        <b>return</b> <b>true</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeContext(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context) <b>throws</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang"><code>Exception</code></a> {
        <em>// create and start a Thread for the asynchronous task</em>
        <em>// remeber the Thread reference to stop and join it in</em>
        <em>// the finalizeContext</em>
        <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> t = context.env.createThread(<b>new</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a>() {
            &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
            <b>public</b> <b>void</b> run() {
                <em>// asynchronous task</em>
            }
        });
        context.startedThreads.add(t);
        t.start();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> finalizeContext(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context) {
        <em>// stop and join all the created Threads</em>
        <b>boolean</b> interrupted = <b>false</b>;
        <b>for</b> (<b>int</b> i = 0; i &lt; context.startedThreads.size();) {
            <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> threadToJoin  = context.startedThreads.get(i);
            <b>try</b> {
                <b>if</b> (threadToJoin != <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a>.currentThread()) {
                    threadToJoin.interrupt();
                    threadToJoin.join();
                }
                i++;
            } <b>catch</b> (<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang"><code>InterruptedException</code></a> ie) {
                interrupted = <b>true</b>;
            }
        }
        <b>if</b> (interrupted) {
            <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a>.currentThread().interrupt();
        }
    }
}
</pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context created by
            <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#dependentLanguages--"><code>for specifying language dependencies.</code></a></dd>
</dl>
</li>
</ul>
<a name="exitContext-java.lang.Object-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-">
<!--   -->
</a><a name="exitContext-C-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exitContext</h4>
<pre>protected&nbsp;void&nbsp;exitContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
                           <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html" title="enum in com.oracle.truffle.api">TruffleLanguage.ExitMode</a>&nbsp;exitMode,
                           int&nbsp;exitCode)</pre>
<div class="block">Performs language exit event actions that are necessary before language contexts are
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>finalized</code></a>. However, in case the underlying polyglot context
 is being cancelled, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#exitContext-C-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-"><code>exit notifications</code></a> are not
 executed. Also, for <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a>, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>TruffleLanguage.finalizeContext(Object)</code></a> is
 called even if <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#exitContext-C-com.oracle.truffle.api.TruffleLanguage.ExitMode-int-"><code>TruffleLanguage.exitContext(Object, ExitMode, int)</code></a> throws an
 <a href="../../../../com/oracle/truffle/api/exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or a <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ThreadDeath.html?is-external=true" title="class or interface in java.lang"><code>ThreadDeath</code></a>
 cancel or exit exception. All initialized language contexts must remain usable after exit
 notifications. In case a <a href="../../../../com/oracle/truffle/api/exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or
 the <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ThreadDeath.html?is-external=true" title="class or interface in java.lang"><code>ThreadDeath</code></a> exit exception is thrown during an <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#HARD"><code>hard exit
 notification</code></a>, it is just logged and otherwise ignored and the notification process continues
 with the next language in order. In case the <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ThreadDeath.html?is-external=true" title="class or interface in java.lang"><code>ThreadDeath</code></a> cancel exception is thrown,
 it means the context is being cancelled in which case the exit notification process
 immediately stops. The exit notification order can be influenced by specifying
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#dependentLanguages--"><code>language dependencies</code></a> - The exit notification for
 language A that depends on language B is executed before the exit notification for language
 B. By default, notifications for internal languages are executed last, otherwise, the default
 order is unspecified but deterministic.
 <p>
 During <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a> notification, a language is supposed to run its
 finalization actions that require running guest code instead of running them in
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>TruffleLanguage.finalizeContext(Object)</code></a>.
 <p>
 While the exit notification code is run, all languages remain fully functional. Also, other
 language contexts may become initialized. In such a case, the notification order may be
 non-deterministic and/or not respect the order specified by language dependencies.
 <p>
 In case <a href="../../../../com/oracle/truffle/api/TruffleContext.html#closeExited-com.oracle.truffle.api.nodes.Node-int-"><code>TruffleContext.closeExited(Node, int)</code></a> is called during a
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#NATURAL"><code>natural exit</code></a> notification, natural exit notifications for remaining
 language contexts are not executed and the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a> process starts by
 executing <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a> notifications. In case
 <a href="../../../../com/oracle/truffle/api/TruffleContext.html#closeExited-com.oracle.truffle.api.nodes.Node-int-"><code>TruffleContext.closeExited(Node, int)</code></a> is called during a <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#HARD"><code>hard
 exit</code></a> notification, it just throws the special <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ThreadDeath.html?is-external=true" title="class or interface in java.lang"><code>ThreadDeath</code></a> exit exception, which is
 then just logged as described above.
 <p>
 In case the underlying polyglot context is cancelled by e.g.
 <a href="../../../../com/oracle/truffle/api/TruffleContext.html#closeCancelled-com.oracle.truffle.api.nodes.Node-java.lang.String-"><code>TruffleContext.closeCancelled(Node, String)</code></a> during exit notifications, guest code
 executed during exit notification is regularly cancelled, i.e., throws the
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ThreadDeath.html?is-external=true" title="class or interface in java.lang"><code>ThreadDeath</code></a> cancel exception, and the notification process does not continue as
 described above.
 <p>
 In the case of <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a>, if the current context has inner contexts
 that are still active, the execution for them will be stopped as well after all language exit
 notifications are executed for the outer context, but the exit notifications for the inner
 contexts are not automatically executed. The language needs to take appropriate action to
 make sure inner contexts are exited properly.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - language context.</dd>
<dd><code>exitMode</code> - mode of exit.</dd>
<dd><code>exitCode</code> - exit code that was specified for exit.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>22.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href= "https://github.com/oracle/graal/blob/master/truffle/docs/Exit.md">Context
      Exit</a></dd>
</dl>
</li>
</ul>
<a name="initializeMultipleContexts--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeMultipleContexts</h4>
<pre>protected&nbsp;void&nbsp;initializeMultipleContexts()</pre>
<div class="block">Initializes this language instance for use with multiple contexts. Whether a language
 instance supports being used for multiple contexts depends on its
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#contextPolicy--"><code>context policy</code></a>.
 <p>
 For any sharing of a language instance for multiple language contexts to take place a context
 must be created with sharing enabled. By default sharing is disabled for polyglot contexts.
 Sharing can be enabled by specifying an <a href="../../../../org/graalvm/polyglot/Context.Builder.html#engine-org.graalvm.polyglot.Engine-"><code>explicit engine</code></a> or
 using an option. Before any language is used for sharing
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeMultipleContexts--"><code>TruffleLanguage.initializeMultipleContexts()</code></a> is invoked. It is guaranteed that sharing between
 multiple contexts is <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeMultipleContexts--"><code>initialized</code></a> before any language
 context is <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>created</code></a>.
 <p>
 A language may use this method to configure itself to use context independent speculations
 only. Since Truffle nodes are never shared between multiple language instances it is
 sufficient to keep track of whether sharing is enabled using a non-volatile boolean field
 instead of an assumption. They field may also be annotated with <a href="../../../../com/oracle/truffle/api/CompilerDirectives.CompilationFinal.html" title="annotation in com.oracle.truffle.api"><code>CompilerDirectives.CompilationFinal</code></a> as
 it is guaranteed that this method is called prior to any compilation. The following criteria
 should be satisfied when supporting context independent code:
 <ul>
 <li>All speculation on runtime value identity must be disabled with multiple contexts
 initialized, as they will lead to a guaranteed deoptimization when used with a second
 context.
 <li>Function inline caches should be modified and implemented as a two-level inline cache.
 The first level speculates on the function instance's identity and the second level on the
 underlying CallTarget instance. The first level cache must be disabled if multiple contexts
 are initialized, as this would unnecessarily cause deoptimization.
 <li>The DynamicObject root Shape instance should be stored in the language instance instead
 of the language context. Otherwise, any inline cache on shapes will not stabilize and
 ultimately end up in the generic state.
 <li>All Node implementations must not store context-dependent data structures or
 context-dependent runtime values.
 <li>All assumption instances should be stored in the language instance instead of the
 context. With multiple contexts initialized, the context instance read using context
 references may no longer be a constant. In this case any assumption read from the context
 would not be folded and they would cause significant runtime performance overhead.
 Assumptions from the language can always be folded by the compiler in both single and
 multiple context mode.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api"><code>More information on sharing language instances for multiple contexts.</code></a>, 
<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#areOptionsCompatible-org.graalvm.options.OptionValues-org.graalvm.options.OptionValues-"><code>Specify option configurations that
      make sharing incompatible.</code></a>, 
<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextPolicy.html" title="enum in com.oracle.truffle.api"><code>TruffleLanguage.ContextPolicy</code></a></dd>
</dl>
</li>
</ul>
<a name="disposeContext-java.lang.Object-">
<!--   -->
</a><a name="disposeContext-C-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disposeContext</h4>
<pre>protected&nbsp;void&nbsp;disposeContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</pre>
<div class="block">Disposes the context created by
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a>. A dispose cleans up all
 resources associated with a context. The context may become unusable after it was disposed.
 It is not allowed to run guest language code while disposing a context. Finalization code
 should be run in <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>TruffleLanguage.finalizeContext(Object)</code></a> instead. Finalization will be performed
 prior to context <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>disposal</code></a>. However, in case the underlying
 polyglot context is being cancelled, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeContext-C-"><code>TruffleLanguage.disposeContext(Object)</code></a> is called even if
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>TruffleLanguage.finalizeContext(Object)</code></a> throws
 <a href="../../../../com/oracle/truffle/api/exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ThreadDeath.html?is-external=true" title="class or interface in java.lang"><code>ThreadDeath</code></a>
 exception..
 <p>
 The disposal order can be influenced by specifying <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#dependentLanguages--"><code>language dependencies</code></a>. By default internal languages are disposed last, otherwise the
 default order is unspecified but deterministic. During disposal no other language must be
 accessed using the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>language environment</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context created by
            <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8 or earlier</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#finalizeContext-C-"><code>to run finalization code for a context.</code></a>, 
<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#disposeThread-C-java.lang.Thread-"><code>to perform disposal actions when a thread is no longer
      used.</code></a></dd>
</dl>
</li>
</ul>
<a name="parse-com.oracle.truffle.api.TruffleLanguage.ParsingRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parse</h4>
<pre>protected&nbsp;<a href="../../../../com/oracle/truffle/api/CallTarget.html" title="interface in com.oracle.truffle.api">CallTarget</a>&nbsp;parse(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.ParsingRequest</a>&nbsp;request)
                    throws <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Parses the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getSource--"><code>provided source</code></a> and generates its appropriate
 AST representation. The parsing should execute no user code, it should only create the
 <a href="../../../../com/oracle/truffle/api/nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree to represent the source. If the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getSource--"><code>provided
 source</code></a> does not correspond naturally to a <a href="../../../../com/oracle/truffle/api/CallTarget.html" title="interface in com.oracle.truffle.api"><code>call target</code></a>, the returned call
 target should create and if necessary initialize the corresponding language entity and return
 it.
 <p>
 The result of the parsing request is cached per language instance,
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getSource--"><code>source</code></a> and <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getArgumentNames--"><code>argument names</code></a>. It is safe to assume that current <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> instance
 and <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getArgumentNames--"><code>argument names</code></a> will remain unchanged for a
 parsed <a href="../../../../com/oracle/truffle/api/CallTarget.html" title="interface in com.oracle.truffle.api"><code>CallTarget</code></a>. The scope of the caching is influenced by the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#contextPolicy--"><code>context policy</code></a> and option
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#areOptionsCompatible-org.graalvm.options.OptionValues-org.graalvm.options.OptionValues-"><code>compatibility</code></a>.
 Caching may be <a href="../../../../com/oracle/truffle/api/source/Source.html#isCached--"><code>disabled</code></a> for sources. It is enabled for new sources
 by default.
 <p>
 The <code>argumentNames</code> may contain symbolic names for actual parameters of the call to the
 returned value. The result should be a call target with method
 <a href="../../../../com/oracle/truffle/api/CallTarget.html#call-java.lang.Object...-"><code>CallTarget.call(java.lang.Object...)</code></a> that accepts as many arguments as were provided
 via the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.ParsingRequest.html#getArgumentNames--"><code>TruffleLanguage.ParsingRequest.getArgumentNames()</code></a> method.
 <p>
 Implement <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#parse-com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest-"><code>TruffleLanguage.parse(com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest)</code></a> to
 parse source in a specific context location.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - request for parsing</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a call target to invoke which also keeps in memory the <a href="../../../../com/oracle/truffle/api/nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree representing
         just parsed <code>code</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - exception can be thrown when parsing goes wrong. Here-in thrown exception
             is propagated to the user who called one of <code>eval</code> methods of
             <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.22</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.Registration.html#contextPolicy--"><code>TruffleLanguage.Registration.contextPolicy()</code></a></dd>
</dl>
</li>
</ul>
<a name="parse-com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parse</h4>
<pre>protected&nbsp;<a href="../../../../com/oracle/truffle/api/nodes/ExecutableNode.html" title="class in com.oracle.truffle.api.nodes">ExecutableNode</a>&nbsp;parse(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.InlineParsingRequest</a>&nbsp;request)
                        throws <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Parses the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html#getSource--"><code>provided source snippet</code></a> at the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html#getLocation--"><code>provided location</code></a> and generates its appropriate
 AST representation. The parsing should execute no user code, it should only create the
 <a href="../../../../com/oracle/truffle/api/nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree to represent the source.
 <p>
 The parsing should be performed in a context (specified by
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html#getLocation--"><code>TruffleLanguage.InlineParsingRequest.getLocation()</code></a>). The result should be an AST fragment with method
 <a href="../../../../com/oracle/truffle/api/nodes/ExecutableNode.html#execute-com.oracle.truffle.api.frame.VirtualFrame-"><code>ExecutableNode.execute(com.oracle.truffle.api.frame.VirtualFrame)</code></a> that accepts frames
 valid at the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html#getLocation--"><code>provided location</code></a>.
 <p>
 When not implemented, <code>null</code> is returned by default.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>request</code> - request for parsing</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a fragment to invoke which also keeps in memory the <a href="../../../../com/oracle/truffle/api/nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree representing
         just parsed <a href="../../../../com/oracle/truffle/api/TruffleLanguage.InlineParsingRequest.html#getSource--"><code>code</code></a>, or <code>null</code> when
         inline parsing of code snippets is not implemented</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - exception can be thrown when parsing goes wrong.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.31</dd>
</dl>
</li>
</ul>
<a name="getOptionDescriptors--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOptionDescriptors</h4>
<pre>protected&nbsp;<a href="../../../../org/graalvm/options/OptionDescriptors.html" title="interface in org.graalvm.options">OptionDescriptors</a>&nbsp;getOptionDescriptors()</pre>
<div class="block">Returns a set of option descriptors that are supported by this language. Option values are
 accessible using the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#getOptions--"><code>environment</code></a> when the context is
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>created</code></a>. To construct option descriptors from a list then
 <a href="../../../../org/graalvm/options/OptionDescriptors.html#create-java.util.List-"><code>OptionDescriptors.create(List)</code></a> can be used. Languages must always return the same
 option descriptors independent of the language instance or side-effects.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.27</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/Option.html" title="annotation in com.oracle.truffle.api"><code>For an example of declaring the option descriptor using an annotation.</code></a></dd>
</dl>
</li>
</ul>
<a name="patchContext-java.lang.Object-com.oracle.truffle.api.TruffleLanguage.Env-">
<!--   -->
</a><a name="patchContext-C-com.oracle.truffle.api.TruffleLanguage.Env-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>patchContext</h4>
<pre>protected&nbsp;boolean&nbsp;patchContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
                               <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;newEnv)</pre>
<div class="block">Notifies the language with pre-initialized context about <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> change. See
 <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> for information how to enable the Context
 pre-initialization.
 <p>
 During the pre-initialization (in the native compilation time) the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a> and
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeContext-C-"><code>TruffleLanguage.initializeContext(java.lang.Object)</code></a> methods are called. In the image execution time,
 the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#patchContext-C-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.patchContext(java.lang.Object, com.oracle.truffle.api.TruffleLanguage.Env)</code></a> is
 called on all languages whose contexts were created during the pre-initialization a
 consequence of <a href="../../../../org/graalvm/polyglot/Context.html#create-java.lang.String...-"><code>Context.create(java.lang.String...)</code></a> invocation.
 The contexts are patched in a topological order starting from dependent languages. If the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#patchContext-C-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.patchContext(java.lang.Object, com.oracle.truffle.api.TruffleLanguage.Env)</code></a> is
 successful for all pre-initialized languages the pre-initialized context is used, otherwise a
 new context is created.
 <p>
 Typical implementation looks like:

 <pre class='snippet'>&#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
<b>protected</b> <b>boolean</b> patchContext(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> newEnv) {
    <b>if</b> (!optionsAllowPreInitializedContext(context, newEnv)) {
        <em>// Incompatible options - cannot use pre-initialized context</em>
        <b>return</b> <b>false</b>;
    }
    context.env = newEnv;
    context.args = newEnv.getApplicationArguments();
    context.in = newEnv.in();
    context.out = newEnv.out();
    context.err = newEnv.err();
    <b>return</b> <b>true</b>;
}

<b>private</b> <b>boolean</b> optionsAllowPreInitializedContext(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> newEnv) {
    <em>// Verify that values of important options in the new Env do not differ</em>
    <em>// from values in the pre-initialized context</em>
    <b>final</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> newVersionValue = newEnv.getOptions().get(version);
    <b>return</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/util/Objects.html?is-external=true" title="class or interface in java.util"><code>Objects</code></a>.equals(context.languageVersion, newVersionValue);
}
</pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context created by
            <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#createContext-com.oracle.truffle.api.TruffleLanguage.Env-"><code>TruffleLanguage.createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a> during
            pre-initialization</dd>
<dd><code>newEnv</code> - the new environment replacing the environment used in pre-initialization phase</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true in case of successful environment update. When the context cannot be updated to
         a new environment return false to create a new context. By default it returns
         <code>false</code> to prevent an usage of pre-initialized context by a language which is
         not aware of context pre-initialization.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.31</dd>
</dl>
</li>
</ul>
<a name="isThreadAccessAllowed-java.lang.Thread-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isThreadAccessAllowed</h4>
<pre>protected&nbsp;boolean&nbsp;isThreadAccessAllowed(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread,
                                        boolean&nbsp;singleThreaded)</pre>
<div class="block">Returns <code>true</code> if code of this language is allowed to be executed on this thread.
 The method returns <code>false</code> to deny execution on this thread. The default
 implementation denies access to more than one thread at the same time. The
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true#currentThread--" title="class or interface in java.lang"><code>current thread</code></a> may differ from the passed thread. If this
 method throws an <a href="../../../../com/oracle/truffle/api/exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> the
 exception interop messages may be executed without a context being entered.
 <p>
 <b>Example multi-threaded language implementation:</b>
 <pre class='snippet'><b>class</b> MultiThreadedLanguage <b>extends</b> <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>&lt;<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>&gt; {

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> createContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> env) {
        <b>return</b> <b>new</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>(env);
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>boolean</b> isThreadAccessAllowed(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread,
                    <b>boolean</b> singleThreaded) {
        <em>// allow access from any thread instead of just one</em>
        <b>return</b> <b>true</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeMultiThreading(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context) {
        <em>// perform actions when the context is switched to multi-threading</em>
        context.singleThreaded.invalidate();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeThread(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread) {
        <em>// perform initialization actions for threads</em>
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> disposeThread(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread) {
        <em>// perform disposal actions for threads</em>
    }
}
</pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>thread</code> - the thread that accesses the context for the first time.</dd>
<dd><code>singleThreaded</code> - <code>true</code> if the access is considered single-threaded,
            <code>false</code> if more than one thread is active at the same time.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.28</dd>
</dl>
</li>
</ul>
<a name="initializeMultiThreading-java.lang.Object-">
<!--   -->
</a><a name="initializeMultiThreading-C-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeMultiThreading</h4>
<pre>protected&nbsp;void&nbsp;initializeMultiThreading(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</pre>
<div class="block">Invoked before the context is accessed from multiple threads at the same time. This allows
 languages to perform actions that are required to support multi-threading. It will never be
 invoked if <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#isThreadAccessAllowed-java.lang.Thread-boolean-"><code>TruffleLanguage.isThreadAccessAllowed(Thread, boolean)</code></a> is implemented to deny access from
 multiple threads at the same time. All initialized languages must allow multi-threading for
 this method to be invoked. If this method throws an
 <a href="../../../../com/oracle/truffle/api/exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> the exception interop
 messages may be executed without a context being entered.
 <p>
 <b>Example multi-threaded language implementation:</b>
 <pre class='snippet'><b>class</b> MultiThreadedLanguage <b>extends</b> <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>&lt;<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>&gt; {

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> createContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> env) {
        <b>return</b> <b>new</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>(env);
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>boolean</b> isThreadAccessAllowed(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread,
                    <b>boolean</b> singleThreaded) {
        <em>// allow access from any thread instead of just one</em>
        <b>return</b> <b>true</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeMultiThreading(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context) {
        <em>// perform actions when the context is switched to multi-threading</em>
        context.singleThreaded.invalidate();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeThread(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread) {
        <em>// perform initialization actions for threads</em>
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> disposeThread(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread) {
        <em>// perform disposal actions for threads</em>
    }
}
</pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context that should be prepared for multi-threading.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.28</dd>
</dl>
</li>
</ul>
<a name="initializeThread-java.lang.Object-java.lang.Thread-">
<!--   -->
</a><a name="initializeThread-C-java.lang.Thread-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeThread</h4>
<pre>protected&nbsp;void&nbsp;initializeThread(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
                                <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread)</pre>
<div class="block">Invoked before a context is accessed from a new thread. This allows the language to perform
 initialization actions for each thread before guest language code is executed. Also for
 languages that deny access from multiple threads at the same time, multiple threads may be
 initialized if they are used sequentially. This method will be invoked before the context is
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeContext-C-"><code>initialized</code></a> for the thread the context will be initialized
 with. If the thread is stored in the context it must be referenced using
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a> to avoid leaking thread objects.
 <p>
 The <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true#currentThread--" title="class or interface in java.lang"><code>current thread</code></a> may differ from the initialized thread.
 <p>
 If this method throws an <a href="../../../../com/oracle/truffle/api/exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a>
 the exception interop messages may be executed without a context being entered.
 <p>
 <b>Example multi-threaded language implementation:</b>
 <pre class='snippet'><b>class</b> MultiThreadedLanguage <b>extends</b> <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>&lt;<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>&gt; {

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> createContext(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> env) {
        <b>return</b> <b>new</b> <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>(env);
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>boolean</b> isThreadAccessAllowed(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread,
                    <b>boolean</b> singleThreaded) {
        <em>// allow access from any thread instead of just one</em>
        <b>return</b> <b>true</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeMultiThreading(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context) {
        <em>// perform actions when the context is switched to multi-threading</em>
        context.singleThreaded.invalidate();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> initializeThread(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread) {
        <em>// perform initialization actions for threads</em>
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>protected</b> <b>void</b> disposeThread(<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> context, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> thread) {
        <em>// perform disposal actions for threads</em>
    }
}
</pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context that is entered</dd>
<dd><code>thread</code> - the thread that accesses the context for the first time.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.28</dd>
</dl>
</li>
</ul>
<a name="disposeThread-java.lang.Object-java.lang.Thread-">
<!--   -->
</a><a name="disposeThread-C-java.lang.Thread-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disposeThread</h4>
<pre>protected&nbsp;void&nbsp;disposeThread(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
                             <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread)</pre>
<div class="block">Invoked the last time code will be executed for this thread and context. This allows the
 language to perform cleanup actions for each thread and context. Threads might be disposed
 before after or while a context is disposed. The <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true#currentThread--" title="class or interface in java.lang"><code>current
 thread</code></a> may differ from the disposed thread. Disposal of threads is only guaranteed for
 threads that were created by guest languages, so called <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#createThread-java.lang.Runnable-"><code>polyglot threads</code></a>. Other threads, created by the embedder, may be collected by the garbage
 collector before they can be disposed and may therefore not be disposed.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.28</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#initializeThread-C-java.lang.Thread-"><code>For usage details.</code></a></dd>
</dl>
</li>
</ul>
<a name="getScope-java.lang.Object-">
<!--   -->
</a><a name="getScope-C-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScope</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;getScope(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</pre>
<div class="block">Get a top scope of the language, if any. The returned object must be an
 <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html#isScope-java.lang.Object-"><code>interop scope object</code></a>
 and may have <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html#hasScopeParent-java.lang.Object-"><code>parent scopes</code></a>. The scope object exposes all top scopes variables as flattened
 <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html#getMembers-java.lang.Object-"><code>members</code></a>. Top scopes
 are independent of a <a href="../../../../com/oracle/truffle/api/frame/Frame.html" title="interface in com.oracle.truffle.api.frame"><code>Frame</code></a>. See
 <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html#isScope-java.lang.Object-"><code>InteropLibrary.isScope(Object)</code></a> for details.
 <p>
 The returned scope objects may be cached by the caller per language context. Therefore the
 method should always return equivalent top-scopes and variables objects for a given language
 context. Changes to the top scope by executing guest language code should be reflected by
 cached scope instances. It is recommended to store the top-scope directly in the language
 context for efficient access.
 <p>
 <h3>Interpretation</h3> In most languages, just evaluating an expression like
 <code>Math</code> is equivalent of a lookup with the identifier 'Math' in the top-most scopes
 of the language. Looking up the identifier 'Math' should have equivalent semantics as reading
 with the key 'Math' from the variables object of one of the top-most scopes of the language.
 In addition languages may optionally allow modification and insertion with the variables
 object of the returned top-scopes.
 <p>
 Languages may want to specify multiple parent top-scopes. It is recommended to stay as close
 as possible to the set of top-scopes that as is described in the guest language
 specification, if available. For example, in JavaScript, there is a 'global environment' and
 a 'global object' scope. While the global environment scope contains class declarations and
 is not insertable, the global object scope is used to insert new global variable values and
 is therefore insertable.
 <p>
 <h3>Use Cases</h3>
 <ul>
 <li>Top scopes are accessible to instruments with
 <a href="../../../../com/oracle/truffle/api/instrumentation/TruffleInstrument.Env.html#getScope-com.oracle.truffle.api.nodes.LanguageInfo-"><code>TruffleInstrument.Env.getScope(LanguageInfo)</code></a>.
 They are used by debuggers to access the top-most scopes of the language.
 <li>Top scopes available in the <a href="../../../../org/graalvm/polyglot/package-summary.html"><code>polyglot API</code></a> as context
 <a href="../../../../org/graalvm/polyglot/Context.html#getBindings-java.lang.String-"><code>bindings</code></a> object. Access to members of the bindings object
 is applied to the returned scope object via interop.
 </ul>
 <p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the context to find the language top scope in</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the scope object or <code>null</code> if the language does not support such concept</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>20.3</dd>
</dl>
</li>
</ul>
<a name="isVisible-java.lang.Object-java.lang.Object-">
<!--   -->
</a><a name="isVisible-C-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isVisible</h4>
<pre>protected&nbsp;boolean&nbsp;isVisible(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
                            <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;value)</pre>
<div class="block">Decides whether the result of evaluating an interactive source should be printed to stdout.
 By default this methods returns <code>true</code> claiming all values are visible.
 <p>
 This method affects behavior of
 <a href="../../../../org/graalvm/polyglot/Context.html#eval-org.graalvm.polyglot.Source-"><code>Context.eval(org.graalvm.polyglot.Source)</code></a> - when evaluating an
 <a href="../../../../com/oracle/truffle/api/source/Source.html#isInteractive--"><code>interactive source</code></a> the result of the evaluation is tested for
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html#isVisible-C-java.lang.Object-"><code>visibility</code></a> and if the value is found
 visible, it gets converted to string and printed to
 <a href="../../../../org/graalvm/polyglot/Context.Builder.html#out-java.io.OutputStream-"><code>standard output</code></a>.
 <p>
 A language can control whether a value is or isn't printed by overriding this method and
 returning <code>false</code> for some or all values. In such case it is up to the language
 itself to use the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#out--"><code>TruffleLanguage.Env.out()</code></a>, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#err--"><code>TruffleLanguage.Env.err()</code></a> and <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#in--"><code>TruffleLanguage.Env.in()</code></a> streams of the
 environment.

 When evaluation is called with an <a href="../../../../com/oracle/truffle/api/source/Source.html#isInteractive--"><code>interactive source</code></a> of a
 language that controls its interactive behavior, it is the responsibility of the language
 itself to print the result to use the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#out--"><code>TruffleLanguage.Env.out()</code></a>, <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#err--"><code>TruffleLanguage.Env.err()</code></a> and
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.Env.html#in--"><code>TruffleLanguage.Env.in()</code></a> streams of the environment.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the execution context for doing the conversion</dd>
<dd><code>value</code> - the value to check. Either primitive type or
            <a href="../../../../com/oracle/truffle/api/interop/TruffleObject.html" title="interface in com.oracle.truffle.api.interop"><code>TruffleObject</code></a></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the language implements an interactive response to evaluation of
         interactive sources.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.22</dd>
</dl>
</li>
</ul>
<a name="getLanguageView-java.lang.Object-java.lang.Object-">
<!--   -->
</a><a name="getLanguageView-C-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLanguageView</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;getLanguageView(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
                                 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;value)</pre>
<div class="block">Wraps the value to provide language-specific information for primitive and foreign values.
 Foreign values should be enhanced to look like the most generic object type of the language.
 The wrapper needs to introduce any "virtual" methods and properties that are commonly used in
 language constructs and in algorithms that are written to work on this generic object type.
 The wrapper may add or remove existing interop traits, but it is not allowed to change the
 <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html" title="class in com.oracle.truffle.api.interop"><code>interop type</code></a>. For example, it is not
 allowed to change the type from number to string. If the behavior of an existing trait is
 modified then all writes on the mapper need to be forwarded to the underlying object, apart
 from the virtual members. Writes to the virtual members should be persisted in the wrapper if
 this is the behavior of the object type that is being mapped to.
 <p>
 Every language view wrapper must return the current language as their associated
 <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html#getLanguage-java.lang.Object-"><code>language</code></a>. An
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/AssertionError.html?is-external=true" title="class or interface in java.lang"><code>AssertionError</code></a> is thrown when a language view is requested if this contract is
 violated.
 <p>
 Example modifications language view wrappers may perform:
 <ul>
 <li>Provide a language specific
 <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html#toDisplayString-java.lang.Object-"><code>display string</code></a>
 for primitive and foreign values.
 <li>Return a language specific
 <a href="../../../../com/oracle/truffle/api/interop/InteropLibrary.html#getMetaObject-java.lang.Object-"><code>metaobject</code></a> for
 primitive or foreign values.
 <li>Add virtual members to the object for the view. For example, any JavaScript object is
 expected to have an implicit __proto__ member. Foreign objects, even if they do not have such
 a member, are interpreted as if they have.
 <li>There are languages where all scalar values are also vectors. In such a case the array
 element trait may be added using the language wrapper to such values.
 </ul>
 <p>
 The default implementation returns <code>null</code>. If <code>null</code> is returned then
 the default language view will be used. The default language view wraps the value and returns
 the current language as their associated language. With the default view wrapper all interop
 library messages will be forwarded to the delegate value.
 <p>
 This following example shows a simplified language view. For a full implementation including
 an example of metaobjects can be found in the Truffle examples language "SimpleLanguage".

 <pre>
 &#64;ExportLibrary(value = InteropLibrary.class, delegateTo = "delegate")
 final class ExampleLanguageView implements TruffleObject {

     protected final Object delegate;

     ExampleLanguageView(Object delegate) {
         this.delegate = delegate;
     }

     &#64;ExportMessage
     boolean hasLanguage() {
         return true;
     }

     &#64;ExportMessage
     Class&lt;? extends TruffleLanguage&lt;?&gt;&gt; getLanguage() {
         return MyLanguage.class;
     }

     &#64;ExportMessage
     Object toDisplayString(boolean allowSideEffects,
                     &#64;CachedLibrary("this.delegate") InteropLibrary dLib) {
         try {
             if (dLib.isString(this.delegate)) {
                 return dLib.asString(this.delegate);
             } else if (dLib.isBoolean(this.delegate)) {
                 return dLib.asBoolean(this.delegate) ? "TRUE" : "FALSE";
             } else if (dLib.fitsInLong(this.delegate)) {
                 return longToString(dLib.asLong(this.delegate));
             } else {
                 // full list truncated for this language
                 return "Unsupported value";
             }
         } catch (UnsupportedMessageException e) {
             CompilerDirectives.transferToInterpreter();
             throw new AssertionError(e);
         }
     }

     &#64;TruffleBoundary
     private static String longToString(long value) {
         return String.valueOf(value);
     }

     &#64;ExportMessage
     boolean hasMetaObject(@CachedLibrary("this.delegate") InteropLibrary dLib) {
         return dLib.isString(this.delegate)//
                         || dLib.fitsInLong(this.delegate)//
                         || dLib.isBoolean(this.delegate);
     }

     &#64;ExportMessage
     Object getMetaObject(@CachedLibrary("this.delegate") InteropLibrary dLib)
                     throws UnsupportedMessageException {
         if (dLib.isString(this.delegate)) {
             return MyMetaObject.PRIMITIVE_STRING;
         } else if (dLib.isBoolean(this.delegate)) {
             return MyMetaObject.PRIMITIVE_LONG;
         } else if (dLib.fitsInLong(this.delegate)) {
             return MyMetaObject.PRIMITIVE_BOOLEAN;
         } else {
             // no associable metaobject
             throw UnsupportedMessageException.create();
         }
     }
 }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - the current context.</dd>
<dd><code>value</code> - the value</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>20.1</dd>
</dl>
</li>
</ul>
<a name="createContextLocal-com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createContextLocal</h4>
<pre>protected final&nbsp;&lt;T&gt;&nbsp;<a href="../../../../com/oracle/truffle/api/ContextLocal.html" title="class in com.oracle.truffle.api">ContextLocal</a>&lt;T&gt;&nbsp;createContextLocal(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextLocalFactory</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,T&gt;&nbsp;factory)</pre>
<div class="block">Creates a new context local reference for this Truffle language. Context locals for languages
 allow to store additional top-level values for each context besides the language context. The
 advantage of context locals compared to storing the value in a field of the language context
 is that reading a context local requires one indirection less. It is recommended to use
 context locals for languages only if the read is critical for performance.
 <p>
 Context local references must be created during the invocation in the <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>
 constructor. Calling this method at a later point in time will throw an
 <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>. For each registered <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> subclass it is
 required to always produce the same number of context local references. The values produced
 by the factory must not be <code>null</code> and use a stable exact value type for each
 instance of a registered language class. If the return value of the factory is not stable or
 <code>null</code> then an <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> is thrown. These restrictions allow
 the Truffle runtime to read the value more efficiently.
 <p>
 Usage example:

 <pre>
 &#64;TruffleLanguage.Registration(id = "example", name = "ExampleLanguage")
 public final class ExampleLanguage extends TruffleLanguage<Env> {

     final ContextLocal<ExampleLocal> contextLocal = createContextLocal(ExampleLocal::new);

     &#64;Override
     protected Env createContext(Env env) {
         return env;
     }

     &#64;Override
     protected CallTarget parse(ParsingRequest request) throws Exception {
         return new RootNode(this) {
             &#64;Override
             public Object execute(VirtualFrame frame) {
                 // fast read
                 ExampleLocal local = contextLocal.get();
                 // access local
                 return "";
             }
         }.getCallTarget();
     }

     static final class ExampleLocal {

         final Env env;

         ExampleLocal(Env env) {
             this.env = env;
         }

     }
 }
 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>20.3</dd>
</dl>
</li>
</ul>
<a name="createContextThreadLocal-com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createContextThreadLocal</h4>
<pre>protected final&nbsp;&lt;T&gt;&nbsp;<a href="../../../../com/oracle/truffle/api/ContextThreadLocal.html" title="class in com.oracle.truffle.api">ContextThreadLocal</a>&lt;T&gt;&nbsp;createContextThreadLocal(<a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextThreadLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextThreadLocalFactory</a>&lt;<a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,T&gt;&nbsp;factory)</pre>
<div class="block">Creates a new context thread local reference for this Truffle language. Context thread locals
 for languages allow storing additional top-level values for each context and thread. The
 factory may be invoked on any thread other than the thread of the context thread local value.
 <p>
 Context thread local references must be created during the invocation in the
 <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> constructor. Calling this method at a later point in time will throw
 an <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>. For each registered <a href="../../../../com/oracle/truffle/api/TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> subclass it is
 required to always produce the same number of context thread local references. The values
 produced by the factory must not be <code>null</code> and use a stable exact value type for
 each instance of a registered language class. If the return value of the factory is not
 stable or <code>null</code> then an <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> is thrown. These
 restrictions allow the Truffle runtime to read the value more efficiently.
 <p>
 Context thread locals should not contain a strong reference to the provided thread. Use a
 weak reference instance for that purpose.
 <p>
 Usage example:

 <pre>
 &#64;TruffleLanguage.Registration(id = "example", name = "ExampleLanguage")
 public static class ExampleLanguage extends TruffleLanguage<Env> {

     final ContextThreadLocal<ExampleLocal> threadLocal = createContextThreadLocal(ExampleLocal::new);

     &#64;Override
     protected Env createContext(Env env) {
         return env;
     }

     &#64;Override
     protected CallTarget parse(ParsingRequest request) throws Exception {
         return new RootNode(this) {
             &#64;Override
             public Object execute(VirtualFrame frame) {
                 // fast read
                 ExampleLocal local = threadLocal.get();
                 // access local
                 return "";
             }
         }.getCallTarget();
     }

     static final class ExampleLocal {

         final Env env;
         final WeakReference<Thread> thread;

         ExampleLocal(Env env, Thread thread) {
             this.env = env;
             this.thread = new WeakReference<>(thread);
         }

     }
 }
 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>20.3</dd>
</dl>
</li>
</ul>
<a name="getLanguageHome--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLanguageHome</h4>
<pre>protected final&nbsp;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getLanguageHome()</pre>
<div class="block">Returns the home location for this language. This corresponds to the directory in which the
 Jar file is located, if run from a Jar file. For an AOT compiled binary, this corresponds to
 the location of the language files in the default GraalVM distribution layout. executable or
 shared library.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
</dl>
</li>
</ul>
<a name="getAsynchronousStackDepth--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getAsynchronousStackDepth</h4>
<pre>protected final&nbsp;int&nbsp;getAsynchronousStackDepth()</pre>
<div class="block">Get the depth of asynchronous stack. When zero, the language should not sacrifice performance
 to be able to provide asynchronous stack. When the depth is non-zero, the language should
 provide asynchronous stack up to that depth. The language may provide more asynchronous
 frames than this depth if it's of no performance penalty, or if requested by other (e.g.
 language-specific) options. The returned depth may change at any time.
 <p>
 Override <a href="../../../../com/oracle/truffle/api/nodes/RootNode.html#findAsynchronousFrames-com.oracle.truffle.api.frame.Frame-"><code>RootNode.findAsynchronousFrames(Frame)</code></a> to provide the asynchronous stack
 frames.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>20.1.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../com/oracle/truffle/api/nodes/RootNode.html#findAsynchronousFrames-com.oracle.truffle.api.frame.Frame-"><code>RootNode.findAsynchronousFrames(Frame)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>GraalVM Truffle Java API Reference<br>22.3.0-dev</b><br>599e7a860bd1e41ba5d06f8ffd863f4f40f7bca0</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/oracle/truffle/api/TruffleFile.FileTypeDetector.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/oracle/truffle/api/TruffleLanguage.ContextLocalFactory.html" title="interface in com.oracle.truffle.api"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/oracle/truffle/api/TruffleLanguage.html" target="_top">Frames</a></li>
<li><a href="TruffleLanguage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><center>Copyright &copy; 2012, 2022, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</body>
</html>

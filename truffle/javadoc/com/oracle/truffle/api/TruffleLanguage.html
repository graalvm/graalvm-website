<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>TruffleLanguage (GraalVM Truffle Java API Reference)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.oracle.truffle.api, class: TruffleLanguage">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><b>GraalVM Truffle Java API Reference<br>25.0.0-dev</b><br>b381e380c1d4133b466bac2de4a34fe7fe031c0f</div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.oracle.truffle.api</a></div>
<h1 title="Class TruffleLanguage" class="title">Class TruffleLanguage&lt;C&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.oracle.truffle.api.TruffleLanguage&lt;C&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>C</code> - internal state of the language associated with every thread that is executing program
            <a href="#parse(com.oracle.truffle.api.TruffleLanguage.ParsingRequest)"><code>parsed</code></a> by the
            language</dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">TruffleLanguage&lt;C&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">A Truffle language implementation contains all the services a language should provide to make it
 composable with other languages. Implementation classes must be annotated with
 <a href="TruffleLanguage.Registration.html" title="annotation interface in com.oracle.truffle.api"><code>TruffleLanguage.Registration</code></a> in order to be discoverable by the <a href="../../../../org/graalvm/polyglot/package-summary.html">Polyglot
 API</a>.

 <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> subclasses must provide a public default constructor.

 <h4 id="lifecycle-heading">Lifecycle</h4>

 A language implementation becomes available for use by an engine when metadata is added using the
 <a href="TruffleLanguage.Registration.html" title="annotation interface in com.oracle.truffle.api"><code>TruffleLanguage.Registration</code></a> annotation and the implementation's JAR file placed on the host Java Virtual
 Machine's class path.
 <p>
 A newly created engine locates all available language implementations and creates a
 <a href="../../../../org/graalvm/polyglot/Language.html" title="class in org.graalvm.polyglot">descriptor</a> for each. The descriptor holds the
 language's registered metadata, but its execution environment is not initialized until the
 language is needed for code execution. That execution environment remains initialized for the
 lifetime of the engine and is isolated from the environment in any other engine instance.
 <p>
 Language global state can be shared between multiple context instances by saving them in a custom
 field of the <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> subclass. Languages may control sharing between multiple
 contexts using its <a href="TruffleLanguage.Registration.html#contextPolicy()"><code>context policy</code></a>. By default the context
 policy is <a href="TruffleLanguage.ContextPolicy.html#EXCLUSIVE"><code>exclusive</code></a>: each context has its own separate
 TruffleLanguage instance.
 <p>
 If the context policy is more permissive then the implementation needs to manually ensure data
 isolation between the contexts. This means that state associated with a context must not be
 stored in a TruffleLanguage subclass. ASTs and assumptions can be shared across multiple contexts
 if modifying them does not affect language semantics. Languages are strongly discouraged from
 using static mutable state in their languages. Instead <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> instances should
 be used instead to store global state and their sharing should be configured using
 <a href="TruffleLanguage.Registration.html#contextPolicy()"><code>context policy</code></a>.
 <p>
 Whenever an engine is disposed then each initialized language context will be
 <a href="#disposeContext(C)"><code>disposed</code></a>.


 <h4 id="context-policy-and-sharing-heading">Context Policy and Sharing</h4>

 The number of <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> instances per polyglot <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>context</code></a> is configured by the <a href="TruffleLanguage.Registration.html#contextPolicy()"><code>context policy</code></a>. By default an
 <a href="TruffleLanguage.ContextPolicy.html#EXCLUSIVE"><code>exclusive</code></a> <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> instance is created
 for every <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>polyglot context</code></a> or
 <a href="TruffleLanguage.Env.html#newInnerContextBuilder(java.lang.String...)"><code>inner context</code></a>. With policy
 <a href="TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a>, language instances will be reused after a language context was
 <a href="#disposeContext(C)"><code>disposed</code></a>. With policy <a href="TruffleLanguage.ContextPolicy.html#SHARED"><code>shared</code></a>, a language will also be reused if active contexts are not yet disposed. Language
 instances will only be shared or reused if they are
 <a href="#areOptionsCompatible(org.graalvm.options.OptionValues,org.graalvm.options.OptionValues)"><code>compatible</code></a>. Language
 implementations are encouraged to support the most permissive context policy possible. Please see
 the individual <a href="TruffleLanguage.ContextPolicy.html" title="enum class in com.oracle.truffle.api"><code>policies</code></a> for details on the implications on the language
 implementation.
 <p>
 The following illustration shows the cardinalities of the individual components:

 <pre>
  N: unbounded
  P: N for exclusive, 1 for shared context policy
  L: number of installed languages
  I: number of installed instruments

  - 1 : Host VM Processs
   - N : <a href="../../../../org/graalvm/polyglot/Engine.html" title="class in org.graalvm.polyglot">Engine</a>
     - N : <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot">Context</a>
       - L : Language Context
     - P * L : <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>
     - I : <a href="../../../../org/graalvm/polyglot/Instrument.html" title="class in org.graalvm.polyglot">Instrument</a>
       - 1 : <a href="instrumentation/TruffleInstrument.html" title="class in com.oracle.truffle.api.instrumentation"><code>TruffleInstrument</code></a>
 </pre>

 For more information on sharing between multiple contexts please see <a href="TruffleLanguage.ContextPolicy.html" title="enum class in com.oracle.truffle.api"><code>TruffleLanguage.ContextPolicy</code></a>.

 <h4 id="parse-caching-heading">Parse Caching</h4>

 The result of the <a href="#parse(com.oracle.truffle.api.TruffleLanguage.ParsingRequest)"><code>parsing request</code></a> is cached per language instance,
 <a href="TruffleLanguage.ParsingRequest.html#getSource()"><code>source</code></a>, <a href="TruffleLanguage.ParsingRequest.html#getArgumentNames()"><code>argument
 names</code></a> and environment <a href="TruffleLanguage.Env.html#getOptions()"><code>options</code></a>. The scope of the caching is influenced
 by the <a href="TruffleLanguage.Registration.html#contextPolicy()"><code>context policy</code></a>. Caching may be
 <a href="source/Source.html#isCached()"><code>disabled</code></a> for certain sources. It is enabled for new sources by default.

 <h4 id="language-configuration-heading">Language Configuration</h4>

 On <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>context creation</code></a> each language context is provided with
 information about the environment <a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>environment </code></a>. Language can optionally declare
 <a href="../../../../org/graalvm/polyglot/Context.Builder.html#option(java.lang.String,java.lang.String)"><code>configurable</code></a> options in
 <a href="#getOptionDescriptors()"><code>getOptionDescriptors()</code></a>.

 <h4 id="polyglot-bindings-heading">Polyglot Bindings</h4>

 Language implementations communicate with one another (and with instrumentation-based tools such
 as debuggers) by reading/writing named values into the <a href="TruffleLanguage.Env.html#getPolyglotBindings()"><code>polyglot
 bindings</code></a>. This bindings object is used to implement guest language export/import statements used
 for <em>language interoperation</em>.
 <p>
 A language implementation can also <a href="TruffleLanguage.Env.html#importSymbol(java.lang.String)">import</a> or
 <a href="TruffleLanguage.Env.html#exportSymbol(java.lang.String,java.lang.Object)">export</a> a global symbol by name. The scope may be
 accessed from multiple threads at the same time. Existing keys are overwritten.

 <h4 id="configuration-vs-initialization-heading">Configuration vs. Initialization</h4>

 To ensure that a Truffle language can be used in a language-agnostic way, the implementation
 should be designed to decouple its configuration and initialization from language specifics as
 much as possible. One aspect of this is the initialization and start of execution via the
 <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>, which should be designed in a generic way.
 Language-specific entry points, for instance to emulate the command-line interface of an existing
 implementation, should be handled externally.

 <h4 id="multi-threading-heading">Multi-threading</h4>

 There are two kinds of threads that access contexts of Truffle guest languages:
 <ul>
 <li>Internal threads are <a href="TruffleLanguage.Env.html#newTruffleThreadBuilder(java.lang.Runnable)"><code>created</code></a> and managed by a
 language for a context. All internally created threads need to be stopped when the context is
 <a href="#disposeContext(C)"><code>disposed</code></a>.
 <li>External threads are created and managed by the host application / language launcher. The
 host application is allowed to use language contexts from changing threads, sequentially or at
 the same time if the language <a href="#isThreadAccessAllowed(java.lang.Thread,boolean)"><code>allows</code></a> it.
 </ul>
 <p>
 By default every <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>context</code></a> only allows access from one thread at the
 same time. Therefore if the context is tried to be accessed from multiple threads at the same
 time the access will fail. Languages that want to allow multi-threaded access to a context may
 override <a href="#isThreadAccessAllowed(java.lang.Thread,boolean)"><code>isThreadAccessAllowed(Thread, boolean)</code></a> and return <code>true</code> also for
 multi-threaded accesses. Initialization actions for multi-threaded access can be performed by
 overriding <a href="#initializeMultiThreading(C)"><code>initializeMultiThreading(Object)</code></a>. Threads are
 <a href="#initializeThread(C,java.lang.Thread)"><code>initialized</code></a> and <a href="#disposeContext(C)"><code>disposed</code></a> before and after use with a context. Languages may
 <a href="TruffleLanguage.Env.html#newTruffleThreadBuilder(java.lang.Runnable)"><code>create</code></a> new threads if the environment
 <a href="TruffleLanguage.Env.html#isCreateThreadAllowed()"><code>allows</code></a> it.
 <p>
 In addition to the two kinds of threads described above, there are
 <a href="TruffleLanguage.Env.html#createSystemThread(java.lang.Runnable,java.lang.ThreadGroup)"><code>system threads</code></a> designed to process language
 internal tasks in the background. They do not require the <a href="TruffleLanguage.Env.html#isCreateThreadAllowed()"><code>creation permit</code></a>, but they must not enter any language context.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.8 or earlier</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>for embedding of Truffle languages in Java host applications.</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TruffleLanguage.ContextLocalFactory.html" class="type-name-link" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextLocalFactory</a>&lt;<a href="TruffleLanguage.ContextLocalFactory.html" title="type parameter in TruffleLanguage.ContextLocalFactory">C</a>,<wbr><a href="TruffleLanguage.ContextLocalFactory.html" title="type parameter in TruffleLanguage.ContextLocalFactory">T</a>&gt;</code></div>
<div class="col-last even-row-color">
<div class="block">Context local factory for Truffle languages.</div>
</div>
<div class="col-first odd-row-color"><code>protected static final class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="TruffleLanguage.ContextLocalProvider.html" class="type-name-link" title="class in com.oracle.truffle.api">TruffleLanguage.ContextLocalProvider</a>&lt;<a href="TruffleLanguage.ContextLocalProvider.html" title="type parameter in TruffleLanguage.ContextLocalProvider">C</a>&gt;</code></div>
<div class="col-last odd-row-color">
<div class="block">Provider for creating context local and context thread local references.</div>
</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TruffleLanguage.ContextPolicy.html" class="type-name-link" title="enum class in com.oracle.truffle.api">TruffleLanguage.ContextPolicy</a></code></div>
<div class="col-last even-row-color">
<div class="block">Defines the supported policy for reusing <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>languages</code></a> per context.</div>
</div>
<div class="col-first odd-row-color"><code>static class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="TruffleLanguage.ContextReference.html" class="type-name-link" title="class in com.oracle.truffle.api">TruffleLanguage.ContextReference</a>&lt;<a href="TruffleLanguage.ContextReference.html" title="type parameter in TruffleLanguage.ContextReference">C</a>&gt;</code></div>
<div class="col-last odd-row-color">
<div class="block">Represents a reference to the current context.</div>
</div>
<div class="col-first even-row-color"><code>protected static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TruffleLanguage.ContextThreadLocalFactory.html" class="type-name-link" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextThreadLocalFactory</a>&lt;<a href="TruffleLanguage.ContextThreadLocalFactory.html" title="type parameter in TruffleLanguage.ContextThreadLocalFactory">C</a>,<wbr><a href="TruffleLanguage.ContextThreadLocalFactory.html" title="type parameter in TruffleLanguage.ContextThreadLocalFactory">T</a>&gt;</code></div>
<div class="col-last even-row-color">
<div class="block">Context thread local factory for Truffle languages.</div>
</div>
<div class="col-first odd-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="TruffleLanguage.Env.html" class="type-name-link" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Represents execution environment of the <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a>.</div>
</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TruffleLanguage.ExitMode.html" class="type-name-link" title="enum class in com.oracle.truffle.api">TruffleLanguage.ExitMode</a></code></div>
<div class="col-last even-row-color">
<div class="block">Mode of exit operation.</div>
</div>
<div class="col-first odd-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="TruffleLanguage.InlineParsingRequest.html" class="type-name-link" title="class in com.oracle.truffle.api">TruffleLanguage.InlineParsingRequest</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Request for inline parsing.</div>
</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TruffleLanguage.LanguageReference.html" class="type-name-link" title="class in com.oracle.truffle.api">TruffleLanguage.LanguageReference</a>&lt;<a href="TruffleLanguage.LanguageReference.html" title="type parameter in TruffleLanguage.LanguageReference">L</a> extends <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&gt;</code></div>
<div class="col-last even-row-color">
<div class="block">Represents a reference to the current language instance.</div>
</div>
<div class="col-first odd-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="TruffleLanguage.ParsingRequest.html" class="type-name-link" title="class in com.oracle.truffle.api">TruffleLanguage.ParsingRequest</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Request for parsing.</div>
</div>
<div class="col-first even-row-color"><code>static @interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TruffleLanguage.Registration.html" class="type-name-link" title="annotation interface in com.oracle.truffle.api">TruffleLanguage.Registration</a></code></div>
<div class="col-last even-row-color">
<div class="block">The annotation to use to register your language to the <a href="../../../../org/graalvm/polyglot/package-summary.html"><code>Polyglot
 API</code></a>.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected final <a href="TruffleLanguage.ContextLocalProvider.html" title="class in com.oracle.truffle.api">TruffleLanguage.ContextLocalProvider</a><wbr>&lt;<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#locals" class="member-name-link">locals</a></code></div>
<div class="col-last even-row-color">
<div class="block">Provider for creating context local and context thread local references.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">TruffleLanguage</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor to be called by subclasses.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button><button id="method-summary-table-tab6" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab6', 3)" class="table-tab">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#areOptionsCompatible(org.graalvm.options.OptionValues,org.graalvm.options.OptionValues)" class="member-name-link">areOptionsCompatible</a><wbr>(<a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;firstOptions,
 <a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;newOptions)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns <code>true</code> if the combination of two sets of options allow to
 <a href="TruffleLanguage.ContextPolicy.html#SHARED"><code>share</code></a> or <a href="TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a> the same language
 instance, else <code>false</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)" class="member-name-link">createContext</a><wbr>(<a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;env)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates internal representation of the executing context suitable for given environment.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code>protected final &lt;T&gt;&nbsp;<a href="ContextLocal.html" title="class in com.oracle.truffle.api">ContextLocal</a><wbr>&lt;T&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#createContextLocal(com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory)" class="member-name-link">createContextLocal</a><wbr>(<a href="TruffleLanguage.ContextLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextLocalFactory</a>&lt;<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,<wbr>T&gt;&nbsp;factory)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 23.1, use
             <a href="TruffleLanguage.ContextLocalProvider.html#createContextLocal(com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextLocal(TruffleLanguage.ContextLocalFactory)</code></a>
             instead</div>
</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code>protected final &lt;T&gt;&nbsp;<a href="ContextThreadLocal.html" title="class in com.oracle.truffle.api">ContextThreadLocal</a><wbr>&lt;T&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#createContextThreadLocal(com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory)" class="member-name-link">createContextThreadLocal</a><wbr>(<a href="TruffleLanguage.ContextThreadLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextThreadLocalFactory</a>&lt;<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,<wbr>T&gt;&nbsp;factory)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 23.1, use
             <a href="TruffleLanguage.ContextLocalProvider.html#createContextThreadLocal(com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextThreadLocal(TruffleLanguage.ContextThreadLocalFactory)</code></a>
             instead</div>
</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#disposeContext(C)" class="member-name-link">disposeContext</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Disposes the context created by
 <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#disposeThread(C,java.lang.Thread)" class="member-name-link">disposeThread</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked the last time code will be executed for this thread and context.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#exitContext(C,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)" class="member-name-link">exitContext</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="TruffleLanguage.ExitMode.html" title="enum class in com.oracle.truffle.api">TruffleLanguage.ExitMode</a>&nbsp;exitMode,
 int&nbsp;exitCode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Performs language exit event actions that are necessary before language contexts are
 <a href="#finalizeContext(C)"><code>finalized</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#finalizeContext(C)" class="member-name-link">finalizeContext</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Performs language context finalization actions that are necessary before language contexts
 are <a href="#disposeContext(C)"><code>disposed</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#finalizeThread(C,java.lang.Thread)" class="member-name-link">finalizeThread</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The behavior of this notification is different for
 <a href="TruffleLanguage.Env.html#newTruffleThreadBuilder(java.lang.Runnable)"><code>polyglot threads</code></a> and embedder threads.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAsynchronousStackDepth()" class="member-name-link">getAsynchronousStackDepth</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the depth of asynchronous stack.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6"><code>protected static &lt;C,<wbr>
T extends <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&lt;C&gt;&gt;<br>C</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#getCurrentContext(java.lang.Class)" class="member-name-link">getCurrentContext</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;languageClass)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 21.3, use static final context references instead.</div>
</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6"><code>protected static &lt;T extends <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&lt;?&gt;&gt;<br>T</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#getCurrentLanguage(java.lang.Class)" class="member-name-link">getCurrentLanguage</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;languageClass)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 21.3, use static final context references instead.</div>
</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLanguageHome()" class="member-name-link">getLanguageHome</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the home location for this language or <code>null</code> if the language home is not set.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLanguageView(C,java.lang.Object)" class="member-name-link">getLanguageView</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;value)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Wraps the value to provide language-specific information for primitive and foreign values.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../../org/graalvm/options/OptionDescriptors.html" title="interface in org.graalvm.options">OptionDescriptors</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getOptionDescriptors()" class="member-name-link">getOptionDescriptors</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a set of option descriptors that are supported by this language.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getScope(C)" class="member-name-link">getScope</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a top scope of the language, if any.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../../org/graalvm/options/OptionDescriptors.html" title="interface in org.graalvm.options">OptionDescriptors</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSourceOptionDescriptors()" class="member-name-link">getSourceOptionDescriptors</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a set of source option descriptors that are supported by this language.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeContext(C)" class="member-name-link">initializeContext</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform any complex initialization.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeMultipleContexts()" class="member-name-link">initializeMultipleContexts</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Initializes this language instance for use with multiple contexts.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeMultiThreading(C)" class="member-name-link">initializeMultiThreading</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked before the context is accessed from multiple threads at the same time.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initializeThread(C,java.lang.Thread)" class="member-name-link">initializeThread</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked before a context is accessed from a new thread.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isThreadAccessAllowed(java.lang.Thread,boolean)" class="member-name-link">isThreadAccessAllowed</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread,
 boolean&nbsp;singleThreaded)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns <code>true</code> if code of this language is allowed to be executed on this thread.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isVisible(C,java.lang.Object)" class="member-name-link">isVisible</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;value)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Decides whether the result of evaluating an interactive source should be printed to stdout.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="nodes/ExecutableNode.html" title="class in com.oracle.truffle.api.nodes">ExecutableNode</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#parse(com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest)" class="member-name-link">parse</a><wbr>(<a href="TruffleLanguage.InlineParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.InlineParsingRequest</a>&nbsp;request)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Parses the <a href="TruffleLanguage.InlineParsingRequest.html#getSource()"><code>provided source snippet</code></a> at the
 <a href="TruffleLanguage.InlineParsingRequest.html#getLocation()"><code>provided location</code></a> and generates its appropriate
 AST representation.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="CallTarget.html" title="interface in com.oracle.truffle.api">CallTarget</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#parse(com.oracle.truffle.api.TruffleLanguage.ParsingRequest)" class="member-name-link">parse</a><wbr>(<a href="TruffleLanguage.ParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.ParsingRequest</a>&nbsp;request)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Parses the <a href="TruffleLanguage.ParsingRequest.html#getSource()"><code>provided source</code></a> and generates its appropriate
 AST representation.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#patchContext(C,com.oracle.truffle.api.TruffleLanguage.Env)" class="member-name-link">patchContext</a><wbr>(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;newEnv)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Notifies the language with pre-initialized context about <a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> change.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="locals">
<h3>locals</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="TruffleLanguage.ContextLocalProvider.html" title="class in com.oracle.truffle.api">TruffleLanguage.ContextLocalProvider</a>&lt;<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&gt;</span>&nbsp;<span class="element-name">locals</span></div>
<div class="block">Provider for creating context local and context thread local references.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>23.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="TruffleLanguage.ContextLocalProvider.html#createContextLocal(com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextLocal(TruffleLanguage.ContextLocalFactory)</code></a></li>
<li><a href="TruffleLanguage.ContextLocalProvider.html#createContextThreadLocal(com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextThreadLocal(TruffleLanguage.ContextThreadLocalFactory)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>TruffleLanguage</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name">TruffleLanguage</span>()</div>
<div class="block">Constructor to be called by subclasses. Language should not create any <a href="nodes/RootNode.html" title="class in com.oracle.truffle.api.nodes"><code>RootNode</code></a>s in
 its constructor. The RootNodes created in the language constructor are not associated with a
 Context and they don't respect Context's engine options. The needed RootNodes can be created
 in the <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(Env)</code></a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.8 or earlier</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="areOptionsCompatible(org.graalvm.options.OptionValues,org.graalvm.options.OptionValues)">
<h3>areOptionsCompatible</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">areOptionsCompatible</span><wbr><span class="parameters">(<a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;firstOptions,
 <a href="../../../../org/graalvm/options/OptionValues.html" title="interface in org.graalvm.options">OptionValues</a>&nbsp;newOptions)</span></div>
<div class="block">Returns <code>true</code> if the combination of two sets of options allow to
 <a href="TruffleLanguage.ContextPolicy.html#SHARED"><code>share</code></a> or <a href="TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a> the same language
 instance, else <code>false</code>. If options are incompatible then a new language instance
 will be created for a new context. The default implementation returns <code>true</code>.
 <p>
 If the context policy of a language is set to <a href="TruffleLanguage.ContextPolicy.html#EXCLUSIVE"><code>exclusive</code></a>
 (default behavior) then <a href="#areOptionsCompatible(org.graalvm.options.OptionValues,org.graalvm.options.OptionValues)"><code>areOptionsCompatible(OptionValues, OptionValues)</code></a> will never
 be invoked as <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage</code></a> instances will not be shared for multiple contexts. For
 the other context policies <a href="TruffleLanguage.ContextPolicy.html#REUSE"><code>reuse</code></a> and <a href="TruffleLanguage.ContextPolicy.html#SHARED"><code>shared</code></a> this method can be used to further restrict the reuse of language instances.
 Compatibility influences <a href="#parse(com.oracle.truffle.api.TruffleLanguage.ParsingRequest)"><code>parse caching</code></a> because it uses the
 <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> instance as a key.
 <p>
 Example usage of areOptionsCompatible if sharing of the language instances and parse caching
 should be restricted by the script version option:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">class CompatibleLanguage extends TruffleLanguage&lt;Env&gt; {

    @Option(help = "", category = OptionCategory.USER)
    static final OptionKey&lt;String&gt; ScriptVersion
                = new OptionKey&lt;&gt;("ECMA2017");

    @Override
    protected boolean areOptionsCompatible(OptionValues firstOptions,
                    OptionValues newOptions) {
        return firstOptions.get(ScriptVersion).
                        equals(newOptions.get(ScriptVersion));
    }

    @Override
    protected OptionDescriptors getOptionDescriptors() {
        return new CompatibleLanguageOptionDescriptors();
    }
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>firstOptions</code> - the options used to create the first context, never <code>null</code></dd>
<dd><code>newOptions</code> - the options that will be used for the new context, never <code>null</code></dd>
<dt>Since:</dt>
<dd>19.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="TruffleLanguage.ContextPolicy.html" title="enum class in com.oracle.truffle.api"><code>TruffleLanguage.ContextPolicy</code></a></li>
<li><a href="#parse(com.oracle.truffle.api.TruffleLanguage.ParsingRequest)"><code>parse(ParsingRequest)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createContext(com.oracle.truffle.api.TruffleLanguage.Env)">
<h3>createContext</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a></span>&nbsp;<span class="element-name">createContext</span><wbr><span class="parameters">(<a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;env)</span></div>
<div class="block">Creates internal representation of the executing context suitable for given environment. Each
 time the <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> is used by a new
 <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a>, the system calls this method to let the
 <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> prepare for <em>execution</em>. The returned execution
 context is completely language specific; it is however expected it will contain reference to
 here-in provided <code>env</code> and adjust itself according to parameters provided by the
 <code>env</code> object.
 <p>
 The context created by this method is accessible using <a href="TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api"><code>context
 references</code></a>. An <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> is thrown if the context is tried to be
 accessed while the createContext method is executed.
 <p>
 This method shouldn't perform any complex operations. The runtime system is just being
 initialized and for example making
 <a href="TruffleLanguage.Env.html#parsePublic(com.oracle.truffle.api.source.Source,java.lang.String...)"><code>calls into
 other languages</code></a> and assuming your language is already initialized and others can see it
 would be wrong - until you return from this method, the initialization isn't over. The same
 is true for instrumentation, the instruments cannot receive any meta data about code executed
 during context creation. Should there be a need to perform complex initialization, do it by
 overriding the <a href="#initializeContext(C)"><code>initializeContext(java.lang.Object)</code></a> method.
 <p>
 Additional services provided by the language must be
 <a href="TruffleLanguage.Env.html#registerService(java.lang.Object)"><code>registered</code></a> by this method otherwise
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> is thrown.
 <p>
 May return <code>null</code> if the language does not need any per-<a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot">context</a>
 state. Otherwise it should return a new object instance every time it is called.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>env</code> - the environment the language is supposed to operate in</dd>
<dt>Returns:</dt>
<dd>internal data of the language in given environment or <code>null</code></dd>
<dt>Since:</dt>
<dd>0.8 or earlier</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeContext(C)">
<h3 id="initializeContext(java.lang.Object)">initializeContext</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeContext</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</span>
                          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Perform any complex initialization. The
 <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a> factory method shouldn't
 do any complex operations. Just create the instance of the context, let the runtime system
 register it properly. Should there be a need to perform complex initialization, override this
 method and let the runtime call it <em>later</em> to finish any <em>post initialization</em>
 actions. Example: 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">class PostInitLanguage extends TruffleLanguage&lt;Context&gt; {
    @Override
    protected Context createContext(Env env) {
        // "quickly" create the context
        return new Context(env);
    }

    @Override
    protected void initializeContext(Context context) throws IOException {
        // called "later" to finish the initialization
        // for example call into another language
        Source source = Source.newBuilder("js",
                            "function(x, y) x * y",
                            "mul.js").build();
        context.mul = context.env.parsePublic(source);
    }
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the context created by
            <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if something goes wrong</dd>
<dt>Since:</dt>
<dd>0.17</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="finalizeContext(C)">
<h3 id="finalizeContext(java.lang.Object)">finalizeContext</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">finalizeContext</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</span></div>
<div class="block">Performs language context finalization actions that are necessary before language contexts
 are <a href="#disposeContext(C)"><code>disposed</code></a>. However, in case the underlying polyglot
 context is being cancelled or hard-exited, <a href="#disposeContext(C)"><code>disposeContext(Object)</code></a> is called even if
 <a href="#finalizeContext(C)"><code>finalizeContext(Object)</code></a> throws an
 <a href="exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or a <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a>
 cancel or exit exception.
 <p>
 For the hard exit a language is supposed to run its finalization actions that require running
 guest code in <a href="#exitContext(C,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)"><code>exitContext(Object, ExitMode, int)</code></a>, but please note that after
 <a href="#exitContext(C,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)"><code>exitContext(Object, ExitMode, int)</code></a> runs for a language, the language can still be
 invoked from <a href="#exitContext(C,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)"><code>exitContext(Object, ExitMode, int)</code></a> for a different language. Therefore,
 for instance, finalization for standard streams should both flush and set them to unbuffered
 mode at the end of exitContext, so that running guest code is not required to dispose the
 streams after that point.
 <p>
 Context finalization is invoked even if a context was cancelled. In such a case, if guest
 code would run as part of the finalization, it would be cancelled at the next polled
 <a href="TruffleSafepoint.html" title="class in com.oracle.truffle.api"><code>safepoint</code></a>. If there is guest code that always needs to run even if
 cancelled, e.g. to prevent resource leakage, use
 <a href="TruffleSafepoint.html#setAllowActions(boolean)"><code>TruffleSafepoint.setAllowActions(boolean)</code></a> to temporarily disable safepoints while
 executing that code.
 <p>
 All installed languages must remain usable after finalization. The finalization order can be
 influenced by specifying <a href="TruffleLanguage.Registration.html#dependentLanguages()"><code>language dependencies</code></a>. By
 default internal languages are finalized last, otherwise, the default order is unspecified
 but deterministic.
 <p>
 While the finalization code is run, other language contexts may become initialized. In such a
 case, the finalization order may be non-deterministic and/or not respect the order specified
 by language dependencies.
 <p>
 All threads <a href="TruffleLanguage.Env.html#newTruffleThreadBuilder(java.lang.Runnable)"><code>created</code></a> by the language must be
 stopped and joined during finalizeContext. The languages are responsible for fulfilling that
 contract, otherwise, an <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AssertionError.html" title="class or interface in java.lang" class="external-link"><code>AssertionError</code></a> is thrown. It's not safe to use the
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ExecutorService.html#awaitTermination(long,java.util.concurrent.TimeUnit)" title="class or interface in java.util.concurrent" class="external-link"><code>ExecutorService.awaitTermination(long, java.util.concurrent.TimeUnit)</code></a> to detect
 Thread termination as the polyglot thread may be cancelled before executing the executor
 worker.
 <p>
 During finalizeContext, all unclosed inner contexts
 <a href="TruffleLanguage.Env.html#newInnerContextBuilder(java.lang.String...)"><code>created</code></a> by the language must be left on all
 threads where the contexts are still active. No active inner context is allowed after
 <a href="#finalizeContext(C)"><code>finalizeContext(Object)</code></a> returns, otherwise it is an internal error.
 <p>
 Non-active inner contexts <a href="TruffleLanguage.Env.html#newInnerContextBuilder(java.lang.String...)"><code>created</code></a> by the
 language that are still unclosed after <a href="#finalizeContext(C)"><code>finalizeContext(Object)</code></a> returns are
 automatically closed by Truffle.
 <p>
 Typical implementation looks like:

 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">class AsyncThreadLanguage extends TruffleLanguage&lt;Context&gt; {

    @Override
    protected Context createContext(Env env) {
        return new Context(env);
    }

    @Override
    protected boolean isThreadAccessAllowed(Thread thread,
                    boolean singleThreaded) {
        // allow access from any thread instead of just one
        return true;
    }

    @Override
    protected void initializeContext(Context context) throws Exception {
        // create and start a Thread for the asynchronous task
        // remeber the Thread reference to stop and join it in
        // the finalizeContext
        Thread t = context.env.newTruffleThreadBuilder(new Runnable() {
            @Override
            public void run() {
                // asynchronous task
            }
        }).build();
        context.startedThreads.add(t);
        t.start();
    }

    @Override
    protected void finalizeContext(Context context) {
        // stop and join all the created Threads
        boolean interrupted = false;
        for (int i = 0; i &lt; context.startedThreads.size();) {
            Thread threadToJoin  = context.startedThreads.get(i);
            try {
                if (threadToJoin != Thread.currentThread()) {
                    threadToJoin.interrupt();
                    threadToJoin.join();
                }
                i++;
            } catch (InterruptedException ie) {
                interrupted = true;
            }
        }
        if (interrupted) {
            Thread.currentThread().interrupt();
        }
    }
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the context created by
            <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a></dd>
<dt>Since:</dt>
<dd>0.30</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="TruffleLanguage.Registration.html#dependentLanguages()"><code>for specifying language dependencies.</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="exitContext(C,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)">
<h3 id="exitContext(java.lang.Object,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)">exitContext</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">exitContext</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="TruffleLanguage.ExitMode.html" title="enum class in com.oracle.truffle.api">TruffleLanguage.ExitMode</a>&nbsp;exitMode,
 int&nbsp;exitCode)</span></div>
<div class="block">Performs language exit event actions that are necessary before language contexts are
 <a href="#finalizeContext(C)"><code>finalized</code></a>. However, in case the underlying polyglot context
 is being cancelled, <a href="#exitContext(C,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)"><code>exit notifications</code></a> are not
 executed. Also, for <a href="TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a>, <a href="#finalizeContext(C)"><code>finalizeContext(Object)</code></a> is
 called even if <a href="#exitContext(C,com.oracle.truffle.api.TruffleLanguage.ExitMode,int)"><code>exitContext(Object, ExitMode, int)</code></a> throws an
 <a href="exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or a <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a>
 cancel or exit exception. All initialized language contexts must remain usable after exit
 notifications. In case a <a href="exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or
 the <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a> exit exception is thrown during an <a href="TruffleLanguage.ExitMode.html#HARD"><code>hard exit
 notification</code></a>, it is just logged and otherwise ignored and the notification process continues
 with the next language in order. In case the <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a> cancel exception is thrown,
 it means the context is being cancelled in which case the exit notification process
 immediately stops. The exit notification order can be influenced by specifying
 <a href="TruffleLanguage.Registration.html#dependentLanguages()"><code>language dependencies</code></a> - The exit notification for
 language A that depends on language B is executed before the exit notification for language
 B. By default, notifications for internal languages are executed last, otherwise, the default
 order is unspecified but deterministic.
 <p>
 During <a href="TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a> notification, a language is supposed to run its
 finalization actions that require running guest code instead of running them in
 <a href="#finalizeContext(C)"><code>finalizeContext(Object)</code></a>.
 <p>
 While the exit notification code is run, all languages remain fully functional. Also, other
 language contexts may become initialized. In such a case, the notification order may be
 non-deterministic and/or not respect the order specified by language dependencies.
 <p>
 In case <a href="TruffleContext.html#closeExited(com.oracle.truffle.api.nodes.Node,int)"><code>TruffleContext.closeExited(Node, int)</code></a> is called during a
 <a href="TruffleLanguage.ExitMode.html#NATURAL"><code>natural exit</code></a> notification, natural exit notifications for remaining
 language contexts are not executed and the <a href="TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a> process starts by
 executing <a href="TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a> notifications. In case
 <a href="TruffleContext.html#closeExited(com.oracle.truffle.api.nodes.Node,int)"><code>TruffleContext.closeExited(Node, int)</code></a> is called during a <a href="TruffleLanguage.ExitMode.html#HARD"><code>hard
 exit</code></a> notification, it just throws the special <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a> exit exception, which is
 then just logged as described above.
 <p>
 In case the underlying polyglot context is cancelled by e.g.
 <a href="TruffleContext.html#closeCancelled(com.oracle.truffle.api.nodes.Node,java.lang.String)"><code>TruffleContext.closeCancelled(Node, String)</code></a> during exit notifications, guest code
 executed during exit notification is regularly cancelled, i.e., throws the
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a> cancel exception, and the notification process does not continue as
 described above.
 <p>
 In the case of <a href="TruffleLanguage.ExitMode.html#HARD"><code>hard exit</code></a>, if the current context has inner contexts
 that are still active, the execution for them will be stopped as well after all language exit
 notifications are executed for the outer context, but the exit notifications for the inner
 contexts are not automatically executed. The language needs to take appropriate action to
 make sure inner contexts are exited properly.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - language context.</dd>
<dd><code>exitMode</code> - mode of exit.</dd>
<dd><code>exitCode</code> - exit code that was specified for exit.</dd>
<dt>Since:</dt>
<dd>22.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="https://github.com/oracle/graal/blob/master/truffle/docs/Exit.md">Context
      Exit</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeMultipleContexts()">
<h3>initializeMultipleContexts</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeMultipleContexts</span>()</div>
<div class="block">Initializes this language instance for use with multiple contexts. Whether a language
 instance supports being used for multiple contexts depends on its
 <a href="TruffleLanguage.Registration.html#contextPolicy()"><code>context policy</code></a>.
 <p>
 For any sharing of a language instance for multiple language contexts to take place a context
 must be created with sharing enabled. By default sharing is disabled for polyglot contexts.
 Sharing can be enabled by specifying an <a href="../../../../org/graalvm/polyglot/Context.Builder.html#engine(org.graalvm.polyglot.Engine)"><code>explicit engine</code></a> or
 using an option. Before any language is used for sharing
 <a href="#initializeMultipleContexts()"><code>initializeMultipleContexts()</code></a> is invoked. It is guaranteed that sharing between
 multiple contexts is <a href="#initializeMultipleContexts()"><code>initialized</code></a> before any language
 context is <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>created</code></a>.
 <p>
 A language may use this method to configure itself to use context independent speculations
 only. Since Truffle nodes are never shared between multiple language instances it is
 sufficient to keep track of whether sharing is enabled using a non-volatile boolean field
 instead of an assumption. They field may also be annotated with <a href="CompilerDirectives.CompilationFinal.html" title="annotation interface in com.oracle.truffle.api"><code>CompilerDirectives.CompilationFinal</code></a> as
 it is guaranteed that this method is called prior to any compilation. The following criteria
 should be satisfied when supporting context independent code:
 <ul>
 <li>All speculation on runtime value identity must be disabled with multiple contexts
 initialized, as they will lead to a guaranteed deoptimization when used with a second
 context.
 <li>Function inline caches should be modified and implemented as a two-level inline cache.
 The first level speculates on the function instance's identity and the second level on the
 underlying CallTarget instance. The first level cache must be disabled if multiple contexts
 are initialized, as this would unnecessarily cause deoptimization.
 <li>The DynamicObject root Shape instance should be stored in the language instance instead
 of the language context. Otherwise, any inline cache on shapes will not stabilize and
 ultimately end up in the generic state.
 <li>All Node implementations must not store context-dependent data structures or
 context-dependent runtime values.
 <li>All assumption instances should be stored in the language instance instead of the
 context. With multiple contexts initialized, the context instance read using context
 references may no longer be a constant. In this case any assumption read from the context
 would not be folded and they would cause significant runtime performance overhead.
 Assumptions from the language can always be folded by the compiler in both single and
 multiple context mode.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="TruffleLanguage.ContextPolicy.html" title="enum class in com.oracle.truffle.api"><code>More information on sharing language instances for multiple contexts.</code></a></li>
<li><a href="#areOptionsCompatible(org.graalvm.options.OptionValues,org.graalvm.options.OptionValues)"><code>Specify option configurations that
      make sharing incompatible.</code></a></li>
<li><a href="TruffleLanguage.ContextPolicy.html" title="enum class in com.oracle.truffle.api"><code>TruffleLanguage.ContextPolicy</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="disposeContext(C)">
<h3 id="disposeContext(java.lang.Object)">disposeContext</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">disposeContext</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</span></div>
<div class="block">Disposes the context created by
 <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a>. A dispose cleans up all
 resources associated with a context. The context may become unusable after it was disposed.
 It is not allowed to run guest language code while disposing a context. Finalization code
 should be run in <a href="#finalizeContext(C)"><code>finalizeContext(Object)</code></a> instead. Finalization will be performed
 prior to context <a href="#disposeContext(C)"><code>disposal</code></a>. However, in case the underlying
 polyglot context is being cancelled, <a href="#disposeContext(C)"><code>disposeContext(Object)</code></a> is called even if
 <a href="#finalizeContext(C)"><code>finalizeContext(Object)</code></a> throws
 <a href="exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> or <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ThreadDeath.html" title="class or interface in java.lang" class="external-link"><code>ThreadDeath</code></a>
 exception..
 <p>
 The disposal order can be influenced by specifying <a href="TruffleLanguage.Registration.html#dependentLanguages()"><code>language dependencies</code></a>. By default internal languages are disposed last, otherwise the
 default order is unspecified but deterministic. During disposal no other language must be
 accessed using the <a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>language environment</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the context created by
            <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a></dd>
<dt>Since:</dt>
<dd>0.8 or earlier</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#finalizeContext(C)"><code>to run finalization code for a context.</code></a></li>
<li><a href="#disposeThread(C,java.lang.Thread)"><code>to perform disposal actions when a thread is no longer
      used.</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="parse(com.oracle.truffle.api.TruffleLanguage.ParsingRequest)">
<h3>parse</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="CallTarget.html" title="interface in com.oracle.truffle.api">CallTarget</a></span>&nbsp;<span class="element-name">parse</span><wbr><span class="parameters">(<a href="TruffleLanguage.ParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.ParsingRequest</a>&nbsp;request)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Parses the <a href="TruffleLanguage.ParsingRequest.html#getSource()"><code>provided source</code></a> and generates its appropriate
 AST representation. The parsing should execute no user code, it should only create the
 <a href="nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree to represent the source. If the <a href="TruffleLanguage.ParsingRequest.html#getSource()"><code>provided
 source</code></a> does not correspond naturally to a <a href="CallTarget.html" title="interface in com.oracle.truffle.api"><code>call target</code></a>, the returned call
 target should create and if necessary initialize the corresponding language entity and return
 it.
 <p>
 The result of the parsing request is cached per language instance,
 <a href="TruffleLanguage.ParsingRequest.html#getSource()"><code>source</code></a> and <a href="TruffleLanguage.ParsingRequest.html#getArgumentNames()"><code>argument names</code></a>. It is safe to assume that current <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api"><code>language</code></a> instance
 and <a href="TruffleLanguage.ParsingRequest.html#getArgumentNames()"><code>argument names</code></a> will remain unchanged for a
 parsed <a href="CallTarget.html" title="interface in com.oracle.truffle.api"><code>CallTarget</code></a>. The scope of the caching is influenced by the
 <a href="TruffleLanguage.Registration.html#contextPolicy()"><code>context policy</code></a> and option
 <a href="#areOptionsCompatible(org.graalvm.options.OptionValues,org.graalvm.options.OptionValues)"><code>compatibility</code></a>.
 Caching may be <a href="source/Source.html#isCached()"><code>disabled</code></a> for sources. It is enabled for new sources
 by default.
 <p>
 The <code>argumentNames</code> may contain symbolic names for actual parameters of the call to the
 returned value. The result should be a call target with method
 <a href="CallTarget.html#call(java.lang.Object...)"><code>CallTarget.call(java.lang.Object...)</code></a> that accepts as many arguments as were provided
 via the <a href="TruffleLanguage.ParsingRequest.html#getArgumentNames()"><code>TruffleLanguage.ParsingRequest.getArgumentNames()</code></a> method.
 <p>
 Implement <a href="#parse(com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest)"><code>parse(com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest)</code></a> to
 parse source in a specific context location.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>request</code> - request for parsing</dd>
<dt>Returns:</dt>
<dd>a call target to invoke which also keeps in memory the <a href="nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree representing
         just parsed <code>code</code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - exception can be thrown when parsing goes wrong. Here-in thrown exception
             is propagated to the user who called one of <code>eval</code> methods of
             <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a></dd>
<dt>Since:</dt>
<dd>0.22</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="TruffleLanguage.Registration.html#contextPolicy()"><code>TruffleLanguage.Registration.contextPolicy()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="parse(com.oracle.truffle.api.TruffleLanguage.InlineParsingRequest)">
<h3>parse</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="nodes/ExecutableNode.html" title="class in com.oracle.truffle.api.nodes">ExecutableNode</a></span>&nbsp;<span class="element-name">parse</span><wbr><span class="parameters">(<a href="TruffleLanguage.InlineParsingRequest.html" title="class in com.oracle.truffle.api">TruffleLanguage.InlineParsingRequest</a>&nbsp;request)</span>
                        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Parses the <a href="TruffleLanguage.InlineParsingRequest.html#getSource()"><code>provided source snippet</code></a> at the
 <a href="TruffleLanguage.InlineParsingRequest.html#getLocation()"><code>provided location</code></a> and generates its appropriate
 AST representation. The parsing should execute no user code, it should only create the
 <a href="nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree to represent the source.
 <p>
 The parsing should be performed in a context (specified by
 <a href="TruffleLanguage.InlineParsingRequest.html#getLocation()"><code>TruffleLanguage.InlineParsingRequest.getLocation()</code></a>). The result should be an AST fragment with method
 <a href="nodes/ExecutableNode.html#execute(com.oracle.truffle.api.frame.VirtualFrame)"><code>ExecutableNode.execute(com.oracle.truffle.api.frame.VirtualFrame)</code></a> that accepts frames
 valid at the <a href="TruffleLanguage.InlineParsingRequest.html#getLocation()"><code>provided location</code></a>.
 <p>
 When not implemented, <code>null</code> is returned by default.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>request</code> - request for parsing</dd>
<dt>Returns:</dt>
<dd>a fragment to invoke which also keeps in memory the <a href="nodes/Node.html" title="class in com.oracle.truffle.api.nodes"><code>Node</code></a> tree representing
         just parsed <a href="TruffleLanguage.InlineParsingRequest.html#getSource()"><code>code</code></a>, or <code>null</code> when
         inline parsing of code snippets is not implemented</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - exception can be thrown when parsing goes wrong.</dd>
<dt>Since:</dt>
<dd>0.31</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOptionDescriptors()">
<h3>getOptionDescriptors</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../../org/graalvm/options/OptionDescriptors.html" title="interface in org.graalvm.options">OptionDescriptors</a></span>&nbsp;<span class="element-name">getOptionDescriptors</span>()</div>
<div class="block">Returns a set of option descriptors that are supported by this language. Option values are
 accessible using the <a href="TruffleLanguage.Env.html#getOptions()"><code>environment</code></a> when the context is
 <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>created</code></a>. To construct option descriptors from a list then
 <a href="../../../../org/graalvm/options/OptionDescriptors.html#create(java.util.List)"><code>OptionDescriptors.create(List)</code></a> can be used. Languages must always return the same
 option descriptors independent of the language instance or side-effects.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.27</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="Option.html" title="annotation interface in com.oracle.truffle.api"><code>For an example of declaring the option descriptor using an annotation.</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSourceOptionDescriptors()">
<h3>getSourceOptionDescriptors</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../../org/graalvm/options/OptionDescriptors.html" title="interface in org.graalvm.options">OptionDescriptors</a></span>&nbsp;<span class="element-name">getSourceOptionDescriptors</span>()</div>
<div class="block">Returns a set of source option descriptors that are supported by this language. Option values
 are accessible using the <a href="TruffleLanguage.Env.html#getOptions(com.oracle.truffle.api.source.Source)"><code>environment</code></a> or using a
 <a href="TruffleLanguage.ParsingRequest.html#getOptionValues()"><code>parsing request</code></a> when the source is parsed. Languages
 must always return the same option descriptors independent of the language instance or
 side-effects.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>25.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="Option.html" title="annotation interface in com.oracle.truffle.api"><code>For an example of declaring the option descriptor using an annotation.</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="patchContext(C,com.oracle.truffle.api.TruffleLanguage.Env)">
<h3 id="patchContext(java.lang.Object,com.oracle.truffle.api.TruffleLanguage.Env)">patchContext</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">patchContext</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api">TruffleLanguage.Env</a>&nbsp;newEnv)</span></div>
<div class="block">Notifies the language with pre-initialized context about <a href="TruffleLanguage.Env.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.Env</code></a> change. See
 <a href="../../../../org/graalvm/polyglot/Context.html" title="class in org.graalvm.polyglot"><code>Context</code></a> for information how to enable the Context
 pre-initialization.
 <p>
 During the pre-initialization (in the native compilation time) the
 <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a> and
 <a href="#initializeContext(C)"><code>initializeContext(java.lang.Object)</code></a> methods are called. In the image execution time,
 the <a href="#patchContext(C,com.oracle.truffle.api.TruffleLanguage.Env)"><code>patchContext(java.lang.Object, com.oracle.truffle.api.TruffleLanguage.Env)</code></a> is
 called on all languages whose contexts were created during the pre-initialization a
 consequence of <a href="../../../../org/graalvm/polyglot/Context.html#create(java.lang.String...)"><code>Context.create(java.lang.String...)</code></a> invocation.
 The contexts are patched in a topological order starting from dependent languages. If the
 <a href="#patchContext(C,com.oracle.truffle.api.TruffleLanguage.Env)"><code>patchContext(java.lang.Object, com.oracle.truffle.api.TruffleLanguage.Env)</code></a> is
 successful for all pre-initialized languages the pre-initialized context is used, otherwise a
 new context is created.
 <p>
 Typical implementation looks like: 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">@Override
protected boolean patchContext(Context context, Env newEnv) {
    if (!optionsAllowPreInitializedContext(context, newEnv)) {
        // Incompatible options - cannot use pre-initialized context
        return false;
    }
    context.env = newEnv;
    context.args = newEnv.getApplicationArguments();
    context.in = newEnv.in();
    context.out = newEnv.out();
    context.err = newEnv.err();
    return true;
}

private boolean optionsAllowPreInitializedContext(Context context, Env newEnv) {
    // Verify that values of important options in the new Env do not differ
    // from values in the pre-initialized context
    final String newVersionValue = newEnv.getOptions().get(version);
    return Objects.equals(context.languageVersion, newVersionValue);
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the context created by
            <a href="#createContext(com.oracle.truffle.api.TruffleLanguage.Env)"><code>createContext(com.oracle.truffle.api.TruffleLanguage.Env)</code></a> during
            pre-initialization</dd>
<dd><code>newEnv</code> - the new environment replacing the environment used in pre-initialization phase</dd>
<dt>Returns:</dt>
<dd>true in case of successful environment update. When the context cannot be updated to
         a new environment return false to create a new context. By default it returns
         <code>false</code> to prevent an usage of pre-initialized context by a language which is
         not aware of context pre-initialization.</dd>
<dt>Since:</dt>
<dd>0.31</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isThreadAccessAllowed(java.lang.Thread,boolean)">
<h3>isThreadAccessAllowed</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isThreadAccessAllowed</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread,
 boolean&nbsp;singleThreaded)</span></div>
<div class="block">Returns <code>true</code> if code of this language is allowed to be executed on this thread.
 The method returns <code>false</code> to deny execution on this thread. The default
 implementation denies access to more than one thread at the same time. The
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#currentThread()" title="class or interface in java.lang" class="external-link"><code>current thread</code></a> may differ from the passed thread. If this
 method throws an <a href="exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> the
 exception interop messages may be executed without a context being entered.
 <p>
 <b>Example multi-threaded language implementation:</b> 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">class MultiThreadedLanguage extends TruffleLanguage&lt;Context&gt; {

    @Override
    protected Context createContext(Env env) {
        return new Context(env);
    }

    @Override
    protected boolean isThreadAccessAllowed(Thread thread,
                    boolean singleThreaded) {
        // allow access from any thread instead of just one
        return true;
    }

    @Override
    protected void initializeMultiThreading(Context context) {
        // perform actions when the context is switched to multi-threading
        context.singleThreaded.invalidate();
    }

    @Override
    protected void initializeThread(Context context, Thread thread) {
        // perform initialization actions for threads
    }

    @Override
    protected void disposeThread(Context context, Thread thread) {
        // perform disposal actions for threads
    }
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>thread</code> - the thread that accesses the context for the first time.</dd>
<dd><code>singleThreaded</code> - <code>true</code> if the access is considered single-threaded,
            <code>false</code> if more than one thread is active at the same time.</dd>
<dt>Since:</dt>
<dd>0.28</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeMultiThreading(C)">
<h3 id="initializeMultiThreading(java.lang.Object)">initializeMultiThreading</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeMultiThreading</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</span></div>
<div class="block">Invoked before the context is accessed from multiple threads at the same time. This allows
 languages to perform actions that are required to support multi-threading. It will never be
 invoked if <a href="#isThreadAccessAllowed(java.lang.Thread,boolean)"><code>isThreadAccessAllowed(Thread, boolean)</code></a> is implemented to deny access from
 multiple threads at the same time. All initialized languages must allow multi-threading for
 this method to be invoked. If this method throws an
 <a href="exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a> the exception interop
 messages may be executed without a context being entered.
 <p>
 <b>Example multi-threaded language implementation:</b> 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">class MultiThreadedLanguage extends TruffleLanguage&lt;Context&gt; {

    @Override
    protected Context createContext(Env env) {
        return new Context(env);
    }

    @Override
    protected boolean isThreadAccessAllowed(Thread thread,
                    boolean singleThreaded) {
        // allow access from any thread instead of just one
        return true;
    }

    @Override
    protected void initializeMultiThreading(Context context) {
        // perform actions when the context is switched to multi-threading
        context.singleThreaded.invalidate();
    }

    @Override
    protected void initializeThread(Context context, Thread thread) {
        // perform initialization actions for threads
    }

    @Override
    protected void disposeThread(Context context, Thread thread) {
        // perform disposal actions for threads
    }
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the context that should be prepared for multi-threading.</dd>
<dt>Since:</dt>
<dd>0.28</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initializeThread(C,java.lang.Thread)">
<h3 id="initializeThread(java.lang.Object,java.lang.Thread)">initializeThread</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initializeThread</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread)</span></div>
<div class="block">Invoked before a context is accessed from a new thread. This allows the language to perform
 initialization actions for each thread before guest language code is executed. Also for
 languages that deny access from multiple threads at the same time, multiple threads may be
 initialized if they are used sequentially. This method will be invoked before the context is
 <a href="#initializeContext(C)"><code>initialized</code></a> for the thread the context will be initialized
 with. If the thread is stored in the context it must be referenced using
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ref/WeakReference.html" title="class or interface in java.lang.ref" class="external-link"><code>WeakReference</code></a> to avoid leaking thread objects.
 <p>
 The <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#currentThread()" title="class or interface in java.lang" class="external-link"><code>current thread</code></a> is equal to the initialized thread.
 <p>
 If this method throws an <a href="exception/AbstractTruffleException.html" title="class in com.oracle.truffle.api.exception"><code>AbstractTruffleException</code></a>
 the exception interop messages may be executed without a context being entered.
 <p>
 <b>Example multi-threaded language implementation:</b> 
<div class="snippet-container"><button class="copy snippet-copy" aria-label="Copy snippet" onclick="copySnippet(this)"><span data-copied="Copied!">Copy</span><img src="../../../../copy.svg" alt="Copy snippet"></button>
<pre class="snippet"><code class="language-java">class MultiThreadedLanguage extends TruffleLanguage&lt;Context&gt; {

    @Override
    protected Context createContext(Env env) {
        return new Context(env);
    }

    @Override
    protected boolean isThreadAccessAllowed(Thread thread,
                    boolean singleThreaded) {
        // allow access from any thread instead of just one
        return true;
    }

    @Override
    protected void initializeMultiThreading(Context context) {
        // perform actions when the context is switched to multi-threading
        context.singleThreaded.invalidate();
    }

    @Override
    protected void initializeThread(Context context, Thread thread) {
        // perform initialization actions for threads
    }

    @Override
    protected void disposeThread(Context context, Thread thread) {
        // perform disposal actions for threads
    }
}
</code></pre>
</div>
</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the context that is entered</dd>
<dd><code>thread</code> - the thread that accesses the context for the first time.</dd>
<dt>Since:</dt>
<dd>0.28</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="finalizeThread(C,java.lang.Thread)">
<h3 id="finalizeThread(java.lang.Object,java.lang.Thread)">finalizeThread</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">finalizeThread</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread)</span></div>
<div class="block">The behavior of this notification is different for
 <a href="TruffleLanguage.Env.html#newTruffleThreadBuilder(java.lang.Runnable)"><code>polyglot threads</code></a> and embedder threads.
 <p>
 For <a href="TruffleLanguage.Env.html#newTruffleThreadBuilder(java.lang.Runnable)"><code>polyglot threads</code></a> the
 <code>finalizeThread</code> notification is invoked just before the context is left for the
 last time in the thread, and it is still safe to run guest code unless the context is
 cancelled or hard-exited. This allows the language to perform finalization actions for each
 thread and context. Polyglot threads are finalized before or while the context is finalized
 and it always holds that <code>thread == Thread.currentThread()</code>.
 <p>
 Embedder threads are finalized after the context is finalized, but before it is disposed.
 <code>thread == Thread.currentThread()</code> holds only for the embedder thread that
 performed the context finalization. Finalization of other embedder threads is invoked in the
 context finalization thread as well, and so <code>thread != Thread.currentThread()</code>. It
 is still safe to run guest code in <code>finalizeThread</code> for an embedder thread unless
 the context is cancelled or hard-exited, but it is not allowed to initialize new language
 contexts or create polyglot threads. A language context initialization or creation of a
 polyglot thread in <code>finalizeThread</code> for an embedder thread results in
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a>. Please note that embedder threads may be collected by the
 garbage collector before they can be finalized and may therefore not be finalized.
 <p>
 Thread finalization is invoked before <a href="#disposeThread(C,java.lang.Thread)"><code>thread disposal</code></a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>23.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#initializeThread(C,java.lang.Thread)"><code>For usage details.</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="disposeThread(C,java.lang.Thread)">
<h3 id="disposeThread(java.lang.Object,java.lang.Thread)">disposeThread</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">disposeThread</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html" title="class or interface in java.lang" class="external-link">Thread</a>&nbsp;thread)</span></div>
<div class="block">Invoked the last time code will be executed for this thread and context. This allows the
 language to perform cleanup actions for each thread and context. Threads might be disposed
 before after or while a context is disposed. The <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Thread.html#currentThread()" title="class or interface in java.lang" class="external-link"><code>current
 thread</code></a> may differ from the disposed thread. Disposal of threads is only guaranteed for
 threads that were created by guest languages, so called
 <a href="TruffleLanguage.Env.html#newTruffleThreadBuilder(java.lang.Runnable)"><code>polyglot threads</code></a>. Other threads, created by the
 embedder, may be collected by the garbage collector before they can be disposed and may
 therefore not be disposed.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.28</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#initializeThread(C,java.lang.Thread)"><code>For usage details.</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getScope(C)">
<h3 id="getScope(java.lang.Object)">getScope</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">getScope</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context)</span></div>
<div class="block">Get a top scope of the language, if any. The returned object must be an
 <a href="interop/InteropLibrary.html#isScope(java.lang.Object)"><code>interop scope object</code></a>
 and may have <a href="interop/InteropLibrary.html#hasScopeParent(java.lang.Object)"><code>parent scopes</code></a>. The scope object exposes all top scopes variables as flattened
 <a href="interop/InteropLibrary.html#getMembers(java.lang.Object)"><code>members</code></a>. Top scopes
 are independent of a <a href="frame/Frame.html" title="interface in com.oracle.truffle.api.frame"><code>Frame</code></a>. See
 <a href="interop/InteropLibrary.html#isScope(java.lang.Object)"><code>InteropLibrary.isScope(Object)</code></a> for details.
 <p>
 The returned scope objects may be cached by the caller per language context. Therefore the
 method should always return equivalent top-scopes and variables objects for a given language
 context. Changes to the top scope by executing guest language code should be reflected by
 cached scope instances. It is recommended to store the top-scope directly in the language
 context for efficient access.
 <p>
 <h3 id="interpretation-heading">Interpretation</h3> In most languages, just evaluating an expression like
 <code>Math</code> is equivalent of a lookup with the identifier 'Math' in the top-most scopes
 of the language. Looking up the identifier 'Math' should have equivalent semantics as reading
 with the key 'Math' from the variables object of one of the top-most scopes of the language.
 In addition languages may optionally allow modification and insertion with the variables
 object of the returned top-scopes.
 <p>
 Languages may want to specify multiple parent top-scopes. It is recommended to stay as close
 as possible to the set of top-scopes that as is described in the guest language
 specification, if available. For example, in JavaScript, there is a 'global environment' and
 a 'global object' scope. While the global environment scope contains class declarations and
 is not insertable, the global object scope is used to insert new global variable values and
 is therefore insertable.
 <p>
 <h3 id="use-cases-heading">Use Cases</h3>
 <ul>
 <li>Top scopes are accessible to instruments with
 <a href="instrumentation/TruffleInstrument.Env.html#getScope(com.oracle.truffle.api.nodes.LanguageInfo)"><code>TruffleInstrument.Env.getScope(LanguageInfo)</code></a>.
 They are used by debuggers to access the top-most scopes of the language.
 <li>Top scopes available in the <a href="../../../../org/graalvm/polyglot/package-summary.html"><code>polyglot API</code></a> as context
 <a href="../../../../org/graalvm/polyglot/Context.html#getBindings(java.lang.String)"><code>bindings</code></a> object. Access to members of the bindings object
 is applied to the returned scope object via interop.
 <li>Languages may expose other language scopes using a polyglot bindings builtin. E.g with
 <a href="TruffleLanguage.Env.html#getScopePublic(com.oracle.truffle.api.nodes.LanguageInfo)"><code>TruffleLanguage.Env.getScopePublic(LanguageInfo)</code></a>.
 </ul>
 <p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the context to find the language top scope in</dd>
<dt>Returns:</dt>
<dd>the scope object or <code>null</code> if the language does not support such concept</dd>
<dt>Since:</dt>
<dd>20.3</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isVisible(C,java.lang.Object)">
<h3 id="isVisible(java.lang.Object,java.lang.Object)">isVisible</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isVisible</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;value)</span></div>
<div class="block">Decides whether the result of evaluating an interactive source should be printed to stdout.
 By default this methods returns <code>true</code> claiming all values are visible.
 <p>
 This method affects behavior of
 <a href="../../../../org/graalvm/polyglot/Context.html#eval(org.graalvm.polyglot.Source)"><code>Context.eval(org.graalvm.polyglot.Source)</code></a> - when evaluating an
 <a href="source/Source.html#isInteractive()"><code>interactive source</code></a> the result of the evaluation is tested for
 <a href="#isVisible(C,java.lang.Object)"><code>visibility</code></a> and if the value is found
 visible, it gets converted to string and printed to
 <a href="../../../../org/graalvm/polyglot/Context.Builder.html#out(java.io.OutputStream)"><code>standard output</code></a>.
 <p>
 A language can control whether a value is or isn't printed by overriding this method and
 returning <code>false</code> for some or all values. In such case it is up to the language
 itself to use the <a href="TruffleLanguage.Env.html#out()"><code>TruffleLanguage.Env.out()</code></a>, <a href="TruffleLanguage.Env.html#err()"><code>TruffleLanguage.Env.err()</code></a> and <a href="TruffleLanguage.Env.html#in()"><code>TruffleLanguage.Env.in()</code></a> streams of the
 environment.

 When evaluation is called with an <a href="source/Source.html#isInteractive()"><code>interactive source</code></a> of a
 language that controls its interactive behavior, it is the responsibility of the language
 itself to print the result to use the <a href="TruffleLanguage.Env.html#out()"><code>TruffleLanguage.Env.out()</code></a>, <a href="TruffleLanguage.Env.html#err()"><code>TruffleLanguage.Env.err()</code></a> and
 <a href="TruffleLanguage.Env.html#in()"><code>TruffleLanguage.Env.in()</code></a> streams of the environment.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the execution context for doing the conversion</dd>
<dd><code>value</code> - the value to check. Either primitive type or
            <a href="interop/TruffleObject.html" title="interface in com.oracle.truffle.api.interop"><code>TruffleObject</code></a></dd>
<dt>Returns:</dt>
<dd><code>true</code> if the language implements an interactive response to evaluation of
         interactive sources.</dd>
<dt>Since:</dt>
<dd>0.22</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLanguageView(C,java.lang.Object)">
<h3 id="getLanguageView(java.lang.Object,java.lang.Object)">getLanguageView</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">getLanguageView</span><wbr><span class="parameters">(<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>&nbsp;context,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;value)</span></div>
<div class="block">Wraps the value to provide language-specific information for primitive and foreign values.
 Foreign values should be enhanced to look like the most generic object type of the language.
 The wrapper needs to introduce any "virtual" methods and properties that are commonly used in
 language constructs and in algorithms that are written to work on this generic object type.
 The wrapper may add or remove existing interop traits, but it is not allowed to change the
 <a href="interop/InteropLibrary.html" title="class in com.oracle.truffle.api.interop"><code>interop type</code></a>. For example, it is not
 allowed to change the type from number to string. If the behavior of an existing trait is
 modified then all writes on the mapper need to be forwarded to the underlying object, apart
 from the virtual members. Writes to the virtual members should be persisted in the wrapper if
 this is the behavior of the object type that is being mapped to.
 <p>
 Every language view wrapper must return the current language as their associated
 <a href="interop/InteropLibrary.html#getLanguage(java.lang.Object)"><code>language</code></a>. An
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/AssertionError.html" title="class or interface in java.lang" class="external-link"><code>AssertionError</code></a> is thrown when a language view is requested if this contract is
 violated.
 <p>
 Example modifications language view wrappers may perform:
 <ul>
 <li>Provide a language specific
 <a href="interop/InteropLibrary.html#toDisplayString(java.lang.Object)"><code>display string</code></a>
 for primitive and foreign values.
 <li>Return a language specific
 <a href="interop/InteropLibrary.html#getMetaObject(java.lang.Object)"><code>metaobject</code></a> for
 primitive or foreign values.
 <li>Add virtual members to the object for the view. For example, any JavaScript object is
 expected to have an implicit __proto__ member. Foreign objects, even if they do not have such
 a member, are interpreted as if they have.
 <li>There are languages where all scalar values are also vectors. In such a case the array
 element trait may be added using the language wrapper to such values.
 </ul>
 <p>
 The default implementation returns <code>null</code>. If <code>null</code> is returned then
 the default language view will be used. The default language view wraps the value and returns
 the current language as their associated language. With the default view wrapper all interop
 library messages will be forwarded to the delegate value.
 <p>
 This following example shows a simplified language view. For a full implementation including
 an example of metaobjects can be found in the Truffle examples language "SimpleLanguage".

 <pre>
 &#64;ExportLibrary(value = InteropLibrary.class, delegateTo = "delegate")
 final class ExampleLanguageView implements TruffleObject {

     protected final Object delegate;

     ExampleLanguageView(Object delegate) {
         this.delegate = delegate;
     }

     &#64;ExportMessage
     boolean hasLanguage() {
         return true;
     }

     &#64;ExportMessage
     Class&lt;? extends TruffleLanguage&lt;?&gt;&gt; getLanguage() {
         return MyLanguage.class;
     }

     &#64;ExportMessage
     Object toDisplayString(boolean allowSideEffects,
                     &#64;CachedLibrary("this.delegate") InteropLibrary dLib) {
         try {
             if (dLib.isString(this.delegate)) {
                 return dLib.asString(this.delegate);
             } else if (dLib.isBoolean(this.delegate)) {
                 return dLib.asBoolean(this.delegate) ? "TRUE" : "FALSE";
             } else if (dLib.fitsInLong(this.delegate)) {
                 return longToString(dLib.asLong(this.delegate));
             } else {
                 // full list truncated for this language
                 return "Unsupported value";
             }
         } catch (UnsupportedMessageException e) {
             CompilerDirectives.transferToInterpreter();
             throw new AssertionError(e);
         }
     }

     &#64;TruffleBoundary
     private static String longToString(long value) {
         return String.valueOf(value);
     }

     &#64;ExportMessage
     boolean hasMetaObject(@CachedLibrary("this.delegate") InteropLibrary dLib) {
         return dLib.isString(this.delegate)//
                         || dLib.fitsInLong(this.delegate)//
                         || dLib.isBoolean(this.delegate);
     }

     &#64;ExportMessage
     Object getMetaObject(@CachedLibrary("this.delegate") InteropLibrary dLib)
                     throws UnsupportedMessageException {
         if (dLib.isString(this.delegate)) {
             return MyMetaObject.PRIMITIVE_STRING;
         } else if (dLib.isBoolean(this.delegate)) {
             return MyMetaObject.PRIMITIVE_LONG;
         } else if (dLib.fitsInLong(this.delegate)) {
             return MyMetaObject.PRIMITIVE_BOOLEAN;
         } else {
             // no associable metaobject
             throw UnsupportedMessageException.create();
         }
     }
 }
 </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the current context.</dd>
<dd><code>value</code> - the value</dd>
<dt>Since:</dt>
<dd>20.1</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentLanguage(java.lang.Class)">
<h3>getCurrentLanguage</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Deprecated.html#since()" title="class or interface in java.lang" class="external-link">since</a>="21.3")
</span><span class="modifiers">protected static</span>&nbsp;<span class="type-parameters">&lt;T extends <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&lt;?&gt;&gt;</span>&nbsp;<span class="return-type">T</span>&nbsp;<span class="element-name">getCurrentLanguage</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;languageClass)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 21.3, use static final context references instead. See
             <a href="TruffleLanguage.ContextReference.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.ContextReference</code></a> for the new intended usage.</div>
</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.27</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentContext(java.lang.Class)">
<h3>getCurrentContext</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Deprecated.html#since()" title="class or interface in java.lang" class="external-link">since</a>="21.3")
</span><span class="modifiers">protected static</span>&nbsp;<span class="type-parameters">&lt;C,<wbr>
T extends <a href="TruffleLanguage.html" title="class in com.oracle.truffle.api">TruffleLanguage</a>&lt;C&gt;&gt;</span>
<span class="return-type">C</span>&nbsp;<span class="element-name">getCurrentContext</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;T&gt;&nbsp;languageClass)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 21.3, use static final context references instead. See
             <a href="TruffleLanguage.LanguageReference.html" title="class in com.oracle.truffle.api"><code>TruffleLanguage.LanguageReference</code></a> for the new intended usage.</div>
</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.27</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createContextLocal(com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory)">
<h3>createContextLocal</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">protected final</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="ContextLocal.html" title="class in com.oracle.truffle.api">ContextLocal</a>&lt;T&gt;</span>&nbsp;<span class="element-name">createContextLocal</span><wbr><span class="parameters">(<a href="TruffleLanguage.ContextLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextLocalFactory</a>&lt;<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,<wbr>T&gt;&nbsp;factory)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 23.1, use
             <a href="TruffleLanguage.ContextLocalProvider.html#createContextLocal(com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextLocal(TruffleLanguage.ContextLocalFactory)</code></a>
             instead</div>
</div>
<div class="block">Creates a new context local reference for this Truffle language.

 Starting with JDK 21, using this method leads to a this-escape warning. Use
 <a href="TruffleLanguage.ContextLocalProvider.html#createContextLocal(com.oracle.truffle.api.TruffleLanguage.ContextLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextLocal(TruffleLanguage.ContextLocalFactory)</code></a>
 instead.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.3</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createContextThreadLocal(com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory)">
<h3>createContextThreadLocal</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">protected final</span>&nbsp;<span class="type-parameters">&lt;T&gt;</span>&nbsp;<span class="return-type"><a href="ContextThreadLocal.html" title="class in com.oracle.truffle.api">ContextThreadLocal</a>&lt;T&gt;</span>&nbsp;<span class="element-name">createContextThreadLocal</span><wbr><span class="parameters">(<a href="TruffleLanguage.ContextThreadLocalFactory.html" title="interface in com.oracle.truffle.api">TruffleLanguage.ContextThreadLocalFactory</a>&lt;<a href="TruffleLanguage.html" title="type parameter in TruffleLanguage">C</a>,<wbr>T&gt;&nbsp;factory)</span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">in 23.1, use
             <a href="TruffleLanguage.ContextLocalProvider.html#createContextThreadLocal(com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextThreadLocal(TruffleLanguage.ContextThreadLocalFactory)</code></a>
             instead</div>
</div>
<div class="block">Creates a new context thread local reference for this Truffle language.

 Starting with JDK 21, using this method leads to a this-escape warning. Use
 <a href="TruffleLanguage.ContextLocalProvider.html#createContextThreadLocal(com.oracle.truffle.api.TruffleLanguage.ContextThreadLocalFactory)"><code>TruffleLanguage.ContextLocalProvider.createContextThreadLocal(TruffleLanguage.ContextThreadLocalFactory)</code></a>
 instead.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.3</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLanguageHome()">
<h3>getLanguageHome</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getLanguageHome</span>()</div>
<div class="block">Returns the home location for this language or <code>null</code> if the language home is not set.
 Languages consumed from the Maven repository typically don't have a language home. For legacy
 graalvm or standalone builds the language home corresponds to the directory in which the Jar
 file is located, if run from a Jar file. For an AOT compiled binary, this corresponds to the
 location of the language files in the default GraalVM distribution layout.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>19.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAsynchronousStackDepth()">
<h3>getAsynchronousStackDepth</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getAsynchronousStackDepth</span>()</div>
<div class="block">Get the depth of asynchronous stack. When zero, the language should not sacrifice performance
 to be able to provide asynchronous stack. When the depth is non-zero, the language should
 provide asynchronous stack up to that depth. The language may provide more asynchronous
 frames than this depth if it's of no performance penalty, or if requested by other (e.g.
 language-specific) options. The returned depth may change at any time.
 <p>
 Override <a href="nodes/RootNode.html#findAsynchronousFrames(com.oracle.truffle.api.frame.Frame)"><code>RootNode.findAsynchronousFrames(Frame)</code></a> to provide the asynchronous stack
 frames.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>20.1.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="nodes/RootNode.html#findAsynchronousFrames(com.oracle.truffle.api.frame.Frame)"><code>RootNode.findAsynchronousFrames(Frame)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small><center>Copyright &copy; 2012, 2025, Oracle and/or its affiliates. All rights reserved.</center></small></p>
</footer>
</div>
</div>
</body>
</html>

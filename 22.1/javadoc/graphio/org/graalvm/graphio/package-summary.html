<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>org.graalvm.graphio (org.graalvm.graphio javadoc)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.graalvm.graphio (org.graalvm.graphio javadoc)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="../../../org/graalvm/graphio/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/graalvm/graphio/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.graalvm.graphio</h1>
<div class="docSummary">
<div class="block">Send your graphs to <b>IGV</b> via a socket or a file.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/graalvm/graphio/GraphBlocks.html" title="interface in org.graalvm.graphio">GraphBlocks</a>&lt;G,B,N&gt;</td>
<td class="colLast">
<div class="block">Special support for dealing with blocks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/graalvm/graphio/GraphElements.html" title="interface in org.graalvm.graphio">GraphElements</a>&lt;M,F,S,P&gt;</td>
<td class="colLast">
<div class="block">Representation of methods, fields, their signatures and code locations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/graalvm/graphio/GraphLocations.html" title="interface in org.graalvm.graphio">GraphLocations</a>&lt;M,P,L&gt;</td>
<td class="colLast">
<div class="block">Provides source location information about compiled code.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/graalvm/graphio/GraphStructure.html" title="interface in org.graalvm.graphio">GraphStructure</a>&lt;G,N,C,P&gt;</td>
<td class="colLast">
<div class="block">Interface that defines structure of a compiler graph.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/graalvm/graphio/GraphTypes.html" title="interface in org.graalvm.graphio">GraphTypes</a></td>
<td class="colLast">
<div class="block">Special support for dealing with enums.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio">GraphOutput</a>&lt;G,M&gt;</td>
<td class="colLast">
<div class="block">Instance of output to dump informations about a compiler compilations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../org/graalvm/graphio/GraphOutput.Builder.html" title="class in org.graalvm.graphio">GraphOutput.Builder</a>&lt;G,N,M&gt;</td>
<td class="colLast">
<div class="block">Builder to configure and create an instance of <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.graalvm.graphio Description">Package org.graalvm.graphio Description</h2>
<div class="block">Send your graphs to <b>IGV</b> via a socket or a file. This package allows one to easily encode
 any graph-like data structure and send it for visualization to <em>OracleLab's Ideal Graph
 Visualizer</em> tool. Assuming you already have your own data structure that contains
 <b>nodes</b> and <b>edges</b> among them, creating a <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>
 specialized for your data is a matter of implementing a single interface:

 <pre class='snippet'><b>class</b> AcmeGraphStructure <b>implements</b>
<a href="../../../org/graalvm/graphio/GraphStructure.html" title="interface in org.graalvm.graphio"><code>GraphStructure</code></a>&lt;AcmeGraph, AcmeNode, AcmeNodeType, AcmePorts&gt; {

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> AcmeGraph graph(AcmeGraph currentGraph, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang"><code>Object</code></a> obj) {
        <b>return</b> obj <b>instanceof</b> AcmeGraph ? (AcmeGraph) obj : <b>null</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Iterable.html?is-external=true" title="class or interface in java.lang"><code>Iterable</code></a>&lt;? <b>extends</b> AcmeNode&gt; nodes(AcmeGraph graph) {
        <b>return</b> graph.allNodes();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <b>int</b> nodesCount(AcmeGraph graph) {
        <b>return</b> graph.allNodes().size();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <b>int</b> nodeId(AcmeNode node) {
        <b>return</b> node.id;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <b>boolean</b> nodeHasPredecessor(AcmeNode node) {
        <b>return</b> node.id &gt; 0;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <b>void</b> nodeProperties(
        AcmeGraph graph, AcmeNode node, <a href="http://docs.oracle.com/javase/17/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util"><code>Map</code></a>&lt;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a>, ? <b>super</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang"><code>Object</code></a>&gt; properties
    ) {
        properties.put(<em>"id"</em>, node.id);
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> AcmeNodeType nodeClass(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang"><code>Object</code></a> obj) {
        <b>return</b> obj <b>instanceof</b> AcmeNodeType ? (AcmeNodeType) obj : <b>null</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> AcmeNode node(<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang"><code>Object</code></a> obj) {
        <b>return</b> obj <b>instanceof</b> AcmeNode ? (AcmeNode) obj : <b>null</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> AcmeNodeType classForNode(AcmeNode node) {
        <em>// we have only one type of nodes</em>
        <b>return</b> AcmeNodeType.STANDARD;
    }


    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> nameTemplate(AcmeNodeType nodeClass) {
        <b>return</b> <em>"Acme ({p#id})"</em>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang"><code>Object</code></a> nodeClassType(AcmeNodeType nodeClass) {
        <b>return</b> nodeClass.getClass();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> AcmePorts portInputs(AcmeNodeType nodeClass) {
        <b>return</b> AcmePorts.INPUT;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> AcmePorts portOutputs(AcmeNodeType nodeClass) {
        <b>return</b> AcmePorts.OUTPUT;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <b>int</b> portSize(AcmePorts port) {
        <b>return</b> port == AcmePorts.OUTPUT ? 1 : 0;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <b>boolean</b> edgeDirect(AcmePorts port, <b>int</b> index) {
        <b>return</b> <b>false</b>;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> edgeName(AcmePorts port, <b>int</b> index) {
        <b>return</b> port.name();
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang"><code>Object</code></a> edgeType(AcmePorts port, <b>int</b> index) {
        <b>return</b> port;
    }

    &#064;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Override.html?is-external=true" title="class or interface in java.lang"><code>Override</code></a>
    <b>public</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util"><code>Collection</code></a>&lt;? <b>extends</b> AcmeNode&gt; edgeNodes(
        AcmeGraph graph, AcmeNode node, AcmePorts port, <b>int</b> index
    ) {
        <b>if</b> (port == AcmePorts.OUTPUT) {
            <b>return</b> node.outgoing.targets;
        }
        <b>return</b> <b>null</b>;
    }
}

</pre>

 The <a href="../../../org/graalvm/graphio/GraphStructure.html" title="interface in org.graalvm.graphio"><code>GraphStructure</code></a> interface defines the set of operations that are
 needed by the <em>graph protocol</em> to encode a graph into the <b>IGV</b> expected format. The
 graph structure is implemented as a so called
 <a href="http://wiki.apidesign.org/wiki/Singletonizer">singletonizer</a> API pattern: there is no
 need to change your data structures or implement some special interfaces - everything needed is
 provided by implementing the <a href="../../../org/graalvm/graphio/GraphStructure.html" title="interface in org.graalvm.graphio"><code>GraphStructure</code></a> operations.
 <p>
 The next step is to turn this graph structure into an instance of
 <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>. To do so use the associated
 <a href="../../../org/graalvm/graphio/GraphOutput.Builder.html" title="class in org.graalvm.graphio"><code>builder</code></a> just like shown in the following method:

 <pre class='snippet'><b>static</b> <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>&lt;AcmeGraph, ?&gt; buildOutput(<a href="http://docs.oracle.com/javase/17/docs/api/java/nio/channels/WritableByteChannel.html?is-external=true" title="class or interface in java.nio.channels"><code>WritableByteChannel</code></a> channel)
<b>throws</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io"><code>IOException</code></a> {
    <b>return</b> <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>.newBuilder(acmeGraphStructure()).
        <em>// use the latest version; currently 6.0</em>
        protocolVersion(6, 0).
        build(channel);
}
</pre>

 Now you are ready to dump your graph into <b>IGV</b>. Where to obtain the right channel? One
 option is to create a <a href="http://docs.oracle.com/javase/17/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels"><code>FileChannel</code></a> and dump the data into a file
 (preferrably with <code>.bgv</code> extension). The other is to open a socket to port
 <code>4445</code> (the default port <b>IGV</b> listens to) and dump the data there. Here is an
 example:

 <pre class='snippet'><b>static</b> <b>void</b> dump(<a href="http://docs.oracle.com/javase/17/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io"><code>File</code></a> toFile) <b>throws</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io"><code>IOException</code></a> {
    <b>try</b> (
        <a href="http://docs.oracle.com/javase/17/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels"><code>FileChannel</code></a> ch = <b>new</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/io/FileOutputStream.html?is-external=true" title="class or interface in java.io"><code>FileOutputStream</code></a>(toFile).getChannel();
        <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>&lt;AcmeGraph, ?&gt; output = buildOutput(ch);
    ) {
        AcmeNode root = <b>new</b> AcmeNode(0);
        AcmeNode n1 = <b>new</b> AcmeNode(1);
        AcmeNode n2 = <b>new</b> AcmeNode(2);
        AcmeNode n3 = <b>new</b> AcmeNode(3);

        root.linkTo(n1);
        root.linkTo(n2);
        n1.linkTo(n3);
        n2.linkTo(n3);

        AcmeGraph diamondGraph = <b>new</b> AcmeGraph(root);

        output.beginGroup(diamondGraph, <em>"Diamond"</em>, <em>"dia"</em>, <b>null</b>, 0, <b>null</b>);
        output.print(diamondGraph, <b>null</b>, 0, <em>"Diamond graph #%d"</em>, 1);
        output.endGroup();
    }
}
</pre>

 Call the <code>dump</code> method with pointer to file <code>diamond.bgv</code> and then you can open the
 file in <b>IGV</b>. The result will look like this:
 <p>
 <img src="doc-files/diamond.png">
 <p>
 You can verify the behavior directly in the <b>IGV</b> by downloading
 <a href="doc-files/diamond.bgv">diamond.bgv</a> file generated from the above diamond structure
 graph.
 <p>
 The primary <b>IGV</b> focus is on graphs used by the compiler. As such they aren't plain graphs,
 but contain various compiler oriented attributes:
 <ul>
 <li><a href="../../../org/graalvm/graphio/GraphBlocks.html" title="interface in org.graalvm.graphio">code blocks</a> information</li>
 <li><a href="../../../org/graalvm/graphio/GraphElements.html" title="interface in org.graalvm.graphio">method and fields</a> information</li>
 <li>Advanced support for <a href="../../../org/graalvm/graphio/GraphTypes.html" title="interface in org.graalvm.graphio">recognizing types</a></li>
 </ul>
 all these additional interfaces (<a href="../../../org/graalvm/graphio/GraphBlocks.html" title="interface in org.graalvm.graphio"><code>GraphBlocks</code></a>,
 <a href="../../../org/graalvm/graphio/GraphElements.html" title="interface in org.graalvm.graphio"><code>GraphElements</code></a> and <a href="../../../org/graalvm/graphio/GraphTypes.html" title="interface in org.graalvm.graphio"><code>GraphTypes</code></a>) are
 optional - they don't have to be provided. As such they can be specified via
 <a href="../../../org/graalvm/graphio/GraphOutput.Builder.html" title="class in org.graalvm.graphio"><code>GraphOutput.Builder</code></a> instance methods, which may, but need not be
 called at all. Here is an example:

 <pre class='snippet'><b>static</b> <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>&lt;AcmeGraph, ?&gt; buildAll(<a href="http://docs.oracle.com/javase/17/docs/api/java/nio/channels/WritableByteChannel.html?is-external=true" title="class or interface in java.nio.channels"><code>WritableByteChannel</code></a> channel)
<b>throws</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io"><code>IOException</code></a> {
    <a href="../../../org/graalvm/graphio/GraphBlocks.html" title="interface in org.graalvm.graphio"><code>GraphBlocks</code></a>&lt;AcmeGraph, AcmeBlocks, AcmeNode&gt; graphBlocks = acmeBlocks();
    <a href="../../../org/graalvm/graphio/GraphElements.html" title="interface in org.graalvm.graphio"><code>GraphElements</code></a>&lt;AcmeMethod, AcmeField,
        AcmeSignature, AcmeCodePosition&gt; graphElements = acmeElements();
    <a href="../../../org/graalvm/graphio/GraphTypes.html" title="interface in org.graalvm.graphio"><code>GraphTypes</code></a> graphTypes = acmeTypes();

    <b>return</b> <a href="../../../org/graalvm/graphio/GraphOutput.html" title="class in org.graalvm.graphio"><code>GraphOutput</code></a>.newBuilder(acmeGraphStructure()).
        protocolVersion(6, 0).
        blocks(graphBlocks).
        elements(graphElements).
        types(graphTypes).
        build(channel);
}
</pre>

 All these interfaces follow the
 <a href="http://wiki.apidesign.org/wiki/Singletonizer">singletonizer</a> API pattern again - e.g.
 no need to change your existing data structures, just implement the operations provided by the
 interfaces you pass into the builder. By combining these interfaces together you can get as rich,
 colorful, source linked graphs as the compiler produces to describe its optimizations.</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="../../../org/graalvm/graphio/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/graalvm/graphio/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>

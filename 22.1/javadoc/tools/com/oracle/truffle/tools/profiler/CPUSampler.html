<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>CPUSampler</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="CPUSampler";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.Payload.html" title="class in com.oracle.truffle.tools.profiler"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/tools/profiler/CPUSampler.html" target="_top">Frames</a></li>
<li><a href="CPUSampler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.oracle.truffle.tools.profiler</div>
<h2 title="Class CPUSampler" class="title">Class CPUSampler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.oracle.truffle.tools.profiler.CPUSampler</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/17/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">CPUSampler</span>
extends <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="http://docs.oracle.com/javase/17/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></pre>
<div class="block">Implementation of a sampling based profiler for
 Truffle languages built on top of the
 Truffle safepoints and
 <code>iterateFrames()</code>.
 <p>
 The sampler samples the stack of each thread at regular intervals by using Truffle safepoints.
 The state of the stack is copied and saved into trees of <a href="../../../../../com/oracle/truffle/tools/profiler/ProfilerNode.html" title="class in com.oracle.truffle.tools.profiler">nodes</a>, which
 represent the profile of the execution.
 <p>
 Usage example: <pre class='snippet'><code>Context</code> context = <code>Context</code>.create();

<a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSampler</code></a> sampler = <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSampler</code></a>.find(context.getEngine());
sampler.setCollecting(<b>true</b>);
context.eval(<em>"..."</em>, <em>"..."</em>);
sampler.setCollecting(<b>false</b>);
sampler.close();
<em>// Read information about the roots of the tree per thread.</em>
<b>for</b> (<a href="http://docs.oracle.com/javase/17/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util"><code>Collection</code></a>&lt;<a href="../../../../../com/oracle/truffle/tools/profiler/ProfilerNode.html" title="class in com.oracle.truffle.tools.profiler"><code>ProfilerNode</code></a>&lt;<a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSampler</code></a>.Payload&gt;&gt; nodes
        : sampler.getData().values().iterator().next().threadData.values()) {
    <b>for</b> (<a href="../../../../../com/oracle/truffle/tools/profiler/ProfilerNode.html" title="class in com.oracle.truffle.tools.profiler"><code>ProfilerNode</code></a>&lt;<a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSampler</code></a>.Payload&gt; node : nodes) {
        <b>final</b> <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang"><code>String</code></a> rootName = node.getRootName();
        <b>final</b> <b>int</b> selfHitCount = node.getPayload().getSelfHitCount();
        <em>// ...</em>
    }
}
</pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.Payload.html" title="class in com.oracle.truffle.tools.profiler">CPUSampler.Payload</a></span></code>
<div class="block">Wrapper for information on how many times an element was seen on the stack.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#clearData--">clearData</a></span>()</code>
<div class="block">Erases all the data gathered by the sampler and resets the sample count to 0.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#close--">close</a></span>()</code>
<div class="block">Closes the sampler for further use, deleting all the gathered data.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler">CPUSampler</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#find-org.graalvm.polyglot.Engine-">find</a></span>(org.graalvm.polyglot.Engine&nbsp;engine)</code>
<div class="block">Finds <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSampler</code></a> associated with given engine.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/17/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;com.oracle.truffle.api.TruffleContext,<a href="../../../../../com/oracle/truffle/tools/profiler/CPUSamplerData.html" title="class in com.oracle.truffle.tools.profiler">CPUSamplerData</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#getData--">getData</a></span>()</code>
<div class="block">Get per-context profiling data.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>com.oracle.truffle.api.instrumentation.SourceSectionFilter</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#getFilter--">getFilter</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#getPeriod--">getPeriod</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#getStackLimit--">getStackLimit</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#hasData--">hasData</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#hasStackOverflowed--">hasStackOverflowed</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#isCollecting--">isCollecting</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#isGatherSelfHitTimes--">isGatherSelfHitTimes</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setCollecting-boolean-">setCollecting</a></span>(boolean&nbsp;collecting)</code>
<div class="block">Controls whether the sampler is collecting data or not.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setDelay-long-">setDelay</a></span>(long&nbsp;delay)</code>
<div class="block">Sets the delay period i.e.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setFilter-com.oracle.truffle.api.instrumentation.SourceSectionFilter-">setFilter</a></span>(com.oracle.truffle.api.instrumentation.SourceSectionFilter&nbsp;filter)</code>
<div class="block">Sets the <code>filter</code> for the sampler.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setGatherSelfHitTimes-boolean-">setGatherSelfHitTimes</a></span>(boolean&nbsp;gatherSelfHitTimes)</code>
<div class="block">Sets whether or not to gather timestamp information for the element at the top of the stack
 for each sample.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setPeriod-long-">setPeriod</a></span>(long&nbsp;samplePeriod)</code>
<div class="block">Sets the sampling period i.e.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setSampleContextInitialization-boolean-">setSampleContextInitialization</a></span>(boolean&nbsp;enabled)</code>
<div class="block">Enables or disables the sampling of the time spent during context initialization.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setStackLimit-int-">setStackLimit</a></span>(int&nbsp;stackLimit)</code>
<div class="block">Sets the maximum amount of stack frames that are sampled.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/17/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>,<a href="http://docs.oracle.com/javase/17/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../com/oracle/truffle/tools/profiler/StackTraceEntry.html" title="class in com.oracle.truffle.tools.profiler">StackTraceEntry</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#takeSample--">takeSample</a></span>()</code>
<div class="block">Sample all threads and gather their current stack trace entries with a default time out.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/17/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>,<a href="http://docs.oracle.com/javase/17/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../com/oracle/truffle/tools/profiler/StackTraceEntry.html" title="class in com.oracle.truffle.tools.profiler">StackTraceEntry</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#takeSample-long-java.util.concurrent.TimeUnit-">takeSample</a></span>(long&nbsp;timeout,
          <a href="http://docs.oracle.com/javase/17/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;timeoutUnit)</code>
<div class="block">Sample all threads and gather their current stack trace entries.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="find-org.graalvm.polyglot.Engine-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>find</h4>
<pre>public static&nbsp;<a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler">CPUSampler</a>&nbsp;find(org.graalvm.polyglot.Engine&nbsp;engine)</pre>
<div class="block">Finds <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSampler</code></a> associated with given engine.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
</dl>
</li>
</ul>
<a name="isCollecting--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCollecting</h4>
<pre>public&nbsp;boolean&nbsp;isCollecting()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>whether or not the sampler is currently collecting data.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="setCollecting-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCollecting</h4>
<pre>public&nbsp;void&nbsp;setCollecting(boolean&nbsp;collecting)</pre>
<div class="block">Controls whether the sampler is collecting data or not.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>collecting</code> - the new state of the sampler.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="getPeriod--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPeriod</h4>
<pre>public&nbsp;long&nbsp;getPeriod()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the sampling period i.e. the time between two samples of the stack are taken, in
         milliseconds.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="setPeriod-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPeriod</h4>
<pre>public&nbsp;void&nbsp;setPeriod(long&nbsp;samplePeriod)</pre>
<div class="block">Sets the sampling period i.e. the time between two samples of the stack are taken, in
 milliseconds.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>samplePeriod</code> - the new sampling period.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="setDelay-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDelay</h4>
<pre>public&nbsp;void&nbsp;setDelay(long&nbsp;delay)</pre>
<div class="block">Sets the delay period i.e. the time that is allowed to pass between when the first sample
 would have been taken and when the sampler actually starts taking samples.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>delay</code> - the delay period.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="getStackLimit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStackLimit</h4>
<pre>public&nbsp;int&nbsp;getStackLimit()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the maximum amount of stack frames that are sampled.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="setStackLimit-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStackLimit</h4>
<pre>public&nbsp;void&nbsp;setStackLimit(int&nbsp;stackLimit)</pre>
<div class="block">Sets the maximum amount of stack frames that are sampled. Whether or not the stack grew more
 than the provided size during execution can be checked with <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#hasStackOverflowed--">CPUSampler.hasStackOverflowed()</a></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stackLimit</code> - the maximum amount of stack frames that are sampled</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="setSampleContextInitialization-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSampleContextInitialization</h4>
<pre>public&nbsp;void&nbsp;setSampleContextInitialization(boolean&nbsp;enabled)</pre>
<div class="block">Enables or disables the sampling of the time spent during context initialization. If
 <code>true</code> code executed during context initialization is included in the general
 profile instead of grouping it into a single entry by default. If <code>false</code> a single
 entry will be created that contains all time spent in initialization. This can be useful to
 avoid polluting the general application profile with sampled stack frames that only run
 during initialization.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.3</dd>
</dl>
</li>
</ul>
<a name="getFilter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilter</h4>
<pre>public&nbsp;com.oracle.truffle.api.instrumentation.SourceSectionFilter&nbsp;getFilter()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The filter describing which part of the source code to sample</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="setFilter-com.oracle.truffle.api.instrumentation.SourceSectionFilter-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFilter</h4>
<pre>public&nbsp;void&nbsp;setFilter(com.oracle.truffle.api.instrumentation.SourceSectionFilter&nbsp;filter)</pre>
<div class="block">Sets the <code>filter</code> for the sampler. The sampler will only observe
 parts of the executed source code that is specified by the filter.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filter</code> - The new filter describing which part of the source code to sample</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="hasStackOverflowed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasStackOverflowed</h4>
<pre>public&nbsp;boolean&nbsp;hasStackOverflowed()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>was the the maximum amount of stack frames that are sampled insufficient for the
         execution.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="getData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getData</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/17/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;com.oracle.truffle.api.TruffleContext,<a href="../../../../../com/oracle/truffle/tools/profiler/CPUSamplerData.html" title="class in com.oracle.truffle.tools.profiler">CPUSamplerData</a>&gt;&nbsp;getData()</pre>
<div class="block">Get per-context profiling data. The profiling data is an unmodifiable map from
 <code>TruffleContext</code> to <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSamplerData.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSamplerData</code></a>. It is collected based on the configuration
 of the <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSampler</code></a> (e.g. <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setFilter-com.oracle.truffle.api.instrumentation.SourceSectionFilter-"><code>CPUSampler.setFilter(SourceSectionFilter)</code></a>,
 <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setPeriod-long-"><code>CPUSampler.setPeriod(long)</code></a>, etc.) and collecting can be controlled by the
 <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#setCollecting-boolean-"><code>CPUSampler.setCollecting(boolean)</code></a>. The collected data can be cleared from the cpusampler using
 <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#clearData--"><code>CPUSampler.clearData()</code></a></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a map from <code>TruffleContext</code> to <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSamplerData.html" title="class in com.oracle.truffle.tools.profiler"><code>CPUSamplerData</code></a>.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>21.3.0</dd>
</dl>
</li>
</ul>
<a name="clearData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearData</h4>
<pre>public&nbsp;void&nbsp;clearData()</pre>
<div class="block">Erases all the data gathered by the sampler and resets the sample count to 0.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="hasData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasData</h4>
<pre>public&nbsp;boolean&nbsp;hasData()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>whether or not the sampler has collected any data so far.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Closes the sampler for further use, deleting all the gathered data.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/17/docs/api/java/io/Closeable.html?is-external=true#close--" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/17/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/AutoCloseable.html?is-external=true#close--" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/17/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="isGatherSelfHitTimes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isGatherSelfHitTimes</h4>
<pre>public&nbsp;boolean&nbsp;isGatherSelfHitTimes()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether or not timestamp information for the element at the top of the stack for each
         sample is gathered</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="setGatherSelfHitTimes-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setGatherSelfHitTimes</h4>
<pre>public&nbsp;void&nbsp;setGatherSelfHitTimes(boolean&nbsp;gatherSelfHitTimes)</pre>
<div class="block">Sets whether or not to gather timestamp information for the element at the top of the stack
 for each sample.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gatherSelfHitTimes</code> - new value for whether or not to gather timestamps</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.30</dd>
</dl>
</li>
</ul>
<a name="takeSample--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>takeSample</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/17/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>,<a href="http://docs.oracle.com/javase/17/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../com/oracle/truffle/tools/profiler/StackTraceEntry.html" title="class in com.oracle.truffle.tools.profiler">StackTraceEntry</a>&gt;&gt;&nbsp;takeSample()</pre>
<div class="block">Sample all threads and gather their current stack trace entries with a default time out.
 Short hand for: <a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#takeSample-long-java.util.concurrent.TimeUnit-"><code>takeSample</code></a>(this.getPeriod(),
 TimeUnit.MILLISECONDS).</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>19.0</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.html#takeSample-long-java.util.concurrent.TimeUnit-"><code>CPUSampler.takeSample(long, TimeUnit)</code></a></dd>
</dl>
</li>
</ul>
<a name="takeSample-long-java.util.concurrent.TimeUnit-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>takeSample</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/17/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/17/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>,<a href="http://docs.oracle.com/javase/17/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../com/oracle/truffle/tools/profiler/StackTraceEntry.html" title="class in com.oracle.truffle.tools.profiler">StackTraceEntry</a>&gt;&gt;&nbsp;takeSample(long&nbsp;timeout,
                                                    <a href="http://docs.oracle.com/javase/17/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;timeoutUnit)</pre>
<div class="block">Sample all threads and gather their current stack trace entries. The returned map and lists
 are unmodifiable and represent atomic snapshots of the stack at the time when this method was
 invoked. Only active threads are sampled. A thread is active if it has at least one entry on
 the stack. The sampling is initialized if this method is invoked for the first time or
 reinitialized if the configuration changes.
 <p>
 If the given timeout is exceeded the sampling will be stopped. If a timeout occurs it may
 lead to an incomplete or empty result. For example, if only one thread times out the result
 of other threads may still be reported.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>22.0</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../com/oracle/truffle/tools/profiler/CPUSampler.Payload.html" title="class in com.oracle.truffle.tools.profiler"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/oracle/truffle/tools/profiler/CPUSampler.html" target="_top">Frames</a></li>
<li><a href="CPUSampler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content='/resources/img/og-image.jpg' />
  <meta name="twitter:widgets:border-color" content="#55acee">

  <title>
    
      Embedding Languages
    
  </title>
  <meta name="description" content="GraalVM is an advanced JDK with ahead-of-time Native Image compilation."/>

  
  <link rel="canonical" href="https://www.graalvm.org/latest/reference-manual/embed-languages/">
  

  <link rel="icon" id="favicon" href='/resources/img/favicon/favicon-light/favicon-light.ico'>

  <link rel="manifest" href='/resources/img/favicon/site.webmanifest'>
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <script src='/resources/lib/jquery/jquery-3.6.1.min.js'></script>
  <link rel="stylesheet" href='/assets/main.css'>
  <script src='/resources/lib/bootstrap/js/bootstrap.min.js'></script>
  <script src='/resources/lib/sticky-sidebar/resizeSensor.js'></script>
  <script src='/resources/lib/sticky-sidebar/sticky-sidebar.min.js'></script>
  <script src='/resources/lib/highlight/highlight.pack.js'></script>
  <script src='/resources/lib/purl/purl.js'></script>
  <script src='/resources/lib/fiddle/fiddle.js' defer></script>
  <link rel="stylesheet" href='/resources/styles/fiddle.css'>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>




  <body class="preload">
    <div class="wrapper wrapper--nofooter">
      <header  class="header header--content" 
  role="banner">

  
  




  <div class="d-flex">
    <nav class="menu">
      <div class="menu__logo">
        <a class="menu__logojs" href="/">
          <img src='/resources/img/home/logo_mobile_openmenu.svg' alt="GraalVM logo">
        </a>
      </div>
      <ul class="menu__list">
        <li class="menu__item">
          <a href='/latest/docs/' class="menu__link">Docs</a>
        </li>
        <li class="menu__item">
          <a href='/guides/' class="menu__link">Guides</a>
        </li>
        <li class="menu__item">
          <a href="https://medium.com/graalvm" class="menu__link" target="_blank">Blog</a>
        </li>
        <li class="menu__item">
          <a href="https://www.youtube.com/graalvm" class="menu__link" target="_blank">Videos</a>
        </li>
        <li class="menu__item">
          <a href='/community/' class="menu__link">Community</a>
        </li>
        <li class="menu__item">
          <div class="stack-container">
            <a href="#" class="menu__link stack__header">Graal Projects</a>
            <div class="stack-menu">
              <div class="stack-row">
                <div class="stack-column">
                  <div class="stack__item">
                    <img src="/resources/img/header-navigation/graalstack.svg">
                    <a href="https://graal.cloud/" class="item-line">Graal Stack</a>
                  </div>
                  <div class="stack__item">
                    <img src="/resources/img/header-navigation/gdk.svg">
                    <a href="https://graal.cloud/gdk/" class="item-line">Graal Dev Kit for Micronaut</a>
                  </div>
                  <div class="stack__item">
                    <img src="/resources/img/header-navigation/graalos.svg">
                    <a href="https://graal.cloud/graalos/" class="item-line">GraalOS</a>
                  </div>
                </div>
                <div class="stack-column">
                  <div class="stack__item">
                    <img src="/resources/img/header-navigation/js-navi.svg">
                    <a href="/javascript/" class="item-line">GraalJS</a>
                  </div>
                  <div class="stack__item">
                    <img src="/resources/img/header-navigation/python-navi.svg">
                    <a href="/python/" class="item-line">GraalPy</a>
                  </div>
                  <div class="stack__item">
                    <img src="/resources/img/header-navigation/wasm-navi.svg">
                    <a href="/webassembly/" class="item-line">GraalWasm</a>
                  </div>
                  <div class="stack__item">
                    <img src="/resources/img/header-navigation/java-navi.svg">
                    <a href='/reference-manual/java-on-truffle/' class="item-line">Espresso</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
        <div class="menu__item icons githubstar" tabindex="0">
          <span class="github-widget">
            <a tabindex="-1" class="github-button" href="https://github.com/oracle/graal" data-icon="octicon-star"
              data-show-count="true" aria-label="Star oracle/graal on GitHub">Star</a>
          </span>
        </div>
        <div class="menu__downloads">
          <a href='/downloads/' class="btn btn-try btn-primary">Download</a>
        </div>
      </ul>
      <div role="button" class="menu-btn menu-btn--menu js-show-menu" tabindex="-1" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
    </nav>
  </div>
  
</header>
      <main class="content" aria-label="Content">
        <div class="wrapper wrapper-content">
  <article>
  <div class="row d-flex flex-wrap">
    <div class="col-sm-3 docsimpro col-bg">
      <div class="sidebar-wrap">
        <div class="sidebar">
          <div class="menuabout">
            <img id="sidebarClose" src='/resources/img/docs-sidebar/arrow-sidebar(close).svg'
              alt="Expand or collapse sidebar" class="btn-color no-display">
            <img id="sidebarOpen" src='/resources/img/docs-sidebar/arrow-sidebar.svg' alt="Expand or collapse sidebar">
          </div>
          
<div class="toc-floating">


<script>
var sidebar = document.currentScript.parentElement;


$(document).ready(function(){
  var header = $('.header').height();
  var invisibleBlock;

  $("#content-wrapper h1, #content-wrapper h2").each(function() {
    invisibleBlock = $(this).before("<div class='anchor' id="+ $(this).attr("id") +"></div>");
  });

  $(window).scroll(function() {
    var lastitem = null;
    $("#content-wrapper h1, #content-wrapper h2").each(function() {
      var heading = $(this);
      var position = (heading.position().top - heading.height()) - $(window).scrollTop();
      var listitem = $(sidebar).find("li").filter(function() {
        return $(this).find("a").attr("href") == "#" + heading.attr("id");
      });
      listitem.removeClass("toc-bullets-focused");
      if (position <= 0) {
        lastitem = listitem;
      }
    });
    if (lastitem != null) lastitem.addClass("toc-bullets-focused");
  });
});

</script>

<!-- Docs version dropdown -->
<section class="versions">
  <div class="dropdown">
    <div class="d-flex align-items-center version-dropdown">
      <input name="select_value" type="hidden" id="selectedValue">
      <div class="display-value display-version" id="displayValue" onclick="toggleOptions(event)">
        <span class="value-text" id="valueText">Version</span>
      </div>
      <ul tabindex="0" class="select-container" id="selectContainer" onblur="toggleOptions(event)">
        <li class="select-option" onclick="selected('GraalVM for JDK 24 (Latest)', 'latest');">GraalVM for JDK 24 (Latest)</li>
        <li class="select-option" onclick="selected('GraalVM for JDK 25 (Early Access)', 'jdk25');">GraalVM for JDK 25 (Early Access)</li>
        <li class="select-option" onclick="selected('GraalVM for JDK 21', 'jdk21');">GraalVM for JDK 21</li>
        <li class="select-option" onclick="selected('GraalVM for JDK 17', 'jdk17');">GraalVM for JDK 17</li>
        <li class="select-option" onclick="selected('Archives'); location='/docs/archives/'">Archives</li>
        <li class="select-option" onclick="window.open('https://github.com/oracle/graal/tree/master/docs', '_blank').focus()">Dev Build</li>
      </ul>
    </div>
  </div>
</section>

<ul class="toc-bullets">

  

  

  

  

  

  
    

    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/jdk21/docs/getting-started/">
            Getting Started
          </a>
        </li>

        
        

        
        
      
    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/jdk21/reference-manual/native-image/">
            Getting Started with Native Image
          </a>
        </li>

        
        

        
        
      
    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/jdk21/reference-manual/">
            Reference Manuals
          </a>
        </li>

        
        

        
        
          
          <li class="toc-bullets-sub">
          
            
            <a href="/jdk21/reference-manual/java/">
              Java and JVM
            </a>
          </li>

          
        
          
          <li class="toc-bullets-sub">
          
            
            <a href="/jdk21/reference-manual/graalvm-updater/">
              GraalVM Updater
            </a>
          </li>

          
        
          
          <li class="toc-bullets-sub">
          
            
            <a href="/jdk21/reference-manual/languages/">
              Graal Languages
            </a>
          </li>

          
        
          
          <li class="toc-bullets-sub toc-bullets-highlight">
          
            
            <a href="/jdk21/reference-manual/embed-languages/">
              Embedding Reference
            </a>
          </li>

          
            <div>
  <script>
    var scriptElement = document.currentScript;
    var div = $(scriptElement.parentElement);
    $(window).on("load", function() {
      $("#content-wrapper h2").each(function() {
        var li = $("<li></li>", { class: "toc-bullets-sub toc-bullets-sub-3" });
        var a = $("<a></a>", { href: "#" + $(this).attr("id") });
        a.text($(this).text().replace('#', ''));
        li.append(a);
        div.append(li);
      });
    });
  </script>
</div>
          
        
          
          <li class="toc-bullets-sub">
          
            
            <a href="/jdk21/reference-manual/polyglot-programming/">
              Polyglot Programming
            </a>
          </li>

          
        
          
          <li class="toc-bullets-sub">
          
            
            <a href="/jdk21/reference-manual/tools/">
              Tools for GraalVM Languages
            </a>
          </li>

          
        
      
    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/jdk21/graalvm-as-a-platform/">
            GraalVM as a Platform
          </a>
        </li>

        
        

        
        
      
    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/jdk21/security-guide/">
            Security Guide
          </a>
        </li>

        
        

        
        
      
    
      
        
          <li class="toc-bullets-main">
        
          
          <a href="/pages/javadocs/jdk21.html">
            SDK Javadoc for JDK 21
          </a>
        </li>

        
        

        
        
      
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</div>
        </div>
      </div>
    </div>
    <div class="col-sm-9 docsmod">
      <div id="content-wrapper" class="docs-content docs-content--with-sidebar">
        
  <ul class="breadcrumb">
    <li><a href='/'>Home</a></li>
    
    
      
      <li>
        <a href="/jdk21/">
          Jdk21
        </a>
      </li>
      
    
      
      <li>
        <a href="/jdk21/reference-manual/">
          Reference Manual
        </a>
      </li>
      
    
      
    
  </ul>


        
        <h1 id="embedding-languages">
        
        
          Embedding Languages
        
        
      </h1>

<ul>
  <li><a href="#dependency-setup">Dependency Setup</a></li>
  <li><a href="#compile-and-run-a-polyglot-application">Compile and Run a Polyglot Application</a></li>
  <li><a href="#define-guest-language-functions-as-java-values">Define Guest Language Functions as Java Values</a></li>
  <li><a href="#access-guest-languages-directly-from-java">Access Guest Languages Directly from Java</a></li>
  <li><a href="#access-java-from-guest-languages">Access Java from Guest Languages</a></li>
  <li><a href="#lookup-java-types-from-guest-languages">Lookup Java Types from Guest Languages</a></li>
  <li><a href="#computed-arrays-using-polyglot-proxies">Computed Arrays Using Polyglot Proxies</a></li>
  <li><a href="#host-access">Host Access</a></li>
  <li><a href="#runtime-optimization-support">Runtime Optimization Support</a></li>
  <li><a href="#build-native-executables-from-polyglot-applications">Build Native Executables from Polyglot Applications</a></li>
  <li><a href="#code-caching-across-multiple-contexts">Code Caching Across Multiple Contexts</a></li>
  <li><a href="#polyglot-isolates">Polyglot Isolates</a></li>
  <li><a href="#embed-guest-languages-in-java">Embed Guest Languages in Java</a></li>
  <li><a href="#build-a-shell-for-many-languages">Build a Shell for Many Languages</a></li>
  <li><a href="#step-through-with-execution-listeners">Step Through with Execution Listeners</a></li>
  <li><a href="#setting-the-heap-size">Setting the Heap Size</a></li>
  <li><a href="#compatibility-with-jsr-223-scriptengine">Compatibility with JSR-223 ScriptEngine</a></li>
</ul>

<p>The GraalVM Polyglot API lets you embed and run code from guest languages in JVM-based host applications.</p>

<p>Throughout this section, you will learn how to create a host application in Java that runs on GraalVM and directly calls a guest language.
You can use the tabs beneath each code example to choose between JavaScript, R, Ruby, and Python.</p>

<blockquote>
  <p>Note: The usage description for polyglot embeddings was revised with the GraalVM for JDK 21 (23.1.1) release. If you are still using an older GraalVM version, ensure the correct version of the documentation is displayed. More information on the change can be found in the <a href="https://www.graalvm.org/release-notes/JDK_21/">release notes</a>.</p>
</blockquote>
    
      <h2 id="dependency-setup">
        
        
          Dependency Setup <a href="#dependency-setup" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>Since GraalVM Polyglot API version 23.1.0, all necessary artifacts can be downloaded directly from Maven Central.
All artifacts relevant to embedders can be found in the Maven dependency group <a href="https://central.sonatype.com/namespace/org.graalvm.polyglot"><code>org.graalvm.polyglot</code></a>.
See the <a href="https://github.com/graalvm/polyglot-embedding-demo">polyglot embedding demonstration</a> on GitHub for a complete runnable example.</p>

<p>Here is an example Maven dependency setup that you can put into your project:</p>

<pre><code class="language-xml">&lt;dependency&gt;
	&lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;
	&lt;artifactId&gt;polyglot&lt;/artifactId&gt;
	&lt;version&gt;${graalvm.polyglot.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;
	&lt;!-- Select a language: js, ruby, python, java, llvm, wasm, languages--&gt;
	&lt;artifactId&gt;js&lt;/artifactId&gt;
	&lt;version&gt;${graalvm.polyglot.version}&lt;/version&gt;
	&lt;type&gt;pom&lt;/type&gt;
&lt;/dependency&gt;
&lt;!-- Add additional languages if needed --&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;
    &lt;!-- Select a tool: profiler, inspect, coverage, dap, tools --&gt;
	&lt;artifactId&gt;profiler&lt;/artifactId&gt;
	&lt;version&gt;${graalvm.polyglot.version}&lt;/version&gt;
	&lt;type&gt;pom&lt;/type&gt;
&lt;/dependency&gt;
&lt;!-- add additional languages if needed --&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;
	&lt;!-- Select tools: profiler, inspect, coverage, dap, tools --&gt;
	&lt;artifactId&gt;tools&lt;/artifactId&gt;
	&lt;version&gt;${graalvm.polyglot.version}&lt;/version&gt;
	&lt;type&gt;pom&lt;/type&gt;
&lt;/dependency&gt;
&lt;!-- add specific tools if needed --&gt;
</code></pre>

<blockquote>
  <p>The <code>pom</code> type is a requirement for language or tool dependencies.</p>
</blockquote>

<p>Language and tool dependencies use the <a href="https://www.oracle.com/downloads/licenses/graal-free-license.html">GraalVM Free Terms and Conditions (GFTC)</a> license
To use community-licensed versions instead, add the <code>-community</code> suffix to each artifact (for example, <code>js-community</code>).
To access <a href="#polyglot-isolates">polyglot isolate</a> artifacts, use the <code>-isolate</code> suffix instead (for example, <code>js-isolate</code>).</p>

<p>The artifacts <code>languages</code> and <code>tools</code> include all available languages and tools as dependencies.
This artifact might grow or shrink between major releases.
We recommend selecting only the needed language(s) for a production deployment.</p>

<p>Additionally, your <em>module-info.java</em> file should require <code>org.graalvm.polyglot</code> when using Java modules:</p>
<pre><code class="language-java">module com.mycompany.app {
  requires org.graalvm.polyglot;
}
</code></pre>

<p>Whether your configuration can run with a Truffle runtime optimization depends on the GraalVM JDK you use.
For further details, refer to the <a href="#runtime-optimization-support">Runtime Compilation section</a>.</p>

<p>We recommend configuring polyglot embeddings using modules and the module path whenever possible.
Be aware that using <code>org.graalvm.polyglot</code> from the class path instead will enable access to unsafe APIs for all libraries on the class path.
If the application is not yet modularized, hybrid use of the class path and module path is possible.
For example:</p>
<pre><code>$JAVA_HOME/bin/java -classpath=lib --module-path=lib/polyglot --add-modules=org.graalvm.polyglot ...
</code></pre>
<p>In this example, <code>lib/polyglot</code> folder should contain all polyglot and language jars.
In order to access polyglot classes from the class-path you also need to specify the <code>--add-modules=org.graalvm.polyglot</code> JVM option.
If you are using <a href="https://www.graalvm.org/latest/reference-manual/embed-languages/#build-native-executables-from-polyglot-applications">native-image</a> polyglot modules on the class-path will be automatically upgraded to the module-path.</p>

<p>While we do support creating single uber Jars from polyglot libraries, e.g. using the Maven Assembly plugin, we do not recommend it.
Also note that Uber jars are not supported in combination with creating native-images.</p>
    
      <h2 id="compile-and-run-a-polyglot-application">
        
        
          Compile and Run a Polyglot Application <a href="#compile-and-run-a-polyglot-application" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>GraalVM can run polyglot applications written in any language implemented with the <a href="/jdk21/graalvm-as-a-platform/language-implementation-framework/">Truffle language implementation framework</a>.
These languages are henceforth referenced as <strong>guest languages</strong>.</p>

<p>Complete the steps in this section to create a sample polyglot application that runs on GraalVM and demonstrates programming language interoperability.</p>

<ol>
  <li>
    <p>Create a new Java project using Maven.</p>
  </li>
  <li>Clone the <a href="https://github.com/graalvm/polyglot-embedding-demo/">polyglot-embedding-demo</a> repository:
    <pre><code class="language-bash"> git clone https://github.com/graalvm/polyglot-embedding-demo.git
</code></pre>
  </li>
  <li>
    <p>Insert the example code into the <a href="https://github.com/graalvm/polyglot-embedding-demo/blob/main/src/main/java/org/example/embedding/Main.java">Main class</a>.</p>
  </li>
  <li>
    <p>Update the Maven <a href="https://github.com/graalvm/polyglot-embedding-demo/blob/main/pom.xml">pom.xml</a> dependency configuration to include the languages to run as described in the <a href="#dependency-setup">previous section</a>.</p>
  </li>
  <li>
    <p><a href="/jdk21/docs/getting-started/">Download and setup GraalVM</a> by setting the <code>JAVA_HOME</code> environment variable to point to a GraalVM JDK.</p>
  </li>
  <li>Run <code>mvn package exec:exec</code> to build and execute the sample code.</li>
</ol>

<p>You now have a polyglot application that consists of a Java host application and guest language code, running on GraalVM.
You can use this application with other code examples to demonstrate more advanced capabilities of the Polyglot API.</p>
    
      <h2 id="define-guest-language-functions-as-java-values">
        
        
          Define Guest Language Functions as Java Values <a href="#define-guest-language-functions-as-java-values" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>Polyglot applications let you take values from one programming language and use them with other languages.</p>

<p>Use the code example in this section with your polyglot application to show how the Polyglot API can return JavaScript or Python functions as Java values.</p>

<div class="tabs-below">

<div class="tab-content">
  
  <div id="Function_JS" class="tab-pane fade in active">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">function_js</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// BEGIN-SNIPPET</span>
<span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">create</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">Value</span> <span class="n">function</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"js"</span><span class="o">,</span> <span class="s">"x =&gt; x+1"</span><span class="o">);</span>
    <span class="k">assert</span> <span class="n">function</span><span class="o">.</span><span class="na">canExecute</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="mi">41</span><span class="o">).</span><span class="na">asInt</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">42</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
    <span class="o">}</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  <div id="Function_Python" class="tab-pane fade">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">function_python</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// BEGIN-SNIPPET</span>
<span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">create</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">Value</span> <span class="n">function</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> <span class="s">"lambda x: x + 1"</span><span class="o">);</span>
    <span class="k">assert</span> <span class="n">function</span><span class="o">.</span><span class="na">canExecute</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="mi">41</span><span class="o">).</span><span class="na">asInt</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">42</span><span class="o">;</span>
<span class="o">}</span>
 <span class="c1">// END-SNIPPET</span>
    <span class="o">}</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  
  
</div>

<ul class="nav nav-tabs">
  
  <li><a class="active" data-toggle="tab" href="#Function_JS">JavaScript</a></li>
  
  
  <li><a data-toggle="tab" href="#Function_Python">Python</a></li>
  
  
  
  
  
</ul>

</div>

<p>In this code:</p>
<ul>
  <li><code>Value function</code> is a Java value that refers to a function.</li>
  <li>The <code>eval</code> call parses the script and returns the guest language function.</li>
  <li>The first assertion checks that the value returned by the code snippet can be executed.</li>
  <li>The <code>execute</code> call executes the function with the argument <code>41</code>.</li>
  <li>The <code>asInt</code> call converts the result to a Java <code>int</code>.</li>
  <li>The second assertion verifies that the result was incremented by one as expected.</li>
</ul>
    
      <h2 id="access-guest-languages-directly-from-java">
        
        
          Access Guest Languages Directly from Java <a href="#access-guest-languages-directly-from-java" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>Polyglot applications can readily access most language types and are not limited to functions.
Host languages, such as Java, can directly access guest language values embedded in the polyglot application.</p>

<p>Use the code example in this section with your polyglot application to show how the Polyglot API can access objects, numbers, strings, and arrays.</p>

<div class="tabs-below">

<div class="tab-content">
  
  <div id="Access_JS" class="tab-pane fade in active">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">access_js_from_java</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// BEGIN-SNIPPET</span>
<span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">create</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">Value</span> <span class="n">result</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"js"</span><span class="o">,</span> 
                    <span class="s">"({ "</span>                   <span class="o">+</span>
                        <span class="s">"id   : 42, "</span>       <span class="o">+</span>
                        <span class="s">"text : '42', "</span>     <span class="o">+</span>
                        <span class="s">"arr  : [1,42,3] "</span>  <span class="o">+</span>
                    <span class="s">"})"</span><span class="o">);</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="na">hasMembers</span><span class="o">();</span>

    <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getMember</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">asInt</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">id</span> <span class="o">==</span> <span class="mi">42</span><span class="o">;</span>

    <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getMember</span><span class="o">(</span><span class="s">"text"</span><span class="o">).</span><span class="na">asString</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">text</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"42"</span><span class="o">);</span>

    <span class="n">Value</span> <span class="n">array</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getMember</span><span class="o">(</span><span class="s">"arr"</span><span class="o">);</span>
    <span class="k">assert</span> <span class="n">array</span><span class="o">.</span><span class="na">hasArrayElements</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">array</span><span class="o">.</span><span class="na">getArraySize</span><span class="o">()</span> <span class="o">==</span> <span class="mi">3</span><span class="o">;</span>
    <span class="k">assert</span> <span class="n">array</span><span class="o">.</span><span class="na">getArrayElement</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">asInt</span><span class="o">()</span> <span class="o">==</span> <span class="mi">42</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
    <span class="o">}</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  <div id="Access_Python" class="tab-pane fade">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">access_python_from_java</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// BEGIN-SNIPPET</span>
<span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">create</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">Value</span> <span class="n">result</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span> 
                    <span class="s">"type('obj', (object,), {"</span> <span class="o">+</span>
                        <span class="s">"'id'  : 42, "</span>         <span class="o">+</span>
                        <span class="s">"'text': '42', "</span>       <span class="o">+</span>
                        <span class="s">"'arr' : [1,42,3]"</span>     <span class="o">+</span>
                    <span class="s">"})()"</span><span class="o">);</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="na">hasMembers</span><span class="o">();</span>
    
    <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getMember</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">asInt</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">id</span> <span class="o">==</span> <span class="mi">42</span><span class="o">;</span>
    
    <span class="n">String</span> <span class="n">text</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getMember</span><span class="o">(</span><span class="s">"text"</span><span class="o">).</span><span class="na">asString</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">text</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"42"</span><span class="o">);</span>
    
    <span class="n">Value</span> <span class="n">array</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">getMember</span><span class="o">(</span><span class="s">"arr"</span><span class="o">);</span>
    <span class="k">assert</span> <span class="n">array</span><span class="o">.</span><span class="na">hasArrayElements</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">array</span><span class="o">.</span><span class="na">getArraySize</span><span class="o">()</span> <span class="o">==</span> <span class="mi">3</span><span class="o">;</span>
    <span class="k">assert</span> <span class="n">array</span><span class="o">.</span><span class="na">getArrayElement</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">asInt</span><span class="o">()</span> <span class="o">==</span> <span class="mi">42</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
    <span class="o">}</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  
  
</div>

<ul class="nav nav-tabs">
  
  <li><a class="active" data-toggle="tab" href="#Access_JS">JavaScript</a></li>
  
  
  <li><a data-toggle="tab" href="#Access_Python">Python</a></li>
  
  
  
  
  
</ul>

</div>

<p>In this code:</p>
<ul>
  <li><code>Value result</code> is an Object that contains three members: a number named <code>id</code>, a string named <code>text</code>, and an array named <code>arr</code>.</li>
  <li>The first assertion verifies that the return value can contain members, which indicates that the value is an object-like structure.</li>
  <li>The <code>id</code> variable is initialized by reading the member with the name <code>id</code> from the resulting object. The result is then converted to a Java <code>int</code> using <code>asInt()</code>.</li>
  <li>The next assert verifies that result has a value of <code>42</code>.</li>
  <li>The <code>text</code> variable is initialized using the value of the member <code>text</code>, which is also converted to a Java <code>String</code> using <code>asString()</code>.</li>
  <li>The following assertion verifies the result value is equal to the Java <code>String</code> <code>"42"</code>.</li>
  <li>Next the <code>arr</code> member that holds an array is read.</li>
  <li>Arrays return <code>true</code> for <code>hasArrayElements</code>.</li>
  <li>The next assertion verifies that the size of the array equals three. The Polyglot API supports big arrays, so the array length is of type <code>long</code>.</li>
  <li>Finally we verify that the array element at index <code>1</code> equals <code>42</code>. Array indexing with polyglot values is always zero-based, even for languages where indices start with one.</li>
</ul>
    
      <h2 id="access-java-from-guest-languages">
        
        
          Access Java from Guest Languages <a href="#access-java-from-guest-languages" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>Polyglot applications offer bi-directional access between guest languages and host languages.
As a result, you can pass Java objects to guest languages.</p>

<p>Since the Polyglot API is secure by default, access is limited in the default configuration.
To permit guest languages to access any public method or field of a Java object, you have to explicitly specify <code>allowAllAccess(true)</code> when the context is built.
In this mode, the guest language code can access any resource that is accessible to host Java code.</p>

<p>Use the code example in this section with your polyglot application to show how guest languages can access primitive Java values, objects, arrays, and functional interfaces.</p>

<div class="tabs-below">

<div class="tab-content">
  
  <div id="Access_Java_from_JS" class="tab-pane fade in active">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Callable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">access_java_from_js</span> <span class="o">{</span>

<span class="c1">// BEGIN-SNIPPET</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span>               <span class="n">id</span>    <span class="o">=</span> <span class="mi">42</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">String</span>            <span class="n">text</span>  <span class="o">=</span> <span class="s">"42"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span><span class="o">[]</span>             <span class="n">arr</span>   <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="mi">3</span><span class="o">};</span>
    <span class="kd">public</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ret42</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="mi">42</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                               <span class="o">.</span><span class="na">allowAllAccess</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                           <span class="o">.</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">context</span><span class="o">.</span><span class="na">getBindings</span><span class="o">(</span><span class="s">"js"</span><span class="o">).</span><span class="na">putMember</span><span class="o">(</span><span class="s">"javaObj"</span><span class="o">,</span> <span class="k">new</span> <span class="n">MyClass</span><span class="o">());</span>
        <span class="kt">boolean</span> <span class="n">valid</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"js"</span><span class="o">,</span>
               <span class="s">"    javaObj.id         == 42"</span>          <span class="o">+</span>
               <span class="s">" &amp;&amp; javaObj.text       == '42'"</span>        <span class="o">+</span>
               <span class="s">" &amp;&amp; javaObj.arr[1]     == 42"</span>          <span class="o">+</span>
               <span class="s">" &amp;&amp; javaObj.ret42()    == 42"</span><span class="o">)</span>
           <span class="o">.</span><span class="na">asBoolean</span><span class="o">();</span>
        <span class="k">assert</span> <span class="n">valid</span> <span class="o">==</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  <div id="Access_Java_from_Python" class="tab-pane fade">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.Callable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">access_java_from_python</span> <span class="o">{</span>

<span class="c1">// BEGIN-SNIPPET</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span>               <span class="n">id</span>    <span class="o">=</span> <span class="mi">42</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">String</span>            <span class="n">text</span>  <span class="o">=</span> <span class="s">"42"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span><span class="o">[]</span>             <span class="n">arr</span>   <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">42</span><span class="o">,</span> <span class="mi">3</span><span class="o">};</span>
    <span class="kd">public</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ret42</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="mi">42</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                               <span class="o">.</span><span class="na">allowAllAccess</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                           <span class="o">.</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">context</span><span class="o">.</span><span class="na">getPolyglotBindings</span><span class="o">().</span><span class="na">putMember</span><span class="o">(</span><span class="s">"javaObj"</span><span class="o">,</span> <span class="k">new</span> <span class="n">MyClass</span><span class="o">());</span>
        <span class="kt">boolean</span> <span class="n">valid</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span>
               <span class="s">"import polyglot \n"</span>                            <span class="o">+</span>
               <span class="s">"javaObj =  polyglot.import_value('javaObj')\n"</span> <span class="o">+</span>
               <span class="s">"javaObj.id                   == 42"</span>            <span class="o">+</span>
               <span class="s">" and javaObj.text            == '42'"</span>          <span class="o">+</span>
               <span class="s">" and javaObj.arr[1]          == 42"</span>            <span class="o">+</span>
               <span class="s">" and javaObj.ret42() == 42"</span><span class="o">)</span>
           <span class="o">.</span><span class="na">asBoolean</span><span class="o">();</span>
        <span class="k">assert</span> <span class="n">valid</span> <span class="o">==</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  
  
</div>

<ul class="nav nav-tabs">
  
  <li><a class="active" data-toggle="tab" href="#Access_Java_from_JS">JavaScript</a></li>
  
  
  <li><a data-toggle="tab" href="#Access_Java_from_Python">Python</a></li>
  
  
  
  
  
</ul>

</div>

<p>In this code:</p>
<ul>
  <li>The Java class <code>MyClass</code> has four public fields <code>id</code>, <code>text</code>, <code>arr</code>, and
<code>ret42</code>. The fields are initialized with <code>42</code>, <code>"42"</code>, <code>new int[]{1, 42, 3}</code>, and
lambda <code>() -&gt; 42</code> that always returns an <code>int</code> value of <code>42</code>.</li>
  <li>The Java class <code>MyClass</code> is instantiated and exported with the name <code>javaObj</code>
into the polyglot scope, which allows the host and guest languages to exchange
symbols.</li>
  <li>A guest language script is evaluated that imports the <code>javaObj</code> symbol and
assigns it to the local variable which is also named <code>javaObj</code>. To avoid
conflicts with variables, every value in the polyglot scope must be explicitly
imported and exported in the top-most scope of the language.</li>
  <li>The next two lines verify the contents of the Java object by comparing it
to the number <code>42</code> and the string <code>'42'</code>.</li>
  <li>The third verification reads from the second array position and compares it
to the number <code>42</code>. Whether arrays are accessed using 0-based or 1-based indices
depends on the guest language. Independently of the language, the Java array
stored in the <code>arr</code> field is always accessed using translated 0-based indices. For
example, in the JavaScript and Ruby languages, the second
array element is at index <code>1</code>. In all language examples, the Java array is read
from using the same index <code>1</code>.</li>
  <li>The last line invokes the Java lambda that is contained in the field <code>ret42</code>
and compares the result to the number value <code>42</code>.</li>
  <li>After the guest language script executes, validation takes place to ensure
that the script returns a <code>boolean</code> value of <code>true</code> as a result.</li>
</ul>
    
      <h2 id="lookup-java-types-from-guest-languages">
        
        
          Lookup Java Types from Guest Languages <a href="#lookup-java-types-from-guest-languages" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>In addition to passing Java objects to the guest language, it is possible to allow the lookup of Java types in the guest language.</p>

<p>Use the code example in this section with your polyglot application to show how guest languages lookup Java types and instantiate them.</p>

<div class="tabs-below">

<div class="tab-content">
  
  <div id="Lookup_Java_from_JS" class="tab-pane fade in active">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.Context</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">lookup_java_from_js</span> <span class="o">{</span>


<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// BEGIN-SNIPPET</span>
<span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                           <span class="o">.</span><span class="na">allowAllAccess</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                       <span class="o">.</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">java</span><span class="o">.</span><span class="na">math</span><span class="o">.</span><span class="na">BigDecimal</span> <span class="n">v</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"js"</span><span class="o">,</span>
            <span class="s">"var BigDecimal = Java.type('java.math.BigDecimal');"</span> <span class="o">+</span>
            <span class="s">"BigDecimal.valueOf(10).pow(20)"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">asHostObject</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"100000000000000000000"</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
<span class="o">}</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  <div id="Lookup_Java_from_Python" class="tab-pane fade">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.Context</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">lookup_java_from_python</span> <span class="o">{</span>


<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// BEGIN-SNIPPET</span>
<span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                           <span class="o">.</span><span class="na">allowAllAccess</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                       <span class="o">.</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">java</span><span class="o">.</span><span class="na">math</span><span class="o">.</span><span class="na">BigDecimal</span> <span class="n">v</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span>
            <span class="s">"import java\n"</span> <span class="o">+</span>
            <span class="s">"BigDecimal = java.type('java.math.BigDecimal')\n"</span> <span class="o">+</span> 
            <span class="s">"BigDecimal.valueOf(10).pow(20)"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">asHostObject</span><span class="o">();</span>
    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"100000000000000000000"</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
<span class="o">}</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  
  
</div>

<ul class="nav nav-tabs">
  
  <li><a class="active" data-toggle="tab" href="#Lookup_Java_from_JS">JavaScript</a></li>
  
  
  <li><a data-toggle="tab" href="#Lookup_Java_from_Python">Python</a></li>
  
  
  
  
  
</ul>

</div>

<p>In this code:</p>
<ul>
  <li>A new context is created with all access enabled (<code>allowAllAccess(true)</code>).</li>
  <li>A guest language script is evaluated.</li>
  <li>The script looks up the Java type <code>java.math.BigDecimal</code> and stores it in a variable named <code>BigDecimal</code>.</li>
  <li>The static method <code>BigDecimal.valueOf(long)</code> is invoked to create new
<code>BigDecimal</code>s with value <code>10</code>. In addition to looking up static Java methods, it
is also possible to directly instantiate the returned Java type., e.g., in
JavaScript using the <code>new</code> keyword.</li>
  <li>The new decimal is used to invoke the <code>pow</code> instance method with <code>20</code> which calculates  <code>10^20</code>.</li>
  <li>The result of the script is converted to a host object by calling <code>asHostObject()</code>. The return value is automatically cast to the <code>BigDecimal</code> type.</li>
  <li>The result decimal string is asserted to equal to <code>"100000000000000000000"</code>.</li>
</ul>
    
      <h2 id="computed-arrays-using-polyglot-proxies">
        
        
          Computed Arrays Using Polyglot Proxies <a href="#computed-arrays-using-polyglot-proxies" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>The Polyglot API includes polyglot proxy interfaces that let you customize Java interoperability by mimicking guest language types, such as objects, arrays, native objects, or primitives.</p>

<p>Use the code example in this section with your polyglot application to see how you can implement arrays that compute their values lazily.</p>

<blockquote>
  <p>Note: The Polyglot API supports polyglot proxies either on the JVM or in Native Image.</p>
</blockquote>

<div class="tabs-below">

<div class="tab-content">
  
  <div id="Proxy_JS" class="tab-pane fade in active">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.proxy.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">proxy_js</span> <span class="o">{</span>

<span class="c1">// BEGIN-SNIPPET</span>
<span class="kd">static</span> <span class="kd">class</span> <span class="nc">ComputedArray</span> <span class="kd">implements</span> <span class="n">ProxyArray</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">get</span><span class="o">(</span><span class="kt">long</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">index</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">set</span><span class="o">(</span><span class="kt">long</span> <span class="n">index</span><span class="o">,</span> <span class="n">Value</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">UnsupportedOperationException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">create</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">ComputedArray</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ComputedArray</span><span class="o">();</span>
        <span class="n">context</span><span class="o">.</span><span class="na">getBindings</span><span class="o">(</span><span class="s">"js"</span><span class="o">).</span><span class="na">putMember</span><span class="o">(</span><span class="s">"arr"</span><span class="o">,</span> <span class="n">arr</span><span class="o">);</span>
        <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"js"</span><span class="o">,</span>
                    <span class="s">"arr[1] + arr[1000000000]"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">asLong</span><span class="o">();</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">2000000002L</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  <div id="Proxy_Python" class="tab-pane fade">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.Value</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.proxy.ProxyArray</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">proxy_python</span> <span class="o">{</span>

<span class="c1">// BEGIN-SNIPPET</span>
<span class="kd">static</span> <span class="kd">class</span> <span class="nc">ComputedArray</span> <span class="kd">implements</span> <span class="n">ProxyArray</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">get</span><span class="o">(</span><span class="kt">long</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">index</span> <span class="o">*</span> <span class="mi">2</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">set</span><span class="o">(</span><span class="kt">long</span> <span class="n">index</span><span class="o">,</span> <span class="n">Value</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">UnsupportedOperationException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">()</span>
                               <span class="o">.</span><span class="na">allowAllAccess</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                           <span class="o">.</span><span class="na">build</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">ComputedArray</span> <span class="n">arr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ComputedArray</span><span class="o">();</span>
        <span class="n">context</span><span class="o">.</span><span class="na">getPolyglotBindings</span><span class="o">().</span><span class="na">putMember</span><span class="o">(</span><span class="s">"arr"</span><span class="o">,</span> <span class="n">arr</span><span class="o">);</span>
        <span class="kt">long</span> <span class="n">result</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"python"</span><span class="o">,</span>
               <span class="s">"import polyglot\n"</span> <span class="o">+</span>
               <span class="s">"arr = polyglot.import_value('arr') \n"</span> <span class="o">+</span>
               <span class="s">"arr[1] + arr[1000000000]"</span><span class="o">)</span>
           <span class="o">.</span><span class="na">asLong</span><span class="o">();</span>
        <span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">2000000002L</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  
  
</div>

<ul class="nav nav-tabs">
  
  <li><a class="active" data-toggle="tab" href="#Proxy_JS">JavaScript</a></li>
  
  
  <li><a data-toggle="tab" href="#Proxy_Python">Python</a></li>
  
  
  
  
  
</ul>

</div>

<p>In this code:</p>
<ul>
  <li>The Java class <code>ComputedArray</code> implements the proxy interface <code>ProxyArray</code> so
that guest languages treat instances of the Java class like arrays.</li>
  <li><code>ComputedArray</code> array overrides the method <code>get</code> and computes the value
using an arithmetic expression.</li>
  <li>The array proxy does not support write access. For this reason, it throws
an <code>UnsupportedOperationException</code> in the implementation of <code>set</code>.</li>
  <li>The implementation for <code>getSize</code> returns <code>Long.MAX_VALUE</code> for its length.</li>
  <li>The main method creates a new polyglot execution context.</li>
  <li>A new instance of the <code>ComputedArray</code> class is then exported using the name <code>arr</code>.</li>
  <li>The guest language script imports the <code>arr</code> symbol, which returns the
exported proxy.</li>
  <li>The second element and the <code>1000000000</code>th element is accessed, summed up, and
then returned. Note that array indices from 1-based languages are
converted to 0-based indices for proxy arrays.</li>
  <li>The result of the language script is returned as a long value and verified.</li>
</ul>

<p>For more information about the polyglot proxy interfaces, see the <a href="http://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/package-summary.html">Polyglot API JavaDoc</a>.</p>
    
      <h2 id="host-access">
        
        
          Host Access <a href="#host-access" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>The Polyglot API by default restricts access to certain critical functionality, such as file I/O.
These restrictions can be lifted entirely by setting <code>allowAllAccess</code> to <code>true</code>.</p>

<blockquote>
  <p>Note: The access restrictions are currently only supported with JavaScript.</p>
</blockquote>
    
      <h3 id="controlling-access-to-host-functions">
        
        
          Controlling Access to Host Functions <a href="#controlling-access-to-host-functions" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>It might be desirable to limit the access of guest applications to the host.
For example, if a Java method is exposed that calls <code>System.exit</code>, then the guest application will be able to exit the host process.
In order to avoid accidentally exposed methods, no host access is allowed by default and every public method or field needs to be annotated with <code>@HostAccess.Export</code> explicitly.</p>

<div class="tabs-below">

<div class="tab-content">
  
  <div id="ExplicitHostAccess_js" class="tab-pane fade in active">
    <div class="snippet-container">

  

  
<figure class="highlight"><pre><code class="language-java" data-lang="java">  <span class="c1">// COMPILE-CMD: javac {file}</span>
<span class="c1">// RUN-CMD: java -ea {file}</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.HostAccess</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.graalvm.polyglot.PolyglotException</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">explicit_access_java_from_js</span> <span class="o">{</span>

<span class="kd">static</span>
<span class="c1">// BEGIN-SNIPPET</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Employee</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="n">Employee</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;}</span>

    <span class="nd">@HostAccess</span><span class="o">.</span><span class="na">Export</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//END-SNIPPET</span>
<span class="kd">static</span>
<span class="c1">//BEGIN-SNIPPET</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Services</span> <span class="o">{</span>
    <span class="nd">@HostAccess</span><span class="o">.</span><span class="na">Export</span>
    <span class="kd">public</span> <span class="n">Employee</span> <span class="nf">createEmployee</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Employee</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exitVM</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">(</span><span class="n">Context</span> <span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="o">.</span><span class="na">create</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">Services</span> <span class="n">services</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Services</span><span class="o">();</span>
        <span class="n">context</span><span class="o">.</span><span class="na">getBindings</span><span class="o">(</span><span class="s">"js"</span><span class="o">).</span><span class="na">putMember</span><span class="o">(</span><span class="s">"services"</span><span class="o">,</span> <span class="n">services</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"js"</span><span class="o">,</span>
                <span class="s">"let emp = services.createEmployee('John Doe');"</span> <span class="o">+</span> 
                <span class="s">"emp.getName()"</span><span class="o">).</span><span class="na">asString</span><span class="o">();</span>
        <span class="k">assert</span> <span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"John Doe"</span><span class="o">);</span>
        
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">context</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">"js"</span><span class="o">,</span> <span class="s">"services.exitVM()"</span><span class="o">);</span>
            <span class="k">assert</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">PolyglotException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">assert</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">().</span><span class="na">endsWith</span><span class="o">(</span>
                    <span class="s">"Unknown identifier: exitVM"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// END-SNIPPET</span>
<span class="o">}</span>

  </code></pre></figure>


  

  <script>
  var beginPattern = "BEGIN-SNIPPET";
  var endPattern = "END-SNIPPET";
  var parent = document.currentScript.parentElement;
  $(parent).find("figure > pre > code").each(function() {
    var lines = this.textContent.split("\n");
    var snippets = [];
    var part = "";
    for(var line of lines) {
      if (line.includes(endPattern)) {
        snippets.push(part);
        part = "";
      }
      part += line + "\n";
      if (line.includes(beginPattern)) {
        snippets.push(part);
        part = "";
      }
    }
    snippets.push(part);
    parent._snippets = snippets;
    this.textContent = snippets.filter(function (_, index) { return index & 1; }).join("\n");
  });
  </script>
</div>

  </div>
  
  
  
  
  
</div>

<ul class="nav nav-tabs">
  
  <li><a class="active" data-toggle="tab" href="#ExplicitHostAccess_js">JavaScript</a></li>
  
  
  
  
  
  
</ul>

</div>

<p>In this code:</p>
<ul>
  <li>The class <code>Employee</code> is declared with a field <code>name</code> of type <code>String</code>. Access to the <code>getName</code> method is explicitly allowed by annotating the method with <code>@HostAccess.Export</code>.</li>
  <li>The <code>Services</code> class exposes two methods, <code>createEmployee</code> and <code>exitVM</code>. The <code>createEmployee</code> method takes the name of the employee as an argument and creates a new <code>Employee</code> instance. The <code>createEmployee</code> method is annotated with <code>@HostAccess.Export</code> and therefore accessible to the guest application. The <code>exitVM</code> method is not explicitly exported and therefore not accessible.</li>
  <li>The <code>main</code> method first creates a new polyglot context in the default configuration, disallowing host access except for methods annotated with <code>@HostAccess.Export</code>.</li>
  <li>A new <code>Services</code> instance is created and put into the context as global variable <code>services</code>.</li>
  <li>The first evaluated script creates a new employee using the services object and returns its name.</li>
  <li>The returned name is asserted to equal the expected name <code>John Doe</code>.</li>
  <li>A second script is evaluated that calls the <code>exitVM</code> method on the services object. This fails with a <code>PolyglotException</code> as the exitVM method is not exposed to the guest application.</li>
</ul>

<p>Host access is fully customizable by creating a custom <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/HostAccess.html"><code>HostAccess</code></a> policy.</p>
    
      <h3 id="controlling-host-callback-parameter-scoping">
        
        
          Controlling Host Callback Parameter Scoping <a href="#controlling-host-callback-parameter-scoping" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>By default, a <code>Value</code> lives as long as the corresponding <code>Context</code>.
However, it may be desireable to change this default behavior and bind a value to a scope, such that when execution leaves the scope, the value is invalidated.
An example for such a scope are guest-to-host callbacks, where a <code>Value</code> may be passed as a callback parameter.
We have already seen above how passing callback parameters works with the default <code>HostAccess.EXPLICIT</code>:</p>

<pre><code class="language-java">public class Services {
    Value lastResult;

    @HostAccess.Export
    public void callback(Value result) {
        this.lastResult = result;
    }

    String getResult() {
        return this.lastResult.asString();
    }
}

public static void main(String[] args) {
    Services s = new Services()
    try (Context context = Context.newBuilder().allowHostAccess(HostAccess.EXPLICIT).build()) {
        context.getBindings("js").putMember("services", s);
        context.eval("js", "services.callback('Hello from JS');");
        System.out.println(s.getResult());
    }
}
</code></pre>

<p>In this example, <code>lastResult</code> maintains a reference to the value from the guest that is stored on the host and remains accessible also after the scope of <code>callback()</code> has ended.</p>

<p>However, this is not always desireable, as keeping the value alive may block resources unnecessarily or not reflect the behavior of ephemeral values correctly.
For these cases, <code>HostAccess.SCOPED</code> can be used, which changes the default behavior for all callbacks, such that values that are passed as callback parameters are only valid for the duration of the callback.</p>

<p>To make the above code work with <code>HostAccess.SCOPED</code>, individual values passed as a callback parameters can be pinned to extend their validity until after the callback returns:</p>
<pre><code class="language-java">public class Services {
    Value lastResult;

    @HostAccess.Export
    void callback(Value result, Value notneeded) {
        this.lastResult = result;
        this.lastResult.pin();
    }

    String getResult() {
        return this.lastResult.asString();
    }
}

public static void main(String[] args) {
    Services s = new Services()
    try (Context context = Context.newBuilder().allowHostAccess(HostAccess.SCOPED).build()) {
        context.getBindings("js").putMember("services", s);
        context.eval("js", "services.callback('Hello from JS', 'foobar');");
        System.out.println(services.getResult());
    }
}
</code></pre>

<p>Alternatively, the entire callback method can opt out from scoping if annotated with <code>@HostAccess.DisableMethodScope</code>, maintaining regular semantics for all parameters of the callback:</p>
<pre><code class="language-java">public class Services {
    Value lastResult;
    Value metaInfo;

    @HostAccess.Export
    @HostAccess.DisableMethodScope
    void callback(Value result, Value metaInfo) {
        this.lastResult = result;
        this.metaInfo = metaInfo;
    }

    String getResult() {
        return this.lastResult.asString() + this.metaInfo.asString();
    }
}

public static void main(String[] args) {
    Services s = new Services()
    try (Context context = Context.newBuilder().allowHostAccess(HostAccess.SCOPED).build()) {
        context.getBindings("js").putMember("services", s);
        context.eval("js", "services.callback('Hello from JS', 'foobar');");
        System.out.println(services.getResult());
    }
}
</code></pre>
    
      <h3 id="access-privilege-configuration">
        
        
          Access Privilege Configuration <a href="#access-privilege-configuration" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>It is possible to configure fine-grained access privileges for guest applications.
The configuration can be provided using the <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html"><code>Context.Builder</code></a> class when constructing a new context.
The following access parameters may be configured:</p>

<ul>
  <li>Allow access to other languages using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowPolyglotAccess-org.graalvm.polyglot.PolyglotAccess-"><code>allowPolyglotAccess</code></a>.</li>
  <li>Allow and customize access to host objects using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowHostAccess-org.graalvm.polyglot.HostAccess-"><code>allowHostAccess</code></a>.</li>
  <li>Allow and customize host lookup to host types using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowHostClassLookup-java.util.function.Predicate-"><code>allowHostClassLookup</code></a>. Allows the guest application to look up the host application classes permitted by the lookup predicate. For example, a Javascript context can create a Java ArrayList, provided that ArrayList is allowlisted by the <code>classFilter</code> and access is permitted by the host access policy: <code>context.eval("js", "var array = Java.type('java.util.ArrayList')")</code></li>
  <li>Allow host class loading using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowHostClassLoading-boolean-"><code>allowHostClassLoading</code></a>. Classes are only accessible if access to them is granted by the host access policy.</li>
  <li>Allow the creation of threads using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowCreateThread-boolean-"><code>allowCreateThread</code></a>.</li>
  <li>Allow access to native APIs using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowNativeAccess-boolean-"><code>allowNativeAccess</code></a>.</li>
  <li>Allow access to IO using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#allowIO-boolean-"><code>allowIO</code></a> and proxy file accesses using <a href="https://www.graalvm.org/truffle/javadoc/org/graalvm/polyglot/Context.Builder.html#fileSystem-org.graalvm.polyglot.io.FileSystem-"><code>fileSystem</code></a>.</li>
</ul>

<blockquote>
  <p>Note: Granting access to class loading, native APIs, or host I/O effectively grants all access, as these privileges can be used to bypass other access restrictions.</p>
</blockquote>
    
      <h2 id="runtime-optimization-support">
        
        
          Runtime Optimization Support <a href="#runtime-optimization-support" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>Polyglot Truffle runtimes can be used on several host virtual machines with varying support for runtime optimization.
Runtime optimization of guest application code is crucial for the efficient execution of embedded guest applications.
This table shows the level of optimizations the Java runtimes currently provide:</p>

<table>
  <thead>
    <tr>
      <th>Java Runtime</th>
      <th>Runtime Optimization Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Oracle GraalVM</td>
      <td>Optimized with additional compiler passes</td>
    </tr>
    <tr>
      <td>GraalVM Community Edition</td>
      <td>Optimized</td>
    </tr>
    <tr>
      <td>Oracle JDK</td>
      <td>Optimized if enabled via experimental VM option</td>
    </tr>
    <tr>
      <td>OpenJDK</td>
      <td>Optimized if enabled via experimental VM option</td>
    </tr>
    <tr>
      <td>JDK without JVMCI capability</td>
      <td>No runtime optimizations (interpreter-only)</td>
    </tr>
  </tbody>
</table>
    
      <h3 id="explanations">
        
        
          Explanations <a href="#explanations" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<ul>
  <li><strong>Optimized:</strong> Executed guest application code can be compiled and executed as highly efficient machine code at run time.</li>
  <li><strong>Optimized with additional compiler passes:</strong> Oracle GraalVM implements additional optimizations performed during run-time compilation. For example, it uses a more advanced inlining heuristic. This typically leads to better run-time performance and memory consumption.</li>
  <li><strong>Optimized if enabled via experimental VM option:</strong> Optimization is not enabled by default and must be enabled using <code>-XX:+EnableJVMCI</code> virtual machine option. In addition, to support compilation, the Graal compiler must be downloaded as a JAR file and put on the <code>--upgrade-module-path</code>. In this mode, the compiler runs as a Java application and may negatively affect the execution performance of the host application.</li>
  <li><strong>No runtime optimizations:</strong> With no runtime optimizations or if JVMCI is not enabled, the guest application code is executed in interpreter-only mode.</li>
  <li><strong>JVMCI:</strong> Refers to the <a href="https://openjdk.org/jeps/243">Java-Level JVM Compiler Interface</a> supported by most Java runtimes.</li>
</ul>

<p>A project has been created to enable run-time optimization by default for Oracle JDK and OpenJDK.
See <a href="https://openjdk.org/projects/galahad/">Project Galahad</a> for further details.</p>
    
      <h3 id="enable-optimization-on-openjdk-and-oracle-jdk">
        
        
          Enable Optimization on OpenJDK and Oracle JDK <a href="#enable-optimization-on-openjdk-and-oracle-jdk" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>When running on a JDK run-time optimization enabled by default, like OpenJDK, you might see a warning like this:</p>

<pre><code>[engine] WARNING: The polyglot engine uses a fallback runtime that does not support runtime compilation to machine code.
Execution without runtime compilation will negatively impact the guest application performance.
</code></pre>

<p>This indicates that the guest application is executed with no runtime optimizations enabled.
The warning can be suppressed by either suppressing using the <code>--engine.WarnInterpreterOnly=false</code> option or the <code>-Dpolyglot.engine.WarnInterpreterOnly=false</code> system property.
In addition, the <code>compiler.jar</code> and its dependencies must be downloaded from <a href="https://central.sonatype.com/artifact/org.graalvm.compiler/compiler/">Maven Central</a> and referred to use the option <code>--upgrade-module-path</code>.
Note that the compiler jar must <em>not</em> be put on the module or class path.
Refer to the <a href="https://github.com/graalvm/polyglot-embedding-demo">polyglot embedding demonstration</a> for an example configuration using Maven or Gradle.</p>
    
      <h3 id="switching-to-the-fallback-engine">
        
        
          Switching to the Fallback Engine <a href="#switching-to-the-fallback-engine" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>If the need arises, for example, running only trivial scripts or in the resource-constrained systems, you may want to switch to the fallback engine without run-time optimizations.
Since Polyglot version 23.1, the fallback engine can be activated by removing the <code>truffle-runtime</code> and <code>truffle-enterprise</code> modules from the class or module path.</p>

<p>This can be achieved with Maven like this:</p>

<pre><code class="language-xml">&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;
    &lt;artifactId&gt;js&lt;/artifactId&gt;
    &lt;version&gt;$graalvm-version&lt;/version&gt;
    &lt;exclusions&gt;
      &lt;exclusion&gt;
        &lt;groupId&gt;org.graalvm.truffle&lt;/groupId&gt;
        &lt;artifactId&gt;truffle-runtime&lt;/artifactId&gt;
      &lt;/exclusion&gt;
      &lt;exclusion&gt;
        &lt;groupId&gt;org.graalvm.truffle&lt;/groupId&gt;
        &lt;artifactId&gt;truffle-enterprise&lt;/artifactId&gt;
      &lt;/exclusion&gt;
    &lt;/exclusions&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<p>The exclusion rule for <code>truffle-enterprise</code> is unnecessary if you only use <code>-community</code> dependencies.
Since <code>truffle-enterprise</code> is excluded, the fallback engine does not support advanced extensions like sandbox limits or polyglot isolates.
It may be useful to double-check with <code>mvn dependency:tree</code> that the two dependencies are not included elsewhere.</p>

<p>If the runtime was excluded successfully, you should see the following log message:</p>

<pre><code class="language-shell">[engine] WARNING: The polyglot engine uses a fallback runtime that does not support runtime compilation to native code.
Execution without runtime compilation will negatively impact the guest application performance.
The following cause was found: No optimizing Truffle runtime found on the module or class-path.
For more information see: https://www.graalvm.org/latest/reference-manual/embed-languages/.
To disable this warning use the '--engine.WarnInterpreterOnly=false' option or the '-Dpolyglot.engine.WarnInterpreterOnly=false' system property.
</code></pre>

<p>You can disable this message using the indicated options as an additional step.</p>

<p>Removing these dependencies also automatically switches to the fallback engine in Native Image builds.</p>
    
      <h2 id="build-native-executables-from-polyglot-applications">
        
        
          Build Native Executables from Polyglot Applications <a href="#build-native-executables-from-polyglot-applications" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>With Polyglot version 23.1 on GraalVM for JDK 21, no special configuration is required to use <a href="/jdk21/reference-manual/native-image/">Native Image</a> to build images with embedded polyglot language runtimes.
Like any other Java dependency, the polyglot language JAR files must be on the class or module path when building a native executable.
We recommend to use the <a href="https://graalvm.github.io/native-build-tools/latest/maven-plugin.html">Maven</a> or <a href="https://graalvm.github.io/native-build-tools/latest/gradle-plugin.html">Gradle</a> Native Image plugins to configure your <code>native-image</code> builds.
A sample Maven and Gradle configuration for Native Image can be found in the <a href="https://github.com/graalvm/polyglot-embedding-demo">polyglot embedding demonstration repository</a>.</p>

<p>Here is a Maven profile configuration example:</p>
<pre><code class="language-xml">&lt;profiles&gt;
    &lt;profile&gt;
        &lt;id&gt;native&lt;/id&gt;
        &lt;build&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;
                    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;
                    &lt;version&gt;0.9.25&lt;/version&gt;
                    &lt;extensions&gt;true&lt;/extensions&gt;
                    &lt;executions&gt;
                        &lt;execution&gt;
                            &lt;id&gt;build-native&lt;/id&gt;
                            &lt;goals&gt;
                                &lt;goal&gt;compile-no-fork&lt;/goal&gt;
                            &lt;/goals&gt;
                            &lt;phase&gt;package&lt;/phase&gt;
                        &lt;/execution&gt;
                    &lt;/executions&gt;
                    &lt;configuration&gt;
                        &lt;imageName&gt;${project.artifactId}&lt;/imageName&gt;
                        &lt;mainClass&gt;org.example.embedding.Main&lt;/mainClass&gt;
                        &lt;buildArgs&gt;
                            &lt;buildArg&gt;--no-fallback&lt;/buildArg&gt;
                            &lt;buildArg&gt;-J-Xmx20g&lt;/buildArg&gt;
                        &lt;/buildArgs&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/build&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;
</code></pre>

<p>To build a native executable with the above configuration, run:</p>
<pre><code>mvn -Pnative package
</code></pre>

<p>To build a native executable from a polyglot application, for example, a Java-host application embedding Python, a <code>./resources</code> folder containing all the required files is created by default.
By default, the language runtime will look for the resources folder relative to the native executable or library image that was built.
At run time, the lookup location may be customized using the <code>-Dpolyglot.engine.resourcePath=path/to/resources</code> option.
To disable the resource creation, the <code>-H:-CopyLanguageResources</code> build-time option may be used.
Note that some languages may not support running without a resources folder.</p>

<p>With Polyglot version 23.1 the language home options like <code>-Dorg.graalvm.home</code> should no longer be used and were replaced with the resource folder option.
The language home options remain functional for compatibility reasons but may be removed in future releases.</p>
    
      <h3 id="configuring-native-host-reflection">
        
        
          Configuring Native Host Reflection <a href="#configuring-native-host-reflection" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>Accessing host Java code from the guest application requires Java reflection in order to work.
When reflection is used within a native executable, the <a href="/jdk21/reference-manual/native-image/dynamic-features/Reflection/">reflection configuration file</a> is required.</p>

<p>For this example we use JavaScript to show host access with native executables.
Copy the following code in a new file named <code>AccessJavaFromJS.java</code>.</p>

<pre><code class="language-java">import org.graalvm.polyglot.*;
import org.graalvm.polyglot.proxy.*;
import java.util.concurrent.*;

public class AccessJavaFromJS {

    public static class MyClass {
        public int               id    = 42;
        public String            text  = "42";
        public int[]             arr   = new int[]{1, 42, 3};
        public Callable&lt;Integer&gt; ret42 = () -&gt; 42;
    }

    public static void main(String[] args) {
        try (Context context = Context.newBuilder()
                                   .allowAllAccess(true)
                               .build()) {
            context.getBindings("js").putMember("javaObj", new MyClass());
            boolean valid = context.eval("js",
                   "    javaObj.id         == 42"          +
                   " &amp;&amp; javaObj.text       == '42'"        +
                   " &amp;&amp; javaObj.arr[1]     == 42"          +
                   " &amp;&amp; javaObj.ret42()    == 42")
               .asBoolean();
            System.out.println("Valid " + valid);
        }
    }
}
</code></pre>

<p>Copy the following code into <code>reflect.json</code>:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="o">[</span>
  <span class="o">{</span> <span class="s">"name"</span><span class="o">:</span> <span class="s">"AccessJavaFromJS$MyClass"</span><span class="o">,</span> <span class="s">"allPublicFields"</span><span class="o">:</span> <span class="kc">true</span> <span class="o">},</span>
  <span class="o">{</span> <span class="s">"name"</span><span class="o">:</span> <span class="s">"java.util.concurrent.Callable"</span><span class="o">,</span> <span class="s">"allPublicMethods"</span><span class="o">:</span> <span class="kc">true</span> <span class="o">}</span>
<span class="o">]</span></code></pre></figure>

<p>Now, you can create a native executable that supports host access and add the additional <code>-H:ReflectionConfigurationFiles=reflect.json</code> build-time option.</p>
    
      <h2 id="code-caching-across-multiple-contexts">
        
        
          Code Caching Across Multiple Contexts <a href="#code-caching-across-multiple-contexts" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>The GraalVM Polyglot API allows code caching across multiple contexts.
Code caching allows compiled code to be reused and allows sources to be parsed only once.
Code caching can often reduce memory consumption and warm-up time of the application.</p>

<p>By default, code is cached within a single context instance only.
An explicit engine needs to be specified to enable code caching between multiple contexts.
The engine is specified when creating the context using the <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/Context.Builder.html">context builder</a>.
The engine instance determines the scope of code sharing.
Code is only shared between contexts associated with one engine instance.</p>

<p>All sources are cached by default.
Caching may be disabled explicitly by setting <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/Source.Builder.html#cached-boolean-">cached(booleancached)</a> to <code>false</code>. Disabling caching may be useful in case the source is known to only be evaluated once.</p>

<p>Consider the following code snippet as an example:</p>

<pre><code class="language-java">public class Main {
    public static void main(String[] args) {
        try (Engine engine = Engine.create()) {
            Source source = Source.create("js", "21 + 21");
            try (Context context = Context.newBuilder()
                .engine(engine)
                .build()) {
                    int v = context.eval(source).asInt();
                    assert v == 42;
            }
            try (Context context = Context.newBuilder()
                .engine(engine)
                .build()) {
                    int v = context.eval(source).asInt();
                    assert v == 42;
            }
        }
    }
}
</code></pre>

<p>In this code:</p>
<ul>
  <li><code>import org.graalvm.polyglot.*</code>imports the base API for the Polyglot API.</li>
  <li><code>Engine.create()</code> creates a new engine instance with the default configuration.</li>
  <li><code>Source.create()</code> creates a source object for the expression 21 + 21. We use an explicit <code>Source</code> object to ensure the code cache does not get garbage collected between contexts.
with js language, which is the language identifier for JavaScript.</li>
  <li><code>Context.newBuilder().engine(engine).build()</code> builds a new context with
an explicit engine assigned to it. All contexts associated with an engine share the code.</li>
  <li><code>context.eval(source).asInt()</code> evaluates the source and returns the result as <code>Value</code> instance.</li>
</ul>

<p><strong><em>Important:</em></strong> To keep the code cache of a cached source alive between executing contexts, the application must ensure that the <code>Source</code> object is continually referenced.
The polyglot runtime may collect cached code of sources no longer referenced with the next GC cycle.</p>
    
      <h3 id="managing-the-code-cache">
        
        
          Managing the Code Cache <a href="#managing-the-code-cache" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>The data for the code cache is stored as part of the <code>Engine</code> instance.
There is never any code sharing happening between two separate engine instances.
Hence, we recommend using a singleton <code>Engine</code> instance if a global code cache is needed.
As opposed to contexts, engines can always be shared across multiple threads.
Whether contexts can be shared across multiple threads depends on the language used.</p>

<p>There is no explicit method to purge the code cache.
We rely on the garbage collector to do this automatically with the next collection.
The code cache of an engine is not collected as long as the engine is still strongly referenced and not closed.
Also, the <code>Source</code> instance must be kept alive to ensure the associated code is not collected.
If a source instance is no longer referenced, but the engine is still referenced, the code cache associated with a source object may be collected by the GC.
We recommend, therefore, keeping a strong reference to the <code>Source</code> object as long as <code>Source</code> should remain cached.</p>

<p>To summarize, the code cache can be controlled by keeping and maintaining strong references to the <code>Engine</code> and <code>Source</code> objects.</p>
    
      <h2 id="polyglot-isolates">
        
        
          Polyglot Isolates <a href="#polyglot-isolates" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>On Oracle GraalVM, a Polyglot engine can be configured to run in a dedicated Native Image isolate.
A polyglot engine in this mode executes within a VM-level fault domain with a dedicated garbage collector and JIT compiler.
Polyglot isolates are useful for <a href="/jdk21/security-guide/polyglot-sandbox/">polyglot sandboxing</a>.
Running languages in an isolate works with HotSpot and Native Image host virtual machines.</p>

<p>Languages used as polyglot isolates can be downloaded from Maven Central using the <code>-isolate</code> suffix.
For example, a dependency on isolated JavaScript can be configured by adding a Maven dependency like this:</p>

<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;
    &lt;artifactId&gt;polyglot&lt;/artifactId&gt;
    &lt;version&gt;23.1.0&lt;/version&gt;
    &lt;type&gt;jar&lt;/type&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.graalvm.polyglot&lt;/groupId&gt;
    &lt;artifactId&gt;js-isolate&lt;/artifactId&gt;
    &lt;version&gt;23.1.0&lt;/version&gt;
    &lt;type&gt;pom&lt;/type&gt;
&lt;/dependency&gt;
</code></pre>

<p>The downloaded dependency is platform-independent, which contains a native-image for each platform.
We plan to support downloading polyglot isolate native images for individual platforms in a future release.</p>

<p>To enable isolate usage with the Polyglot API, the <code>--engine.SpawnIsolate=true</code> option must be passed to <code>Engine</code> or <code>Context</code> when constructed.
The option <code>engine.SpawnIsolate</code> may not be available if used on any other JDK than Oracle GraalVM.</p>

<pre><code class="language-java">import org.graalvm.polyglot.*;

public class PolyglotIsolate {
	public static void main(String[] args) {
		try (Context context = Context.newBuilder("js")
			  .allowHostAccess(HostAccess.SCOPED)
			  .option("engine.SpawnIsolate", "true").build()) {

			Value function = context.eval("js", "x =&gt; x+1");
			assert function.canExecute();
			int x = function.execute(41).asInt();
			assert x == 42;
		}
	}
}
</code></pre>

<p>Currently, we support the following languages as polyglot isolates:</p>

<table>
  <thead>
    <tr>
      <th>Language.</th>
      <th>Polyglot Isolate Support</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>JavaScript (<code>js-isolate</code>)</td>
      <td>Supported with version 23.1</td>
    </tr>
  </tbody>
</table>

<p>We plan to add support for more languages in future versions.</p>

<p>In the previous example, we enable scoped references using <code>HostAccess.SCOPED</code>.
This is necessary because the host GC and the guest GC are unaware of one another, so cyclic references between objects cannot be resolved automatically.
We thus strongly recommend using <a href="#controlling-host-callback-parameter-scoping">scoped parameters for host callbacks</a> to avoid cyclic references altogether.</p>

<p>Multiple contexts can be spawned in the same isolated engine by <a href="#code-caching-across-multiple-contexts">sharing engines</a>:</p>

<pre><code class="language-java">public class PolyglotIsolateMultipleContexts {
    public static void main(String[] args) {
        try (Engine engine = Engine.newBuilder("js")
                .option("engine.SpawnIsolate", "true").build()) {
            Source source = Source.create("js", "21 + 21");
            try (Context context = Context.newBuilder()
                .engine(engine)
                .build()) {
                    int v = context.eval(source).asInt();
                    assert v == 42;
            }
            try (Context context = Context.newBuilder()
                .engine(engine)
                .build()) {
                    int v = context.eval(source).asInt();
                    assert v == 42;
            }
        }
    }
}
</code></pre>
    
      <h3 id="passing-native-image-runtime-options">
        
        
          Passing Native Image Runtime Options <a href="#passing-native-image-runtime-options" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>Engines running in an isolate can make use of <a href="/jdk21/reference-manual/native-image/overview/Options/">Native Image runtime options</a> by passing <code>--engine.IsolateOption.&lt;option&gt;</code> to the engine builder.
For example, this can be used to limit the maximum heap memory used by an engine by setting the maximum heap size for the isolate via <code>--engine.IsolateOption.MaxHeapSize=128m</code>:</p>

<pre><code class="language-java">import org.graalvm.polyglot.*;

public class PolyglotIsolateMaxHeap {
  public static void main(String[] args) {
    try {
      Context context = Context.newBuilder("js")
        .allowHostAccess(HostAccess.SCOPED)
        .option("engine.SpawnIsolate", "true")
        .option("engine.IsolateOption.MaxHeapSize", "64m").build()
      context.eval("js", "var a = [];while (true) {a.push('foobar');}");
    } catch (PolyglotException ex) {
      if (ex.isResourceExhausted()) {
        System.out.println("Resource exhausted");
      }
    }
  }
}
</code></pre>
<p>Exceeding the maximum heap size will automatically close the context and raise a <code>PolyglotException</code>.</p>
    
      <h3 id="ensuring-host-callback-stack-headroom">
        
        
          Ensuring Host Callback Stack Headroom <a href="#ensuring-host-callback-stack-headroom" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>With Polyglot Isolates, the <code>--engine.HostCallStackHeadRoom</code> ensures a minimum stack space available when performing a host callback.
The host callback fails if the available stack size drops below the specified threshold.</p>
    
      <h3 id="memory-protection">
        
        
          Memory Protection <a href="#memory-protection" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h3>

<p>In Linux environments that support Memory Protection Keys, the <code>--engine.MemoryProtection=true</code> option can be used to isolate the heaps of Polyglot Isolates at the hardware level.
If an engine is created with this option, a dedicated protection key will be allocated for the isolated engines heap.
GraalVM only enables access to the engines heap when executing code of the Polyglot Isolate.</p>
    
      <h2 id="embed-a-guest-language-in-java">
        
        
          Embed a Guest Language in Java <a href="#embed-a-guest-language-in-java" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>The GraalVM Polyglot API can be used from within a guest language using Java interoperability.
This can be useful if a script needs to run isolated from the parent context.
In Java as a host language a call to <code>Context.eval(Source)</code> returns an instance of <code>Value</code>, but since we executing this code as part of a guest language we can use the language-specific interoperability API instead.
It is therefore possible to use values returned by contexts created inside of a language, like regular values of the language.
In the example below we can conveniently write <code>value.data</code> instead of <code>value.getMember("data")</code>.
Please refer to the individual language documentation for details on how to interoperate with foreign values.
More information on value sharing between multiple contexts can be found <a href="https://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/Context.Builder.html#allowValueSharing-boolean-">here</a>.</p>

<p>Consider the following code snippet as an example:</p>

<pre><code class="language-java">import org.graalvm.polyglot.*;

public class Main {
    public static void main(String[] args) {
        try (Context outer = Context.newBuilder()
                                   .allowAllAccess(true)
                               .build()) {
            outer.eval("js", "inner = Java.type('org.graalvm.polyglot.Context').create()");
            outer.eval("js", "value = inner.eval('js', '({data:42})')");
            int result = outer.eval("js", "value.data").asInt();
            outer.eval("js", "inner.close()");

            System.out.println("Valid " + (result == 42));
        }
    }
}
</code></pre>

<p>In this code:</p>
<ul>
  <li><code>Context.newBuilder().allowAllAccess(true).build()</code> builds a new outer context with all privileges.</li>
  <li><code>outer.eval</code> evaluates a JavaScript snippet in the outer context.</li>
  <li><code>inner = Java.type('org.graalvm.polyglot.Context').create()</code> the first JS script line looks up the Java host type Context and creates a new inner context instance with no privileges (default).</li>
  <li><code>inner.eval('js', '({data:42})');</code> evaluates the JavaScript code <code>({data:42})</code> in the inner context and returns stores the result.</li>
  <li><code>"value.data"</code> this line reads the member <code>data</code> from the result of the inner context. Note that this result can only be read as long as the inner context is not yet closed.</li>
  <li><code>context.eval("js", "c.close()")</code> this snippet closes the inner context. Inner contexts need to be closed manually and are not automatically closed with the parent context.</li>
  <li>Finally the example is expected to print <code>Valid true</code> to the console.</li>
</ul>
    
      <h2 id="build-a-shell-for-many-languages">
        
        
          Build a Shell for Many Languages <a href="#build-a-shell-for-many-languages" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>With just a few lines of code, the GraalVM Polyglot API lets you build applications that integrate with any guest language supported by GraalVM.</p>

<p>This shell implementation is agnostic to any particular guest language.</p>

<pre><code class="language-java">BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
PrintStream output = System.out;
Context context = Context.newBuilder().allowAllAccess(true).build();
Set&lt;String&gt; languages = context.getEngine().getLanguages().keySet();
output.println("Shell for " + languages + ":");
String language = languages.iterator().next();
for (;;) {
    try {
        output.print(language + "&gt; ");
        String line = input.readLine();
        if (line == null) {
            break;
        } else if (languages.contains(line)) {
            language = line;
            continue;
        }
        Source source = Source.newBuilder(language, line, "&lt;shell&gt;")
                        .interactive(true).buildLiteral();
        context.eval(source);
    } catch (PolyglotException t) {
        if(t.isExit()) {
            break;
        }
        t.printStackTrace();
    }
}
</code></pre>
    
      <h2 id="step-through-with-execution-listeners">
        
        
          Step Through with Execution Listeners <a href="#step-through-with-execution-listeners" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<p>The GraalVM Polyglot API allows users to instrument the execution of guest languages through the <a href="http://www.graalvm.org/sdk/javadoc/org/graalvm/polyglot/management/ExecutionListener.html">ExecutionListener class</a>.
For example, it lets you attach an execution listener that is invoked for every statement of the guest language program.
Execution listeners are designed as simple API for polyglot embedders and may become handy in, e.g., single-stepping through the program.</p>

<pre><code class="language-java">import org.graalvm.polyglot.*;
import org.graalvm.polyglot.management.*;

public class ExecutionListenerTest {
    public static void main(String[] args) {
        try (Context context = Context.create("js")) {
            ExecutionListener listener = ExecutionListener.newBuilder()
                      .onEnter((e) -&gt; System.out.println(
                              e.getLocation().getCharacters()))
                      .statements(true)
                      .attach(context.getEngine());
            context.eval("js", "for (var i = 0; i &lt; 2; i++);");
            listener.close();
        }
    }
}
</code></pre>

<p>In this code:</p>
<ul>
  <li>The <code>Context.create()</code> call creates a new context for the guest language.</li>
  <li>Create an execution listener builder by invoking <code>ExecutionListeners.newBuilder()</code>.</li>
  <li>Set <code>onEnter</code> event to notify when elements execution is entered and consumed. At least one event consumer and one filtered source element needs to be enabled.</li>
  <li>To complete the listener attachment, <code>attach()</code> needs to be invoked.</li>
  <li>The <code>statements(true)</code> filters execution listeners to statements only.</li>
  <li>The <code>context.eval()</code> call evaluates a specified snippet of guest language code.</li>
  <li>The <code>listener.close()</code> closes a listener earlier, however execution listeners are automatically closed with the engine.</li>
</ul>
    
      <h2 id="compatibility-with-jsr-223-scriptengine">
        
        
          Compatibility with JSR-223 ScriptEngine <a href="#compatibility-with-jsr-223-scriptengine" class="anchor_heading"><svg class='anchor-icon' width='22' height='22' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' aria-hidden='true'><path d='M10 13a5 5 0 0 0 7.07 0l3.54-3.54a5 5 0 0 0-7.07-7.07L10 5'/><path d='M14 11a5 5 0 0 0-7.07 0L3.39 14.54a5 5 0 1 0 7.07 7.07L14 19'/></svg></a>
        
        
      </h2>

<!--

IMPORTANT!!

Whenever you change ANYTHING here, check if you need to reflect the changes
back into our integration tests at tests/python/PythonEngineFactory.java!

-->

<p>The Truffle language implementation framework does not provide a JSR-223 ScriptEngine implementation.
The Polyglot API provides more fine-grained control over Truffle features and we strongly encourage users to use the <code>org.graalvm.polyglot.Context</code> interface in order to control many of the settings directly and benefit from finer-grained security settings in GraalVM.</p>

<p>However, to easily evaluate a Truffle language as a replacement for other scripting languages that are integrated using the ScriptEngine API, we provide a single file script engine below.
This file can be dropped into a source tree and used directly to evaluate a Truffle language via the ScriptEngine APIs.
There are only two lines to adapt to your project:</p>

<pre><code class="language-java">public final class CHANGE_NAME_EngineFactory implements ScriptEngineFactory {
    private static final String LANGUAGE_ID = "&lt;&lt;INSERT LANGUAGE ID HERE&gt;&gt;";
</code></pre>

<p>Rename the class as desired and change the <code>LANGUAGE_ID</code> to the desired Truffle language (for example, python for GraalPy or js for GraalJS).
To use it, include a <code>META-INF/services/javax.script.ScriptEngineFactory</code> file in your resources with the chosen class name.
This will allow the default <code>javax.script.ScriptEngineManager</code> to discover the language automatically.
Alternatively, the factory can be registerd via <code>javax.script.ScriptEngineManager#registerEngineName</code> or instantiated and used directly.</p>

<p>The best practice is to close the <code>ScriptEngine</code> when no longer used rather than relying on finalizers.
To close it, use <code>((AutoCloseable) scriptEngine).close();</code> since <code>ScriptEngine</code> does not have a <code>close()</code> method.</p>

<p>Note that <a href="https://www.graalvm.org/reference-manual/js/">GraalJS</a> provides <a href="https://www.graalvm.org/reference-manual/js/ScriptEngine/">a ScriptEngine implementation</a> for users migrating from the Nashorn JavaScript engine that was deprecated in JDK 11, so this method here is not needed.</p>

<details>
<summary>Expand to see the <code>ScriptEngineFactory</code> implementation for Truffle languages in a single file.</summary>

<pre class="language-java"><code>
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.Reader;
import java.io.Writer;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

import javax.script.Bindings;
import javax.script.Compilable;
import javax.script.CompiledScript;
import javax.script.ScriptContext;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineFactory;
import javax.script.ScriptException;

import org.graalvm.home.Version;
import org.graalvm.polyglot.Context;
import org.graalvm.polyglot.Engine;
import org.graalvm.polyglot.Language;
import org.graalvm.polyglot.PolyglotException;
import org.graalvm.polyglot.Source;
import org.graalvm.polyglot.Value;

public final class CHANGE_NAME_EngineFactory implements ScriptEngineFactory {
    private static final String LANGUAGE_ID = "&lt;<INSERT LANGUAGE="" ID="" HERE="">&gt;";

    /***********************************************************/
    /* Everything below is generic and does not need to change */
    /***********************************************************/

    private final Engine polyglotEngine = Engine.newBuilder().build();
    private final Language language = polyglotEngine.getLanguages().get(LANGUAGE_ID);

    @Override
    public String getEngineName() {
        return language.getImplementationName();
    }

    @Override
    public String getEngineVersion() {
        return Version.getCurrent().toString();
    }

    @Override
    public List<String> getExtensions() {
        return List.of(LANGUAGE_ID);
    }

    @Override
    public List<String> getMimeTypes() {
        return List.copyOf(language.getMimeTypes());
    }

    @Override
    public List<String> getNames() {
        return List.of(language.getName(), LANGUAGE_ID, language.getImplementationName());
    }

    @Override
    public String getLanguageName() {
        return language.getName();
    }

    @Override
    public String getLanguageVersion() {
        return language.getVersion();
    }

    @Override
    public Object getParameter(final String key) {
        switch (key) {
            case ScriptEngine.ENGINE:
                return getEngineName();
            case ScriptEngine.ENGINE_VERSION:
                return getEngineVersion();
            case ScriptEngine.LANGUAGE:
                return getLanguageName();
            case ScriptEngine.LANGUAGE_VERSION:
                return getLanguageVersion();
            case ScriptEngine.NAME:
                return LANGUAGE_ID;
        }
        return null;
    }

    @Override
    public String getMethodCallSyntax(final String obj, final String m, final String... args) {
        throw new UnsupportedOperationException("Unimplemented method 'getMethodCallSyntax'");
    }

    @Override
    public String getOutputStatement(final String toDisplay) {
        throw new UnsupportedOperationException("Unimplemented method 'getOutputStatement'");
    }

    @Override
    public String getProgram(final String... statements) {
        throw new UnsupportedOperationException("Unimplemented method 'getProgram'");
    }

    @Override
    public ScriptEngine getScriptEngine() {
        return new PolyglotEngine(this);
    }

    private static final class PolyglotEngine implements ScriptEngine, Compilable {
        private final ScriptEngineFactory factory;
        private PolyglotContext defaultContext;

        PolyglotEngine(ScriptEngineFactory factory) {
            this.factory = factory;
            this.defaultContext = new PolyglotContext(factory);
        }

        @Override
        public CompiledScript compile(String script) throws ScriptException {
            Source src = Source.create(LANGUAGE_ID, script);
            try {
                defaultContext.getContext().parse(src); // only for the side-effect of validating the source
            } catch (PolyglotException e) {
                throw new ScriptException(e);
            }
            return new PolyglotCompiledScript(src, this);
        }

        @Override
        public CompiledScript compile(Reader script) throws ScriptException {
            Source src;
            try {
                src = Source.newBuilder(LANGUAGE_ID, script, "sourcefromreader").build();
                defaultContext.getContext().parse(src); // only for the side-effect of validating the source
            } catch (PolyglotException | IOException e) {
                throw new ScriptException(e);
            }
            return new PolyglotCompiledScript(src, this);
        }

        @Override
        public Object eval(String script, ScriptContext context) throws ScriptException {
            if (context instanceof PolyglotContext) {
                PolyglotContext c = (PolyglotContext) context;
                try {
                    return c.getContext().eval(LANGUAGE_ID, script).as(Object.class);
                } catch (PolyglotException e) {
                    throw new ScriptException(e);
                }
            } else {
                throw new ClassCastException("invalid context");
            }
        }

        @Override
        public Object eval(Reader reader, ScriptContext context) throws ScriptException {
            Source src;
            try {
                src = Source.newBuilder(LANGUAGE_ID, reader, "sourcefromreader").build();
            } catch (IOException e) {
                throw new ScriptException(e);
            }
            if (context instanceof PolyglotContext) {
                PolyglotContext c = (PolyglotContext) context;
                try {
                    return c.getContext().eval(src);
                } catch (PolyglotException e) {
                    throw new ScriptException(e);
                }
            } else {
                throw new ScriptException("invalid context");
            }
        }

        @Override
        public Object eval(String script) throws ScriptException {
            return eval(script, defaultContext);
        }

        @Override
        public Object eval(Reader reader) throws ScriptException {
            return eval(reader, defaultContext);
        }

        @Override
        public Object eval(String script, Bindings n) throws ScriptException {
            throw new UnsupportedOperationException("Bindings for Polyglot language cannot be created explicitly");
        }

        @Override
        public Object eval(Reader reader, Bindings n) throws ScriptException {
            throw new UnsupportedOperationException("Bindings for Polyglot language cannot be created explicitly");
        }

        @Override
        public void put(String key, Object value) {
            defaultContext.getBindings(ScriptContext.ENGINE_SCOPE).put(key, value);
        }

        @Override
        public Object get(String key) {
            return defaultContext.getBindings(ScriptContext.ENGINE_SCOPE).get(key);
        }

        @Override
        public Bindings getBindings(int scope) {
            return defaultContext.getBindings(scope);
        }

        @Override
        public void setBindings(Bindings bindings, int scope) {
            defaultContext.setBindings(bindings, scope);
        }

        @Override
        public Bindings createBindings() {
            throw new UnsupportedOperationException("Bindings for Polyglot language cannot be created explicitly");
        }

        @Override
        public ScriptContext getContext() {
            return defaultContext;
        }

        @Override
        public void setContext(ScriptContext context) {
            throw new UnsupportedOperationException("The context of a Polyglot ScriptEngine cannot be modified.");
        }

        @Override
        public ScriptEngineFactory getFactory() {
            return factory;
        }
    }

    private static final class PolyglotContext implements ScriptContext {
        private Context context;
        private final ScriptEngineFactory factory;
        private final PolyglotReader in;
        private final PolyglotWriter out;
        private final PolyglotWriter err;
        private Bindings globalBindings;

        PolyglotContext(ScriptEngineFactory factory) {
            this.factory = factory;
            this.in = new PolyglotReader(new InputStreamReader(System.in));
            this.out = new PolyglotWriter(new OutputStreamWriter(System.out));
            this.err = new PolyglotWriter(new OutputStreamWriter(System.err));
        }

        Context getContext() {
            if (context == null) {
                Context.Builder builder = Context.newBuilder(LANGUAGE_ID)
                    .in(this.in)
                    .out(this.out)
                    .err(this.err)
                    .allowAllAccess(true);
                for (Entry&lt;String, Object&gt; entry : getBindings(ScriptContext.GLOBAL_SCOPE).entrySet()) {
                    Object value = entry.getValue();
                    if (value instanceof String) {
                        builder.option(entry.getKey(), (String) value);
                    }
                }
                context = builder.build();
            }
            return context;
        }

        @Override
        public void setBindings(Bindings bindings, int scope) {
            if (scope == ScriptContext.GLOBAL_SCOPE) {
                if (context == null) {
                    globalBindings = bindings;
                } else {
                    throw new UnsupportedOperationException("Global bindings for Polyglot language can only be set before the context is initialized.");
                }
            } else {
                throw new UnsupportedOperationException("Bindings objects for Polyglot language is final.");
            }
        }

        @Override
        public Bindings getBindings(int scope) {
            if (scope == ScriptContext.ENGINE_SCOPE) {
                return new PolyglotBindings(getContext().getBindings(LANGUAGE_ID));
            } else if (scope == ScriptContext.GLOBAL_SCOPE) {
                return globalBindings;
            } else {
                return null;
            }
        }

        @Override
        public void setAttribute(String name, Object value, int scope) {
            if (scope == ScriptContext.ENGINE_SCOPE) {
                getBindings(scope).put(name, value);
            } else if (scope == ScriptContext.GLOBAL_SCOPE) {
                if (context == null) {
                    globalBindings.put(name, value);
                } else {
                    throw new IllegalStateException("Cannot modify global bindings after context creation.");
                }
            }
        }

        @Override
        public Object getAttribute(String name, int scope) {
            if (scope == ScriptContext.ENGINE_SCOPE) {
                return getBindings(scope).get(name);
            } else if (scope == ScriptContext.GLOBAL_SCOPE) {
                return globalBindings.get(name);
            }
            return null;
        }

        @Override
        public Object removeAttribute(String name, int scope) {
            Object prev = getAttribute(name, scope);
            if (prev != null) {
                if (scope == ScriptContext.ENGINE_SCOPE) {
                    getBindings(scope).remove(name);
                } else if (scope == ScriptContext.GLOBAL_SCOPE) {
                    if (context == null) {
                        globalBindings.remove(name);
                    } else {
                        throw new IllegalStateException("Cannot modify global bindings after context creation.");
                    }
                }
            }
            return prev;
        }

        @Override
        public Object getAttribute(String name) {
            return getAttribute(name, ScriptContext.ENGINE_SCOPE);
        }

        @Override
        public int getAttributesScope(String name) {
            if (getAttribute(name, ScriptContext.ENGINE_SCOPE) != null) {
                return ScriptContext.ENGINE_SCOPE;
            } else if (getAttribute(name, ScriptContext.GLOBAL_SCOPE) != null) {
                return ScriptContext.GLOBAL_SCOPE;
            }
            return -1;
        }

        @Override
        public Writer getWriter() {
            return this.out.writer;
        }

        @Override
        public Writer getErrorWriter() {
            return this.err.writer;
        }

        @Override
        public void setWriter(Writer writer) {
            this.out.writer = writer;
        }

        @Override
        public void setErrorWriter(Writer writer) {
            this.err.writer = writer;
        }

        @Override
        public Reader getReader() {
            return this.in.reader;
        }

        @Override
        public void setReader(Reader reader) {
            this.in.reader = reader;
        }

        @Override
        public List<Integer> getScopes() {
            return List.of(ScriptContext.ENGINE_SCOPE, ScriptContext.GLOBAL_SCOPE);
        }

        private static final class PolyglotReader extends InputStream {
            private volatile Reader reader;

            public PolyglotReader(InputStreamReader inputStreamReader) {
                this.reader = inputStreamReader;
            }

            @Override
            public int read() throws IOException {
                return reader.read();
            }
        }

        private static final class PolyglotWriter extends OutputStream {
            private volatile Writer writer;

            public PolyglotWriter(OutputStreamWriter outputStreamWriter) {
                this.writer = outputStreamWriter;
            }

            @Override
            public void write(int b) throws IOException {
                writer.write(b);
            }
        }
    }

    private static final class PolyglotCompiledScript extends CompiledScript {
        private final Source source;
        private final ScriptEngine engine;

        public PolyglotCompiledScript(Source src, ScriptEngine engine) {
            this.source = src;
            this.engine = engine;
        }

        @Override
        public Object eval(ScriptContext context) throws ScriptException {
            if (context instanceof PolyglotContext) {
                return ((PolyglotContext) context).getContext().eval(source);
            }
            throw new UnsupportedOperationException("Polyglot CompiledScript instances can only be evaluated in Polyglot.");
        }

        @Override
        public ScriptEngine getEngine() {
            return engine;
        }
    }

    private static final class PolyglotBindings implements Bindings {
        private Value languageBindings;

        PolyglotBindings(Value languageBindings) {
            this.languageBindings = languageBindings;
        }

        @Override
        public int size() {
            return keySet().size();
        }

        @Override
        public boolean isEmpty() {
            return size() == 0;
        }

        @Override
        public boolean containsValue(Object value) {
            for (String s : keySet()) {
                if (get(s) == value) {
                    return true;
                }
            }
            return false;
        }

        @Override
        public void clear() {
            for (String s : keySet()) {
                remove(s);
            }
        }

        @Override
        public Set<String> keySet() {
            return languageBindings.getMemberKeys();
        }

        @Override
        public Collection<object> values() {
            List<object> values = new ArrayList&lt;&gt;();
            for (String s : keySet()) {
                values.add(get(s));
            }
            return values;
        }

        @Override
        public Set&lt;Entry&lt;String, Object&gt;&gt; entrySet() {
            Set&lt;Entry&lt;String, Object&gt;&gt; values = new HashSet&lt;&gt;();
            for (String s : keySet()) {
                values.add(new Entry&lt;String, Object&gt;() {
                    @Override
                    public String getKey() {
                        return s;
                    }

                    @Override
                    public Object getValue() {
                        return get(s);
                    }

                    @Override
                    public Object setValue(Object value) {
                        return put(s, value);
                    }
                });
            }
            return values;
        }

        @Override
        public Object put(String name, Object value) {
            Object previous = get(name);
            languageBindings.putMember(name, value);
            return previous;
        }

        @Override
        public void putAll(Map&lt;? extends String, ? extends Object&gt; toMerge) {
            for (Entry&lt;? extends String, ? extends Object&gt; e : toMerge.entrySet()) {
                put(e.getKey(), e.getValue());
            }
        }

        @Override
        public boolean containsKey(Object key) {
            if (key instanceof String) {
                return languageBindings.hasMember((String) key);
            } else {
                return false;
            }
        }

        @Override
        public Object get(Object key) {
            if (key instanceof String) {
                Value value = languageBindings.getMember((String) key);
                if (value != null) {
                    return value.as(Object.class);
                }
            }
            return null;
        }

        @Override
        public Object remove(Object key) {
            Object prev = get(key);
            if (prev != null) {
                languageBindings.removeMember((String) key);
                return prev;
            } else {
                return null;
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/details&gt;
</object></object></String></Integer></String></String></String></INSERT></code></pre></details>

      </div>
      <div role="button" class="menu-btn menu-btn--sidebar js-show-sidebar" title="sweet hamburger">
        <div class="hamburger">
          <div class="inner"></div>
        </div>
      </div>
    </div>
  </div>
</article>
</div>

      </main>
      <!-- Connect with us -->
<section class="content-section socials">
  <div class="container-fluid container-fluid--custom-sm">
    <div class="row-socials">
      <div class="title">
        <h2 class="title-section">Connect with us</h2>
      </div>
      <div class="social-icons">
        <div class="wider-logo">
          <a href="https://github.com/oracle/graal" target="_blank" title="github social media link">
            <svg class="social-icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg" alt="github social media icon">
              <path
                d="M12 0C5.374 0 0 5.373 0 12C0 17.302 3.438 21.8 8.207 23.387C8.806 23.498 9 23.126 9 22.81V20.576C5.662 21.302 4.967 19.16 4.967 19.16C4.421 17.773 3.634 17.404 3.634 17.404C2.545 16.659 3.717 16.675 3.717 16.675C4.922 16.759 5.556 17.912 5.556 17.912C6.626 19.746 8.363 19.216 9.048 18.909C9.155 18.134 9.466 17.604 9.81 17.305C7.145 17 4.343 15.971 4.343 11.374C4.343 10.063 4.812 8.993 5.579 8.153C5.455 7.85 5.044 6.629 5.696 4.977C5.696 4.977 6.704 4.655 8.997 6.207C9.954 5.941 10.98 5.808 12 5.803C13.02 5.808 14.047 5.941 15.006 6.207C17.297 4.655 18.303 4.977 18.303 4.977C18.956 6.63 18.545 7.851 18.421 8.153C19.191 8.993 19.656 10.064 19.656 11.374C19.656 15.983 16.849 16.998 14.177 17.295C14.607 17.667 15 18.397 15 19.517V22.81C15 23.129 15.192 23.504 15.801 23.386C20.566 21.797 24 17.3 24 12C24 5.373 18.627 0 12 0Z"
                fill="#171F26" />
            </svg>
          </a>
        </div>
        <div class="wider-logo">
          <a href="https://x.com/graalvm" target="_blank" title="x social media link">
            <svg class="social-icon" width="24" height="24" viewBox="0 0 1200 1227" fill="none" xmlns="http://www.w3.org/2000/svg" alt="X social media icon">
              <path d="M714.2 507.9L1167 0H1060.1L661.8 460.4L343.9 0H0L475.4 690.3L0 1227H106.9L531.8 738.5L875.6 1227H1219.5L714.2 507.9ZM582.6 675.5L537.9 611.2L144.6 80.6H288.5L598.8 530.5L643.5 594.8L1048.5 1146.4H904.6L582.6 675.5Z" fill="#171F26"/>
            </svg>
          </a>
        </div>
        <div class="wider-logo">
          <a href="https://www.linkedin.com/company/graalvm/" target="_blank" title="linkedin social media link">
            <svg class="social-icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg" alt="linkedin social media icon">
              <path
                d="M12 0C5.3736 0 0 5.3736 0 12C0 18.6264 5.3736 24 12 24C18.6264 24 24 18.6264 24 12C24 5.3736 18.6264 0 12 0ZM8.51294 18.1406H5.59039V9.34808H8.51294V18.1406ZM7.05176 8.14746H7.03271C6.052 8.14746 5.41772 7.47235 5.41772 6.6286C5.41772 5.76581 6.07141 5.10938 7.07117 5.10938C8.07092 5.10938 8.68616 5.76581 8.7052 6.6286C8.7052 7.47235 8.07092 8.14746 7.05176 8.14746ZM19.051 18.1406H16.1288V13.4368C16.1288 12.2547 15.7057 11.4485 14.6483 11.4485C13.8409 11.4485 13.3601 11.9923 13.1488 12.5173C13.0715 12.7051 13.0527 12.9677 13.0527 13.2305V18.1406H10.1303C10.1303 18.1406 10.1686 10.173 10.1303 9.34808H13.0527V10.593C13.441 9.9939 14.1359 9.14172 15.6865 9.14172C17.6093 9.14172 19.051 10.3984 19.051 13.099V18.1406Z"
                fill="#171F26" />
            </svg>
          </a>
        </div>
        <div class="wider-logo">
          <a href="https://medium.com/graalvm" target="_blank" title="medium social media link">
            <svg class="social-icon" width="24" height="24" viewBox="0 0 24 24" fill="none"
              xmlns="http://www.w3.org/2000/svg" alt="medium social media icon">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M12 0C5.374 0 0 5.372 0 12C0 18.627 5.374 24 12 24C18.627 24 24 18.627 24 12C24 5.372 18.627 0 12 0ZM18.974 17.557V17.322L17.882 16.25C17.786 16.177 17.738 16.056 17.758 15.937V8.063C17.738 7.944 17.786 7.823 17.882 7.75L19 6.678V6.443H15.131L12.373 13.323L9.235 6.443H5.176V6.678L6.484 8.253C6.612 8.368 6.678 8.538 6.66 8.71V14.898C6.698 15.121 6.628 15.349 6.471 15.512L5 17.296V17.531H9.17V17.296L7.699 15.512C7.541 15.349 7.466 15.123 7.497 14.898V9.546L11.157 17.531H11.582L14.725 9.546V15.911C14.725 16.081 14.725 16.113 14.614 16.224L13.484 17.322V17.557H18.974Z"
                fill="#171F26" />
            </svg>
          </a>
        </div>
        <div class="wider-logo">
          <a href="https://bsky.app/profile/graalvm.org" target="_blank" title="blue sky social media link">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g clip-path="url(#clip0_2442_17265)">
              <path d="M6.6075 3.99362C9.59982 6.25419 12.8184 10.8377 14.0001 13.2975C15.1819 10.8379 18.4003 6.25415 21.3927 3.99362C23.5518 2.36248 27.0501 1.1004 27.0501 5.11641C27.0501 5.91846 26.5931 11.8541 26.3251 12.8177C25.3935 16.1679 21.9986 17.0224 18.9789 16.5052C24.2574 17.4093 25.6002 20.4037 22.7002 23.3982C17.1927 29.0853 14.7843 21.9713 14.1669 20.1484C14.0537 19.8143 14.0008 19.6579 14 19.7909C13.9992 19.6579 13.9463 19.8143 13.8332 20.1484C13.216 21.9713 10.8077 29.0855 5.29983 23.3982C2.39985 20.4037 3.74261 17.4091 9.0212 16.5052C6.00134 17.0224 2.60645 16.1679 1.67495 12.8177C1.40692 11.854 0.949951 5.91837 0.949951 5.11641C0.949951 1.1004 4.44834 2.36248 6.60735 3.99362H6.6075Z" fill="#171F26"/>
              </g>
              <defs>
              <clipPath id="clip0_2442_17265">
              <rect width="27" height="24" fill="white" transform="translate(0.5 2)"/>
              </clipPath>
              </defs>
              </svg>
          </a>
        </div>
        <div class="wider-logo">
          <a href="/slack-invitation/" title="slack social media link">
            <svg class="social-icon" width="40" height="40" viewBox="0 0 40 40" fill="none"
              xmlns="http://www.w3.org/2000/svg" alt="slack social media icon">
              <path
                d="M13.0009 23.1698C12.9989 23.6678 12.8495 24.154 12.5714 24.5671C12.2933 24.9802 11.899 25.3017 11.4384 25.4909C10.9777 25.6801 10.4714 25.7285 9.98319 25.6302C9.49502 25.5318 9.04693 25.291 8.6955 24.9382C8.34408 24.5854 8.10506 24.1363 8.00863 23.6478C7.91221 23.1592 7.96269 22.6531 8.15371 22.1932C8.34474 21.7333 8.66773 21.3403 9.08193 21.0638C9.49612 20.7874 9.98294 20.6398 10.4809 20.6398H13.0009V23.1698ZM14.2709 29.4798C14.3636 30.0763 14.6665 30.6201 15.125 31.0128C15.5835 31.4055 16.1672 31.6214 16.7709 31.6214C17.3746 31.6214 17.9584 31.4055 18.4168 31.0128C18.8753 30.6201 19.1782 30.0763 19.2709 29.4798V23.1698C19.327 22.8091 19.3043 22.4404 19.2044 22.0893C19.1045 21.7381 18.9299 21.4127 18.6923 21.1354C18.4548 20.8582 18.1601 20.6356 17.8284 20.483C17.4968 20.3304 17.136 20.2514 16.7709 20.2514C16.4058 20.2514 16.0451 20.3304 15.7134 20.483C15.3817 20.6356 15.087 20.8582 14.8495 21.1354C14.612 21.4127 14.4373 21.7381 14.3374 22.0893C14.2375 22.4404 14.2149 22.8091 14.2709 23.1698V29.4798ZM19.2709 13.0398V10.5198C19.2806 10.0137 19.1382 9.51621 18.8622 9.09184C18.5861 8.66746 18.1891 8.33567 17.7224 8.13936C17.2558 7.94305 16.741 7.89125 16.2445 7.99067C15.7481 8.09009 15.293 8.33615 14.9379 8.69703C14.5829 9.05791 14.3442 9.51701 14.2529 10.015C14.1616 10.5129 14.2217 11.0268 14.4256 11.4902C14.6295 11.9536 14.9677 12.3452 15.3965 12.6143C15.8253 12.8835 16.325 13.0177 16.8309 12.9998L19.2709 13.0398ZM10.4309 14.3098C9.8344 14.4025 9.29069 14.7054 8.89796 15.1639C8.50523 15.6224 8.28938 16.2061 8.28938 16.8098C8.28938 17.4135 8.50523 17.9973 8.89796 18.4557C9.29069 18.9142 9.8344 19.2171 10.4309 19.3098H16.7409C17.1017 19.3659 17.4703 19.3432 17.8215 19.2433C18.1726 19.1434 18.498 18.9688 18.7753 18.7312C19.0526 18.4937 19.2751 18.199 19.4278 17.8673C19.5804 17.5357 19.6594 17.1749 19.6594 16.8098C19.6594 16.4447 19.5804 16.084 19.4278 15.7523C19.2751 15.4206 19.0526 15.1259 18.7753 14.8884C18.498 14.6509 18.1726 14.4762 17.8215 14.3763C17.4703 14.2765 17.1017 14.2538 16.7409 14.3098H10.4309ZM26.8709 19.3098H29.3909C29.8984 19.3379 30.4027 19.2124 30.8378 18.9497C31.273 18.6871 31.619 18.2994 31.8307 17.8373C32.0424 17.3752 32.1099 16.86 32.0246 16.3589C31.9392 15.8578 31.7049 15.3941 31.3522 15.0281C30.9995 14.6621 30.5447 14.4108 30.0471 14.307C29.5495 14.2032 29.0322 14.2517 28.5626 14.4461C28.093 14.6406 27.6928 14.972 27.4142 15.3972C27.1357 15.8224 26.9916 16.3216 27.0009 16.8298L26.8709 19.3098ZM25.6009 10.4698C25.5605 9.82762 25.2769 9.22495 24.8078 8.78447C24.3387 8.34399 23.7194 8.0988 23.0759 8.0988C22.4324 8.0988 21.8131 8.34399 21.3441 8.78447C20.875 9.22495 20.5914 9.82762 20.5509 10.4698V16.7798C20.5292 17.1248 20.5784 17.4705 20.6955 17.7957C20.8125 18.1209 20.995 18.4187 21.2316 18.6707C21.4682 18.9226 21.7539 19.1234 22.0711 19.2607C22.3883 19.398 22.7303 19.4688 23.0759 19.4688C23.4216 19.4688 23.7635 19.398 24.0807 19.2607C24.3979 19.1234 24.6837 18.9226 24.9203 18.6707C25.1568 18.4187 25.3393 18.1209 25.4564 17.7957C25.5734 17.4705 25.6226 17.1248 25.6009 16.7798V10.4698ZM20.6409 26.9998V29.5198C20.6389 30.0206 20.7856 30.5108 21.0624 30.9281C21.3392 31.3455 21.7337 31.6713 22.1958 31.8644C22.6579 32.0574 23.1669 32.1089 23.6583 32.0124C24.1498 31.9159 24.6015 31.6758 24.9563 31.3223C25.3112 30.9689 25.5531 30.5181 25.6516 30.0271C25.75 29.536 25.7005 29.0268 25.5093 28.564C25.3181 28.1011 24.9938 27.7054 24.5775 27.4269C24.1613 27.1485 23.6717 26.9998 23.1709 26.9998H20.6409ZM29.4809 25.7298C30.1231 25.6894 30.7258 25.4058 31.1663 24.9367C31.6068 24.4676 31.8519 23.8483 31.8519 23.2048C31.8519 22.5613 31.6068 21.942 31.1663 21.473C30.7258 21.0039 30.1231 20.7203 29.4809 20.6798H23.1709C22.826 20.6581 22.4802 20.7073 22.155 20.8244C21.8298 20.9414 21.532 21.1239 21.2801 21.3605C21.0281 21.5971 20.8273 21.8828 20.69 22.2C20.5528 22.5172 20.4819 22.8592 20.4819 23.2048C20.4819 23.5505 20.5528 23.8924 20.69 24.2096C20.8273 24.5268 21.0281 24.8126 21.2801 25.0492C21.532 25.2858 21.8298 25.4682 22.155 25.5853C22.4802 25.7023 22.826 25.7515 23.1709 25.7298H29.4809Z"
                fill="#171F26" />
            </svg>
          </a>
        </div>
        <div class="wider-logo">
          <a href="https://www.youtube.com/graalvm" target="_blank" title="youtube social media link">
            <svg class="social-icon" width="35" height="24" viewBox="0 0 35 24" fill="none"
              xmlns="http://www.w3.org/2000/svg" alt="youtube social media icon">
              <path
                d="M18.1713 23.9692L11.0316 23.839C8.71989 23.7937 6.40246 23.8843 4.13616 23.4143C0.688425 22.7121 0.444187 19.2692 0.188588 16.3812C-0.163569 12.321 -0.0272501 8.18716 0.637305 4.16095C1.01218 1.90151 2.48897 0.553774 4.77232 0.406542C12.48 -0.125756 20.2388 -0.0634659 27.9295 0.185695C28.7417 0.208346 29.5597 0.332927 30.3605 0.474496C34.3138 1.16535 34.4103 5.06699 34.6659 8.35138C34.9215 11.6698 34.8136 15.0051 34.3251 18.3008C33.9332 21.0303 33.1835 23.318 30.0197 23.5389C26.0551 23.8277 22.1814 24.0599 18.2054 23.9862C18.2054 23.9692 18.1827 23.9692 18.1713 23.9692ZM13.9738 17.0607C16.9615 15.3505 19.8924 13.6687 22.863 11.9699C19.8696 10.2597 16.9445 8.57789 13.9738 6.87907V17.0607Z"
                fill="#171F26" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<footer class="footer footer__mobile">
  <div class="container-fluid container-fluid--custom-sm">
    <div class="row footer-content">
      <div class="footer__getstarted">
        <div class="rubber-footer">
          <p class="title-footer quickstart">Get started with GraalVM</p>
          <p class="footer-desc">Available for Linux, macOS, and Windows platforms</p>
          <a href="/latest/docs/getting-started/" class="btn btn-primary">Get Started</a>
        </div>
      </div>
      <div class="footer__columns">
        <div class="footer__columns-item">
          <h6 class="title-footer" onclick="fadeInAndOut(this)">Learn</h6>
          <div class="grow">
            <ul class="footer-list">
              <li class="footer-list__item"><a href="/guides/">Guides</a></li>
              <li class="footer-list__item"><a href="/latest/docs/">Documentation</a></li>
              <li class="footer-list__item">
                SDK Javadoc for JDK
                <a href="https://www.graalvm.org/23.1/javadoc/sdk/" class="javadoc" target="_blank">21</a>,
                <a href="https://www.graalvm.org/24.2/javadoc/sdk/" class="javadoc" target="_blank">24</a>,
                <a href="https://www.graalvm.org/25.0/javadoc/sdk/" class="javadoc" target="_blank">25EA</a>
              </li>
              <li class="footer-list__item"><a href="https://medium.com/graalvm" target="_blank">Blog</a></li>
              <li class="footer-list__item"><a href="https://github.com/graalvm/workshops" target="_blank">Workshops</a></li>
              <li class="footer-list__item"><a href="https://github.com/graalvm/graalvm-demos" target="_blank">Demos</a></li>
            </ul>
          </div>
        </div>
        <div class="footer__columns-item">
          <h6 class="title-footer" onclick="fadeInAndOut(this)">Resources</h6>
          <div class="grow">
            <ul class="footer-list">
              <li class="footer-list__item"><a href="https://www.oracle.com/java/graalvm/" target="_blank">Oracle
                  GraalVM</a></li>
              <li class="footer-list__item"><a href="https://www.oracle.com/developer/" target="_blank">Oracle
                  Developers</a></li>
              <li class="footer-list__item"><a href="https://docs.oracle.com/en/graalvm/index.html"
                  target="_blank">Oracle Help Center</a></li>
              <li class="footer-list__item"><a href="https://labs.oracle.com/" target="_blank">Oracle Labs</a></li>
              <li class="footer-list__item"><a href="/graalvm-brand-guidelines/">Brand
                  Guidelines</a></li>
            </ul>
          </div>
        </div>
        <div class="footer__columns-item">
          <h6 class="title-footer" onclick="fadeInAndOut(this)">More</h6>
          <div class="grow">
            <ul class="footer-list">
              <li class="footer-list__item"><a href="/why-graalvm/">Why GraalVM?</a></li>
              <li class="footer-list__item"><a href="/release-calendar/">Release Calendar</a>
              </li>
              <li class="footer-list__item"><a href="/release-notes/">Release Notes</a></li>
              <li class="footer-list__item"><a href="/faq/">FAQs</a></li>
              <li class="footer-list__item"><a href="/support/">Support</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="col-12 col-sm-12 col-md-12 col-lg-12">
      <div class="row">
        <div class="col-sm-12">
          <p class="copyright">
            Copyright  2018, 2025, Oracle and/or its affiliates. All rights reserved. Oracle and Java are
            registered trademarks. Other names may be trademarks of their respective owners.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  function fadeInAndOut(thz) {
    var elmt = thz.nextElementSibling;//Get the element that is below the button that
    //was just clicked
    if (elmt.clientHeight) {
      elmt.style.height = 0;
    } else {
      var wrapper = elmt.querySelector('ul');
      elmt.style.height = wrapper.clientHeight + "px";
    }
  }
</script>
    </div>
    <div class="overlay"></div>
    <script src='/resources/lib/slick-slider/slick.min.js'></script>
    <script src='/resources/js/main.js'></script>
    <script src='/resources/js/download.js'></script>
    <script src='/resources/js/sidebar.js'></script>
    <script src='/resources/js/favicon.js'></script>
  </body>
</html>

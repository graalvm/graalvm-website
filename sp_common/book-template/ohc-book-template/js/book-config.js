/*
 RequireJS 2.1.17 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */

/*!

 handlebars v3.0.3

Copyright (C) 2011-2014 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

/*!
 * JavaScript Cookie v2.0.4
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */

//ohc copyright doc - /cd/E23003_01/html/

/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

/*! jQuery UI - v1.12.1 - 2017-11-14
* http://jqueryui.com
* Includes: widget.js, disable-selection.js, widgets/resizable.js, widgets/mouse.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */

function setCurrentXml(e,t){null!=window.parent&&null!=window.parent.openFile&&window.parent.openFile.setData(e,t)}function mxDictionary(){this.clear()}function mxPoint(e,t){this.x=null!=e?e:0,this.y=null!=t?t:0}function mxRectangle(e,t,n,r){mxPoint.call(this,e,t),this.width=null!=n?n:0,this.height=null!=r?r:0}function mxEventObject(e){this.name=e,this.properties=[];for(var t=1;t<arguments.length;t+=2)null!=arguments[t+1]&&(this.properties[arguments[t]]=arguments[t+1])}function mxMouseEvent(e,t){this.evt=e,this.sourceState=this.state=t}function mxEventSource(e){this.setEventSource(e)}function mxXmlRequest(e,t,n,r,i,s){this.url=e,this.params=t,this.method=n||"POST",this.async=null!=r?r:!0,this.username=i,this.password=s}function mxWindow(e,t,n,r,i,s,o,u,a,f){null!=t&&(o=null!=o?o:!0,this.content=t,this.init(n,r,i,s,f),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(o),this.setTitle(e),(null==u||u)&&this.installMoveHandler(),null!=a&&null!=a.parentNode?a.parentNode.replaceChild(this.div,a):document.body.appendChild(this.div))}function mxForm(e){this.table=document.createElement("table"),this.table.className=e,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(e,t,n){this.src=e,this.width=t,this.height=n}function mxDivResizer(e,t){if("div"==e.nodeName.toLowerCase()){null==t&&(t=window),this.div=e;var n=mxUtils.getCurrentStyle(e);null!=n&&(this.resizeWidth="auto"==n.width,this.resizeHeight="auto"==n.height),mxEvent.addListener(t,"resize",mxUtils.bind(this,function(e){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize()}}function mxDragSource(e,t){this.element=e,this.dropHandler=t,mxEvent.addGestureListeners(e,mxUtils.bind(this,function(e){this.mouseDown(e)})),mxEvent.addListener(e,"dragstart",function(e){mxEvent.consume(e)}),this.eventConsumer=function(e,t){var n=t.getProperty("eventName"),r=t.getProperty("event");n!=mxEvent.MOUSE_DOWN&&r.consume()}}function mxToolbar(e){this.container=e}function mxUndoableEdit(e,t){this.source=e,this.changes=[],this.significant=null!=t?t:!0}function mxUndoManager(e){this.size=null!=e?e:100,this.clear()}function mxPanningManager(e){this.thread=null,this.active=!1,this.dy=this.dx=this.t0y=this.t0x=this.tdy=this.tdx=0,this.scrollbars=!1,this.scrollTop=this.scrollLeft=0,this.mouseListener={mouseDown:function(e,t){},mouseMove:function(e,t){},mouseUp:mxUtils.bind(this,function(e,t){this.active&&this.stop()})},e.addMouseListener(this.mouseListener),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.stop()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener);var t=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(e.container),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars?(e.panGraph(-e.container.scrollLeft-Math.ceil(this.dx),-e.container.scrollTop-Math.ceil(this.dy)),e.panDx=this.scrollLeft-e.container.scrollLeft,e.panDy=this.scrollTop-e.container.scrollTop,e.fireEvent(new mxEventObject(mxEvent.PAN))):e.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=e.view.translate.x,this.t0y=e.view.translate.y,this.active=!0},this.panTo=function(n,r,i,s){this.active||this.start(),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop;var o=e.container;this.dx=n+(null!=i?i:0)-o.scrollLeft-o.clientWidth,this.dx=0>this.dx&&Math.abs(this.dx)<this.border?this.border+this.dx:this.handleMouseOut?Math.max(this.dx,0):0,0==this.dx&&(this.dx=n-o.scrollLeft,this.dx=0<this.dx&&this.dx<this.border?this.dx-this.border:this.handleMouseOut?Math.min(0,this.dx):0),this.dy=r+(null!=s?s:0)-o.scrollTop-o.clientHeight,this.dy=0>this.dy&&Math.abs(this.dy)<this.border?this.border+this.dy:this.handleMouseOut?Math.max(this.dy,0):0,0==this.dy&&(this.dy=r-o.scrollTop,this.dy=0<this.dy&&this.dy<this.border?this.dy-this.border:this.handleMouseOut?Math.min(0,this.dy):0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=t())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdy=this.tdx=0,this.scrollbars)e.panDx=0,e.panDy=0,e.fireEvent(new mxEventObject(mxEvent.PAN));else{var t=e.panDx,n=e.panDy;if(0!=t||0!=n)e.panGraph(0,0),e.view.setTranslate(this.t0x+t/e.view.scale,this.t0y+n/e.view.scale)}},this.destroy=function(){e.removeMouseListener(this.mouseListener),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)}}function mxPopupMenu(e){this.factoryMethod=e,null!=e&&this.init()}function mxAutoSaveManager(e){this.changeHandler=mxUtils.bind(this,function(e,t){this.isEnabled()&&this.graphModelChanged(t.getProperty("edit").changes)}),this.setGraph(e)}function mxAnimation(e){this.delay=null!=e?e:20}function mxMorphing(e,t,n,r){mxAnimation.call(this,r),this.graph=e,this.steps=null!=t?t:6,this.ease=null!=n?n:1.5}function mxImageBundle(e){this.images=[],this.alt=null!=e?e:!1}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(e){mxAbstractCanvas2D.call(this),this.root=e,this.writeDefaults()}function mxSvgCanvas2D(e,t){mxAbstractCanvas2D.call(this),this.root=e,this.gradients=[],this.defs=null,this.styleEnabled=null!=t?t:!1;var n=null;if(e.ownerDocument!=document)for(n=e;null!=n&&"svg"!=n.nodeName;)n=n.parentNode;null!=n&&(0<n.getElementsByTagName("defs").length&&(this.defs=n.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=n.firstChild?n.insertBefore(this.defs,n.firstChild):n.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle()))}function mxGuide(e,t){this.graph=e,this.setStates(t)}function mxStencil(e){this.desc=e,this.parseDescription(),this.parseConstraints()}function mxShape(e){this.stencil=e,this.initStyles()}function mxActor(e,t,n,r){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxCloud(e,t,n,r){mxActor.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxRectangleShape(e,t,n,r){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxEllipse(e,t,n,r){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxDoubleEllipse(e,t,n,r){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxRhombus(e,t,n,r){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxPolyline(e,t,n){mxShape.call(this),this.points=e,this.stroke=t,this.strokewidth=null!=n?n:1}function mxArrow(e,t,n,r,i,s,o){mxShape.call(this),this.points=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1,this.arrowWidth=null!=i?i:mxConstants.ARROW_WIDTH,this.spacing=null!=s?s:mxConstants.ARROW_SPACING,this.endSize=null!=o?o:mxConstants.ARROW_SIZE}function mxArrowConnector(e,t,n,r,i,s,o){mxShape.call(this),this.points=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1,this.arrowWidth=null!=i?i:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=s?s:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){mxShape.call(this),this.value=e,this.bounds=t,this.color=null!=i?i:"black",this.align=null!=n?n:mxConstants.ALIGN_CENTER,this.valign=null!=r?r:mxConstants.ALIGN_MIDDLE,this.family=null!=s?s:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=o?o:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=u?u:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(a||2),this.spacingTop=this.spacing+parseInt(f||0),this.spacingRight=this.spacing+parseInt(l||0),this.spacingBottom=this.spacing+parseInt(c||0),this.spacingLeft=this.spacing+parseInt(h||0),this.horizontal=null!=p?p:!0,this.background=d,this.border=v,this.wrap=null!=m?m:!1,this.clipped=null!=g?g:!1,this.overflow=null!=y?y:"visible",this.labelPadding=null!=b?b:0,this.textDirection=w,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(e,t,n){mxShape.call(this),this.bounds=e,this.stroke=t,this.strokewidth=null!=n?n:1}function mxImageShape(e,t,n,r,i){mxShape.call(this),this.bounds=e,this.image=t,this.fill=n,this.stroke=r,this.strokewidth=null!=i?i:1,this.shadow=!1}function mxLabel(e,t,n,r){mxRectangleShape.call(this,e,t,n,r)}function mxCylinder(e,t,n,r){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxConnector(e,t,n){mxPolyline.call(this,e,t,n)}function mxSwimlane(e,t,n,r){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=r?r:1}function mxGraphLayout(e){this.graph=e}function WeightedCellSorter(e,t){this.cell=e,this.weightedValue=t}function mxStackLayout(e,t,n,r,i,s){mxGraphLayout.call(this,e),this.horizontal=null!=t?t:!0,this.spacing=null!=n?n:0,this.x0=null!=r?r:0,this.y0=null!=i?i:0,this.border=null!=s?s:0}function mxPartitionLayout(e,t,n,r){mxGraphLayout.call(this,e),this.horizontal=null!=t?t:!0,this.spacing=n||0,this.border=r||0}function mxCompactTreeLayout(e,t,n){mxGraphLayout.call(this,e),this.horizontal=null!=t?t:!0,this.invert=null!=n?n:!1}function mxRadialTreeLayout(e){mxCompactTreeLayout.call(this,e,!1)}function mxFastOrganicLayout(e){mxGraphLayout.call(this,e)}function mxCircleLayout(e,t){mxGraphLayout.call(this,e),this.radius=null!=t?t:100}function mxParallelEdgeLayout(e){mxGraphLayout.call(this,e)}function mxCompositeLayout(e,t,n){mxGraphLayout.call(this,e),this.layouts=t,this.master=n}function mxEdgeLabelLayout(e,t){mxGraphLayout.call(this,e)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=e,this.id=mxObjectIdentity.get(e),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=e,this.ids=[];for(var t=0;t<e.length;t++)this.ids.push(mxObjectIdentity.get(e[t]))}function mxGraphHierarchyModel(e,t,n,r,i){e.getGraph(),this.tightenToSource=i,this.roots=n,this.parent=r,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0,n=[],null==t&&(t=this.graph.getChildVertices(r)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,t,n);for(r=0;r<t.length;r++){i=n[r].connectsAsSource;for(var s=0;s<i.length;s++){var o=i[s],u=o.edges;if(null!=u&&0<u.length){var u=u[0],a=e.getVisibleTerminal(u,!1),a=this.vertexMapper.get(a);n[r]==a&&(a=e.getVisibleTerminal(u,!0),a=this.vertexMapper.get(a)),null!=a&&n[r]!=a&&(o.target=a,0==a.connectsAsTarget.length&&(a.connectsAsTarget=[]),0>mxUtils.indexOf(a.connectsAsTarget,o)&&a.connectsAsTarget.push(o))}}n[r].temp[0]=1}}function mxSwimlaneModel(e,t,n,r,i){e.getGraph(),this.tightenToSource=i,this.roots=n,this.parent=r,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0,n=[],null==t&&(t=this.graph.getChildVertices(r)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,t,n);for(r=0;r<t.length;r++){i=n[r].connectsAsSource;for(var s=0;s<i.length;s++){var o=i[s],u=o.edges;if(null!=u&&0<u.length){var u=u[0],a=e.getVisibleTerminal(u,!1),a=this.vertexMapper.get(a);n[r]==a&&(a=e.getVisibleTerminal(u,!0),a=this.vertexMapper.get(a)),null!=a&&n[r]!=a&&(o.target=a,0==a.connectsAsTarget.length&&(a.connectsAsTarget=[]),0>mxUtils.indexOf(a.connectsAsTarget,o)&&a.connectsAsTarget.push(o))}}n[r].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(e){this.layout=e}function MedianCellSorter(){}function mxMinimumCycleRemover(e){this.layout=e}function mxCoordinateAssignment(e,t,n,r,i,s){this.layout=e,this.intraCellSpacing=t,this.interRankCellSpacing=n,this.orientation=r,this.initialX=i,this.parallelEdgeSpacing=s}function mxSwimlaneOrdering(e){this.layout=e}function mxHierarchicalLayout(e,t,n){mxGraphLayout.call(this,e),this.orientation=null!=t?t:mxConstants.DIRECTION_NORTH,this.deterministic=null!=n?n:!0}function mxSwimlaneLayout(e,t,n){mxGraphLayout.call(this,e),this.orientation=null!=t?t:mxConstants.DIRECTION_NORTH,this.deterministic=null!=n?n:!0}function mxGraphModel(e){this.currentEdit=this.createUndoableEdit(),null!=e?this.setRoot(e):this.clear()}function mxRootChange(e,t){this.model=e,this.previous=this.root=t}function mxChildChange(e,t,n,r){this.model=e,this.previous=this.parent=t,this.child=n,this.previousIndex=this.index=r}function mxTerminalChange(e,t,n,r){this.model=e,this.cell=t,this.previous=this.terminal=n,this.source=r}function mxValueChange(e,t,n){this.model=e,this.cell=t,this.previous=this.value=n}function mxStyleChange(e,t,n){this.model=e,this.cell=t,this.previous=this.style=n}function mxGeometryChange(e,t,n){this.model=e,this.cell=t,this.previous=this.geometry=n}function mxCollapseChange(e,t,n){this.model=e,this.cell=t,this.previous=this.collapsed=n}function mxVisibleChange(e,t,n){this.model=e,this.cell=t,this.previous=this.visible=n}function mxCellAttributeChange(e,t,n){this.cell=e,this.attribute=t,this.previous=this.value=n}function mxCell(e,t,n){this.value=e,this.setGeometry(t),this.setStyle(n),null!=this.onInit&&this.onInit()}function mxGeometry(e,t,n,r){mxRectangle.call(this,e,t,n,r)}function mxPrintPreview(e,t,n,r,i,s,o,u,a){this.graph=e,this.scale=null!=t?t:1/e.pageScale,this.border=null!=r?r:0,this.pageFormat=mxRectangle.fromRectangle(null!=n?n:e.pageFormat),this.title=null!=u?u:"Printer-friendly version",this.x0=null!=i?i:0,this.y0=null!=s?s:0,this.borderColor=o,this.pageSelector=null!=a?a:!0}function mxStylesheet(){this.styles={},this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxCellState(e,t,n){this.view=e,this.cell=t,this.style=n,this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(e){this.graph=e,this.cells=[]}function mxSelectionChange(e,t,n){this.selectionModel=e,this.added=null!=t?t.slice():null,this.removed=null!=n?n.slice():null}function mxCellEditor(e){this.graph=e,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=mxUtils.bind(this,function(e){null!=this.editingCell&&null==this.graph.getView().getState(this.editingCell)&&this.stopEditing(!0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}function mxCellRenderer(){}function mxGraphView(e){this.graph=e,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(e,t){this.view=e,this.previous=this.root=t,this.isUp=null==t;if(!this.isUp)for(var n=this.view.currentRoot,r=this.view.graph.getModel();null!=n;){if(n==t){this.isUp=!0;break}n=r.getParent(n)}}function mxGraph(e,t,n,r){this.mouseListeners=null,this.renderHint=n,this.dialect=mxClient.IS_SVG?mxConstants.DIALECT_SVG:n==mxConstants.RENDERING_HINT_EXACT&&mxClient.IS_VML?mxConstants.DIALECT_VML:n==mxConstants.RENDERING_HINT_FASTEST?mxConstants.DIALECT_STRICTHTML:n==mxConstants.RENDERING_HINT_FASTER?mxConstants.DIALECT_PREFERHTML:mxConstants.DIALECT_MIXEDHTML,this.model=null!=t?t:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=r?r:this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=mxUtils.bind(this,function(e,t){this.graphModelChanged(t.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=e&&this.init(e),this.view.revalidate()}function mxCellOverlay(e,t,n,r,i,s){this.image=e,this.tooltip=t,this.align=null!=n?n:this.align,this.verticalAlign=null!=r?r:this.verticalAlign,this.offset=null!=i?i:new mxPoint,this.cursor=null!=s?s:"help"}function mxOutline(e,t){this.source=e,null!=t&&this.init(t)}function mxMultiplicity(e,t,n,r,i,s,o,u,a,f){this.source=e,this.type=t,this.attr=n,this.value=r,this.min=null!=i?i:0,this.max=null!=s?s:"n",this.validNeighbors=o,this.countError=mxResources.get(u)||u,this.typeError=mxResources.get(a)||a,this.validNeighborsAllowed=null!=f?f:!0}function mxLayoutManager(e){this.undoHandler=mxUtils.bind(this,function(e,t){this.isEnabled()&&this.beforeUndo(t.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(e,t){this.isEnabled()&&this.cellsMoved(t.getProperty("cells"),t.getProperty("event"))}),this.setGraph(e)}function mxSwimlaneManager(e,t,n,r){this.horizontal=null!=t?t:!0,this.addEnabled=null!=n?n:!0,this.resizeEnabled=null!=r?r:!0,this.addHandler=mxUtils.bind(this,function(e,t){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(t.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(e,t){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(t.getProperty("cells"))}),this.setGraph(e)}function mxTemporaryCellStates(e,t,n,r,i){t=null!=t?t:1,this.view=e,this.oldValidateCellState=e.validateCellState,this.oldBounds=e.getGraphBounds(),this.oldStates=e.getStates(),this.oldScale=e.getScale(),this.oldDoRedrawShape=e.graph.cellRenderer.doRedrawShape;var s=this;null!=i&&(e.graph.cellRenderer.doRedrawShape=function(t){var n=t.shape.paint;t.shape.paint=function(e){var r=i(t);null!=r&&e.setLink(r),n.apply(this,arguments),null!=r&&e.setLink(null)},s.oldDoRedrawShape.apply(e.graph.cellRenderer,arguments),t.shape.paint=n}),e.validateCellState=function(t,n){return null==t||null==r||r(t)?s.oldValidateCellState.apply(e,arguments):null},e.setStates(new mxDictionary),e.setScale(t);if(null!=n){e.resetValidationState(),t=null;for(var o=0;o<n.length;o++){var u=e.getBoundingBox(e.validateCellState(e.validateCell(n[o])));null==t?t=u:t.add(u)}e.setGraphBounds(t||new mxRectangle)}}function mxCellStatePreview(e){this.deltas=new mxDictionary,this.graph=e}function mxConnectionConstraint(e,t,n,r,i){this.point=e,this.perimeter=null!=t?t:!0,this.name=n,this.dx=r?r:0,this.dy=i?i:0}function mxGraphHandler(e){this.graph=e,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.updatePreviewShape(),this.updateHint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(e,t){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils.bind(this,function(e,t){if(null!=this.first)try{this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.updatePreviewShape()}catch(n){this.reset()}}),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler)}function mxPanningHandler(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(e,t){var n=t.getProperty("eventName"),r=t.getProperty("event");n==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(r)&&(this.start(r),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",r)),r.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(e,t){if(this.isPinchEnabled()){var n=t.getProperty("event");mxEvent.isConsumed(n)||"gesturestart"!=n.type?"gestureend"==n.type&&null!=this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,this.active||null==this.mouseDownEvent||(this.start(this.mouseDownEvent),this.mouseDownEvent=null));if(null!=this.initialScale){var r=Math.round(this.initialScale*n.scale*100)/100;null!=this.minScale&&(r=Math.max(this.minScale,r)),null!=this.maxScale&&(r=Math.min(this.maxScale,r)),this.graph.view.scale!=r&&(this.graph.zoomTo(r),mxEvent.consume(n))}}}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.reset()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener))}function mxPopupMenuHandler(e,t){null!=e&&(this.graph=e,this.factoryMethod=t,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(e,t){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(e,t,n,r){mxEventSource.call(this),null!=e&&(this.graph=e,this.validColor=null!=t?t:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=n?n:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=r?r:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(e))}function mxSelectionCellsHandler(e){mxEventSource.call(this),this.graph=e,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=mxUtils.bind(this,function(e,t){this.isEnabled()&&this.refresh()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(e,t){mxEventSource.call(this),null!=e&&(this.graph=e,this.factoryMethod=t,this.init(),this.escapeHandler=mxUtils.bind(this,function(e,t){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(e){this.graph=e,this.resetHandler=mxUtils.bind(this,function(e,t){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(e,t){var n=t.getProperty("eventName"),r=t.getProperty("event");if(n==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(r)){var n=mxUtils.getOffset(this.graph.container),i=mxUtils.getScrollOrigin(this.graph.container);i.x-=n.x,i.y-=n.y,this.start(r.getX()+i.x,r.getY()+i.y),r.consume(!1)}}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(e,t){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxHandle(e,t,n){this.graph=e.view.graph,this.state=e,this.cursor=null!=t?t:this.cursor,this.image=null!=n?n:this.image,this.init()}function mxVertexHandler(e){null!=e&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(e,t){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(e){null!=e&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,n){var r=null!=this.index;this.reset(),r&&this.graph.cellRenderer.redraw(this.state,!1,e.view.isRendering())}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(e){mxEdgeHandler.call(this,e)}function mxEdgeSegmentHandler(e){mxEdgeHandler.call(this,e)}function mxKeyHandler(e,t){null!=e&&(this.graph=e,this.target=t||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(e){this.keyDown(e)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxTooltipHandler(e,t){null!=e&&(this.graph=e,this.delay=t||500,this.graph.addMouseListener(this))}function mxCellTracker(e,t,n){mxCellMarker.call(this,e,t),this.graph.addMouseListener(this),null!=n&&(this.getCell=n),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(e,t,n,r){null!=e&&(this.graph=e,this.highlightColor=null!=t?t:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=n?n:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=r?r:!1,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){if(null!=this.state){var e=this.graph.view.getState(this.state.cell);null==e?this.hide():(this.state=e,this.repaint())}}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}function mxDefaultKeyHandler(e){if(null!=e){this.editor=e,this.handler=new mxKeyHandler(e.graph);var t=this.handler.escape;this.handler.escape=function(n){t.apply(this,arguments),e.hideProperties(),e.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",n))}}}function mxDefaultPopupMenu(e){this.config=e}function mxDefaultToolbar(e,t){this.editor=t,null!=e&&null!=t&&this.init(e)}function mxEditor(e){this.actions=[],this.addActions(),null!=document.body&&(this.cycleAttributeValues=[],this.popupHandler=new mxDefaultPopupMenu,this.undoManager=new mxUndoManager,this.graph=this.createGraph(),this.toolbar=this.createToolbar(),this.keyHandler=new mxDefaultKeyHandler(this),this.configure(e),this.graph.swimlaneIndicatorColorAttribute=this.cycleAttributeName,null!=this.onInit&&this.onInit(),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxCodec(e){this.document=e||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(e,t,n,r){this.template=e,this.exclude=null!=t?t:[],this.idrefs=null!=n?n:[],this.mapping=null!=r?r:[],this.reverse={};for(var i in this.mapping)this.reverse[this.mapping[i]]=i}function Dialog(e,t,n,r,i,s,o,u,a,f){var l=0;mxClient.IS_VML&&(null==document.documentMode||8>document.documentMode)&&(l=80),n+=l,r+=l;var c=n,h=r,p=0<document.documentElement.clientHeight?document.documentElement.clientHeight:Math.max(document.body.clientHeight||0,document.documentElement.clientHeight),d=Math.max(1,Math.round((document.body.clientWidth-n-64)/2)),v=Math.max(1,Math.round((p-r-e.footerHeight)/3));mxClient.IS_QUIRKS||(t.style.maxHeight="100%"),n=Math.min(n,document.body.scrollWidth-64),r=Math.min(r,p-64),0<e.dialogs.length&&(this.zIndex+=2*e.dialogs.length),null==this.bg&&(this.bg=e.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog.backdropColor,this.bg.style.height=p+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity),mxClient.IS_QUIRKS&&new mxDivResizer(this.bg));var m=mxUtils.getDocumentScrollOrigin(document);this.bg.style.left=m.x+"px",this.bg.style.top=m.y+"px",d+=m.x,v+=m.y,i&&document.body.appendChild(this.bg);var g=e.createDiv(a?"geTransDialog":"geDialog");i=this.getPosition(d,v,n,r),d=i.x,v=i.y,g.style.width=n+"px",g.style.height=r+"px",g.style.left=d+"px",g.style.top=v+"px",g.style.zIndex=this.zIndex,g.appendChild(t),document.body.appendChild(g),!u&&t.clientHeight>g.clientHeight-64&&(t.style.overflowY="auto"),s&&(s=document.createElement("img"),s.setAttribute("src",Dialog.prototype.closeImage),s.setAttribute("title",mxResources.get("close")),s.className="geDialogClose",s.style.top=v+14+"px",s.style.left=d+n+38-l+"px",s.style.zIndex=this.zIndex,mxEvent.addListener(s,"click",mxUtils.bind(this,function(){e.hideDialog(!0)})),document.body.appendChild(s),this.dialogImg=s,mxEvent.addGestureListeners(this.bg,null,null,mxUtils.bind(this,function(t){e.hideDialog(!0)}))),this.resizeListener=mxUtils.bind(this,function(){if(null!=f){var i=f();null!=i&&(c=n=i.w,h=r=i.h)}p=Math.max(document.body.clientHeight,document.documentElement.clientHeight),this.bg.style.height=p+"px",d=Math.max(1,Math.round((document.body.clientWidth-n-64)/2)),v=Math.max(1,Math.round((p-r-e.footerHeight)/3)),n=Math.min(c,document.body.scrollWidth-64),r=Math.min(h,p-64),i=this.getPosition(d,v,n,r),d=i.x,v=i.y,g.style.left=d+"px",g.style.top=v+"px",g.style.width=n+"px",g.style.height=r+"px",!u&&t.clientHeight>g.clientHeight-64&&(t.style.overflowY="auto"),null!=this.dialogImg&&(this.dialogImg.style.top=v+14+"px",this.dialogImg.style.left=d+n+38-l+"px")}),mxEvent.addListener(window,"resize",this.resizeListener),this.onDialogClose=o,this.container=g,e.editor.fireEvent(new mxEventObject("showDialog"))}function ChangePageSetup(e,t,n,r){this.ui=e,this.previousColor=this.color=t,this.previousImage=this.image=n,this.previousFormat=this.format=r,this.ignoreImage=this.ignoreColor=!1}function Actions(e){this.editorUi=e,this.actions={},this.init()}function Action(e,t,n,r,i){mxEventSource.call(this),this.label=e,this.funct=this.createFunction(t),this.enabled=null!=n?n:!0,this.iconCls=r,this.shortcut=i,this.visible=!0}function DiagramPage(e){this.node=e,null==this.getId()&&this.node.setAttribute("id",Editor.guid())}function RenamePage(e,t,n){this.ui=e,this.page=t,this.previous=this.name=n}function MovePage(e,t,n){this.ui=e,this.oldIndex=t,this.newIndex=n}function SelectPage(e,t,n){this.ui=e,this.previousPage=this.page=t,this.neverShown=!0,null!=t&&(this.neverShown=null==t.viewState,this.ui.updatePageRoot(t),null!=n&&(t.viewState=n,this.neverShown=!1))}function ChangePage(e,t,n,r){SelectPage.call(this,e,n),this.relatedPage=t,this.index=r,this.previousIndex=null}var requirejs,require,define;(function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var r in e)if(t(e,r)&&n(e[r],r))break}function U(e,n,r,i){return n&&B(n,function(n,s){if(r||!t(e,s))i&&"object"==typeof n&&n&&!H(n)&&!G(n)&&!(n instanceof RegExp)?(e[s]||(e[s]={}),U(e[s],n,r,i)):e[s]=n}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var r,i,s,o,u,a,f,l,t=t&&t.split("/"),c=A.map,h=c&&c["*"];if(e){e=e.split("/"),i=e.length-1,A.nodeIdCompat&&Q.test(e[i])&&(e[i]=e[i].replace(Q,"")),"."===e[0].charAt(0)&&t&&(i=t.slice(0,t.length-1),e=i.concat(e)),i=e;for(s=0;s<i.length;s++)(o=i[s],"."===o)?(i.splice(s,1),s-=1):".."===o&&0!==s&&(1!==s||".."!==i[2])&&".."!==i[s-1]&&0<s&&(i.splice(s-1,2),s-=2);e=e.join("/")}if(n&&c&&(t||h)){i=e.split("/"),s=i.length;e:for(;0<s;s-=1){u=i.slice(0,s).join("/");if(t)for(o=t.length;0<o;o-=1)if(n=m(c,t.slice(0,o).join("/")))if(n=m(n,u)){r=n,a=s;break e}!f&&h&&m(h,u)&&(f=m(h,u),l=s)}!r&&f&&(r=f,a=l),r&&(i.splice(0,a,r),e=i.join("/"))}return(r=m(A.pkgs,e))?r:e}function r(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=m(A.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,u,a=null,f=t?t.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(q+=1)),e=s(e),a=e[0],e=e[1],a&&(a=n(a,f,i),u=m(j,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),e=s(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(W+=1):"",{prefix:a,name:h,parentMap:t,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(O,t);return n||(n=O[t]=new x.Module(e)),n}function f(e,n,r){var i=e.id,s=m(O,i);t(j,i)&&(!s||s.defineEmitComplete)?"defined"===n&&r(j[i]):(s=a(e),s.error&&"error"===n)?r(s.error):s.on(n,r)}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(v(n,function(t){if(t=m(O,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&g.onError(e)}function c(){R.length&&(ha.apply(P,[P.length,0].concat(R)),R=[])}function h(e){delete O[e],delete _[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,v(e.depMaps,function(r,i){var s=r.id,o=m(O,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,j[s]),e.check()):p(o,t,n))}),n[r]=!0)}function d(){var e,t,n=(e=1e3*A.waitSeconds)&&x.startTime+e<(new Date).getTime(),s=[],o=[],u=!1,a=!0;if(!E){E=!0,B(_,function(e){var f=e.map,l=f.id;if(e.enabled&&(f.isDefine||o.push(e),!e.error))if(!e.inited&&n)i(l)?u=t=!0:(s.push(l),r(l));else if(!e.inited&&e.fetched&&f.isDefine&&(u=!0,!f.prefix))return a=!1});if(n&&s.length)return e=C("timeout","Load timeout for modules: "+s,null,s),e.contextName=x.contextName,l(e);a&&v(o,function(e){p(e,{},{})}),(!n||t)&&u&&(z||ea)&&!L&&(L=setTimeout(function(){L=0,d()},50)),E=!1}}function y(e){t(j,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(c();P.length;){e=P.shift();if(null===e[0])return l(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));y(e)}}var E,S,x,k,L,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},_={},D={},P=[],j={},F={},I={},q=1,W=1;return k={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=m(D,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(i)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(j[n]=r,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,r=e.id,i=o(e.prefix);this.depMaps.push(i),f(i,"defined",u(this,function(i){var s,c;c=m(I,this.map.id);var p=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(i.normalize&&(p=i.normalize(p,function(e){return n(e,d,!0)})||""),i=o(e.prefix+"!"+p,this.map.parentMap),f(i,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=m(O,i.id))this.depMaps.push(i),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable()}else c?(this.map.url=x.nameToUrl(c),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],B(O,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&h(e.map.id)}),l(e)}),s.fromText=u(this,function(n,i){var u=e.name,f=o(u),c=M;i&&(n=i),c&&(M=!1),a(f),t(A.config,r)&&(A.config[u]=A.config[r]);try{g.exec(n)}catch(h){return l(C("fromtexteval","fromText eval for "+r+" failed: "+h,h,[r]))}c&&(M=!0),this.depMaps.push(f),x.completeLoad(u),v([u],s)}),i.load(e.name,v,s,A))})),x.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){_[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var r,i;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e;if(r=m(k,e.id)){this.depExports[n]=r(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback?f(e,"error",u(this,this.errback)):this.events.error&&f(e,"error",u(this,function(e){this.emit("error",e)}))}r=e.id,i=O[r],!t(k,r)&&i&&!i.enabled&&x.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(O,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:A,contextName:e,registry:O,defined:j,urlFetched:F,defQueue:P,Module:S,makeModuleMap:o,nextTick:g.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(I[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(i,s){function u(n,r,f){var c,h;return s.enableBuildCallback&&r&&G(r)&&(r.__requireJsBuild=!0),"string"==typeof n?G(r)?l(C("requireargs","Invalid require call"),f):i&&t(k,n)?k[n](O[i.id]):g.get?g.get(x,n,i,u):(c=o(n,i,!1,!0),c=c.id,t(j,c)?j[c]:l(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(i?"":". Use require([])")))):(w(),x.nextTick(function(){w(),h=a(o(null,i)),h.skipMap=s.skipMap,h.init(n,r,f,{enabled:!0}),d()}),u)}return s=s||{},U(u,{isBrowser:z,toUrl:function(e){var t,r=e.lastIndexOf("."),s=e.split("/")[0];return-1!==r&&("."!==s&&".."!==s||1<r)&&(t=e.substring(r,e.length),e=e.substring(0,r)),x.nameToUrl(n(e,i&&i.id,!0),t,!0)},defined:function(e){return t(j,o(e,i,!1,!0).id)},specified:function(e){return e=o(e,i,!1,!0).id,t(j,e)||t(O,e)}}),i||(u.undef=function(e){c();var t=o(e,i,!0),n=m(O,e);r(e),delete j[e],delete F[t.url],delete D[e],T(P,function(t,n){t[0]===e&&P.splice(n,1)}),n&&(n.events.defined&&(D[e]=n.events),h(e))}),u},enable:function(e){m(O,e.id)&&a(e).enable()},completeLoad:function(e){var n,r,s=m(A.shim,e)||{},o=s.exports;for(c();P.length;){r=P.shift();if(null===r[0]){r[0]=e;if(n)break;n=!0}else r[0]===e&&(n=!0);y(r)}r=m(O,e);if(!n&&!t(j,e)&&r&&!r.inited){if(A.enforceDefine&&(!o||!da(o)))return i(e)?void 0:l(C("nodefine","No define call for "+e,null,[e]));y([e,s.deps||[],s.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,s;(r=m(A.pkgs,e))&&(e=r);if(r=m(I,e))return x.nameToUrl(r,t,n);if(g.jsExtRegExp.test(e))r=e+(t||"");else{r=A.paths,e=e.split("/");for(i=e.length;0<i;i-=1)if(s=e.slice(0,i).join("/"),s=m(r,s)){H(s)&&(s=s[0]),e.splice(0,i,s);break}r=e.join("/"),r+=t||(/^data\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+r}return A.urlArgs?r+((-1===r.indexOf("?")?"?":"&")+A.urlArgs):r},load:function(e,t){g.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))N=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!i(t.id))return l(C("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z="undefined"!=typeof window&&"undefined"!=typeof navigator&&!!window.document,ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,r){var i,s="_";return!H(e)&&"string"!=typeof e&&(i=e,H(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=g.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.17",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=g.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,J=r,D?y.insertBefore(r,D):y.appendChild(r),J=null,r;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){y||(y=e.parentNode);if(I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((r=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),r=N),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}})(this),define("requireLib",function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t="length"in e&&e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function ja(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ka(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function la(e){var t=ga.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ma(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function na(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function oa(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pa(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sa(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function ta(e){var t=l,r=ra[e];return r||(r=sa(e,t),"none"!==r&&r||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qa[0].contentDocument,t.write(),t.close(),r=sa(e,t),qa.detach()),ra[e]=r),r}function xa(e,t,r){var i,s,o,u,a=e.style;return r=r||wa(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),va.test(u)&&ua.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function ya(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fa(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ea.length;while(i--)if(t=Ea[i]+n,t in e)return t;return r}function Ga(e,t,n){var r=Aa.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ha(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ia(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wa(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xa(e,t,o),(0>s||null==s)&&(s=e.style[t]),va.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Ha(e,t,r||(u?"border":"content"),i,o)+"px"}function Ja(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",ta(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Ka(e,t,n,r,i){return new Ka.prototype.init(e,t,n,r,i)}function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ua(e,t,n){for(var r,i=(Ra[t]||[]).concat(Ra["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Va(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||ta(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Na.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?ta(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ua(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wa(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xa(e,t,r){var i,s,o=0,u=Qa.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=La||Sa(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:La||Sa(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wa(c,l.opts.specialEasing);u>o;o++)if(i=Qa[o].call(l,e,c,l.opts))return i;return n.map(c,Ua,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function qb(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function rb(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===mb;return u(t.dataTypes[0])||!s["*"]&&u("*")}function sb(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function tb(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function ub(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Ab(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||wb.test(e)?i(e,n):Ab(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Ab(e+"["+s+"]",t[s],r,i)}function Jb(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=oa(a),o=oa(e),i=0,s=o.length;s>i;i++)pa(o[i],u[i]);if(t)if(r)for(o=o||oa(e),u=u||oa(a),i=0,s=o.length;s>i;i++)na(o[i],u[i]);else na(e,a);return u=oa(a,"script"),u.length>0&&ma(u,!f&&oa(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(ca.test(s)){o=o||c.appendChild(t.createElement("div")),u=(ba.exec(s)||["",""])[1].toLowerCase(),a=ia[u]||ia._default,o.innerHTML=a[1]+s.replace(aa,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=oa(c.appendChild(s),"script"),f&&ma(o),r)){l=0;while(s=o[l++])fa.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ja(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ja(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(oa(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&ma(oa(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(oa(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!da.test(e)&&!ia[(ba.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(aa,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(oa(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(oa(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&ea.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(oa(i,"script"),ka),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,oa(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,la),l=0;u>l;l++)a=o[l],fa.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qa,ra={},ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):a.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.removeChild(t),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xa(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fa(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Ba.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fa(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xa(e,t,i)),"normal"===s&&t in Da&&(s=Da[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?za.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Ca,function(){return Ia(e,t,i)}):Ia(e,t,i):void 0},set:function(e,r,i){var s=i&&wa(e);return Ga(e,r,i?Ha(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xa,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ua.test(e)||(n.cssHooks[e+t].set=Ga)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wa(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Ka.propHooks[this.prop];return e&&e.get?e.get(this):Ka.propHooks._default.get(this)},run:function(e){var t,r=Ka.propHooks[this.prop];return this.options.duration?this.pos=t=n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Oa.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Oa.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xa,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Ra[r]=Ra[r]||[],Ra[r].unshift(t)},prefilter:function(e,t){t?Qa.unshift(e):Qa.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xa(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pa.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Ta(t,!0),e,n,i)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(La=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),La=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Za:Ya)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Za={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$a[t]||n.find.attr;$a[t]=function(e,t,n){var i,s;return n||(s=$a[t],$a[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$a[t]=s),i}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_a.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ab," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ab," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ab," ").indexOf(t)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bb,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cb=n.now(),db=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?sb(sb(e,n.ajaxSettings),t):sb(n.ajaxSettings,e)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=tb(c,S,o)),w=ub(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=gb.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=kb.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pb[1]&&a[2]===pb[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),rb(lb,c,t,S),2===b)return S;f=n.event&&c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ib.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(db.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fb.test(i)?i.replace(fb,"$1_="+cb++):i+(db.test(i)?"&":"?")+"_="+cb++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+nb+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=rb(mb,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Ab(r,e[r],t,s);return i.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(xb,"\r\n")}}):{name:t.name,value:r.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var e in Cb)Cb[e]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(e){var t;return k.cors||Eb&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Bb;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Cb[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Db[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Cb[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fb.pop()||n.expando+"_"+cb++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Gb.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Gb,"$1"+i):e.jsonp!==!1&&(e.url+=(db.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Fb.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Hb=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Hb)return Hb.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Ib=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Jb(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ib;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Jb(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=ya(k.pixelPosition,function(e,r){return r?(r=xa(e,t),va.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Lb),e&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n}),!function(e){"undefined"!=typeof exports?e(exports):(window.hljs=e({}),"function"==typeof define&&define.amd&&define("highlightjs",[],function(){return window.hljs}))}(function(e){function t(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(e){return e.nodeName.toLowerCase()}function r(e,t){var n=e&&e.exec(t);return n&&0==n.index}function i(e){var t=(e.className+" "+(e.parentNode?e.parentNode.className:"")).split(/\s+/);return t=t.map(function(e){return e.replace(/^lang(uage)?-/,"")}),t.filter(function(e){return b(e)||/no(-?)highlight|plain|text/.test(e)})[0]}function s(e,t){var n,r={};for(n in e)r[n]=e[n];if(t)for(n in t)r[n]=t[n];return r}function o(e){var t=[];return function r(e,i){for(var s=e.firstChild;s;s=s.nextSibling)3==s.nodeType?i+=s.nodeValue.length:1==s.nodeType&&(t.push({event:"start",offset:i,node:s}),i=r(s,i),n(s).match(/br|hr|img|input/)||t.push({event:"stop",offset:i,node:s}));return i}(e,0),t}function u(e,r,i){function s(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:"start"==r[0].event?e:r:e.length?e:r}function o(e){function r(e){return" "+e.nodeName+'="'+t(e.value)+'"'}l+="<"+n(e)+Array.prototype.map.call(e.attributes,r).join("")+">"}function u(e){l+="</"+n(e)+">"}function a(e){("start"==e.event?o:u)(e.node)}for(var f=0,l="",c=[];e.length||r.length;){var h=s();if(l+=t(i.substr(f,h[0].offset-f)),f=h[0].offset,h==e){c.reverse().forEach(u);do a(h.splice(0,1)[0]),h=s();while(h==e&&h.length&&h[0].offset==f);c.reverse().forEach(o)}else"start"==h[0].event?c.push(h[0].node):c.pop(),a(h.splice(0,1)[0])}return l+t(i.substr(f))}function a(e){function t(e){return e&&e.source||e}function n(n,r){return new RegExp(t(n),"m"+(e.cI?"i":"")+(r?"g":""))}function r(i,o){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var u={},a=function(t,n){e.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(e){var n=e.split("|");u[n[0]]=[t,n[1]?Number(n[1]):1]})};"string"==typeof i.k?a("keyword",i.k):Object.keys(i.k).forEach(function(e){a(e,i.k[e])}),i.k=u}i.lR=n(i.l||/\b\w+\b/,!0),o&&(i.bK&&(i.b="\\b("+i.bK.split(" ").join("|")+")\\b"),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=t(i.e)||"",i.eW&&o.tE&&(i.tE+=(i.e?"|":"")+o.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var f=[];i.c.forEach(function(e){e.v?e.v.forEach(function(t){f.push(s(e,t))}):f.push("self"==e?i:e)}),i.c=f,i.c.forEach(function(e){r(e,i)}),i.starts&&r(i.starts,o);var l=i.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([i.tE,i.i]).map(t).filter(Boolean);i.t=l.length?n(l.join("|"),!0):{exec:function(){return null}}}}r(e)}function f(e,n,i,s){function o(e,t){for(var n=0;n<t.c.length;n++)if(r(t.c[n].bR,e))return t.c[n]}function u(e,t){if(r(e.eR,t)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.eW?u(e.parent,t):void 0}function c(e,t){return!i&&r(t.iR,e)}function h(e,t){var n=S.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function p(e,t,n,r){var i=r?"":w.classPrefix,s='<span class="'+i,o=n?"":"</span>";return s+=e+'">',s+t+o}function d(){if(!C.k)return t(A);var e="",n=0;C.lR.lastIndex=0;for(var r=C.lR.exec(A);r;){e+=t(A.substr(n,r.index-n));var i=h(C,r);i?(O+=i[1],e+=p(i[0],t(r[0]))):e+=t(r[0]),n=C.lR.lastIndex,r=C.lR.exec(A)}return e+t(A.substr(n))}function v(){if(C.sL&&!E[C.sL])return t(A);var e=C.sL?f(C.sL,A,!0,k[C.sL]):l(A);return C.r>0&&(O+=e.r),"continuous"==C.subLanguageMode&&(k[C.sL]=e.top),p(e.language,e.value,!1,!0)}function m(){return void 0!==C.sL?v():d()}function g(e,n){var r=e.cN?p(e.cN,"",!0):"";e.rB?(L+=r,A=""):e.eB?(L+=t(n)+r,A=""):(L+=r,A=n),C=Object.create(e,{parent:{value:C}})}function y(e,n){if(A+=e,void 0===n)return L+=m(),0;var r=o(n,C);if(r)return L+=m(),g(r,n),r.rB?0:n.length;var i=u(C,n);if(i){var s=C;s.rE||s.eE||(A+=n),L+=m();do C.cN&&(L+="</span>"),O+=C.r,C=C.parent;while(C!=i.parent);return s.eE&&(L+=t(n)),A="",i.starts&&g(i.starts,""),s.rE?0:n.length}if(c(n,C))throw new Error('Illegal lexeme "'+n+'" for mode "'+(C.cN||"<unnamed>")+'"');return A+=n,n.length||1}var S=b(e);if(!S)throw new Error('Unknown language: "'+e+'"');a(S);var T,C=s||S,k={},L="";for(T=C;T!=S;T=T.parent)T.cN&&(L=p(T.cN,"",!0)+L);var A="",O=0;try{for(var M,_,D=0;;){if(C.t.lastIndex=D,M=C.t.exec(n),!M)break;_=y(n.substr(D,M.index-D),M[0]),D=M.index+_}for(y(n.substr(D)),T=C;T.parent;T=T.parent)T.cN&&(L+="</span>");return{r:O,value:L,language:e,top:C}}catch(P){if(-1!=P.message.indexOf("Illegal"))return{r:0,value:t(n)};throw P}}function l(e,n){n=n||w.languages||Object.keys(E);var r={r:0,value:t(e)},i=r;return n.forEach(function(t){if(b(t)){var n=f(t,e,!1);n.language=t,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}}),i.language&&(r.second_best=i),r}function c(e){return w.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,w.tabReplace)})),w.useBR&&(e=e.replace(/\n/g,"<br>")),e}function h(e,t,n){var r=t?S[t]:n,i=[e.trim()];return e.match(/\bhljs\b/)||i.push("hljs"),-1===e.indexOf(r)&&i.push(r),i.join(" ").trim()}function p(e){var t=i(e);if(!/no(-?)highlight|plain|text/.test(t)){var n;w.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=e;var r=n.textContent,s=t?f(t,r,!0):l(r),a=o(n);if(a.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=s.value,s.value=u(a,o(p),r)}s.value=c(s.value),e.innerHTML=s.value,e.className=h(e.className,t,s.language),e.result={language:s.language,re:s.r},s.second_best&&(e.second_best={language:s.second_best.language,re:s.second_best.r})}}function d(e){w=s(w,e)}function v(){if(!v.called){v.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,p)}}function m(){addEventListener("DOMContentLoaded",v,!1),addEventListener("load",v,!1)}function g(t,n){var r=E[t]=n(e);r.aliases&&r.aliases.forEach(function(e){S[e]=t})}function y(){return Object.keys(E)}function b(e){return E[e]||E[S[e]]}var w={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},E={},S={};return e.highlight=f,e.highlightAuto=l,e.fixMarkup=c,e.highlightBlock=p,e.configure=d,e.initHighlighting=v,e.initHighlightingOnLoad=m,e.registerLanguage=g,e.listLanguages=y,e.getLanguage=b,e.inherit=s,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},e.C=function(t,n,r){var i=e.inherit({cN:"comment",b:t,e:n,c:[]},r||{});return i.c.push(e.PWM),i},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e}),hljs.registerLanguage("ini",function(e){return{cI:!0,i:/\S/,c:[e.C(";","$"),{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[e.QSM,e.NM],r:0}]}]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},n=[e.QSM,e.CNM],r={cN:"value",e:",",eW:!0,eE:!0,c:n,k:t},i={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[e.BE],i:"\\n",starts:r}],i:"\\S"},s={b:"\\[",e:"\\]",c:[e.inherit(r,{cN:null})],i:"\\S"};return n.splice(n.length,0,i,s),{c:n,k:t,i:"\\S"}}),hljs.registerLanguage("sql",function(e){var t=e.C("--","$");return{cI:!0,i:/[<>]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate savepoint release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke",e:/;/,eW:!0,k:{keyword:"abs absolute acos action add adddate addtime aes_decrypt aes_encrypt after aggregate all allocate alter analyze and any are as asc ascii asin assertion at atan atan2 atn2 authorization authors avg backup before begin benchmark between bin binlog bit_and bit_count bit_length bit_or bit_xor both by cache call cascade cascaded case cast catalog ceil ceiling chain change changed char_length character_length charindex charset check checksum checksum_agg choose close coalesce coercibility collate collation collationproperty column columns columns_updated commit compress concat concat_ws concurrent connect connection connection_id consistent constraint constraints continue contributors conv convert convert_tz corresponding cos cot count count_big crc32 create cross cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime data database databases datalength date_add date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts datetimeoffsetfromparts day dayname dayofmonth dayofweek dayofyear deallocate declare decode default deferrable deferred degrees delayed delete des_decrypt des_encrypt des_key_file desc describe descriptor diagnostics difference disconnect distinct distinctrow div do domain double drop dumpfile each else elt enclosed encode encrypt end end-exec engine engines eomonth errors escape escaped event eventdata events except exception exec execute exists exp explain export_set extended external extract fast fetch field fields find_in_set first first_value floor flush for force foreign format found found_rows from from_base64 from_days from_unixtime full function get get_format get_lock getdate getutcdate global go goto grant grants greatest group group_concat grouping grouping_id gtid_subset gtid_subtract handler having help hex high_priority hosts hour ident_current ident_incr ident_seed identified identity if ifnull ignore iif ilike immediate in index indicator inet6_aton inet6_ntoa inet_aton inet_ntoa infile initially inner innodb input insert install instr intersect into is is_free_lock is_ipv4 is_ipv4_compat is_ipv4_mapped is_not is_not_null is_used_lock isdate isnull isolation join key kill language last last_day last_insert_id last_value lcase lead leading least leaves left len lenght level like limit lines ln load load_file local localtime localtimestamp locate lock log log10 log2 logfile logs low_priority lower lpad ltrim make_set makedate maketime master master_pos_wait match matched max md5 medium merge microsecond mid min minute mod mode module month monthname mutex name_const names national natural nchar next no no_write_to_binlog not now nullif nvarchar oct octet_length of old_password on only open optimize option optionally or ord order outer outfile output pad parse partial partition password patindex percent_rank percentile_cont percentile_disc period_add period_diff pi plugin position pow power pragma precision prepare preserve primary prior privileges procedure procedure_analyze processlist profile profiles public publishingservername purge quarter query quick quote quotename radians rand read references regexp relative relaylog release release_lock rename repair repeat replace replicate reset restore restrict return returns reverse revoke right rlike rollback rollup round row row_count rows rpad rtrim savepoint schema scroll sec_to_time second section select serializable server session session_user set sha sha1 sha2 share show sign sin size slave sleep smalldatetimefromparts snapshot some soname soundex sounds_like space sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sql_variant_property sqlstate sqrt square start starting status std stddev stddev_pop stddev_samp stdev stdevp stop str str_to_date straight_join strcmp string stuff subdate substr substring subtime subtring_index sum switchoffset sysdate sysdatetime sysdatetimeoffset system_user sysutcdatetime table tables tablespace tan temporary terminated tertiary_weights then time time_format time_to_sec timediff timefromparts timestamp timestampadd timestampdiff timezone_hour timezone_minute to to_base64 to_days to_seconds todatetimeoffset trailing transaction translation trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse ucase uncompress uncompressed_length unhex unicode uninstall union unique unix_timestamp unknown unlock update upgrade upped upper usage use user user_resources using utc_date utc_time utc_timestamp uuid uuid_short validate_password_strength value values var var_pop var_samp variables variance varp version view warnings week weekday weekofyear weight_string when whenever where with work write xml xor year yearweek zon",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int integer interval number numeric real serial smallint varchar varying int8 serial8 text"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t]},e.CBCM,t]}}),hljs.registerLanguage("javascript",function(e){return{aliases:["js"],k:{keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},c:[{cN:"pi",r:10,v:[{b:/^\s*('|")use strict('|")/},{b:/^\s*('|")use asm('|")/}]},e.ASM,e.QSM,{cN:"string",b:"`",e:"`",c:[e.BE,{cN:"subst",b:"\\$\\{",e:"\\}"}]},e.CLCM,e.CBCM,{cN:"number",b:"\\b(0[xXbBoO][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",r:0},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/>\s*[);\]]/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[e.CLCM,e.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+e.IR,r:0},{bK:"import",e:"[;$]",k:"import from as",c:[e.ASM,e.QSM]},{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]}]}}),hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",n={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},r={b:"->{",e:"}"},i={cN:"variable",v:[{b:/\$\d/},{b:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{b:/[\$%@][^\s\w{]/,r:0}]},s=e.C("^(__END__|__DATA__)","\\n$",{r:5}),o=[e.BE,n,i],u=[i,e.HCM,s,e.C("^\\=\\w","\\=cut",{eW:!0}),r,{cN:"string",c:o,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,s,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"sub",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",r:5},{cN:"operator",b:"-\\w\\b",r:0}];return n.c=u,r.c=u,{aliases:["pl"],k:t,c:u}}),hljs.registerLanguage("nginx",function(e){var t={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},n={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[t]},{cN:"regexp",c:[e.BE,t],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},t]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"title",b:e.UIR,starts:n}],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("php",function(e){var t={cN:"variable",b:"\\$+[a-zA-Z_-][a-zA-Z0-9_-]*"},n={cN:"preprocessor",b:/<\?(php)?|\?>/},r={cN:"string",c:[e.BE,n],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},i={v:[e.BNM,e.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.CLCM,e.HCM,e.C("/\\*","\\*/",{c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"},n]}),e.C("__halt_compiler.+?;",!1,{eW:!0,k:"__halt_compiler",l:e.UIR}),{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[e.BE]},n,t,{b:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",t,e.CBCM,r,i]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},r,i]}}),hljs.registerLanguage("java",function(e){var t=e.UIR+"(<"+e.UIR+">)?",n="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",r="(\\b(0b[01_]+)|\\b0[xX][a-fA-F0-9_]+|(\\b[\\d_]+(\\.[\\d_]*)?|\\.[\\d_]+)([eE][-+]?\\d+)?)[lLfF]?",i={cN:"number",b:r,r:0};return{aliases:["jsp"],k:n,i:/<\//,c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",r:0,c:[{cN:"javadoctag",b:"(^|\\s)@[A-Za-z]+"}]},e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return",r:0},{cN:"function",b:"("+t+"\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:n,c:[{b:e.UIR+"\\s*\\(",rB:!0,r:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:n,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},i,{cN:"annotation",b:"@[A-Za-z]+"}]}}),hljs.registerLanguage("cpp",function(e){var t={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex _Complex _Imaginary intmax_t uintmax_t int8_t uint8_t int16_t uint16_t int32_t uint32_t  int64_t uint64_t int_least8_t uint_least8_t int_least16_t uint_least16_t int_least32_t uint_least32_t int_least64_t uint_least64_t int_fast8_t uint_fast8_t int_fast16_t uint_fast16_t int_fast32_t uint_fast32_t int_fast64_t uint_fast64_t intptr_t uintptr_t atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong atomic_wchar_t atomic_char16_t atomic_char32_t atomic_intmax_t atomic_uintmax_t atomic_intptr_t atomic_uintptr_t atomic_size_t atomic_ptrdiff_t atomic_int_least8_t atomic_int_least16_t atomic_int_least32_t atomic_int_least64_t atomic_uint_least8_t atomic_uint_least16_t atomic_uint_least32_t atomic_uint_least64_t atomic_int_fast8_t atomic_int_fast16_t atomic_int_fast32_t atomic_int_fast64_t atomic_uint_fast8_t atomic_uint_fast16_t atomic_uint_fast32_t atomic_uint_fast64_t",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf"};return{aliases:["c","cc","h","c++","h++","hpp"],k:t,i:"</",c:[e.CLCM,e.CBCM,e.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},e.CNM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line pragma",c:[{b:/\\\n/,r:0},{b:'include\\s*[<"]',e:'[>"]',k:"include",i:"\\n"},e.CLCM]},{b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:t,c:["self"]},{b:e.IR+"::",k:t},{bK:"new throw return else",r:0},{cN:"function",b:"("+e.IR+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("coffeescript",function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:t},i=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,r]},{b:/"/,e:/"/,c:[e.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,e.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];r.c=i;var s=e.inherit(e.TM,{b:n}),o="(\\(.*\\))?\\s*\\B[-=]>",u={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:t,c:["self"].concat(i)}]};return{aliases:["coffee","cson","iced"],k:t,i:/\/\*/,c:i.concat([e.C("###","###"),e.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+o,e:"[-=]>",rB:!0,c:[s,u]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:o,e:"[-=]>",rB:!0,c:[u]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[s]},s]},{cN:"attribute",b:n+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("http",function(e){return{aliases:["https"],i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}),hljs.registerLanguage("xml",function(e){var t="[A-Za-z0-9\\._:-]+",n={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php",subLanguageMode:"continuous"},r={eW:!0,i:/</,r:0,c:[n,{cN:"attribute",b:t,r:0},{b:"=",r:0,c:[{cN:"value",c:[n],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},e.C("<!--","-->",{r:10}),{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[r],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[r],starts:{e:"</script>",rE:!0,sL:""}},n,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},r]}]}}),hljs.registerLanguage("cs",function(e){var t="abstract as base bool break byte case catch char checked const continue decimal dynamic default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null when object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",n=e.IR+"(<"+e.IR+">)?";return{aliases:["csharp"],k:t,i:/::/,c:[e.C("///","$",{rB:!0,c:[{cN:"xmlDocTag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"</?",e:">"}]}]}),e.CLCM,e.CBCM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},e.ASM,e.QSM,e.CNM,{bK:"class namespace interface",e:/[{;=]/,i:/[^\s:]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"new return throw await",r:0},{cN:"function",b:"("+n+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("python",function(e){var t={cN:"prompt",b:/^(>>>|\.\.\.) /},n={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[t],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[t],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},e.ASM,e.QSM]},r={cN:"number",r:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},i={cN:"params",b:/\(/,e:/\)/,c:["self",t,r,n]};return{aliases:["py","gyp"],k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)/,c:[t,r,n,e.HCM,{v:[{cN:"function",bK:"def",r:10},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n,]/,c:[e.UTM,i]},{cN:"decorator",b:/@/,e:/$/},{b:/\b(print|exec)\(/}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},n={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]},r={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],r:0},e.HCM,e.NM,n,r,t]}}),hljs.registerLanguage("diff",function(e){return{aliases:["patch"],c:[{cN:"chunk",r:10,v:[{b:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("css",function(e){var t="[a-zA-Z-][a-zA-Z0-9_-]*",n={cN:"function",b:t+"\\(",rB:!0,eE:!0,e:"\\("},r={cN:"rule",b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{cN:"value",eW:!0,eE:!0,c:[n,e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]};return{cI:!0,i:/[=\/|']/,c:[e.CBCM,r,{cN:"id",b:/\#[A-Za-z0-9_-]+/},{cN:"class",b:/\.[A-Za-z0-9_-]+/,r:0},{cN:"attr_selector",b:/\[/,e:/\]/,i:"$"},{cN:"pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"']+/},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[n,e.ASM,e.QSM,e.CSSNM]}]},{cN:"tag",b:t,r:0},{cN:"rules",b:"{",e:"}",i:/\S/,r:0,c:[e.CBCM,r]}]}}),hljs.registerLanguage("apache",function(e){var t={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",t]},t,e.QSM]}}],i:/\S/}}),hljs.registerLanguage("markdown",function(e){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|	)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}}),hljs.registerLanguage("makefile",function(e){var t={cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]};return{aliases:["mk","mak"],c:[e.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[t]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[e.QSM,t]}]}}),hljs.registerLanguage("ruby",function(e){var t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",r={cN:"yardoctag",b:"@[A-Za-z]+"},i={cN:"value",b:"#<",e:">"},s=[e.C("#","$",{c:[r]}),e.C("^\\=begin","^\\=end",{c:[r],r:10}),e.C("^__END__","\\n$")],o={cN:"subst",b:"#\\{",e:"}",k:n},u={cN:"string",c:[e.BE,o],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},a={cN:"params",b:"\\(",e:"\\)",k:n},f=[u,i,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]}].concat(s)},{cN:"function",bK:"def",e:" |$|;",r:0,c:[e.inherit(e.TM,{b:t}),a].concat(s)},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[u,{b:t}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:[i,{cN:"regexp",c:[e.BE,o],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(s),r:0}].concat(s);o.c=f,a.c=f;var l="[>?]>",c="[\\w#]+\\(\\w+\\):\\d+:\\d+>",h="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",p=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:f}},{cN:"prompt",b:"^("+l+"|"+c+"|"+h+")",starts:{e:"$",c:f}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:n,c:s.concat(p).concat(f)}}),hljs.registerLanguage("objectivec",function(e){var t={cN:"built_in",b:"(AV|CA|CF|CG|CI|MK|MP|NS|UI)\\w+"},n={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},r=/[a-zA-Z@][a-zA-Z0-9_]*/,i="@interface @class @protocol @implementation";return{aliases:["m","mm","objc","obj-c"],k:n,l:r,i:"</",c:[t,e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"preprocessor",b:"#",e:"$",c:[{cN:"title",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+i.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:i,l:r,c:[e.UTM]},{cN:"variable",b:"\\."+e.UIR,r:0}]}}),define("ohc-url",["jquery"],function(e){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();if(t===undefined||t>n.length)t=n.length;t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}),Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"});var t=document.createElement("a");e.parseURL=function(n){t.href=n,t.href=t.href;var r=t.pathname.indexOf("/")!==0?"/"+t.pathname:t.pathname,i=t.href.split("#").splice(1).join("#"),s={protocol:t.protocol.replace(":",""),hostname:t.hostname,port:t.port,hash:i.length>0?i:undefined,path:r,target:t.hostname+r,search:t.search?t.search.substring(1):undefined,params:{}};if(s.search){var o=s.search.split("&");for(var u=0;u<o.length;u++){var a=o[u].split("=");if(s.params.hasOwnProperty(a[0]))if(e.isArray(s.params[a[0]]))s.params[a[0]].push(a[1]);else{var f=[];f.push(s.params[a[0]]),f.push(a[1]),s.params[a[0]]=f}else s.params[a[0]]=a.length>1?a[1]:undefined}}return s};var n={},r={};n.configure=function(t,n){r={};for(var i=0;i<t.length;i++){var s=e.parseURL(t[i].href).target;r[s]=!0}if(!!n)for(var i=0;i<n.length;i++){var s=e.parseURL(n[i]).target;r[s]=!0}},n.isUrlInternal=function(t){var n=e.parseURL(t).target;return r.hasOwnProperty(n)},n.isOracle=function(){var t=e.parseURL(window.location.href);return t.hostname.endsWith("oracle.com")},n.isUrlSameOrigin=function(t){var n=e.parseURL(window.location.href),r=e.parseURL(t);return n.hostname==r.hostname&&n.port==r.port&&n.protocol==r.protocol},n.isUrlNewTarget=function(t){if(n.isUrlInternal(t))return!1;var r=e.parseURL(t);return r.target==="www.oracle.com/pls/topic/lookup"?!1:window.location.hostname!==r.hostname?!0:r.path.toLowerCase().endsWith(".pdf")?!0:!1},n.fileShortName=function(t){var n=e.parseURL(t);if(n.path.lastIndexOf("/")===n.path.length-1)return"index";var r=n.path.substring(n.path.lastIndexOf("/")+1);return r.indexOf(".")===-1?r:r.substring(0,r.lastIndexOf("."))},n.currentFileShortName=function(){return n.fileShortName(window.location.href)};var i=document.createElement("a");i.href="#";var s=document.createElement("a");return n.isUrlCurrent=function(t){s.href=t;if(i.href===s.href)return!1;var n=e.parseURL(window.location.href);n.path&&(n.path=decodeURI(n.path));var r=e.parseURL(t);r.path&&(r.path=decodeURI(r.path));if(n.hostname!==r.hostname)return!1;if(n.path===r.path)return!0;if(n.path.lastIndexOf("/")===n.path.length-1){if(n.path+"index.html"===r.path)return!0;if(n.path+"index.htm"===r.path)return!0}if(r.path.lastIndexOf("/")===r.path.length-1){if(r.path+"index.html"===n.path)return!0;if(r.path+"index.htm"===n.path)return!0}return!1},e.expr[":"].urlInternal=function(e,t,r,i){return e.href?n.isUrlInternal(e.href):!1},e.expr[":"].urlNewTarget=function(t,r,i,s){var o=e(t);return o.hasClass("newwindow")?!0:o.hasClass("notnew")?!1:t.href?n.isUrlNewTarget(t.href):!1},e.expr[":"].urlSameOrigin=function(e,t,r,i){return e.href?n.isUrlSameOrigin(e.href):!1},e.expr[":"].urlCurrent=function(e,t,r,i){return e.href?n.isUrlCurrent(e.href):!1},n}),function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define("handlebars",n):typeof exports=="object"?exports.Handlebars=n():t.Handlebars=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";function g(){var e=m();return e.compile=function(t,n){return f.compile(t,n,e)},e.precompile=function(t,n){return f.precompile(t,n,e)},e.AST=u["default"],e.Compiler=f.Compiler,e.JavaScriptCompiler=c["default"],e.Parser=a.parser,e.parse=a.parse,e}var r=n(8)["default"];t.__esModule=!0;var i=n(1),s=r(i),o=n(2),u=r(o),a=n(3),f=n(4),l=n(5),c=r(l),h=n(6),p=r(h),d=n(7),v=r(d),m=s["default"].create,y=g();y.create=g,v["default"](y),y.Visitor=p["default"],y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function g(){var e=new o.HandlebarsEnvironment;return h.extend(e,o),e.SafeString=a["default"],e.Exception=l["default"],e.Utils=h,e.escapeExpression=h.escapeExpression,e.VM=d,e.template=function(t){return d.template(t,e)},e}var r=n(9)["default"],i=n(8)["default"];t.__esModule=!0;var s=n(10),o=r(s),u=n(11),a=i(u),f=n(12),l=i(f),c=n(13),h=r(c),p=n(14),d=r(p),v=n(7),m=i(v),y=g();y.create=g,m["default"](y),y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r={Program:function(t,n,r,i){this.loc=i,this.type="Program",this.body=t,this.blockParams=n,this.strip=r},MustacheStatement:function(t,n,r,i,s,o){this.loc=o,this.type="MustacheStatement",this.path=t,this.params=n||[],this.hash=r,this.escaped=i,this.strip=s},BlockStatement:function(t,n,r,i,s,o,u,a,f){this.loc=f,this.type="BlockStatement",this.path=t,this.params=n||[],this.hash=r,this.program=i,this.inverse=s,this.openStrip=o,this.inverseStrip=u,this.closeStrip=a},PartialStatement:function(t,n,r,i,s){this.loc=s,this.type="PartialStatement",this.name=t,this.params=n||[],this.hash=r,this.indent="",this.strip=i},ContentStatement:function(t,n){this.loc=n,this.type="ContentStatement",this.original=this.value=t},CommentStatement:function(t,n,r){this.loc=r,this.type="CommentStatement",this.value=t,this.strip=n},SubExpression:function(t,n,r,i){this.loc=i,this.type="SubExpression",this.path=t,this.params=n||[],this.hash=r},PathExpression:function(t,n,r,i,s){this.loc=s,this.type="PathExpression",this.data=t,this.original=i,this.parts=r,this.depth=n},StringLiteral:function(t,n){this.loc=n,this.type="StringLiteral",this.original=this.value=t},NumberLiteral:function(t,n){this.loc=n,this.type="NumberLiteral",this.original=this.value=Number(t)},BooleanLiteral:function(t,n){this.loc=n,this.type="BooleanLiteral",this.original=this.value=t==="true"},UndefinedLiteral:function(t){this.loc=t,this.type="UndefinedLiteral",this.original=this.value=undefined},NullLiteral:function(t){this.loc=t,this.type="NullLiteral",this.original=this.value=null},Hash:function(t,n){this.loc=n,this.type="Hash",this.pairs=t},HashPair:function(t,n,r){this.loc=r,this.type="HashPair",this.key=t,this.value=n},helpers:{helperExpression:function(t){return t.type==="SubExpression"||!!t.params.length||!!t.hash},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return t.parts.length===1&&!r.helpers.scopedId(t)&&!t.depth}}};t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function v(e,t){if(e.type==="Program")return e;o["default"].yy=d,d.locInfo=function(e){return new d.SourceLocation(t&&t.srcName,e)};var n=new l["default"];return n.accept(o["default"].parse(e))}var r=n(8)["default"],i=n(9)["default"];t.__esModule=!0,t.parse=v;var s=n(15),o=r(s),u=n(2),a=r(u),f=n(16),l=r(f),c=n(17),h=i(c),p=n(13);t.parser=o["default"];var d={};p.extend(d,h,a["default"])},function(e,t,n){"use strict";function l(){}function c(e,t,n){if(e==null||typeof e!="string"&&e.type!=="Program")throw new s["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var r=n.parse(e,t),i=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(i,t)}function h(e,t,n){function o(){var t=n.parse(e,r),i=(new n.Compiler).compile(t,r),s=(new n.JavaScriptCompiler).compile(i,r,undefined,!0);return n.template(s)}function u(e,t){return i||(i=o()),i.call(this,e,t)}var r=arguments[1]===undefined?{}:arguments[1];if(e==null||typeof e!="string"&&e.type!=="Program")throw new s["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in r||(r.data=!0),r.compat&&(r.useDepths=!0);var i=undefined;return u._setup=function(e){return i||(i=o()),i._setup(e)},u._child=function(e,t,n,r){return i||(i=o()),i._child(e,t,n,r)},u}function p(e,t){if(e===t)return!0;if(o.isArray(e)&&o.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!p(e[n],t[n]))return!1;return!0}}function d(e){if(!e.path.parts){var t=e.path;e.path=new a["default"].PathExpression(!1,0,[t.original+""],t.original+"",t.loc)}}var r=n(8)["default"];t.__esModule=!0,t.Compiler=l,t.precompile=c,t.compile=h;var i=n(12),s=r(i),o=n(13),u=n(2),a=r(u),f=[].slice;l.prototype={compiler:l,equals:function(t){var n=this.opcodes.length;if(t.opcodes.length!==n)return!1;for(var r=0;r<n;r++){var i=this.opcodes[r],s=t.opcodes[r];if(i.opcode!==s.opcode||!p(i.args,s.args))return!1}n=this.children.length;for(var r=0;r<n;r++)if(!this.children[r].equals(t.children[r]))return!1;return!0},guid:0,compile:function(t,n){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=n,this.stringParams=n.stringParams,this.trackIds=n.trackIds,n.blockParams=n.blockParams||[];var r=n.knownHelpers;n.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0};if(r)for(var i in r)i in r&&(n.knownHelpers[i]=r[i]);return this.accept(t)},compileProgram:function(t){var n=new this.compiler,r=n.compile(t,this.options),i=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[i]=r,this.useDepths=this.useDepths||r.useDepths,i},accept:function(t){this.sourceNode.unshift(t);var n=this[t.type](t);return this.sourceNode.shift(),n},Program:function(t){this.options.blockParams.unshift(t.blockParams);var n=t.body,r=n.length;for(var i=0;i<r;i++)this.accept(n[i]);return this.options.blockParams.shift(),this.isSimple=r===1,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){d(t);var n=t.program,r=t.inverse;n=n&&this.compileProgram(n),r=r&&this.compileProgram(r);var i=this.classifySexpr(t);i==="helper"?this.helperSexpr(t,n,r):i==="simple"?(this.simpleSexpr(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(t){this.usePartial=!0;var n=t.params;if(n.length>1)throw new s["default"]("Unsupported number of partial arguments: "+n.length,t);n.length||n.push({type:"PathExpression",parts:[],depth:0});var r=t.name.original,i=t.name.type==="SubExpression";i&&this.accept(t.name),this.setupFullMustacheParams(t,undefined,undefined,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,r,o),this.opcode("append")},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){d(t);var n=this.classifySexpr(t);n==="simple"?this.simpleSexpr(t):n==="helper"?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,n,r){var i=t.path,s=i.parts[0],o=n!=null||r!=null;this.opcode("getContext",i.depth),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.accept(i),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(t){this.accept(t.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,n,r){var i=this.setupFullMustacheParams(t,n,r),o=t.path,u=o.parts[0];if(this.options.knownHelpers[u])this.opcode("invokeKnownHelper",i.length,u);else{if(this.options.knownHelpersOnly)throw new s["default"]("You specified knownHelpersOnly, but used the unknown helper "+u,t);o.falsy=!0,this.accept(o),this.opcode("invokeHelper",i.length,o.original,a["default"].helpers.simpleId(o))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var n=t.parts[0],r=a["default"].helpers.scopedId(t),i=!t.depth&&!r&&this.blockParamIndex(n);i?this.opcode("lookupBlockParam",i,t.parts):n?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts)):this.opcode("lookupOnContext",t.parts,t.falsy,r):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var n=t.pairs,r=0,i=n.length;this.opcode("pushHash");for(;r<i;r++)this.pushParam(n[r].value);while(r--)this.opcode("assignToHash",n[r].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){if(!t)return;this.useDepths=!0},classifySexpr:function(t){var n=a["default"].helpers.simpleId(t.path),r=n&&!!this.blockParamIndex(t.path.parts[0]),i=!r&&a["default"].helpers.helperExpression(t),s=!r&&(i||n);if(s&&!i){var o=t.path.parts[0],u=this.options;u.knownHelpers[o]?i=!0:u.knownHelpersOnly&&(s=!1)}return i?"helper":s?"ambiguous":"simple"},pushParams:function(t){for(var n=0,r=t.length;n<r;n++)this.pushParam(t[n])},pushParam:function(t){var n=t.value!=null?t.value:t.original||"";if(this.stringParams)n.replace&&(n=n.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",n,t.type),t.type==="SubExpression"&&this.accept(t);else{if(this.trackIds){var r=undefined;t.parts&&!a["default"].helpers.scopedId(t)&&!t.depth&&(r=this.blockParamIndex(t.parts[0]));if(r){var i=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,i)}else n=t.original||n,n.replace&&(n=n.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",t.type,n)}this.accept(t)}},setupFullMustacheParams:function(t,n,r,i){var s=t.params;return this.pushParams(s),this.opcode("pushProgram",n),this.opcode("pushProgram",r),t.hash?this.accept(t.hash):this.opcode("emptyHash",i),s},blockParamIndex:function(t){for(var n=0,r=this.options.blockParams.length;n<r;n++){var i=this.options.blockParams[n],s=i&&o.indexOf(i,t);if(i&&s>=0)return[n,s]}}}},function(e,t,n){"use strict";function l(e){this.value=e}function c(){}function h(e,t,n,r){var i=t.popStack(),s=0,o=n.length;e&&o--;for(;s<o;s++)i=t.nameLookup(i,n[s],r);return e?[t.aliasable("this.strict"),"(",i,", ",t.quotedString(n[s]),")"]:i}var r=n(8)["default"];t.__esModule=!0;var i=n(10),s=n(12),o=r(s),u=n(13),a=n(18),f=r(a);c.prototype={nameLookup:function(t,n){return c.isValidJavaScriptVariableName(n)?[t,".",n]:[t,"['",n,"']"]},depthedLookup:function(t){return[this.aliasable("this.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=i.COMPILER_REVISION,n=i.REVISION_CHANGES[t];return[t,n]},appendToBuffer:function(t,n,r){return u.isArray(t)||(t=[t]),t=this.source.wrap(t,n),this.environment.isSimple?["return ",t,";"]:r?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,n,r,i){this.environment=t,this.options=n,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!r,this.context=r||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,n),this.useDepths=this.useDepths||t.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var s=t.opcodes,u=undefined,a=undefined,f=undefined,l=undefined;for(f=0,l=s.length;f<l;f++)u=s[f],this.source.currentLocation=u.loc,a=a||u.loc,this[u.opcode].apply(this,u.args);this.source.currentLocation=a,this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o["default"]("Compile completed with content left on stack");var c=this.createFunctionContext(i);if(!this.isChild){var h={compiler:this.compilerInfo(),main:c},p=this.context.programs;for(f=0,l=p.length;f<l;f++)p[f]&&(h[f]=p[f]);return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),i?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),n.srcName?(h=h.toStringWithSourceMap({file:n.destName}),h.map=h.map&&h.map.toString()):h=h.toString()),h}return c},preamble:function(){this.lastContext=0,this.source=new f["default"](this.options.srcName)},createFunctionContext:function(t){var n="",r=this.stackVars.concat(this.registers.list);r.length>0&&(n+=", "+r.join(", "));var i=0;for(var s in this.aliases){var o=this.aliases[s];this.aliases.hasOwnProperty(s)&&o.children&&o.referenceCount>1&&(n+=", alias"+ ++i+"="+s,o.children[0]="alias"+i)}var u=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&u.push("blockParams"),this.useDepths&&u.push("depths");var a=this.mergeSource(n);return t?(u.push(a),Function.apply(this,u)):this.source.wrap(["function(",u.join(","),") {\n  ",a,"}"])},mergeSource:function(t){var n=this.environment.isSimple,r=!this.forceBuffer,i=undefined,s=undefined,o=undefined,u=undefined;return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,u=e):(o&&(s?o.prepend("buffer += "):i=!0,u.add(";"),o=u=undefined),s=!0,n||(r=!1))}),r?o?(o.prepend("return "),u.add(";")):s||this.source.push('return "";'):(t+=", buffer = "+(i?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),u.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(i?"":";\n")),this.source.merge()},blockValue:function(t){var n=this.aliasable("helpers.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(t,0,r);var i=this.popStack();r.splice(1,0,i),this.push(this.source.functionCall(n,"call",r))},ambiguousBlockValue:function(){var t=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs("",0,n,!0),this.flushInline();var r=this.topStack();n.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(t,"call",n),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,undefined,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",undefined,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,n,r){var i=0;!r&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(t[i++])):this.pushContext(),this.resolvePath("context",t,i,n)},lookupBlockParam:function(t,n){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",n,1)},lookupData:function(t,n){t?this.pushStackLiteral("this.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",n,0,!0)},resolvePath:function(t,n,r,i){var s=this;if(this.options.strict||this.options.assumeObjects){this.push(h(this.options.strict,this,n,t));return}var o=n.length;for(;r<o;r++)this.replaceStack(function(e){var o=s.nameLookup(e,n[r],t);return i?[" && ",o]:[" != null ? ",o," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,n){this.pushContext(),this.pushString(n),n!=="SubExpression"&&(typeof t=="string"?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){t!=null?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,n,r){var i=this.popStack(),s=this.setupHelper(t,n),o=r?[s.name," || "]:"",u=["("].concat(o,i);this.options.strict||u.push(" || ",this.aliasable("helpers.helperMissing")),u.push(")"),this.push(this.source.functionCall(u,"call",s.callParams))},invokeKnownHelper:function(t,n){var r=this.setupHelper(t,n);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(t,n){this.useRegister("helper");var r=this.popStack();this.emptyHash();var i=this.setupHelper(0,t,n),s=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=["(","(helper = ",s," || ",r,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",o,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(t,n,r){var i=[],s=this.setupParams(n,1,i,!1);t&&(n=this.popStack(),delete s.name),r&&(s.indent=JSON.stringify(r)),s.helpers="helpers",s.partials="partials",t?i.unshift(n):i.unshift(this.nameLookup("partials",n,"partial")),this.options.compat&&(s.depths="depths"),s=this.objectLiteral(s),i.push(s),this.push(this.source.functionCall("this.invokePartial","",i))},assignToHash:function(t){var n=this.popStack(),r=undefined,i=undefined,s=undefined;this.trackIds&&(s=this.popStack()),this.stringParams&&(i=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[t]=r),i&&(o.types[t]=i),s&&(o.ids[t]=s),o.values[t]=n},pushId:function(t,n,r){t==="BlockParam"?this.pushStackLiteral("blockParams["+n[0]+"].path["+n[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):t==="PathExpression"?this.pushString(n):t==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:c,compileChildren:function(t,n){var r=t.children,i=undefined,s=undefined;for(var o=0,u=r.length;o<u;o++){i=r[o],s=new this.compiler;var a=this.matchExistingProgram(i);a==null?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=s.compile(i,n,this.context,!this.precompile),this.context.environments[a]=i,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams):(i.index=a,i.name="program"+a,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams)}},matchExistingProgram:function(t){for(var n=0,r=this.context.environments.length;n<r;n++){var i=this.context.environments[n];if(i&&i.equals(t))return n}},programExpression:function(t){var n=this.environment.children[t],r=[n.index,"data",n.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"this.program("+r.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof l||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new l(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=undefined),t&&this.source.push(t)},replaceStack:function(t){var n=["("],r=undefined,i=undefined,s=undefined;if(!this.isInline())throw new o["default"]("replaceStack on non-inline");var u=this.popStack(!0);if(u instanceof l)r=[u.value],n=["(",r],s=!0;else{i=!0;var a=this.incrStack();n=["((",this.push(a)," = ",u,")"],r=this.topStack()}var f=t.call(this,r);s||this.popStack(),i&&this.stackSlot--,this.push(n.concat(f,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i instanceof l)this.compileStack.push(i);else{var s=this.incrStack();this.pushSource([s," = ",i,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var n=this.isInline(),r=(n?this.inlineStack:this.compileStack).pop();if(!t&&r instanceof l)return r.value;if(!n){if(!this.stackSlot)throw new o["default"]("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return n instanceof l?n.value:n},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var n=this.aliases[t];return n?(n.referenceCount++,n):(n=this.aliases[t]=this.source.wrap(t),n.aliasable=!0,n.referenceCount=1,n)},setupHelper:function(t,n,r){var i=[],s=this.setupHelperArgs(n,t,i,r),o=this.nameLookup("helpers",n,"helper");return{params:i,paramsInit:s,name:o,callParams:[this.contextName(0)].concat(i)}},setupParams:function(t,n,r){var i={},s=[],o=[],u=[],a=undefined;i.name=this.quotedString(t),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var f=this.popStack(),l=this.popStack();if(l||f)i.fn=l||"this.noop",i.inverse=f||"this.noop";var c=n;while(c--)a=this.popStack(),r[c]=a,this.trackIds&&(u[c]=this.popStack()),this.stringParams&&(o[c]=this.popStack(),s[c]=this.popStack());return this.trackIds&&(i.ids=this.source.generateArray(u)),this.stringParams&&(i.types=this.source.generateArray(o),i.contexts=this.source.generateArray(s)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(t,n,r,i){var s=this.setupParams(t,n,r,!0);return s=this.objectLiteral(s),i?(this.useRegister("options"),r.push("options"),["options=",s]):(r.push(s),"")}},function(){var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=c.RESERVED_WORDS={};for(var n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),c.isValidJavaScriptVariableName=function(e){return!c.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function a(){this.parents=[]}var r=n(8)["default"];t.__esModule=!0;var i=n(12),s=r(i),o=n(2),u=r(o);a.prototype={constructor:a,mutating:!1,acceptKey:function(t,n){var r=this.accept(t[n]);if(this.mutating){if(r&&(!r.type||!u["default"][r.type]))throw new s["default"]('Unexpected node type "'+r.type+'" found when accepting '+n+" on "+t.type);t[n]=r}},acceptRequired:function(t,n){this.acceptKey(t,n);if(!t[n])throw new s["default"](t.type+" requires "+n)},acceptArray:function(t){for(var n=0,r=t.length;n<r;n++)this.acceptKey(t,n),t[n]||(t.splice(n,1),n--,r--)},accept:function(t){if(!t)return;this.current&&this.parents.unshift(this.current),this.current=t;var n=this[t.type](t);this.current=this.parents.shift();if(!this.mutating||n)return n;if(n!==!1)return t},Program:function(t){this.acceptArray(t.body)},MustacheStatement:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")},BlockStatement:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash"),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")},PartialStatement:function(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},t["default"]=a,e.exports=t["default"]},function(e,t,n){(function(n){"use strict";t.__esModule=!0,t["default"]=function(e){var t=typeof n!="undefined"?n:window,r=t.Handlebars;e.noConflict=function(){t.Handlebars===e&&(t.Handlebars=r)}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t,n){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,n){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(typeof e=="object"&&e!==null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},t.__esModule=!0},function(e,t,n){"use strict";function m(e,t){this.helpers=e||{},this.partials=t||{},g(this)}function g(e){e.registerHelper("helperMissing",function(){if(arguments.length===1)return undefined;throw new a["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,i=n.fn;if(t===!0)return i(this);if(t===!1||t==null)return r(this);if(h(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var s=w(n.data);s.contextPath=o.appendContextPath(n.data.contextPath,n.name),n={data:s}}return i(t,n)}),e.registerHelper("each",function(e,t){function l(t,r,i){u&&(u.key=t,u.index=r,u.first=r===0,u.last=!!i,f&&(u.contextPath=f+t)),s+=n(e[t],{data:u,blockParams:o.blockParams([e[t],t],[f+t,null])})}if(!t)throw new a["default"]("Must pass iterator to #each");var n=t.fn,r=t.inverse,i=0,s="",u=undefined,f=undefined;t.data&&t.ids&&(f=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),p(e)&&(e=e.call(this)),t.data&&(u=w(t.data));if(e&&typeof e=="object")if(h(e))for(var c=e.length;i<c;i++)l(i,i,i===e.length-1);else{var d=undefined;for(var v in e)e.hasOwnProperty(v)&&(d&&l(d,i-1),d=v,i++);d&&l(d,i-1,!0)}return i===0&&(s=r(this)),s}),e.registerHelper("if",function(e,t){return p(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){p(e)&&(e=e.call(this));var n=t.fn;if(!o.isEmpty(e)){if(t.data&&t.ids){var r=w(t.data);r.contextPath=o.appendContextPath(t.data.contextPath,t.ids[0]),t={data:r}}return n(e,t)}return t.inverse(this)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}function w(e){var t=o.extend({},e);return t._parent=e,t}var r=n(9)["default"],i=n(8)["default"];t.__esModule=!0,t.HandlebarsEnvironment=m,t.createFrame=w;var s=n(13),o=r(s),u=n(12),a=i(u),f="3.0.1";t.VERSION=f;var l=6;t.COMPILER_REVISION=l;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};t.REVISION_CHANGES=c;var h=o.isArray,p=o.isFunction,d=o.toString,v="[object Object]";m.prototype={constructor:m,logger:y,log:b,registerHelper:function(t,n){if(d.call(t)===v){if(n)throw new a["default"]("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=n},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,n){if(d.call(t)===v)o.extend(this.partials,t);else{if(typeof n=="undefined")throw new a["default"]("Attempting to register a partial as undefined");this.partials[t]=n}},unregisterPartial:function(t){delete this.partials[t]}};var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(t,n){if(typeof console!="undefined"&&y.level<=t){var r=y.methodMap[t];(console[r]||console.log).call(console,n)}}};t.logger=y;var b=y.log;t.log=b},function(e,t,n){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function i(e,t){var n=t&&t.loc,s=undefined,o=undefined;n&&(s=n.start.line,o=n.start.column,e+=" - "+s+":"+o);var u=Error.prototype.constructor.call(this,e);for(var a=0;a<r.length;a++)this[r[a]]=u[r[a]];Error.captureStackTrace&&Error.captureStackTrace(this,i),n&&(this.lineNumber=s,this.column=o)}t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,t["default"]=i,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return r[e]}function u(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function c(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function h(e){if(typeof e!="string"){if(e&&e.toHTML)return e.toHTML();if(e==null)return"";if(!e)return e+"";e=""+e}return s.test(e)?e.replace(i,o):e}function p(e){return!e&&e!==0?!0:l(e)&&e.length===0?!0:!1}function d(e,t){return e.path=t,e}function v(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=u,t.indexOf=c,t.escapeExpression=h,t.isEmpty=p,t.blockParams=d,t.appendContextPath=v;var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,s=/[&<>"'`]/,a=Object.prototype.toString;t.toString=a;var f=function(t){return typeof t=="function"};f(/x/)&&(t.isFunction=f=function(e){return typeof e=="function"&&a.call(e)==="[object Function]"});var f;t.isFunction=f;var l=Array.isArray||function(e){return e&&typeof e=="object"?a.call(e)==="[object Array]":!1};t.isArray=l},function(e,t,n){"use strict";function l(e){var t=e&&e[0]||1,n=f.COMPILER_REVISION;if(t!==n){if(t<n){var r=f.REVISION_CHANGES[n],i=f.REVISION_CHANGES[t];throw new a["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new a["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function c(e,t){function n(n,r,i){i.hash&&(r=o.extend({},r,i.hash)),n=t.VM.resolvePartial.call(this,n,r,i);var s=t.VM.invokePartial.call(this,n,r,i);s==null&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),s=i.partials[i.name](r,i));if(s!=null){if(i.indent){var u=s.split("\n");for(var f=0,l=u.length;f<l;f++){if(!u[f]&&f+1===l)break;u[f]=i.indent+u[f]}s=u.join("\n")}return s}throw new a["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function i(t){var n=arguments[1]===undefined?{}:arguments[1],s=n.data;i._setup(n),!n.partial&&e.useData&&(s=m(t,s));var o=undefined,u=e.useBlockParams?[]:undefined;return e.useDepths&&(o=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,s,u,o)}if(!t)throw new a["default"]("No environment passed to template");if(!e||!e.main)throw new a["default"]("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var r={strict:function(t,n){if(n in t)return t[n];throw new a["default"]('"'+n+'" not defined in '+t)},lookup:function(t,n){var r=t.length;for(var i=0;i<r;i++)if(t[i]&&t[i][n]!=null)return t[i][n]},lambda:function(t,n){return typeof t=="function"?t.call(n):t},escapeExpression:o.escapeExpression,invokePartial:n,fn:function(n){return e[n]},programs:[],program:function(t,n,r,i,s){var o=this.programs[t],u=this.fn(t);return n||s||i||r?o=h(this,t,u,n,r,i,s):o||(o=this.programs[t]=h(this,t,u)),o},data:function(t,n){while(t&&n--)t=t._parent;return t},merge:function(t,n){var r=t||n;return t&&n&&t!==n&&(r=o.extend({},n,t)),r},noop:t.VM.noop,compilerInfo:e.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},i._child=function(t,n,i,s){if(e.useBlockParams&&!i)throw new a["default"]("must pass block params");if(e.useDepths&&!s)throw new a["default"]("must pass parent depths");return h(r,t,e[t],n,0,i,s)},i}function h(e,t,n,r,i,s,o){function u(t){var i=arguments[1]===undefined?{}:arguments[1];return n.call(e,t,e.helpers,e.partials,i.data||r,s&&[i.blockParams].concat(s),o&&[t].concat(o))}return u.program=t,u.depth=o?o.length:0,u.blockParams=i||0,u}function p(e,t,n){return e?!e.call&&!n.name&&(n.name=e,e=n.partials[e]):e=n.partials[n.name],e}function d(e,t,n){n.partial=!0;if(e===undefined)throw new a["default"]("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function v(){return""}function m(e,t){if(!t||!("root"in t))t=t?f.createFrame(t):{},t.root=e;return t}var r=n(9)["default"],i=n(8)["default"];t.__esModule=!0,t.checkRevision=l,t.template=c,t.wrapProgram=h,t.resolvePartial=p,t.invokePartial=d,t.noop=v;var s=n(13),o=r(s),u=n(12),a=i(u),f=n(10)},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.Program(o[a],null,{},i.locInfo(this._$));break;case 3:this.$=o[a];break;case 4:this.$=o[a];break;case 5:this.$=o[a];break;case 6:this.$=o[a];break;case 7:this.$=o[a];break;case 8:this.$=new i.CommentStatement(i.stripComment(o[a]),i.stripFlags(o[a],o[a]),i.locInfo(this._$));break;case 9:this.$=new i.ContentStatement(o[a],i.locInfo(this._$));break;case 10:this.$=i.prepareRawBlock(o[a-2],o[a-1],o[a],this._$);break;case 11:this.$={path:o[a-3],params:o[a-2],hash:o[a-1]};break;case 12:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!1,this._$);break;case 13:this.$=i.prepareBlock(o[a-3],o[a-2],o[a-1],o[a],!0,this._$);break;case 14:this.$={path:o[a-4],params:o[a-3],hash:o[a-2],blockParams:o[a-1],strip:i.stripFlags(o[a-5],o[a])};break;case 15:this.$={path:o[a-4],params:o[a-3],hash:o[a-2],blockParams:o[a-1],strip:i.stripFlags(o[a-5],o[a])};break;case 16:this.$={path:o[a-4],params:o[a-3],hash:o[a-2],blockParams:o[a-1],strip:i.stripFlags(o[a-5],o[a])};break;case 17:this.$={strip:i.stripFlags(o[a-1],o[a-1]),program:o[a]};break;case 18:var f=i.prepareBlock(o[a-2],o[a-1],o[a],o[a],!1,this._$),l=new i.Program([f],null,{},i.locInfo(this._$));l.chained=!0,this.$={strip:o[a-2].strip,program:l,chain:!0};break;case 19:this.$=o[a];break;case 20:this.$={path:o[a-1],strip:i.stripFlags(o[a-2],o[a])};break;case 21:this.$=i.prepareMustache(o[a-3],o[a-2],o[a-1],o[a-4],i.stripFlags(o[a-4],o[a]),this._$);break;case 22:this.$=i.prepareMustache(o[a-3],o[a-2],o[a-1],o[a-4],i.stripFlags(o[a-4],o[a]),this._$);break;case 23:this.$=new i.PartialStatement(o[a-3],o[a-2],o[a-1],i.stripFlags(o[a-4],o[a]),i.locInfo(this._$));break;case 24:this.$=o[a];break;case 25:this.$=o[a];break;case 26:this.$=new i.SubExpression(o[a-3],o[a-2],o[a-1],i.locInfo(this._$));break;case 27:this.$=new i.Hash(o[a],i.locInfo(this._$));break;case 28:this.$=new i.HashPair(i.id(o[a-2]),o[a],i.locInfo(this._$));break;case 29:this.$=i.id(o[a-1]);break;case 30:this.$=o[a];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringLiteral(o[a],i.locInfo(this._$));break;case 33:this.$=new i.NumberLiteral(o[a],i.locInfo(this._$));break;case 34:this.$=new i.BooleanLiteral(o[a],i.locInfo(this._$));break;case 35:this.$=new i.UndefinedLiteral(i.locInfo(this._$));break;case 36:this.$=new i.NullLiteral(i.locInfo(this._$));break;case 37:this.$=o[a];break;case 38:this.$=o[a];break;case 39:this.$=i.preparePath(!0,o[a],this._$);break;case 40:this.$=i.preparePath(!1,o[a],this._$);break;case 41:o[a-2].push({part:i.id(o[a]),original:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 42:this.$=[{part:i.id(o[a]),original:o[a]}];break;case 43:this.$=[];break;case 44:o[a-1].push(o[a]);break;case 45:this.$=[];break;case 46:o[a-1].push(o[a]);break;case 53:this.$=[];break;case 54:o[a-1].push(o[a]);break;case 59:this.$=[];break;case 60:o[a-1].push(o[a]);break;case 65:this.$=[];break;case 66:o[a-1].push(o[a]);break;case 73:this.$=[];break;case 74:o[a-1].push(o[a]);break;case 77:this.$=[];break;case 78:o[a-1].push(o[a]);break;case 81:this.$=[];break;case 82:o[a-1].push(o[a]);break;case 85:this.$=[];break;case 86:o[a-1].push(o[a]);break;case 89:this.$=[o[a]];break;case 90:o[a-1].push(o[a]);break;case 91:this.$=[o[a]];break;case 92:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'");this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var n=t.match(/(?:\r\n?|\n).*/g);return n?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var n=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-n-1),this.offset-=n;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-n},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-n]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),n=(new Array(t.length+1)).join("-");return t+this.upcomingInput()+"\n"+n+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,n,r,i,s,o;this._more||(this.yytext="",this.match="");var u=this._currentRules();for(var a=0;a<u.length;a++){r=this._input.match(this.rules[u[a]]);if(r&&(!n||r[0].length>n[0].length)){n=r,i=a;if(!this.options.flex)break}}if(n){o=n[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],t=this.performAction.call(this,this.yy,this,u[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(t)return t;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){function s(e,t){return n.yytext=n.yytext.substr(e,n.yyleng-t)}var o=i;switch(r){case 0:n.yytext.slice(-2)==="\\\\"?(s(0,1),this.begin("mu")):n.yytext.slice(-1)==="\\"?(s(0,1),this.begin("emu")):this.begin("mu");if(n.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return n.yytext=n.yytext.substr(5,n.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(n.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return n.yytext=s(1,2).replace(/\\"/g,'"'),74;case 30:return n.yytext=s(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t["default"]=r,e.exports=t["default"]},function(e,t,n){"use strict";function o(){}function u(e,t,n){t===undefined&&(t=e.length);var r=e[t-1],i=e[t-2];if(!r)return n;if(r.type==="ContentStatement")return(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original)}function a(e,t,n){t===undefined&&(t=-1);var r=e[t+1],i=e[t+2];if(!r)return n;if(r.type==="ContentStatement")return(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original)}function f(e,t,n){var r=e[t==null?0:t+1];if(!r||r.type!=="ContentStatement"||!n&&r.rightStripped)return;var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}function l(e,t,n){var r=e[t==null?e.length-1:t-1];if(!r||r.type!=="ContentStatement"||!n&&r.leftStripped)return;var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}var r=n(8)["default"];t.__esModule=!0;var i=n(6),s=r(i);o.prototype=new s["default"],o.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;var n=e.body;for(var r=0,i=n.length;r<i;r++){var s=n[r],o=this.accept(s);if(!o)continue;var c=u(n,r,t),h=a(n,r,t),p=o.openStandalone&&c,d=o.closeStandalone&&h,v=o.inlineStandalone&&c&&h;o.close&&f(n,r,!0),o.open&&l(n,r,!0),v&&(f(n,r),l(n,r)&&s.type==="PartialStatement"&&(s.indent=/([ \t]+$)/.exec(n[r-1].original)[1])),p&&(f((s.program||s.inverse).body),l(n,r)),d&&(f(n,r),l((s.inverse||s.program).body))}return e},o.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,i=n;if(n&&n.chained){r=n.body[0].program;while(i.chained)i=i.body[i.body.length-1].program}var s={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:a(t.body),closeStandalone:u((r||t).body)};e.openStrip.close&&f(t.body,null,!0);if(n){var o=e.inverseStrip;o.open&&l(t.body,null,!0),o.close&&f(r.body,null,!0),e.closeStrip.open&&l(i.body,null,!0),u(t.body)&&a(r.body)&&(l(t.body),f(r.body))}else e.closeStrip.open&&l(t.body,null,!0);return s},o.prototype.MustacheStatement=function(e){return e.strip},o.prototype.PartialStatement=o.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function o(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function u(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function a(e,t){return{open:e.charAt(2)==="~",close:t.charAt(t.length-3)==="~"}}function f(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(e,t,n){n=this.locInfo(n);var r=e?"@":"",i=[],o=0,u="";for(var a=0,f=t.length;a<f;a++){var l=t[a].part,c=t[a].original!==l;r+=(t[a].separator||"")+l;if(!!c||l!==".."&&l!=="."&&l!=="this")i.push(l);else{if(i.length>0)throw new s["default"]("Invalid path: "+r,{loc:n});l===".."&&(o++,u+="../")}}return new this.PathExpression(e,o,i,r,n)}function c(e,t,n,r,i,s){var o=r.charAt(3)||r.charAt(2),u=o!=="{"&&o!=="&";return new this.MustacheStatement(e,t,n,u,i,this.locInfo(s))}function h(e,t,n,r){if(e.path.original!==n){var i={loc:e.path.loc};throw new s["default"](e.path.original+" doesn't match "+n,i)}r=this.locInfo(r);var o=new this.Program([t],null,{},r);return new this.BlockStatement(e.path,e.params,e.hash,o,undefined,{},{},{},r)}function p(e,t,n,r,i,o){if(r&&r.path&&e.path.original!==r.path.original){var u={loc:e.path.loc};throw new s["default"](e.path.original+" doesn't match "+r.path.original,u)}t.blockParams=e.blockParams;var a=undefined,f=undefined;return n&&(n.chain&&(n.program.body[0].closeStrip=r.strip),f=n.strip,a=n.program),i&&(i=a,a=t,t=i),new this.BlockStatement(e.path,e.params,e.hash,t,a,e.strip,f,r&&r.strip,this.locInfo(o))}var r=n(8)["default"];t.__esModule=!0,t.SourceLocation=o,t.id=u,t.stripFlags=a,t.stripComment=f,t.preparePath=l,t.prepareMustache=c,t.prepareRawBlock=h,t.prepareBlock=p;var i=n(12),s=r(i)},function(e,t,n){"use strict";function u(e,t,n){if(r.isArray(e)){var i=[];for(var s=0,o=e.length;s<o;s++)i.push(t.wrap(e[s],n));return i}return typeof e=="boolean"||typeof e=="number"?e+"":e}function a(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var r=n(13),i=undefined;try{}catch(o){}i||(i=function(e,t,n,r){this.src="",r&&this.add(r)},i.prototype={add:function(t){r.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){r.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function f(){return this.src}}),a.prototype={prepend:function(t,n){this.source.unshift(this.wrap(t,n))},push:function(t,n){this.source.push(this.wrap(t,n))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var n=0,r=this.source.length;n<r;n++)t(this.source[n])},empty:function(){var t=arguments[0]===undefined?this.currentLocation||{start:{}}:arguments[0];return new i(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var n=arguments[1]===undefined?this.currentLocation||{start:{}}:arguments[1];return t instanceof i?t:(t=u(t,this,n),new i(n.start.line,n.start.column,this.srcFile,t))},functionCall:function(t,n,r){return r=this.generateList(r),this.wrap([t,n?"."+n+"(":"(",r,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=u(t[r],this);i!=="undefined"&&n.push([this.quotedString(r),":",i])}var s=this.generateList(n);return s.prepend("{"),s.add("}"),s},generateList:function(t,n){var r=this.empty(n);for(var i=0,s=t.length;i<s;i++)i&&r.add(","),r.add(u(t[i],this,n));return r},generateArray:function(t,n){var r=this.generateList(t,n);return r.prepend("["),r.add("]"),r}},t["default"]=a,e.exports=t["default"]}])}),function(e){if(typeof define=="function"&&define.amd)define("js-cookie",e);else if(typeof exports=="object")module.exports=e();else{var t=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=t,n}}}(function(){function e(){var e=0,t={};for(;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,i,s){var o;if(arguments.length>1){s=e({path:"/"},r.defaults,s);if(typeof s.expires=="number"){var u=new Date;u.setMilliseconds(u.getMilliseconds()+s.expires*864e5),s.expires=u}try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(a){}return i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,s.expires&&"; expires="+s.expires.toUTCString(),s.path&&"; path="+s.path,s.domain&&"; domain="+s.domain,s.secure?"; secure":""].join("")}t||(o={});var f=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;for(;c<f.length;c++){var h=f[c].split("="),p=h[0].replace(l,decodeURIComponent),d=h.slice(1).join("=");d.charAt(0)==='"'&&(d=d.slice(1,-1));try{d=n&&n(d,p)||d.replace(l,decodeURIComponent);if(this.json)try{d=JSON.parse(d)}catch(a){}if(t===p){o=d;break}t||(o[p]=d)}catch(a){}}return o}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t()}),define("ohc-sso",["js-cookie","jquery","ohc-url"],function(e){var t={en:{Welcome:"Welcome details.firstname","Sign Out":"Sign Out","Sign In":"Sign In"},ar:{Welcome:" details.firstname","Sign Out":" ","Sign In":" "},es:{Welcome:"Bienvenido/a details.firstname","Sign Out":"Cerrar sesin","Sign In":"Iniciar sesin"},fr:{Welcome:"Bienvenue details.firstname","Sign Out":"Dconnexion","Sign In":"Connexion"},de:{Welcome:"Willkommen details.firstname","Sign Out":"Abmelden","Sign In":"Anmelden"},it:{Welcome:"Benvenuto/a details.firstname","Sign Out":"Scollega","Sign In":"Accedi"},ja:{Welcome:" details.firstname","Sign Out":"","Sign In":""},ko:{Welcome:", details.firstname","Sign Out":"","Sign In":""},"pt-br":{Welcome:"Bem-vindo(a) details.firstname","Sign Out":"Sair","Sign In":"Acessar"},"zh-hans":{Welcome:" details.firstname","Sign Out":"","Sign In":""},"zh-hant":{Welcome:"details.firstname","Sign Out":"","Sign In":""}},n=$("html").attr("lang");n&&(n=n.toLowerCase()),n==="zh-cn"&&(n="zh-hans"),n==="zh-tw"&&(n="zh-hant");var r=function(e){if(typeof n!="undefined"&&n!==!1)var r=n;else var r="en";return typeof t[r]=="undefined"&&r.indexOf("-")>-1&&(r=r.substr(0,r.indexOf("-"))),typeof t[r]=="undefined"||typeof t[r][e]=="undefined"?e==="dir"?"en":e:t[r][e]},i={};return i.isLoggedIn=function(){var t=e.get("ORA_UCM_INFO");return t&&t.split("~").length>3?!0:!1},i.getUserDetails=function(){var t=e.get("ORA_UCM_INFO");if(t&&t.split("~").length>3){var n=t.split("~"),r={};return r.firstname=n[2],r.lastname=n[3],r.email=n[4].toLowerCase(),r}return undefined},i.login=function(){window.location="http://www.oracle.com/webapps/redirect/signon?nexturl="+encodeURI(window.location.href)},i.logout=function(){e.remove("ORASSO_AUTH_HINT");var t=$.parseURL(window.location.href);t.path.indexOf("/secure")===-1?window.location="https://login.oracle.com/sso/logout?p_done_url="+encodeURI(window.location.href):window.location="https://login.oracle.com/sso/logout?p_done_url="+encodeURI("http://www.oracle.com/partners/")},i.handleLogInOut=function(){$(".login-link").on("click",function(e){e.preventDefault(),i.login()}),$(".logout-link").on("click",function(e){e.preventDefault(),i.logout()});if(i.isLoggedIn()){var e=i.getUserDetails();$(".logged-in-content").show(),$(".logged-in-content").removeClass("hidden"),$(".append-firstname-greeting").append(e.email)}else $(".logged-out-content").show(),$(".logged-out-content").removeClass("hidden")},i}),define("i18n",["jquery","handlebars"],function(e,t){var n={en:{dir:"en","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form",Language:"Language",Solutions:"Solutions",Design:"Design",Develop:"Develop",Integrate:"Integrate",Operate:"Operate","Search Solutions":"Search Solutions","Search Help Center":"Search Help Center","Back to Solutions":"Back to Solutions",Previous:"Previous",Next:"Next",Home:"Home",Options:"Options",Search:"Search","No matching solutions found. Discover new solutions by changing your search criteria.":"No matching solutions found. Discover new solutions by changing your search criteria.","Similar Solutions":"Similar Solutions","CUSTOMER-INSPIRED":"CUSTOMER-INSPIRED","Customer-Inspired Solutions":"Customer-Inspired Solutions","These solutions were built to solve real-world scenarios.":"These solutions were built to solve real-world scenarios.",Hide:"Hide",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle and/or its affiliates.","This page was machine translated.":"This page was machine translated.","Skip to main content":"Skip to main content","Back to main content":"Back to main content","Table of contents":"Table of contents","About Oracle":"About Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/corporate/","Contact Us":"Contact Us","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/corporate/contact/","Terms of Use and Privacy":"Terms of Use and Privacy","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr"},ar:{dir:"ar","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"",Solutions:"",Design:"",Develop:"",Integrate:"",Operate:"","Search Solutions":"  ","Search Help Center":"   ","Back to Solutions":"  ",Previous:"",Next:"",Home:" ",Options:"",Search:"","No matching solutions found. Discover new solutions by changing your search criteria.":"     .       .","Similar Solutions":" ","CUSTOMER-INSPIRED":"   ","Customer-Inspired Solutions":"    ","These solutions were built to solve real-world scenarios.":"            .",Hide:"",Copyright:" ","Oracle and/or its affiliates.":"   /   .","This page was machine translated.":"    .","Skip to main content":"   ","Back to main content":"   ","Table of contents":" ","About Oracle":" ","https://www.oracle.com/corporate/":"https://www.oracle.com/middleeast-ar/corporate/","Contact Us":" ","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/middleeast-ar/corporate/contact/","Terms of Use and Privacy":"  ","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=ar/legal&id=cpyr"},es:{dir:"es","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"Idioma",Solutions:"Soluciones",Design:"Diseo",Develop:"Desarrollo",Integrate:"Integracin",Operate:"Ejecucin","Search Solutions":"Buscar soluciones","Search Help Center":"Buscar centro de ayuda","Back to Solutions":"Volver a Soluciones",Previous:"Anterior",Next:"Siguiente",Home:"Inicio",Options:"Opciones",Search:"Buscar","No matching solutions found. Discover new solutions by changing your search criteria.":"No se ha encontrado ninguna solucin que coincida. Descubra nuevas soluciones cambiando los criterios de bsqueda introducidos.","Similar Solutions":"Soluciones similares","CUSTOMER-INSPIRED":"INSPIRADAS EN EL CLIENTE","Customer-Inspired Solutions":"Soluciones inspiradas en el cliente","These solutions were built to solve real-world scenarios.":"Estas soluciones se han creado para resolver escenarios reales.",Hide:"Ocultar",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle y/o sus filiales.","This page was machine translated.":"Esta pgina ha sido traducida por una mquina.","Skip to main content":"Ir al contenido principal","Back to main content":"Volver al contenido principal","Table of contents":"Tabla de contenido","About Oracle":"Acerca de Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/mx/corporate/","Contact Us":"Contactar","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/mx/corporate/contact/","Terms of Use and Privacy":"Condiciones de uso y privacidad","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/mx/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=es/legal&id=cpyr"},fr:{dir:"fr","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"Langue",Solutions:"Solutions",Design:"Concevoir",Develop:"Dvelopper",Integrate:"Intgrer",Operate:"Utiliser","Search Solutions":"Rechercher dans les solutions","Search Help Center":"Rechercher dans le centre d'aide","Back to Solutions":"Retour aux solutions",Previous:"Prcdent",Next:"Suivant",Home:"Accueil",Options:"Options",Search:"Rechercher","No matching solutions found. Discover new solutions by changing your search criteria.":"Aucune solution correspondante trouve. Recherchez de nouvelles solutions en modifiant vos critres.","Similar Solutions":"Solutions similaires","CUSTOMER-INSPIRED":"REALITE CLIENT","Customer-Inspired Solutions":"Solutions inspires des clients","These solutions were built to solve real-world scenarios.":"Ces solutions reposent sur des scnarios rels.",Hide:"Masquer",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle et/ou ses affilis.","This page was machine translated.":"Cette page a t traduite automatiquement.","Skip to main content":"Passer au contenu principal","Back to main content":"Retour au contenu principal","Table of contents":"Table des matires","About Oracle":"A propos d'Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/fr/corporate/","Contact Us":"Nous contacter","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/fr/corporate/contact/","Terms of Use and Privacy":"Conditions d'utilisation et confidentialit","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/fr/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=fr/legal&id=cpyr"},de:{dir:"de","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"Sprache",Solutions:"Solutions",Design:"Entwerfen",Develop:"Entwickeln",Integrate:"Integrieren",Operate:"Einsetzen","Search Solutions":"In Solutions suchen","Search Help Center":"Im Help Center suchen","Back to Solutions":"Zurck zu Solutions",Previous:"Zurck",Next:"Weiter",Home:"Home",Options:"Optionen",Search:"Suchen","No matching solutions found. Discover new solutions by changing your search criteria.":"Keine bereinstimmenden Lsungen gefunden. Entdecken Sie neue Lsungen, indem Sie Ihre Suchkriterien ndern.","Similar Solutions":"hnliche Lsungen","CUSTOMER-INSPIRED":"CUSTOMER-INSPIRED","Customer-Inspired Solutions":"Von Kunden inspirierte Lsungen","These solutions were built to solve real-world scenarios.":"Mit diesen Lsungen lassen sich reale Szenarios bewerkstelligen.",Hide:"Ausblenden",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle und/oder verbundene Unternehmen.","This page was machine translated.":"Diese Seite wurde maschinell bersetzt.","Skip to main content":"Zum Hauptinhalt wechseln","Back to main content":"Zurck zum Hauptinhalt","Table of contents":"Inhaltsverzeichnis","About Oracle":"Info zu Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/de/corporate/","Contact Us":"Kontakt","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/de/corporate/contact/","Terms of Use and Privacy":"Nutzungsbedingungen und Datenschutzrichtlinie","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/de/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=de/legal&id=cpyr"},it:{dir:"it","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"Lingua",Solutions:"Soluzioni",Design:"Progettare",Develop:"Sviluppare",Integrate:"Integrare",Operate:"Operare","Search Solutions":"Cerca in Soluzioni","Search Help Center":"Cerca in Help Center","Back to Solutions":"Torna a Soluzioni",Previous:"Precedente",Next:"Successivo",Home:"Home",Options:"Opzioni",Search:"Cerca","No matching solutions found. Discover new solutions by changing your search criteria.":"Nessuna soluzione corrispondente trovata. Per scoprire nuove soluzioni, modificare i criteri di ricerca.","Similar Solutions":"Soluzioni simili","CUSTOMER-INSPIRED":"CUSTOMER-INSPIRED","Customer-Inspired Solutions":"Soluzioni ispirate ai clienti","These solutions were built to solve real-world scenarios.":"Queste soluzioni sono state create per risolvere scenari reali.",Hide:"Nascondi",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle e/o relative consociate.","This page was machine translated.":"Questa pagina  stata tradotta da una macchina.","Skip to main content":"Passa al contenuto principale","Back to main content":"Torna al contenuto principale","Table of contents":"Indice","About Oracle":"Informazioni su Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/it/corporate/","Contact Us":"Contattateci","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/it/corporate/contact/","Terms of Use and Privacy":"Condizioni d'uso e riservatezza","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/it/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=it/legal&id=cpyr"},ja:{dir:"ja","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"",Solutions:"",Design:"",Develop:"",Integrate:"",Operate:"","Search Solutions":"","Search Help Center":"","Back to Solutions":"",Previous:"",Next:"",Home:"",Options:"",Search:"","No matching solutions found. Discover new solutions by changing your search criteria.":"","Similar Solutions":"","CUSTOMER-INSPIRED":"CUSTOMER-INSPIRED","Customer-Inspired Solutions":"","These solutions were built to solve real-world scenarios.":"",Hide:"",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle and/or its affiliates.","This page was machine translated.":"","Skip to main content":"","Back to main content":"","Table of contents":"","About Oracle":"Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/jp/corporate/","Contact Us":"","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/jp/corporate/contact/","Terms of Use and Privacy":"","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/jp/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=ja/legal&id=cpyr"},ko:{dir:"ko","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"",Solutions:"",Design:"",Develop:"",Integrate:"",Operate:"","Search Solutions":" ","Search Help Center":"  ","Back to Solutions":" ",Previous:"",Next:"",Home:"",Options:"",Search:"","No matching solutions found. Discover new solutions by changing your search criteria.":"    .      .","Similar Solutions":" ","CUSTOMER-INSPIRED":" ","Customer-Inspired Solutions":"  ","These solutions were built to solve real-world scenarios.":"     .",Hide:"",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle and/or its affiliates.","This page was machine translated.":"  .","Skip to main content":"  ","Back to main content":"  ","Table of contents":"","About Oracle":"Oracle ","https://www.oracle.com/corporate/":"https://www.oracle.com/kr/corporate/","Contact Us":" ","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/kr/corporate/contact/","Terms of Use and Privacy":"   ","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/kr/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=ko/legal&id=cpyr"},"pt-br":{dir:"pt-br","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"Idioma",Solutions:"Solues",Design:"Projetar",Develop:"Desenvolver",Integrate:"Integrar",Operate:"Operar","Search Solutions":"Pesquisar nas Solues","Search Help Center":"Pesquisar no Help Center","Back to Solutions":"Voltar s Solues",Previous:"Anterior",Next:"Prximo",Home:"Home",Options:"Opes",Search:"Pesquisar","No matching solutions found. Discover new solutions by changing your search criteria.":"Nenhuma soluo correspondente encontrada. Descubra novas solues alterando seus critrios de pesquisa.","Similar Solutions":"Solues Semelhantes","CUSTOMER-INSPIRED":"INSPIRADAS NOS CLIENTES","Customer-Inspired Solutions":"Solues Inspiradas nos Clientes","These solutions were built to solve real-world scenarios.":"Essas solues foram criadas para tratar de situaes do mundo real.",Hide:"Ocultar",Copyright:"Copyright","Oracle and/or its affiliates.":"Oracle e/ou suas empresas afiliadas.","This page was machine translated.":"Esta pgina foi traduzida automaticamente.","Skip to main content":"Ir para o contedo principal","Back to main content":"Voltar ao contedo principal","Table of contents":"ndice","About Oracle":"Sobre a Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/br/corporate/","Contact Us":"Fale Conosco","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/br/corporate/contact/","Terms of Use and Privacy":"Termos de Uso e Privacidade","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/br/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=pt-br/legal&id=cpyr"},"zh-hans":{dir:"zh-cn","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"",Solutions:"",Design:"",Develop:"",Integrate:"",Operate:"","Search Solutions":"","Search Help Center":"","Back to Solutions":"",Previous:"",Next:"",Home:"",Options:"",Search:"","No matching solutions found. Discover new solutions by changing your search criteria.":"","Similar Solutions":"","CUSTOMER-INSPIRED":"","Customer-Inspired Solutions":"","These solutions were built to solve real-world scenarios.":"",Hide:"",Copyright:"","Oracle and/or its affiliates.":"Oracle /","This page was machine translated.":"","Skip to main content":"","Back to main content":"","Table of contents":"","About Oracle":" Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/cn/corporate/","Contact Us":"","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/cn/corporate/contact/","Terms of Use and Privacy":"","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/cn/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=zh-cn/legal&id=cpyr"},"zh-hant":{dir:"zh-tw","translation-survey":"https://ora-java.custhelp.com/ci/documents/detail/5/2523/12/6c815f312d7890bee99d231c883f3f3e3e40eafa","Machine Translation Feedback":"Machine Translation Feedback","Machine Translation Feeback Form":"Machine Translation Feeback Form","Language ":"",Solutions:"",Design:"",Develop:"",Integrate:"",Operate:"","Search Solutions":"","Search Help Center":"","Back to Solutions":"",Previous:"",Next:"",Home:"",Options:"",Search:"","No matching solutions found. Discover new solutions by changing your search criteria.":"","Similar Solutions":"","CUSTOMER-INSPIRED":"","Customer-Inspired Solutions":"","These solutions were built to solve real-world scenarios.":"",Hide:"",Copyright:"","Oracle and/or its affiliates.":"Oracle  () ","This page was machine translated.":"","Skip to main content":"","Back to main content":"","Table of contents":"","About Oracle":" Oracle","https://www.oracle.com/corporate/":"https://www.oracle.com/tw/corporate/","Contact Us":"","https://www.oracle.com/corporate/contact/":"https://www.oracle.com/tw/corporate/contact/","Terms of Use and Privacy":"","https://www.oracle.com/legal/privacy/":"https://www.oracle.com/tw/legal/privacy/","https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr":"https://docs.oracle.com/pls/topic/lookup?ctx=zh-tw/legal&id=cpyr"}},r=e("html").attr("lang");r&&(r=r.toLowerCase()),r==="zh-cn"&&(r="zh-hans"),r==="zh-tw"&&(r="zh-hant");var i=function(e){if(typeof r!="undefined"&&r!==!1)var t=r;else var t="en";return typeof n[t]=="undefined"&&t.indexOf("-")>-1&&(t=t.substr(0,t.indexOf("-"))),typeof n[t]=="undefined"||typeof n[t][e]=="undefined"?e==="dir"?"en":e:n[t][e]};return t.registerHelper("i18n",i),t.registerHelper("if_mt",function(t){return e("html").hasClass("mt")?t.fn(this):t.inverse(this)}),i.languages=[{dir:"ar",label:""},{dir:"pt-br",label:"Portugus (Brasil)"},{dir:"en",label:"English"},{dir:"fr",label:"Franais"},{dir:"de",label:"Deutsch"},{dir:"it",label:"Italiano"},{dir:"ja",label:""},{dir:"ko",label:""},{dir:"zh-cn",label:" ()"},{dir:"es",label:"Espaol"},{dir:"zh-tw",label:" ()"}],i});if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),s=i.attr("data-target");s||(s=i.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,s)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;i||r.data("bs.carousel",i=new n(this,s)),"number"==typeof t?i.to(t):o?i[o]():s.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(t,i),o=this.interval,u="next"==t?"left":"right",f=this;if(s.hasClass("active"))return this.sliding=!1;var l=s[0],h=e.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([t,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),t.call(s,o),u&&s.data("bs.carousel").to(u),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),s=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),i||n.data("bs.collapse",i=new r(this,s)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.4",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var f=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][f])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var s=t(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();n.call(s,u)})}(jQuery),+function(e){"use strict";function t(t){t&&3===t.which||(e(i).remove(),e(s).each(function(){var r=e(this),i=n(r),s={relatedTarget:this};i.hasClass("open")&&(i.trigger(t=e.Event("hide.bs.dropdown",s)),t.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.4",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=n(i),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),o=i.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",l=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(l.length){var h=l.index(t.target);38==t.which&&h>0&&h--,40==t.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);s||i.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](r):o.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.tooltip",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void (n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,l=f.test(u);l&&(u=u.replace(f,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var h=this.getPosition(),p=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var v=u,m=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(m);u="bottom"==u&&h.bottom+d>g.bottom?"top":"top"==u&&h.top-d<g.top?"bottom":"right"==u&&h.right+p>g.width?"left":"left"==u&&h.left-p<g.left?"right":u,s.removeClass(v).addClass(u)}var y=this.getCalculatedOffset(u,h,p,d);this.applyPlacement(y,u);var b=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",b).emulateTransitionEnd(n.TRANSITION_DURATION):b()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var f=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var c=this.getViewportAdjustedDelta(n,t,f,l);c.left?t.left+=c.left:t.top+=c.top;var h=/top|bottom/.test(n),p=h?2*c.left-i+f:2*c.top-s+l,d=h?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][d],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&s.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,s=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.popover",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=r.find("> .active"),u=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&u?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=s.top?!1:"bottom":e-r>=i+o?!1:"bottom";var u=null==this.affixed,a=u?i:s.top,f=u?o:t;return null!=n&&n>=i?"top":null!=r&&a+f>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=e(document.body).height();"object"!=typeof r&&(s=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var u=this.getState(o,t,i,s);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var f="affix"+(u?"-"+u:""),l=e.Event(f+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:o-t-s})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(e,t){var n=e.jQuery||e.Cowboy||(e.Cowboy={}),r;n.throttle=r=function(e,r,i,s){function a(){function p(){u=+(new Date),i.apply(n,l)}function v(){o=t}var n=this,a=+(new Date)-u,l=arguments;s&&!o&&p(),o&&clearTimeout(o),s===t&&a>e?p():r!==!0&&(o=setTimeout(s?v:p,s===t?e-a:e))}var o,u=0;return typeof r!="boolean"&&(s=i,i=r,r=t),n.guid&&(a.guid=i.guid=i.guid||n.guid++),a},n.debounce=function(e,n,i){return i===t?r(e,n,!1):r(e,i,n!==!1)}}(this),define("debounce",["jquery"],function(){}),function(e){typeof define=="function"&&define.amd?define("jquery-ui",["jquery"],e):e(jQuery)}(function(e){e.ui=e.ui||{};var t=e.ui.version="1.12.1",n=0,r=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u={},a=t.split(".")[0];t=t.split(".")[1];var f=a+"-"+t;return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][f.toLowerCase()]=function(t){return!!e.data(t,f)},e[a]=e[a]||{},i=e[a][t],s=e[a][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),o=new n,o.options=e.widget.extend({},o.options),e.each(r,function(t,r){if(!e.isFunction(r)){u[t]=r;return}u[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),s.prototype=e.widget.extend(o,{widgetEventPrefix:i?o.widgetEventPrefix||t:t},u,{constructor:s,namespace:a,widgetName:t,widgetFullName:f}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,s,n._proto)}),delete i._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){var n=r.call(arguments,1),i=0,s=n.length,o,u;for(;i<s;i++)for(o in n[i])u=n[i][o],n[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=r.call(arguments,1),a=this;return o?!this.length&&s==="instance"?a=undefined:this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new n(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return e==="classes"&&this._setOptionClasses(t),this.options[e]=t,e==="disabled"&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t){i=this.classesElementLookup[n];if(t[n]===this.options.classes[n]||!i||!i.length)continue;r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,s){var o,u;for(u=0;u<i.length;u++)o=r.classesElementLookup[i[u]]||e(),t.add?o=e(e.unique(o.get().concat(t.element.get()))):o=e(o.not(t.element).get()),r.classesElementLookup[i[u]]=o,n.push(i[u]),s&&t.classes[i[u]]&&n.push(t.classes[i[u]])}var n=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(r,i){e.inArray(t.target,i)!==-1&&(n.classesElementLookup[r]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r=typeof r=="boolean"?r:n;var i=typeof e=="string"||e===null,s={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return s.element.toggleClass(this._classes(s),r),this},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.on(f,l,u):n.on(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var i=e.widget,s=e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),o=e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),u=!1;e(document).on("mouseup",function(){u=!1});var a=e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(u)return;this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which===1,i=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0,!0},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}if(t.which||t.button)this._mouseMoved=!0;return this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,u=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),f=e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n=this.options,r=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){if(n.disabled)return;r._removeClass("ui-resizable-autohide"),r._handles.show()}).on("mouseleave",function(){if(n.disabled)return;r.resizing||(r._addClass("ui-resizable-autohide"),r._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var t=this.options,n,r,i,s,o,u=this;this.handles=t.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e();if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={};for(r=0;r<i.length;r++)n=e.trim(i[r]),s="ui-resizable-"+n,o=e("<div>"),this._addClass(o,"ui-resizable-handle "+s),o.css({zIndex:t.zIndex}),this.handles[n]=".ui-resizable-"+n,this.element.append(o)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){if(this.handles[n].constructor===String)this.handles[n]=this.element.children(this.handles[n]).first().show();else if(this.handles[n].jquery||this.handles[n].nodeType)this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:u._mouseDown});this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])}},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){u.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),u.axis=o&&o[1]?o[1]:"se")}),t.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof s.aspectRatio=="number"?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",i==="auto"?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];this._updatePrevProperties();if(!a)return!1;n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseFloat(l.element.css("left"))+(l.position.left-l.originalPosition.left)||null,a=parseFloat(l.element.css("top"))+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||e)t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),n<s.maxWidth&&(s.maxWidth=n),i<s.maxHeight&&(s.maxHeight=i);this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),r==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),r==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.originalPosition.top+this.originalSize.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_getPaddingPlusBorderDimensions:function(e){var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++)n[t]=parseFloat(r[t])||0,n[t]+=parseFloat(i[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t=0,n=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,l=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;if(!h)return;a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u})},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(u[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&typeof t.options.ghost=="string"&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a=typeof r.grid=="number"?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&r.maxWidth<p,m=r.maxHeight&&r.maxHeight<d,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l);if(/^(se|s|e)$/.test(u))n.size.width=p,n.size.height=d;else if(/^(ne)$/.test(u))n.size.width=p,n.size.height=d,n.position.top=o.top-h;else if(/^(sw)$/.test(u))n.size.width=p,n.size.height=d,n.position.left=o.left-c;else{if(d-l<=0||p-f<=0)t=n._getPaddingPlusBorderDimensions(this);d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=f-t.width,n.size.width=p,n.position.left=o.left+s.width-p)}}});var l=e.ui.resizable}),define("bookish-main",["jquery","highlightjs","ohc-url","handlebars","ohc-sso","i18n","bootstrap","debounce","jquery-ui"],function(e,t,n,r,i,s){function y(){if(p)return;if(!f)if(e(window).scrollTop()-e("main").offset().top>=0){var t=Math.round(e(window).scrollTop()+e(window).height()-e("footer").offset().top);t>=0?(e(".ohc-menu-controls nav").css("margin-bottom",1+t+"px"),e(".ohc-menu.tab-content>.active").css("margin-bottom",1+t+"px")):(e(".ohc-menu-controls nav").css("margin-bottom",""),e(".ohc-menu.tab-content>.active").css("margin-bottom","")),e(".ohc-menu-controls nav").addClass("fixed"),e(".ohc-menu.tab-content>.active").addClass("fixed")}else e(".ohc-menu-controls nav").removeClass("fixed"),e(".ohc-menu.tab-content>.active").removeClass("fixed"),e(".ohc-menu.tab-content>.active").css("margin-bottom",""),e(".ohc-menu-controls nav").css("margin-bottom","")}function w(){var t=[];if(e("#ssot-metadata").length)try{var r=JSON.parse(e("#ssot-metadata").text()),i=r.primary,o="";i.component&&(typeof i.component.display_in_url=="undefined"||i.component.display_in_url)&&(o+="../",t.unshift({title:i.component.element_name,href:o+"index.html"})),i.platform&&(typeof i.platform.display_in_url=="undefined"||i.platform.display_in_url)&&(o+="../",t.unshift({title:i.platform.element_name,href:o+"index.html"})),i.release&&(typeof i.release.display_in_url=="undefined"||i.release.display_in_url)&&(o+="../",t.unshift({title:i.release.element_name,href:o+"index.html"})),i.product&&(typeof i.product.display_in_url=="undefined"||i.product.display_in_url)&&(o+="../",t.unshift({title:i.product.element_name,href:o+"index.html"}));if(i.product_group&&(typeof i.product_group.display_in_url=="undefined"||i.product_group.display_in_url)){o+="../";if(h.protocol.indexOf("http")==0)t.unshift({title:i.product_group.element_name,href:o+"index.html"});else{var u="https://docs.oracle.com/"+s("dir")+"/";i.category&&(typeof i.category.display_in_url=="undefined"||i.category.display_in_url)&&(u+=i.category.short_name+"/"),i.suite&&(typeof i.suite.display_in_url=="undefined"||i.suite.display_in_url)&&(u+=i.suite.short_name+"/"),u+=i.product_group.short_name+"/index.html",t.unshift({title:i.product_group.element_name,href:u})}}if(i.suite&&e("html").hasClass("solution"))if(h.protocol.indexOf("http")==0)t.unshift({title:i.suite.element_name,href:"/"+s("dir")+"/solutions/solutions.html?type="+i.suite.short_name});else{var u="https://docs.oracle.com/"+s("dir")+"/";i.category&&(typeof i.category.display_in_url=="undefined"||i.category.display_in_url)&&(u+=i.category.short_name+"/"),u+="/solutions.html?type="+i.suite.short_name,t.unshift({title:i.suite.element_name,href:u})}else if(i.suite&&(typeof i.suite.display_in_url=="undefined"||i.suite.display_in_url)){o+="../";if(h.protocol.indexOf("http")==0)t.unshift({title:i.suite.element_name,href:o+"index.html"});else{var u="https://docs.oracle.com/"+s("dir")+"/";i.category&&(typeof i.category.display_in_url=="undefined"||i.category.display_in_url)&&(u+=i.category.short_name+"/"),u+=i.suite.short_name+"/index.html",t.unshift({title:i.suite.element_name,href:u})}}if(i.suite&&e("html").hasClass("solution")){o+="../";if(h.protocol.indexOf("http")==0)t.unshift({title:"Solutions",href:"/"+s("dir")+"/solutions/index.html"});else{var u="https://docs.oracle.com/"+s("dir")+"/solutions/index.html";t.unshift({title:"Solutions",href:u})}}else if(i.category&&(typeof i.category.display_in_url=="undefined"||i.category.display_in_url)){o+="../";if(h.protocol.indexOf("http")==0)t.unshift({title:i.category.element_name,href:o+"index.html"});else{var u="https://docs.oracle.com/"+s("dir")+"/"+i.category.short_name+"/index.html";t.unshift({title:i.category.element_name,href:u})}}}catch(a){console.log("Error: Problem parsing SSOT meta-data. "+a.message)}if(n.isOracle()){var f={title:s("Home"),href:"/"+s("dir")+"/index.html"};t.unshift(f)}var l=e('<ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList"></ol>');if(t.length){for(var c=t.length-1;c>=0;c--){var p=t[c];c==t.length-1?l.prepend('<li class="active" property="itemListElement" typeof="ListItem"><a href="'+p.href+'"><span property="name">'+s(p.title)+"</span></a></li>"):l.prepend('<li property="itemListElement" typeof="ListItem"><a href="'+p.href+'"><span property="name">'+s(p.title)+"</span></a></li>")}l.find("li").each(function(t){e(this).append('<meta property="position" content="'+t+'">')}),e("html").hasClass("solution")?(e("#hero-blue h1").before(l),e("#sitemap-tab  > h2:first-child").after(l.clone())):e("body > .ohc-grid > header > div").prepend(l)}}function E(){t.configure({languages:["json"]})}function S(){if(navigator.userAgent.match(/IEMobile\/10\.0/)){var e=document.createElement("style");e.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(e)}}function x(){e(window).off("scroll",b),e(window).off("resize",b);var t=e("article").first();t.attr("tabindex",-1).focus(),t.offset()&&(e(window).width()<768&&e("html").hasClass("solution")?e(window).scrollTop(e("article").offset().top-25):e(window).scrollTop(e("article").offset().top)),e(window).scroll(b),e(window).resize(b)}function T(){e(".skipto").click(function(e){e.preventDefault(),e.stopImmediatePropagation(),x()});var t=e("article").first();t.on("blur focusout",function(){e(this).removeAttr("tabindex")})}function N(){f||e(".ohc-menu-control-item a").on("show.bs.tab",function(t){var n=e(e(t.target).attr("href")),r=e(window).scrollTop()+e(window).height()-e("footer").offset().top;e(window).scrollTop()-e("main").offset().top>=0?(n.addClass("fixed"),r>=0?n.css("bottom",1+r+"px"):n.css("bottom","")):(n.removeClass("fixed"),n.css("bottom",""))}),e(".ohc-menu-control-item a").on("shown.bs.tab",function(t){if(e(window).scrollTop()-e("main").offset().top>=0){var n=e("#tab-toc"),r=n.find(".tocitem.active"),i=n.height()/2-(r.offset().top-e(window).scrollTop())-r.height();n.scrollTop(n.scrollTop()-i)}}),e(".ohc-menu-control-item a").on("click",function(t){if(t.which>1)return;t.preventDefault(),t.stopImmediatePropagation(),e("body > header .navbar-collapse").collapse("hide"),e(this).parent().hasClass("active")?(e(".ohc-menu.tab-content>.active").removeClass("fixed"),e("li.ohc-menu-control-item.active").removeClass("active"),e("li.ohc-menu-control-item").attr("aria-selected","false"),e(".ohc-menu").fadeOut("fast",function(){e(".ohc-menu").addClass("hidden")})):(e(this).tab("show"),e(".ohc-menu").removeClass("hidden"),e(".ohc-menu").fadeIn("slow"),e("li.ohc-menu-control-item").attr("aria-selected","false"),e("li.ohc-menu-control-item.active").removeClass("active"),e(".ohc-menu-control-item a[href="+e(this).attr("href")+"]").parent().addClass("active"),e(".ohc-menu-control-item a[href="+e(this).attr("href")+"]").parent().attr("aria-selected","true"))})}function C(t){var n=e("#tab-toc ul.treeroot");e(".activedescendant",n).removeClass("activedescendant").attr("aria-selected","false").attr("tabindex","-1"),e("#"+t).addClass("activedescendant").attr("aria-selected","true").attr("tabindex","0"),e("#"+t).closest("ul.treeroot").attr("aria-activedescendant",t)}function k(t){var n=e("> div",t),r=e("> ul",t);n.hasClass("collapsed")?(r.removeClass("hide-group").addClass("show-group"),n.removeClass("collapsed").addClass("expanded"),t.attr({"aria-expanded":"true"})):(e(".show-group",t).removeClass("show-group").addClass("hide-group"),e(".expanded",t).addClass("collapsed"),e("[aria-expanded=true]",t).attr({"aria-expanded":"false"}),t.attr({"aria-expanded":"false"})),C(t.attr("id"))}function L(){e("#tab-toc > header .fa-minus-square").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var n=e("#tab-toc .activedescendant").parents("li").last().attr("id");e("#tab-toc .treeview .tree .toggle.expanded").each(function(){var t=e(this),n=t.parent(),r=e("> ul",n);t.removeClass("expanded").addClass("collapsed"),r.removeClass("show-group").addClass("hide-group"),n.attr({"aria-expanded":"false"})}),n&&C(n)}),e("#tab-toc > header .fa-plus-square").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e("#tab-toc .treeview .tree .toggle.collapsed").each(function(){var t=e(this),n=t.parent(),r=e("> ul",n);t.removeClass("collapsed").addClass("expanded"),r.removeClass("hide-group").addClass("show-group"),n.attr({"aria-expanded":"true"})})}),e("#tab-toc .treeview").length&&e("#tab-toc .treeview").each(function(){function n(n,r){var i=e(".tree.show-group > li, > li",t),s=i.index(n);if(r=="up"||r=="parent")var o=0,u=-1;else var o=i.length-1,u=1;if(s==o)return!1;if(r=="parent"){var a=i.index(n.parent().parent());if(a===-1)return!1;var f=i.eq(a)}else var f=i.eq(s+u);n.attr("tabindex","-1"),f.attr("tabindex","0").focus(),C(f.attr("id"))}var t=e("#tab-toc ul.treeroot");t.on("keydown",function(r){if(!(r.shiftKey||r.ctrlKey||r.altKey||r.metaKey)){var i=e("#"+t.attr("aria-activedescendant"));switch(r.which){case 13:r.preventDefault(),r.stopImmediatePropagation(),e(".activedescendant").find("> span a")[0].click();break;case 32:e("> a",i).length&&(location.href=e("> a",i).attr("href"),r.stopImmediatePropagation());break;case 38:r.preventDefault(),r.stopImmediatePropagation(),n(i,"up");break;case 40:r.preventDefault(),r.stopImmediatePropagation(),n(i,"down");break;case 37:r.preventDefault(),r.stopImmediatePropagation(),i.attr("aria-expanded")=="false"||i.is(".noChildren")?n(i,"parent"):k(i);break;case 39:r.preventDefault(),r.stopImmediatePropagation(),i.attr("aria-expanded")=="true"?n(i,"down"):k(i)}}}),e("#tab-toc .toggle").on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),k(e(this).parent())}).hover(function(){e(this).toggleClass("hover")})})}function A(t){var n=[];if(c.length===1)return n.push(c[0]),n;if(!history.replaceState)if(t.length===0)var i=undefined;else var i=t[0].hash;else var r=e.parseURL(window.location.href),i=r.hash;if(!i)t:for(var s=0;s<c.length;s++){if(!c[s].hash){n.push(c[s]);break t}var o=c[s].hash.indexOf("#")>=0?c[s].hash.split("#").splice(1).join("#"):c[s].hash;if(o.length===0){n.push(c[s]);break t}}else{e:for(var s=0;s<c.length;s++)if(!!c[s].hash){var o=c[s].hash.indexOf("#")>=0?c[s].hash.split("#").splice(1).join("#"):c[s].hash;if(i===o){n.push(c[s]);break e}}n.length===0&&(n=t)}return n.length===0&&c.length>0&&n.push(c[0]),n}function O(t,n){if(e("#tab-toc").length){var r=e("article").offset().top;e("#tab-toc span.active").removeClass("active");if(t)var i=A(t);else var i=A(M());if(i.length>0){var s=e(i[0]),o=!1;s.parentsUntil("#tab-toc","li.hasChildren").each(function(){$li=e(this);var t=e("> div",$li);if(t.hasClass("collapsed")){o=!0;var n=e("> ul",$li);n.removeClass("hide-group").addClass("show-group"),t.removeClass("collapsed").addClass("expanded"),$li.attr({"aria-expanded":"true"})}});var u=s.closest(".treeview");u.hasClass("collapse")&&u.collapse("show"),e("#tab-toc .treeview.collapse").not(u).collapse("hide"),s.parent().addClass("active");var a=s.parent().parent().attr("id");C(a);function f(){var t=e("#tab-toc"),n=t.find(".tocitem.active");e("html").hasClass("solution")&&(t=t.parent());var r=t.height()/2-(n.offset().top-e(window).scrollTop())-n.height();t.stop(!0).animate({scrollTop:t.scrollTop()-r},"fast")}if(e(window).width()<768){if(!l&&n==undefined){var c=e("article").offset().top,h=c-r;e(window).scrollTop(e(window).scrollTop()+h)}}else setTimeout(f,200)}}}function M(){var e=[],t={};for(var n=0;n<c.length;n++)if(!!c[n].hash){var r=c[n].hash.indexOf("#")>=0?c[n].hash.split("#").splice(1).join("#"):c[n].hash,i=document.getElementById(r);i&&(e.push(i),t[r]=c[n])}var s=[],o=F(e);return o.onScreen.length&&s.push(t[o.onScreen[0].attr("id")]),s.length===0&&o.aboveScreen.length&&s.push(t[o.aboveScreen[o.aboveScreen.length-1].attr("id")]),s}function _(e){var t=M(),n=window.location.href;t.length===0?window.location.hash&&(n=window.location.href.replace(window.location.hash,"")):window.location.hash?n=window.location.href.replace(window.location.hash,t[0].hash):n=window.location.href+t[0].hash;var r=window.location.href;n!=r&&(!history.replaceState||history.replaceState({href:n},null,n));if(n!=r||e!==undefined)e!==undefined?O(t,e):O(t)}function D(){e("article pre code, article .codeblock").each(function(e,n){t.highlightBlock(n)})}function P(t){e(window).off("scroll",b),e(window).off("resize",b),e("head link[rel=prev]").remove(),e("head link[rel=next]").remove(),p||e(".ohc-menu-controls").css("height",e("footer").position().top-e(window).scrollTop()),e("article").fadeTo(0,0);var n=!1,r=e.Deferred();if(window.location.protocol=="file:"&&(window.ActiveXObject||"ActiveXObject"in window))try{var i=new ActiveXObject("Msxml2.XMLHTTP");n=!0}catch(s){var i=new XMLHttpRequest}else var i=new XMLHttpRequest;i.overrideMimeType&&i.overrideMimeType("text/plain"),i.onreadystatechange=function(){i.readyState===4&&(i.status===200||n&&i.status===0?r.resolve(i.responseText):r.reject())};try{i.open("GET",t,!0),i.send()}catch(o){r.reject()}var u=e.when(r.promise(),e("article").promise());u.done(function(t){e("article").empty(),t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),t=t.replace(/<link rel="stylesheet"[^>]*>/gi,"");var n=e("<div></div>").html(t);e(document).prop("title",n.find("> title").text()),n.find("link[rel=prev]").appendTo(e("head")),n.find("link[rel=next]").appendTo(e("head"));var r=n.find("article");e("article").html(r.html()),e(document).trigger("articleload")}),u.fail(function(t){e(document).trigger("articlefail",t)})}function H(t){function r(e,t){var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",e),r.setAttribute("value",t),n.append(r)}var n=e("#search-form");e("#search-form").find("input[name=category]").remove(),e("#search-form").find("input[name=product]").remove(),e("#search-form").find("input[name=book]").remove();var i=n.find("input[name=search-scope]:checked").val();switch(i){case"book":r("book",g.pageData.book);case"product":r("product",g.pageData.product);case"category":r("category",g.pageData.category)}}function B(t){var n=e(this),r=n.find("input:radio[name=feedback_scope]:checked").val(),i=n.find("textarea[name=comment_text]"),s=i.val();n.find("input:hidden[name=path]").val(window.location.href),n.find("input:hidden[name=topictitle]").val(e(document).prop("title"));var o=e.parseURL(window.location.href);if(!/docs.*oracle\.com/.test(o.hostname))var u="https://docs.oracle.com/pls/tahiti/reader_comments";else var u="https://"+o.hostname+"/pls/tahiti/reader_comments";n.attr("action",u);if(s.trim().length===0||e(this).find("input:text[name=title]").val().trim().length===0)t.preventDefault(),n.fadeOut("fast"),n.promise().done(function(){e("#feedback-notready").fadeIn("fast",function(){e("#feedback-notready").delay(5e3).fadeOut("fast",function(){n.fadeIn("fast")})})});else{var a="XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest;n.fadeOut("fast"),r==="page"?i.val("This feedback is for the page being viewed.\n"+s):r==="document"&&i.val("This feedback is for the document being viewed.\n"+s);if(a){t.preventDefault();var f=e.post(u,n.find("[name=submitter], [name=comment_text], [name=title], [name=path], [name=topictitle]").serialize());n.promise().done(function(){f.done(function(){i.val(""),e(this).find("input:radio[name=feedback_scope]").first().prop("checked",!0),e(this).find("input:radio[name=submitter]").first().prop("checked",!0),e("#feedback-success").fadeIn("fast",function(){e("#feedback-success").delay(5e3).fadeOut("fast",function(){n.fadeIn("fast")})})}),f.fail(function(){i.val(s),e("#feedback-failure").fadeIn("fast",function(){e("#feedback-failure").delay(5e3).fadeOut("fast",function(){n.fadeIn("fast")})})})})}}}function j(){typeof hiddenDlink=="function"&&(e('article a[href$=".pdf"]').click(hiddenDlink),e('article a[href$=".mobi"]').click(hiddenDlink),e('article a[href$=".epub"]').click(hiddenDlink)),typeof s_Ping=="function"&&(s_PingOK=typeof s_PingOK!="undefined"?s_PingOK:!0,s_Ping(s_PingOK))}function F(t){var n={aboveScreen:[],onScreen:[]},r=e(window).scrollTop()-18,i=r+e(window).height(),s=null;for(var o=0;o<t.length;o++){var u=e(t[o]),a=u.offset().top;u.is(":empty")&&(a+=12),a>r&&a<i?n.onScreen.push(u):a<r&&n.aboveScreen.push(u)}return n.aboveScreen.sort(function(e,t){var n=e.offset().top,r=t.offset().top;return n<r?-1:n>r?1:0}),n.onScreen.sort(function(e,t){var n=e.offset().top,r=t.offset().top;return n<r?-1:n>r?1:0}),n}var o=e("head link[rel=contents]");if(o.length)var u=o.attr("href");else var u="toc.htm";e.fn.collapse.Constructor.TRANSITION_DURATION=100;var a=document.createElement("a");a.style.cssText="position: -webkit-sticky; position: -moz-sticky; position: -ms-sticky; position: -o-sticky; position: sticky;";var f=a.style.position.indexOf("sticky")!==-1;f&&e("html").addClass("csspositionsticky");var a=document.createElement("div");a.style.cssText="overflow-anchor: none";var l=a.style.overflowAnchor?!0:!1;r.registerHelper("if_eq",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),r.registerHelper("if_inspired",function(t){return e("html").hasClass("inspired")?t.fn(this):t.inverse(this)}),e.ajaxSetup({cache:!1}),E();var c=[],h=e.parseURL(window.location.href);if(window.top===window&&typeof h.params.embed=="undefined")var p=!1,d=0;else if(typeof h.params.embed!="undefined"&&h.params.embed==0)var p=!1,d=0;else if(typeof h.params.embed!="undefined")var p=!0,d=h.params.embed;else if(window.top!==window){var p=!0,v=e("head link[rel=prev]"),m=e("head link[rel=next]");if(v.length>0||m.length>0)var d=2;else var d=1}var g={};g.getTemplateData=function(){g.pageData={};var t=e("meta[name=application-name]");t.length?g.pageData.title=e(t[0]).attr("content"):g.pageData.title=e(document).prop("title"),g.pageData.user=i.getUserDetails();var r=e("link[rel=alternate]");r.length&&(g.pageData.tabdownload=[],r.each(function(){var t=e(this),n={};n.href=t.attr("href"),n.title=t.attr("title"),n.type=t.attr("type"),g.pageData.tabdownload.push(n)})),n.isOracle()&&(g.pageData.tabshare=!0);var s=e("meta[name=dcterms\\.dateCopyrighted]");s.length?g.pageData.copyright=e(s[0]).attr("content"):g.pageData.copyright=(new Date).getFullYear();var o=e("meta[name=dcterms\\.category]");o.length&&(g.pageData.category=e(o[0]).attr("content"));var u=e("meta[name=dcterms\\.product]");u.length&&(g.pageData.product=e(u[0]).attr("content"));var a=e("meta[name=dcterms\\.isVersionOf]");if(a.length){var f=e(a[0]).attr("content");f&&f.indexOf("-")===-1&&(g.pageData.book=f.toLowerCase())}return g.pageData},g.goToAnchor=function(t){e(window).off("scroll",b),e(window).off("resize",b);var n=document.getElementById(t);e(n).focus(),n!==document.activeElement&&(e(n).attr("tabindex",-1),e(n).focus()),e(n).offset()&&(e(window).width()<768&&e("html").hasClass("solution")?e(window).scrollTop(e(n).offset().top-55):e(window).scrollTop(e(n).offset().top+1)),e(window).scroll(b),e(window).resize(b)},g.handleInternalClick=function(t){if(t.which>1)return;if(!history.replaceState||!g.ajax)return;t.preventDefault(),t.stopImmediatePropagation();if(e("html").hasClass("solution")){var n=e("#navbar-collapse-2");n.is("[aria-expanded=true]")&&(e("#navbar-collapse-2").collapse("hide"),e("body").css("overflow",""))}var r=e.parseURL(window.location.href),i=e.parseURL(this.href),s=document.createElement("a");s.href="#";if(this.href===s.href||this.href==="#")return!0;if(r.target+"#"+r.hash==i.target+"#"+i.hash)i.hash?g.goToAnchor(i.hash):(e(window).width()<768||e(window).scrollTop()>e("article").offset().top)&&x();else if(r.target===i.target){i.hash?g.goToAnchor(i.hash):(e(window).width()<768||e(window).scrollTop()>e("article").offset().top)&&x();var o=e(this).attr("href"),u=e.parseURL(o);p&&(u.search?this.search+="&embed="+d:this.search="?embed="+d,o=e(this).attr("href")),history.pushState({href:o},null,o),O()}else{var o=this.href;p&&(i.search?this.search+="&embed="+d:this.search="?embed="+d,o=e(this).attr("href")),history.pushState({href:o},null,o),P(this.href)}},g.templateInit=function(){console.log("Start common.templateInit: "+Date.now());var t=[u],r=e("head link[rel=prev]");r.length&&t.push(r.attr("href"));var o=e("head link[rel=next]");o.length&&t.push(o.attr("href")),n.configure([],t);var a=g.loadToc();"scrollRestoration"in history&&(history.scrollRestoration="manual");var f=document.documentElement.style;"flexWrap"in f||"WebkitFlexWrap"in f||"msFlexWrap"in f?e("html").addClass("flexbox"):e("html").addClass("no-flexbox"),S(),p?d>1&&e("article").removeClass("embedded"):w(),window.onpopstate=function(t){if(!n.isUrlCurrent(e("article").data("id")))P(window.location.href);else{var r=e.parseURL(window.location.href);if(!r.hash){if(e(window).width()<768||e(window).scrollTop()>e("article").offset().top)e("html").hasClass("solution")?e(window).scrollTop(e("article").offset().top-25):e(window).scrollTop(e("article").offset().top+15)}else{var i=e("a[href="+location.hash.replace(/(:|\.|\[|\]|,|=|%|@)/g,"\\$1")+"][data-toggle=tab]");i.length?i.tab("show"):(g.goToAnchor(r.hash),O())}}},e("#tab-toc").length===0&&(e("li.ohc-menu-control-item.active").removeClass("active"),e(".ohc-menu").addClass("hidden")),e('[data-toggle="tooltip"]').tooltip({container:"body"}),p||(e(".ohc-menu-controls > nav > ul > li").clone(!0).appendTo("#navbar-collapse-1 .visible-xs-block"),N()),e("article").on("shown.bs.tab",'a[data-toggle="tab"]',function(t){!history.replaceState||(history.replaceState(null,null,e(t.target).attr("href")),j())});var v="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll MozMousePixelScroll";e(document).on(v,"#tab-toc.active",function(t){if(v=="wheel"){var n=t.originalEvent.deltaY;t.originalEvent.deltaMode==1?n*=18:t.originalEvent.deltaMode==2&&(n*=e(window).height())}else if(v=="mousewheel")var n=-1*t.originalEvent.wheelDelta;else var n=t.originalEvent.detail;return e("#tab-toc.active").scrollTop(e("#tab-toc.active").scrollTop()+n),t.preventDefault(),t.stopImmediatePropagation(),!1});if(!p){e("#search-form input[type=radio]").first().prop("checked",!0);if(!/docs.*oracle\.com/.test(h.hostname)&&e("#search-form").length>0){var m=e("#search-form").attr("action");e("#search-form").attr("action","https://docs.oracle.com"+m)}e("#search-form").submit(H),e("form.solution-search-form .dropdown-menu input[type=radio]").change(function(t){t.stopPropagation();var n=e(this).parent().text().trim();e(this).closest(".input-group").find(".form-control").attr("placeholder",n)}),e("form.solution-search-form .dropdown-menu *").click(function(e){e.stopPropagation()}),e("form.solution-search-form").on("submit",function(t){var n=e(this).find("input:text").val().trim(),r=e(this).find("input:checked").val();n.length<=0?t.preventDefault():r==="solutions"&&(t.preventDefault(),window.location.href="/"+s("dir")+"/solutions/solutions.html?search="+n)}),n.isOracle()&&(i.handleLogInOut(),e("html").hasClass("solution")?e("head").append('<link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon.ico"><link rel="icon" sizes="16x16 32x32 64x64" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon.ico"><link rel="icon" type="image/png" sizes="196x196" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-192.png"><link rel="icon" type="image/png" sizes="160x160" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-160.png"><link rel="icon" type="image/png" sizes="96x96" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-96.png"><link rel="icon" type="image/png" sizes="64x64" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-64.png"><link rel="icon" type="image/png" sizes="32x32" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-32.png"><link rel="icon" type="image/png" sizes="16x16" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-16.png"><link rel="apple-touch-icon" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-57.png"><link rel="apple-touch-icon" sizes="114x114" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-114.png"><link rel="apple-touch-icon" sizes="72x72" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-72.png"><link rel="apple-touch-icon" sizes="144x144" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-144.png"><link rel="apple-touch-icon" sizes="60x60" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-60.png"><link rel="apple-touch-icon" sizes="120x120" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-120.png"><link rel="apple-touch-icon" sizes="76x76" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-76.png"><link rel="apple-touch-icon" sizes="152x152" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-152.png"><link rel="apple-touch-icon" sizes="180x180" href="/sp_common/book-template/ohc-common/img/solution-icon/favicon-180.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/sp_common/book-template/ohc-common/img/solution-icon/favicon-144.png"><meta name="msapplication-config" content="/sp_common/book-template/ohc-common/img/solution-icon/browserconfig.xml">'):e("head").append('<link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/o-icon/favicon.ico"><link rel="icon" sizes="16x16 32x32 64x64" href="/sp_common/book-template/ohc-common/img/o-icon/favicon.ico"><link rel="icon" type="image/png" sizes="196x196" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-192.png"><link rel="icon" type="image/png" sizes="160x160" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-160.png"><link rel="icon" type="image/png" sizes="96x96" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-96.png"><link rel="icon" type="image/png" sizes="64x64" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-64.png"><link rel="icon" type="image/png" sizes="32x32" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-32.png"><link rel="icon" type="image/png" sizes="16x16" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-16.png"><link rel="apple-touch-icon" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-57.png"><link rel="apple-touch-icon" sizes="114x114" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-114.png"><link rel="apple-touch-icon" sizes="72x72" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-72.png"><link rel="apple-touch-icon" sizes="144x144" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-144.png"><link rel="apple-touch-icon" sizes="60x60" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-60.png"><link rel="apple-touch-icon" sizes="120x120" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-120.png"><link rel="apple-touch-icon" sizes="76x76" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-76.png"><link rel="apple-touch-icon" sizes="152x152" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-152.png"><link rel="apple-touch-icon" sizes="180x180" href="/sp_common/book-template/ohc-common/img/o-icon/favicon-180.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="/sp_common/book-template/ohc-common/img/o-icon/favicon-144.png"><meta name="msapplication-config" content="/sp_common/book-template/ohc-common/img/o-icon/browserconfig.xml">')),T();var y=e(window).width()-(e(".ohc-menu-controls").outerWidth()+e("article").outerWidth())-1;e(".ohc-menu").resizable({maxWidth:y,minWidth:200,handles:"e",create:function(t,n){e(this).parent().on("resize",function(e){e.stopPropagation()})},resize:e.throttle(50,function(t,n){e(this).find("> .tab-pane").outerWidth(n.size.width-1)})});function E(){var t=e(".ohc-menu");t.length&&(t.resizable("disable"),t.css("width",""),t.find("> .tab-pane").css("width",""))}e(window).width()<768&&E(),e(window).resize(e.throttle(50,function(){if(e(window).width()>=768){e(".ohc-menu").resizable("enable"),e("html").hasClass("flexbox")?e("article").css("min-height",e(window).height()-e("footer").height()+1+"px"):e("article").height(e(window).height()-e("footer").height()+1);var t=e(".ohc-menu");if(t.length){var n=e(window).width()-(e(".ohc-menu-controls").outerWidth()+e("article").outerWidth())-1;t.resizable("option","maxWidth",n);var r=t[0].style.width;r&&(r=parseInt(r,10),r>n&&(t.outerWidth(n),t.find("> .tab-pane").outerWidth(n-1)))}}else E();e("html").hasClass("solution")&&!p&&(e(window).width()>=768?(e("body").css("overflow",""),e.contains(document.getElementById("fixed-menu"),document.getElementById("tab-toc"))||e("#fixed-menu").append(e("#tab-toc"))):(e.contains(document.getElementById("fixed-menu"),document.getElementById("tab-toc"))&&e("#sitemap-tab").append(e("#tab-toc")),e("#navbar-collapse-2").attr("aria-expanded")==="false"?e("body").css("overflow",""):e("body").css("overflow","hidden")))})),e("#solutions-back-link").length&&typeof document.referrer!="undefined"&&document.referrer.length>0&&n.isUrlSameOrigin(document.referrer)&&e.parseURL(document.referrer).path.indexOf("solutions/solutions.html")!=-1&&e("#solutions-back-link").attr("href",document.referrer),e("#tab-toc").length&&(a.done(function(t){console.log("Finish common.loadToc: "+Date.now());if(e(window).width()<768){var n=e("article").offset().top;e(window).off("scroll",b),e(window).off("resize",b),e("html").hasClass("solution")&&e("#sitemap-tab").append(e("#tab-toc"))}document.getElementById("tab-toc").innerHTML=t;var r=e("#tab-toc ul a[href]"),i=r.not(":urlSameOrigin");i.attr("target","_blank");var s=r.filter(":urlSameOrigin");c=s.filter(":urlCurrent").toArray(),s.on("click",g.handleInternalClick),e("article a[href]:not([data-toggle])").filter(":urlInternal").on("click",g.handleInternalClick),e("#tab-toc > header").find('[data-toggle="tooltip"]').tooltip({container:"body"}),L(),_(!0);if(e(window).width()<768){e(window).scroll(b),e(window).resize(b);if(!l){var o=e("article").offset().top,u=o-n;e(window).scrollTop(e(window).scrollTop()+u)}}}),a.fail(function(t){e("#tab-toc").html(t)}));var x=e("#share-buttons");if(x.length){var C=location.href,k=e.parseURL(window.location.href);if(k.hostname.indexOf("docs-stage")===0||k.hostname.indexOf("docs-uat")===0)C="https://docs.oracle.com"+k.path;var A="https://api.addthis.com/oexchange/0.8/forward/",M="/offer?url="+encodeURIComponent(C)+"&pubid=ra-552992c80ef99c8d&ct=1&title="+encodeURIComponent(document.title)+"&pco=tbxnj-1.0";x.find(".fa-facebook").closest("a").attr("href",A+"facebook"+M),x.find(".fa-twitter").closest("a").attr("href",A+"twitter"+M),x.find(".fa-envelope").closest("a").attr("href",A+"email"+M),x.find(".fa-plus").closest("a").attr("href","https://www.addthis.com/bookmark.php?source=tbx32nj-1.0&v=300&url="+encodeURIComponent(C)+"&pubid=ra-552992c80ef99c8d&ct=1&title="+encodeURIComponent(document.title)+"&pco=tbxnj-1.0")}e("html.solution [data-toggle=tab]").click(function(t){t.preventDefault(),t.stopImmediatePropagation(),e(this).tab("show")}),e("html.solution #navbar-collapse-2").on("shown.bs.collapse",function(t){t.target==t.currentTarget&&e("body").css("overflow","hidden")}),e("html.solution #navbar-collapse-2").on("hidden.bs.collapse",function(t){t.target==t.currentTarget&&e("body").css("overflow","")});if(h.protocol.indexOf("http")==0&&e("html").hasClass("solution")){var D=[],B=window.location.pathname.split("/"),F=B[1];if(B.length>=3){var I=0;e.each(s.languages,function(t,n){B[1]=n.dir;var r=e.ajax({method:"HEAD",url:B.join("/"),cache:!1,context:this}).complete(function(t,n){t.status==200&&D.push(this);if(++I==s.languages.length&&D.length>=2){D.sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0});var r='<span class="pull-right lang-selector"><span role="presentation" class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" aria-label="Expand menu"><span><i class="fa fa-globe" aria-hidden="true"></i> '+s("Language")+"</span> "+'<span class="caret" aria-hidden="true"></span>'+"</a>"+'<div class="dropdown-menu dropdown-menu-right" aria-hidden="true" aria-label="'+s("Language")+'">'+'<ul class="cleanList">';for(var i=0;i<D.length;i++){var o=D[i];F==o.dir?r+='<li class="active"><span>'+s(o.label)+"</span> </li>":r+='<li><a class="lang-selector-link" data-dir="'+o.dir+'" href="#">'+s(o.label)+"</a></li>"}r+="</ul></div></span></span>",e("#banner-search").after(r),e(".navbar .lang-selector").addClass("hidden-xs navbar-text"),e("#sitemap-tab .breadcrumb").before(r),e("a.lang-selector-link").click(function(t){t.preventDefault(),t.stopImmediatePropagation();var n=e(this).data("dir"),r=window.location.pathname.split("/");r[1]=n,window.location.pathname=r.join("/")})}})})}}}h.protocol.indexOf("http")==0&&setTimeout(function(){e.getScript("//consent.truste.com/notice?domain=oracle.com&c=teconsent&js=bb&noticeType=bb&text=true")},200),console.log("Finish common.templateInit: "+Date.now())};var b=e.throttle(50,function(){y(),_()});return g.loadToc=function(){function t(t){function n(t,r,i,s,o){i==0?r.push("<ul id='"+s+"' class='treeroot tree' role='tree' aria-label='"+e(e.parseHTML(o)).text().replace(/'/g,"&#39;").replace(/\r?\n|\r/g," ").replace(/ +(?= )/g,"")+"' aria-activedescendant='"+s+"-node0'>"):r.push("<ul id='"+s+"' class='tree hide-group' role='group' aria-labelledby='"+s+"-entry'>");for(var u=0;u<t.length;u++){var a=s+(i==0?"-node":"-")+u,f=t[u];f.hasOwnProperty("topics")&&f.topics.length?(u==0&&i==0?r.push("<li aria-label='"+e(e.parseHTML(f.title)).text().replace(/'/g,"&#39;").replace(/\r?\n|\r/g," ").replace(/ +(?= )/g,"")+"' id='"+a+"' role='treeitem' aria-selected='true' tabindex='0' aria-level='"+(i+1)+"' class='hasChildren activedescendant' aria-expanded='false'>"):r.push("<li aria-label='"+e(e.parseHTML(f.title)).text().replace(/'/g,"&#39;").replace(/\r?\n|\r/g," ").replace(/ +(?= )/g,"")+"' id='"+a+"' role='treeitem' aria-selected='false' tabindex='-1' aria-level='"+(i+1)+"' class='hasChildren' aria-expanded='false'>"),r.push("<div aria-hidden='true' class='toggle collapsed'></div>")):u==0&&i==0?r.push("<li aria-label='"+e(e.parseHTML(f.title)).text().replace(/'/g,"&#39;").replace(/\r?\n|\r/g," ").replace(/ +(?= )/g,"")+"' id='"+a+"' role='treeitem' aria-selected='true' tabindex='0' aria-level='"+(i+1)+"' class='noChildren activedescendant'>"):r.push("<li aria-label='"+e(e.parseHTML(f.title)).text().replace(/'/g,"&#39;").replace(/\r?\n|\r/g," ").replace(/ +(?= )/g,"")+"' id='"+a+"' role='treeitem' aria-selected='false' tabindex='-1' aria-level='"+(i+1)+"' class='noChildren'>"),r.push("<span class='tocitem'>"),f.hasOwnProperty("href")?(r.push("<a href='"+f.href+"' id='"+a+"-entry' tabindex='-1'>"),r.push(f.title),r.push("</a>")):(r.push("<span id='"+a+"-entry' class='wrap'>"),r.push(f.title),r.push("</span>")),r.push("</span>"),f.hasOwnProperty("topics")&&f.topics.length&&n(f.topics,r,i+1,a),r.push("</li>")}r.push("</ul>")}var r=[];for(var i=0;i<t.toc.length;i++){var s=t.toc[i];if(i==0&&s.hasOwnProperty("heading")&&s.heading=="Table of Contents")var o="Introduction";else if(s.hasOwnProperty("heading"))var o=s.heading;else if(t.toc.length==1)var o="Table of Contents";else if(i==0)var o="Introduction";else var o="Section "+i;e("html").hasClass("solution")?r.push('<button class="toc-collapse-button collapsed" type="button" data-toggle="collapse" data-target="#treeview'+i+'" aria-expanded="false" aria-controls="treeview'+i+'">'+o+"</button>"):i==0?r.push('<header class="clearfix"><h2>'+o+'</h2><span class="controls"><a href="#" class="fa fa-plus-square" data-toggle="tooltip" data-placement="bottom" role="button" aria-label="Expand All" title="Expand All"></a><a class="sr-only">Expand All</a><a href="#" class="fa fa-minus-square" data-toggle="tooltip" data-placement="bottom" role="button" aria-label="Collapse All" "Collapse All"></a><a class="sr-only">Collapse All</a></span></header>'):r.push("<h2>"+o+"</h2>"),e("html").hasClass("solution")?r.push("<div class='treeview collapse toc-collapse-row' id='treeview"+i+"' aria-expanded='false'>"):r.push("<div class='treeview' id='treeview"+i+"'>"),s.hasOwnProperty("topics")&&s.topics.length&&n(s.topics,r,0,"tree"+i,o),r.push("</div>")}return r.join("")}console.log("Start common.loadToc: "+Date.now());var r=!1,i=e.Deferred();if(window.location.protocol=="file:"&&(window.ActiveXObject||"ActiveXObject"in window))try{var s=new ActiveXObject("Msxml2.XMLHTTP");r=!0}catch(o){var s=new XMLHttpRequest}else var s=new XMLHttpRequest;s.overrideMimeType&&s.overrideMimeType("text/plain"),s.onreadystatechange=function(){s.readyState===4&&(s.status===200||r&&s.status===0?i.resolve(s.responseText):i.reject())};try{s.open("GET",u,!0),s.send()}catch(a){i.reject()}var f=e.Deferred();return i.done(function(r){function i(t){var n={toc:[]},r=n.toc;if(e("html").hasClass("solution"))var i=t.find("article > h1, article > h2, article > h3, article > h4, article > ul, article > ul > li:has(>span)");else var i=t.find("article > h1, article > h2, article > h3, article > h4, article > header > h1, article > header > h2, article > header > h3, article > header > h4, article > ul");var o={};r.push(o);var u=0,a=0;for(var f=0;f<i.length;f++){var l=e(i[f]);if(i[f].nodeName.charAt(0)=="H")u>0&&(o={},r.push(o),u=0,a=0),u++,o.heading=l.html();else if(i[f].nodeName.charAt(0)=="L"){u>0&&(o={},r.push(o),u=0,a=0),u++;var c=l.find("> span");o.heading=c.prev().text()+c.html(),a++;var h=[];o.topics=h,s(c.next("ul"),h)}else{a>0&&(o={},r.push(o),u=0,a=0),a++;var h=[];o.topics=h,s(l,h)}}return n}function s(t,n){t.find("> li").each(function(){var t=e(this);if(t.not(":has(> span:not(.wrap))").length){var r={};n.push(r);var i=t.find("> a").first();if(i.length!=0)r.title=i.html(),r.href=i.attr("href");else{var o=t.find("> span.wrap").first();o.length!=0&&(r.title=o.html())}var u=t.find("> ul").first();if(u.length!=0){var a=[];r.topics=a,s(u,a)}}})}g.ajax=!0,r=r.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),r=r.replace(/<link rel="stylesheet"[^>]*>/gi,"");var o=e("<div></div>").html(r);n.configure(o.find("ul a[href]").filter(":urlSameOrigin"),[u]);var a=o.find("article");if(a.length!==1)require({baseUrl:"."},["toc"],function(r){var i=t(r),s=e("<div></div>").html(i);n.configure(s.find("ul a[href]").filter(":urlSameOrigin"),[u]),f.resolve(i)},function(e){f.reject("Unable to load Table of Contents")});else{var l=i(o);f.resolve(t(l))}}),i.fail(function(){g.ajax=!1,require({baseUrl:"."},["toc"],function(r){var i=t(r),s=e("<div></div>").html(i);n.configure(s.find("ul a[href]").filter(":urlSameOrigin"),[u]),f.resolve(i)},function(e){f.reject("Unable to load Table of Contents")})}),f.promise()},g.renderArticle=function(){console.log("Start common.renderArticle: "+Date.now()),e("article").data("id",location.href),c=e("#tab-toc ul a[href]").filter(":urlCurrent").toArray();if(location.hash){var t=e("a[href="+location.hash.replace(/(:|\.|\[|\]|,|=|%|@)/g,"\\$1")+"][data-toggle=tab]");t.length&&t.tab("show")}var r=e("head link[rel=prev]"),i=e("head link[rel=next]");if((!p||d!=1)&&(r.length>0||i.length>0)){var s=e("nav.ohc-pager");s.clone().removeClass("hidden").prependTo("article")}e("article a[name]").each(function(){var t=e(this);t.attr("id",t.attr("name"))}),e("article table").each(function(){var t=e(this).parent();t.is("div.table-responsive")||e(this).wrap('<div class="table-responsive"></div>')}),r.length&&(n.isUrlCurrent(r.attr("href"))||e("article .ohc-pager .previous").removeClass("disabled").find("a").attr("href",r.attr("href")).removeAttr("aria-hidden")),i.length&&(n.isUrlCurrent(i.attr("href"))||e("article .ohc-pager .next").removeClass("disabled").find("a").attr("href",i.attr("href")).removeAttr("aria-hidden")),e("article a[href]:not([data-toggle])").filter(":urlInternal").on("click",g.handleInternalClick),setTimeout(function(){D()},100),e("article a[href]:not([data-toggle])").filter(":urlNewTarget").each(function(){e(this).attr("target","_blank").addClass("new-window")}),console.log("Finish common.renderArticle: "+Date.now())},g.showArticle=function(t){console.log("Start common.showArticle: "+Date.now()),p||e(".ohc-menu-controls").css("height",""),e("article").fadeTo(0,1),e.when(e("article").promise()).then(function(){var n=e.parseURL(window.location.href);e(window).width()>=768&&!p&&(e("html").hasClass("flexbox")?e("article").css("min-height",e(window).height()-e("footer").height()+1+"px"):e("article").height(e(window).height()-e("footer").height()+1));var r=e("head link[rel=prev]"),i=e("head link[rel=next]");if((!p||d!=1)&&(r.length>0||i.length>0)){var s=0;e("article").children().each(function(){s+=e(this).outerHeight(!0)});var o=e("article nav.ohc-pager");s>200&&o.clone(!0).appendTo("article")}e(window).width()<=768&&!p&&e("article img[src]").one("load error",function(t){t.type=="load"&&this.naturalWidth>e(window).width()&&this.naturalWidth>this.width&&e(this).wrap("<a href='"+this.src+"' target='_blank' title='Open image in new window'></a>")}).each(function(){this.complete?e(this).trigger("load"):this.error&&e(this).trigger("error")});if(!n.hash)typeof t=="undefined"||t?x():e(window).width()<768?e("html").hasClass("solution")?e(window).scrollTop(e("article").offset().top-25):e(window).scrollTop(e("article").offset().top+15):e(window).scrollTop()>e("article").offset().top;else{var u=e("a[href="+n.hash.replace(/(:|\.|\[|\]|,|=|%|@)/g,"\\$1")+"][data-toggle=tab]");if(u.length)u.tab("show");else{g.goToAnchor(n.hash);var a=e("article img:not([height])"),f=0;if(a.length){var l=function(){g.goToAnchor(n.hash)};for(var c=0;c<a.length;c++)a[c].complete&&a[c].naturalWidth!==undefined?console.log("img already loaded"):(f++,e(a[c]).on("load",l),e(a[c]).on("error",l));f===0&&g.goToAnchor(n.hash)}}}y(),O(),e(window).scroll(b),e(window).resize(b),j()}),console.log("Finish common.showArticle: "+Date.now())},g.showError=function(){e("article").empty(),e("article").append("<div><p>The page failed to load.</p></div>"),e("article").append("<div><a href='"+location.href+"' id='reload'>Reload</a></div>"),e("#reload").on("click",function(e){if(e.which>1)return;e.preventDefault(),location.reload()}),e("article").fadeTo(0,1)},g}),define("text",["module"],function(e){"use strict";function v(e,t){return e===undefined||e===""?t:e}function m(e,t,n,r){if(t===r)return!0;if(e===n){if(e==="http")return v(t,"80")===v(r,"80");if(e==="https")return v(t,"443")===v(r,"443")}return!1}var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.15",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||m(s,u,n,i))):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]===""&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!../../ohc-common/templates/bookish.hbs",[],function(){return'<div class="ohc-grid">\n	<div role="banner">\n		<div>\n            <a href="#" class="offscreen skipto-top skipto">Skip to main content</a>\n			<nav class="navbar navbar-default">\n				<div class="container">\n					<div class="navbar-header">\n						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">\n							<span class="sr-only">Toggle navigation</span>\n							<span class="icon-bar"></span>\n							<span class="icon-bar"></span>\n							<span class="icon-bar"></span>\n						</button>\n						<a class="navbar-brand" href="/">\n							<span class="ohc-logo" role="img" aria-label="Oracle Help Center"></span>\n						</a>\n					</div>\n\n					<div class="collapse navbar-collapse" id="navbar-collapse-1">\n\n                        <p class="navbar-text navbar-right logged-in-content hidden"><span class="append-firstname-greeting"></span> <a class="logout-link" href="#">Sign Out</a></p>\n                        <p class="navbar-text navbar-right logged-out-content hidden"><a class="login-link" href="#"><i class="fa fa-user"></i> Sign In</a></p>\n\n						<ul class="nav navbar-nav visible-xs-block"></ul>\n\n					</div>\n				</div>\n			</nav>\n		</div>\n	</div>\n\n	<header>\n		<div>\n		<h1>{{{title}}}</h1>\n		</div>\n	</header>\n\n	<main>\n		<div>\n			<div class="ohc-grid">\n				<div>\n					<div class="ohc-menu-controls hidden-xs" role="tabpanel">\n						<nav>\n							<ul class="nav nav-pills nav-stacked" role="tablist">\n								{{#if tabtoc}}\n                                <li class="ohc-menu-control-item active" >\n									<a href="#tab-toc" role="button" aria-label="Table of Contents"  class="opener" title="Table of Contents" data-toggle="tooltip" data-placement="right" >\n										<span class="hidden-xs fa fa-list"></span>\n										<span class="ohc-navpill">Table of Contents</span>\n									</a>\n								</li>\n                {{/if}}\n								{{#if tabsearch}}\n								<li class="ohc-menu-control-item" >\n									<a href="#tab-search" role="button" aria-label="Search options" class="opener" title="Search" data-toggle="tooltip" data-placement="right" >\n										<span class="hidden-xs fa fa-search"></span>\n										<span class="ohc-navpill">Search</span>\n									</a>\n								</li>\n								{{/if}}\n								{{#if tabprint}}\n								<li class="ohc-menu-control-item" >\n									<a href="#tab-print" role="button" aria-label="Print options"  class="opener" title="Print" data-toggle="tooltip" data-placement="right" >\n										<span class="hidden-xs fa fa-print"></span>\n										<span class="ohc-navpill">Print</span>\n									</a>\n								</li>\n								{{/if}}\n								{{#if tabdownload}}\n								<li class="ohc-menu-control-item" >\n									<a href="#tab-download" role="button" aria-label="Download options" class="opener" title="Download" data-toggle="tooltip" data-placement="right" >\n										<span class="hidden-xs fa fa-download"></span>\n										<span class="ohc-navpill">Download</span>\n									</a>\n								</li>\n								{{/if}}\n								{{#if tabshare}}\n								<li class="ohc-menu-control-item" >\n									<a href="#tab-share" role="button" aria-label="Social media options" class="opener" title="Share" data-toggle="tooltip" data-placement="right" >\n										<span class="hidden-xs fa fa-share-alt"></span>\n										<span class="ohc-navpill">Share</span>\n									</a>\n								</li>\n								{{/if}}\n							</ul>\n						</nav>\n					</div>\n\n					<div class="ohc-menu hidden-print tab-content ">\n            {{#if tabtoc}}\n						<div role="tabpanel" class="tab-pane fade active in" id="tab-toc">\n							{{{tabtoc}}}\n						</div>\n            {{/if}}\n						{{#if tabsearch}}\n						<div role="tabpanel" class="tab-pane fade" id="tab-search">\n							<h2>Search</h2>\n							<form id="search-form" action="/apps/search/search.jsp" method="GET" target="_blank">\n								<div class="form-group">\n									<div class="input-group">\n										<input type="text" name="q" class="form-control" id="search-query" aria-label="Search Query Field" placeholder="Search for...">\n										<span class="input-group-btn">\n											<button type="submit" class="btn btn-primary" aria-label="Submit Search Query">\n												<span class="fa fa-search" aria-hidden="true"></span>\n												<span class="sr-only">Search</span>\n											</button>\n										</span>\n									</div>\n								</div>\n								{{#if book}}\n								<div class="radio">\n									<input type="radio" name="search-scope" id="search-scope-book" value="book">\n									<label for="search-scope-book">Search this book</label>\n								</div>\n								{{/if}}\n								{{#if product}}\n								<div class="radio">\n									<input type="radio" name="search-scope" id="search-scope-product" value="product">\n									<label for="search-scope-product">Search this product</label>\n								</div>\n								{{/if}}\n                {{#if category}}\n								<div class="radio">\n									<input type="radio" name="search-scope" id="search-scope-category" value="category">\n									<label for="search-scope-category">Search this category</label>\n								</div>\n								{{/if}}\n								<div class="radio">\n									<input type="radio" name="search-scope" id="search-scope-all" value="all">\n									<label for="search-scope-all">Search All Documentation</label>\n								</div>\n							</form>\n						</div>\n						{{/if}}\n						{{#if tabprint}}\n						<div role="tabpanel" class="tab-pane fade" id="tab-print">\n							<h2>Print</h2>\n							<button class="btn btn-primary" onclick="window.print()">Print this page</button>\n						</div>\n						{{/if}}\n						{{#if tabdownload}}\n						<div role="tabpanel" class="tab-pane fade" id="tab-download">\n							<h2>Download</h2>\n							{{#each tabdownload}}\n								{{#if_eq type "application/pdf"}}<p><a class="btn btn-primary" title={{title}} target="_blank" href="{{{href}}}">PDF</a> for offline and print</p>{{/if_eq}}\n								{{#if_eq type "application/x-mobipocket-ebook"}}<p><a class="btn btn-primary" title={{title}} target="_blank" href="{{{href}}}">Mobi</a> for Amazon Kindle</p>{{/if_eq}}\n								{{#if_eq type "application/epub+zip"}}<p><a class="btn btn-primary" title={{title}} target="_blank" href="{{{href}}}">ePub</a> for most mobile devices</p>{{/if_eq}}\n								{{#if_eq type "application/swagger+json"}}<p><a class="btn btn-primary" title={{title}} target="_blank" href="{{{href}}}">Swagger</a> for Swagger clients</p>{{/if_eq}}\n								{{#if_eq type "application/json"}}<p><a class="btn btn-primary" title={{title}} target="_blank" href="{{{href}}}">JSON</a></p>{{/if_eq}}\n								{{#if_eq type "application/xml"}}<p><a class="btn btn-primary" title={{title}} target="_blank" href="{{{href}}}">XML</a></p>{{/if_eq}}\n							{{/each}}\n						</div>\n						{{/if}}\n						{{#if tabshare}}\n						<div role="tabpanel" class="tab-pane fade" id="tab-share">\n							<h2>Share this page</h2>\n							<div id="share-buttons">\n								<a href="https://api.addthis.com/oexchange/0.8/forward/facebook/offer?url=http%3A%2F%2Fdocs.oracle.com&amp;pubid=ra-552992c80ef99c8d&amp;ct=1&amp;title=Oracle%20Help%20Center&amp;pco=tbxnj-1.0" target="_blank"><span class="fa-stack fa-2x" aria-hidden="true"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa fa-facebook fa-stack-1x"></i></span><span class="sr-only">Facebook</span></a>\n								<a href="https://api.addthis.com/oexchange/0.8/forward/twitter/offer?url=http%3A%2F%2Fdocs.oracle.com&amp;pubid=ra-552992c80ef99c8d&amp;ct=1&amp;title=Oracle%20Help%20Center&amp;pco=tbxnj-1.0" target="_blank"><span class="fa-stack fa-2x" aria-hidden="true"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x"></i></span><span class="sr-only">Twitter</span></a>\n								<a href="https://api.addthis.com/oexchange/0.8/forward/email/offer?url=http%3A%2F%2Fdocs.oracle.com&amp;pubid=ra-552992c80ef99c8d&amp;ct=1&amp;title=Oracle%20Help%20Center&amp;pco=tbxnj-1.0" target="_blank"><span class="fa-stack fa-2x" aria-hidden="true"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa fa-envelope fa-stack-1x"></i></span><span class="sr-only">Email</span></a>\n								<a href="https://www.addthis.com/bookmark.php?source=tbx32nj-1.0&amp;v=300&amp;url=http%3A%2F%2Fdocs.oracle.com&amp;pubid=ra-552992c80ef99c8d&amp;ct=1&amp;title=Oracle%20Help%20Center&amp;pco=tbxnj-1.0" target="_blank"><span class="fa-stack fa-2x" aria-hidden="true"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa fa-plus fa-stack-1x"></i></span></a>\n							</div>\n						</div>\n						{{/if}}\n					</div>\n\n					<article role="main">{{{article}}}</article>\n\n					<div><div><!-- resizable column --></div></div>\n				</div>\n			</div>\n		</div>\n	</main>\n	<a href="#" class="offscreen skipto-bottom skipto">Back to main content</a>\n\n	<footer>\n		<div>\n			<div class="container">\n				<div class="pull-left footer-left">\n					<ul class="footer-nav list-inline">\n							<li><a href="{{i18n \'https://www.oracle.com/corporate/\'}}">{{i18n \'About Oracle\'}}</a></li>\n							<li><a href="{{i18n \'https://www.oracle.com/corporate/contact/\'}}">{{i18n \'Contact Us\'}}</a></li>\n							<li><a href="{{i18n \'https://www.oracle.com/legal/privacy/\'}}">{{i18n \'Terms of Use and Privacy\'}}</a></li>\n							<li><div id="teconsent" style="display: inline-block;"></div></li>{{#if_mt}}\n							<li class="hidden"><a class="visible-xs-inline" target="_blank" href="{{i18n \'translation-survey\'}}">{{i18n \'Machine Translation Feedback\'}}</a><a class="hidden-xs" href="#" onclick="window.open(\'{{i18n \'translation-survey\'}}\', \'{{i18n \'Machine Translation Feeback Form\'}}\', \'width=600,height=480\');">{{i18n \'Machine Translation Feedback\'}}</a></li>{{/if_mt}}\n					</ul>\n					<span class="copyright"><a href="{{i18n \'https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr\'}}">{{i18n \'Copyright\'}} &copy; {{copyright}}, {{i18n \'Oracle and/or its affiliates.\'}}</a><a></a></span>\n				</div>\n			</div>\n		</div>\n	</footer>\n</div>\n\n<nav class="ohc-pager hidden-print hidden">\n	<ul class="pager">\n		<li class="previous disabled">\n			<a role="button" class="btn" aria-label="Previous" aria-hidden="true">\n				<span class="fa fa-chevron-left" aria-hidden="true"></span><span class="sr-only">Previous</span>\n			</a>\n		</li>\n		<li class="next disabled">\n			<a role="button" class="btn" aria-label="Next" aria-hidden="true">\n				<span class="fa fa-chevron-right" aria-hidden="true"></span><span class="sr-only">Next</span>\n			</a>\n		</li>\n	</ul>\n</nav>\n'}),define("text!../../ohc-common/templates/solution.hbs",[],function(){return'<div class="page-container">\n    <div id="banner2" role="banner">\n        <div>\n            <a href="#" class="offscreen skipto-top skipto">{{i18n \'Skip to main content\'}}</a>\n            <nav class="navbar navbar-default">\n                <div class="container">\n\n                    <div class="navbar-header">\n                        <a class="navbar-left" href="/">\n                            <span class="ohc-logo" role="img" aria-label="Oracle Help Center"></span>\n                        </a>\n                        <button id="navbar-menu-button" type="button" class="visible-xs-block pull-right collapsed" data-toggle="collapse" data-target="#navbar-collapse-2" aria-expanded="false" aria-controls="navbar-collapse-2">\n                            <span class="sr-only">Toggle navigation</span>\n                            <i class="fa fa-bars fa-2x fa-fw"></i>\n                        </button>\n                    </div>\n\n                    <form id="banner-search" class="solution-search-form form-inline hidden-xs pull-right" target="_blank" action="https://docs.oracle.com/apps/search/search.jsp" method="get">\n                        <div class="form-group">\n                            <div class="input-group">\n                                <input name="q" type="text" class="form-control" aria-label="Search Query Field" placeholder="{{i18n \'Search Solutions\'}}">\n                                <span class="input-group-btn">\n                                <button type="button" class="btn btn-default" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-chevron-down" aria-hidden="true"></span><span class="sr-only">{{i18n \'Options\'}}</span></button>\n                                <ul class="dropdown-menu dropdown-menu-right" aria-label="Search Options">\n                                    <li><label><input type="radio" name="search-options" value="solutions" checked="checked"> {{i18n \'Search Solutions\'}}</label></li>\n                                    <li><label><input type="radio" name="search-options" value="ohc"> {{i18n \'Search Help Center\'}}</label></li>\n                                </ul>\n\n                                <button type="submit" class="btn btn-default" aria-label="Submit Search Query">\n                                    <span class="fa fa-search" aria-hidden="true"></span>\n                                    <span class="sr-only">{{i18n \'Search\'}}</span>\n                                </button>\n                            </span>\n                            </div>\n                        </div>\n                        <input type="hidden" name="category" value="all">\n                    </form>\n\n\n                    <span class="hidden-xs navbar-text pull-right logged-in-content hidden">\n                        <span role="presentation" class="dropdown">\n                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" aria-label="Expand menu">\n                                <span class="append-firstname-greeting"></span> <span class="caret" aria-hidden="true"></span>\n                            </a>\n                            <div class="dropdown-menu dropdown-menu-right" aria-hidden="true" aria-label="user menu">\n                                <ul class="cleanList">\n                                    <li><a class="logout-link" href="#">{{i18n \'Sign Out\'}}</a></li>\n                                </ul>\n                            </div>\n                        </span>\n                    </span>\n                    <span class="hidden-xs navbar-text pull-right logged-out-content hidden"><a class="login-link" href="#"><i class="fa fa-user"></i> {{i18n \'Sign In\'}}</a></span>\n\n                    <div class="collapse" id="navbar-collapse-2" aria-expanded="false">\n                        <ul class="nav nav-pills nav-justified" role="tablist">\n                            <li role="presentation" class="active"><a href="#sitemap-tab" role="tab" data-toggle="tab" aria-controls="sitemap-tab" aria-expanded="true"><i class="fa fa-th-large fa-2x" aria-hidden="true"></i><span class="sr-only">Open Sitemap</span></a></li>\n                            <li role="presentation" class=""><a href="#search-tab" role="tab" data-toggle="tab" aria-controls="search-tab" aria-expanded="false"><i class="fa fa-search fa-2x" aria-hidden="true"></i><span class="sr-only">Open Search</span></a></li>\n                            <li role="presentation" class=""><a href="#user-tab" role="tab" data-toggle="tab" aria-controls="user-tab" aria-expanded="false"><i class="fa fa-user fa-2x" aria-hidden="true"></i><span class="sr-only">Open Account Settings</span></a></li>\n                        </ul>\n\n                        <!-- Tab panes -->\n                        <div id="mobile-tabs" class="tab-content">\n                            <div role="tabpanel" class="tab-pane active" id="sitemap-tab">\n                                <h2>{{{title}}}</h2>\n                            </div>\n                            <div role="tabpanel" class="tab-pane" id="search-tab">\n                                <h2>{{i18n \'Search\'}}</h2>\n                                <form class="solution-search-form" target="_blank" action="https://docs.oracle.com/apps/search/search.jsp" method="get">\n                                    <div class="form-group">\n                                        <div class="input-group">\n                                            <input name="q" type="text" class="form-control" aria-label="Search Query Field" placeholder="{{i18n \'Search Solutions\'}}">\n                                            <span class="input-group-btn">\n                                            <button type="button" class="btn btn-default" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="fa fa-chevron-down" aria-hidden="true"></span><span class="sr-only">{{i18n \'Options\'}}</span></button>\n                                            <ul class="dropdown-menu dropdown-menu-right" aria-label="Search Options">\n                                                <li><label><input type="radio" name="search-options2" value="solutions" checked="checked"> {{i18n \'Search Solutions\'}}</label></li>\n                                                <li><label><input type="radio" name="search-options2" value="ohc"> {{i18n \'Search Help Center\'}}</label></li>\n                                            </ul>\n\n                                            <button type="submit" class="btn btn-default" aria-label="Submit Search Query">\n                                                <span class="fa fa-search" aria-hidden="true"></span>\n                                                <span class="sr-only">{{i18n \'Search\'}}</span>\n                                            </button>\n                                        </span>\n                                        </div>\n                                    </div>\n                                    <input type="hidden" name="category" value="all">\n                                </form>\n                            </div>\n                            <div role="tabpanel" class="tab-pane" id="user-tab">\n                                <div class="logged-in-content hidden">\n                                <h2>Oracle Account</h2>\n                                <p class="text-center"><span class="append-firstname-greeting">{{i18n \'Welcome\'}} </span></p>\n                                <p class="text-center"><a class="logout-link btn" href="#">{{i18n \'Sign Out\'}}</a></p>\n                                <p class="text-center"><a onclick="this.href=this.href+\'?nexturl=\'+window.location.href" href="https://profile.oracle.com/myprofile/account/secure/update-account.jspx">Account</a> | <a href="https://www.oracle.com/corporate/contact/help.html">Help</a></p>\n                                <hr/>\n                                </div>\n                                <div class="logged-out-content hidden">\n                                <h2>Oracle Account</h2>\n                                <p class="text-center >\n                                    <a class="login-link btn" href="#">{{i18n \'Sign In\'}}</a>\n                                </p>\n                                <hr>\n                                </div>\n                                <h2>Cloud Account</h2>\n                                <p class="text-center">Access your cloud dashboard, manage orders, and more.</p>\n                                <p class="text-center"><a class="btn" href="https://cloud.oracle.com/sign-in">{{i18n \'Sign In\'}}</a><p>\n                                <p class="text-center"><a href="https://cloud.oracle.com/tryit?intcmp=ohc-header">Sign Up - Free Trial</a></p>\n                            </div>\n                        </div>\n\n\n                    </div>\n                </div>\n            </nav>\n        </div>\n    </div>\n\n    <div id="hero-blue">\n        <div class="container">\n            <!-- <img class="pull-right hidden-xs hidden-sm" src="/en/dcommon/img/4-cloud.png" alt="" aria-hidden="true"> -->\n            {{#if_inspired}}\n            <div class="row">\n              <div class="col-lg-9"><h1>{{{title}}}</h1></div>\n              <div class="col-lg-3"><span class="winspired">{{i18n \'CUSTOMER-INSPIRED\'}}</span></div>\n            </div>\n            {{else}}\n            <h1>{{{title}}}</h1>\n            {{/if_inspired}}\n        </div>\n    </div>\n\n\n\n    <main class="container">\n    <div id="content-row" class="row">\n\n        <div id="fixed-menu" class="col-md-4 col-xl-3 hidden-sm hidden-print">\n                <div style="margin-top: 16px; margin-bottom: 16px;">\n                    <a id="solutions-back-link" href="/{{i18n \'dir\'}}/solutions/solutions.html"><i class="fa fa-chevron-left" aria-hidden="true"></i> {{i18n \'Back to Solutions\'}}</a>\n                </div>\n                {{#if_mt}}<p class="text-center"><b>{{i18n \'This page was machine translated.\'}}</b></p>{{/if_mt}}\n                <div id="tab-toc">\n                    <p class="text-center">\n                        <span class="fa fa-spinner fa-pulse fa-3x fa-fw" aria-hidden="true"></span>\n                        <span class="sr-only">Loading...</span>\n                    </p>\n                </div>\n                {{#if tabdownload}}\n                <ul class="list-inline text-right hidden-xs" style="margin-top:16px;">{{#each tabdownload}}<!--\n                 -->{{#if_eq type "application/pdf"}}<li><a aria-label="{{title}} PDF" target="_blank" href="{{{href}}}"><i class="fa fa-2x fa-file-pdf-o" aria-hidden="true" title="PDF"></i><span class="sr-only">PDF</span></a></li>{{/if_eq}}<!--\n                 -->{{#if_eq type "application/x-mobipocket-ebook"}}<li><a aria-label="{{title}} Mobi" target="_blank" href="{{{href}}}"><i class="fa fa-2x fa-file-text-o" aria-hidden="true" title="Mobi"></i><span class="sr-only">Mobi</span></a></li>{{/if_eq}}<!--\n                 -->{{#if_eq type "application/epub+zip"}}<li><a aria-label="{{title}} ePub" target="_blank" href="{{{href}}}"><i class="fa fa-2x fa-file-text-o" aria-hidden="true" title="ePub"></i><span class="sr-only">ePub</span></a></li>{{/if_eq}}<!--\n                 -->{{#if_eq type "application/swagger+json"}}<li><a aria-label="{{title}} Swagger" target="_blank" href="{{{href}}}"><i class="fa fa-2x fa-file-o" aria-hidden="true" title="Swagger"></i><span class="sr-only">Swagger</span></a></li>{{/if_eq}}<!--\n                 -->{{#if_eq type "application/json"}}<li><a aria-label="{{title}} JSON" target="_blank" href="{{{href}}}"><i class="fa fa-2x fa-file-o" aria-hidden="true" title="JSON"></i><span class="sr-only">JSON</span></a></li>{{/if_eq}}<!--\n                 -->{{#if_eq type "application/xml"}}<li><a aria-label="{{title}} XML" target="_blank" href="{{{href}}}"><i class="fa fa-2x fa-file-code-o" aria-hidden="true" title="XML"></i><span class="sr-only">XML</span></a></li>{{/if_eq}}<!--\n                 -->{{/each}}</ul>\n                {{/if}}\n        </div>\n\n        <div class="col-md-8 col-xl-9">\n            <article role="main">{{{article}}}</article>{{#if disclaimers}}\n            <div id="disclaimers">{{{disclaimers}}}</div>{{/if}}\n            <footer class="text-center">\n                <ul class="footer-nav list-inline">\n                    <li><a href="{{i18n \'https://www.oracle.com/corporate/\'}}">{{i18n \'About Oracle\'}}</a></li>\n                    <li><a href="{{i18n \'https://www.oracle.com/corporate/contact/\'}}">{{i18n \'Contact Us\'}}</a></li>\n                    <li><a href="{{i18n \'https://www.oracle.com/legal/privacy/\'}}">{{i18n \'Terms of Use and Privacy\'}}</a></li>\n                    <li><div id="teconsent" style="display: inline-block;"></div></li>{{#if_mt}}\n                    <li class="hidden"><a class="visible-xs-inline" target="_blank" href="{{i18n \'translation-survey\'}}">{{i18n \'Machine Translation Feedback\'}}</a><a class="hidden-xs" href="#" onclick="window.open(\'{{i18n \'translation-survey\'}}\', \'{{i18n \'Machine Translation Feeback Form\'}}\', \'width=600,height=480\');">{{i18n \'Machine Translation Feedback\'}}</a></li>{{/if_mt}}\n                </ul>\n                <span class="copyright"><a href="{{i18n \'https://docs.oracle.com/pls/topic/lookup?ctx=en/legal&id=cpyr\'}}">{{i18n \'Copyright\'}} &copy; {{copyright}}, {{i18n \'Oracle and/or its affiliates.\'}}</a><a></a></span>\n            </footer>\n        </div>\n    </div>\n    </main>\n\n    <a href="#" class="offscreen skipto-bottom skipto">{{i18n \'Back to main content\'}}</a>\n\n</div>\n\n<nav class="ohc-pager hidden-print hidden">\n	<ul class="pager">\n		<li class="previous disabled">\n			<a role="button" class="btn" aria-label="{{i18n \'Previous\'}}" aria-hidden="true">\n				<span class="fa fa-chevron-left" aria-hidden="true"></span><span class="sr-only">{{i18n \'Previous\'}}</span>\n			</a>\n		</li>\n        <li class="toc visible-sm-inline">\n            <a role="button" class="btn" aria-label="{{i18n \'Table of contents\'}}" href="toc.htm">\n                <span class="fa fa-list-alt" aria-hidden="true"></span><span class="sr-only">{{i18n \'Table of contents\'}}</span>\n            </a>\n        </li>\n		<li class="next disabled">\n			<a role="button" class="btn" aria-label="{{i18n \'Next\'}}" aria-hidden="true">\n				<span class="fa fa-chevron-right" aria-hidden="true"></span><span class="sr-only">{{i18n \'Next\'}}</span>\n			</a>\n		</li>\n	</ul>\n</nav>\n'}),define("text!../../ohc-common/templates/embed.hbs",[],function(){return'<article role="main" class="embedded clearfix">{{{article}}}</article>\n\n<div id="tab-toc" class="hidden">{{{tabtoc}}}</div>\n\n<nav class="ohc-pager hidden-print hidden">\n	<ul class="pager">\n        <li class="previous disabled">\n			<a role="button" class="btn" aria-label="Previous" aria-hidden="true">\n				<span class="fa fa-chevron-left" aria-hidden="true"></span><span class="sr-only">Previous</span>\n			</a>\n		</li>\n        <li class="toc">\n			<a type="button" class="btn" aria-label="Table of contents" href="toc.htm">\n				<span class="fa fa-list-alt" aria-hidden="true"></span><span class="sr-only">Table of contents</span>\n			</a>\n		</li>\n		<li class="next disabled">\n			<a role="button" class="btn" aria-label="Next" aria-hidden="true">\n				<span class="fa fa-chevron-right" aria-hidden="true"></span><span class="sr-only">Next</span>\n			</a>\n		</li>\n	</ul>\n</nav>\n'}),define("text!../../ohc-common/templates/videomodal.html",[],function(){return'<div class="modal" id="videoModal" role="dialog" aria-labelledby="videoModalLabel">\r\n  <div class="modal-dialog modal-lg" role="document">\r\n    <div class="modal-content">\r\n      <div class="modal-header" style="background-color: #000; color: #eee;">\r\n        <button type="button" class="close" style="color: #eee; background-color: #000; opacity: 1;" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n        <div class="modal-title h4" id="videoModalLabel">Video</div>\r\n      </div>\r\n      <div class="modal-body" style="padding: 0px; background-color: #000;">\r\n        <div class="embed-responsive embed-responsive-16by9">\r\n		  <iframe class="embed-responsive-item"></iframe>\r\n		</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}),window.STENCIL_PATH=window.STENCIL_PATH||"https://www.draw.io/stencils",window.SHAPES_PATH=window.SHAPES_PATH||"https://www.draw.io/shapes",window.mxBasePath=window.mxBasePath||"https://www.draw.io/mxgraph/",window.mxLoadStylesheets=window.mxLoadStylesheets||!1,!function(e,t){e.Spinner=t()}(this,function(){"use strict";function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,r){var i=["opacity",t,~~(100*e),n,r].join("-"),s=.01+n/r*100,o=Math.max(1-(1-e)/t*(100-s),e),u=f.substring(0,f.indexOf("Animation")).toLowerCase(),a=u&&"-"+u+"-"||"";return c[i]||(h.insertRule("@"+a+"keyframes "+i+"{0%{opacity:"+o+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}100%{opacity:"+o+"}}",h.cssRules.length),c[i]=1),i}function r(e,t){var n,r,i=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<l.length;r++)if(n=l[r]+t,void 0!==i[n])return n;return void 0!==i[t]?t:void 0}function i(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function o(e,t){return"string"==typeof e?e:e[t%e.length]}function u(e){this.opts=s(e||{},u.defaults,p)}function a(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}h.addRule(".spin-vml","behavior:url(#default#VML)"),u.prototype.lines=function(e,r){function s(){return i(n("group",{coordsize:l+" "+l,coordorigin:-f+" "+ -f}),{width:l,height:l})}function u(e,u,a){t(h,t(i(s(),{rotation:360/r.lines*e+"deg",left:~~u}),t(i(n("roundrect",{arcsize:r.corners}),{width:f,height:r.width,left:r.radius,top:-r.width>>1,filter:a}),n("fill",{color:o(r.color,e),opacity:r.opacity}),n("stroke",{opacity:0}))))}var a,f=r.length+r.width,l=2*f,c=2*-(r.width+r.length)+"px",h=i(s(),{position:"absolute",top:c,left:c});if(r.shadow)for(a=1;a<=r.lines;a++)u(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=r.lines;a++)u(a);return t(e,h)},u.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var f,l=["webkit","Moz","ms","O"],c={},h=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};u.defaults={},s(u.prototype,{spin:function(t){this.stop();var n=this,r=n.opts,s=n.el=i(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});r.radius+r.length+r.width;if(t&&(t.insertBefore(s,t.firstChild||null),i(s,{left:r.left,top:r.top})),s.setAttribute("role","progressbar"),n.lines(s,n.opts),!f){var o,u=0,a=(r.lines-1)*(1-r.direction)/2,l=r.fps,c=l/r.speed,h=(1-r.opacity)/(c*r.trail/100),p=c/r.lines;!function d(){u++;for(var e=0;e<r.lines;e++)o=Math.max(1-(u+(r.lines-e)*p)%c*h,r.opacity),n.opacity(s,e*r.direction+a,o,r);n.timeout=n.el&&setTimeout(d,~~(1e3/l))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,s){function u(t,n){return i(e(),{position:"absolute",width:s.length+s.width+"px",height:s.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*l+s.rotate)+"deg) translate("+s.radius+"px,0)",borderRadius:(s.corners*s.width>>1)+"px"})}for(var a,l=0,c=(s.lines-1)*(1-s.direction)/2;l<s.lines;l++)a=i(e(),{position:"absolute",top:1+~(s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:f&&n(s.opacity,s.trail,c+l*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&t(a,i(u("#000","0 0 4px #000"),{top:"2px"})),t(r,t(a,u(o(s.color,l),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var d=i(e("group"),{behavior:"url(#default#VML)"});return!r(d,"transform")&&d.adj?a():f=r(d,"animation"),u}),function(){var e=void 0,t=!0,n=null,r=!1,i=["aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,snow,springgreen,steelblue,tan,teal,thistle,tomato,transparent,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen".split(","),"all-scroll,col-resize,crosshair,default,e-resize,hand,help,move,n-resize,ne-resize,no-drop,not-allowed,nw-resize,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,vertical-text,w-resize,wait".split(","),"armenian,decimal,decimal-leading-zero,disc,georgian,lower-alpha,lower-greek,lower-latin,lower-roman,square,upper-alpha,upper-latin,upper-roman".split(","),"100,200,300,400,500,600,700,800,900,bold,bolder,lighter".split(","),"block-level,inline-level,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row,table-row-group".split(","),"condensed,expanded,extra-condensed,extra-expanded,narrower,semi-condensed,semi-expanded,ultra-condensed,ultra-expanded,wider".split(","),"inherit,inline,inline-block,inline-box,inline-flex,inline-grid,inline-list-item,inline-stack,inline-table,run-in".split(","),"behind,center-left,center-right,far-left,far-right,left-side,leftwards,right-side,rightwards".split(","),"large,larger,small,smaller,x-large,x-small,xx-large,xx-small".split(","),"dashed,dotted,double,groove,outset,ridge,solid".split(","),"ease,ease-in,ease-in-out,ease-out,linear,step-end,step-start".split(","),"at,closest-corner,closest-side,ellipse,farthest-corner,farthest-side".split(","),"baseline,middle,sub,super,text-bottom,text-top".split(","),"caption,icon,menu,message-box,small-caption,status-bar".split(","),"fast,faster,slow,slower,x-fast,x-slow".split(","),["above","below","higher","level","lower"],["cursive","fantasy","monospace","sans-serif","serif"],["loud","silent","soft","x-loud","x-soft"],["no-repeat","repeat-x","repeat-y","round","space"],["blink","line-through","overline","underline"],["block","flex","grid","table"],["high","low","x-high","x-low"],["nowrap","pre","pre-line","pre-wrap"],["absolute","relative","static"],["alternate","alternate-reverse","reverse"],["border-box","content-box","padding-box"],["capitalize","lowercase","uppercase"],["child","female","male"],["=","opacity"],["backwards","forwards"],["bidi-override","embed"],["bottom","top"],["break-all","keep-all"],["clip","ellipsis"],["contain","cover"],["continuous","digits"],["end","start"],["flat","preserve-3d"],["hide","show"],["horizontal","vertical"],["inside","outside"],["italic","oblique"],["left","right"],["ltr","rtl"],["no-content","no-display"],["paused","running"],["suppress","unrestricted"],["thick","thin"],[","],["/"],["all"],["always"],["auto"],["avoid"],["both"],["break-word"],["center"],["circle"],["code"],["collapse"],["contents"],["fixed"],["hidden"],["infinite"],["inset"],["invert"],["justify"],["list-item"],["local"],["medium"],["mix"],["none"],["normal"],["once"],["repeat"],["scroll"],["separate"],["small-caps"],["spell-out"],["to"],["visible"]],s={animation:{cssPropBits:517,cssLitGroup:[i[10],i[24],i[29],i[45],i[48],i[54],i[63],i[71],i[72]],cssFns:["cubic-bezier()","steps()"]},"animation-delay":{cssPropBits:5,cssLitGroup:[i[48]],cssFns:[]},"animation-direction":{cssPropBits:0,cssLitGroup:[i[24],i[48],i[72]],cssFns:[]},"animation-duration":"animation-delay","animation-fill-mode":{cssPropBits:0,cssLitGroup:[i[29],i[48],i[54],i[71]],cssFns:[]},"animation-iteration-count":{cssPropBits:5,cssLitGroup:[i[48],i[63]],cssFns:[]},"animation-name":{cssPropBits:512,cssLitGroup:[i[48],i[71]],cssFns:[]},"animation-play-state":{cssPropBits:0,cssLitGroup:[i[45],i[48]],cssFns:[]},"animation-timing-function":{cssPropBits:0,cssLitGroup:[i[10],i[48]],cssFns:["cubic-bezier()","steps()"]},appearance:{cssPropBits:0,cssLitGroup:[i[71]],cssFns:[]},azimuth:{cssPropBits:5,cssLitGroup:[i[7],i[42],i[56]],cssFns:[]},"backface-visibility":{cssPropBits:0,cssLitGroup:[i[59],i[62],i[80]],cssFns:[]},background:{cssPropBits:23,cssLitGroup:[i[0],i[18],i[25],i[31],i[34],i[42],i[48],i[49],i[52],i[56],i[61],i[68],i[71],i[74],i[75]],cssFns:"image(),linear-gradient(),radial-gradient(),repeating-linear-gradient(),repeating-radial-gradient(),rgb(),rgba()".split(",")},"background-attachment":{cssPropBits:0,cssLitGroup:[i[48],i[61],i[68],i[75]],cssFns:[]},"background-color":{cssPropBits:2,cssLitGroup:[i[0]],cssFns:["rgb()","rgba()"]},"background-image":{cssPropBits:16,cssLitGroup:[i[48],i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"background-position":{cssPropBits:5,cssLitGroup:[i[31],i[42],i[48],i[56]],cssFns:[]},"background-repeat":{cssPropBits:0,cssLitGroup:[i[18],i[48],i[74]],cssFns:[]},"background-size":{cssPropBits:5,cssLitGroup:[i[34],i[48],i[52]],cssFns:[]},border:{cssPropBits:7,cssLitGroup:[i[0],i[9],i[47],i[62],i[64],i[69],i[71]],cssFns:["rgb()","rgba()"]},"border-bottom":"border","border-bottom-color":"background-color","border-bottom-left-radius":{cssPropBits:5,cssFns:[]},"border-bottom-right-radius":"border-bottom-left-radius","border-bottom-style":{cssPropBits:0,cssLitGroup:[i[9],i[62],i[64],i[71]],cssFns:[]},"border-bottom-width":{cssPropBits:5,cssLitGroup:[i[47],i[69]],cssFns:[]},"border-collapse":{cssPropBits:0,cssLitGroup:[i[59],i[76]],cssFns:[]},"border-color":"background-color","border-left":"border","border-left-color":"background-color","border-left-style":"border-bottom-style","border-left-width":"border-bottom-width","border-radius":{cssPropBits:5,cssLitGroup:[i[49]],cssFns:[]},"border-right":"border","border-right-color":"background-color","border-right-style":"border-bottom-style","border-right-width":"border-bottom-width","border-spacing":"border-bottom-left-radius","border-style":"border-bottom-style","border-top":"border","border-top-color":"background-color","border-top-left-radius":"border-bottom-left-radius","border-top-right-radius":"border-bottom-left-radius","border-top-style":"border-bottom-style","border-top-width":"border-bottom-width","border-width":"border-bottom-width",bottom:{cssPropBits:5,cssLitGroup:[i[52]],cssFns:[]},box:{cssPropBits:0,cssLitGroup:[i[60],i[71],i[72]],cssFns:[]},"box-shadow":{cssPropBits:7,cssLitGroup:[i[0],i[48],i[64],i[71]],cssFns:["rgb()","rgba()"]},"box-sizing":{cssPropBits:0,cssLitGroup:[i[25]],cssFns:[]},"caption-side":{cssPropBits:0,cssLitGroup:[i[31]],cssFns:[]},clear:{cssPropBits:0,cssLitGroup:[i[42],i[54],i[71]],cssFns:[]},clip:{cssPropBits:0,cssLitGroup:[i[52]],cssFns:["rect()"]},color:"background-color",content:{cssPropBits:8,cssLitGroup:[i[71],i[72]],cssFns:[]},cue:{cssPropBits:16,cssLitGroup:[i[71]],cssFns:[]},"cue-after":"cue","cue-before":"cue",cursor:{cssPropBits:16,cssLitGroup:[i[1],i[48],i[52]],cssFns:[]},direction:{cssPropBits:0,cssLitGroup:[i[43]],cssFns:[]},display:{cssPropBits:0,cssLitGroup:[i[4],i[6],i[20],i[52],i[67],i[71]],cssFns:[]},"display-extras":{cssPropBits:0,cssLitGroup:[i[67],i[71]],cssFns:[]},"display-inside":{cssPropBits:0,cssLitGroup:[i[20],i[52]],cssFns:[]},"display-outside":{cssPropBits:0,cssLitGroup:[i[4],i[71]],cssFns:[]},elevation:{cssPropBits:5,cssLitGroup:[i[15]],cssFns:[]},"empty-cells":{cssPropBits:0,cssLitGroup:[i[38]],cssFns:[]},filter:{cssPropBits:0,cssFns:["alpha()"]},"float":{cssPropBits:0,cssLitGroup:[i[42],i[71]],cssFns:[]},font:{cssPropBits:73,cssLitGroup:[i[3],i[8],i[13],i[16],i[41],i[48],i[49],i[69],i[72],i[77]],cssFns:[]},"font-family":{cssPropBits:72,cssLitGroup:[i[16],i[48]],cssFns:[]},"font-size":{cssPropBits:1,cssLitGroup:[i[8],i[69]],cssFns:[]},"font-stretch":{cssPropBits:0,cssLitGroup:[i[5],i[72]],cssFns:[]},"font-style":{cssPropBits:0,cssLitGroup:[i[41],i[72]],cssFns:[]},"font-variant":{cssPropBits:0,cssLitGroup:[i[72],i[77]],cssFns:[]},"font-weight":{cssPropBits:0,cssLitGroup:[i[3],i[72]],cssFns:[]},height:"bottom",left:"bottom","letter-spacing":{cssPropBits:5,cssLitGroup:[i[72]],cssFns:[]},"line-height":{cssPropBits:1,cssLitGroup:[i[72]],cssFns:[]},"list-style":{cssPropBits:16,cssLitGroup:[i[2],i[40],i[57],i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-image":{cssPropBits:16,cssLitGroup:[i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-position":{cssPropBits:0,cssLitGroup:[i[40]],cssFns:[]},"list-style-type":{cssPropBits:0,cssLitGroup:[i[2],i[57],i[71]],cssFns:[]},margin:"bottom","margin-bottom":"bottom","margin-left":"bottom","margin-right":"bottom","margin-top":"bottom","max-height":{cssPropBits:1,cssLitGroup:[i[52],i[71]],cssFns:[]},"max-width":"max-height","min-height":{cssPropBits:1,cssLitGroup:[i[52]],cssFns:[]},"min-width":"min-height",opacity:{cssPropBits:1,cssFns:[]},outline:{cssPropBits:7,cssLitGroup:[i[0],i[9],i[47],i[62],i[64],i[65],i[69],i[71]],cssFns:["rgb()","rgba()"]},"outline-color":{cssPropBits:2,cssLitGroup:[i[0],i[65]],cssFns:["rgb()","rgba()"]},"outline-style":"border-bottom-style","outline-width":"border-bottom-width",overflow:{cssPropBits:0,cssLitGroup:[i[52],i[62],i[75],i[80]],cssFns:[]},"overflow-wrap":{cssPropBits:0,cssLitGroup:[i[55],i[72]],cssFns:[]},"overflow-x":{cssPropBits:0,cssLitGroup:[i[44],i[52],i[62],i[75],i[80]],cssFns:[]},"overflow-y":"overflow-x",padding:"opacity","padding-bottom":"opacity","padding-left":"opacity","padding-right":"opacity","padding-top":"opacity","page-break-after":{cssPropBits:0,cssLitGroup:[i[42],i[51],i[52],i[53]],cssFns:[]},"page-break-before":"page-break-after","page-break-inside":{cssPropBits:0,cssLitGroup:[i[52],i[53]],cssFns:[]},pause:"border-bottom-left-radius","pause-after":"border-bottom-left-radius","pause-before":"border-bottom-left-radius",perspective:{cssPropBits:5,cssLitGroup:[i[71]],cssFns:[]},"perspective-origin":{cssPropBits:5,cssLitGroup:[i[31],i[42],i[56]],cssFns:[]},pitch:{cssPropBits:5,cssLitGroup:[i[21],i[69]],cssFns:[]},"pitch-range":"border-bottom-left-radius","play-during":{cssPropBits:16,cssLitGroup:[i[52],i[70],i[71],i[74]],cssFns:[]},position:{cssPropBits:0,cssLitGroup:[i[23]],cssFns:[]},quotes:{cssPropBits:8,cssLitGroup:[i[71]],cssFns:[]},resize:{cssPropBits:0,cssLitGroup:[i[39],i[54],i[71]],cssFns:[]},richness:"border-bottom-left-radius",right:"bottom",speak:{cssPropBits:0,cssLitGroup:[i[71],i[72],i[78]],cssFns:[]},"speak-header":{cssPropBits:0,cssLitGroup:[i[51],i[73]],cssFns:[]},"speak-numeral":{cssPropBits:0,cssLitGroup:[i[35]],cssFns:[]},"speak-punctuation":{cssPropBits:0,cssLitGroup:[i[58],i[71]],cssFns:[]},"speech-rate":{cssPropBits:5,cssLitGroup:[i[14],i[69]],cssFns:[]},stress:"border-bottom-left-radius","table-layout":{cssPropBits:0,cssLitGroup:[i[52],i[61]],cssFns:[]},"text-align":{cssPropBits:0,cssLitGroup:[i[42],i[56],i[66]],cssFns:[]},"text-decoration":{cssPropBits:0,cssLitGroup:[i[19],i[71]],cssFns:[]},"text-indent":"border-bottom-left-radius","text-overflow":{cssPropBits:8,cssLitGroup:[i[33]],cssFns:[]},"text-shadow":"box-shadow","text-transform":{cssPropBits:0,cssLitGroup:[i[26],i[71]],cssFns:[]},"text-wrap":{cssPropBits:0,cssLitGroup:[i[46],i[71],i[72]],cssFns:[]},top:"bottom",transform:{cssPropBits:0,cssLitGroup:[i[71]],cssFns:"matrix(),perspective(),rotate(),rotate3d(),rotatex(),rotatey(),rotatez(),scale(),scale3d(),scalex(),scaley(),scalez(),skew(),skewx(),skewy(),translate(),translate3d(),translatex(),translatey(),translatez()".split(",")},"transform-origin":"perspective-origin","transform-style":{cssPropBits:0,cssLitGroup:[i[37]],cssFns:[]},transition:{cssPropBits:1029,cssLitGroup:[i[10],i[48],i[50],i[71]],cssFns:["cubic-bezier()","steps()"]},"transition-delay":"animation-delay","transition-duration":"animation-delay","transition-property":{cssPropBits:1024,cssLitGroup:[i[48],i[50]],cssFns:[]},"transition-timing-function":"animation-timing-function","unicode-bidi":{cssPropBits:0,cssLitGroup:[i[30],i[72]],cssFns:[]},"vertical-align":{cssPropBits:5,cssLitGroup:[i[12],i[31]],cssFns:[]},visibility:"backface-visibility","voice-family":{cssPropBits:8,cssLitGroup:[i[27],i[48]],cssFns:[]},volume:{cssPropBits:1,cssLitGroup:[i[17],i[69]],cssFns:[]},"white-space":{cssPropBits:0,cssLitGroup:[i[22],i[72]],cssFns:[]},width:"min-height","word-break":{cssPropBits:0,cssLitGroup:[i[32],i[72],i[55]],cssFns:[]},"word-spacing":"letter-spacing","word-wrap":"overflow-wrap","z-index":"bottom",zoom:"line-height","cubic-bezier()":"animation-delay","steps()":{cssPropBits:5,cssLitGroup:[i[36],i[48]],cssFns:[]},"image()":{cssPropBits:18,cssLitGroup:[i[0],i[48]],cssFns:["rgb()","rgba()"]},"linear-gradient()":{cssPropBits:7,cssLitGroup:[i[0],i[31],i[42],i[48],i[79]],cssFns:["rgb()","rgba()"]},"radial-gradient()":{cssPropBits:7,cssLitGroup:[i[0],i[11],i[31],i[42],i[48],i[56],i[57]],cssFns:["rgb()","rgba()"]},"repeating-linear-gradient()":"linear-gradient()","repeating-radial-gradient()":"radial-gradient()","rgb()":{cssPropBits:1,cssLitGroup:[i[48]],cssFns:[]},"rgba()":"rgb()","rect()":{cssPropBits:5,cssLitGroup:[i[48],i[52]],cssFns:[]},"alpha()":{cssPropBits:1,cssLitGroup:[i[28]],cssFns:[]},"matrix()":"animation-delay","perspective()":"border-bottom-left-radius","rotate()":"border-bottom-left-radius","rotate3d()":"animation-delay","rotatex()":"border-bottom-left-radius","rotatey()":"border-bottom-left-radius","rotatez()":"border-bottom-left-radius","scale()":"animation-delay","scale3d()":"animation-delay","scalex()":"border-bottom-left-radius","scaley()":"border-bottom-left-radius","scalez()":"border-bottom-left-radius","skew()":"animation-delay","skewx()":"border-bottom-left-radius","skewy()":"border-bottom-left-radius","translate()":"animation-delay","translate3d()":"animation-delay","translatex()":"border-bottom-left-radius","translatey()":"border-bottom-left-radius","translatez()":"border-bottom-left-radius"},o;for(o in s)"string"==typeof s[o]&&Object.hasOwnProperty.call(s,o)&&(s[o]=s[s[o]]);"undefined"!=typeof window&&(window.cssSchema=s);var u,a;(function(){function e(e){var t=parseInt(e.substring(1),16);return 65535<t?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(t&1023))):t==t?String.fromCharCode(t):" ">e[1]?"":e[1]}function t(e,t){return'"'+e.replace(/[\u0000-\u001f\\\"<>]/g,t)+'"'}function n(e){return i[e]||(i[e]="\\"+e.charCodeAt(0).toString(16)+" ")}function r(e){return s[e]||(s[e]=("">e?"%0":"%")+e.charCodeAt(0).toString(16))}var i={"\\":"\\\\"},s={"\\":"%5c"},o=RegExp("\\uFEFF|U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?|url[(][\\t\\n\\f ]*(?:\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)[\\t\\n\\f ]*[)]|(?!url[(])-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*[(]|(?:@?-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))|#)(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*|\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)(?:%|-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)?|<!--|-->|[\\t\\n\\f ]+|/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)|[~|^$*]=|[^\"'\\\\/]|/(?![/*])","gi"),f=RegExp("\\\\(?:(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff])|[\\n\\f])","g"),l=RegExp("^url\\([\\t\\n\\f ]*[\"']?|[\"']?[\\t\\n\\f ]*\\)$","gi");a=function(t){return t.replace(f,e)},u=function(e){for(var e=(""+e).replace(/\r\n?/g,"\n").match(o)||[],i=0,s=" ",u=0,f=e.length;u<f;++u){var c=a(e[u]),h=c.length,p=c.charCodeAt(0),c=34==p||39==p?t(c.substring(1,h-1),n):47==p&&1<h||"\\"==c||"-->"==c||"<!--"==c||""==c||32>=p?" ":/url\(/i.test(c)?"url("+t(c.replace(l,""),r)+")":c;if(s!=c||" "!=c)e[i++]=s=c}return e.length=i,e}})(),"undefined"!=typeof window&&(window.lexCss=u,window.decodeCss=a);var f=function(){function e(e){return e=(""+e).match(l),e?new o(u(e[1]),u(e[2]),u(e[3]),u(e[4]),u(e[5]),u(e[6]),u(e[7])):n}function t(e,t){return"string"==typeof e?encodeURI(e).replace(t,r):n}function r(e){return e=e.charCodeAt(0),"%"+"0123456789ABCDEF".charAt(e>>4&15)+"0123456789ABCDEF".charAt(e&15)}function i(e){if(e===n)return n;for(var e=e.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/"),t=a,r;(r=e.replace(t,"$1"))!=e;e=r);return e}function s(e,t){var n=e.T(),r=t.K();r?n.ga(t.j):r=t.X(),r?n.da(t.n):r=t.Y(),r?n.ea(t.k):r=t.$();var s=t.g,o=i(s);if(r)n.ca(t.V()),o=o&&o.replace(f,"");else if(r=!!s){if(47!==o.charCodeAt(0))var o=i(n.g||"").replace(f,""),u=o.lastIndexOf("/")+1,o=i((u?o.substring(0,u):"")+i(s)).replace(f,"")}else o=o&&o.replace(f,""),o!==s&&n.G(o);return r?n.G(o):r=t.aa(),r?n.O(t.l):r=t.Z(),r&&n.fa(t.o),n}function o(e,t,n,r,i,s,o){this.j=e,this.n=t,this.k=n,this.h=r,this.g=i,this.l=s,this.o=o}function u(e){return"string"==typeof e&&0<e.length?e:n}var a=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),f=/^(?:\.\.\/)*(?:\.\.$)?/;o.prototype.toString=function(){var e=[];return n!==this.j&&e.push(this.j,":"),n!==this.k&&(e.push("//"),n!==this.n&&e.push(this.n,"@"),e.push(this.k),n!==this.h&&e.push(":",this.h.toString())),n!==this.g&&e.push(this.g),n!==this.l&&e.push("?",this.l),n!==this.o&&e.push("#",this.o),e.join("")},o.prototype.T=function(){return new o(this.j,this.n,this.k,this.h,this.g,this.l,this.o)},o.prototype.W=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()},o.prototype.ga=function(e){this.j=e?e:n},o.prototype.K=function(){return n!==this.j},o.prototype.da=function(e){this.n=e?e:n},o.prototype.X=function(){return n!==this.n},o.prototype.ea=function(e){this.k=e?e:n,this.G(this.g)},o.prototype.Y=function(){return n!==this.k},o.prototype.V=function(){return this.h&&decodeURIComponent(this.h)},o.prototype.ca=function(e){if(e){e=Number(e);if(e!==(e&65535))throw Error("Bad port number "+e);this.h=""+e}else this.h=n},o.prototype.$=function(){return n!==this.h},o.prototype.U=function(){return this.g&&decodeURIComponent(this.g)},o.prototype.G=function(e){e?(e=""+e,this.g=!this.k||/^\//.test(e)?e:"/"+e):this.g=n},o.prototype.O=function(e){this.l=e?e:n},o.prototype.aa=function(){return n!==this.l},o.prototype.ba=function(e){if("object"==typeof e&&!(e instanceof Array)&&(e instanceof Object||"[object Array]"!==Object.prototype.toString.call(e))){var t=[],n=-1,r;for(r in e){var i=e[r];"string"==typeof i&&(t[++n]=r,t[++n]=i)}e=t}for(var t=[],n="",s=0;s<e.length;)r=e[s++],i=e[s++],t.push(n,encodeURIComponent(r.toString())),n="&",i&&t.push("=",encodeURIComponent(i.toString()));this.l=t.join("")},o.prototype.fa=function(e){this.o=e?e:n},o.prototype.Z=function(){return n!==this.o};var l=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,c=/[#\/\?@]/g,h=/[\#\?]/g;return o.parse=e,o.create=function(e,i,s,u,a,f,l){return e=new o(t(e,c),t(i,c),"string"==typeof s?encodeURIComponent(s):n,0<u?u.toString():n,t(a,h),n,"string"==typeof l?encodeURIComponent(l):n),f&&("string"==typeof f?e.O(f.replace(/[^?&=0-9A-Za-z_\-~.%]/g,r)):e.ba(f)),e},o.N=s,o.ma=i,o.ha={ua:function(t){return/\.html$/.test(e(t).U())?"text/html":"application/javascript"},N:function(t,n){return t?s(e(t),e(n)).toString():""+n}},o}();"undefined"!=typeof window&&(window.URI=f);var l=e,c=e,h=e,p=e;(function(){function i(e){return"string"==typeof e?'url("'+e.replace(y,o)+'")':'url("about:blank")'}function o(e){return b[e]}function u(e,t){return e?f.ha.N(e,t):t}function v(e,t,r){if(!r)return n;var i=(""+e).match(w);return i&&(!i[1]||E.test(i[1]))?r(e,t):n}function g(e){return e.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,"")}var y=/[\n\f\r\"\'()*<>]/g,b={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"},w=/^(?:([^:/?# ]+):)?/,E=/^(?:https?|mailto|data)$/i;l=function(){var e={};return function t(n,r,o,f,l){var n=g(n),c=s[n];if(!c||"object"!=typeof c)r.length=0;else{for(var h=c.cssPropBits,p=h&80,d=h&1536,m=NaN,y=0,b=0;y<r.length;++y){var w=r[y].toLowerCase(),E=w.charCodeAt(0),S,x,T,N,C,k;if(32===E)w="";else if(34===E)w=16===p?o?i(v(u(f,a(r[y].substring(1,w.length-1))),n,o)):"":h&8&&!(p&p-1)?w:"";else if("inherit"!==w){if(C=c.cssLitGroup){var A;if(!(A=c.cssLitMap)){A={};for(var O=C.length;0<=--O;)for(var _=C[O],D=_.length;0<=--D;)A[_[D]]=e;A=c.cssLitMap=A}C=A}else C=e;if(k=C,k[g(w)]!==e)if(35===E&&/^#(?:[0-9a-f]{3}){1,2}$/.test(w))w=h&2?w:"";else if(48<=E&&57>=E)w=h&1?w:"";else if(S=w.charCodeAt(1),x=w.charCodeAt(2),T=48<=S&&57>=S,N=48<=x&&57>=x,43===E&&(T||46===S&&N))w=h&1?(T?"":"0")+w.substring(1):"";else if(45===E&&(T||46===S&&N))w=h&4?(T?"-":"-0")+w.substring(1):h&1?"0":"";else if(46===E&&T)w=h&1?"0"+w:"";else if('url("'===w.substring(0,5))w=o&&h&16?i(v(u(f,r[y].substring(5,w.length-2)),n,o)):"";else if("("===w.charAt(w.length-1))e:{C=r,A=y,w=1,O=A+1;for(E=C.length;O<E&&w;)_=C[O++],w+=")"===_?-1:/^[^"']*\($/.test(_);if(!w){w=C[A].toLowerCase(),E=g(w),C=C.splice(A,O-A,""),A=c.cssFns,O=0;for(_=A.length;O<_;++O)if(A[O].substring(0,E.length)==E){C[0]=C[C.length-1]="",t(A[O],C,o,f),w=w+C.join(" ")+")";break e}}w=""}else w=d&&/^-?[a-z_][\w\-]*$/.test(w)&&!/__$/.test(w)?l&&512===d?r[y]+l:1024===d&&s[w]&&"number"==typeof s[w].oa?w:"":/^\w+$/.test(w)&&64===p&&h&8?m+1===b?(r[m]=r[m].substring(0,r[m].length-1)+" "+w+'"',""):(m=b,'"'+w+'"'):""}w&&(r[b++]=w)}1===b&&'url("about:blank")'===r[0]&&(b=0),r.length=b}}}();var S=RegExp("^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$"),x={};x[">"]=x["+"]=x["~"]=x,c=function(e,i,s){function o(o,c){function h(n,s,o){var u,l,c,h,d,v=t;u="",n<s&&((d=e[n],"*"===d)?(++n,u=d):/^[a-zA-Z]/.test(d)&&(l=f(d.toLowerCase(),[]))&&("tagName"in l&&(d=l.tagName),++n,u=d));for(h=c=l="";v&&n<s;++n)if(d=e[n],"#"===d.charAt(0))/^#_|__$|[^\w#:\-]/.test(d)?v=r:l+=d+a;else if("."===d)++n<s&&/^[0-9A-Za-z:_\-]+$/.test(d=e[n])&&!/^_|__$/.test(d)?l+="."+d:v=r;else if(n+1<s&&"["===e[n]){++n;var g=e[n++].toLowerCase();d=m.m[u+"::"+g],d!==+d&&(d=m.m["*::"+g]);var y;i.ia?(y=i.ia(u,g),"string"!=typeof y&&(v=r,y=g),v&&d!==+d&&(d=m.d.NONE)):(y=g,d!==+d&&(v=r));var b=g="",w=r;/^[~^$*|]?=$/.test(e[n])&&(g=e[n++],b=e[n++],/^[0-9A-Za-z:_\-]+$/.test(b)?b='"'+b+'"':"]"===b&&(b='""',--n),/^"([^\"\\]|\\.)*"$/.test(b)||(v=r),(w="i"===e[n])&&++n),"]"!==e[n]&&(++n,v=r);switch(d){case m.d.CLASSES:case m.d.LOCAL_NAME:case m.d.NONE:break;case m.d.GLOBAL_NAME:case m.d.ID:case m.d.IDREF:"="!==g&&"~="!==g&&"$="!==g||'""'==b||!!w?"|="===g||""===g||(v=r):b='"'+b.substring(1,b.length-1)+a+'"';break;case m.d.URI:case m.d.URI_FRAGMENT:""!==g&&(v=r);break;default:v=r}v&&(c+="["+y.replace(/[^\w-]/g,"\\$&")+g+b+(w?" i]":"]"))}else{if(!(n<s&&":"===e[n]))break;if(d=e[++n],!S.test(d))break;h+=":"+d}return n!==s&&(v=r),v&&(n=(u+l).replace(/[^ .*#\w-]/g,"\\$&")+c+h+o)&&p.push(n),v}" "===e[o]&&++o,c-1!==o&&" "===e[c]&&--c;for(var p=[],d=o,v=t,g=o;v&&g<c;++g){var y=e[g];if(x[y]===x||" "===y)h(d,g,y)?d=g+1:v=r}return h(d,c,"")||(v=r),v?(p.length&&(d=p.join(""),u!==n&&(d="."+u+" "+d),l.push(d)),t):!s||s(e.slice(o,c))}var u=i.na,a=i.L,f=i.Aa,l=[],c=0,h,p=0,d;for(h=0;h<e.length;++h)if(d=e[h],"("==d||"["==d?(++p,t):")"==d||"]"==d?(p&&--p,t):" "!=e[h]||!p&&x[e[h-1]]!==x&&x[e[h+1]]!==x)e[c++]=e[h];e.length=c,c=e.length;for(h=p=0;h<c;++h)if(","===e[h]){if(!o(p,h))return n;p=h+1}return o(p,c)?l:n},function(){var e=/^\w/,t=RegExp("^(?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*)(?: , (?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*))*$","i");p=function(n){for(var n=n.slice(),r=n.length,i=0,s=0;s<r;++s){var o=n[s];" "!=o&&(n[i++]=o)}return n.length=i,n=n.join(" "),n=n.length?t.test(n)?e.test(n)?n:"not all , "+n:"not all":""}}(),function(){function i(e){var t=/^\s*[']([^']*)[']\s*$/,r=/^\s*url\s*[(]["]([^"]*)["][)]\s*$/,i=/^\s*url\s*[(][']([^']*)['][)]\s*$/,s=/^\s*url\s*[(]([^)]*)[)]\s*$/,o;return(o=/^\s*["]([^"]*)["]\s*$/.exec(e))||(o=t.exec(e))||(o=r.exec(e))||(o=i.exec(e))||(o=s.exec(e))?o[1]:n}function s(o,a,f,h,m,g,y){function b(){x=S.length&&S[S.length-1]===n}var w=e,E=y||[0],S=[],x=r;return d(a,{startStylesheet:function(){w=[]},endStylesheet:function(){},startAtrule:function(e,t){if(x)e=n;else if("@media"===e)w.push("@media"," ",p(t));else if("@keyframes"===e||"@-webkit-keyframes"===e){var r=t[0];1===t.length&&!/__$|[^\w\-]/.test(r)?(w.push(e," ",r+f.L),e="@keyframes"):e=n}else if("@import"===e&&0<t.length)if(e=n,"function"==typeof g){var a=p(t.slice(1));if("not all"!==a){++E[0];var l=[];w.push(l);var c=v(u(o,i(t[0])),function(e){var t=s(c,e.qa,f,h,m,g,E);--E[0],e=a?{toString:function(){return"@media "+a+" {"+t.result+"}"}}:t.result,l[0]=e,g(e,!!E[0])},m)}}else window.console&&window.console.log("@import "+t.join(" ")+" elided");x=!e,S.push(e)},endAtrule:function(){S.pop(),x||w.push(";"),b()},startBlock:function(){x||w.push("{")},endBlock:function(){x||(w.push("}"),x=t)},startRuleset:function(r){if(!x){var i=e;"@keyframes"===S[S.length-1]?(i=r.join(" ").match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),x=!i,i&&(i=i[0].replace(/ +/g,""))):(r=c(r,f),!r||!r.length?x=t:i=r.join(", ")),x||w.push(i,"{")}S.push(n)},endRuleset:function(){S.pop(),x||w.push("}"),b()},declaration:function(e,n){if(!x){var i=r,s=n.length;2<=s&&"!"===n[s-2]&&"important"===n[s-1].toLowerCase()&&(i=t,n.length-=2),l(e,n,h,o,f.L),n.length&&w.push(e,":",n.join(" "),i?" !important;":";")}}}),{result:{toString:function(){return w.join("")}},va:!!E[0]}}h=function(t,n,r,i){return s(t,n,r,i,e,e).result.toString()}}()})(),"undefined"!=typeof window&&(window.sanitizeCssProperty=l,window.sanitizeCssSelectorList=c,window.sanitizeStylesheet=h,window.sanitizeMediaQuery=p);var d,v;(function(){function e(e,t,r,i,s){for(var o=t++;t<r&&"{"!==e[t]&&";"!==e[t];)++t;if(t<r&&(s||";"===e[t])){var s=o+1,u=t;s<r&&" "===e[s]&&++s,u>s&&" "===e[u-1]&&--u,i.startAtrule&&i.startAtrule(e[o].toLowerCase(),e.slice(s,u)),t="{"===e[t]?n(e,t,r,i):t+1,i.endAtrule&&i.endAtrule()}return t}function n(t,s,o,u){++s;for(u.startBlock&&u.startBlock();s<o;){var a=t[s].charAt(0);if("}"==a){++s;break}s=" "===a||";"===a?s+1:"@"===a?e(t,s,o,u,r):"{"===a?n(t,s,o,u):i(t,s,o,u)}return u.endBlock&&u.endBlock(),s}function i(e,n,r,i){var o=n,u=s(e,n,r,t);if(0>u)return u=~u,u===o?u+1:u;var f=e[u];if("{"!==f)return u===o?u+1:u;n=u+1,u>o&&" "===e[u-1]&&--u;for(i.startRuleset&&i.startRuleset(e.slice(o,u));n<r;){f=e[n];if("}"===f){++n;break}n=" "===f?n+1:a(e,n,r,i)}return i.endRuleset&&i.endRuleset(),n}function s(e,t,n,r){for(var i,s=[],o=-1;t<n;++t)if(i=e[t].charAt(0),"["===i||"("===i)s[++o]=i;else if("]"===i&&"["===s[o]||")"===i&&"("===s[o])--o;else if("{"===i||"}"===i||";"===i||"@"===i||":"===i&&!r)break;return 0<=o&&(t=~(t+1)),t}function o(e,t,n){for(;t<n&&";"!==e[t]&&"}"!==e[t];)++t;return t<n&&";"===e[t]?t+1:t}function a(e,t,n,i){var u=e[t++];if(!f.test(u))return o(e,t,n);t<n&&" "===e[t]&&++t;if(t==n||":"!==e[t])return o(e,t,n);++t,t<n&&" "===e[t]&&++t;var a=s(e,t,n,r);if(0>a)a=~a;else{for(var l=[],c=0,h=t;h<a;++h)t=e[h]," "!==t&&(l[c++]=t);if(a<n){do{t=e[a];if(";"===t||"}"===t)break;c=0}while(++a<n);";"===t&&++a}c&&i.declaration&&i.declaration(u.toLowerCase(),l)}return a}d=function(n,r){var s=u(n);r.startStylesheet&&r.startStylesheet();for(var o=0,a=s.length;o<a;)o=" "===s[o]?o+1:o<a?"@"===s[o].charAt(0)?e(s,o,a,r,t):i(s,o,a,r):o;r.endStylesheet&&r.endStylesheet()};var f=/^-?[a-z]/i;v=function(e,t){for(var n=u(e),r=0,i=n.length;r<i;)r=" "!==n[r]?a(n,r,i,t):r+1}})(),"undefined"!=typeof window&&(window.parseCssStylesheet=d,window.parseCssDeclarations=v);var m={d:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}};m.atype=m.d,m.m={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0},m.ATTRIBS=m.m,m.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},m.eflags=m.c,m.f={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2},m.ELEMENTS=m.f,m.Q={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},m.ELEMENT_DOM_INTERFACES=m.Q,m.P={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},m.ueffects=m.P,m.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1},m.URIEFFECTS=m.J,m.M={UNSANDBOXED:2,SANDBOXED:1,DATA:0},m.ltypes=m.M,m.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2},m.LOADERTYPES=m.I,"undefined"!=typeof window&&(window.html4=m);var g=function(i){function s(e){if(N.hasOwnProperty(e))return N[e];var t=e.match(k);return t?String.fromCharCode(parseInt(t[1],10)):(t=e.match(L))?String.fromCharCode(parseInt(t[1],16)):O&&A.test(e)?(O.innerHTML="&"+e+";",t=O.textContent,N[e]=t):"&"+e+";"}function o(e,t){return s(t)}function u(e){return e.replace(_,o)}function a(e){return(""+e).replace(P,"&amp;").replace(B,"&lt;").replace(j,"&gt;").replace(F,"&#34;")}function l(e){return e.replace(H,"&amp;$1").replace(B,"&lt;").replace(j,"&gt;")}function c(e){var t={z:e.z||e.cdata,A:e.A||e.comment,B:e.B||e.endDoc,t:e.t||e.endTag,e:e.e||e.pcdata,F:e.F||e.rcdata,H:e.H||e.startDoc,w:e.w||e.startTag};return function(e,i){var s,o=/(<\/|<\!--|<[!?]|[&<>])/g;s=e+"";if(q)s=s.split(o);else{for(var u=[],a=0,f;(f=o.exec(s))!==n;)u.push(s.substring(a,f.index)),u.push(f[0]),a=f.index+f[0].length;u.push(s.substring(a)),s=u}p(t,s,0,{r:r,C:r},i)}}function h(e,t,n,r,i){return function(){p(e,t,n,r,i)}}function p(e,n,r,s,o){try{e.H&&0==r&&e.H(o);for(var u,a,f,l=n.length;r<l;){var c=n[r++],p=n[r];switch(c){case"&":D.test(p)?(e.e&&e.e("&"+p,o,U,h(e,n,r,s,o)),r++):e.e&&e.e("&amp;",o,U,h(e,n,r,s,o));break;case"</":if(u=/^([-\w:]+)[^\'\"]*/.exec(p))if(u[0].length===p.length&&">"===n[r+1])r+=2,f=u[1].toLowerCase(),e.t&&e.t(f,o,U,h(e,n,r,s,o));else{var m=n,g=r,y=e,b=o,w=U,E=s,S=v(m,g);S?(y.t&&y.t(S.name,b,w,h(y,m,g,E,b)),r=S.next):r=m.length}else e.e&&e.e("&lt;/",o,U,h(e,n,r,s,o));break;case"<":if(u=/^([-\w:]+)\s*\/?/.exec(p))if(u[0].length===p.length&&">"===n[r+1]){r+=2,f=u[1].toLowerCase(),e.w&&e.w(f,[],o,U,h(e,n,r,s,o));var x=i.f[f];x&R&&(r=d(n,{name:f,next:r,c:x},e,o,U,s))}else{var m=n,g=e,y=o,b=U,w=s,T=v(m,r);T?(g.w&&g.w(T.name,T.R,y,b,h(g,m,T.next,w,y)),r=T.c&R?d(m,T,g,y,b,w):T.next):r=m.length}else e.e&&e.e("&lt;",o,U,h(e,n,r,s,o));break;case"<!--":if(!s.C){for(a=r+1;a<l&&(">"!==n[a]||!/--$/.test(n[a-1]));a++);if(a<l){if(e.A){var N=n.slice(r,a).join("");e.A(N.substr(0,N.length-2),o,U,h(e,n,a+1,s,o))}r=a+1}else s.C=t}s.C&&e.e&&e.e("&lt;!--",o,U,h(e,n,r,s,o));break;case"<!":if(/^\w/.test(p)){if(!s.r){for(a=r+1;a<l&&">"!==n[a];a++);a<l?r=a+1:s.r=t}s.r&&e.e&&e.e("&lt;!",o,U,h(e,n,r,s,o))}else e.e&&e.e("&lt;!",o,U,h(e,n,r,s,o));break;case"<?":if(!s.r){for(a=r+1;a<l&&">"!==n[a];a++);a<l?r=a+1:s.r=t}s.r&&e.e&&e.e("&lt;?",o,U,h(e,n,r,s,o));break;case">":e.e&&e.e("&gt;",o,U,h(e,n,r,s,o));break;case"":break;default:e.e&&e.e(c,o,U,h(e,n,r,s,o))}}e.B&&e.B(o)}catch(C){if(C!==U)throw C}}function d(e,t,n,r,s,o){var u=e.length;z.hasOwnProperty(t.name)||(z[t.name]=RegExp("^"+t.name+"(?:[\\s\\/]|$)","i"));for(var a=z[t.name],f=t.next,c=t.next+1;c<u&&("</"!==e[c-1]||!a.test(e[c]));c++);c<u&&(c-=1),u=e.slice(f,c).join("");if(t.c&i.c.CDATA)n.z&&n.z(u,r,s,h(n,e,c,o,r));else{if(!(t.c&i.c.RCDATA))throw Error("bug");n.F&&n.F(l(u),r,s,h(n,e,c,o,r))}return c}function v(e,n){var s=/^([-\w:]+)/.exec(e[n]),o={};o.name=s[1].toLowerCase(),o.c=i.f[o.name];for(var a=e[n].substr(s[0].length),f=n+1,l=e.length;f<l&&">"!==e[f];f++)a+=e[f];if(!(l<=f)){for(var c=[];""!==a;)if(s=I.exec(a))if(s[4]&&!s[5]||s[6]&&!s[7]){for(var s=s[4]||s[6],h=r,a=[a,e[f++]];f<l;f++){if(h){if(">"===e[f])break}else 0<=e[f].indexOf(s)&&(h=t);a.push(e[f])}if(l<=f)break;a=a.join("")}else{var h=s[1].toLowerCase(),p;if(s[2]){p=s[3];var d=p.charCodeAt(0);if(34===d||39===d)p=p.substr(1,p.length-2);p=u(p.replace(M,""))}else p="";c.push(h,p),a=a.substr(s[0].length)}else a=a.replace(/^[\s\S][^a-z\s]*/,"");return o.R=c,o.next=f+1,o}}function m(t){function s(e,t){u||t.push(e)}var o,u;return c({startDoc:function(){o=[],u=r},startTag:function(r,s,f){if(!u&&i.f.hasOwnProperty(r)){var l=i.f[r];if(!(l&i.c.FOLDABLE)){var c=t(r,s);if(c){if("object"!=typeof c)throw Error("tagPolicy did not return object (old API?)");if(!("attribs"in c))throw Error("tagPolicy gave no attribs");s=c.attribs;var h;"tagName"in c?(h=c.tagName,c=i.f[h]):(h=r,c=l);if(l&i.c.OPTIONAL_ENDTAG){var p=o[o.length-1];p&&p.D===r&&(p.v!==h||r!==h)&&f.push("</",p.v,">")}l&i.c.EMPTY||o.push({D:r,v:h}),f.push("<",h),r=0;for(p=s.length;r<p;r+=2){var d=s[r],v=s[r+1];v!==n&&v!==e&&f.push(" ",d,'="',a(v),'"')}f.push(">"),l&i.c.EMPTY&&!(c&i.c.EMPTY)&&f.push("</",h,">")}else u=!(l&i.c.EMPTY)}}},endTag:function(e,t){if(u)u=r;else if(i.f.hasOwnProperty(e)){var n=i.f[e];if(!(n&(i.c.EMPTY|i.c.FOLDABLE))){if(n&i.c.OPTIONAL_ENDTAG)for(n=o.length;0<=--n;){var s=o[n].D;if(s===e)break;if(!(i.f[s]&i.c.OPTIONAL_ENDTAG))return}else for(n=o.length;0<=--n&&o[n].D!==e;);if(!(0>n)){for(s=o.length;--s>n;){var a=o[s].v;i.f[a]&i.c.OPTIONAL_ENDTAG||t.push("</",a,">")}n<o.length&&(e=o[n].v),o.length=n,t.push("</",e,">")}}}},pcdata:s,rcdata:s,cdata:s,endDoc:function(e){for(;o.length;o.length--)e.push("</",o[o.length-1].v,">")}})}function g(e,t,r,i,s){if(!s)return n;try{var o=f.parse(""+e);if(o&&(!o.K()||W.test(o.W()))){var u=s(o,t,r,i);return u?u.toString():n}}catch(a){}return n}function y(e,t,n,r,i){n||e(t+" removed",{S:"removed",tagName:t});if(r!==i){var s="changed";r&&!i?s="removed":!r&&i&&(s="added"),e(t+"."+n+" "+s,{S:s,tagName:t,la:n,oldValue:r,newValue:i})}}function b(e,t,n){t=t+"::"+n;if(e.hasOwnProperty(t))return e[t];t="*::"+n;if(e.hasOwnProperty(t))return e[t]}function w(t,r,s,o,u){for(var a=0;a<r.length;a+=2){var f=r[a],l=r[a+1],c=l,h=n,p;if((p=t+"::"+f,i.m.hasOwnProperty(p))||(p="*::"+f,i.m.hasOwnProperty(p)))h=i.m[p];if(h!==n)switch(h){case i.d.NONE:break;case i.d.SCRIPT:l=n,u&&y(u,t,f,c,l);break;case i.d.STYLE:if("undefined"==typeof x){l=n,u&&y(u,t,f,c,l);break}var d=[];x(l,{declaration:function(e,t){var r=e.toLowerCase();T(r,t,s?function(e){return g(e,i.P.ja,i.M.ka,{TYPE:"CSS",CSS_PROP:r},s)}:n),t.length&&d.push(r+": "+t.join(" "))}}),l=0<d.length?d.join(" ; "):n,u&&y(u,t,f,c,l);break;case i.d.ID:case i.d.IDREF:case i.d.IDREFS:case i.d.GLOBAL_NAME:case i.d.LOCAL_NAME:case i.d.CLASSES:l=o?o(l):l,u&&y(u,t,f,c,l);break;case i.d.URI:l=g(l,b(i.J,t,f),b(i.I,t,f),{TYPE:"MARKUP",XML_ATTR:f,XML_TAG:t},s),u&&y(u,t,f,c,l);break;case i.d.URI_FRAGMENT:l&&"#"===l.charAt(0)?(l=l.substring(1),l=o?o(l):l,l!==n&&l!==e&&(l="#"+l)):l=n,u&&y(u,t,f,c,l);break;default:l=n,u&&y(u,t,f,c,l)}else l=n,u&&y(u,t,f,c,l);r[a+1]=l}return r}function E(t,n,r){return function(s,o){if(!(i.f[s]&i.c.UNSAFE))return{attribs:w(s,o,t,n,r)};r&&y(r,s,e,e,e)}}function S(e,t){var n=[];return m(t)(e,n),n.join("")}var x,T;"undefined"!=typeof window&&(x=window.parseCssDeclarations,T=window.sanitizeCssProperty);var N={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:""},k=/^#(\d+)$/,L=/^#x([0-9A-Fa-f]+)$/,A=/^[A-Za-z][A-za-z0-9]+$/,O="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):n,M=/\0/g,_=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,D=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,P=/&/g,H=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,B=/[<]/g,j=/>/g,F=/\"/g,I=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,q=3==="a,b".split(/(,)/).length,R=i.c.CDATA|i.c.RCDATA,U={},z={},W=/^(?:https?|mailto|data)$/i,X={};return X.pa=X.escapeAttrib=a,X.ra=X.makeHtmlSanitizer=m,X.sa=X.makeSaxParser=c,X.ta=X.makeTagPolicy=E,X.wa=X.normalizeRCData=l,X.xa=X.sanitize=function(e,t,n,r){return S(e,E(t,n,r))},X.ya=X.sanitizeAttribs=w,X.za=X.sanitizeWithPolicy=S,X.Ba=X.unescapeEntities=u,X}(m),y=g.sanitize;"undefined"!=typeof window&&(window.html=g,window.html_sanitize=y)}(),!function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.pako=e()}(function(){return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var f="function"==typeof require&&require;if(!u&&f)return f(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=a.assign({level:y,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=u.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==v)throw new Error(l[n]);if(t.header&&u.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?f.string2buf(t.dictionary):"[object ArrayBuffer]"===h.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=u.deflateSetDictionary(this.strm,i),n!==v)throw new Error(l[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function s(e,t){return t=t||{},t.raw=!0,i(e,t)}function o(e,t){return t=t||{},t.gzip=!0,i(e,t)}var u=e("./zlib/deflate"),a=e("./utils/common"),f=e("./utils/strings"),l=e("./zlib/messages"),c=e("./zlib/zstream"),h=Object.prototype.toString,p=0,d=4,v=0,m=1,g=2,y=-1,b=0,w=8;r.prototype.push=function(e,t){var n,r,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?d:p,"string"==typeof e?i.input=f.string2buf(e):"[object ArrayBuffer]"===h.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(s),i.next_out=0,i.avail_out=s),n=u.deflate(i,r),n!==m&&n!==v)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||r!==d&&r!==g)||("string"===this.options.to?this.onData(f.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&n!==m);return r===d?(n=u.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===v):r!==g||(this.onEnd(v),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===v&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=r,n.deflate=i,n.deflateRaw=s,n.gzip=o},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==f.Z_OK)throw new Error(l[n]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function s(e,t){return t=t||{},t.raw=!0,i(e,t)}var o=e("./zlib/inflate"),u=e("./utils/common"),a=e("./utils/strings"),f=e("./zlib/constants"),l=e("./zlib/messages"),c=e("./zlib/zstream"),h=e("./zlib/gzheader"),p=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,s,l,c,h=this.strm,d=this.options.chunkSize,v=this.options.dictionary,m=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?f.Z_FINISH:f.Z_NO_FLUSH,"string"==typeof e?h.input=a.binstring2buf(e):"[object ArrayBuffer]"===p.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new u.Buf8(d),h.next_out=0,h.avail_out=d),n=o.inflate(h,f.Z_NO_FLUSH),n===f.Z_NEED_DICT&&v&&(c="string"==typeof v?a.string2buf(v):"[object ArrayBuffer]"===p.call(v)?new Uint8Array(v):v,n=o.inflateSetDictionary(this.strm,c)),n===f.Z_BUF_ERROR&&m===!0&&(n=f.Z_OK,m=!1),n!==f.Z_STREAM_END&&n!==f.Z_OK)return this.onEnd(n),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&n!==f.Z_STREAM_END&&(0!==h.avail_in||r!==f.Z_FINISH&&r!==f.Z_SYNC_FLUSH)||("string"===this.options.to?(i=a.utf8border(h.output,h.next_out),s=h.next_out-i,l=a.buf2string(h.output,i),h.next_out=s,h.avail_out=d-s,s&&u.arraySet(h.output,h.output,i,s,0),this.onData(l)):this.onData(u.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&n!==f.Z_STREAM_END);return n===f.Z_STREAM_END&&(r=f.Z_FINISH),r===f.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===f.Z_OK):r!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),h.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===f.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=r,n.inflate=i,n.inflateRaw=s,n.ungzip=i},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],4:[function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=e("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var u=new i.Buf8(256),a=0;a<256;a++)u[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;u[254]=u[254]=1,n.string2buf=function(e){var t,n,r,s,o,u=e.length,a=0;for(s=0;s<u;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<u&&(r=e.charCodeAt(s+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(a),o=0,s=0;o<a;s++)n=e.charCodeAt(s),55296===(64512&n)&&s+1<u&&(r=e.charCodeAt(s+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,i,s,o,a=t||e.length,f=new Array(2*a);for(i=0,n=0;n<a;)if(s=e[n++],s<128)f[i++]=s;else if(o=u[s],o>4)f[i++]=65533,n+=o-1;else{for(s&=2===o?31:3===o?15:7;o>1&&n<a;)s=s<<6|63&e[n++],o--;o>1?f[i++]=65533:s<65536?f[i++]=s:(s-=65536,f[i++]=55296|s>>10&1023,f[i++]=56320|1023&s)}return r(f,i)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0?t:0===n?t:n+u[e[n]]>t?n:t}},{"./common":3}],5:[function(e,t,n){"use strict";function r(e,t,n,r){for(var i=65535&e|0,s=e>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}t.exports=r},{}],6:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(e,t,n){"use strict";function r(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function i(e,t,n,r){var i=s,o=r+n;e^=-1;for(var u=r;u<o;u++)e=e>>>8^i[255&(e^t[u])];return e^-1}var s=r();t.exports=i},{}],8:[function(e,t,n){"use strict";function r(e,t){return e.msg=P[t],t}function i(e){return(e<<1)-(e>4?9:0)}function s(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(O.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function u(e,t){M._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function a(e,t){e.pending_buf[e.pending++]=t}function f(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,O.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=_(e.adler,t,i,n):2===e.state.wrap&&(e.adler=D(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function c(e,t){var n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,u=e.nice_match,a=e.strstart>e.w_size-ct?e.strstart-(e.w_size-ct):0,f=e.window,l=e.w_mask,c=e.prev,h=e.strstart+lt,p=f[s+o-1],d=f[s+o];e.prev_length>=e.good_match&&(i>>=2),u>e.lookahead&&(u=e.lookahead);do if(n=t,f[n+o]===d&&f[n+o-1]===p&&f[n]===f[s]&&f[++n]===f[s+1]){s+=2,n++;do;while(f[++s]===f[++n]&&f[++s]===f[++n]&&f[++s]===f[++n]&&f[++s]===f[++n]&&f[++s]===f[++n]&&f[++s]===f[++n]&&f[++s]===f[++n]&&f[++s]===f[++n]&&s<h);if(r=lt-(h-s),s=h-lt,r>o){if(e.match_start=t,o=r,r>=u)break;p=f[s+o-1],d=f[s+o]}}while((t=c[t&l])>a&&0!==--i);return o<=e.lookahead?o:e.lookahead}function h(e){var t,n,r,i,s,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-ct)){O.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=o?r-o:0;while(--n);n=o,t=n;do r=e.prev[--t],e.prev[t]=r>=o?r-o:0;while(--n);i+=o}if(0===e.strm.avail_in)break;if(n=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=ft)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+ft-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<ft)););}while(e.lookahead<ct&&0!==e.strm.avail_in)}function p(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===H)return wt;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,u(e,!1),0===e.strm.avail_out))return wt;if(e.strstart-e.block_start>=e.w_size-ct&&(u(e,!1),0===e.strm.avail_out))return wt}return e.insert=0,t===F?(u(e,!0),0===e.strm.avail_out?St:xt):e.strstart>e.block_start&&(u(e,!1),0===e.strm.avail_out)?wt:wt}function d(e,t){for(var n,r;;){if(e.lookahead<ct){if(h(e),e.lookahead<ct&&t===H)return wt;if(0===e.lookahead)break}if(n=0,e.lookahead>=ft&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ft-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ct&&(e.match_length=c(e,n)),e.match_length>=ft)if(r=M._tr_tally(e,e.strstart-e.match_start,e.match_length-ft),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ft){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ft-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=M._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(u(e,!1),0===e.strm.avail_out))return wt}return e.insert=e.strstart<ft-1?e.strstart:ft-1,t===F?(u(e,!0),0===e.strm.avail_out?St:xt):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?wt:Et}function v(e,t){for(var n,r,i;;){if(e.lookahead<ct){if(h(e),e.lookahead<ct&&t===H)return wt;if(0===e.lookahead)break}if(n=0,e.lookahead>=ft&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ft-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ft-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ct&&(e.match_length=c(e,n),e.match_length<=5&&(e.strategy===V||e.match_length===ft&&e.strstart-e.match_start>4096)&&(e.match_length=ft-1)),e.prev_length>=ft&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ft,r=M._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ft),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ft-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=ft-1,e.strstart++,r&&(u(e,!1),0===e.strm.avail_out))return wt}else if(e.match_available){if(r=M._tr_tally(e,0,e.window[e.strstart-1]),r&&u(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return wt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=M._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ft-1?e.strstart:ft-1,t===F?(u(e,!0),0===e.strm.avail_out?St:xt):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?wt:Et}function m(e,t){for(var n,r,i,s,o=e.window;;){if(e.lookahead<=lt){if(h(e),e.lookahead<=lt&&t===H)return wt;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ft&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+lt;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=lt-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ft?(n=M._tr_tally(e,1,e.match_length-ft),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=M._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(u(e,!1),0===e.strm.avail_out))return wt}return e.insert=0,t===F?(u(e,!0),0===e.strm.avail_out?St:xt):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?wt:Et}function g(e,t){for(var n;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===H)return wt;break}if(e.match_length=0,n=M._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(u(e,!1),0===e.strm.avail_out))return wt}return e.insert=0,t===F?(u(e,!0),0===e.strm.avail_out?St:xt):e.last_lit&&(u(e,!1),0===e.strm.avail_out)?wt:Et}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function b(e){e.window_size=2*e.w_size,s(e.head),e.max_lazy_match=A[e.level].max_lazy,e.good_match=A[e.level].good_length,e.nice_match=A[e.level].nice_length,e.max_chain_length=A[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ft-1,e.match_available=0,e.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*ut),this.dyn_dtree=new O.Buf16(2*(2*st+1)),this.bl_tree=new O.Buf16(2*(2*ot+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(at+1),this.heap=new O.Buf16(2*it+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*it+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=G,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?pt:yt,e.adler=2===t.wrap?0:1,t.last_flush=H,M._tr_init(t),q):r(e,U)}function S(e){var t=E(e);return t===q&&b(e.state),t}function x(e,t){return e&&e.state?2!==e.state.wrap?U:(e.state.gzhead=t,q):U}function T(e,t,n,i,s,o){if(!e)return U;var u=1;if(t===X&&(t=6),i<0?(u=0,i=-i):i>15&&(u=2,i-=16),s<1||s>Z||n!==Y||i<8||i>15||t<0||t>9||o<0||o>K)return r(e,U);8===i&&(i=9);var a=new w;return e.state=a,a.strm=e,a.wrap=u,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ft-1)/ft),a.window=new O.Buf8(2*a.w_size),a.head=new O.Buf16(a.hash_size),a.prev=new O.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new O.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,S(e)}function N(e,t){return T(e,t,Y,et,tt,Q)}function C(e,t){var n,u,l,c;if(!e||!e.state||t>I||t<0)return e?r(e,U):U;if(u=e.state,!e.output||!e.input&&0!==e.avail_in||u.status===bt&&t!==F)return r(e,0===e.avail_out?W:U);if(u.strm=e,n=u.last_flush,u.last_flush=t,u.status===pt)if(2===u.wrap)e.adler=0,a(u,31),a(u,139),a(u,8),u.gzhead?(a(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),a(u,255&u.gzhead.time),a(u,u.gzhead.time>>8&255),a(u,u.gzhead.time>>16&255),a(u,u.gzhead.time>>24&255),a(u,9===u.level?2:u.strategy>=$||u.level<2?4:0),a(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(a(u,255&u.gzhead.extra.length),a(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(e.adler=D(e.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=dt):(a(u,0),a(u,0),a(u,0),a(u,0),a(u,0),a(u,9===u.level?2:u.strategy>=$||u.level<2?4:0),a(u,Tt),u.status=yt);else{var h=Y+(u.w_bits-8<<4)<<8,p=-1;p=u.strategy>=$||u.level<2?0:u.level<6?1:6===u.level?2:3,h|=p<<6,0!==u.strstart&&(h|=ht),h+=31-h%31,u.status=yt,f(u,h),0!==u.strstart&&(f(u,e.adler>>>16),f(u,65535&e.adler)),e.adler=1}if(u.status===dt)if(u.gzhead.extra){for(l=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),o(e),l=u.pending,u.pending!==u.pending_buf_size));)a(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=vt)}else u.status=vt;if(u.status===vt)if(u.gzhead.name){l=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),o(e),l=u.pending,u.pending===u.pending_buf_size)){c=1;break}c=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,a(u,c)}while(0!==c);u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),0===c&&(u.gzindex=0,u.status=mt)}else u.status=mt;if(u.status===mt)if(u.gzhead.comment){l=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),o(e),l=u.pending,u.pending===u.pending_buf_size)){c=1;break}c=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,a(u,c)}while(0!==c);u.gzhead.hcrc&&u.pending>l&&(e.adler=D(e.adler,u.pending_buf,u.pending-l,l)),0===c&&(u.status=gt)}else u.status=gt;if(u.status===gt&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&o(e),u.pending+2<=u.pending_buf_size&&(a(u,255&e.adler),a(u,e.adler>>8&255),e.adler=0,u.status=yt)):u.status=yt),0!==u.pending){if(o(e),0===e.avail_out)return u.last_flush=-1,q}else if(0===e.avail_in&&i(t)<=i(n)&&t!==F)return r(e,W);if(u.status===bt&&0!==e.avail_in)return r(e,W);if(0!==e.avail_in||0!==u.lookahead||t!==H&&u.status!==bt){var d=u.strategy===$?g(u,t):u.strategy===J?m(u,t):A[u.level].func(u,t);if(d!==St&&d!==xt||(u.status=bt),d===wt||d===St)return 0===e.avail_out&&(u.last_flush=-1),q;if(d===Et&&(t===B?M._tr_align(u):t!==I&&(M._tr_stored_block(u,0,0,!1),t===j&&(s(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),o(e),0===e.avail_out))return u.last_flush=-1,q}return t!==F?q:u.wrap<=0?R:(2===u.wrap?(a(u,255&e.adler),a(u,e.adler>>8&255),a(u,e.adler>>16&255),a(u,e.adler>>24&255),a(u,255&e.total_in),a(u,e.total_in>>8&255),a(u,e.total_in>>16&255),a(u,e.total_in>>24&255)):(f(u,e.adler>>>16),f(u,65535&e.adler)),o(e),u.wrap>0&&(u.wrap=-u.wrap),0!==u.pending?q:R)}function k(e){var t;return e&&e.state?(t=e.state.status,t!==pt&&t!==dt&&t!==vt&&t!==mt&&t!==gt&&t!==yt&&t!==bt?r(e,U):(e.state=null,t===yt?r(e,z):q)):U}function L(e,t){var n,r,i,o,u,a,f,l,c=t.length;if(!e||!e.state)return U;if(n=e.state,o=n.wrap,2===o||1===o&&n.status!==pt||n.lookahead)return U;for(1===o&&(e.adler=_(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(s(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new O.Buf8(n.w_size),O.arraySet(l,t,c-n.w_size,n.w_size,0),t=l,c=n.w_size),u=e.avail_in,a=e.next_in,f=e.input,e.avail_in=c,e.next_in=0,e.input=t,h(n);n.lookahead>=ft;){r=n.strstart,i=n.lookahead-(ft-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+ft-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=ft-1,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ft-1,n.match_available=0,e.next_in=a,e.input=f,e.avail_in=u,n.wrap=o,q}var A,O=e("../utils/common"),M=e("./trees"),_=e("./adler32"),D=e("./crc32"),P=e("./messages"),H=0,B=1,j=3,F=4,I=5,q=0,R=1,U=-2,z=-3,W=-5,X=-1,V=1,$=2,J=3,K=4,Q=0,G=2,Y=8,Z=9,et=15,tt=8,nt=29,rt=256,it=rt+1+nt,st=30,ot=19,ut=2*it+1,at=15,ft=3,lt=258,ct=lt+ft+1,ht=32,pt=42,dt=69,vt=73,mt=91,gt=103,yt=113,bt=666,wt=1,Et=2,St=3,xt=4,Tt=3;A=[new y(0,0,0,0,p),new y(4,4,8,4,d),new y(4,5,16,8,d),new y(4,6,32,32,d),new y(4,4,16,16,v),new y(8,16,32,32,v),new y(8,16,128,128,v),new y(8,32,128,256,v),new y(32,128,258,1024,v),new y(32,258,258,4096,v)],n.deflateInit=N,n.deflateInit2=T,n.deflateReset=S,n.deflateResetKeep=E,n.deflateSetHeader=x,n.deflate=C,n.deflateEnd=k,n.deflateSetDictionary=L,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],10:[function(e,t,n){"use strict";var r=30,i=12;t.exports=function(e,t){var n,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;n=e.state,s=e.next_in,k=e.input,o=s+(e.avail_in-5),u=e.next_out,L=e.output,a=u-(t-e.avail_out),f=u+(e.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,p=n.wnext,d=n.window,v=n.hold,m=n.bits,g=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,w=(1<<n.distbits)-1;e:do{m<15&&(v+=k[s++]<<m,m+=8,v+=k[s++]<<m,m+=8),E=g[v&b];t:for(;;){if(S=E>>>24,v>>>=S,m-=S,S=E>>>16&255,0===S)L[u++]=65535&E;else{if(!(16&S)){if(0===(64&S)){E=g[(65535&E)+(v&(1<<S)-1)];continue t}if(32&S){n.mode=i;break e}e.msg="invalid literal/length code",n.mode=r;break e}x=65535&E,S&=15,S&&(m<S&&(v+=k[s++]<<m,m+=8),x+=v&(1<<S)-1,v>>>=S,m-=S),m<15&&(v+=k[s++]<<m,m+=8,v+=k[s++]<<m,m+=8),E=y[v&w];n:for(;;){if(S=E>>>24,v>>>=S,m-=S,S=E>>>16&255,!(16&S)){if(0===(64&S)){E=y[(65535&E)+(v&(1<<S)-1)];continue n}e.msg="invalid distance code",n.mode=r;break e}if(T=65535&E,S&=15,m<S&&(v+=k[s++]<<m,m+=8,m<S&&(v+=k[s++]<<m,m+=8)),T+=v&(1<<S)-1,T>l){e.msg="invalid distance too far back",n.mode=r;break e}if(v>>>=S,m-=S,S=u-a,T>S){if(S=T-S,S>h&&n.sane){e.msg="invalid distance too far back",n.mode=r;break e}if(N=0,C=d,0===p){if(N+=c-S,S<x){x-=S;do L[u++]=d[N++];while(--S);N=u-T,C=L}}else if(p<S){if(N+=c+p-S,S-=p,S<x){x-=S;do L[u++]=d[N++];while(--S);if(N=0,p<x){S=p,x-=S;do L[u++]=d[N++];while(--S);N=u-T,C=L}}}else if(N+=p-S,S<x){x-=S;do L[u++]=d[N++];while(--S);N=u-T,C=L}for(;x>2;)L[u++]=C[N++],L[u++]=C[N++],L[u++]=C[N++],x-=3;x&&(L[u++]=C[N++],x>1&&(L[u++]=C[N++]))}else{N=u-T;do L[u++]=L[N++],L[u++]=L[N++],L[u++]=L[N++],x-=3;while(x>2);x&&(L[u++]=L[N++],x>1&&(L[u++]=L[N++]))}break}}break}}while(s<o&&u<f);x=m>>3,s-=x,m-=x<<3,v&=(1<<m)-1,e.next_in=s,e.next_out=u,e.avail_in=s<o?5+(o-s):5-(s-o),e.avail_out=u<f?257+(f-u):257-(u-f),n.hold=v,n.bits=m}},{}],11:[function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=j,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(vt),t.distcode=t.distdyn=new y.Buf32(mt),t.sane=1,t.back=-1,A):_}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,s(e)):_}function u(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?_:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,o(e))):_}function a(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=u(e,t),n!==A&&(e.state=null),n):_}function f(e){return a(e,yt)}function l(e){if(bt){var t;for(m=new y.Buf32(512),g=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(S(T,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;S(N,e.lens,0,32,g,0,e.work,{bits:5}),bt=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function c(e,t,n,r){var i,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new y.Buf8(s.wsize)),r>=s.wsize?(y.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),y.arraySet(s.window,t,n-r,i,s.wnext),r-=i,r?(y.arraySet(s.window,t,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function h(e,t){var n,i,s,o,u,a,f,h,p,d,v,m,g,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct=0,kt=new y.Buf8(4),Lt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return _;n=e.state,n.mode===J&&(n.mode=K),u=e.next_out,s=e.output,f=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,h=n.hold,p=n.bits,d=a,v=f,xt=A;e:for(;;)switch(n.mode){case j:if(0===n.wrap){n.mode=K;break}for(;p<16;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(2&n.wrap&&35615===h){n.check=0,kt[0]=255&h,kt[1]=h>>>8&255,n.check=w(n.check,kt,2,0),h=0,p=0,n.mode=F;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=ht;break}if((15&h)!==B){e.msg="unknown compression method",n.mode=ht;break}if(h>>>=4,p-=4,St=(15&h)+8,0===n.wbits)n.wbits=St;else if(St>n.wbits){e.msg="invalid window size",n.mode=ht;break}n.dmax=1<<St,e.adler=n.check=1,n.mode=512&h?V:J,h=0,p=0;break;case F:for(;p<16;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(n.flags=h,(255&n.flags)!==B){e.msg="unknown compression method",n.mode=ht;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=ht;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(kt[0]=255&h,kt[1]=h>>>8&255,n.check=w(n.check,kt,2,0)),h=0,p=0,n.mode=I;case I:for(;p<32;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}n.head&&(n.head.time=h),512&n.flags&&(kt[0]=255&h,kt[1]=h>>>8&255,kt[2]=h>>>16&255,kt[3]=h>>>24&255,n.check=w(n.check,kt,4,0)),h=0,p=0,n.mode=q;case q:for(;p<16;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(kt[0]=255&h,kt[1]=h>>>8&255,n.check=w(n.check,kt,2,0)),h=0,p=0,n.mode=R;case R:if(1024&n.flags){for(;p<16;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(kt[0]=255&h,kt[1]=h>>>8&255,n.check=w(n.check,kt,2,0)),h=0,p=0}else n.head&&(n.head.extra=null);n.mode=U;case U:if(1024&n.flags&&(m=n.length,m>a&&(m=a),m&&(n.head&&(St=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,o,m,St)),512&n.flags&&(n.check=w(n.check,i,m,o)),a-=m,o+=m,n.length-=m),n.length))break e;n.length=0,n.mode=z;case z:if(2048&n.flags){if(0===a)break e;m=0;do St=i[o+m++],n.head&&St&&n.length<65536&&(n.head.name+=String.fromCharCode(St));while(St&&m<a);if(512&n.flags&&(n.check=w(n.check,i,m,o)),a-=m,o+=m,St)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=W;case W:if(4096&n.flags){if(0===a)break e;m=0;do St=i[o+m++],n.head&&St&&n.length<65536&&(n.head.comment+=String.fromCharCode(St));while(St&&m<a);if(512&n.flags&&(n.check=w(n.check,i,m,o)),a-=m,o+=m,St)break e}else n.head&&(n.head.comment=null);n.mode=X;case X:if(512&n.flags){for(;p<16;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=ht;break}h=0,p=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=J;break;case V:for(;p<32;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}e.adler=n.check=r(h),h=0,p=0,n.mode=$;case $:if(0===n.havedict)return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=a,n.hold=h,n.bits=p,M;e.adler=n.check=1,n.mode=J;case J:if(t===k||t===L)break e;case K:if(n.last){h>>>=7&p,p-=7&p,n.mode=ft;break}for(;p<3;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}switch(n.last=1&h,h>>>=1,p-=1,3&h){case 0:n.mode=Q;break;case 1:if(l(n),n.mode=nt,t===L){h>>>=2,p-=2;break e}break;case 2:n.mode=Z;break;case 3:e.msg="invalid block type",n.mode=ht}h>>>=2,p-=2;break;case Q:for(h>>>=7&p,p-=7&p;p<32;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ht;break}if(n.length=65535&h,h=0,p=0,n.mode=G,t===L)break e;case G:n.mode=Y;case Y:if(m=n.length){if(m>a&&(m=a),m>f&&(m=f),0===m)break e;y.arraySet(s,i,o,m,u),a-=m,o+=m,f-=m,u+=m,n.length-=m;break}n.mode=J;break;case Z:for(;p<14;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(n.nlen=(31&h)+257,h>>>=5,p-=5,n.ndist=(31&h)+1,h>>>=5,p-=5,n.ncode=(15&h)+4,h>>>=4,p-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ht;break}n.have=0,n.mode=et;case et:for(;n.have<n.ncode;){for(;p<3;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}n.lens[Lt[n.have++]]=7&h,h>>>=3,p-=3}for(;n.have<19;)n.lens[Lt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Tt={bits:n.lenbits},xt=S(x,n.lens,0,19,n.lencode,0,n.work,Tt),n.lenbits=Tt.bits,xt){e.msg="invalid code lengths set",n.mode=ht;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.nlen+n.ndist;){for(;Ct=n.lencode[h&(1<<n.lenbits)-1],mt=Ct>>>24,gt=Ct>>>16&255,yt=65535&Ct,!(mt<=p);){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(yt<16)h>>>=mt,p-=mt,n.lens[n.have++]=yt;else{if(16===yt){for(Nt=mt+2;p<Nt;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(h>>>=mt,p-=mt,0===n.have){e.msg="invalid bit length repeat",n.mode=ht;break}St=n.lens[n.have-1],m=3+(3&h),h>>>=2,p-=2}else if(17===yt){for(Nt=mt+3;p<Nt;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}h>>>=mt,p-=mt,St=0,m=3+(7&h),h>>>=3,p-=3}else{for(Nt=mt+7;p<Nt;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}h>>>=mt,p-=mt,St=0,m=11+(127&h),h>>>=7,p-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ht;break}for(;m--;)n.lens[n.have++]=St}}if(n.mode===ht)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=ht;break}if(n.lenbits=9,Tt={bits:n.lenbits},xt=S(T,n.lens,0,n.nlen,n.lencode,0,n.work,Tt),n.lenbits=Tt.bits,xt){e.msg="invalid literal/lengths set",n.mode=ht;break}if(n.distbits=6,n.distcode=n.distdyn,Tt={bits:n.distbits},xt=S(N,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Tt),n.distbits=Tt.bits,xt){e.msg="invalid distances set",n.mode=ht;break}if(n.mode=nt,t===L)break e;case nt:n.mode=rt;case rt:if(a>=6&&f>=258){e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=a,n.hold=h,n.bits=p,E(e,v),u=e.next_out,s=e.output,f=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,h=n.hold,p=n.bits,n.mode===J&&(n.back=-1);break}for(n.back=0;Ct=n.lencode[h&(1<<n.lenbits)-1],mt=Ct>>>24,gt=Ct>>>16&255,yt=65535&Ct,!(mt<=p);){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(gt&&0===(240&gt)){for(bt=mt,wt=gt,Et=yt;Ct=n.lencode[Et+((h&(1<<bt+wt)-1)>>bt)],mt=Ct>>>24,gt=Ct>>>16&255,yt=65535&Ct,!(bt+mt<=p);){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}h>>>=bt,p-=bt,n.back+=bt}if(h>>>=mt,p-=mt,n.back+=mt,n.length=yt,0===gt){n.mode=at;break}if(32&gt){n.back=-1,n.mode=J;break}if(64&gt){e.msg="invalid literal/length code",n.mode=ht;break}n.extra=15&gt,n.mode=it;case it:if(n.extra){for(Nt=n.extra;p<Nt;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,p-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=st;case st:for(;Ct=n.distcode[h&(1<<n.distbits)-1],mt=Ct>>>24,gt=Ct>>>16&255,yt=65535&Ct,!(mt<=p);){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(0===(240&gt)){for(bt=mt,wt=gt,Et=yt;Ct=n.distcode[Et+((h&(1<<bt+wt)-1)>>bt)],mt=Ct>>>24,gt=Ct>>>16&255,yt=65535&Ct,!(bt+mt<=p);){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}h>>>=bt,p-=bt,n.back+=bt}if(h>>>=mt,p-=mt,n.back+=mt,64&gt){e.msg="invalid distance code",n.mode=ht;break}n.offset=yt,n.extra=15&gt,n.mode=ot;case ot:if(n.extra){for(Nt=n.extra;p<Nt;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,p-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ht;break}n.mode=ut;case ut:if(0===f)break e;if(m=v-f,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ht;break}m>n.wnext?(m-=n.wnext,g=n.wsize-m):g=n.wnext-m,m>n.length&&(m=n.length),vt=n.window}else vt=s,g=u-n.offset,m=n.length;m>f&&(m=f),f-=m,n.length-=m;do s[u++]=vt[g++];while(--m);0===n.length&&(n.mode=rt);break;case at:if(0===f)break e;s[u++]=n.length,f--,n.mode=rt;break;case ft:if(n.wrap){for(;p<32;){if(0===a)break e;a--,h|=i[o++]<<p,p+=8}if(v-=f,e.total_out+=v,n.total+=v,v&&(e.adler=n.check=n.flags?w(n.check,s,v,u-v):b(n.check,s,v,u-v)),v=f,(n.flags?h:r(h))!==n.check){e.msg="incorrect data check",n.mode=ht;break}h=0,p=0}n.mode=lt;case lt:if(n.wrap&&n.flags){for(;p<32;){if(0===a)break e;a--,h+=i[o++]<<p,p+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=ht;break}h=0,p=0}n.mode=ct;case ct:xt=O;break e;case ht:xt=D;break e;case pt:return P;case dt:default:return _}return e.next_out=u,e.avail_out=f,e.next_in=o,e.avail_in=a,n.hold=h,n.bits=p,(n.wsize||v!==e.avail_out&&n.mode<ht&&(n.mode<ft||t!==C))&&c(e,e.output,e.next_out,v-e.avail_out)?(n.mode=pt,P):(d-=e.avail_in,v-=e.avail_out,e.total_in+=d,e.total_out+=v,n.total+=v,n.wrap&&v&&(e.adler=n.check=n.flags?w(n.check,s,v,e.next_out-v):b(n.check,s,v,e.next_out-v)),e.data_type=n.bits+(n.last?64:0)+(n.mode===J?128:0)+(n.mode===nt||n.mode===G?256:0),(0===d&&0===v||t===C)&&xt===A&&(xt=H),xt)}function p(e){if(!e||!e.state)return _;var t=e.state;return t.window&&(t.window=null),e.state=null,A}function d(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?_:(n.head=t,t.done=!1,A)):_}function v(e,t){var n,r,i,s=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==$?_:n.mode===$&&(r=1,r=b(r,t,s,0),r!==n.check)?D:(i=c(e,t,s,s))?(n.mode=pt,P):(n.havedict=1,A)):_}var m,g,y=e("../utils/common"),b=e("./adler32"),w=e("./crc32"),E=e("./inffast"),S=e("./inftrees"),x=0,T=1,N=2,C=4,k=5,L=6,A=0,O=1,M=2,_=-2,D=-3,P=-4,H=-5,B=8,j=1,F=2,I=3,q=4,R=5,U=6,z=7,W=8,X=9,V=10,$=11,J=12,K=13,Q=14,G=15,Y=16,Z=17,et=18,tt=19,nt=20,rt=21,it=22,st=23,ot=24,ut=25,at=26,ft=27,lt=28,ct=29,ht=30,pt=31,dt=32,vt=852,mt=592,gt=15,yt=gt,bt=!0;n.inflateReset=o,n.inflateReset2=u,n.inflateResetKeep=s,n.inflateInit=f,n.inflateInit2=a,n.inflate=h,n.inflateEnd=p,n.inflateGetHeader=d,n.inflateSetDictionary=v,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t,n){"use strict";var r=e("../utils/common"),i=15,s=852,o=592,u=0,a=1,f=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,v,m,g,y,b){var w,E,S,x,T,N,C,k,L,A=b.bits,O=0,M=0,D=0,P=0,H=0,B=0,j=0,F=0,I=0,q=0,R=null,U=0,z=new r.Buf16(i+1),W=new r.Buf16(i+1),X=null,V=0;for(O=0;O<=i;O++)z[O]=0;for(M=0;M<v;M++)z[t[n+M]]++;for(H=A,P=i;P>=1&&0===z[P];P--);if(H>P&&(H=P),0===P)return m[g++]=20971520,m[g++]=20971520,b.bits=1,0;for(D=1;D<P&&0===z[D];D++);for(H<D&&(H=D),F=1,O=1;O<=i;O++)if(F<<=1,F-=z[O],F<0)return-1;if(F>0&&(e===u||1!==P))return-1;for(W[1]=0,O=1;O<i;O++)W[O+1]=W[O]+z[O];for(M=0;M<v;M++)0!==t[n+M]&&(y[W[t[n+M]]++]=M);if(e===u?(R=X=y,N=19):e===a?(R=l,U-=257,X=c,V-=257,N=256):(R=h,X=p,N=-1),q=0,M=0,O=D,T=g,B=H,j=0,S=-1,I=1<<H,x=I-1,e===a&&I>s||e===f&&I>o)return 1;for(var $=0;;){$++,C=O-j,y[M]<N?(k=0,L=y[M]):y[M]>N?(k=X[V+y[M]],L=R[U+y[M]]):(k=96,L=0),w=1<<O-j,E=1<<B,D=E;do E-=w,m[T+(q>>j)+E]=C<<24|k<<16|L|0;while(0!==E);for(w=1<<O-1;q&w;)w>>=1;if(0!==w?(q&=w-1,q+=w):q=0,M++,0===--z[O]){if(O===P)break;O=t[n+y[M]]}if(O>H&&(q&x)!==S){for(0===j&&(j=H),T+=D,B=O-j,F=1<<B;B+j<P&&(F-=z[B+j],!(F<=0));)B++,F<<=1;if(I+=1<<B,e===a&&I>s||e===f&&I>o)return 1;S=q&x,m[S]=H<<24|B<<16|T-g|0}}return 0!==q&&(m[T+q]=O-j<<24|64<<16|0),b.bits=H,0}},{"../utils/common":3}],13:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function s(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return e<256?at[e]:at[256+(e>>>7)]}function u(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function a(e,t,n){e.bi_valid>K-n?(e.bi_buf|=t<<e.bi_valid&65535,u(e,e.bi_buf),e.bi_buf=t>>K-e.bi_valid,e.bi_valid+=n-K):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function f(e,t,n){a(e,n[2*t],n[2*t+1])}function l(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function c(e){16===e.bi_valid?(u(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function h(e,t){var n,r,i,s,o,u,a=t.dyn_tree,f=t.max_code,l=t.stat_desc.static_tree,c=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,v=0;for(s=0;s<=J;s++)e.bl_count[s]=0;for(a[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<$;n++)r=e.heap[n],s=a[2*a[2*r+1]+1]+1,s>d&&(s=d,v++),a[2*r+1]=s,r>f||(e.bl_count[s]++,o=0,r>=p&&(o=h[r-p]),u=a[2*r],e.opt_len+=u*(s+o),c&&(e.static_len+=u*(l[2*r+1]+o)));if(0!==v){do{for(s=d-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(s=d;0!==s;s--)for(r=e.bl_count[s];0!==r;)i=e.heap[--n],i>f||(a[2*i+1]!==s&&(e.opt_len+=(s-a[2*i+1])*a[2*i],a[2*i+1]=s),r--)}}function p(e,t,n){var r,i,s=new Array(J+1),o=0;for(r=1;r<=J;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var u=e[2*i+1];0!==u&&(e[2*i]=l(s[u]++,u))}}function d(){var e,t,n,r,s,o=new Array(J+1);for(n=0,r=0;r<U-1;r++)for(lt[r]=n,e=0;e<1<<tt[r];e++)ft[n++]=r;for(ft[n-1]=r,s=0,r=0;r<16;r++)for(ct[r]=s,e=0;e<1<<nt[r];e++)at[s++]=r;for(s>>=7;r<X;r++)for(ct[r]=s<<7,e=0;e<1<<nt[r]-7;e++)at[256+s++]=r;for(t=0;t<=J;t++)o[t]=0;for(e=0;e<=143;)ot[2*e+1]=8,e++,o[8]++;for(;e<=255;)ot[2*e+1]=9,e++,o[9]++;for(;e<=279;)ot[2*e+1]=7,e++,o[7]++;for(;e<=287;)ot[2*e+1]=8,e++,o[8]++;for(p(ot,W+1,o),e=0;e<X;e++)ut[2*e+1]=5,ut[2*e]=l(e,5);ht=new i(ot,tt,z+1,W,J),pt=new i(ut,nt,0,X,J),dt=new i(new Array(0),rt,0,V,Q)}function v(e){var t;for(t=0;t<W;t++)e.dyn_ltree[2*t]=0;for(t=0;t<X;t++)e.dyn_dtree[2*t]=0;for(t=0;t<V;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*G]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?u(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,n,r){m(e),r&&(u(e,n),u(e,~n)),_.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function w(e,t,n){var r,i,s,u,l=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===r?f(e,i,t):(s=ft[i],f(e,s+z+1,t),u=tt[s],0!==u&&(i-=lt[s],a(e,i,u)),r--,s=o(r),f(e,s,n),u=nt[s],0!==u&&(r-=ct[s],a(e,r,u)));while(l<e.last_lit);f(e,G,t)}function E(e,t){var n,r,i,s=t.dyn_tree,o=t.stat_desc.static_tree,u=t.stat_desc.has_stree,a=t.stat_desc.elems,f=-1;for(e.heap_len=0,e.heap_max=$,n=0;n<a;n++)0!==s[2*n]?(e.heap[++e.heap_len]=f=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=f<2?++f:0,s[2*i]=1,e.depth[i]=0,e.opt_len--,u&&(e.static_len-=o[2*i+1]);for(t.max_code=f,n=e.heap_len>>1;n>=1;n--)b(e,s,n);i=a;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*i]=s[2*n]+s[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=i,e.heap[1]=i++,b(e,s,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],h(e,t),p(s,f,e.bl_count)}function S(e,t,n){var r,i,s=-1,o=t[1],u=0,a=7,f=4;for(0===o&&(a=138,f=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++u<a&&i===o||(u<f?e.bl_tree[2*i]+=u:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*Y]++):u<=10?e.bl_tree[2*Z]++:e.bl_tree[2*et]++,u=0,s=i,0===o?(a=138,f=3):i===o?(a=6,f=3):(a=7,f=4))}function x(e,t,n){var r,i,s=-1,o=t[1],u=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++u<l&&i===o)){if(u<c){do f(e,i,e.bl_tree);while(0!==--u)}else 0!==i?(i!==s&&(f(e,i,e.bl_tree),u--),f(e,Y,e.bl_tree),a(e,u-3,2)):u<=10?(f(e,Z,e.bl_tree),a(e,u-3,3)):(f(e,et,e.bl_tree),a(e,u-11,7));u=0,s=i,0===o?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}function T(e){var t;for(S(e,e.dyn_ltree,e.l_desc.max_code),S(e,e.dyn_dtree,e.d_desc.max_code),E(e,e.bl_desc),t=V-1;t>=3&&0===e.bl_tree[2*it[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function N(e,t,n,r){var i;for(a(e,t-257,5),a(e,n-1,5),a(e,r-4,4),i=0;i<r;i++)a(e,e.bl_tree[2*it[i]+1],3);x(e,e.dyn_ltree,t-1),x(e,e.dyn_dtree,n-1)}function C(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return P;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return H;for(t=32;t<z;t++)if(0!==e.dyn_ltree[2*t])return H;return P}function k(e){vt||(d(),vt=!0),e.l_desc=new s(e.dyn_ltree,ht),e.d_desc=new s(e.dyn_dtree,pt),e.bl_desc=new s(e.bl_tree,dt),e.bi_buf=0,e.bi_valid=0,v(e)}function L(e,t,n,r){a(e,(j<<1)+(r?1:0),3),g(e,t,n,!0)}function A(e){a(e,F<<1,3),f(e,G,ot),c(e)}function O(e,t,n,r){var i,s,o=0;e.level>0?(e.strm.data_type===B&&(e.strm.data_type=C(e)),E(e,e.l_desc),E(e,e.d_desc),o=T(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&t!==-1?L(e,t,n,r):e.strategy===D||s===i?(a(e,(F<<1)+(r?1:0),3),w(e,ot,ut)):(a(e,(I<<1)+(r?1:0),3),N(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),w(e,e.dyn_ltree,e.dyn_dtree)),v(e),r&&m(e)}function M(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ft[n]+z+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var _=e("../utils/common"),D=4,P=0,H=1,B=2,j=0,F=1,I=2,q=3,R=258,U=29,z=256,W=z+1+U,X=30,V=19,$=2*W+1,J=15,K=16,Q=7,G=256,Y=16,Z=17,et=18,tt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],nt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],st=512,ot=new Array(2*(W+2));r(ot);var ut=new Array(2*X);r(ut);var at=new Array(st);r(at);var ft=new Array(R-q+1);r(ft);var lt=new Array(U);r(lt);var ct=new Array(X);r(ct);var ht,pt,dt,vt=!1;n._tr_init=k,n._tr_stored_block=L,n._tr_flush_block=O,n._tr_tally=M,n._tr_align=A},{"../utils/common":3}],15:[function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}],"/":[function(e,t,n){"use strict";var r=e("./lib/utils/common").assign,i=e("./lib/deflate"),s=e("./lib/inflate"),o=e("./lib/zlib/constants"),u={};r(u,i,s,o),t.exports=u},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var n="",r,i,s,o,u,a,f=0;for(null!=t&&t||(e=Base64._utf8_encode(e));f<e.length;)r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=e.charCodeAt(f++),o=r>>2,r=(r&3)<<4|i>>4,u=(i&15)<<2|s>>6,a=s&63,isNaN(i)?u=a=64:isNaN(s)&&(a=64),n=n+this._keyStr.charAt(o)+this._keyStr.charAt(r)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return n},decode:function(e,t){t=null!=t?t:!1;var n="",r,i,s,o,u,a=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");a<e.length;)r=this._keyStr.indexOf(e.charAt(a++)),i=this._keyStr.indexOf(e.charAt(a++)),o=this._keyStr.indexOf(e.charAt(a++)),u=this._keyStr.indexOf(e.charAt(a++)),r=r<<2|i>>4,i=(i&15)<<4|o>>2,s=(o&3)<<6|u,n+=String.fromCharCode(r),64!=o&&(n+=String.fromCharCode(i)),64!=u&&(n+=String.fromCharCode(s));return t||(n=Base64._utf8_decode(n)),n},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):(127<r&&2048>r?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r;for(c1=c2=0;n<e.length;)r=e.charCodeAt(n),128>r?(t+=String.fromCharCode(r),n++):191<r&&224>r?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}};window.urlParams=window.urlParams||{},window.isLocalStorage=window.isLocalStorage||!1,window.mxLoadSettings=window.mxLoadSettings||"1"!=urlParams.configure,window.isSvgBrowser=window.isSvgBrowser||0>navigator.userAgent.indexOf("MSIE")||9<=document.documentMode,window.EXPORT_URL=window.EXPORT_URL||"https://exp.draw.io/ImageExport4/export",window.PLANT_URL=window.PLANT_URL||"https://exp-plant.draw.io/plantuml4",window.VSD_CONVERT_URL=window.VSD_CONVERT_URL||"https://convert.draw.io/VsdConverter/api/converter",window.EMF_CONVERT_URL=window.EMF_CONVERT_URL||"https://convert.draw.io/emf2png/convertEMF",window.SAVE_URL=window.SAVE_URL||"save",window.OPEN_URL=window.OPEN_URL||"open",window.PROXY_URL=window.PROXY_URL||"proxy",window.SHAPES_PATH=window.SHAPES_PATH||"shapes",window.GRAPH_IMAGE_PATH=window.GRAPH_IMAGE_PATH||"img",window.ICONSEARCH_PATH=window.ICONSEARCH_PATH||((0<=navigator.userAgent.indexOf("MSIE")||urlParams.dev)&&"file:"!=window.location.protocol?"iconSearch":"https://www.draw.io/iconSearch"),window.TEMPLATE_PATH=window.TEMPLATE_PATH||"templates",window.NEW_DIAGRAM_CATS_PATH=window.NEW_DIAGRAM_CATS_PATH||"newDiagramCats",window.RESOURCES_PATH=window.RESOURCES_PATH||"resources",window.RESOURCE_BASE=window.RESOURCE_BASE||RESOURCES_PATH+"/dia",window.mxLoadResources=window.mxLoadResources||!1,window.mxLanguage=window.mxLanguage||function(){var e="1"==urlParams.offline?"en":urlParams.lang;if(null==e&&"undefined"!=typeof JSON&&isLocalStorage)try{var t=localStorage.getItem(".drawio-config");null!=t&&(e=JSON.parse(t).language||null)}catch(n){isLocalStorage=!1}return e}(),window.mxLanguageMap=window.mxLanguageMap||{i18n:"",id:"Bahasa Indonesia",ms:"Bahasa Melayu",bs:"Bosanski",bg:"Bulgarian",ca:"Catal",cs:"etina",da:"Dansk",de:"Deutsch",et:"Eesti",en:"English",es:"Espaol",fil:"Filipino",fr:"Franais",it:"Italiano",hu:"Magyar",nl:"Nederlands",no:"Norsk",pl:"Polski","pt-br":"Portugus (Brasil)",pt:"Portugus (Portugal)",ro:"Romn",fi:"Suomi",sv:"Svenska",vi:"Ting Vit",tr:"Trke",el:"",ru:"",sr:"",uk:"",he:"",ar:"",th:"",ko:"",ja:"",zh:"","zh-tw":""},"undefined"==typeof window.mxBasePath&&(window.mxBasePath="mxgraph");if(null==window.mxLanguages){window.mxLanguages=[];for(var lang in mxLanguageMap)"en"!=lang&&window.mxLanguages.push(lang)}window.uiTheme=window.uiTheme||function(){var e=urlParams.ui;if(null==e&&"undefined"!=typeof JSON&&isLocalStorage)try{var t=localStorage.getItem(".drawio-config");null!=t&&(e=JSON.parse(t).ui||null)}catch(n){isLocalStorage=!1}try{null==e&&414>=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)&&(e="min")}catch(n){}return e}(),function(){if("undefined"!=typeof JSON&&isLocalStorage)try{var e=localStorage.getItem(".drawio-config"),t=!0;null!=e&&(t=JSON.parse(e).showStartScreen),0==t&&(urlParams.splash="0")}catch(n){}e=urlParams["export"],null!=e&&("http://"!=e.substring(0,7)&&"https://"!=e.substring(0,8)&&(e="http://"+e),EXPORT_URL=e),window.DRAWIO_LOG_URL=window.DRAWIO_LOG_URL||"",t=window.location.host,"test.draw.io"!=t&&(e=t.length-7,t=t.lastIndexOf("draw.io",e),-1!==t&&t===e&&(window.DRAWIO_LOG_URL="https://log.draw.io"))}();if("1"==urlParams.offline||"1"==urlParams.demo||"1"==urlParams.stealth||"1"==urlParams.local)urlParams.picker="0",urlParams.gapi="0",urlParams.db="0",urlParams.od="0",urlParams.gh="0",urlParams.tr="0";if("1"==urlParams.offline||"1"==urlParams.local)urlParams.math="0";"1"==urlParams.lightbox&&(urlParams.chrome="0"),window.urlParams=window.urlParams||{},window.MAX_REQUEST_SIZE=window.MAX_REQUEST_SIZE||10485760,window.MAX_AREA=window.MAX_AREA||225e6,window.EXPORT_URL=window.EXPORT_URL||"/export",window.SAVE_URL=window.SAVE_URL||"/save",window.OPEN_URL=window.OPEN_URL||"/open",window.RESOURCES_PATH=window.RESOURCES_PATH||"resources",window.RESOURCE_BASE=window.RESOURCE_BASE||window.RESOURCES_PATH+"/grapheditor",window.STENCIL_PATH=window.STENCIL_PATH||"stencils",window.IMAGE_PATH=window.IMAGE_PATH||"images",window.STYLE_PATH=window.STYLE_PATH||"styles",window.CSS_PATH=window.CSS_PATH||"styles",window.OPEN_FORM=window.OPEN_FORM||"open.html",window.mxBasePath=window.mxBasePath||"../../../src",window.mxLanguage=window.mxLanguage||urlParams.lang,window.mxLanguages=window.mxLanguages||["de"];var mxClient={VERSION:"3.9.13",IS_IE:0<=navigator.userAgent.indexOf("MSIE"),IS_IE6:0<=navigator.userAgent.indexOf("MSIE 6"),IS_IE11:!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:!!navigator.userAgent.match(/Edge\//),IS_QUIRKS:0<=navigator.userAgent.indexOf("MSIE")&&(null==document.documentMode||5==document.documentMode),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:0<=navigator.userAgent.indexOf("Mozilla/")&&0>navigator.userAgent.indexOf("MSIE")&&0>navigator.userAgent.indexOf("Edge/"),IS_OP:0<=navigator.userAgent.indexOf("Opera/")||0<=navigator.userAgent.indexOf("OPR/"),IS_OT:0<=navigator.userAgent.indexOf("Presto/")&&0>navigator.userAgent.indexOf("Presto/2.4.")&&0>navigator.userAgent.indexOf("Presto/2.3.")&&0>navigator.userAgent.indexOf("Presto/2.2.")&&0>navigator.userAgent.indexOf("Presto/2.1.")&&0>navigator.userAgent.indexOf("Presto/2.0.")&&0>navigator.userAgent.indexOf("Presto/1."),IS_SF:0<=navigator.userAgent.indexOf("AppleWebKit/")&&0>navigator.userAgent.indexOf("Chrome/")&&0>navigator.userAgent.indexOf("Edge/"),IS_IOS:navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,IS_GC:0<=navigator.userAgent.indexOf("Chrome/")&&0>navigator.userAgent.indexOf("Edge/"),IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:0<=navigator.userAgent.indexOf("Firefox/"),IS_MT:0<=navigator.userAgent.indexOf("Firefox/")&&0>navigator.userAgent.indexOf("Firefox/1.")&&0>navigator.userAgent.indexOf("Firefox/2.")||0<=navigator.userAgent.indexOf("Iceweasel/")&&0>navigator.userAgent.indexOf("Iceweasel/1.")&&0>navigator.userAgent.indexOf("Iceweasel/2.")||0<=navigator.userAgent.indexOf("SeaMonkey/")&&0>navigator.userAgent.indexOf("SeaMonkey/1.")||0<=navigator.userAgent.indexOf("Iceape/")&&0>navigator.userAgent.indexOf("Iceape/1."),IS_SVG:0<=navigator.userAgent.indexOf("Firefox/")||0<=navigator.userAgent.indexOf("Iceweasel/")||0<=navigator.userAgent.indexOf("Seamonkey/")||0<=navigator.userAgent.indexOf("Iceape/")||0<=navigator.userAgent.indexOf("Galeon/")||0<=navigator.userAgent.indexOf("Epiphany/")||0<=navigator.userAgent.indexOf("AppleWebKit/")||0<=navigator.userAgent.indexOf("Gecko/")||0<=navigator.userAgent.indexOf("Opera/")||null!=document.documentMode&&9<=document.documentMode,NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!=document.createElementNS("http://www.w3.org/2000/svg","foreignObject")||0<=navigator.userAgent.indexOf("Opera/"),IS_VML:"MICROSOFT INTERNET EXPLORER"==navigator.appName.toUpperCase(),IS_WIN:0<navigator.appVersion.indexOf("Win"),IS_MAC:0<navigator.appVersion.indexOf("Mac"),IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent&&!(0<navigator.appVersion.indexOf("Mac")),IS_LOCAL:0>document.location.href.indexOf("http://")&&0>document.location.href.indexOf("https://"),defaultBundles:[],isBrowserSupported:function(){return mxClient.IS_VML||mxClient.IS_SVG},link:function(e,t,n){n=n||document;if(mxClient.IS_IE6)n.write('<link rel="'+e+'" href="'+t+'" charset="UTF-8" type="text/css"/>');else{var r=n.createElement("link");r.setAttribute("rel",e),r.setAttribute("href",t),r.setAttribute("charset","UTF-8"),r.setAttribute("type","text/css"),n.getElementsByTagName("head")[0].appendChild(r)}},loadResources:function(e,t){function n(){0==--r&&e()}for(var r=mxClient.defaultBundles.length,i=0;i<mxClient.defaultBundles.length;i++)mxResources.add(mxClient.defaultBundles[i],t,n)},include:function(e){document.write('<script src="'+e+'"></script>')}};"undefined"==typeof mxLoadResources&&(mxLoadResources=!0),"undefined"==typeof mxForceIncludes&&(mxForceIncludes=!1),"undefined"==typeof mxResourceExtension&&(mxResourceExtension=".txt"),"undefined"==typeof mxLoadStylesheets&&(mxLoadStylesheets=!0),"undefined"!=typeof mxBasePath&&0<mxBasePath.length?("/"==mxBasePath.substring(mxBasePath.length-1)&&(mxBasePath=mxBasePath.substring(0,mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath=".","undefined"!=typeof mxImageBasePath&&0<mxImageBasePath.length?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath=mxClient.basePath+"/images",mxClient.language="undefined"!=typeof mxLanguage&&null!=mxLanguage?mxLanguage:mxClient.IS_IE?navigator.userLanguage:navigator.language,mxClient.defaultLanguage="undefined"!=typeof mxDefaultLanguage&&null!=mxDefaultLanguage?mxDefaultLanguage:"en",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/common.css"),"undefined"!=typeof mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages),mxClient.IS_VML&&(mxClient.IS_SVG?mxClient.IS_VML=!1:(8==document.documentMode?(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml","#default#VML"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office","#default#VML")):(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office")),mxClient.IS_QUIRKS&&30<=document.styleSheets.length?function(){var e=document.createElement("style");e.type="text/css",e.styleSheet.cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",document.getElementsByTagName("head")[0].appendChild(e)}():document.createStyleSheet().cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/explorer.css")));var mxLog={consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){if(null==mxLog.window&&null!=document.body){var e=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,t=document.createElement("table");t.setAttribute("width","100%"),t.setAttribute("height","100%");var n=document.createElement("tbody"),r=document.createElement("tr"),i=document.createElement("td");i.style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("wrap","off"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxLog.textarea.style.width=mxClient.IS_NS&&"BackCompat"!=document.compatMode?"99%":"100%",i.appendChild(mxLog.textarea),r.appendChild(i),n.appendChild(r),r=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),r.appendChild(mxLog.td),n.appendChild(r),t.appendChild(n),mxLog.addButton("Info",function(e){mxLog.info()}),mxLog.addButton("DOM",function(e){e=mxUtils.getInnerHtml(document.body),mxLog.debug(e)}),mxLog.addButton("Trace",function(e){mxLog.TRACE=!mxLog.TRACE,mxLog.TRACE?mxLog.debug("Tracing enabled"):mxLog.debug("Tracing disabled")}),mxLog.addButton("Copy",function(e){try{mxUtils.copy(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Show",function(e){try{mxUtils.popup(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Clear",function(e){mxLog.textarea.value=""}),r=n=0,"number"==typeof window.innerWidth?(n=window.innerHeight,r=window.innerWidth):(n=document.documentElement.clientHeight||document.body.clientHeight,r=document.body.clientWidth),mxLog.window=new mxWindow(e,t,Math.max(0,r-320),Math.max(0,n-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1;if((mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&"BackCompat"!=document.compatMode||11==document.documentMode){var s=mxLog.window.getElement(),e=function(e,t){mxLog.textarea.style.height=Math.max(0,s.offsetHeight-70)+"px"};mxLog.window.addListener(mxEvent.RESIZE_END,e),mxLog.window.addListener(mxEvent.MAXIMIZE,e),mxLog.window.addListener(mxEvent.NORMALIZE,e),mxLog.textarea.style.height="92px"}}},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(e,t){var n=document.createElement("button");mxUtils.write(n,e),mxEvent.addListener(n,"click",t),mxLog.td.appendChild(n)},isVisible:function(){return null!=mxLog.window?mxLog.window.isVisible():!1},show:function(){mxLog.setVisible(!0)},setVisible:function(e){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(e)},enter:function(e){if(mxLog.TRACE)return mxLog.writeln("Entering "+e),(new Date).getTime()},leave:function(e,t){if(mxLog.TRACE){var n=0!=t?" ("+((new Date).getTime()-t)+" ms)":"";mxLog.writeln("Leaving "+e+n)}},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");null!=mxLog.textarea?(mxLog.textarea.value+=e,0<=navigator.userAgent.indexOf("Presto/2.5")&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=e},writeln:function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");mxLog.write(e+"\n")}},mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(e){if(null!=e){if(null==e[mxObjectIdentity.FIELD_NAME])if("object"==typeof e){var t=mxUtils.getFunctionName(e.constructor);e[mxObjectIdentity.FIELD_NAME]=t+"#"+mxObjectIdentity.counter++}else"function"==typeof e&&(e[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++);return e[mxObjectIdentity.FIELD_NAME]}return null},clear:function(e){"object"!=typeof e&&"function"!=typeof e||delete e[mxObjectIdentity.FIELD_NAME]}};mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(e){return e=mxObjectIdentity.get(e),this.map[e]},mxDictionary.prototype.put=function(e,t){var n=mxObjectIdentity.get(e),r=this.map[n];return this.map[n]=t,r},mxDictionary.prototype.remove=function(e){e=mxObjectIdentity.get(e);var t=this.map[e];return delete this.map[e],t},mxDictionary.prototype.getKeys=function(){var e=[],t;for(t in this.map)e.push(t);return e},mxDictionary.prototype.getValues=function(){var e=[],t;for(t in this.map)e.push(this.map[t]);return e},mxDictionary.prototype.visit=function(e){for(var t in this.map)e(t,this.map[t])};var mxResources={resources:{},extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(e){return null!=mxClient.languages?0<=mxUtils.indexOf(mxClient.languages,e):!0},getDefaultBundle:function(e,t){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(t)?e+mxResources.extension:null},getSpecialBundle:function(e,t){if(null==mxClient.languages||!this.isLanguageSupported(t)){var n=t.indexOf("-");0<n&&(t=t.substring(0,n))}return mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(t)&&t!=mxClient.defaultLanguage?e+"_"+t+mxResources.extension:null},add:function(e,t,n){t=null!=t?t:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE;if(t!=mxConstants.NONE){var r=mxResources.getDefaultBundle(e,t),i=mxResources.getSpecialBundle(e,t),s=function(){if(null!=i)if(n)mxUtils.get(i,function(e){mxResources.parse(e.getText()),n()},function(){n()});else try{var e=mxUtils.load(i);e.isReady()&&mxResources.parse(e.getText())}catch(t){}else null!=n&&n()};if(null!=r)if(n)mxUtils.get(r,function(e){mxResources.parse(e.getText()),s()},function(){s()});else try{var o=mxUtils.load(r);o.isReady()&&mxResources.parse(o.getText()),s()}catch(u){}else s()}},parse:function(e){if(null!=e){e=e.split("\n");for(var t=0;t<e.length;t++)if("#"!=e[t].charAt(0)){var n=e[t].indexOf("=");if(0<n){var r=e[t].substring(0,n),i=e[t].length;13==e[t].charCodeAt(i-1)&&i--,n=e[t].substring(n+1,i),this.resourcesEncoded?(n=n.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[r]=unescape(n)):mxResources.resources[r]=n}}}},get:function(e,t,n){return e=mxResources.resources[e],null==e&&(e=n),null!=e&&null!=t&&(e=mxResources.replacePlaceholders(e,t)),e},replacePlaceholders:function(e,t){for(var n=[],r=null,i=0;i<e.length;i++){var s=e.charAt(i);"{"==s?r="":null!=r&&"}"==s?(r=parseInt(r)-1,0<=r&&r<t.length&&n.push(t[r]),r=null):null!=r?r+=s:n.push(s)}return n.join("")},loadResources:function(e){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,e)})}};mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(e){if(null!=e){var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width);e=Math.max(this.y+this.height,e.y+e.height),this.x=t,this.y=n,this.width=r-t,this.height=e-n}},mxRectangle.prototype.intersect=function(e){if(null!=e){var t=this.x+this.width,n=e.x+e.width,r=this.y+this.height,i=e.y+e.height;this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.width=Math.min(t,n)-this.x,this.height=Math.min(r,i)-this.y}},mxRectangle.prototype.grow=function(e){this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e,e=this.width,this.width=this.height,this.height=e},mxRectangle.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height},mxRectangle.fromRectangle=function(e){return new mxRectangle(e.x,e.y,e.width,e.height)};var mxEffects={animateChanges:function(e,t,n){var r=0,i=function(){for(var o=!1,u=0;u<t.length;u++){var l=t[u];if(l instanceof mxGeometryChange||l instanceof mxTerminalChange||l instanceof mxValueChange||l instanceof mxChildChange||l instanceof mxStyleChange){var h=e.getView().getState(l.cell||l.child,!1);if(null!=h)if(o=!0,l.constructor!=mxGeometryChange||e.model.isEdge(l.cell))mxUtils.setOpacity(h.shape.node,100*r/10);else{var p=e.getView().scale,v=(l.geometry.x-l.previous.x)*p,m=(l.geometry.y-l.previous.y)*p,g=(l.geometry.width-l.previous.width)*p,p=(l.geometry.height-l.previous.height)*p;0==r?(h.x-=v,h.y-=m,h.width-=g,h.height-=p):(h.x+=v/10,h.y+=m/10,h.width+=g/10,h.height+=p/10),e.cellRenderer.redraw(h),mxEffects.cascadeOpacity(e,l.cell,100*r/10)}}}10>r&&o?(r++,window.setTimeout(i,s)):null!=n&&n()},s=30;i()},cascadeOpacity:function(e,t,n){for(var r=e.model.getChildCount(t),i=0;i<r;i++){var s=e.model.getChildAt(t,i),o=e.getView().getState(s);null!=o&&(mxUtils.setOpacity(o.shape.node,n),mxEffects.cascadeOpacity(e,s,n))}t=e.model.getEdges(t);if(null!=t)for(i=0;i<t.length;i++)r=e.getView().getState(t[i]),null!=r&&mxUtils.setOpacity(r.shape.node,n)},fadeOut:function(e,t,n,r,i,s){r=r||40,i=i||30;var o=t||100;mxUtils.setOpacity(e,o);if(s||null==s){var u=function(){o=Math.max(o-r,0),mxUtils.setOpacity(e,o),0<o?window.setTimeout(u,i):(e.style.visibility="hidden",n&&e.parentNode&&e.parentNode.removeChild(e))};window.setTimeout(u,i)}else e.style.visibility="hidden",n&&e.parentNode&&e.parentNode.removeChild(e)}},mxUtils={errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(e){null!=e.style&&(e.style.cursor=""),e=e.childNodes;if(null!=e)for(var t=e.length,n=0;n<t;n+=1)mxUtils.removeCursors(e[n])},getCurrentStyle:function(){return mxClient.IS_IE&&(null==document.documentMode||9>document.documentMode)?function(e){return null!=e?e.currentStyle:null}:function(e){return null!=e?window.getComputedStyle(e,""):null}}(),parseCssNumber:function(e){return"thin"==e?e="2":"medium"==e?e="4":"thick"==e&&(e="6"),e=parseFloat(e),isNaN(e)&&(e=0),e},setPrefixedStyle:function(){var e=null;return mxClient.IS_OT?e="O":mxClient.IS_SF||mxClient.IS_GC?e="Webkit":mxClient.IS_MT?e="Moz":mxClient.IS_IE&&9<=document.documentMode&&10>document.documentMode&&(e="ms"),function(t,n,r){t[n]=r,null!=e&&0<n.length&&(n=e+n.substring(0,1).toUpperCase()+n.substring(1),t[n]=r)}}(),hasScrollbars:function(e){return e=mxUtils.getCurrentStyle(e),null!=e&&("scroll"==e.overflow||"auto"==e.overflow)},bind:function(e,t){return function(){return t.apply(e,arguments)}},eval:function(a){var b=null;if(0<=a.indexOf("function"))try{eval("var _mxJavaScriptExpression="+a),b=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(c){mxLog.warn(c.message+" while evaluating "+a)}else try{b=eval(a)}catch(c){mxLog.warn(c.message+" while evaluating "+a)}return b},findNode:function(e,t,n){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var r=e.getAttribute(t);if(null!=r&&r==n)return e}for(e=e.firstChild;null!=e;){r=mxUtils.findNode(e,t,n);if(null!=r)return r;e=e.nextSibling}return null},getFunctionName:function(e){var t=null;return null!=e&&(null!=e.name?t=e.name:(t=mxUtils.trim(e.toString()),/^function\s/.test(t)&&(t=mxUtils.ltrim(t.substring(9)),e=t.indexOf("("),0<e&&(t=t.substring(0,e))))),t},indexOf:function(e,t){if(null!=e&&null!=t)for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},forEach:function(e,t){if(null!=e&&null!=t)for(var n=0;n<e.length;n++)t(e[n]);return e},remove:function(e,t){var n=null;if("object"==typeof t)for(var r=mxUtils.indexOf(t,e);0<=r;)t.splice(r,1),n=e,r=mxUtils.indexOf(t,e);for(var i in t)t[i]==e&&(delete t[i],n=e);return n},isNode:function(e,t,n,r){return null==e||isNaN(e.nodeType)||null!=t&&e.nodeName.toLowerCase()!=t.toLowerCase()?!1:null==n||e.getAttribute(n)==r},isAncestorNode:function(e,t){for(var n=t;null!=n;){if(n==e)return!0;n=n.parentNode}return!1},getChildNodes:function(e,t){t=t||mxConstants.NODETYPE_ELEMENT;for(var n=[],r=e.firstChild;null!=r;)r.nodeType==t&&n.push(r),r=r.nextSibling;return n},importNode:function(e,t,n){if(!mxClient.IS_IE||!(null==document.documentMode||10>document.documentMode))return e.importNode(t,n);switch(t.nodeType){case 1:var r=e.createElement(t.nodeName);if(t.attributes&&0<t.attributes.length){for(var i=0;i<t.attributes.length;i++)r.setAttribute(t.attributes[i].nodeName,t.getAttribute(t.attributes[i].nodeName));if(n&&t.childNodes&&0<t.childNodes.length)for(i=0;i<t.childNodes.length;i++)r.appendChild(mxUtils.importNode(e,t.childNodes[i],n))}return r;case 3:case 4:case 8:return e.createTextNode(t.value)}},createXmlDocument:function(){var e=null;return document.implementation&&document.implementation.createDocument?e=document.implementation.createDocument("","",null):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM")),e},parseXml:function(){return window.DOMParser?function(e){return(new DOMParser).parseFromString(e,"text/xml")}:function(e){var t=mxUtils.createXmlDocument();return t.async=!1,t.validateOnParse=!1,t.resolveExternals=!1,t.loadXML(e),t}}(),clearSelection:function(){return document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){}}(),getPrettyXml:function(e,t,n){var r=[];if(null!=e)if(t=t||"  ",n=n||"",e.nodeType==mxConstants.NODETYPE_TEXT)e=mxUtils.trim(mxUtils.getTextContent(e)),0<e.length&&r.push(n+mxUtils.htmlEntities(e)+"\n");else{r.push(n+"<"+e.nodeName);var i=e.attributes;if(null!=i)for(var s=0;s<i.length;s++){var o=mxUtils.htmlEntities(i[s].value);r.push(" "+i[s].nodeName+'="'+o+'"')}i=e.firstChild;if(null!=i){for(r.push(">\n");null!=i;)r.push(mxUtils.getPrettyXml(i,t,n+t)),i=i.nextSibling;r.push(n+"</"+e.nodeName+">\n")}else r.push("/>\n")}return r.join("")},removeWhitespace:function(e,t){for(var n=t?e.previousSibling:e.nextSibling;null!=n&&n.nodeType==mxConstants.NODETYPE_TEXT;){var r=t?n.previousSibling:n.nextSibling,i=mxUtils.getTextContent(n);0==mxUtils.trim(i).length&&n.parentNode.removeChild(n),n=r}},htmlEntities:function(e,t){e=String(e||""),e=e.replace(/&/g,"&amp;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/\'/g,"&#39;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;");if(null==t||t)e=e.replace(/\n/g,"&#xa;");return e},isVml:function(e){return null!=e&&"urn:schemas-microsoft-com:vml"==e.tagUrn},getXml:function(e,t){var n="";return null!=window.XMLSerializer?n=(new XMLSerializer).serializeToString(e):null!=e.xml&&(n=e.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")),n.replace(/\n/g,t||"&#xa;")},extractTextWithWhitespace:function(e){function t(e){if(1!=e.length||"BR"!=e[0].nodeName&&"\n"!=e[0].innerHTML)for(var i=0;i<e.length;i++){var s=e[i];"BR"==s.nodeName||"\n"==s.innerHTML||(1==e.length||0==i)&&"DIV"==s.nodeName&&"<br>"==s.innerHTML.toLowerCase()?r.push("\n"):(3===s.nodeType||4===s.nodeType?0<s.nodeValue.length&&r.push(s.nodeValue):8!==s.nodeType&&0<s.childNodes.length&&t(s.childNodes),i<e.length-1&&0<=mxUtils.indexOf(n,e[i+1].nodeName)&&r.push("\n"))}}var n="BLOCKQUOTE DIV H1 H2 H3 H4 H5 H6 OL P PRE TABLE UL".split(" "),r=[];return t(e),r.join("")},replaceTrailingNewlines:function(e,t){for(var n="";0<e.length&&"\n"==e.charAt(e.length-1);)e=e.substring(0,e.length-1),n+=t;return e+n},getTextContent:function(e){return mxClient.IS_IE&&void 0!==e.innerText?e.innerText:null!=e?e[void 0===e.textContent?"text":"textContent"]:""},setTextContent:function(e,t){void 0!==e.innerText?e.innerText=t:e[void 0===e.textContent?"text":"textContent"]=t},getInnerHtml:function(){return mxClient.IS_IE?function(e){return null!=e?e.innerHTML:""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""}}(),getOuterHtml:function(){return mxClient.IS_IE?function(e){if(null!=e){if(null!=e.outerHTML)return e.outerHTML;var t=[];t.push("<"+e.nodeName);var n=e.attributes;if(null!=n)for(var r=0;r<n.length;r++){var i=n[r].value;null!=i&&0<i.length&&(t.push(" "),t.push(n[r].nodeName),t.push('="'),t.push(i),t.push('"'))}return 0==e.innerHTML.length?t.push("/>"):(t.push(">"),t.push(e.innerHTML),t.push("</"+e.nodeName+">")),t.join("")}return""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""}}(),write:function(e,t){var n=e.ownerDocument.createTextNode(t);return null!=e&&e.appendChild(n),n},writeln:function(e,t){var n=e.ownerDocument.createTextNode(t);return null!=e&&(e.appendChild(n),e.appendChild(document.createElement("br"))),n},br:function(e,t){t=t||1;for(var n=null,r=0;r<t;r++)null!=e&&(n=e.ownerDocument.createElement("br"),e.appendChild(n));return n},button:function(e,t,n){return n=null!=n?n:document,n=n.createElement("button"),mxUtils.write(n,e),mxEvent.addListener(n,"click",function(e){t(e)}),n},para:function(e,t){var n=document.createElement("p");return mxUtils.write(n,t),null!=e&&e.appendChild(n),n},addTransparentBackgroundFilter:function(e){e.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(e,t,n,r,i){return mxUtils.link(e,t,function(){n.execute(r)},i)},linkInvoke:function(e,t,n,r,i,s){return mxUtils.link(e,t,function(){n[r](i)},s)},link:function(e,t,n,r){var i=document.createElement("span");return i.style.color="blue",i.style.textDecoration="underline",i.style.cursor="pointer",null!=r&&(i.style.paddingLeft=r+"px"),mxEvent.addListener(i,"click",n),mxUtils.write(i,t),null!=e&&e.appendChild(i),i},fit:function(e){var t=parseInt(e.offsetLeft),n=parseInt(e.offsetWidth),r=mxUtils.getDocumentScrollOrigin(e.ownerDocument),i=r.x,r=r.y,s=document.body,o=document.documentElement,u=i+(s.clientWidth||o.clientWidth);t+n>u&&(e.style.left=Math.max(i,u-n)+"px"),t=parseInt(e.offsetTop),n=parseInt(e.offsetHeight),s=r+Math.max(s.clientHeight||0,o.clientHeight),t+n>s&&(e.style.top=Math.max(r,s-n)+"px")},load:function(e){return e=new mxXmlRequest(e,null,"GET",!1),e.send(),e},get:function(e,t,n,r,i,s){return e=new mxXmlRequest(e,null,"GET"),null!=r&&e.setBinary(r),e.send(t,n,i,s),e},getAll:function(e,t,n){for(var r=e.length,i=[],s=0,o=function(){0==s&&null!=n&&n(),s++},u=0;u<e.length;u++)(function(e,n){mxUtils.get(e,function(e){var s=e.getStatus();200>s||299<s?o():(i[n]=e,r--,0==r&&t(i))},o)})(e[u],u);0==r&&t(i)},post:function(e,t,n,r){return(new mxXmlRequest(e,t)).send(n,r)},submit:function(e,t,n,r){return(new mxXmlRequest(e,t)).simulate(n,r)},loadInto:function(e,t,n){mxClient.IS_IE?t.onreadystatechange=function(){4==t.readyState&&n()}:t.addEventListener("load",n,!1),t.load(e)},getValue:function(e,t,n){return e=null!=e?e[t]:null,null==e&&(e=n),e},getNumber:function(e,t,n){return e=null!=e?e[t]:null,null==e&&(e=n||0),Number(e)},getColor:function(e,t,n){return e=null!=e?e[t]:null,null==e?e=n:e==mxConstants.NONE&&(e=null),e},clone:function(e,t,n){n=null!=n?n:!1;var r=null;if(null!=e&&"function"==typeof e.constructor){var r=new e.constructor,i;for(i in e)i!=mxObjectIdentity.FIELD_NAME&&(null==t||0>mxUtils.indexOf(t,i))&&(r[i]=n||"object"!=typeof e[i]?e[i]:mxUtils.clone(e[i]))}return r},equalPoints:function(e,t){if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!=t.length)return!1;if(null!=e&&null!=t)for(var n=0;n<e.length;n++)if(e[n]==t[n]||null!=e[n]&&!e[n].equals(t[n]))return!1;return!0},equalEntries:function(e,t){if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!=t.length)return!1;if(null!=e&&null!=t){var n=0,r;for(r in t)n++;for(r in e)if(n--,!(mxUtils.isNaN(e[r])&&mxUtils.isNaN(t[r])||e[r]==t[r]))return!1}return 0==n},removeDuplicates:function(e){for(var t=new mxDictionary,n=[],r=0;r<e.length;r++)t.get(e[r])||(n.push(e[r]),t.put(e[r],!0));return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},extend:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},toString:function(e){var t="",n;for(n in e)try{if(null==e[n])t+=n+" = [null]\n";else if("function"==typeof e[n])t+=n+" => [Function]\n";else if("object"==typeof e[n])var r=mxUtils.getFunctionName(e[n].constructor),t=t+(n+" => ["+r+"]\n");else t+=n+" = "+e[n]+"\n"}catch(i){t+=n+"="+i.message}return t},toRadians:function(e){return Math.PI*e/180},toDegree:function(e){return 180*e/Math.PI},arcToCurves:function(e,t,n,r,i,s,o,u,a){u-=e,a-=t;if(0===n||0===r)return h;n=Math.abs(n),r=Math.abs(r);var f=-u/2,l=-a/2,c=Math.cos(i*Math.PI/180),h=Math.sin(i*Math.PI/180);i=c*f+h*l;var f=-1*h*f+c*l,l=i*i,p=f*f,d=n*n,v=r*r,m=l/d+p/v;1<m?(n*=Math.sqrt(m),r*=Math.sqrt(m),s=0):(m=1,s===o&&(m=-1),s=m*Math.sqrt((d*v-d*p-v*l)/(d*p+v*l))),l=s*n*f/r,p=-1*s*r*i/n,u=c*l-h*p+u/2,a=h*l+c*p+a/2,d=Math.atan2((f-p)/r,(i-l)/n)-Math.atan2(0,1),s=0<=d?d:2*Math.PI+d,d=Math.atan2((-f-p)/r,(-i-l)/n)-Math.atan2((f-p)/r,(i-l)/n),i=0<=d?d:2*Math.PI+d,0==o&&0<i?i-=2*Math.PI:0!=o&&0>i&&(i+=2*Math.PI),o=2*i/Math.PI,o=Math.ceil(0>o?-1*o:o),i/=o,f=8/3*Math.sin(i/4)*Math.sin(i/4)/Math.sin(i/2),l=c*n,c*=r,n*=h,r*=h;for(var g=Math.cos(s),y=Math.sin(s),p=-f*(l*y+r*g),d=-f*(n*y-c*g),h=[],b=0;b<o;++b){s+=i;var g=Math.cos(s),y=Math.sin(s),v=l*g-r*y+u,m=n*g+c*y+a,w=-f*(l*y+r*g),g=-f*(n*y-c*g),y=6*b;h[y]=Number(p+e),h[y+1]=Number(d+t),h[y+2]=Number(v-w+e),h[y+3]=Number(m-g+t),h[y+4]=Number(v+e),h[y+5]=Number(m+t),p=v+w,d=m+g}return h},getBoundingBox:function(e,t,n){var r=null;if(null!=e&&null!=t&&0!=t){t=mxUtils.toRadians(t);var r=Math.cos(t),i=Math.sin(t);n=null!=n?n:new mxPoint(e.x+e.width/2,e.y+e.height/2);var s=new mxPoint(e.x,e.y);t=new mxPoint(e.x+e.width,e.y);var o=new mxPoint(t.x,e.y+e.height);e=new mxPoint(e.x,o.y),s=mxUtils.getRotatedPoint(s,r,i,n),t=mxUtils.getRotatedPoint(t,r,i,n),o=mxUtils.getRotatedPoint(o,r,i,n),e=mxUtils.getRotatedPoint(e,r,i,n),r=new mxRectangle(s.x,s.y,0,0),r.add(new mxRectangle(t.x,t.y,0,0)),r.add(new mxRectangle(o.x,o.y,0,0)),r.add(new mxRectangle(e.x,e.y,0,0))}return r},getRotatedPoint:function(e,t,n,r){r=null!=r?r:new mxPoint;var i=e.x-r.x;return e=e.y-r.y,new mxPoint(i*t-e*n+r.x,e*t+i*n+r.y)},getPortConstraints:function(e,t,n,r){t=mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT,mxUtils.getValue(t.style,n?mxConstants.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants.STYLE_TARGET_PORT_CONSTRAINT,null));if(null==t)return r;r=t.toString(),t=mxConstants.DIRECTION_MASK_NONE,n=0,1==mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0)&&(n=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0)),e=0,45<n?(e=1,135<=n&&(e=2)):-45>n&&(e=3,-135>=n&&(e=2));if(0<=r.indexOf(mxConstants.DIRECTION_NORTH))switch(e){case 0:t|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:t|=mxConstants.DIRECTION_MASK_EAST;break;case 2:t|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:t|=mxConstants.DIRECTION_MASK_WEST}if(0<=r.indexOf(mxConstants.DIRECTION_WEST))switch(e){case 0:t|=mxConstants.DIRECTION_MASK_WEST;break;case 1:t|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:t|=mxConstants.DIRECTION_MASK_EAST;break;case 3:t|=mxConstants.DIRECTION_MASK_SOUTH}if(0<=r.indexOf(mxConstants.DIRECTION_SOUTH))switch(e){case 0:t|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:t|=mxConstants.DIRECTION_MASK_WEST;break;case 2:t|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:t|=mxConstants.DIRECTION_MASK_EAST}if(0<=r.indexOf(mxConstants.DIRECTION_EAST))switch(e){case 0:t|=mxConstants.DIRECTION_MASK_EAST;break;case 1:t|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:t|=mxConstants.DIRECTION_MASK_WEST;break;case 3:t|=mxConstants.DIRECTION_MASK_NORTH}return t},reversePortConstraints:function(e){var t;return t=(e&mxConstants.DIRECTION_MASK_WEST)<<3,t|=(e&mxConstants.DIRECTION_MASK_NORTH)<<1,t|=(e&mxConstants.DIRECTION_MASK_SOUTH)>>1,t|(e&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(e,t,n){var r=-1;if(0<e.absolutePoints.length)for(var i=e.absolutePoints[0],s=null,o=1;o<e.absolutePoints.length;o++){var u=e.absolutePoints[o],i=mxUtils.ptSegDistSq(i.x,i.y,u.x,u.y,t,n);if(null==s||i<s)s=i,r=o-1;i=u}return r},getDirectedBounds:function(e,t,n,r,i){var s=mxUtils.getValue(n,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST);r=null!=r?r:mxUtils.getValue(n,mxConstants.STYLE_FLIPH,!1),i=null!=i?i:mxUtils.getValue(n,mxConstants.STYLE_FLIPV,!1),t.x=Math.round(Math.max(0,Math.min(e.width,t.x))),t.y=Math.round(Math.max(0,Math.min(e.height,t.y))),t.width=Math.round(Math.max(0,Math.min(e.width,t.width))),t.height=Math.round(Math.max(0,Math.min(e.height,t.height)));if(i&&(s==mxConstants.DIRECTION_SOUTH||s==mxConstants.DIRECTION_NORTH)||r&&(s==mxConstants.DIRECTION_EAST||s==mxConstants.DIRECTION_WEST))n=t.x,t.x=t.width,t.width=n;if(r&&(s==mxConstants.DIRECTION_SOUTH||s==mxConstants.DIRECTION_NORTH)||i&&(s==mxConstants.DIRECTION_EAST||s==mxConstants.DIRECTION_WEST))n=t.y,t.y=t.height,t.height=n;return r=mxRectangle.fromRectangle(t),s==mxConstants.DIRECTION_SOUTH?(r.y=t.x,r.x=t.height,r.width=t.y,r.height=t.width):s==mxConstants.DIRECTION_WEST?(r.y=t.height,r.x=t.width,r.width=t.x,r.height=t.y):s==mxConstants.DIRECTION_NORTH&&(r.y=t.width,r.x=t.y,r.width=t.height,r.height=t.x),new mxRectangle(e.x+r.x,e.y+r.y,e.width-r.width-r.x,e.height-r.height-r.y)},getPerimeterPoint:function(e,t,n){for(var r=null,i=0;i<e.length-1;i++){var s=mxUtils.intersection(e[i].x,e[i].y,e[i+1].x,e[i+1].y,t.x,t.y,n.x,n.y);if(null!=s){var o=n.x-s.x,u=n.y-s.y,s={p:s,distSq:u*u+o*o};null!=s&&(null==r||r.distSq>s.distSq)&&(r=s)}}return null!=r?r.p:null},rectangleIntersectsSegment:function(e,t,n){var r=e.y,i=e.x,s=r+e.height,o=i+e.width;e=t.x;var u=n.x;t.x>n.x&&(e=n.x,u=t.x),u>o&&(u=o),e<i&&(e=i);if(e>u)return!1;var i=t.y,o=n.y,a=n.x-t.x;return 1e-7<Math.abs(a)&&(n=(n.y-t.y)/a,t=t.y-n*t.x,i=n*e+t,o=n*u+t),i>o&&(t=o,o=i,i=t),o>s&&(o=s),i<r&&(i=r),i>o?!1:!0},contains:function(e,t,n){return e.x<=t&&e.x+e.width>=t&&e.y<=n&&e.y+e.height>=n},intersects:function(e,t){var n=e.width,r=e.height,i=t.width,s=t.height;if(0>=i||0>=s||0>=n||0>=r)return!1;var o=e.x,u=e.y,a=t.x,f=t.y,i=i+a,s=s+f,n=n+o,r=r+u;return(i<a||i>o)&&(s<f||s>u)&&(n<o||n>a)&&(r<u||r>f)},intersectsHotspot:function(e,t,n,r,i,s){r=null!=r?r:1,i=null!=i?i:0,s=null!=s?s:0;if(0<r){var o=e.getCenterX(),u=e.getCenterY(),a=e.width,f=e.height,l=mxUtils.getValue(e.style,mxConstants.STYLE_STARTSIZE)*e.view.scale;return 0<l&&(mxUtils.getValue(e.style,mxConstants.STYLE_HORIZONTAL,!0)?(u=e.y+l/2,f=l):(o=e.x+l/2,a=l)),a=Math.max(i,a*r),f=Math.max(i,f*r),0<s&&(a=Math.min(a,s),f=Math.min(f,s)),r=new mxRectangle(o-a/2,u-f/2,a,f),o=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0),0!=o&&(i=Math.cos(-o),s=Math.sin(-o),o=new mxPoint(e.getCenterX(),e.getCenterY()),e=mxUtils.getRotatedPoint(new mxPoint(t,n),i,s,o),t=e.x,n=e.y),mxUtils.contains(r,t,n)}return!0},getOffset:function(e,t){for(var n=0,r=0,i=!1,s=e,o=document.body,u=document.documentElement;null!=s&&s!=o&&s!=u&&!i;){var a=mxUtils.getCurrentStyle(s);null!=a&&(i=i||"fixed"==a.position),s=s.parentNode}return t||i||(i=mxUtils.getDocumentScrollOrigin(e.ownerDocument),n+=i.x,r+=i.y),i=e.getBoundingClientRect(),null!=i&&(n+=i.left,r+=i.top),new mxPoint(n,r)},getDocumentScrollOrigin:function(e){return mxClient.IS_QUIRKS?new mxPoint(e.body.scrollLeft,e.body.scrollTop):(e=e.defaultView||e.parentWindow,new mxPoint(null!=e&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,null!=e&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop))},getScrollOrigin:function(e,t,n){t=null!=t?t:!1,n=null!=n?n:!0;for(var r=null!=e?e.ownerDocument:document,i=r.body,s=r.documentElement,o=new mxPoint,u=!1;null!=e&&e!=i&&e!=s;){isNaN(e.scrollLeft)||isNaN(e.scrollTop)||(o.x+=e.scrollLeft,o.y+=e.scrollTop);var a=mxUtils.getCurrentStyle(e);null!=a&&(u=u||"fixed"==a.position),e=t?e.parentNode:null}return!u&&n&&(e=mxUtils.getDocumentScrollOrigin(r),o.x+=e.x,o.y+=e.y),o},convertPoint:function(e,t,n){var r=mxUtils.getScrollOrigin(e,!1);return e=mxUtils.getOffset(e),e.x-=r.x,e.y-=r.y,new mxPoint(t-e.x,n-e.y)},ltrim:function(e,t){return null!=e?e.replace(new RegExp("^["+(t||"\\s")+"]+","g"),""):null},rtrim:function(e,t){return null!=e?e.replace(new RegExp("["+(t||"\\s")+"]+$","g"),""):null},trim:function(e,t){return mxUtils.ltrim(mxUtils.rtrim(e,t),t)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)&&("string"!=typeof e||0>e.toLowerCase().indexOf("0x"))},isInteger:function(e){return String(parseInt(e))===String(e)},mod:function(e,t){return(e%t+t)%t},intersection:function(e,t,n,r,i,s,o,u){var a=(u-s)*(n-e)-(o-i)*(r-t);return o=((o-i)*(t-s)-(u-s)*(e-i))/a,i=((n-e)*(t-s)-(r-t)*(e-i))/a,0<=o&&1>=o&&0<=i&&1>=i?new mxPoint(e+o*(n-e),t+o*(r-t)):null},ptSegDistSq:function(e,t,n,r,i,s){return n-=e,r-=t,i-=e,s-=t,0>=i*n+s*r?n=0:(i=n-i,s=r-s,e=i*n+s*r,n=0>=e?0:e*e/(n*n+r*r)),i=i*i+s*s-n,0>i&&(i=0),i},ptLineDist:function(e,t,n,r,i,s){return Math.abs((r-t)*i-(n-e)*s+n*t-r*e)/Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))},relativeCcw:function(e,t,n,r,i,s){return n-=e,r-=t,i-=e,s-=t,e=i*r-s*n,0==e&&(e=i*n+s*r,0<e&&(e=(i-n)*n+(s-r)*r,0>e&&(e=0))),0>e?-1:0<e?1:0},animateChanges:function(e,t){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(e,t,n){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(e,t,n,r,i,s){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(e,t){mxUtils.isVml(e)?e.style.filter=100<=t?"":"alpha(opacity="+t/5+")":mxClient.IS_IE&&("undefined"==typeof document.documentMode||9>document.documentMode)?e.style.filter=100<=t?"":"alpha(opacity="+t+")":e.style.opacity=t/100},createImage:function(e){var t;return mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?(t=document.createElement(mxClient.VML_PREFIX+":image"),t.setAttribute("src",e),t.style.borderStyle="none"):(t=document.createElement("img"),t.setAttribute("src",e),t.setAttribute("border","0")),t},sortCells:function(e,t){t=null!=t?t:!0;var n=new mxDictionary;return e.sort(function(e,r){var i=n.get(e);null==i&&(i=mxCellPath.create(e).split(mxCellPath.PATH_SEPARATOR),n.put(e,i));var s=n.get(r);return null==s&&(s=mxCellPath.create(r).split(mxCellPath.PATH_SEPARATOR),n.put(r,s)),i=mxCellPath.compare(i,s),0==i?0:0<i==t?1:-1}),e},getStylename:function(e){return null!=e&&(e=e.split(";")[0],0>e.indexOf("="))?e:""},getStylenames:function(e){var t=[];if(null!=e){e=e.split(";");for(var n=0;n<e.length;n++)0>e[n].indexOf("=")&&t.push(e[n])}return t},indexOfStylename:function(e,t){if(null!=e&&null!=t)for(var n=e.split(";"),r=0,i=0;i<n.length;i++){if(n[i]==t)return r;r+=n[i].length+1}return-1},addStylename:function(e,t){return 0>mxUtils.indexOfStylename(e,t)&&(null==e?e="":0<e.length&&";"!=e.charAt(e.length-1)&&(e+=";"),e+=t),e},removeStylename:function(e,t){var n=[];if(null!=e)for(var r=e.split(";"),i=0;i<r.length;i++)r[i]!=t&&n.push(r[i]);return n.join(";")},removeAllStylenames:function(e){var t=[];if(null!=e){e=e.split(";");for(var n=0;n<e.length;n++)0<=e[n].indexOf("=")&&t.push(e[n])}return t.join(";")},setCellStyles:function(e,t,n,r){if(null!=t&&0<t.length){e.beginUpdate();try{for(var i=0;i<t.length;i++)if(null!=t[i]){var s=mxUtils.setStyle(e.getStyle(t[i]),n,r);e.setStyle(t[i],s)}}finally{e.endUpdate()}}},setStyle:function(e,t,n){var r=null!=n&&("undefined"==typeof n.length||0<n.length);if(null==e||0==e.length)r&&(e=t+"="+n+";");else if(e.substring(0,t.length+1)==t+"="){var i=e.indexOf(";");e=r?t+"="+n+(0>i?";":e.substring(i)):0>i||i==e.length-1?"":e.substring(i+1)}else{var s=e.indexOf(";"+t+"=");0>s?r&&(r=";"==e.charAt(e.length-1)?"":";",e=e+r+t+"="+n+";"):(i=e.indexOf(";",s+1),e=r?e.substring(0,s+1)+t+"="+n+(0>i?";":e.substring(i)):e.substring(0,s)+(0>i?";":e.substring(i)))}return e},setCellStyleFlags:function(e,t,n,r,i){if(null!=t&&0<t.length){e.beginUpdate();try{for(var s=0;s<t.length;s++)if(null!=t[s]){var o=mxUtils.setStyleFlag(e.getStyle(t[s]),n,r,i);e.setStyle(t[s],o)}}finally{e.endUpdate()}}},setStyleFlag:function(e,t,n,r){if(null==e||0==e.length)e=r||null==r?t+"="+n:t+"=0";else{var i=e.indexOf(t+"=");if(0>i)i=";"==e.charAt(e.length-1)?"":";",e=r||null==r?e+i+t+"="+n:e+i+t+"=0";else{var s=e.indexOf(";",i),o;o=0>s?e.substring(i+t.length+1):e.substring(i+t.length+1,s),o=null==r?parseInt(o)^n:r?parseInt(o)|n:parseInt(o)&~n,e=e.substring(0,i)+t+"="+o+(0<=s?e.substring(s):"")}}return e},getAlignmentAsPoint:function(e,t){var n=0,r=0;return e==mxConstants.ALIGN_CENTER?n=-0.5:e==mxConstants.ALIGN_RIGHT&&(n=-1),t==mxConstants.ALIGN_MIDDLE?r=-0.5:t==mxConstants.ALIGN_BOTTOM&&(r=-1),new mxPoint(n,r)},getSizeForString:function(e,t,n,r){t=null!=t?t:mxConstants.DEFAULT_FONTSIZE,n=null!=n?n:mxConstants.DEFAULT_FONTFAMILY;var i=document.createElement("div");return i.style.fontFamily=n,i.style.fontSize=Math.round(t)+"px",i.style.lineHeight=Math.round(t*mxConstants.LINE_HEIGHT)+"px",i.style.position="absolute",i.style.visibility="hidden",i.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",i.style.zoom="1",null!=r?(i.style.width=r+"px",i.style.whiteSpace="normal"):i.style.whiteSpace="nowrap",i.innerHTML=e,document.body.appendChild(i),e=new mxRectangle(0,0,i.offsetWidth,i.offsetHeight),document.body.removeChild(i),e},getViewXml:function(e,t,n,r,i){r=null!=r?r:0,i=null!=i?i:0,t=null!=t?t:1,null==n&&(n=[e.getModel().getRoot()]);var s=e.getView(),o=null,u=s.isEventsEnabled();s.setEventsEnabled(!1);var a=s.drawPane,f=s.overlayPane;e.dialect==mxConstants.DIALECT_SVG?(s.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),s.canvas.appendChild(s.drawPane),s.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g")):(s.drawPane=s.drawPane.cloneNode(!1),s.canvas.appendChild(s.drawPane),s.overlayPane=s.overlayPane.cloneNode(!1)),s.canvas.appendChild(s.overlayPane);var l=s.getTranslate();s.translate=new mxPoint(r,i),t=new mxTemporaryCellStates(e.getView(),t,n);try{o=(new mxCodec).encode(e.getView())}finally{t.destroy(),s.translate=l,s.canvas.removeChild(s.drawPane),s.canvas.removeChild(s.overlayPane),s.drawPane=a,s.overlayPane=f,s.setEventsEnabled(u)}return o},getScaleForPageCount:function(e,t,n,r){if(1>e)return 1;n=null!=n?n:mxConstants.PAGE_FORMAT_A4_PORTRAIT,r=null!=r?r:0;var i=n.width-2*r;n=n.height-2*r,r=t.getGraphBounds().clone(),t=t.getView().getScale(),r.width/=t,r.height/=t,t=r.width;var s=Math.sqrt(e);r=Math.sqrt(t/r.height/(i/n)),n=s*r,r=s/r;if(1>n&&r>e){var o=r/e;r=e,n/=o}1>r&&n>e&&(o=n/e,n=e,r/=o),o=Math.ceil(n)*Math.ceil(r);for(s=0;o>e;){var o=Math.floor(n)/n,u=Math.floor(r)/r;1==o&&(o=Math.floor(n-1)/n),1==u&&(u=Math.floor(r-1)/r),o=o>u?o:u,n*=o,r*=o,o=Math.ceil(n)*Math.ceil(r),s++;if(10<s)break}return i*n/t*.99999},show:function(e,t,n,r,i,s){n=null!=n?n:0,r=null!=r?r:0,null==t?t=window.open().document:t.open(),9==document.documentMode&&t.writeln('<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]-->');var o=e.getGraphBounds(),u=Math.ceil(n-o.x),a=Math.ceil(r-o.y);null==i&&(i=Math.ceil(o.width+n)+Math.ceil(Math.ceil(o.x)-o.x)),null==s&&(s=Math.ceil(o.height+r)+Math.ceil(Math.ceil(o.y)-o.y));if(mxClient.IS_IE||11==document.documentMode){r="<html><head>",o=document.getElementsByTagName("base");for(n=0;n<o.length;n++)r+=o[n].outerHTML;r+="<style>";for(n=0;n<document.styleSheets.length;n++)try{r+=document.styleSheets[n].cssText}catch(f){}r=r+'</style></head><body style="margin:0px;">'+('<div style="position:absolute;overflow:hidden;width:'+i+"px;height:"+s+'px;"><div style="position:relative;left:'+u+"px;top:"+a+'px;">')+e.container.innerHTML,t.writeln(r+"</div></div></body><html>"),t.close()}else{t.writeln("<html><head>"),o=document.getElementsByTagName("base");for(n=0;n<o.length;n++)t.writeln(mxUtils.getOuterHtml(o[n]));r=document.getElementsByTagName("link");for(n=0;n<r.length;n++)t.writeln(mxUtils.getOuterHtml(r[n]));r=document.getElementsByTagName("style");for(n=0;n<r.length;n++)t.writeln(mxUtils.getOuterHtml(r[n]));t.writeln('</head><body style="margin:0px;"></body></html>'),t.close(),n=t.createElement("div"),n.position="absolute",n.overflow="hidden",n.style.width=i+"px",n.style.height=s+"px",i=t.createElement("div"),i.style.position="absolute",i.style.left=u+"px",i.style.top=a+"px",s=e.container.firstChild;for(r=null;null!=s;)o=s.cloneNode(!0),s==e.view.drawPane.ownerSVGElement?(n.appendChild(o),r=o):i.appendChild(o),s=s.nextSibling;t.body.appendChild(n),null!=i.firstChild&&t.body.appendChild(i),null!=r&&(r.style.minWidth="",r.style.minHeight="",r.firstChild.setAttribute("transform","translate("+u+","+a+")"))}return mxUtils.removeCursors(t.body),t},printScreen:function(e){var t=window.open();e.getGraphBounds(),mxUtils.show(e,t.document),e=function(){t.focus(),t.print(),t.close()},mxClient.IS_GC?t.setTimeout(e,500):e()},popup:function(e,t){if(t){var n=document.createElement("div");n.style.overflow="scroll",n.style.width="636px",n.style.height="460px";var r=document.createElement("pre");r.innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.appendChild(r),n=new mxWindow("Popup Window",n,document.body.clientWidth/2-320,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)/2-240,640,480,!1,!0),n.setClosable(!0),n.setVisible(!0)}else mxClient.IS_NS?(n=window.open(),n.document.writeln("<pre>"+mxUtils.htmlEntities(e)+"</pre"),n.document.close()):(n=window.open(),r=n.document.createElement("pre"),r.innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.document.body.appendChild(r))},alert:function(e){alert(e)},prompt:function(e,t){return prompt(e,null!=t?t:"")},confirm:function(e){return confirm(e)},error:function(e,t,n,r){var i=document.createElement("div");i.style.padding="20px";var s=document.createElement("img");s.setAttribute("src",r||mxUtils.errorImage),s.setAttribute("valign","bottom"),s.style.verticalAlign="middle",i.appendChild(s),i.appendChild(document.createTextNode("")),i.appendChild(document.createTextNode("")),i.appendChild(document.createTextNode("")),mxUtils.write(i,e),e=document.body.clientWidth,r=document.body.clientHeight||document.documentElement.clientHeight;var o=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,i,(e-t)/2,r/4,t,null,!1,!0);return n&&(mxUtils.br(i),t=document.createElement("p"),n=document.createElement("button"),mxClient.IS_IE?n.style.cssText="float:right":n.setAttribute("style","float:right"),mxEvent.addListener(n,"click",function(e){o.destroy()}),mxUtils.write(n,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),t.appendChild(n),i.appendChild(t),mxUtils.br(i),o.setClosable(!0)),o.setVisible(!0),o},makeDraggable:function(e,t,n,r,i,s,o,u,a,f){return e=new mxDragSource(e,n),e.dragOffset=new mxPoint(null!=i?i:0,null!=s?s:mxConstants.TOOLTIP_VERTICAL_OFFSET),e.autoscroll=o,e.setGuidesEnabled(!1),null!=a&&(e.highlightDropTargets=a),null!=f&&(e.getDropTarget=f),e.getGraphForEvent=function(e){return"function"==typeof t?t(e):t},null!=r&&(e.createDragElement=function(){return r.cloneNode(!0)},u&&(e.createPreviewElement=function(e){var t=r.cloneNode(!0),n=parseInt(t.style.width),i=parseInt(t.style.height);return t.style.width=Math.round(n*e.view.scale)+"px",t.style.height=Math.round(i*e.view.scale)+"px",t})),e}},mxConstants={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_VML:"vml",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,827,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,827),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_SOURCE_PORT_CONSTRAINT:"sourcePortConstraint",STYLE_TARGET_PORT_CONSTRAINT:"targetPortConstraint",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_DX:"exitDx",STYLE_EXIT_DY:"exitDy",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_DX:"entryDx",STYLE_ENTRY_DY:"entryDy",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_FIX_DASH:"fixDash",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_ABSOLUTE_ARCSIZE:"absoluteArcSize",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ANCHOR_POINT_DIRECTION:"anchorPointDirection",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BACKGROUND_OUTLINE:"backgroundOutline",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(e){return this.properties[e]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(e){return null!=e?mxUtils.isAncestorNode(e.node,this.getSource()):!1},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var e=this.getState();return null!=e?e.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(e){(null!=e?e:1)&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(e){this.eventsEnabled=e},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(e){this.eventSource=e},mxEventSource.prototype.addListener=function(e,t){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(e),this.eventListeners.push(t)},mxEventSource.prototype.removeListener=function(e){if(null!=this.eventListeners)for(var t=0;t<this.eventListeners.length;)this.eventListeners[t+1]==e?this.eventListeners.splice(t,2):t+=2},mxEventSource.prototype.fireEvent=function(e,t){if(null!=this.eventListeners&&this.isEventsEnabled()){null==e&&(e=new mxEventObject),null==t&&(t=this.getEventSource()),null==t&&(t=this);for(var n=[t,e],r=0;r<this.eventListeners.length;r+=2){var i=this.eventListeners[r];null!=i&&i!=e.getName()||this.eventListeners[r+1].apply(this,n)}}};var mxEvent={addListener:function(){return window.addEventListener?function(e,t,n){e.addEventListener(t,n,!1),null==e.mxListenerList&&(e.mxListenerList=[]),e.mxListenerList.push({name:t,f:n})}:function(e,t,n){e.attachEvent("on"+t,n),null==e.mxListenerList&&(e.mxListenerList=[]),e.mxListenerList.push({name:t,f:n})}}(),removeListener:function(){var e=function(e,t,n){if(null!=e.mxListenerList){t=e.mxListenerList.length;for(var r=0;r<t;r++)if(e.mxListenerList[r].f==n){e.mxListenerList.splice(r,1);break}0==e.mxListenerList.length&&(e.mxListenerList=null)}};return window.removeEventListener?function(t,n,r){t.removeEventListener(n,r,!1),e(t,n,r)}:function(t,n,r){t.detachEvent("on"+n,r),e(t,n,r)}}(),removeAllListeners:function(e){var t=e.mxListenerList;if(null!=t)for(;0<t.length;){var n=t[0];mxEvent.removeListener(e,n.name,n.f)}},addGestureListeners:function(e,t,n,r){null!=t&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),null!=n&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=r&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",r),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=t&&mxEvent.addListener(e,"touchstart",t),null!=n&&mxEvent.addListener(e,"touchmove",n),null!=r&&mxEvent.addListener(e,"touchend",r))},removeGestureListeners:function(e,t,n,r){null!=t&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),null!=n&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=r&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",r),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=t&&mxEvent.removeListener(e,"touchstart",t),null!=n&&mxEvent.removeListener(e,"touchmove",n),null!=r&&mxEvent.removeListener(e,"touchend",r))},redirectMouseEvents:function(e,t,n,r,i,s,o){var u=function(e){return"function"==typeof n?n(e):n};mxEvent.addGestureListeners(e,function(e){null!=r?r(e):mxEvent.isConsumed(e)||t.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e,u(e)))},function(e){null!=i?i(e):mxEvent.isConsumed(e)||t.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e,u(e)))},function(e){null!=s?s(e):mxEvent.isConsumed(e)||t.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e,u(e)))}),mxEvent.addListener(e,"dblclick",function(e){if(null!=o)o(e);else if(!mxEvent.isConsumed(e)){var n=u(e);t.dblClick(e,null!=n?n.cell:null)}})},release:function(e){try{if(null!=e){mxEvent.removeAllListeners(e);var t=e.childNodes;if(null!=t){var n=t.length;for(e=0;e<n;e+=1)mxEvent.release(t[e])}}}catch(r){}},addMouseWheelListener:function(e){if(null!=e){var t=function(t){null==t&&(t=window.event);var n;n=mxClient.IS_FF?-t.detail/2:t.wheelDelta/120,0!=n&&e(t,0<n)};mxClient.IS_NS&&null==document.documentMode?mxEvent.addListener(window,mxClient.IS_SF||mxClient.IS_GC?"mousewheel":"DOMMouseScroll",t):mxEvent.addListener(document,"mousewheel",t)}},disableContextMenu:function(e){mxEvent.addListener(e,"contextmenu",function(e){return e.preventDefault&&e.preventDefault(),!1})},getSource:function(e){return null!=e.srcElement?e.srcElement:e.target},isConsumed:function(e){return null!=e.isConsumed&&e.isConsumed},isTouchEvent:function(e){return null!=e.pointerType?"touch"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH:null!=e.mozInputSource?5==e.mozInputSource:0==e.type.indexOf("touch")},isPenEvent:function(e){return null!=e.pointerType?"pen"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_PEN:null!=e.mozInputSource?2==e.mozInputSource:0==e.type.indexOf("pen")},isMultiTouchEvent:function(e){return null!=e.type&&0==e.type.indexOf("touch")&&null!=e.touches&&1<e.touches.length},isMouseEvent:function(e){return null!=e.pointerType?"mouse"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE:null!=e.mozInputSource?1==e.mozInputSource:0==e.type.indexOf("mouse")},isLeftMouseButton:function(e){return"buttons"in e&&("mousedown"==e.type||"mousemove"==e.type)?1==e.buttons:"which"in e?1===e.which:1===e.button},isMiddleMouseButton:function(e){return"which"in e?2===e.which:4===e.button},isRightMouseButton:function(e){return"which"in e?3===e.which:2===e.button},isPopupTrigger:function(e){return mxEvent.isRightMouseButton(e)||mxClient.IS_MAC&&mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)&&!mxEvent.isMetaDown(e)&&!mxEvent.isAltDown(e)},isShiftDown:function(e){return null!=e?e.shiftKey:!1},isAltDown:function(e){return null!=e?e.altKey:!1},isControlDown:function(e){return null!=e?e.ctrlKey:!1},isMetaDown:function(e){return null!=e?e.metaKey:!1},getMainEvent:function(e){return"touchstart"!=e.type&&"touchmove"!=e.type||null==e.touches||null==e.touches[0]?"touchend"==e.type&&null!=e.changedTouches&&null!=e.changedTouches[0]&&(e=e.changedTouches[0]):e=e.touches[0],e},getClientX:function(e){return mxEvent.getMainEvent(e).clientX},getClientY:function(e){return mxEvent.getMainEvent(e).clientY},consume:function(e,t,n){n=null!=n?n:!0;if(null!=t?t:1)e.preventDefault?(n&&e.stopPropagation(),e.preventDefault()):n&&(e.cancelBubble=!0);e.isConsumed=!0,e.preventDefault||(e.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset"};mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(e){this.binary=e},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var e=this.getXml();return null!=e?e.documentElement:null},mxXmlRequest.prototype.getXml=function(){var e=this.request.responseXML;if(9<=document.documentMode||null==e||null==e.documentElement)e=mxUtils.parseXml(this.request.responseText);return e},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.getStatus=function(){return this.request.status},mxXmlRequest.prototype.create=function(){if(window.XMLHttpRequest)return function(){var e=new XMLHttpRequest;return this.isBinary()&&e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e};if("undefined"!=typeof ActiveXObject)return function(){return new ActiveXObject("Microsoft.XMLHTTP")}}(),mxXmlRequest.prototype.send=function(e,t,n,r){this.request=this.create(),null!=this.request&&(null!=e&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&(e(this),this.request.onreadystatechaange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),!mxClient.IS_QUIRKS&&(null==document.documentMode||9<document.documentMode)&&window.XMLHttpRequest&&null!=n&&null!=r&&(this.request.timeout=n,this.request.ontimeout=r),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(e,t){null!=t&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(e,t){e=e||document;var n=null;e==document&&(n=window.onbeforeunload,window.onbeforeunload=null);var r=e.createElement("form");r.setAttribute("method",this.method),r.setAttribute("action",this.url),null!=t&&r.setAttribute("target",t),r.style.display="none",r.style.visibility="hidden";for(var i=0<this.params.indexOf("&")?this.params.split("&"):this.params.split(),s=0;s<i.length;s++){var o=i[s].indexOf("=");if(0<o){var u=i[s].substring(0,o),o=i[s].substring(o+1);this.decodeSimulateValues&&(o=decodeURIComponent(o));var a=e.createElement("textarea");a.setAttribute("wrap","off"),a.setAttribute("name",u),mxUtils.write(a,o),r.appendChild(a)}}e.body.appendChild(r),r.submit(),null!=r.parentNode&&r.parentNode.removeChild(r),null!=n&&(window.onbeforeunload=n)};var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(e){mxClipboard.cells=e},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(e,t){return t=mxClipboard.copy(e,t),mxClipboard.insertCount=0,mxClipboard.removeCells(e,t),t},removeCells:function(e,t){e.removeCells(t)},copy:function(e,t){t=t||e.getSelectionCells();var n=e.getExportableCells(e.model.getTopmostCells(t));return mxClipboard.insertCount=1,mxClipboard.setCells(e.cloneCells(n)),n},paste:function(e){var t=null;if(!mxClipboard.isEmpty()){var t=e.getImportableCells(mxClipboard.getCells()),n=mxClipboard.insertCount*mxClipboard.STEPSIZE,r=e.getDefaultParent(),t=e.importCells(t,n,n,r);mxClipboard.insertCount++,e.setSelectionCells(t)}return t}};mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(e,t,n,r,i){i=null!=i?i:"mxWindow",this.div=document.createElement("div"),this.div.className=i,this.div.style.left=e+"px",this.div.style.top=t+"px",this.table=document.createElement("table"),this.table.className=i,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=n&&(mxClient.IS_QUIRKS||(this.div.style.width=n+"px"),this.table.style.width=n+"px"),null!=r&&(mxClient.IS_QUIRKS||(this.div.style.height=r+"px"),this.table.style.height=r+"px"),e=document.createElement("tbody"),t=document.createElement("tr"),this.title=document.createElement("td"),this.title.className=i+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),t.appendChild(this.title),e.appendChild(t),t=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=i+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=i+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content);if(mxClient.IS_QUIRKS||"DIV"!=this.content.nodeName.toUpperCase())this.contentWrapper.style.height="100%";this.td.appendChild(this.contentWrapper),t.appendChild(this.td),e.appendChild(t),this.table.appendChild(e),this.div.appendChild(this.table),i=mxUtils.bind(this,function(e){this.activate()}),mxEvent.addGestureListeners(this.title,i),mxEvent.addGestureListeners(this.table,i),this.hide()},mxWindow.prototype.setTitle=function(e){for(var t=this.title.firstChild;null!=t;){var n=t.nextSibling;t.nodeType==mxConstants.NODETYPE_TEXT&&t.parentNode.removeChild(t),t=n}mxUtils.write(this.title,e||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(e){0>navigator.userAgent.indexOf("Presto/2.5")&&(this.contentWrapper.style.overflow=e?"auto":"hidden")},mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var e=mxUtils.getCurrentStyle(this.getElement()),e=null!=e?e.zIndex:3;if(mxWindow.activeWindow){var t=mxWindow.activeWindow.getElement();null!=t&&null!=t.style&&(t.style.zIndex=e)}t=mxWindow.activeWindow,this.getElement().style.zIndex=parseInt(e)+1,mxWindow.activeWindow=this,this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",t))}},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize?"none"!=this.resize.style.display:!1},mxWindow.prototype.setResizable=function(e){if(e)if(null==this.resize){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize";var t=null,n=null,r=null,i=null;e=mxUtils.bind(this,function(e){this.activate(),t=mxEvent.getClientX(e),n=mxEvent.getClientY(e),r=this.div.offsetWidth,i=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,s,o),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",e)),mxEvent.consume(e)});var s=mxUtils.bind(this,function(e){if(null!=t&&null!=n){var s=mxEvent.getClientX(e)-t,o=mxEvent.getClientY(e)-n;this.setSize(r+s,i+o),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",e)),mxEvent.consume(e)}}),o=mxUtils.bind(this,function(e){null!=t&&null!=n&&(n=t=null,mxEvent.removeGestureListeners(document,null,s,o),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",e)),mxEvent.consume(e))});mxEvent.addGestureListeners(this.resize,e,s,o),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(e,t){e=Math.max(this.minimumSize.width,e),t=Math.max(this.minimumSize.height,t),mxClient.IS_QUIRKS||(this.div.style.width=e+"px",this.div.style.height=t+"px"),this.table.style.width=e+"px",this.table.style.height=t+"px",mxClient.IS_QUIRKS||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")},mxWindow.prototype.setMinimizable=function(e){this.minimize.style.display=e?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);var e=!1,t=null,n=null,r=mxUtils.bind(this,function(r){this.activate();if(e)e=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=t,mxClient.IS_QUIRKS||(this.div.style.height=n),this.table.style.height=n,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",r));else{e=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",t=this.maximize.style.display,this.maximize.style.display="none",n=this.table.style.height;var i=this.getMinimumSize();0<i.height&&(mxClient.IS_QUIRKS||(this.div.style.height=i.height+"px"),this.table.style.height=i.height+"px"),0<i.width&&(mxClient.IS_QUIRKS||(this.div.style.width=i.width+"px"),this.table.style.width=i.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",r))}mxEvent.consume(r)});mxEvent.addGestureListeners(this.minimize,r)},mxWindow.prototype.setMaximizable=function(e){this.maximize.style.display=e?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var e=!1,t=null,n=null,r=null,i=null,s=null,o=mxUtils.bind(this,function(o){this.activate();if("none"!=this.maximize.style.display){if(e)e=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.display=s,this.div.style.left=t+"px",this.div.style.top=n+"px",mxClient.IS_QUIRKS||(this.div.style.height=r,this.div.style.width=i,u=mxUtils.getCurrentStyle(this.contentWrapper),"auto"!=u.overflow&&null==this.resize)||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.table.style.height=r,this.table.style.width=i,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",o));else{e=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",s=this.minimize.style.display,this.minimize.style.display="none",t=parseInt(this.div.style.left),n=parseInt(this.div.style.top),r=this.table.style.height,i=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px",u=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0),mxClient.IS_QUIRKS||(this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=u-2+"px"),this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=u-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden");if(!mxClient.IS_QUIRKS){var u=mxUtils.getCurrentStyle(this.contentWrapper);if("auto"==u.overflow||null!=this.resize)this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"}this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",o))}mxEvent.consume(o)}});mxEvent.addGestureListeners(this.maximize,o),mxEvent.addListener(this.title,"dblclick",o)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(e){var t=mxEvent.getClientX(e),n=mxEvent.getClientY(e),r=this.getX(),i=this.getY(),s=mxUtils.bind(this,function(e){var s=mxEvent.getClientX(e)-t,o=mxEvent.getClientY(e)-n;this.setLocation(r+s,i+o),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",e)),mxEvent.consume(e)}),o=mxUtils.bind(this,function(e){mxEvent.removeGestureListeners(document,null,s,o),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",e)),mxEvent.consume(e)});mxEvent.addGestureListeners(document,null,s,o),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",e)),mxEvent.consume(e)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(e,t){this.div.style.left=e+"px",this.div.style.top=t+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(e){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",e)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(e)}))},mxWindow.prototype.setImage=function(e){this.image=document.createElement("img"),this.image.setAttribute("src",e),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(e){this.closeImg.style.display=e?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div?"none"!=this.div.style.display:!1},mxWindow.prototype.setVisible=function(e){null!=this.div&&this.isVisible()!=e&&(e?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate();var e=mxUtils.getCurrentStyle(this.contentWrapper);mxClient.IS_QUIRKS||"auto"!=e.overflow&&null==this.resize||"none"==this.contentWrapper.style.display||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.contentWrapper=this.content=this.title=null},mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(e,t){var n=document.createElement("tr"),r=document.createElement("td");n.appendChild(r);var r=document.createElement("td"),i=document.createElement("button");mxUtils.write(i,mxResources.get("ok")||"OK"),r.appendChild(i),mxEvent.addListener(i,"click",function(){e()}),i=document.createElement("button"),mxUtils.write(i,mxResources.get("cancel")||"Cancel"),r.appendChild(i),mxEvent.addListener(i,"click",function(){t()}),n.appendChild(r),this.body.appendChild(n)},mxForm.prototype.addText=function(e,t,n){var r=document.createElement("input");return r.setAttribute("type",n||"text"),r.value=t,this.addField(e,r)},mxForm.prototype.addCheckbox=function(e,t){var n=document.createElement("input");return n.setAttribute("type","checkbox"),this.addField(e,n),t&&(n.checked=!0),n},mxForm.prototype.addTextarea=function(e,t,n){var r=document.createElement("textarea");return mxClient.IS_NS&&n--,r.setAttribute("rows",n||2),r.value=t,this.addField(e,r)},mxForm.prototype.addCombo=function(e,t,n){var r=document.createElement("select");return null!=n&&r.setAttribute("size",n),t&&r.setAttribute("multiple","true"),this.addField(e,r)},mxForm.prototype.addOption=function(e,t,n,r){var i=document.createElement("option");mxUtils.writeln(i,t),i.setAttribute("value",n),r&&i.setAttribute("selected",r),e.appendChild(i)},mxForm.prototype.addField=function(e,t){var n=document.createElement("tr"),r=document.createElement("td");return mxUtils.write(r,e),n.appendChild(r),r=document.createElement("td"),r.appendChild(t),n.appendChild(r),this.body.appendChild(n),t},mxImage.prototype.src=null,mxImage.prototype.width=null,mxImage.prototype.height=null,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var e=this.getDocumentWidth(),t=this.getDocumentHeight(),n=parseInt(this.div.style.left),r=parseInt(this.div.style.right),i=parseInt(this.div.style.top),s=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(n)&&!isNaN(r)&&0<=n&&0<=r&&0<e-r-n&&(this.div.style.width=e-r-n+"px"),this.resizeHeight&&!isNaN(i)&&!isNaN(s)&&0<=i&&0<=s&&0<t-i-s&&(this.div.style.height=t-i-s+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.checkEventSource=!0,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(e){this.enabled=e},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(e){this.guidesEnabled=e},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxDragSource.prototype.getGraphForEvent=function(e){return null},mxDragSource.prototype.getDropTarget=function(e,t,n,r){return e.getCellAt(t,n)},mxDragSource.prototype.createDragElement=function(e){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(e){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(e){this.enabled&&!mxEvent.isConsumed(e)&&null==this.mouseMoveHandler&&(this.startDrag(e),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(e)&&(this.eventSource=mxEvent.getSource(e),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))},mxDragSource.prototype.startDrag=function(e){this.dragElement=this.createDragElement(e),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.getElementForEvent=function(e){return mxEvent.isTouchEvent(e)||mxEvent.isPenEvent(e)?document.elementFromPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)):mxEvent.getSource(e)},mxDragSource.prototype.graphContainsEvent=function(e,t){var n=mxEvent.getClientX(t),r=mxEvent.getClientY(t),i=mxUtils.getOffset(e.container),s=mxUtils.getScrollOrigin(),o=this.getElementForEvent(t);if(this.checkEventSource)for(;null!=o&&o!=e.container;)o=o.parentNode;return null!=o&&n>=i.x-s.x&&r>=i.y-s.y&&n<=i.x-s.x+e.container.offsetWidth&&r<=i.y-s.y+e.container.offsetHeight},mxDragSource.prototype.mouseMove=function(e){var t=this.getGraphForEvent(e);null==t||this.graphContainsEvent(t,e)||(t=null),t!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,e),this.currentGraph=t,null!=this.currentGraph&&this.dragEnter(this.currentGraph,e)),null!=this.currentGraph&&this.dragOver(this.currentGraph,e);if(null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility)null!=this.dragElement&&(this.dragElement.style.visibility="hidden");else{var t=mxEvent.getClientX(e),n=mxEvent.getClientY(e);null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",null!=this.dragOffset&&(t+=this.dragOffset.x,n+=this.dragOffset.y);var r=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=t+r.x+"px",this.dragElement.style.top=n+r.y+"px"}mxEvent.consume(e)},mxDragSource.prototype.mouseUp=function(e){if(null!=this.currentGraph){if(null!=this.currentPoint&&(null==this.previewElement||"hidden"!=this.previewElement.style.visibility)){var t=this.currentGraph.view.scale,n=this.currentGraph.view.translate;this.drop(this.currentGraph,e,this.currentDropTarget,this.currentPoint.x/t-n.x,this.currentPoint.y/t-n.y)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent.consume(e)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseUpHandler=this.mouseMoveHandler=null},mxDragSource.prototype.dragEnter=function(e,t){e.isMouseDown=!0,e.isMouseTrigger=mxEvent.isMouseEvent(t),this.previewElement=this.createPreviewElement(e),null!=this.previewElement&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(e,e.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(e,mxConstants.DROP_TARGET_COLOR)),e.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(e,t){this.currentPoint=this.currentDropTarget=null,e.isMouseDown=!1,e.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(e,t){var n=mxUtils.getOffset(e.container),r=mxUtils.getScrollOrigin(e.container),i=mxEvent.getClientX(t)-n.x+r.x-e.panDx,n=mxEvent.getClientY(t)-n.y+r.y-e.panDy;e.autoScroll&&(null==this.autoscroll||this.autoscroll)&&e.scrollPointToVisible(i,n,e.autoExtend),null!=this.currentHighlight&&e.isDropEnabled()&&(this.currentDropTarget=this.getDropTarget(e,i,n,t),r=e.getView().getState(this.currentDropTarget),this.currentHighlight.highlight(r));if(null!=this.previewElement){null==this.previewElement.parentNode&&(e.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var r=this.isGridEnabled()&&e.isGridEnabledEvent(t),s=!0;if(null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(t))var s=parseInt(this.previewElement.style.width),o=parseInt(this.previewElement.style.height),s=new mxRectangle(0,0,s,o),n=new mxPoint(i,n),n=this.currentGuide.move(s,n,r,!0),s=!1,i=n.x,n=n.y;else if(r)var r=e.view.scale,o=e.view.translate,u=e.gridSize/2,i=(e.snap(i/r-o.x-u)+o.x)*r,n=(e.snap(n/r-o.y-u)+o.y)*r;null!=this.currentGuide&&s&&this.currentGuide.hide(),null!=this.previewOffset&&(i+=this.previewOffset.x,n+=this.previewOffset.y),this.previewElement.style.left=Math.round(i)+"px",this.previewElement.style.top=Math.round(n)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(i,n)},mxDragSource.prototype.drop=function(e,t,n,r,i){this.dropHandler.apply(this,arguments),"hidden"!=e.container.style.visibility&&e.container.focus()},mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(e,t,n,r,i,s){var o=document.createElement(null!=t?"img":"button"),u=i||(null!=s?"mxToolbarMode":"mxToolbarItem");return o.className=u,o.setAttribute("src",t),null!=e&&(null!=t?o.setAttribute("title",e):mxUtils.write(o,e)),this.container.appendChild(o),null!=n&&(mxEvent.addListener(o,"click",n),mxClient.IS_TOUCH&&mxEvent.addListener(o,"touchend",n)),e=mxUtils.bind(this,function(e){null!=r?o.setAttribute("src",t):o.style.backgroundColor=""}),mxEvent.addGestureListeners(o,mxUtils.bind(this,function(e){null!=r?o.setAttribute("src",r):o.style.backgroundColor="gray";if(null!=s){null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init());var t=this.currentImg;this.menu.isMenuShowing()&&this.menu.hideMenu(),t!=o&&(this.currentImg=o,this.menu.factoryMethod=s,t=new mxPoint(o.offsetLeft,o.offsetTop+o.offsetHeight),this.menu.popup(t.x,t.y,null,e),this.menu.isMenuShowing()&&(o.className=u+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),o.className=u,this.currentImg=null}))}}),null,e),mxEvent.addListener(o,"mouseout",e),o},mxToolbar.prototype.addCombo=function(e){var t=document.createElement("div");t.style.display="inline",t.className="mxToolbarComboContainer";var n=document.createElement("select");return n.className=e||"mxToolbarCombo",t.appendChild(n),this.container.appendChild(t),n},mxToolbar.prototype.addActionCombo=function(e,t){var n=document.createElement("select");return n.className=t||"mxToolbarCombo",this.addOption(n,e,null),mxEvent.addListener(n,"change",function(e){var t=n.options[n.selectedIndex];n.selectedIndex=0,null!=t.funct&&t.funct(e)}),this.container.appendChild(n),n},mxToolbar.prototype.addOption=function(e,t,n){var r=document.createElement("option");return mxUtils.writeln(r,t),"function"==typeof n?r.funct=n:r.setAttribute("value",n),e.appendChild(r),r},mxToolbar.prototype.addSwitchMode=function(e,t,n,r,i){var s=document.createElement("img");return s.initialClassName=i||"mxToolbarMode",s.className=s.initialClassName,s.setAttribute("src",t),s.altIcon=r,null!=e&&s.setAttribute("title",e),mxEvent.addListener(s,"click",mxUtils.bind(this,function(e){e=this.selectedMode.altIcon,null!=e?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",e)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=s),this.selectedMode=s,e=s.altIcon,null!=e?(s.altIcon=s.getAttribute("src"),s.setAttribute("src",e)):s.className=s.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),n()})),this.container.appendChild(s),null==this.defaultMode&&(this.defaultMode=s,this.selectMode(s),n()),s},mxToolbar.prototype.addMode=function(e,t,n,r,i,s){s=null!=s?s:!0;var o=document.createElement(null!=t?"img":"button");return o.initialClassName=i||"mxToolbarMode",o.className=o.initialClassName,o.setAttribute("src",t),o.altIcon=r,null!=e&&o.setAttribute("title",e),this.enabled&&s&&(mxEvent.addListener(o,"click",mxUtils.bind(this,function(e){this.selectMode(o,n),this.noReset=!1})),mxEvent.addListener(o,"dblclick",mxUtils.bind(this,function(e){this.selectMode(o,n),this.noReset=!0})),null==this.defaultMode&&(this.defaultMode=o,this.defaultFunction=n,this.selectMode(o,n))),this.container.appendChild(o),o},mxToolbar.prototype.selectMode=function(e,t){if(this.selectedMode!=e){if(null!=this.selectedMode){var n=this.selectedMode.altIcon;null!=n?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName}this.selectedMode=e,n=this.selectedMode.altIcon,null!=n?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",t))}},mxToolbar.prototype.resetMode=function(e){!e&&this.noReset||this.selectedMode==this.defaultMode||this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(e){return this.addItem(null,e,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var e=document.createElement("hr");e.style.marginRight="6px",e.setAttribute("size","1"),this.container.appendChild(e)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.selectedMode=this.defaultFunction=this.defaultMode=this.container=null,null!=this.menu&&this.menu.destroy()},mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(e){this.changes.push(e)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var e=this.changes.length-1;0<=e;e--){var t=this.changes[e];null!=t.execute?t.execute():null!=t.undo&&t.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",t))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var e=this.changes.length,t=0;t<e;t++){var n=this.changes[t];null!=n.execute?n.execute():null!=n.redo&&n.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",n))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return 0<this.indexOfNextAdd},mxUndoManager.prototype.undo=function(){for(;0<this.indexOfNextAdd;){var e=this.history[--this.indexOfNextAdd];e.undo();if(e.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var e=this.history.length;this.indexOfNextAdd<e;){var t=this.history[this.indexOfNextAdd++];t.redo();if(t.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",t));break}}},mxUndoManager.prototype.undoableEditHappened=function(e){this.trim(),0<this.size&&this.size==this.history.length&&this.history.shift(),this.history.push(e),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",e))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var e=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),t=0;t<e.length;t++)e[t].die()};var mxUrlConverter=function(){};mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var e=this.baseUrl.lastIndexOf("/");0<e&&(this.baseUrl=this.baseUrl.substring(0,e+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(e){this.enabled=e},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(e){this.baseUrl=e},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(e){this.baseDomain=e},mxUrlConverter.prototype.isRelativeUrl=function(e){return"//"!=e.substring(0,2)&&"http://"!=e.substring(0,7)&&"https://"!=e.substring(0,8)&&"data:image"!=e.substring(0,10)&&"file://"!=e.substring(0,7)},mxUrlConverter.prototype.convert=function(e){return this.isEnabled()&&this.isRelativeUrl(e)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),e="/"==e.charAt(0)?this.getBaseDomain()+e:this.getBaseUrl()+e),e},mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(e){this.enabled=e},mxPopupMenu.prototype.isPopupTrigger=function(e){return e.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(e.getEvent())},mxPopupMenu.prototype.addItem=function(e,t,n,r,i,s,o){r=r||this,this.itemCount++,r.willAddSeparator&&(r.containsItems&&this.addSeparator(r,!0),r.willAddSeparator=!1),r.containsItems=!0;var u=document.createElement("tr");u.className="mxPopupMenuItem";var a=document.createElement("td");a.className="mxPopupMenuIcon",null!=t?(i=document.createElement("img"),i.src=t,a.appendChild(i)):null!=i&&(t=document.createElement("div"),t.className=i,a.appendChild(t)),u.appendChild(a),this.labels&&(a=document.createElement("td"),a.className="mxPopupMenuItem"+(null==s||s?"":" mxDisabled"),mxUtils.write(a,e),a.align="left",u.appendChild(a),e=document.createElement("td"),e.className="mxPopupMenuItem"+(null==s||s?"":" mxDisabled"),e.style.paddingRight="6px",e.style.textAlign="right",u.appendChild(e),null==r.div&&this.createSubmenu(r)),r.tbody.appendChild(u);if(0!=o&&0!=s){var f=null;mxEvent.addGestureListeners(u,mxUtils.bind(this,function(e){this.eventReceiver=u,r.activeRow!=u&&r.activeRow!=r&&(null!=r.activeRow&&null!=r.activeRow.div.parentNode&&this.hideSubmenu(r),null!=u.div&&(this.showSubmenu(r,u),r.activeRow=u));if(mxClient.IS_QUIRKS||8==document.documentMode)f=document.selection.createRange();mxEvent.consume(e)}),mxUtils.bind(this,function(e){r.activeRow!=u&&r.activeRow!=r&&(null!=r.activeRow&&null!=r.activeRow.div.parentNode&&this.hideSubmenu(r),this.autoExpand&&null!=u.div&&(this.showSubmenu(r,u),r.activeRow=u)),u.className="mxPopupMenuItemHover"}),mxUtils.bind(this,function(e){if(this.eventReceiver==u){r.activeRow!=u&&this.hideMenu();if(null!=f){try{f.select()}catch(t){}f=null}null!=n&&n(e)}this.eventReceiver=null,mxEvent.consume(e)})),mxEvent.addListener(u,"mouseout",mxUtils.bind(this,function(e){u.className="mxPopupMenuItem"}))}return u},mxPopupMenu.prototype.addCheckmark=function(e,t){var n=e.firstChild.nextSibling;n.style.backgroundImage="url('"+t+"')",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(e){e.table=document.createElement("table"),e.table.className="mxPopupMenu",e.tbody=document.createElement("tbody"),e.table.appendChild(e.tbody),e.div=document.createElement("div"),e.div.className="mxPopupMenu",e.div.style.position="absolute",e.div.style.display="inline",e.div.style.zIndex=this.zIndex,e.div.appendChild(e.table);var t=document.createElement("img");t.setAttribute("src",this.submenuImage),td=e.firstChild.nextSibling.nextSibling,td.appendChild(t)},mxPopupMenu.prototype.showSubmenu=function(e,t){if(null!=t.div){t.div.style.left=e.div.offsetLeft+t.offsetLeft+t.offsetWidth-1+"px",t.div.style.top=e.div.offsetTop+t.offsetTop+"px",document.body.appendChild(t.div);var n=parseInt(t.div.offsetLeft),r=parseInt(t.div.offsetWidth),i=mxUtils.getDocumentScrollOrigin(document),s=document.documentElement;n+r>i.x+(document.body.clientWidth||s.clientWidth)&&(t.div.style.left=Math.max(0,e.div.offsetLeft-r+(mxClient.IS_IE?6:-6))+"px"),mxUtils.fit(t.div)}},mxPopupMenu.prototype.addSeparator=function(e,t){e=e||this;if(this.smartSeparators&&!t)e.willAddSeparator=!0;else if(null!=e.tbody){e.willAddSeparator=!1;var n=document.createElement("tr"),r=document.createElement("td");r.className="mxPopupMenuIcon",r.style.padding="0 0 0 0px",n.appendChild(r),r=document.createElement("td"),r.style.padding="0 0 0 0px",r.setAttribute("colSpan","2");var i=document.createElement("hr");i.setAttribute("size","1"),r.appendChild(i),n.appendChild(r),e.tbody.appendChild(n)}},mxPopupMenu.prototype.popup=function(e,t,n,r){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){this.div.style.left=e+"px";for(this.div.style.top=t+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,n,r),0<this.itemCount&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){9<=document.documentMode&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(e){null!=e.activeRow&&(this.hideSubmenu(e.activeRow),null!=e.activeRow.div.parentNode&&e.activeRow.div.parentNode.removeChild(e.activeRow.div),e.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},mxAutoSaveManager.prototype=new mxEventSource,mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(e){this.enabled=e},mxAutoSaveManager.prototype.setGraph=function(e){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=e,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(e){e=((new Date).getTime()-this.lastSnapshot)/1e3,e>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&e>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var e=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var t=0;t<this.cells.length;t++)this.animateCell(this.cells[t],e,!1);else this.animateCell(this.graph.getModel().getRoot(),e,!0);this.show(e),(e.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(e){e.show()},mxMorphing.prototype.animateCell=function(e,t,n){var r=this.graph.getView().getState(e),i=null;if(null!=r&&(i=this.getDelta(r),this.graph.getModel().isVertex(e)&&(0!=i.x||0!=i.y))){var s=this.graph.view.getTranslate(),o=this.graph.view.getScale();i.x+=s.x*o,i.y+=s.y*o,t.moveState(r,-i.x/this.ease,-i.y/this.ease)}if(n&&!this.stopRecursion(r,i))for(r=this.graph.getModel().getChildCount(e),i=0;i<r;i++)this.animateCell(this.graph.getModel().getChildAt(e,i),t,n)},mxMorphing.prototype.stopRecursion=function(e,t){return null!=t&&(0!=t.x||0!=t.y)},mxMorphing.prototype.getDelta=function(e){var t=this.getOriginForCell(e.cell),n=this.graph.getView().getTranslate(),r=this.graph.getView().getScale();return new mxPoint((t.x-(e.x/r-n.x))*r,(t.y-(e.y/r-n.y))*r)},mxMorphing.prototype.getOriginForCell=function(e){var t=null;if(null!=e){var n=this.graph.getModel().getParent(e);e=this.graph.getCellGeometry(e),t=this.getOriginForCell(n),null!=e&&(e.relative?(n=this.graph.getCellGeometry(n),null!=n&&(t.x+=e.x*n.width,t.y+=e.y*n.height)):(t.x+=e.x,t.y+=e.y))}return null==t&&(t=this.graph.view.getTranslate(),t=new mxPoint(-t.x,-t.y)),t},mxImageBundle.prototype.images=null,mxImageBundle.prototype.images=null,mxImageBundle.prototype.putImage=function(e,t,n){this.images[e]={value:t,fallback:n}},mxImageBundle.prototype.getImage=function(e){var t=null;return null!=e&&(e=this.images[e],null!=e&&(t=this.alt?e.fallback:e.value)),t},mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(e,t){null!=e&&(this.visitStatesRecursive(e,t,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays&&this.visitStatesRecursive(e,t,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)})))},mxImageExport.prototype.visitStatesRecursive=function(e,t,n){if(null!=e){n(e,t);for(var r=e.view.graph,i=r.model.getChildCount(e.cell),s=0;s<i;s++){var o=r.view.getState(r.model.getChildAt(e.cell,s));this.visitStatesRecursive(o,t,n)}}},mxImageExport.prototype.getLinkForCellState=function(e,t){return null},mxImageExport.prototype.drawCellState=function(e,t){var n=this.getLinkForCellState(e,t);null!=n&&t.setLink(n),this.drawShape(e,t),this.drawText(e,t),null!=n&&t.setLink(null)},mxImageExport.prototype.drawShape=function(e,t){e.shape instanceof mxShape&&e.shape.checkBounds()&&(t.save(),e.shape.paint(t),t.restore())},mxImageExport.prototype.drawText=function(e,t){null!=e.text&&e.text.checkBounds()&&(t.save(),e.text.paint(t),t.restore())},mxImageExport.prototype.drawOverlays=function(e,t){null!=e.overlays&&e.overlays.visit(function(e,n){n instanceof mxShape&&n.paint(t)})},mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(e){return Math.round(parseFloat(e))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),2<arguments.length))for(var e=this.state,t=2;t<arguments.length;t+=2)this.lastX=arguments[t-1],this.lastY=arguments[t],this.path.push(this.format((this.lastX+e.dx)*e.scale)),this.path.push(this.format((this.lastY+e.dy)*e.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(e,t,n,r,i){return n*=Math.PI/180,mxUtils.getRotatedPoint(new mxPoint(e,t),Math.cos(n),Math.sin(n),new mxPoint(r,i))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){0<this.states.length&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setLink=function(e){},mxAbstractCanvas2D.prototype.scale=function(e){this.state.scale*=e,this.state.strokeWidth*=e},mxAbstractCanvas2D.prototype.translate=function(e,t){this.state.dx+=e,this.state.dy+=t},mxAbstractCanvas2D.prototype.rotate=function(e,t,n,r,i){},mxAbstractCanvas2D.prototype.setAlpha=function(e){this.state.alpha=e},mxAbstractCanvas2D.prototype.setFillAlpha=function(e){this.state.fillAlpha=e},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(e){this.state.strokeAlpha=e},mxAbstractCanvas2D.prototype.setFillColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fillColor=e,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setGradient=function(e,t,n,r,i,s,o,u,a){n=this.state,n.fillColor=e,n.gradientFillAlpha=null!=u?u:1,n.gradientColor=t,n.gradientAlpha=null!=a?a:1,n.gradientDirection=o},mxAbstractCanvas2D.prototype.setStrokeColor=function(e){e==mxConstants.NONE&&(e=null),this.state.strokeColor=e},mxAbstractCanvas2D.prototype.setStrokeWidth=function(e){this.state.strokeWidth=e},mxAbstractCanvas2D.prototype.setDashed=function(e,t){this.state.dashed=e,this.state.fixDash=t},mxAbstractCanvas2D.prototype.setDashPattern=function(e){this.state.dashPattern=e},mxAbstractCanvas2D.prototype.setLineCap=function(e){this.state.lineCap=e},mxAbstractCanvas2D.prototype.setLineJoin=function(e){this.state.lineJoin=e},mxAbstractCanvas2D.prototype.setMiterLimit=function(e){this.state.miterLimit=e},mxAbstractCanvas2D.prototype.setFontColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontColor=e},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBackgroundColor=e},mxAbstractCanvas2D.prototype.setFontBorderColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBorderColor=e},mxAbstractCanvas2D.prototype.setFontSize=function(e){this.state.fontSize=parseFloat(e)},mxAbstractCanvas2D.prototype.setFontFamily=function(e){this.state.fontFamily=e},mxAbstractCanvas2D.prototype.setFontStyle=function(e){null==e&&(e=0),this.state.fontStyle=e},mxAbstractCanvas2D.prototype.setShadow=function(e){this.state.shadow=e},mxAbstractCanvas2D.prototype.setShadowColor=function(e){e==mxConstants.NONE&&(e=null),this.state.shadowColor=e},mxAbstractCanvas2D.prototype.setShadowAlpha=function(e){this.state.shadowAlpha=e},mxAbstractCanvas2D.prototype.setShadowOffset=function(e,t){this.state.shadowDx=e,this.state.shadowDy=t},mxAbstractCanvas2D.prototype.begin=function(){this.lastY=this.lastX=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(e,t){this.addOp(this.moveOp,e,t)},mxAbstractCanvas2D.prototype.lineTo=function(e,t){this.addOp(this.lineOp,e,t)},mxAbstractCanvas2D.prototype.quadTo=function(e,t,n,r){this.addOp(this.quadOp,e,t,n,r)},mxAbstractCanvas2D.prototype.curveTo=function(e,t,n,r,i,s){this.addOp(this.curveOp,e,t,n,r,i,s)},mxAbstractCanvas2D.prototype.arcTo=function(e,t,n,r,i,s,o){e=mxUtils.arcToCurves(this.lastX,this.lastY,e,t,n,r,i,s,o);if(null!=e)for(t=0;t<e.length;t+=6)this.curveTo(e[t],e[t+1],e[t+2],e[t+3],e[t+4],e[t+5])},mxAbstractCanvas2D.prototype.close=function(e,t,n,r,i,s){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var e;e=this.createElement("fontfamily"),e.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(e),e=this.createElement("fontsize"),e.setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(e),e=this.createElement("shadowcolor"),e.setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(e),e=this.createElement("shadowalpha"),e.setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(e),e=this.createElement("shadowoffset"),e.setAttribute("dx",mxConstants.SHADOW_OFFSET_X),e.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(e)},mxXmlCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(e){return this.root.ownerDocument.createElement(e)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(e){var t=this.createElement("scale");t.setAttribute("scale",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.translate=function(e,t){var n=this.createElement("translate");n.setAttribute("dx",this.format(e)),n.setAttribute("dy",this.format(t)),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rotate=function(e,t,n,r,i){var s=this.createElement("rotate");if(0!=e||t||n)s.setAttribute("theta",this.format(e)),s.setAttribute("flipH",t?"1":"0"),s.setAttribute("flipV",n?"1":"0"),s.setAttribute("cx",this.format(r)),s.setAttribute("cy",this.format(i)),this.root.appendChild(s)},mxXmlCanvas2D.prototype.setAlpha=function(e){if(this.compressed){if(this.state.alpha==e)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var t=this.createElement("alpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFillAlpha=function(e){if(this.compressed){if(this.state.fillAlpha==e)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var t=this.createElement("fillalpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(e){if(this.compressed){if(this.state.strokeAlpha==e)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var t=this.createElement("strokealpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFillColor=function(e){e==mxConstants.NONE&&(e=null);if(this.compressed){if(this.state.fillColor==e)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var t=this.createElement("fillcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setGradient=function(e,t,n,r,i,s,o,u,a){if(null!=e&&null!=t){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var f=this.createElement("gradient");f.setAttribute("c1",e),f.setAttribute("c2",t),f.setAttribute("x",this.format(n)),f.setAttribute("y",this.format(r)),f.setAttribute("w",this.format(i)),f.setAttribute("h",this.format(s)),null!=o&&f.setAttribute("direction",o),null!=u&&f.setAttribute("alpha1",u),null!=a&&f.setAttribute("alpha2",a),this.root.appendChild(f)}},mxXmlCanvas2D.prototype.setStrokeColor=function(e){e==mxConstants.NONE&&(e=null);if(this.compressed){if(this.state.strokeColor==e)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var t=this.createElement("strokecolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setStrokeWidth=function(e){if(this.compressed){if(this.state.strokeWidth==e)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var t=this.createElement("strokewidth");t.setAttribute("width",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setDashed=function(e,t){if(this.compressed){if(this.state.dashed==e)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var n=this.createElement("dashed");n.setAttribute("dashed",e?"1":"0"),null!=t&&n.setAttribute("fixDash",t?"1":"0"),this.root.appendChild(n)},mxXmlCanvas2D.prototype.setDashPattern=function(e){if(this.compressed){if(this.state.dashPattern==e)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var t=this.createElement("dashpattern");t.setAttribute("pattern",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setLineCap=function(e){if(this.compressed){if(this.state.lineCap==e)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var t=this.createElement("linecap");t.setAttribute("cap",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setLineJoin=function(e){if(this.compressed){if(this.state.lineJoin==e)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var t=this.createElement("linejoin");t.setAttribute("join",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setMiterLimit=function(e){if(this.compressed){if(this.state.miterLimit==e)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var t=this.createElement("miterlimit");t.setAttribute("limit",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFontColor=function(e){if(this.textEnabled){e==mxConstants.NONE&&(e=null);if(this.compressed){if(this.state.fontColor==e)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var t=this.createElement("fontcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(e){if(this.textEnabled){e==mxConstants.NONE&&(e=null);if(this.compressed){if(this.state.fontBackgroundColor==e)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var t=this.createElement("fontbackgroundcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(e){if(this.textEnabled){e==mxConstants.NONE&&(e=null);if(this.compressed){if(this.state.fontBorderColor==e)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var t=this.createElement("fontbordercolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontSize=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==e)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var t=this.createElement("fontsize");t.setAttribute("size",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontFamily=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==e)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var t=this.createElement("fontfamily");t.setAttribute("family",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontStyle=function(e){if(this.textEnabled){null==e&&(e=0);if(this.compressed){if(this.state.fontStyle==e)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var t=this.createElement("fontstyle");t.setAttribute("style",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setShadow=function(e){if(this.compressed){if(this.state.shadow==e)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var t=this.createElement("shadow");t.setAttribute("enabled",e?"1":"0"),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowColor=function(e){if(this.compressed){e==mxConstants.NONE&&(e=null);if(this.state.shadowColor==e)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var t=this.createElement("shadowcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowAlpha=function(e){if(this.compressed){if(this.state.shadowAlpha==e)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var t=this.createElement("shadowalpha");t.setAttribute("alpha",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowOffset=function(e,t){if(this.compressed){if(this.state.shadowDx==e&&this.state.shadowDy==t)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var n=this.createElement("shadowoffset");n.setAttribute("dx",e),n.setAttribute("dy",t),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rect=function(e,t,n,r){var i=this.createElement("rect");i.setAttribute("x",this.format(e)),i.setAttribute("y",this.format(t)),i.setAttribute("w",this.format(n)),i.setAttribute("h",this.format(r)),this.root.appendChild(i)},mxXmlCanvas2D.prototype.roundrect=function(e,t,n,r,i,s){var o=this.createElement("roundrect");o.setAttribute("x",this.format(e)),o.setAttribute("y",this.format(t)),o.setAttribute("w",this.format(n)),o.setAttribute("h",this.format(r)),o.setAttribute("dx",this.format(i)),o.setAttribute("dy",this.format(s)),this.root.appendChild(o)},mxXmlCanvas2D.prototype.ellipse=function(e,t,n,r){var i=this.createElement("ellipse");i.setAttribute("x",this.format(e)),i.setAttribute("y",this.format(t)),i.setAttribute("w",this.format(n)),i.setAttribute("h",this.format(r)),this.root.appendChild(i)},mxXmlCanvas2D.prototype.image=function(e,t,n,r,i,s,o,u){i=this.converter.convert(i);var a=this.createElement("image");a.setAttribute("x",this.format(e)),a.setAttribute("y",this.format(t)),a.setAttribute("w",this.format(n)),a.setAttribute("h",this.format(r)),a.setAttribute("src",i),a.setAttribute("aspect",s?"1":"0"),a.setAttribute("flipH",o?"1":"0"),a.setAttribute("flipV",u?"1":"0"),this.root.appendChild(a)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastY=this.lastX=0},mxXmlCanvas2D.prototype.moveTo=function(e,t){var n=this.createElement("move");n.setAttribute("x",this.format(e)),n.setAttribute("y",this.format(t)),this.root.appendChild(n),this.lastX=e,this.lastY=t},mxXmlCanvas2D.prototype.lineTo=function(e,t){var n=this.createElement("line");n.setAttribute("x",this.format(e)),n.setAttribute("y",this.format(t)),this.root.appendChild(n),this.lastX=e,this.lastY=t},mxXmlCanvas2D.prototype.quadTo=function(e,t,n,r){var i=this.createElement("quad");i.setAttribute("x1",this.format(e)),i.setAttribute("y1",this.format(t)),i.setAttribute("x2",this.format(n)),i.setAttribute("y2",this.format(r)),this.root.appendChild(i),this.lastX=n,this.lastY=r},mxXmlCanvas2D.prototype.curveTo=function(e,t,n,r,i,s){var o=this.createElement("curve");o.setAttribute("x1",this.format(e)),o.setAttribute("y1",this.format(t)),o.setAttribute("x2",this.format(n)),o.setAttribute("y2",this.format(r)),o.setAttribute("x3",this.format(i)),o.setAttribute("y3",this.format(s)),this.root.appendChild(o),this.lastX=i,this.lastY=s},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(e,t,n,r,i,s,o,u,a,f,l,c,h){if(this.textEnabled&&null!=i){mxUtils.isNode(i)&&(i=mxUtils.getOuterHtml(i));var p=this.createElement("text");p.setAttribute("x",this.format(e)),p.setAttribute("y",this.format(t)),p.setAttribute("w",this.format(n)),p.setAttribute("h",this.format(r)),p.setAttribute("str",i),null!=s&&p.setAttribute("align",s),null!=o&&p.setAttribute("valign",o),p.setAttribute("wrap",u?"1":"0"),null==a&&(a=""),p.setAttribute("format",a),null!=f&&p.setAttribute("overflow",f),null!=l&&p.setAttribute("clip",l?"1":"0"),null!=c&&p.setAttribute("rotation",c),null!=h&&p.setAttribute("dir",h),this.root.appendChild(p)}},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),function(){mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer;if(mxSvgCanvas2D.prototype.useDomParser)try{var e=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=e}catch(t){mxSvgCanvas2D.prototype.useDomParser=!1}}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.imageOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.minStrokeWidth=1,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.blockImagePointerEvents=!1,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var e=window.location.href,t=e.lastIndexOf("#");return 0<t&&(e=e.substring(0,t)),e},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[]},mxSvgCanvas2D.prototype.createStyle=function(e){return e=this.createElement("style"),e.setAttribute("type","text/css"),mxUtils.write(e,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),e},mxSvgCanvas2D.prototype.createElement=function(e,t){if(null!=this.root.ownerDocument.createElementNS)return this.root.ownerDocument.createElementNS(t||mxConstants.NS_SVG,e);var n=this.root.ownerDocument.createElement(e);return null!=t&&n.setAttribute("xmlns",t),n},mxSvgCanvas2D.prototype.createAlternateContent=function(e,t,n,r,i,s,o,u,a,f,l,c,h){return null!=this.foAltText?(e=this.state,t=this.createElement("text"),t.setAttribute("x",Math.round(r/2)),t.setAttribute("y",Math.round((i+e.fontSize)/2)),t.setAttribute("fill",e.fontColor||"black"),t.setAttribute("text-anchor","middle"),t.setAttribute("font-size",e.fontSize+"px"),t.setAttribute("font-family",e.fontFamily),(e.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&t.setAttribute("font-weight","bold"),(e.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&t.setAttribute("font-style","italic"),(e.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&t.setAttribute("text-decoration","underline"),mxUtils.write(t,this.foAltText),t):null},mxSvgCanvas2D.prototype.createGradientId=function(e,t,n,r,i){return"#"==e.charAt(0)&&(e=e.substring(1)),"#"==t.charAt(0)&&(t=t.substring(1)),e=e.toLowerCase()+"-"+n,t=t.toLowerCase()+"-"+r,n=null,null==i||i==mxConstants.DIRECTION_SOUTH?n="s":i==mxConstants.DIRECTION_EAST?n="e":(r=e,e=t,t=r,i==mxConstants.DIRECTION_NORTH?n="s":i==mxConstants.DIRECTION_WEST&&(n="e")),"mx-gradient-"+e+"-"+t+"-"+n},mxSvgCanvas2D.prototype.getSvgGradient=function(e,t,n,r,i){var s=this.createGradientId(e,t,n,r,i),o=this.gradients[s];if(null==o){var u=this.root.ownerSVGElement,a=0,f=s+"-"+a;if(null!=u)for(o=u.ownerDocument.getElementById(f);null!=o&&o.ownerSVGElement!=u;)f=s+"-"+a++,o=u.ownerDocument.getElementById(f);else f="id"+ ++this.refCount;null==o&&(o=this.createSvgGradient(e,t,n,r,i),o.setAttribute("id",f),null!=this.defs?this.defs.appendChild(o):u.appendChild(o)),this.gradients[s]=o}return o.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(e,t,n,r,i){var s=this.createElement("linearGradient");return s.setAttribute("x1","0%"),s.setAttribute("y1","0%"),s.setAttribute("x2","0%"),s.setAttribute("y2","0%"),null==i||i==mxConstants.DIRECTION_SOUTH?s.setAttribute("y2","100%"):i==mxConstants.DIRECTION_EAST?s.setAttribute("x2","100%"):i==mxConstants.DIRECTION_NORTH?s.setAttribute("y1","100%"):i==mxConstants.DIRECTION_WEST&&s.setAttribute("x1","100%"),n=1>n?";stop-opacity:"+n:"",i=this.createElement("stop"),i.setAttribute("offset","0%"),i.setAttribute("style","stop-color:"+e+n),s.appendChild(i),n=1>r?";stop-opacity:"+r:"",i=this.createElement("stop"),i.setAttribute("offset","100%"),i.setAttribute("style","stop-color:"+t+n),s.appendChild(i),s},mxSvgCanvas2D.prototype.addNode=function(e,t){var n=this.node,r=this.state;if(null!=n){if("path"==n.nodeName){if(!(null!=this.path&&0<this.path.length))return;n.setAttribute("d",this.path.join(" "))}e&&null!=r.fillColor?this.updateFill():this.styleEnabled||("ellipse"==n.nodeName&&mxClient.IS_FF?n.setAttribute("fill","transparent"):n.setAttribute("fill","none"),e=!1),t&&null!=r.strokeColor?this.updateStroke():this.styleEnabled||n.setAttribute("stroke","none"),null!=r.transform&&0<r.transform.length&&n.setAttribute("transform",r.transform),r.shadow&&this.root.appendChild(this.createShadow(n)),0<this.strokeTolerance&&!e&&this.root.appendChild(this.createTolerance(n)),!this.pointerEvents||"path"==n.nodeName&&this.path[this.path.length-1]!=this.closeOp?this.pointerEvents||null!=this.originalRoot||n.setAttribute("pointer-events","none"):n.setAttribute("pointer-events",this.pointerEventsValue),("rect"!=n.nodeName&&"path"!=n.nodeName&&"ellipse"!=n.nodeName||"none"!=n.getAttribute("fill")&&"transparent"!=n.getAttribute("fill")||"none"!=n.getAttribute("stroke")||"none"!=n.getAttribute("pointer-events"))&&this.root.appendChild(n),this.node=null}},mxSvgCanvas2D.prototype.updateFill=function(){var e=this.state;(1>e.alpha||1>e.fillAlpha)&&this.node.setAttribute("fill-opacity",e.alpha*e.fillAlpha);if(null!=e.fillColor)if(null!=e.gradientColor)if(e=this.getSvgGradient(String(e.fillColor),String(e.gradientColor),e.gradientFillAlpha,e.gradientAlpha,e.gradientDirection),mxClient.IS_CHROME_APP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document)this.node.setAttribute("fill","url(#"+e+")");else{var t=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+t+"#"+e+")")}else this.node.setAttribute("fill",String(e.fillColor).toLowerCase())},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))},mxSvgCanvas2D.prototype.updateStroke=function(){var e=this.state;this.node.setAttribute("stroke",String(e.strokeColor).toLowerCase()),(1>e.alpha||1>e.strokeAlpha)&&this.node.setAttribute("stroke-opacity",e.alpha*e.strokeAlpha);var t=this.getCurrentStrokeWidth();1!=t&&this.node.setAttribute("stroke-width",t),"path"==this.node.nodeName&&this.updateStrokeAttributes(),e.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((e.fixDash?1:e.strokeWidth)*e.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var e=this.state;null!=e.lineJoin&&"miter"!=e.lineJoin&&this.node.setAttribute("stroke-linejoin",e.lineJoin);if(null!=e.lineCap){var t=e.lineCap;"flat"==t&&(t="butt"),"butt"!=t&&this.node.setAttribute("stroke-linecap",t)}null==e.miterLimit||this.styleEnabled&&10==e.miterLimit||this.node.setAttribute("stroke-miterlimit",e.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(e){var t=[];if("string"==typeof this.state.dashPattern){var n=this.state.dashPattern.split(" ");if(0<n.length)for(var r=0;r<n.length;r++)t[r]=Number(n[r])*e}return t.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(e){e=e.cloneNode(!0);var t=parseFloat(e.getAttribute("stroke-width")||1)+this.strokeTolerance;return e.setAttribute("pointer-events","stroke"),e.setAttribute("visibility","hidden"),e.removeAttribute("stroke-dasharray"),e.setAttribute("stroke-width",t),e.setAttribute("fill","none"),e.setAttribute("stroke",mxClient.IS_OT?"none":"white"),e},mxSvgCanvas2D.prototype.createShadow=function(e){e=e.cloneNode(!0);var t=this.state;return"none"==e.getAttribute("fill")||mxClient.IS_FF&&"transparent"==e.getAttribute("fill")||e.setAttribute("fill",t.shadowColor),"none"!=e.getAttribute("stroke")&&e.setAttribute("stroke",t.shadowColor),e.setAttribute("transform","translate("+this.format(t.shadowDx*t.scale)+","+this.format(t.shadowDy*t.scale)+")"+(t.transform||"")),e.setAttribute("opacity",t.shadowAlpha),e},mxSvgCanvas2D.prototype.setLink=function(e){if(null==e)this.root=this.originalRoot;else{this.originalRoot=this.root;var t=this.createElement("a");null==t.setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?t.setAttribute("xlink:href",e):t.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",e),this.root.appendChild(t),this.root=t}},mxSvgCanvas2D.prototype.rotate=function(e,t,n,r,i){if(0!=e||t||n){var s=this.state;r+=s.dx,i+=s.dy,r*=s.scale,i*=s.scale,s.transform=s.transform||"";if(t&&n)e+=180;else if(t!=n){var o=t?r:0,u=t?-1:1,a=n?i:0,f=n?-1:1;s.transform+="translate("+this.format(o)+","+this.format(a)+")scale("+this.format(u)+","+this.format(f)+")translate("+this.format(-o)+","+this.format(-a)+")"}if(t?!n:n)e*=-1;0!=e&&(s.transform+="rotate("+this.format(e)+","+this.format(r)+","+this.format(i)+")"),s.rotation+=e,s.rotationCx=r,s.rotationCy=i}},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(e,t,n,r){var i=this.state,s=this.createElement("rect");s.setAttribute("x",this.format((e+i.dx)*i.scale)),s.setAttribute("y",this.format((t+i.dy)*i.scale)),s.setAttribute("width",this.format(n*i.scale)),s.setAttribute("height",this.format(r*i.scale)),this.node=s},mxSvgCanvas2D.prototype.roundrect=function(e,t,n,r,i,s){this.rect(e,t,n,r),0<i&&this.node.setAttribute("rx",this.format(i*this.state.scale)),0<s&&this.node.setAttribute("ry",this.format(s*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(e,t,n,r){var i=this.state,s=this.createElement("ellipse");s.setAttribute("cx",Math.round((e+n/2+i.dx)*i.scale)),s.setAttribute("cy",Math.round((t+r/2+i.dy)*i.scale)),s.setAttribute("rx",n/2*i.scale),s.setAttribute("ry",r/2*i.scale),this.node=s},mxSvgCanvas2D.prototype.image=function(e,t,n,r,i,s,o,u){i=this.converter.convert(i),s=null!=s?s:!0,o=null!=o?o:!1,u=null!=u?u:!1;var a=this.state;e+=a.dx,t+=a.dy;var f=this.createElement("image");f.setAttribute("x",this.format(e*a.scale)+this.imageOffset),f.setAttribute("y",this.format(t*a.scale)+this.imageOffset),f.setAttribute("width",this.format(n*a.scale)),f.setAttribute("height",this.format(r*a.scale)),null==f.setAttributeNS?f.setAttribute("xlink:href",i):f.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",i),s||f.setAttribute("preserveAspectRatio","none"),(1>a.alpha||1>a.fillAlpha)&&f.setAttribute("opacity",a.alpha*a.fillAlpha),i=this.state.transform||"";if(o||u){var l=s=1,c=0,h=0;o&&(s=-1,c=-n-2*e),u&&(l=-1,h=-r-2*t),i+="scale("+s+","+l+")translate("+c*a.scale+","+h*a.scale+")"}0<i.length&&f.setAttribute("transform",i),this.pointerEvents||f.setAttribute("pointer-events","none"),this.root.appendChild(f),this.blockImagePointerEvents&&(f.setAttribute("style","pointer-events:none"),f=this.createElement("rect"),f.setAttribute("visibility","hidden"),f.setAttribute("pointer-events","fill"),f.setAttribute("x",this.format(e*a.scale)),f.setAttribute("y",this.format(t*a.scale)),f.setAttribute("width",this.format(n*a.scale)),f.setAttribute("height",this.format(r*a.scale)),this.root.appendChild(f))},mxSvgCanvas2D.prototype.convertHtml=function(e){if(this.useDomParser){var t=(new DOMParser).parseFromString(e,"text/html");null!=t&&(e=(new XMLSerializer).serializeToString(t.body),"<body"==e.substring(0,5)&&(e=e.substring(e.indexOf(">",5)+1)),"</body>"==e.substring(e.length-7,e.length)&&(e=e.substring(0,e.length-7)))}else{if(null!=document.implementation&&null!=document.implementation.createDocument){var t=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),n=t.createElement("body");t.documentElement.appendChild(n);var r=document.createElement("div");r.innerHTML=e;for(e=r.firstChild;null!=e;)r=e.nextSibling,n.appendChild(t.adoptNode(e)),e=r;return n.innerHTML}t=document.createElement("textarea"),t.innerHTML=e.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=t.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return e},mxSvgCanvas2D.prototype.createDiv=function(e,t,n,r,i){return n=this.state,r="display:inline-block;font-size:"+n.fontSize+"px;font-family:"+n.fontFamily+";color:"+n.fontColor+";line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?n.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection)+";"+r,(n.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(r+="font-weight:bold;"),(n.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(r+="font-style:italic;"),(n.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(r+="text-decoration:underline;"),t==mxConstants.ALIGN_CENTER?r+="text-align:center;":t==mxConstants.ALIGN_RIGHT&&(r+="text-align:right;"),t="",null!=n.fontBackgroundColor&&(t+="background-color:"+n.fontBackgroundColor+";"),null!=n.fontBorderColor&&(t+="border:1px solid "+n.fontBorderColor+";"),mxUtils.isNode(e)||(e=this.convertHtml(e),"fill"!=i&&"width"!=i?e='<div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;'+t+'">'+e+"</div>":r+=t),!mxClient.IS_IE&&document.createElementNS?(i=document.createElementNS("http://www.w3.org/1999/xhtml","div"),i.setAttribute("style",r),mxUtils.isNode(e)?this.root.ownerDocument!=document?i.appendChild(e.cloneNode(!0)):i.appendChild(e):i.innerHTML=e,i):(mxUtils.isNode(e)&&this.root.ownerDocument!=document&&(e=e.outerHTML),mxUtils.parseXml('<div xmlns="http://www.w3.org/1999/xhtml" style="'+r+'">'+e+"</div>").documentElement)},mxSvgCanvas2D.prototype.invalidateCachedOffsetSize=function(e){delete e.firstChild.mxCachedOffsetWidth,delete e.firstChild.mxCachedFinalOffsetWidth,delete e.firstChild.mxCachedFinalOffsetHeight},mxSvgCanvas2D.prototype.updateText=function(e,t,n,r,i,s,o,u,a,f,l){if(null!=l&&null!=l.firstChild&&null!=l.firstChild.firstChild&&null!=l.firstChild.firstChild.firstChild){l=l.firstChild;var c=l.firstChild,h=c.firstChild;f=null!=f?f:0;var p=this.state;e+=p.dx,t+=p.dy,a?(h.style.maxHeight=Math.round(r)+"px",h.style.maxWidth=Math.round(n)+"px"):"fill"==u?(h.style.width=Math.round(n+1)+"px",h.style.height=Math.round(r+1)+"px"):"width"==u&&(h.style.width=Math.round(n+1)+"px",0<r&&(h.style.maxHeight=Math.round(r)+"px")),o&&0<n&&(h.style.width=Math.round(n+1)+"px");var d,v=h;null!=v.firstChild&&"DIV"==v.firstChild.nodeName&&(v=v.firstChild);var m=null!=l.mxCachedOffsetWidth?l.mxCachedOffsetWidth:v.offsetWidth;d=m+0,o&&"fill"!=u&&(a&&(d=Math.min(d,n)),h.style.width=Math.round(d+1)+"px"),d=null!=l.mxCachedFinalOffsetWidth?l.mxCachedFinalOffsetWidth:v.offsetWidth,o=null!=l.mxCachedFinalOffsetHeight?l.mxCachedFinalOffsetHeight:v.offsetHeight,this.cacheOffsetSize&&(l.mxCachedOffsetWidth=m,l.mxCachedFinalOffsetWidth=d,l.mxCachedFinalOffsetHeight=o),d+=0,o-=2,a&&(o=Math.min(o,r),d=Math.min(d,n)),"width"==u?r=o:"fill"!=u&&(n=d,r=o),o=a=0,i==mxConstants.ALIGN_CENTER?a-=n/2:i==mxConstants.ALIGN_RIGHT&&(a-=n),e+=a,s==mxConstants.ALIGN_MIDDLE?o-=r/2:s==mxConstants.ALIGN_BOTTOM&&(o-=r),"fill"!=u&&mxClient.IS_FF&&mxClient.IS_WIN&&(o-=2),t+=o,i=1!=p.scale?"scale("+p.scale+")":"",0!=p.rotation&&this.rotateHtml?(i+="rotate("+p.rotation+","+n/2+","+r/2+")",t=this.rotatePoint((e+n/2)*p.scale,(t+r/2)*p.scale,p.rotation,p.rotationCx,p.rotationCy),e=t.x-n*p.scale/2,t=t.y-r*p.scale/2):(e*=p.scale,t*=p.scale),0!=f&&(i+="rotate("+f+","+ -a+","+ -o+")"),l.setAttribute("transform","translate("+Math.round(e)+","+Math.round(t)+")"+i),c.setAttribute("width",Math.round(Math.max(1,n))),c.setAttribute("height",Math.round(Math.max(1,r)))}},mxSvgCanvas2D.prototype.text=function(e,t,n,r,i,s,o,u,a,f,l,c,h){if(this.textEnabled&&null!=i){c=null!=c?c:0;var p=this.state;e+=p.dx,t+=p.dy;if(this.foEnabled&&"html"==a){var d="vertical-align:top;";l?d+="overflow:hidden;max-height:"+Math.round(r)+"px;max-width:"+Math.round(n)+"px;":"fill"==f?d+="width:"+Math.round(n+1)+"px;height:"+Math.round(r+1)+"px;overflow:hidden;":"width"==f&&(d+="width:"+Math.round(n+1)+"px;",0<r&&(d+="max-height:"+Math.round(r)+"px;overflow:hidden;"));var d=u&&0<n?d+("width:"+Math.round(n+1)+"px;white-space:normal;word-wrap:"+mxConstants.WORD_WRAP+";"):d+"white-space:nowrap;",v=this.createElement("g");1>p.alpha&&v.setAttribute("opacity",p.alpha);var m=this.createElement("foreignObject");m.setAttribute("style","overflow:visible;"),m.setAttribute("pointer-events","all"),d=this.createDiv(i,s,o,d,f);if(null!=d){null!=h&&d.setAttribute("dir",h),v.appendChild(m),this.root.appendChild(v);var g,y;h=g=2;if(!mxClient.IS_IE||9!=document.documentMode&&mxClient.IS_SVG){this.root.ownerDocument!=document?(d.style.visibility="hidden",document.body.appendChild(d)):m.appendChild(d);var b=d;null!=b.firstChild&&"DIV"==b.firstChild.nodeName&&(b=b.firstChild,u&&"break-word"==d.style.wordWrap&&(b.style.width="100%")),w=b.offsetWidth,0==w&&d.parentNode==m&&(d.style.visibility="hidden",document.body.appendChild(d),w=b.offsetWidth),this.cacheOffsetSize&&(v.mxCachedOffsetWidth=w),!l&&u&&0<n&&this.root.ownerDocument!=document&&"fill"!=f&&"width"!=f&&(E=d.style.whiteSpace,d.style.whiteSpace="nowrap",w<b.offsetWidth&&(d.style.whiteSpace=E)),g=w+g-1,u&&"fill"!=f&&"width"!=f&&(l&&(g=Math.min(g,n)),d.style.width=g+"px"),g=b.offsetWidth,y=b.offsetHeight,this.cacheOffsetSize&&(v.mxCachedFinalOffsetWidth=g,v.mxCachedFinalOffsetHeight=y),y-=h,d.parentNode!=m&&(m.appendChild(d),d.style.visibility="")}else{b=document.createElement("div"),b.style.cssText=d.getAttribute("style"),b.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",b.style.position="absolute",b.style.visibility="hidden",y=document.createElement("div"),y.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",y.style.wordWrap=mxConstants.WORD_WRAP,y.innerHTML=mxUtils.isNode(i)?i.outerHTML:i,b.appendChild(y),document.body.appendChild(b),8!=document.documentMode&&9!=document.documentMode&&null!=p.fontBorderColor&&(g+=2,h+=2);if(u&&0<n){var w=y.offsetWidth;padDx=0;if(!l&&u&&0<n&&this.root.ownerDocument!=document&&"fill"!=f){var E=b.style.whiteSpace;y.style.whiteSpace="nowrap",w<y.offsetWidth&&(b.style.whiteSpace=E)}l&&(w=Math.min(w,n)),b.style.width=w+"px",g=y.offsetWidth+g+padDx,y=y.offsetHeight+h,b.style.display="inline-block",b.style.position="",b.style.visibility="",b.style.width=g+"px",d.setAttribute("style",b.style.cssText)}else g=y.offsetWidth+g,y=y.offsetHeight+h;b.parentNode.removeChild(b),m.appendChild(d)}l&&(y=Math.min(y,r),g=Math.min(g,n)),"width"==f?r=y:"fill"!=f&&(n=g,r=y),1>p.alpha&&v.setAttribute("opacity",p.alpha),h=d=0,s==mxConstants.ALIGN_CENTER?d-=n/2:s==mxConstants.ALIGN_RIGHT&&(d-=n),e+=d,o==mxConstants.ALIGN_MIDDLE?h-=r/2:o==mxConstants.ALIGN_BOTTOM&&(h-=r),"fill"!=f&&mxClient.IS_FF&&mxClient.IS_WIN&&(h-=2),t+=h,b=1!=p.scale?"scale("+p.scale+")":"",0!=p.rotation&&this.rotateHtml?(b+="rotate("+p.rotation+","+n/2+","+r/2+")",t=this.rotatePoint((e+n/2)*p.scale,(t+r/2)*p.scale,p.rotation,p.rotationCx,p.rotationCy),e=t.x-n*p.scale/2,t=t.y-r*p.scale/2):(e*=p.scale,t*=p.scale),0!=c&&(b+="rotate("+c+","+ -d+","+ -h+")"),v.setAttribute("transform","translate("+(Math.round(e)+this.foOffset)+","+(Math.round(t)+this.foOffset)+")"+b),m.setAttribute("width",Math.round(Math.max(1,n))),m.setAttribute("height",Math.round(Math.max(1,r))),this.root.ownerDocument!=document&&(e=this.createAlternateContent(m,e,t,n,r,i,s,o,u,a,f,l,c),null!=e&&(m.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility"),n=this.createElement("switch"),n.appendChild(m),n.appendChild(e),v.appendChild(n)))}}else this.plainText(e,t,n,r,i,s,o,u,f,l,c,h)}},mxSvgCanvas2D.prototype.createClip=function(e,t,n,r){e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r);for(var i="mx-clip-"+e+"-"+t+"-"+n+"-"+r,s=0,o=i+"-"+s;null!=document.getElementById(o);)o=i+"-"+ ++s;return clip=this.createElement("clipPath"),clip.setAttribute("id",o),i=this.createElement("rect"),i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",n),i.setAttribute("height",r),clip.appendChild(i),clip},mxSvgCanvas2D.prototype.plainText=function(e,t,n,r,i,s,o,u,a,f,l,c){l=null!=l?l:0,u=this.state;var h=u.fontSize,p=this.createElement("g"),d=u.transform||"";this.updateFont(p),0!=l&&(d+="rotate("+l+","+this.format(e*u.scale)+","+this.format(t*u.scale)+")"),null!=c&&p.setAttribute("direction",c),f&&0<n&&0<r&&(c=e,l=t,s==mxConstants.ALIGN_CENTER?c-=n/2:s==mxConstants.ALIGN_RIGHT&&(c-=n),"fill"!=a&&(o==mxConstants.ALIGN_MIDDLE?l-=r/2:o==mxConstants.ALIGN_BOTTOM&&(l-=r)),l=this.createClip(c*u.scale-2,l*u.scale-2,n*u.scale+4,r*u.scale+4),null!=this.defs?this.defs.appendChild(l):this.root.appendChild(l),mxClient.IS_CHROME_APP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document?p.setAttribute("clip-path","url(#"+l.getAttribute("id")+")"):(c=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"),p.setAttribute("clip-path","url("+c+"#"+l.getAttribute("id")+")"))),l=s==mxConstants.ALIGN_RIGHT?"end":s==mxConstants.ALIGN_CENTER?"middle":"start","start"!=l&&p.setAttribute("text-anchor",l),this.styleEnabled&&h==mxConstants.DEFAULT_FONTSIZE||p.setAttribute("font-size",h*u.scale+"px"),0<d.length&&p.setAttribute("transform",d),1>u.alpha&&p.setAttribute("opacity",u.alpha),d=i.split("\n"),c=Math.round(h*mxConstants.LINE_HEIGHT);var v=h+(d.length-1)*c;l=t+h-1,o==mxConstants.ALIGN_MIDDLE?"fill"==a?l-=r/2:(f=(this.matchHtmlAlignment&&f&&0<r?Math.min(v,r):v)/2,l-=f+1):o==mxConstants.ALIGN_BOTTOM&&("fill"==a?l-=r:(f=this.matchHtmlAlignment&&f&&0<r?Math.min(v,r):v,l-=f+2));for(f=0;f<d.length;f++)0<d[f].length&&0<mxUtils.trim(d[f]).length&&(h=this.createElement("text"),h.setAttribute("x",this.format(e*u.scale)+this.textOffset),h.setAttribute("y",this.format(l*u.scale)+this.textOffset),mxUtils.write(h,d[f]),p.appendChild(h)),l+=c;this.root.appendChild(p),this.addTextBackground(p,i,e,t,n,"fill"==a?r:v,s,o,a)},mxSvgCanvas2D.prototype.updateFont=function(e){var t=this.state;e.setAttribute("fill",t.fontColor),this.styleEnabled&&t.fontFamily==mxConstants.DEFAULT_FONTFAMILY||e.setAttribute("font-family",t.fontFamily),(t.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&e.setAttribute("font-weight","bold"),(t.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&e.setAttribute("font-style","italic"),(t.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.setAttribute("text-decoration","underline")},mxSvgCanvas2D.prototype.addTextBackground=function(e,t,n,r,i,s,o,u,a){var f=this.state;if(null!=f.fontBackgroundColor||null!=f.fontBorderColor){var l=null;if("fill"==a||"width"==a)o==mxConstants.ALIGN_CENTER?n-=i/2:o==mxConstants.ALIGN_RIGHT&&(n-=i),u==mxConstants.ALIGN_MIDDLE?r-=s/2:u==mxConstants.ALIGN_BOTTOM&&(r-=s),l=new mxRectangle((n+1)*f.scale,r*f.scale,(i-2)*f.scale,(s+2)*f.scale);else if(null!=e.getBBox&&this.root.ownerDocument==document)try{var l=e.getBBox(),c=mxClient.IS_IE&&mxClient.IS_SVG,l=new mxRectangle(l.x,l.y+(c?0:1),l.width,l.height+(c?1:0))}catch(h){}else l=document.createElement("div"),l.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?f.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,l.style.fontSize=f.fontSize+"px",l.style.fontFamily=f.fontFamily,l.style.whiteSpace="nowrap",l.style.position="absolute",l.style.visibility="hidden",l.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",l.style.zoom="1",(f.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(l.style.fontWeight="bold"),(f.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(l.style.fontStyle="italic"),t=mxUtils.htmlEntities(t,!1),l.innerHTML=t.replace(/\n/g,"<br/>"),document.body.appendChild(l),i=l.offsetWidth,s=l.offsetHeight,l.parentNode.removeChild(l),o==mxConstants.ALIGN_CENTER?n-=i/2:o==mxConstants.ALIGN_RIGHT&&(n-=i),u==mxConstants.ALIGN_MIDDLE?r-=s/2:u==mxConstants.ALIGN_BOTTOM&&(r-=s),l=new mxRectangle((n+1)*f.scale,(r+2)*f.scale,i*f.scale,(s+1)*f.scale);null!=l&&(t=this.createElement("rect"),t.setAttribute("fill",f.fontBackgroundColor||"none"),t.setAttribute("stroke",f.fontBorderColor||"none"),t.setAttribute("x",Math.floor(l.x-1)),t.setAttribute("y",Math.floor(l.y-1)),t.setAttribute("width",Math.ceil(l.width+2)),t.setAttribute("height",Math.ceil(l.height)),f=null!=f.fontBorderColor?Math.max(1,this.format(f.scale)):0,t.setAttribute("stroke-width",f),this.root.ownerDocument==document&&1==mxUtils.mod(f,2)&&t.setAttribute("transform","translate(0.5, 0.5)"),e.insertBefore(t,e.firstChild))}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)};var mxVmlCanvas2D=function(e){mxAbstractCanvas2D.call(this),this.root=e};mxUtils.extend(mxVmlCanvas2D,mxAbstractCanvas2D),mxVmlCanvas2D.prototype.node=null,mxVmlCanvas2D.prototype.textEnabled=!0,mxVmlCanvas2D.prototype.moveOp="m",mxVmlCanvas2D.prototype.lineOp="l",mxVmlCanvas2D.prototype.curveOp="c",mxVmlCanvas2D.prototype.closeOp="x",mxVmlCanvas2D.prototype.rotatedHtmlBackground="",mxVmlCanvas2D.prototype.vmlScale=1,mxVmlCanvas2D.prototype.createElement=function(e){return document.createElement(e)},mxVmlCanvas2D.prototype.createVmlElement=function(e){return this.createElement(mxClient.VML_PREFIX+":"+e)},mxVmlCanvas2D.prototype.addNode=function(e,t){var n=this.node,r=this.state;if(null!=n){if("shape"==n.nodeName){if(!(null!=this.path&&0<this.path.length))return;n.path=this.path.join(" ")+" e",n.style.width=this.root.style.width,n.style.height=this.root.style.height,n.coordsize=parseInt(n.style.width)+" "+parseInt(n.style.height)}n.strokeweight=this.format(Math.max(1,r.strokeWidth*r.scale/this.vmlScale))+"px",r.shadow&&this.root.appendChild(this.createShadow(n,e&&null!=r.fillColor,t&&null!=r.strokeColor)),t&&null!=r.strokeColor?(n.stroked="true",n.strokecolor=r.strokeColor):n.stroked="false",n.appendChild(this.createStroke()),e&&null!=r.fillColor?n.appendChild(this.createFill()):!this.pointerEvents||"shape"==n.nodeName&&this.path[this.path.length-1]!=this.closeOp?n.filled="false":n.appendChild(this.createTransparentFill()),this.root.appendChild(n)}},mxVmlCanvas2D.prototype.createTransparentFill=function(){var e=this.createVmlElement("fill");return e.src=mxClient.imageBasePath+"/transparent.gif",e.type="tile",e},mxVmlCanvas2D.prototype.createFill=function(){var e=this.state,t=this.createVmlElement("fill");t.color=e.fillColor;if(null!=e.gradientColor){t.type="gradient",t.method="none",t.color2=e.gradientColor;var n=180-e.rotation,n=e.gradientDirection==mxConstants.DIRECTION_WEST?n-(90+("x"==this.root.style.flip?180:0)):e.gradientDirection==mxConstants.DIRECTION_EAST?n+(90+("x"==this.root.style.flip?180:0)):e.gradientDirection==mxConstants.DIRECTION_NORTH?n-(180+("y"==this.root.style.flip?-180:0)):n+("y"==this.root.style.flip?-180:0);if("x"==this.root.style.flip||"y"==this.root.style.flip)n*=-1;t.angle=mxUtils.mod(n,360),t.opacity=e.alpha*e.gradientFillAlpha*100+"%",t.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",e.alpha*e.gradientAlpha*100+"%")}else if(1>e.alpha||1>e.fillAlpha)t.opacity=e.alpha*e.fillAlpha*100+"%";return t},mxVmlCanvas2D.prototype.createStroke=function(){var e=this.state,t=this.createVmlElement("stroke");t.endcap=e.lineCap||"flat",t.joinstyle=e.lineJoin||"miter",t.miterlimit=e.miterLimit||"10";if(1>e.alpha||1>e.strokeAlpha)t.opacity=e.alpha*e.strokeAlpha*100+"%";return e.dashed&&(t.dashstyle=this.getVmlDashStyle()),t},mxVmlCanvas2D.prototype.getVmlDashStyle=function(){var e="dash";if("string"==typeof this.state.dashPattern){var t=this.state.dashPattern.split(" ");0<t.length&&1==t[0]&&(e="0 2")}return e},mxVmlCanvas2D.prototype.createShadow=function(e,t,n){var r=this.state,i=Math.PI/180*-r.rotation,s=Math.cos(i),i=Math.sin(i),o=r.shadowDx*r.scale,u=r.shadowDy*r.scale;"x"==this.root.style.flip?o*=-1:"y"==this.root.style.flip&&(u*=-1);var a=e.cloneNode(!0);return a.style.marginLeft=Math.round(o*s-u*i)+"px",a.style.marginTop=Math.round(o*i+u*s)+"px",8==document.documentMode&&(a.strokeweight=e.strokeweight,"shape"==e.nodeName&&(a.path=this.path.join(" ")+" e",a.style.width=this.root.style.width,a.style.height=this.root.style.height,a.coordsize=parseInt(e.style.width)+" "+parseInt(e.style.height))),n?(a.strokecolor=r.shadowColor,a.appendChild(this.createShadowStroke())):a.stroked="false",t?a.appendChild(this.createShadowFill()):a.filled="false",a},mxVmlCanvas2D.prototype.createShadowFill=function(){var e=this.createVmlElement("fill");return e.color=this.state.shadowColor,e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.createShadowStroke=function(){var e=this.createStroke();return e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.rotate=function(e,t,n,r,i){t&&n?e+=180:t?this.root.style.flip="x":n&&(this.root.style.flip="y");if(t?!n:n)e*=-1;this.root.style.rotation=e,this.state.rotation+=e,this.state.rotationCx=r,this.state.rotationCy=i},mxVmlCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createVmlElement("shape"),this.node.style.position="absolute"},mxVmlCanvas2D.prototype.quadTo=function(e,t,n,r){var i=this.state,s=(this.lastX+i.dx)*i.scale,o=(this.lastY+i.dy)*i.scale;e=(e+i.dx)*i.scale,t=(t+i.dy)*i.scale,n=(n+i.dx)*i.scale,r=(r+i.dy)*i.scale;var o=o+2/3*(t-o),u=n+2/3*(e-n);t=r+2/3*(t-r),this.path.push("c "+this.format(s+2/3*(e-s))+" "+this.format(o)+" "+this.format(u)+" "+this.format(t)+" "+this.format(n)+" "+this.format(r)),this.lastX=n/i.scale-i.dx,this.lastY=r/i.scale-i.dy},mxVmlCanvas2D.prototype.createRect=function(e,t,n,r,i){var s=this.state;return e=this.createVmlElement(e),e.style.position="absolute",e.style.left=this.format((t+s.dx)*s.scale)+"px",e.style.top=this.format((n+s.dy)*s.scale)+"px",e.style.width=this.format(r*s.scale)+"px",e.style.height=this.format(i*s.scale)+"px",e},mxVmlCanvas2D.prototype.rect=function(e,t,n,r){this.node=this.createRect("rect",e,t,n,r)},mxVmlCanvas2D.prototype.roundrect=function(e,t,n,r,i,s){this.node=this.createRect("roundrect",e,t,n,r),this.node.setAttribute("arcsize",Math.max(100*i/n,100*s/r)+"%")},mxVmlCanvas2D.prototype.ellipse=function(e,t,n,r){this.node=this.createRect("oval",e,t,n,r)},mxVmlCanvas2D.prototype.image=function(e,t,n,r,i,s,o,u){s?(e=this.createRect("rect",e,t,n,r),e.stroked="false",t=this.createVmlElement("fill"),t.aspect=s?"atmost":"ignore",t.rotate="true",t.type="frame",t.src=i,e.appendChild(t)):(e=this.createRect("image",e,t,n,r),e.src=i),o&&u?e.style.rotation="180":o?e.style.flip="x":u&&(e.style.flip="y");if(1>this.state.alpha||1>this.state.fillAlpha)e.style.filter+="alpha(opacity="+this.state.alpha*this.state.fillAlpha*100+")";this.root.appendChild(e)},mxVmlCanvas2D.prototype.createDiv=function(e,t,n,r){n=this.createElement("div");var i=this.state,s="";return null!=i.fontBackgroundColor&&(s+="background-color:"+i.fontBackgroundColor+";"),null!=i.fontBorderColor&&(s+="border:1px solid "+i.fontBorderColor+";"),mxUtils.isNode(e)?n.appendChild(e):"fill"!=r&&"width"!=r?(r=this.createElement("div"),r.style.cssText=s,r.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",r.style.zoom="1",r.style.textDecoration="inherit",r.innerHTML=e,n.appendChild(r)):(n.style.cssText=s,n.innerHTML=e),e=n.style,e.fontSize=i.fontSize/this.vmlScale+"px",e.fontFamily=i.fontFamily,e.color=i.fontColor,e.verticalAlign="top",e.textAlign=t||"left",e.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?i.fontSize*mxConstants.LINE_HEIGHT/this.vmlScale+"px":mxConstants.LINE_HEIGHT,(i.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(e.fontWeight="bold"),(i.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(e.fontStyle="italic"),(i.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(e.textDecoration="underline"),n},mxVmlCanvas2D.prototype.text=function(e,t,n,r,i,s,o,u,a,f,l,c,h){if(this.textEnabled&&null!=i){var p=this.state;if("html"==a){null!=p.rotation&&(t=this.rotatePoint(e,t,p.rotation,p.rotationCx,p.rotationCy),e=t.x,t=t.y),8!=document.documentMode||mxClient.IS_EM?(e*=p.scale,t*=p.scale):(e+=p.dx,t+=p.dy,"fill"!=f&&o==mxConstants.ALIGN_TOP&&--t),a=8!=document.documentMode||mxClient.IS_EM?this.createElement("div"):this.createVmlElement("group"),a.style.position="absolute",a.style.display="inline",a.style.left=this.format(e)+"px",a.style.top=this.format(t)+"px",a.style.zoom=p.scale;var d=this.createElement("div");d.style.position="relative",d.style.display="inline";var v=mxUtils.getAlignmentAsPoint(s,o),m=v.x,v=v.y;i=this.createDiv(i,s,o,f),s=this.createElement("div"),null!=h&&i.setAttribute("dir",h);if(u&&0<n){if(l||(i.style.width=Math.round(n)+"px"),i.style.wordWrap=mxConstants.WORD_WRAP,i.style.whiteSpace="normal","break-word"==i.style.wordWrap){var g=i;null!=g.firstChild&&"DIV"==g.firstChild.nodeName&&(g.firstChild.style.width="100%")}}else i.style.whiteSpace="nowrap";c=p.rotation+(c||0),this.rotateHtml&&0!=c?(s.style.display="inline",s.style.zoom="1",s.appendChild(i),8!=document.documentMode||mxClient.IS_EM||"DIV"==this.root.nodeName?a.appendChild(s):(d.appendChild(s),a.appendChild(d))):8!=document.documentMode||mxClient.IS_EM?(i.style.display="inline",a.appendChild(i)):(d.appendChild(i),a.appendChild(d)),"DIV"!=this.root.nodeName?(h=this.createVmlElement("rect"),h.stroked="false",h.filled="false",h.appendChild(a),this.root.appendChild(h)):this.root.appendChild(a),l?(i.style.overflow="hidden",i.style.width=Math.round(n)+"px",mxClient.IS_QUIRKS||(i.style.maxHeight=Math.round(r)+"px")):"fill"==f?(i.style.overflow="hidden",i.style.width=Math.max(0,n)+1+"px",i.style.height=Math.max(0,r)+1+"px"):"width"==f&&(i.style.overflow="hidden",i.style.width=Math.max(0,n)+1+"px",i.style.maxHeight=Math.max(0,r)+1+"px");if(this.rotateHtml&&0!=c){g=Math.PI/180*c,c=parseFloat(parseFloat(Math.cos(g)).toFixed(8)),h=parseFloat(parseFloat(Math.sin(-g)).toFixed(8)),g%=2*Math.PI,0>g&&(g+=2*Math.PI),g%=Math.PI,g>Math.PI/2&&(g=Math.PI-g),o=Math.cos(g);var y=Math.sin(g);8!=document.documentMode||mxClient.IS_EM||(i.style.display="inline-block",s.style.display="inline-block",d.style.display="inline-block"),i.style.visibility="hidden",i.style.position="absolute",document.body.appendChild(i),d=i,null!=d.firstChild&&"DIV"==d.firstChild.nodeName&&(d=d.firstChild),g=d.offsetWidth+3,d=d.offsetHeight,l?(n=Math.min(n,g),d=Math.min(d,r)):n=g,u&&(i.style.width=n+"px"),mxClient.IS_QUIRKS&&(l||"width"==f)&&d>r&&(d=r,i.style.height=d+"px"),r=d,l=(r-r*o+n*-y)/2-h*n*(m+.5)+c*r*(v+.5),u=(n-n*o+r*-y)/2+c*n*(m+.5)+h*r*(v+.5),"group"==a.nodeName&&"DIV"==this.root.nodeName?(f=this.createElement("div"),f.style.display="inline-block",f.style.position="absolute",f.style.left=this.format(e+(u-n/2)*p.scale)+"px",f.style.top=this.format(t+(l-r/2)*p.scale)+"px",a.parentNode.appendChild(f),f.appendChild(a)):(p=8!=document.documentMode||mxClient.IS_EM?p.scale:1,a.style.left=this.format(e+(u-n/2)*p)+"px",a.style.top=this.format(t+(l-r/2)*p)+"px"),s.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+c+", M12="+h+", M21="+ -h+", M22="+c+", sizingMethod='auto expand')",s.style.backgroundColor=this.rotatedHtmlBackground,1>this.state.alpha&&(s.style.filter+="alpha(opacity="+100*this.state.alpha+")"),s.appendChild(i),i.style.position="",i.style.visibility=""}else 8!=document.documentMode||mxClient.IS_EM?(i.style.verticalAlign="top",1>this.state.alpha&&(a.style.filter="alpha(opacity="+100*this.state.alpha+")"),p=i.parentNode,i.style.visibility="hidden",document.body.appendChild(i),n=i.offsetWidth,d=i.offsetHeight,mxClient.IS_QUIRKS&&l&&d>r&&(d=r,i.style.height=d+"px"),r=d,i.style.visibility="",p.appendChild(i),a.style.left=this.format(e+n*m*this.state.scale)+"px",a.style.top=this.format(t+r*v*this.state.scale)+"px"):(1>this.state.alpha&&(i.style.filter="alpha(opacity="+100*this.state.alpha+")"),d.style.left=100*m+"%",d.style.top=100*v+"%")}else this.plainText(e,t,n,r,mxUtils.htmlEntities(i,!1),s,o,u,a,f,l,c,h)}},mxVmlCanvas2D.prototype.plainText=function(e,t,n,r,i,s,o,u,a,f,l,c,h){u=this.state,e=(e+u.dx)*u.scale,t=(t+u.dy)*u.scale,n=this.createVmlElement("shape"),n.style.width="1px",n.style.height="1px",n.stroked="false",r=this.createVmlElement("fill"),r.color=u.fontColor,r.opacity=100*u.alpha+"%",n.appendChild(r),r=this.createVmlElement("path"),r.textpathok="true",r.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0),n.appendChild(r),r=this.createVmlElement("textpath"),r.style.cssText="v-text-align:"+s,r.style.align=s,r.style.fontFamily=u.fontFamily,r.string=i,r.on="true",s=u.fontSize*u.scale/this.vmlScale,r.style.fontSize=s+"px",(u.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(r.style.fontWeight="bold"),(u.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(r.style.fontStyle="italic"),(u.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(r.style.textDecoration="underline"),i=i.split("\n"),u=s+(i.length-1)*s*mxConstants.LINE_HEIGHT,s=i=0,o==mxConstants.ALIGN_BOTTOM?s=-u/2:o!=mxConstants.ALIGN_MIDDLE&&(s=u/2),null!=c&&(n.style.rotation=c,o=Math.PI/180*c,i=Math.sin(o)*s,s*=Math.cos(o)),n.appendChild(r),n.style.left=this.format(e-i)+"px",n.style.top=this.format(t+s)+"px",this.root.appendChild(n)},mxVmlCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxVmlCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxVmlCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.setStates=function(e){this.states=e},mxGuide.prototype.isEnabledForEvent=function(e){return!0},mxGuide.prototype.getGuideTolerance=function(){return this.graph.gridSize/2},mxGuide.prototype.createGuideShape=function(e){return e=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH),e.isDashed=!0,e},mxGuide.prototype.move=function(e,t,n,r){if(null!=this.states&&(this.horizontal||this.vertical)&&null!=e&&null!=t){var i=function(t){t+=this.graph.panDy;var n=!1;Math.abs(t-x)<g?(a=t-e.getCenterY(),g=Math.abs(t-x),n=!0):Math.abs(t-E)<g?(a=t-e.y,g=Math.abs(t-E),n=!0):Math.abs(t-S)<g&&(a=t-e.y-e.height,g=Math.abs(t-S),n=!0),n&&(p=T,d=Math.round(t-this.graph.panDy),null==this.guideY&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),h=h||n},s=function(t,n){t+=this.graph.panDx;var r=!1;Math.abs(t-w)<m?(u=t-e.getCenterX(),m=Math.abs(t-w),r=!0):Math.abs(t-y)<m?(u=t-e.x,m=Math.abs(t-y),r=!0):Math.abs(t-b)<m&&(u=t-e.x-e.width,m=Math.abs(t-b),r=!0),r&&(l=n,c=Math.round(t-this.graph.panDx),null==this.guideX&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),f=f||r},o=this.graph.getView().translate;r=this.graph.getView().scale;var u=t.x,a=t.y,f=!1,l=null,c=null,h=!1,p=null,d=null,v=this.getGuideTolerance(),m=v,g=v,v=e.clone();v.x+=t.x,v.y+=t.y;var y=v.x,b=v.x+v.width,w=v.getCenterX(),E=v.y,S=v.y+v.height,x=v.getCenterY();for(t=0;t<this.states.length;t++){var T=this.states[t];null!=T&&(this.horizontal&&(s.call(this,T.getCenterX(),T),s.call(this,T.x,T),s.call(this,T.x+T.width,T)),this.vertical&&(i.call(this,T.getCenterY(),T),i.call(this,T.y,T),i.call(this,T.y+T.height,T)))}n&&(f||(n=e.x-(this.graph.snap(e.x/r-o.x)+o.x)*r,u=this.graph.snap(u/r)*r-n),h||(n=e.y-(this.graph.snap(e.y/r-o.y)+o.y)*r,a=this.graph.snap(a/r)*r-n)),r=this.graph.container,f||null==this.guideX?null!=this.guideX&&(null!=l&&null!=e&&(minY=Math.min(e.y+a-this.graph.panDy,l.y),maxY=Math.max(e.y+e.height+a-this.graph.panDy,l.y+l.height)),this.guideX.points=null!=minY&&null!=maxY?[new mxPoint(c,minY),new mxPoint(c,maxY)]:[new mxPoint(c,-this.graph.panDy),new mxPoint(c,r.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(l,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()):this.guideX.node.style.visibility="hidden",h||null==this.guideY?null!=this.guideY&&(null!=p&&null!=e&&(minX=Math.min(e.x+u-this.graph.panDx,p.x),maxX=Math.max(e.x+e.width+u-this.graph.panDx,p.x+p.width)),this.guideY.points=null!=minX&&null!=maxX?[new mxPoint(minX,d),new mxPoint(maxX,d)]:[new mxPoint(-this.graph.panDx,d),new mxPoint(r.scrollWidth-3-this.graph.panDx,d)],this.guideY.stroke=this.getGuideColor(p,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()):this.guideY.node.style.visibility="hidden",t=new mxPoint(u,a)}return t},mxGuide.prototype.getGuideColor=function(e,t){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(e){null!=this.guideX&&(this.guideX.node.style.visibility=e?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=e?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var e=this.desc.getAttribute("aspect");this.aspect=null!=e?e:"variable",e=this.desc.getAttribute("strokewidth"),this.strokewidth=null!=e?e:"1"},mxStencil.prototype.parseConstraints=function(){var e=this.desc.getElementsByTagName("connections")[0];if(null!=e&&(e=mxUtils.getChildNodes(e),null!=e&&0<e.length)){this.constraints=[];for(var t=0;t<e.length;t++)this.constraints.push(this.parseConstraint(e[t]))}},mxStencil.prototype.parseConstraint=function(e){var t=Number(e.getAttribute("x")),n=Number(e.getAttribute("y")),r="1"==e.getAttribute("perimeter");return e=e.getAttribute("name"),new mxConnectionConstraint(new mxPoint(t,n),r,e)},mxStencil.prototype.evaluateTextAttribute=function(e,t,n){t=this.evaluateAttribute(e,t,n),e=e.getAttribute("localized");if(mxStencil.defaultLocalized&&null==e||"1"==e)t=mxResources.get(t);return t},mxStencil.prototype.evaluateAttribute=function(e,t,n){return t=e.getAttribute(t),null==t&&(e=mxUtils.getTextContent(e),null!=e&&mxStencil.allowEval&&(e=mxUtils.eval(e),"function"==typeof e&&(t=e(n)))),t},mxStencil.prototype.drawShape=function(e,t,n,r,i,s){var o=mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,null),o=this.computeAspect(t.style,n,r,i,s,o),u=Math.min(o.width,o.height),u="inherit"==this.strokewidth?Number(mxUtils.getNumber(t.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*u;e.setStrokeWidth(u),this.drawChildren(e,t,n,r,i,s,this.bgNode,o,!1,!0),this.drawChildren(e,t,n,r,i,s,this.fgNode,o,!0,!t.outline||null==t.style||0==mxUtils.getValue(t.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0))},mxStencil.prototype.drawChildren=function(e,t,n,r,i,s,o,u,a,f){if(null!=o&&0<i&&0<s)for(n=o.firstChild;null!=n;)n.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,t,n,u,a,f),n=n.nextSibling},mxStencil.prototype.computeAspect=function(e,t,n,r,i,s){e=t,t=r/this.w0;var o=i/this.h0;if(s=s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_SOUTH){o=r/this.h0,t=i/this.w0;var u=(r-i)/2;e+=u,n-=u}return"fixed"==this.aspect&&(t=o=Math.min(t,o),s?(e+=(i-this.w0*t)/2,n+=(r-this.h0*o)/2):(e+=(r-this.w0*t)/2,n+=(i-this.h0*o)/2)),new mxRectangle(e,n,t,o)},mxStencil.prototype.drawNode=function(e,t,n,r,i,s){var o=n.nodeName,u=r.x,a=r.y,f=r.width,l=r.height,c=Math.min(f,l);if("save"==o)e.save();else if("restore"==o)e.restore();else if(s){if("path"==o)for(e.begin(),n=n.firstChild;null!=n;)n.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,t,n,r,i,s),n=n.nextSibling;else if("close"==o)e.close();else if("move"==o)e.moveTo(u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l);else if("line"==o)e.lineTo(u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l);else if("quad"==o)e.quadTo(u+Number(n.getAttribute("x1"))*f,a+Number(n.getAttribute("y1"))*l,u+Number(n.getAttribute("x2"))*f,a+Number(n.getAttribute("y2"))*l);else if("curve"==o)e.curveTo(u+Number(n.getAttribute("x1"))*f,a+Number(n.getAttribute("y1"))*l,u+Number(n.getAttribute("x2"))*f,a+Number(n.getAttribute("y2"))*l,u+Number(n.getAttribute("x3"))*f,a+Number(n.getAttribute("y3"))*l);else if("arc"==o)e.arcTo(Number(n.getAttribute("rx"))*f,Number(n.getAttribute("ry"))*l,Number(n.getAttribute("x-axis-rotation")),Number(n.getAttribute("large-arc-flag")),Number(n.getAttribute("sweep-flag")),u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l);else if("rect"==o)e.rect(u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l,Number(n.getAttribute("w"))*f,Number(n.getAttribute("h"))*l);else if("roundrect"==o)t=Number(n.getAttribute("arcsize")),0==t&&(t=100*mxConstants.RECTANGLE_ROUNDING_FACTOR),c=Number(n.getAttribute("w"))*f,r=Number(n.getAttribute("h"))*l,t=Number(t)/100,t=Math.min(c*t,r*t),e.roundrect(u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l,c,r,t,t);else if("ellipse"==o)e.ellipse(u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l,Number(n.getAttribute("w"))*f,Number(n.getAttribute("h"))*l);else if("image"==o)t.outline||(t=this.evaluateAttribute(n,"src",t),e.image(u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l,Number(n.getAttribute("w"))*f,Number(n.getAttribute("h"))*l,t,!1,"1"==n.getAttribute("flipH"),"1"==n.getAttribute("flipV")));else if("text"==o){if(!t.outline){c=this.evaluateTextAttribute(n,"str",t),r="1"==n.getAttribute("vertical")?-90:0;if("0"==n.getAttribute("align-shape")){s=t.rotation;var h=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPH,0);t=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPV,0),r=h&&t?r-s:h||t?r+s:r-s}r-=n.getAttribute("rotation"),e.text(u+Number(n.getAttribute("x"))*f,a+Number(n.getAttribute("y"))*l,0,0,c,n.getAttribute("align")||"left",n.getAttribute("valign")||"top",!1,"",null,!1,r)}}else if("include-shape"==o)s=mxStencilRegistry.getStencil(n.getAttribute("name")),null!=s&&(u+=Number(n.getAttribute("x"))*f,a+=Number(n.getAttribute("y"))*l,c=Number(n.getAttribute("w"))*f,r=Number(n.getAttribute("h"))*l,s.drawShape(e,t,u,a,c,r));else if("fillstroke"==o)e.fillAndStroke();else if("fill"==o)e.fill();else if("stroke"==o)e.stroke();else if("strokewidth"==o)f="1"==n.getAttribute("fixed")?1:c,e.setStrokeWidth(Number(n.getAttribute("width"))*f);else if("dashed"==o)e.setDashed("1"==n.getAttribute("dashed"));else if("dashpattern"==o){if(n=n.getAttribute("pattern"),null!=n){n=n.split(" "),f=[];for(l=0;l<n.length;l++)0<n[l].length&&f.push(Number(n[l])*c);n=f.join(" "),e.setDashPattern(n)}}else"strokecolor"==o?e.setStrokeColor(n.getAttribute("color")):"linecap"==o?e.setLineCap(n.getAttribute("cap")):"linejoin"==o?e.setLineJoin(n.getAttribute("join")):"miterlimit"==o?e.setMiterLimit(Number(n.getAttribute("limit"))):"fillcolor"==o?e.setFillColor(n.getAttribute("color")):"alpha"==o?e.setAlpha(n.getAttribute("alpha")):"fontcolor"==o?e.setFontColor(n.getAttribute("color")):"fontstyle"==o?e.setFontStyle(n.getAttribute("style")):"fontfamily"==o?e.setFontFamily(n.getAttribute("family")):"fontsize"==o&&e.setFontSize(Number(n.getAttribute("size"))*c);!i||"fillstroke"!=o&&"fill"!=o&&"stroke"!=o||e.setShadow(!1)}},mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.minSvgStrokeWidth=1,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.vmlScale=1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(e){null==this.node&&(this.node=this.create(e),null!=e&&e.appendChild(this.node))},mxShape.prototype.initStyles=function(e){this.strokewidth=1,this.rotation=0,this.strokeOpacity=this.fillOpacity=this.opacity=100,this.flipV=this.flipH=!1},mxShape.prototype.isParseVml=function(){return!0},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){return 1==mxUtils.mod(Math.max(1,Math.round((this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth)*this.scale)),2)?.5:0},mxShape.prototype.create=function(e){return null!=e&&null!=e.ownerSVGElement?this.createSvg(e):8==document.documentMode||!mxClient.IS_VML||this.dialect!=mxConstants.DIALECT_VML&&this.isHtmlAllowed()?this.createHtml(e):this.createVml(e)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createVml=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e},mxShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML?this.redrawShape():this.redrawHtmlShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerHTML=""},mxShape.prototype.updateBoundsFromPoints=function(){var e=this.points;if(null!=e&&0<e.length&&null!=e[0]){this.bounds=new mxRectangle(Number(e[0].x),Number(e[0].y),1,1);for(var t=1;t<this.points.length;t++)null!=e[t]&&this.bounds.add(new mxRectangle(Number(e[t].x),Number(e[t].y),1,1))}},mxShape.prototype.getLabelBounds=function(e){var t=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),n=e;t!=mxConstants.DIRECTION_SOUTH&&t!=mxConstants.DIRECTION_NORTH&&null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(n=n.clone(),t=n.width,n.width=n.height,n.height=t),n=this.getLabelMargins(n);if(null!=n){var r="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,!1),i="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,!1);return null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(t=n.x,n.x=n.height,n.height=n.width,n.width=n.y,n.y=t,t=r,r=i,i=t),mxUtils.getDirectedBounds(e,n,this.style,r,i)}return e},mxShape.prototype.getLabelMargins=function(e){return null},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&0<this.bounds.width&&0<this.bounds.height},mxShape.prototype.createVmlGroup=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e.style.width=this.node.style.width,e.style.height=this.node.style.height,e},mxShape.prototype.redrawShape=function(){var e=this.createCanvas();null!=e&&(e.pointerEvents=this.pointerEvents,this.paint(e),this.node!=e.root&&this.node.insertAdjacentHTML("beforeend",e.root.outerHTML),"DIV"==this.node.nodeName&&8==document.documentMode&&(this.node.style.filter="",mxUtils.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(e))},mxShape.prototype.createCanvas=function(){var e=null;return null!=this.node.ownerSVGElement?e=this.createSvgCanvas():mxClient.IS_VML&&(this.updateVmlContainer(),e=this.createVmlCanvas()),null!=e&&this.outline&&(e.setStrokeWidth(this.strokewidth),e.setStrokeColor(this.stroke),null!=this.isDashed&&e.setDashed(this.isDashed),e.setStrokeWidth=function(){},e.setStrokeColor=function(){},e.setFillColor=function(){},e.setGradient=function(){},e.setDashed=function(){},e.text=function(){}),e},mxShape.prototype.createSvgCanvas=function(){var e=new mxSvgCanvas2D(this.node,!1);e.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,e.pointerEventsValue=this.svgPointerEvents,e.blockImagePointerEvents=mxClient.IS_FF;var t=this.getSvgScreenOffset();return 0!=t?this.node.setAttribute("transform","translate("+t+","+t+")"):this.node.removeAttribute("transform"),e.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(e.format=function(e){return Math.round(parseFloat(e))}),e},mxShape.prototype.createVmlCanvas=function(){var e=8==document.documentMode&&this.isParseVml()?this.createVmlGroup():this.node,t=new mxVmlCanvas2D(e,!1);return""!=e.tagUrn&&(e.coordsize=Math.max(1,Math.round(this.bounds.width))*this.vmlScale+","+Math.max(1,Math.round(this.bounds.height))*this.vmlScale,t.scale(this.vmlScale),t.vmlScale=this.vmlScale),e=this.scale,t.translate(-Math.round(this.bounds.x/e),-Math.round(this.bounds.y/e)),t},mxShape.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px";var e=Math.max(1,Math.round(this.bounds.height));this.node.style.width=Math.max(1,Math.round(this.bounds.width))+"px",this.node.style.height=e+"px",this.node.style.overflow="visible"},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(e){var t="";100>this.opacity&&(t+="alpha(opacity="+this.opacity+")"),this.isShadow&&(t+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')");if(null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var n=this.fill,r=this.gradient,i="0",s={east:0,south:1,west:2,north:3},o=null!=this.direction?s[this.direction]:0;null!=this.gradientDirection&&(o=mxUtils.mod(o+s[this.gradientDirection]-1,4)),1==o?(i="1",s=n,n=r,r=s):2==o?(s=n,n=r,r=s):3==o&&(i="1"),t+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+n+"', endColorStr='"+r+"', gradientType='"+i+"')"}e.style.filter=t},mxShape.prototype.updateHtmlColors=function(e){var t=this.stroke;null!=t&&t!=mxConstants.NONE?(e.style.borderColor=t,this.isDashed?e.style.borderStyle="dashed":0<this.strokewidth&&(e.style.borderStyle="solid"),e.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):e.style.borderWidth="0px",t=this.outline?null:this.fill,null!=t&&t!=mxConstants.NONE?(e.style.backgroundColor=t,e.style.backgroundImage="none"):this.pointerEvents?e.style.backgroundColor="transparent":8==document.documentMode?mxUtils.addTransparentBackgroundFilter(e):this.setTransparentBackgroundImage(e)},mxShape.prototype.updateHtmlBounds=function(e){var t=9<=document.documentMode?0:Math.ceil(this.strokewidth*this.scale);e.style.borderWidth=Math.max(1,t)+"px",e.style.overflow="hidden",e.style.left=Math.round(this.bounds.x-t/2)+"px",e.style.top=Math.round(this.bounds.y-t/2)+"px","CSS1Compat"==document.compatMode&&(t=-t),e.style.width=Math.round(Math.max(0,this.bounds.width+t))+"px",e.style.height=Math.round(Math.max(0,this.bounds.height+t))+"px"},mxShape.prototype.destroyCanvas=function(e){if(e instanceof mxSvgCanvas2D){for(var t in e.gradients){var n=e.gradients[t];null!=n&&(n.mxRefCount=(n.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=e.gradients}},mxShape.prototype.paint=function(e){var t=!1;if(null!=e&&this.outline){var n=e.stroke;e.stroke=function(){t=!0,n.apply(this,arguments)};var r=e.fillAndStroke;e.fillAndStroke=function(){t=!0,r.apply(this,arguments)}}var i=this.scale,s=this.bounds.x/i,o=this.bounds.y/i,u=this.bounds.width/i,a=this.bounds.height/i;if(this.isPaintBoundsInverted())var f=(u-a)/2,s=s+f,o=o-f,f=u,u=a,a=f;this.updateTransform(e,s,o,u,a),this.configureCanvas(e,s,o,u,a),f=null;if(null==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents){var l=this.createBoundingBox();this.dialect==mxConstants.DIALECT_SVG?(f=this.createTransparentSvgRectangle(l.x,l.y,l.width,l.height),this.node.appendChild(f)):(l=e.createRect("rect",l.x/i,l.y/i,l.width/i,l.height/i),l.appendChild(e.createTransparentFill()),l.stroked="false",e.root.appendChild(l))}if(null!=this.stencil)this.stencil.drawShape(e,this,s,o,u,a);else if(e.setStrokeWidth(this.strokewidth),null!=this.points){for(var l=[],c=0;c<this.points.length;c++)null!=this.points[c]&&l.push(new mxPoint(this.points[c].x/i,this.points[c].y/i));this.paintEdgeShape(e,l)}else this.paintVertexShape(e,s,o,u,a);null!=f&&null!=e.state&&null!=e.state.transform&&f.setAttribute("transform",e.state.transform),null!=e&&this.outline&&!t&&(e.rect(s,o,u,a),e.stroke())},mxShape.prototype.configureCanvas=function(e,t,n,r,i){var s=null;null!=this.style&&(s=this.style.dashPattern),e.setAlpha(this.opacity/100),e.setFillAlpha(this.fillOpacity/100),e.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&e.setShadow(this.isShadow),null!=this.isDashed&&e.setDashed(this.isDashed,null!=this.style?1==mxUtils.getValue(this.style,mxConstants.STYLE_FIX_DASH,!1):!1),null!=s&&e.setDashPattern(s),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(t=this.getGradientBounds(e,t,n,r,i),e.setGradient(this.fill,this.gradient,t.x,t.y,t.width,t.height,this.gradientDirection)):e.setFillColor(this.fill),e.setStrokeColor(this.stroke)},mxShape.prototype.getGradientBounds=function(e,t,n,r,i){return new mxRectangle(t,n,r,i)},mxShape.prototype.updateTransform=function(e,t,n,r,i){e.scale(this.scale),e.rotate(this.getShapeRotation(),this.flipH,this.flipV,t+r/2,n+i/2)},mxShape.prototype.paintVertexShape=function(e,t,n,r,i){this.paintBackground(e,t,n,r,i),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(e.setShadow(!1),this.paintForeground(e,t,n,r,i))},mxShape.prototype.paintBackground=function(e,t,n,r,i){},mxShape.prototype.paintForeground=function(e,t,n,r,i){},mxShape.prototype.paintEdgeShape=function(e,t){},mxShape.prototype.getArcSize=function(e,t){var n;return"1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?n=Math.min(e/2,Math.min(t/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,n=Math.min(e*n,t*n)),n},mxShape.prototype.paintGlassEffect=function(e,t,n,r,i,s){var o=Math.ceil(this.strokewidth/2);e.setGradient("#ffffff","#ffffff",t,n,r,.6*i,"south",.9,.1),e.begin(),s+=2*o,this.isRounded?(e.moveTo(t-o+s,n-o),e.quadTo(t-o,n-o,t-o,n-o+s),e.lineTo(t-o,n+.4*i),e.quadTo(t+.5*r,n+.7*i,t+r+o,n+.4*i),e.lineTo(t+r+o,n-o+s),e.quadTo(t+r+o,n-o,t+r+o-s,n-o)):(e.moveTo(t-o,n-o),e.lineTo(t-o,n+.4*i),e.quadTo(t+.5*r,n+.7*i,t+r+o,n+.4*i),e.lineTo(t+r+o,n-o)),e.close(),e.fill()},mxShape.prototype.addPoints=function(e,t,n,r,i,s,o){if(null!=t&&0<t.length){o=null!=o?o:!0;var u=t[t.length-1];if(i&&n){t=t.slice();var a=t[0],a=new mxPoint(u.x+(a.x-u.x)/2,u.y+(a.y-u.y)/2);t.splice(0,0,a)}var f=t[0],a=1;for(o?e.moveTo(f.x,f.y):e.lineTo(f.x,f.y);a<(i?t.length:t.length-1);){o=t[mxUtils.mod(a,t.length)];var l=f.x-o.x,f=f.y-o.y;if(n&&(0!=l||0!=f)&&(null==s||0>mxUtils.indexOf(s,a-1))){var c=Math.sqrt(l*l+f*f);e.lineTo(o.x+l*Math.min(r,c/2)/c,o.y+f*Math.min(r,c/2)/c);for(f=t[mxUtils.mod(a+1,t.length)];a<t.length-2&&0==Math.round(f.x-o.x)&&0==Math.round(f.y-o.y);)f=t[mxUtils.mod(a+2,t.length)],a++;l=f.x-o.x,f=f.y-o.y,c=Math.max(1,Math.sqrt(l*l+f*f)),l=o.x+l*Math.min(r,c/2)/c,f=o.y+f*Math.min(r,c/2)/c,e.quadTo(o.x,o.y,l,f),o=new mxPoint(l,f)}else e.lineTo(o.x,o.y);f=o,a++}i?e.close():e.lineTo(u.x,u.y)}},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(e){this.state=e,this.style=e.style;if(null!=this.style){this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV);if(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)e=this.flipH,this.flipH=this.flipV,this.flipV=e;this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE&&(this.stroke=null)}},mxShape.prototype.setCursor=function(e){null==e&&(e=""),this.cursor=e,null!=this.node&&(this.node.style.cursor=e)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.isRoundable=function(){return!1},mxShape.prototype.updateBoundingBox=function(){if(this.useSvgBoundingBox&&null!=this.node&&null!=this.node.ownerSVGElement)try{var e=this.node.getBBox();if(0<e.width&&0<e.height){this.boundingBox=new mxRectangle(e.x,e.y,e.width,e.height),this.boundingBox.grow(this.strokewidth*this.scale/2);return}}catch(t){}if(null!=this.bounds){e=this.createBoundingBox();if(null!=e){this.augmentBoundingBox(e);var n=this.getShapeRotation();0!=n&&(e=mxUtils.getBoundingBox(e,n))}this.boundingBox=e}},mxShape.prototype.createBoundingBox=function(){var e=this.bounds.clone();return(null!=this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&e.rotate90(),e},mxShape.prototype.augmentBoundingBox=function(e){this.isShadow&&(e.width+=Math.ceil(mxConstants.SHADOW_OFFSET_X*this.scale),e.height+=Math.ceil(mxConstants.SHADOW_OFFSET_Y*this.scale)),e.grow(this.strokewidth*this.scale/2)},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var e=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(e+=mxText.prototype.verticalTextRotation),e},mxShape.prototype.getShapeRotation=function(){var e=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?e+=270:this.direction==mxConstants.DIRECTION_WEST?e+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(e+=90)),e},mxShape.prototype.createTransparentSvgRectangle=function(e,t,n,r){var i=document.createElementNS(mxConstants.NS_SVG,"rect");return i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",n),i.setAttribute("height",r),i.setAttribute("fill","none"),i.setAttribute("stroke","none"),i.setAttribute("pointer-events","all"),i},mxShape.prototype.setTransparentBackgroundImage=function(e){e.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.releaseSvgGradients=function(e){if(null!=e)for(var t in e){var n=e[t];null!=n&&(n.mxRefCount=(n.mxRefCount||0)-1,0==n.mxRefCount&&null!=n.parentNode&&n.parentNode.removeChild(n))}},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null};var mxStencilRegistry={stencils:{},addStencil:function(e,t){mxStencilRegistry.stencils[e]=t},getStencil:function(e){return mxStencilRegistry.stencils[e]}},mxMarker={markers:[],addMarker:function(e,t){mxMarker.markers[e]=t},createMarker:function(e,t,n,r,i,s,o,u,a,f){var l=mxMarker.markers[n];return null!=l?l(e,t,n,r,i,s,o,u,a,f):null}};(function(){function e(e){return e=null!=e?e:2,function(t,n,r,i,s,o,u,f,l,c){n=s*l*1.118,f=o*l*1.118,s*=u+l,o*=u+l;var h=i.clone();return h.x-=n,h.y-=f,u=r!=mxConstants.ARROW_CLASSIC&&r!=mxConstants.ARROW_CLASSIC_THIN?1:.75,i.x+=-s*u-n,i.y+=-o*u-f,function(){t.begin(),t.moveTo(h.x,h.y),t.lineTo(h.x-s-o/e,h.y-o+s/e),r!=mxConstants.ARROW_CLASSIC&&r!=mxConstants.ARROW_CLASSIC_THIN||t.lineTo(h.x-3*s/4,h.y-3*o/4),t.lineTo(h.x+o/e-s,h.y-o-s/e),t.close(),c?t.fillAndStroke():t.stroke()}}}function t(e){return e=null!=e?e:2,function(t,n,r,i,s,o,u,f,l,c){n=s*l*1.118,r=o*l*1.118,s*=u+l,o*=u+l;var h=i.clone();return h.x-=n,h.y-=r,i.x+=2*-n,i.y+=2*-r,function(){t.begin(),t.moveTo(h.x-s-o/e,h.y-o+s/e),t.lineTo(h.x,h.y),t.lineTo(h.x+o/e-s,h.y-o-s/e),t.stroke()}}}function n(e,t,n,r,i,s,o,u,a,f){u=n==mxConstants.ARROW_DIAMOND?.7071:.9862,t=i*a*u,u*=s*a,i*=o+a,s*=o+a;var l=r.clone();l.x-=t,l.y-=u,r.x+=-i-t,r.y+=-s-u;var c=n==mxConstants.ARROW_DIAMOND?2:3.4;return function(){e.begin(),e.moveTo(l.x,l.y),e.lineTo(l.x-i/2-s/c,l.y+i/c-s/2),e.lineTo(l.x-i,l.y-s),e.lineTo(l.x-i/2+s/c,l.y-s/2-i/c),e.close(),f?e.fillAndStroke():e.stroke()}}mxMarker.addMarker("classic",e(2)),mxMarker.addMarker("classicThin",e(3)),mxMarker.addMarker("block",e(2)),mxMarker.addMarker("blockThin",e(3)),mxMarker.addMarker("open",t(2)),mxMarker.addMarker("openThin",t(3)),mxMarker.addMarker("oval",function(e,t,n,r,i,s,o,u,a,f){var l=o/2,c=r.clone();return r.x-=i*l,r.y-=s*l,function(){e.ellipse(c.x-l,c.y-l,o,o),f?e.fillAndStroke():e.stroke()}}),mxMarker.addMarker("diamond",n),mxMarker.addMarker("diamondThin",n)})(),mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(e,t,n,r,i){e.translate(t,n),e.begin(),this.redrawPath(e,t,n,r,i),e.fillAndStroke()},mxActor.prototype.redrawPath=function(e,t,n,r,i){t=r/3,e.moveTo(0,i),e.curveTo(0,3*i/5,0,2*i/5,r/2,2*i/5),e.curveTo(r/2-t,2*i/5,r/2-t,0,r/2,0),e.curveTo(r/2+t,0,r/2+t,2*i/5,r/2,2*i/5),e.curveTo(r,2*i/5,r,3*i/5,r,i),e.close()},mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(e,t,n,r,i){e.moveTo(.25*r,.25*i),e.curveTo(.05*r,.25*i,0,.5*i,.16*r,.55*i),e.curveTo(0,.66*i,.18*r,.9*i,.31*r,.8*i),e.curveTo(.4*r,i,.7*r,i,.8*r,.8*i),e.curveTo(r,.8*i,r,.6*i,.875*r,.5*i),e.curveTo(r,.3*i,.8*r,.1*i,.625*r,.2*i),e.curveTo(.5*r,.05*i,.3*r,.05*i,.25*r,.25*i),e.close()},mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var e=!0;return null!=this.style&&(e="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(e||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(e,t,n,r,i){var s=!0;null!=this.style&&(s="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"));if(s||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE)s||null!=this.fill&&this.fill!=mxConstants.NONE||(e.pointerEvents=!1),this.isRounded?("1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?s=Math.min(r/2,Math.min(i/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.min(r*s,i*s)),e.roundrect(t,n,r,i,s,s)):e.rect(t,n,r,i),e.fillAndStroke()},mxRectangleShape.prototype.isRoundable=function(e,t,n,r,i){return!0},mxRectangleShape.prototype.paintForeground=function(e,t,n,r,i){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(e,t,n,r,i,this.getArcSize(r+this.strokewidth,i+this.strokewidth))},mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(e,t,n,r,i){e.ellipse(t,n,r,i),e.fillAndStroke()},mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.vmlScale=10,mxDoubleEllipse.prototype.paintBackground=function(e,t,n,r,i){e.ellipse(t,n,r,i),e.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(e,t,n,r,i){if(!this.outline){var s=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(r/5,i/5)));r-=2*s,i-=2*s,0<r&&0<i&&e.ellipse(t+s,n+s,r,i),e.stroke()}},mxDoubleEllipse.prototype.getLabelBounds=function(e){var t=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(e.width/5/this.scale,e.height/5/this.scale)))*this.scale;return new mxRectangle(e.x+t,e.y+t,e.width-2*t,e.height-2*t)},mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.isRoundable=function(){return!0},mxRhombus.prototype.paintVertexShape=function(e,t,n,r,i){var s=r/2,o=i/2,u=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,[new mxPoint(t+s,n),new mxPoint(t+r,n+o),new mxPoint(t+s,n+i),new mxPoint(t,n+o)],this.isRounded,u,!0),e.fillAndStroke()},mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(e,t){null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(e,t,this.isRounded):this.paintCurvedLine(e,t)},mxPolyline.prototype.paintLine=function(e,t,n){var r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,t,n,r,!1),e.stroke()},mxPolyline.prototype.paintCurvedLine=function(e,t){e.begin();var n=t[0],r=t.length;e.moveTo(n.x,n.y);for(n=1;n<r-2;n++){var i=t[n],s=t[n+1];e.quadTo(i.x,i.y,(i.x+s.x)/2,(i.y+s.y)/2)}i=t[r-2],s=t[r-1],e.quadTo(i.x,i.y,s.x,s.y),e.stroke()},mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments),e.grow((Math.max(this.arrowWidth,this.endSize)/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(e,t){var n=mxConstants.ARROW_SPACING,r=mxConstants.ARROW_WIDTH,i=t[0],s=t[t.length-1],o=s.x-i.x,u=s.y-i.y,a=Math.sqrt(o*o+u*u),f=a-2*n-mxConstants.ARROW_SIZE,o=o/a,u=u/a,a=r*u/3,r=-r*o/3,l=i.x-a/2+n*o,i=i.y-r/2+n*u,c=l+a,h=i+r,p=c+f*o,f=h+f*u,d=p+a,v=f+r,m=d-3*a,g=v-3*r;e.begin(),e.moveTo(l,i),e.lineTo(c,h),e.lineTo(p,f),e.lineTo(d,v),e.lineTo(s.x-n*o,s.y-n*u),e.lineTo(m,g),e.lineTo(m+a,g+r),e.close(),e.fillAndStroke()},mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=this.getEdgeWidth();this.isMarkerStart()&&(t=Math.max(t,this.getStartArrowWidth())),this.isMarkerEnd()&&(t=Math.max(t,this.getEndArrowWidth())),e.grow((t/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(e,t){var n=this.strokewidth;this.outline&&(n=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth)));for(var r=this.getStartArrowWidth()+n,i=this.getEndArrowWidth()+n,s=this.outline?this.getEdgeWidth()+n:this.getEdgeWidth(),o=this.isOpenEnded(),u=this.isMarkerStart(),a=this.isMarkerEnd(),f=o?0:this.arrowSpacing+n/2,l=this.startSize+n,n=this.endSize+n,c=this.isArrowRounded(),h=t[t.length-1],p=1;p<t.length-1&&t[p].x==t[0].x&&t[p].y==t[0].y;)p++;var d=t[p].x-t[0].x,p=t[p].y-t[0].y,v=Math.sqrt(d*d+p*p);if(0!=v){var m=d/v,g,y=m,b=p/v,w,E=b,v=s*b,S=-s*m,x=[];c?e.setLineJoin("round"):2<t.length&&e.setMiterLimit(1.42),e.begin(),d=m,p=b;if(u&&!o)this.paintMarker(e,t[0].x,t[0].y,m,b,l,r,s,f,!0);else{g=t[0].x+v/2+f*m,w=t[0].y+S/2+f*b;var T=t[0].x-v/2+f*m,N=t[0].y-S/2+f*b;o?(e.moveTo(g,w),x.push(function(){e.lineTo(T,N)})):(e.moveTo(T,N),e.lineTo(g,w))}for(var C=w=g=0,v=0;v<t.length-2;v++)if(S=mxUtils.relativeCcw(t[v].x,t[v].y,t[v+1].x,t[v+1].y,t[v+2].x,t[v+2].y),g=t[v+2].x-t[v+1].x,w=t[v+2].y-t[v+1].y,C=Math.sqrt(g*g+w*w),0!=C&&(y=g/C,E=w/C,tmp=Math.max(Math.sqrt((m*y+b*E+1)/2),.04),g=m+y,w=b+E,C=Math.sqrt(g*g+w*w),0!=C)){g/=C,w/=C;var C=Math.max(tmp,Math.min(this.strokewidth/200+.04,.35)),C=0!=S&&c?Math.max(.1,C):Math.max(tmp,.06),k=t[v+1].x+w*s/2/C,L=t[v+1].y-g*s/2/C;w=t[v+1].x-w*s/2/C,g=t[v+1].y+g*s/2/C,0!=S&&c?-1==S?(S=w+E*s,C=g-y*s,e.lineTo(w+b*s,g-m*s),e.quadTo(k,L,S,C),function(t,n){x.push(function(){e.lineTo(t,n)})}(w,g)):(e.lineTo(k,L),function(t,n){var r=k-b*s,i=L+m*s,o=k-E*s,u=L+y*s;x.push(function(){e.quadTo(t,n,r,i)}),x.push(function(){e.lineTo(o,u)})}(w,g)):(e.lineTo(k,L),function(t,n){x.push(function(){e.lineTo(t,n)})}(w,g)),m=y,b=E}v=s*E,S=-s*y;if(a&&!o)this.paintMarker(e,h.x,h.y,-m,-b,n,i,s,f,!1);else{e.lineTo(h.x-f*y+v/2,h.y-f*E+S/2);var A=h.x-f*y-v/2,O=h.y-f*E-S/2;o?(e.moveTo(A,O),x.splice(0,0,function(){e.moveTo(A,O)})):e.lineTo(A,O)}for(v=x.length-1;0<=v;v--)x[v]();o?(e.end(),e.stroke()):(e.close(),e.fillAndStroke()),e.setShadow(!1),e.setMiterLimit(4),c&&e.setLineJoin("flat"),2<t.length&&(e.setMiterLimit(4),u&&!o&&(e.begin(),this.paintMarker(e,t[0].x,t[0].y,d,p,l,r,s,f,!0),e.stroke(),e.end()),a&&!o&&(e.begin(),this.paintMarker(e,h.x,h.y,-m,-b,n,i,s,f,!0),e.stroke(),e.end()))}},mxArrowConnector.prototype.paintMarker=function(e,t,n,r,i,s,o,u,a,f){o=u/o;var l=u*i/2;u=-u*r/2;var c=(a+s)*r;s=(a+s)*i,f?e.moveTo(t-l+c,n-u+s):e.lineTo(t-l+c,n-u+s),e.lineTo(t-l/o+c,n-u/o+s),e.lineTo(t+a*r,n+a*i),e.lineTo(t+l/o+c,n+u/o+s),e.lineTo(t+l+c,n+u+s)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isParseVml=function(){return!1},mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.paint=function(e,t){var n=this.scale,r=this.bounds.x/n,i=this.bounds.y/n,s=this.bounds.width/n,n=this.bounds.height/n;this.updateTransform(e,r,i,s,n),this.configureCanvas(e,r,i,s,n);var o=null!=this.state?this.state.unscaledWidth:null;if(t)null==this.node.firstChild||null!=o&&this.lastUnscaledWidth==o||e.invalidateCachedOffsetSize(this.node),e.updateText(r,i,s,n,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node);else{var u=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML,a=u||e instanceof mxVmlCanvas2D?"html":"",f=this.value;u||"html"!=a||(f=mxUtils.htmlEntities(f,!1)),"html"!=a||mxUtils.isNode(this.value)||(f=mxUtils.replaceTrailingNewlines(f,"<div><br></div>"));var f=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==a?f.replace(/\n/g,"<br/>"):f,l=this.textDirection;l!=mxConstants.TEXT_DIRECTION_AUTO||u||(l=this.getAutoDirection()),l!=mxConstants.TEXT_DIRECTION_LTR&&l!=mxConstants.TEXT_DIRECTION_RTL&&(l=null),e.text(r,i,s,n,f,this.align,this.valign,this.wrap,a,this.overflow,this.clipped,this.getTextRotation(),l)}this.lastUnscaledWidth=o},mxText.prototype.redraw=function(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML))if("DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML){var e=this.createCanvas();null!=e&&null!=e.updateText&&null!=e.invalidateCachedOffsetSize?(this.paint(e,!0),this.destroyCanvas(e),this.updateBoundingBox()):mxShape.prototype.redraw.apply(this,arguments)}else this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||8>=document.documentMode)?this.updateHtmlFilter():this.updateHtmlTransform(),this.updateBoundingBox();else mxShape.prototype.redraw.apply(this,arguments),mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.lastValue=this.value:this.lastValue=null},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants.ALIGN_CENTER,this.valign=mxConstants.ALIGN_MIDDLE,this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacingLeft=this.spacingBottom=this.spacingRight=this.spacingTop=this.spacing=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(e){var t=this.spacing;mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop-t))+this.spacing,this.spacingRight=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight-t))+this.spacing,this.spacingBottom=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom-t))+this.spacing,this.spacingLeft=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft-t))+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipH=this.flipV=null},mxText.prototype.getAutoDirection=function(){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=e&&0<e.length&&"z"<e[0]?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.updateBoundingBox=function(){var e=this.node;this.boundingBox=this.bounds.clone();var t=this.getTextRotation(),n=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,r=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(!(this.ignoreStringSize||null==e||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&n==mxConstants.ALIGN_CENTER&&r==mxConstants.ALIGN_MIDDLE)){r=n=null;if(null!=e.ownerSVGElement)if(null!=e.firstChild&&null!=e.firstChild.firstChild&&"foreignObject"==e.firstChild.firstChild.nodeName)e=e.firstChild.firstChild,n=parseInt(e.getAttribute("width"))*this.scale,r=parseInt(e.getAttribute("height"))*this.scale;else try{var i=e.getBBox();"string"==typeof this.value&&0==mxUtils.trim(this.value)?this.boundingBox=null:this.boundingBox=0==i.width&&0==i.height?null:new mxRectangle(i.x,i.y,i.width,i.height);return}catch(s){}else{n=null!=this.state?this.state.view.textDiv:null;if(null==this.offsetWidth||null==this.offsetHeight)null!=n&&(this.updateFont(n),this.updateSize(n,!1),this.updateInnerHtml(n),e=n),i=e,8!=document.documentMode||mxClient.IS_EM?null!=i.firstChild&&"DIV"==i.firstChild.nodeName&&(i=i.firstChild):(r=Math.round(this.bounds.width/this.scale),this.wrap&&0<r?(e.style.wordWrap=mxConstants.WORD_WRAP,e.style.whiteSpace="normal","break-word"!=e.style.wordWrap&&(e=i.getElementsByTagName("div"),0<e.length&&(i=e[e.length-1]),n=i.offsetWidth+2,e=this.node.getElementsByTagName("div"),this.clipped&&(n=Math.min(r,n)),1<e.length&&(e[e.length-2].style.width=n+"px"))):e.style.whiteSpace="nowrap"),this.offsetWidth=i.offsetWidth+this.textWidthPadding,this.offsetHeight=i.offsetHeight;n=this.offsetWidth*this.scale,r=this.offsetHeight*this.scale}null!=n&&null!=r&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,n,r))}null!=this.boundingBox&&(0!=t?(t=mxUtils.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),t,new mxPoint(0,0)),this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=t.x,this.boundingBox.y+=t.y,this.boundingBox.width=t.width,this.boundingBox.height=t.height):(this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null))},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(e,t,n,r,i){mxShape.prototype.configureCanvas.apply(this,arguments),e.setFontColor(this.color),e.setFontBackgroundColor(this.background),e.setFontBorderColor(this.border),e.setFontFamily(this.family),e.setFontSize(this.size),e.setFontStyle(this.fontStyle)},mxText.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width="1px",this.node.style.height="1px",this.node.style.overflow="visible"},mxText.prototype.redrawHtmlShape=function(){var e=this.node.style;e.whiteSpace="normal",e.overflow="",e.width="",e.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetHeight=this.offsetWidth=null,mxClient.IS_IE&&(null==document.documentMode||8>=document.documentMode)?this.updateHtmlFilter():this.updateHtmlTransform()},mxText.prototype.updateHtmlTransform=function(){var e=this.getTextRotation(),t=this.node.style,n=this.margin.x,r=this.margin.y;0!=e?(mxUtils.setPrefixedStyle(t,"transformOrigin",100*-n+"% "+100*-r+"%"),mxUtils.setPrefixedStyle(t,"transform","translate("+100*n+"%,"+100*r+"%)scale("+this.scale+") rotate("+e+"deg)")):(mxUtils.setPrefixedStyle(t,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(t,"transform","scale("+this.scale+")translate("+100*n+"%,"+100*r+"%)")),t.left=Math.round(this.bounds.x-Math.ceil(n*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",t.top=Math.round(this.bounds.y-r*("fill"!=this.overflow?3:1))+"px",t.opacity=100>this.opacity?this.opacity/100:""},mxText.prototype.updateInnerHtml=function(e){if(mxUtils.isNode(this.value))e.innerHTML=this.value.outerHTML;else{var t=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div>&nbsp;</div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,e.innerHTML='<div style="display:inline-block;_display:inline;">'+t+"</div>"}},mxText.prototype.updateHtmlFilter=function(){var e=this.node.style,t=this.margin.x,n=this.margin.y,r=this.scale;mxUtils.setOpacity(this.node,this.opacity);var i,s=0,o=null!=this.state?this.state.view.textDiv:null,u=this.node;if(null!=o){o.style.overflow="",o.style.height="",o.style.width="",this.updateFont(o),this.updateSize(o,!1),this.updateInnerHtml(o);var a=Math.round(this.bounds.width/this.scale);this.wrap&&0<a?(o.style.whiteSpace="normal",o.style.wordWrap=mxConstants.WORD_WRAP,i=a,this.clipped&&(i=Math.min(i,this.bounds.width)),o.style.width=i+"px"):o.style.whiteSpace="nowrap",u=o,null!=u.firstChild&&"DIV"==u.firstChild.nodeName&&(u=u.firstChild,this.wrap&&"break-word"==o.style.wordWrap&&(u.style.width="100%")),!this.clipped&&this.wrap&&0<a&&(i=u.offsetWidth+this.textWidthPadding,o.style.width=i+"px"),s=u.offsetHeight+2,mxClient.IS_QUIRKS&&null!=this.border&&this.border!=mxConstants.NONE&&(s+=3)}else null!=u.firstChild&&"DIV"==u.firstChild.nodeName&&(u=u.firstChild,s=u.offsetHeight);i=u.offsetWidth+this.textWidthPadding,this.clipped&&(s=Math.min(s,this.bounds.height)),a=this.bounds.width/r,o=this.bounds.height/r,"fill"==this.overflow?(s=o,i=a):"width"==this.overflow&&(s=u.scrollHeight,i=a),this.offsetWidth=i,this.offsetHeight=s,mxClient.IS_QUIRKS&&(this.clipped||"width"==this.overflow&&0<o)?(o=Math.min(o,s),e.height=Math.round(o)+"px"):o=s,"fill"!=this.overflow&&"width"!=this.overflow&&(this.clipped&&(i=Math.min(a,i)),a=i,mxClient.IS_QUIRKS&&this.clipped||this.wrap)&&(e.width=Math.round(a)+"px");var o=o*r,a=a*r,f=this.getTextRotation()*(Math.PI/180);i=parseFloat(parseFloat(Math.cos(f)).toFixed(8)),s=parseFloat(parseFloat(Math.sin(-f)).toFixed(8)),f%=2*Math.PI,0>f&&(f+=2*Math.PI),f%=Math.PI,f>Math.PI/2&&(f=Math.PI-f);var u=Math.cos(f),l=Math.sin(-f),t=a*-(t+.5),c=o*-(n+.5);0!=f&&(n="progid:DXImageTransform.Microsoft.Matrix(M11="+i+", M12="+s+", M21="+ -s+", M22="+i+", sizingMethod='auto expand')",e.filter=null!=e.filter&&0<e.filter.length?e.filter+(" "+n):n),n=0,"fill"!=this.overflow&&mxClient.IS_QUIRKS&&(n=this.valign==mxConstants.ALIGN_TOP?n-1:this.valign==mxConstants.ALIGN_BOTTOM?n+2:n+1),e.zoom=r,e.left=Math.round(this.bounds.x+((a-a*u+o*l)/2-i*t-s*c)-a/2)+"px",e.top=Math.round(this.bounds.y+((o-o*u+a*l)/2+s*t-i*c)-o/2+n)+"px"},mxText.prototype.updateValue=function(){if(mxUtils.isNode(this.value))this.node.innerHTML="",this.node.appendChild(this.value);else{var e=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1));var e=mxUtils.replaceTrailingNewlines(e,"<div><br></div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,t=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,n=null!=this.border&&this.border!=mxConstants.NONE?this.border:null;if("fill"==this.overflow||"width"==this.overflow)null!=t&&(this.node.style.backgroundColor=t),null!=n&&(this.node.style.border="1px solid "+n);else{var r="";null!=t&&(r+="background-color:"+t+";"),null!=n&&(r+="border:1px solid "+n+";"),e='<div style="zoom:1;'+r+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+'">'+e+"</div>"}this.node.innerHTML=e,e=this.node.getElementsByTagName("div"),0<e.length&&(t=this.textDirection,t==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=this.getAutoDirection()),t==mxConstants.TEXT_DIRECTION_LTR||t==mxConstants.TEXT_DIRECTION_RTL?e[e.length-1].setAttribute("dir",t):e[e.length-1].removeAttribute("dir"))}},mxText.prototype.updateFont=function(e){e=e.style,e.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,e.fontSize=this.size+"px",e.fontFamily=this.family,e.verticalAlign="top",e.color=this.color,e.fontWeight=(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?"bold":"",e.fontStyle=(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?"italic":"",e.textDecoration=(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE?"underline":"",e.textAlign=this.align==mxConstants.ALIGN_CENTER?"center":this.align==mxConstants.ALIGN_RIGHT?"right":"left"},mxText.prototype.updateSize=function(e,t){var n=Math.max(0,Math.round(this.bounds.width/this.scale)),r=Math.max(0,Math.round(this.bounds.height/this.scale)),i=e.style;this.clipped?(i.overflow="hidden",mxClient.IS_QUIRKS?i.width=n+"px":(i.maxHeight=r+"px",i.maxWidth=n+"px")):"fill"==this.overflow?(i.width=n+1+"px",i.height=r+1+"px",i.overflow="hidden"):"width"==this.overflow&&(i.width=n+1+"px",i.maxHeight=r+1+"px",i.overflow="hidden");if(this.wrap&&0<n){if(i.wordWrap=mxConstants.WORD_WRAP,i.whiteSpace="normal",i.width=n+"px",t&&"fill"!=this.overflow&&"width"!=this.overflow){r=e,null!=r.firstChild&&"DIV"==r.firstChild.nodeName&&(r=r.firstChild,"break-word"==e.style.wordWrap&&(r.style.width="100%"));var s=r.offsetWidth;if(0==s){var o=e.parentNode;e.style.visibility="hidden",document.body.appendChild(e),s=r.offsetWidth,e.style.visibility="",o.appendChild(e)}s+=3,this.clipped&&(s=Math.min(s,n)),i.width=s+"px"}}else i.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(){return new mxPoint(this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-this.baseSpacingRight:this.spacingLeft+this.baseSpacingLeft,this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-this.baseSpacingBottom:this.spacingTop+this.baseSpacingTop)},mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.isRoundable=function(){return!0},mxTriangle.prototype.redrawPath=function(e,t,n,r,i){t=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(0,0),new mxPoint(r,.5*i),new mxPoint(0,i)],this.isRounded,t,!0)},mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(e,t,n,r,i){t=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(.25*r,0),new mxPoint(.75*r,0),new mxPoint(r,.5*i),new mxPoint(.75*r,i),new mxPoint(.25*r,i),new mxPoint(0,.5*i)],this.isRounded,t,!0)},mxUtils.extend(mxLine,mxShape),mxLine.prototype.paintVertexShape=function(e,t,n,r,i){n+=i/2,e.begin(),e.moveTo(t,n),e.lineTo(t+r,n),e.stroke()},mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),this.gradient=this.stroke=this.fill=null,null!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxImageShape.prototype.isRoundable=function(e,t,n,r,i){return!1},mxImageShape.prototype.paintVertexShape=function(e,t,n,r,i){if(null!=this.image){var s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);null!=s&&(e.setFillColor(s),e.setStrokeColor(o),e.rect(t,n,r,i),e.fillAndStroke()),e.image(t,n,r,i,this.image,this.preserveImageAspect,!1,!1),o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null),null!=o&&(e.setShadow(!1),e.setStrokeColor(o),e.rect(t,n,r,i),e.stroke())}else mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="";if(null!=this.image){var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),t=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=e,this.node.style.borderColor=t,e=document.createElement(mxClient.IS_IE6||(null==document.documentMode||8>=document.documentMode)&&0!=this.rotation?mxClient.VML_PREFIX+":image":"img"),e.setAttribute("border","0"),e.style.position="absolute",e.src=this.image,t=100>this.opacity?"alpha(opacity="+this.opacity+")":"",this.node.style.filter=t,this.flipH&&this.flipV?t+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?t+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(t+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),e.style.filter!=t&&(e.style.filter=t),"image"==e.nodeName?e.style.rotation=this.rotation:0!=this.rotation?mxUtils.setPrefixedStyle(e.style,"transform","rotate("+this.rotation+"deg)"):mxUtils.setPrefixedStyle(e.style,"transform",""),e.style.width=this.node.style.width,e.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(e)}else this.setTransparentBackgroundImage(this.node)},mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(e){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(e,t,n,r,i){this.paintImage(e,t,n,r,i),this.paintIndicator(e,t,n,r,i),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(e,t,n,r,i){null!=this.image&&(t=this.getImageBounds(t,n,r,i),e.image(t.x,t.y,t.width,t.height,this.image,!1,!1,!1))},mxLabel.prototype.getImageBounds=function(e,t,n,r){var i=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),o=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),u=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return e=i==mxConstants.ALIGN_CENTER?e+(n-o)/2:i==mxConstants.ALIGN_RIGHT?e+(n-o-a):e+a,t=s==mxConstants.ALIGN_TOP?t+a:s==mxConstants.ALIGN_BOTTOM?t+(r-u-a):t+(r-u)/2,new mxRectangle(e,t,o,u)},mxLabel.prototype.paintIndicator=function(e,t,n,r,i){null!=this.indicator?(this.indicator.bounds=this.getIndicatorBounds(t,n,r,i),this.indicator.paint(e)):null!=this.indicatorImage&&(t=this.getIndicatorBounds(t,n,r,i),e.image(t.x,t.y,t.width,t.height,this.indicatorImage,!1,!1,!1))},mxLabel.prototype.getIndicatorBounds=function(e,t,n,r){var i=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),o=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),u=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),a=this.spacing+5;return e=i==mxConstants.ALIGN_RIGHT?e+(n-o-a):i==mxConstants.ALIGN_CENTER?e+(n-o)/2:e+a,t=s==mxConstants.ALIGN_BOTTOM?t+(r-u-a):s==mxConstants.ALIGN_TOP?t+a:t+(r-u)/2,new mxRectangle(e,t,o,u)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(null!=this.image){var e=document.createElement("img");e.style.position="relative",e.setAttribute("border","0");var t=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);t.x-=this.bounds.x,t.y-=this.bounds.y,e.style.left=Math.round(t.x)+"px",e.style.top=Math.round(t.y)+"px",e.style.width=Math.round(t.width)+"px",e.style.height=Math.round(t.height)+"px",e.src=this.image,this.node.appendChild(e)}},mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.svgStrokeTolerance=0,mxCylinder.prototype.paintVertexShape=function(e,t,n,r,i){e.translate(t,n),e.begin(),this.redrawPath(e,t,n,r,i,!1),e.fillAndStroke(),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(e.setShadow(!1),e.begin(),this.redrawPath(e,t,n,r,i,!0),e.stroke())},mxCylinder.prototype.getCylinderSize=function(e,t,n,r){return Math.min(this.maxHeight,Math.round(r/5))},mxCylinder.prototype.redrawPath=function(e,t,n,r,i,s){t=this.getCylinderSize(t,n,r,i);if(s&&null!=this.fill||!s&&null==this.fill)e.moveTo(0,t),e.curveTo(0,2*t,r,2*t,r,t),s||(e.stroke(),e.begin());s||(e.moveTo(0,t),e.curveTo(0,-t/3,r,-t/3,r,t),e.lineTo(r,i-t),e.curveTo(r,i+t/3,0,i+t/3,0,i-t),e.close())},mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(e,t){var n=this.createMarker(e,t,!0),r=this.createMarker(e,t,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),e.setFillColor(this.stroke),e.setShadow(!1),e.setDashed(!1),null!=n&&n(),null!=r&&r()},mxConnector.prototype.createMarker=function(e,t,n){var r=null,i=t.length,s=mxUtils.getValue(this.style,n?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),o=n?t[1]:t[i-2],u=n?t[0]:t[i-1];if(null!=s&&null!=o&&null!=u){for(r=1;r<i-1&&0==Math.round(o.x-u.x)&&0==Math.round(o.y-u.y);)o=n?t[1+r]:t[i-2-r],r++;t=u.x-o.x,i=u.y-o.y,r=Math.max(1,Math.sqrt(t*t+i*i)),o=t/r,t=i/r,i=mxUtils.getNumber(this.style,n?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),r=mxMarker.createMarker(e,this,s,u,o,t,i,n,this.strokewidth,0!=this.style[n?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL])}return r},mxConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(t=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(t=Math.max(t,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),e.grow(t*this.scale)},mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.isRoundable=function(e,t,n,r,i){return!0},mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(e){var t=this.getTitleSize();e=new mxRectangle(e.x,e.y,e.width,e.height);var n=this.isHorizontal(),r=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),i=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),s=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH,n=n==!s,r=!n&&r!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),i=n&&i!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST);if(s){t=Math.min(e.width,t*this.scale);if(r||i)e.x+=e.width-t;e.width=t}else{t=Math.min(e.height,t*this.scale);if(r||i)e.y+=e.height-t;e.height=t}return e},mxSwimlane.prototype.getGradientBounds=function(e,t,n,r,i){return e=this.getTitleSize(),this.isHorizontal()?(e=Math.min(e,i),new mxRectangle(t,n,r,e)):(e=Math.min(e,r),new mxRectangle(t,n,e,i))},mxSwimlane.prototype.getArcSize=function(e,t,n){return e=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,n*e*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(e,t,n,r,i){var s=this.getTitleSize(),o=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE),u=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),a=0,s=this.isHorizontal()?Math.min(s,i):Math.min(s,r);e.translate(t,n),this.isRounded?(a=this.getArcSize(r,i,s),a=Math.min((this.isHorizontal()?i:r)-s,Math.min(s,a)),this.paintRoundedSwimlane(e,t,n,r,i,s,a,o,u)):this.paintSwimlane(e,t,n,r,i,s,o,u),o=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE),this.paintSeparator(e,t,n,r,i,s,o),null!=this.image&&(i=this.getImageBounds(t,n,r,i),e.image(i.x-t,i.y-n,i.width,i.height,this.image,!1,!1,!1)),this.glass&&(e.setShadow(!1),this.paintGlassEffect(e,0,0,r,s,a))},mxSwimlane.prototype.paintSwimlane=function(e,t,n,r,i,s,o,u){e.begin(),this.isHorizontal()?(e.moveTo(0,s),e.lineTo(0,0),e.lineTo(r,0),e.lineTo(r,s),e.fillAndStroke(),s<i&&(o==mxConstants.NONE?e.pointerEvents=!1:e.setFillColor(o),e.begin(),e.moveTo(0,s),e.lineTo(0,i),e.lineTo(r,i),e.lineTo(r,s),o==mxConstants.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(s,0),e.lineTo(0,0),e.lineTo(0,i),e.lineTo(s,i),e.fillAndStroke(),s<r&&(o==mxConstants.NONE?e.pointerEvents=!1:e.setFillColor(o),e.begin(),e.moveTo(s,0),e.lineTo(r,0),e.lineTo(r,i),e.lineTo(s,i),o==mxConstants.NONE?e.stroke():e.fillAndStroke())),u&&this.paintDivider(e,t,n,r,i,s,o==mxConstants.NONE)},mxSwimlane.prototype.paintRoundedSwimlane=function(e,t,n,r,i,s,o,u,a){e.begin(),this.isHorizontal()?(e.moveTo(r,s),e.lineTo(r,o),e.quadTo(r,0,r-Math.min(r/2,o),0),e.lineTo(Math.min(r/2,o),0),e.quadTo(0,0,0,o),e.lineTo(0,s),e.fillAndStroke(),s<i&&(u==mxConstants.NONE?e.pointerEvents=!1:e.setFillColor(u),e.begin(),e.moveTo(0,s),e.lineTo(0,i-o),e.quadTo(0,i,Math.min(r/2,o),i),e.lineTo(r-Math.min(r/2,o),i),e.quadTo(r,i,r,i-o),e.lineTo(r,s),u==mxConstants.NONE?e.stroke():e.fillAndStroke())):(e.moveTo(s,0),e.lineTo(o,0),e.quadTo(0,0,0,Math.min(i/2,o)),e.lineTo(0,i-Math.min(i/2,o)),e.quadTo(0,i,o,i),e.lineTo(s,i),e.fillAndStroke(),s<r&&(u==mxConstants.NONE?e.pointerEvents=!1:e.setFillColor(u),e.begin(),e.moveTo(s,i),e.lineTo(r-o,i),e.quadTo(r,i,r,i-Math.min(i/2,o)),e.lineTo(r,Math.min(i/2,o)),e.quadTo(r,0,r-o,0),e.lineTo(s,0),u==mxConstants.NONE?e.stroke():e.fillAndStroke())),a&&this.paintDivider(e,t,n,r,i,s,u==mxConstants.NONE)},mxSwimlane.prototype.paintDivider=function(e,t,n,r,i,s,o){o||e.setShadow(!1),e.begin(),this.isHorizontal()?(e.moveTo(0,s),e.lineTo(r,s)):(e.moveTo(s,0),e.lineTo(s,i)),e.stroke()},mxSwimlane.prototype.paintSeparator=function(e,t,n,r,i,s,o){o!=mxConstants.NONE&&(e.setStrokeColor(o),e.setDashed(!0),e.begin(),this.isHorizontal()?(e.moveTo(r,s),e.lineTo(r,i)):(e.moveTo(s,0),e.lineTo(r,0)),e.stroke(),e.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(e,t,n,r){return this.isHorizontal()?new mxRectangle(e+n-this.imageSize,t,this.imageSize,this.imageSize):new mxRectangle(e,t,this.imageSize,this.imageSize)},mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(e,t,n){},mxGraphLayout.prototype.execute=function(e){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(e,t,n,r){return n=this.graph.view.getState(t),t=null!=n?n.style:this.graph.getCellStyle(t),null!=t?t[e]:null},mxGraphLayout.traverse=function(e,t,n,r,i){if(null!=n&&null!=e&&(t=null!=t?t:!0,i=i||new mxDictionary,!i.get(e)&&(i.put(e,!0),r=n(e,r),null==r||r))&&(r=this.graph.model.getEdgeCount(e),0<r))for(var s=0;s<r;s++){var o=this.graph.model.getEdgeAt(e,s),u=this.graph.model.getTerminal(o,!0)==e;if(!t||u)u=this.graph.view.getVisibleTerminal(o,!u),this.traverse(u,t,n,o,i)}},mxGraphLayout.prototype.isAncestor=function(e,t,n){if(!n)return this.graph.model.getParent(t)==e;if(t==e)return!1;for(;null!=t&&t!=e;)t=this.graph.model.getParent(t);return t==e},mxGraphLayout.prototype.isVertexMovable=function(e){return this.graph.isCellMovable(e)},mxGraphLayout.prototype.isVertexIgnored=function(e){return!this.graph.getModel().isVertex(e)||!this.graph.isCellVisible(e)},mxGraphLayout.prototype.isEdgeIgnored=function(e){var t=this.graph.getModel();return!t.isEdge(e)||!this.graph.isCellVisible(e)||null==t.getTerminal(e,!0)||null==t.getTerminal(e,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(e,t){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,t?"0":"1",[e])},mxGraphLayout.prototype.setOrthogonalEdge=function(e,t){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,t?"1":"0",[e])},mxGraphLayout.prototype.getParentOffset=function(e){var t=new mxPoint;if(null!=e&&e!=this.parent){var n=this.graph.getModel();if(n.isAncestor(this.parent,e))for(var r=n.getGeometry(e);e!=this.parent;)t.x+=r.x,t.y+=r.y,e=n.getParent(e),r=n.getGeometry(e)}return t},mxGraphLayout.prototype.setEdgePoints=function(e,t){if(null!=e){var n=this.graph.model,r=n.getGeometry(e);null==r?(r=new mxGeometry,r.setRelative(!0)):r=r.clone();if(null!=this.parent&&null!=t)for(var i=n.getParent(e),i=this.getParentOffset(i),s=0;s<t.length;s++)t[s].x-=i.x,t[s].y-=i.y;r.points=t,n.setGeometry(e,r)}},mxGraphLayout.prototype.setVertexLocation=function(e,t,n){var r=this.graph.getModel(),i=r.getGeometry(e),s=null;if(null!=i){s=new mxRectangle(t,n,i.width,i.height);if(this.useBoundingBox){var o=this.graph.getView().getState(e);if(null!=o&&null!=o.text&&null!=o.text.boundingBox){var u=this.graph.getView().scale,a=o.text.boundingBox;o.text.boundingBox.x<o.x&&(t+=(o.x-a.x)/u,s.width=a.width),o.text.boundingBox.y<o.y&&(n+=(o.y-a.y)/u,s.height=a.height)}}null!=this.parent&&(o=r.getParent(e),null!=o&&o!=this.parent&&(o=this.getParentOffset(o),t-=o.x,n-=o.y));if(i.x!=t||i.y!=n)i=i.clone(),i.x=t,i.y=n,r.setGeometry(e,i)}return s},mxGraphLayout.prototype.getVertexBounds=function(e){var t=this.graph.getModel().getGeometry(e);if(this.useBoundingBox){var n=this.graph.getView().getState(e);if(null!=n&&null!=n.text&&null!=n.text.boundingBox)var r=this.graph.getView().scale,i=n.text.boundingBox,s=Math.max(n.x-i.x,0)/r,o=Math.max(n.y-i.y,0)/r,t=new mxRectangle(t.x-s,t.y-o,t.width+s+Math.max(i.x+i.width-(n.x+n.width),0)/r,t.height+o+Math.max(i.y+i.height-(n.y+n.height),0)/r)}return null!=this.parent&&(e=this.graph.getModel().getParent(e),t=t.clone(),null!=e&&e!=this.parent&&(e=this.getParentOffset(e),t.x+=e.x,t.y+=e.y)),new mxRectangle(t.x,t.y,t.width,t.height)},mxGraphLayout.prototype.arrangeGroups=function(e,t,n,r,i,s){return this.graph.updateGroupBounds(e,t,!0,n,r,i,s)},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(e,t){return null!=e&&null!=t?t.weightedValue>e.weightedValue?-1:t.weightedValue<e.weightedValue?1:t.nudge?-1:1:0},mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(e,t,n){var r=this.graph.getModel(),i=r.getParent(e),s=this.isHorizontal();if(null!=e&&null!=i){var o=0,u=r.getChildCount(i);n=s?t:n,t=this.graph.getView().getState(i),null!=t&&(n-=s?t.x:t.y),n/=this.graph.view.scale;for(t=0;t<u;t++){var a=r.getChildAt(i,t);if(a!=e&&(a=r.getGeometry(a),null!=a)){a=s?a.x+a.width/2:a.y+a.height/2;if(o<=n&&a>n)break;o=a}}s=i.getIndex(e),s=Math.max(0,t-(t>s?1:0)),r.add(i,e,s)}},mxStackLayout.prototype.getParentSize=function(e){var t=this.graph.getModel(),n=t.getGeometry(e);return null!=this.graph.container&&(null==n&&t.isLayer(e)||e==this.graph.getView().currentRoot)&&(n=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1)),n},mxStackLayout.prototype.execute=function(e){if(null!=e){var t=this.getParentSize(e),n=this.isHorizontal(),r=this.graph.getModel(),i=null;null!=t&&(i=n?t.height-this.marginTop-this.marginBottom:t.width-this.marginLeft-this.marginRight);var i=i-2*this.border,s=this.x0+this.border+this.marginLeft,o=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(e)){var u=this.graph.getCellStyle(e),a=mxUtils.getNumber(u,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),u=1==mxUtils.getValue(u,mxConstants.STYLE_HORIZONTAL,!0);null!=t&&(a=u?Math.min(a,t.height):Math.min(a,t.width)),n==u&&(i-=a),u?o+=a:s+=a}r.beginUpdate();try{for(var a=0,u=null,f=0,l=null,c=r.getChildCount(e),h=0;h<c;h++){var p=r.getChildAt(e,h);if(!this.isVertexIgnored(p)&&this.isVertexMovable(p)){var d=r.getGeometry(p);if(null!=d){d=d.clone(),null!=this.wrap&&null!=u&&(n&&u.x+u.width+d.width+2*this.spacing>this.wrap||!n&&u.y+u.height+d.height+2*this.spacing>this.wrap)&&(u=null,n?o+=a+this.spacing:s+=a+this.spacing,a=0);var a=Math.max(a,n?d.height:d.width),v=0;if(!this.borderCollapse)var m=this.graph.getCellStyle(p),v=mxUtils.getNumber(m,mxConstants.STYLE_STROKEWIDTH,1);null!=u?n?d.x=f+this.spacing+Math.floor(v/2):d.y=f+this.spacing+Math.floor(v/2):this.keepFirstLocation||(n?d.x=s:d.y=o),n?d.y=o:d.x=s,this.fill&&null!=i&&(n?d.height=i:d.width=i),this.setChildGeometry(p,d),l=p,u=d,f=n?u.x+u.width+Math.floor(v/2):u.y+u.height+Math.floor(v/2)}}}this.resizeParent&&null!=t&&null!=u&&!this.graph.isCellCollapsed(e)?this.updateParentGeometry(e,t,u):this.resizeLast&&null!=t&&null!=u&&null!=l&&(n?u.width=t.width-u.x-this.spacing-this.marginRight-this.marginLeft:u.height=t.height-u.y-this.spacing-this.marginBottom,this.setChildGeometry(l,u))}finally{r.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(e,t){var n=this.graph.getCellGeometry(e);null!=n&&t.x==n.x&&t.y==n.y&&t.width==n.width&&t.height==n.height||this.graph.getModel().setGeometry(e,t)},mxStackLayout.prototype.updateParentGeometry=function(e,t,n){var r=this.isHorizontal(),i=this.graph.getModel(),s=t.clone();r?(n=n.x+n.width+this.marginRight+this.border,s.width=this.resizeParentMax?Math.max(s.width,n):n):(n=n.y+n.height+this.marginBottom+this.border,s.height=this.resizeParentMax?Math.max(s.height,n):n),t.x==s.x&&t.y==s.y&&t.width==s.width&&t.height==s.height||i.setGeometry(e,s)},mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(e,t,n){n=this.graph.getModel();var r=n.getParent(e);if(null!=e&&null!=r){var i,s=0,o=n.getChildCount(r);for(i=0;i<o;i++){var u=n.getChildAt(r,i),u=this.getVertexBounds(u);if(null!=u){u=u.x+u.width/2;if(s<t&&u>t)break;s=u}}t=r.getIndex(e),t=Math.max(0,i-(i>t?1:0)),n.add(r,e,t)}},mxPartitionLayout.prototype.execute=function(e){var t=this.isHorizontal(),n=this.graph.getModel(),r=n.getGeometry(e);null!=this.graph.container&&(null==r&&n.isLayer(e)||e==this.graph.getView().currentRoot)&&(r=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1));if(null!=r){for(var i=[],s=n.getChildCount(e),o=0;o<s;o++){var u=n.getChildAt(e,o);!this.isVertexIgnored(u)&&this.isVertexMovable(u)&&i.push(u)}s=i.length;if(0<s){var a=this.border,f=this.border,l=t?r.height:r.width,l=l-2*this.border;e=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle,l-=t?e.height:e.width,a+=e.width,f+=e.height,e=this.border+(s-1)*this.spacing,r=t?(r.width-a-e)/s:(r.height-f-e)/s;if(0<r){n.beginUpdate();try{for(o=0;o<s;o++){var u=i[o],c=n.getGeometry(u);null!=c&&(c=c.clone(),c.x=a,c.y=f,t?(this.resizeVertices&&(c.width=r,c.height=l),a+=r+this.spacing):(this.resizeVertices&&(c.height=r,c.width=l),f+=r+this.spacing),n.setGeometry(u,c))}}finally{n.endUpdate()}}}}},mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8,mxCompactTreeLayout.prototype.channelBuffer=4,mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(e,t){this.parent=e;var n=this.graph.getModel();if(null==t)if(0<this.graph.getEdges(e,n.getParent(e),this.invert,!this.invert,!1).length)this.root=e;else{var r=this.graph.findTreeRoots(e,!0,this.invert);if(0<r.length)for(var i=0;i<r.length;i++)if(!this.isVertexIgnored(r[i])&&0<this.graph.getEdges(r[i],null,this.invert,!this.invert,!1).length){this.root=r[i];break}}else this.root=t;if(null!=this.root){this.parentsChanged=this.resizeParent?{}:null,this.parentY=this.parentX=null;if(e!=this.root&&null!=n.isVertex(e)&&this.maintainParentLocation){var s=this.graph.getCellGeometry(e);null!=s&&(this.parentX=s.x,this.parentY=s.y)}n.beginUpdate();try{if(this.visited={},this.node=this.dfs(this.root,e),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node){this.layout(this.node);var o=this.graph.gridSize,r=o;if(!this.moveTree){var u=this.getVertexBounds(this.root);null!=u&&(o=u.x,r=u.y)}u=null,u=this.isHorizontal()?this.horizontalLayout(this.node,o,r):this.verticalLayout(this.node,null,o,r);if(null!=u){var a=i=0;0>u.x&&(i=Math.abs(o-u.x)),0>u.y&&(a=Math.abs(r-u.y)),0==i&&0==a||this.moveNode(this.node,i,a),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}null!=this.parentX&&null!=this.parentY&&(s=this.graph.getCellGeometry(e),null!=s&&(s=s.clone(),s.x=this.parentX,s.y=this.parentY,n.setGeometry(e,s)))}}finally{n.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(e,t,n){e.x+=t,e.y+=n,this.apply(e);for(e=e.child;null!=e;)this.moveNode(e,t,n),e=e.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(e,t){var n=new mxDictionary;t.sort(function(t,r){var i=t.getTerminal(t.getTerminal(!1)==e),s=n.get(i);null==s&&(s=mxCellPath.create(i).split(mxCellPath.PATH_SEPARATOR),n.put(i,s));var i=r.getTerminal(r.getTerminal(!1)==e),o=n.get(i);return null==o&&(o=mxCellPath.create(i).split(mxCellPath.PATH_SEPARATOR),n.put(i,o)),mxCellPath.compare(s,o)})},mxCompactTreeLayout.prototype.findRankHeights=function(e,t){if(null==this.maxRankHeight[t]||this.maxRankHeight[t]<e.height)this.maxRankHeight[t]=e.height;for(var n=e.child;null!=n;)this.findRankHeights(n,t+1),n=n.next},mxCompactTreeLayout.prototype.setCellHeights=function(e,t){null!=this.maxRankHeight[t]&&this.maxRankHeight[t]>e.height&&(e.height=this.maxRankHeight[t]);for(var n=e.child;null!=n;)this.setCellHeights(n,t+1),n=n.next},mxCompactTreeLayout.prototype.dfs=function(e,t){var n=mxCellPath.create(e),r=null;if(null!=e&&null==this.visited[n]&&!this.isVertexIgnored(e)){this.visited[n]=e;var r=this.createNode(e),n=this.graph.getModel(),i=null,s=this.graph.getEdges(e,t,this.invert,!this.invert,!1,!0),o=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(e,s);for(var u=0;u<s.length;u++){var a=s[u];if(!this.isEdgeIgnored(a)){this.resetEdges&&this.setEdgePoints(a,null),this.edgeRouting&&(this.setEdgeStyleEnabled(a,!1),this.setEdgePoints(a,null));var f=o.getState(a),a=null!=f?f.getVisibleTerminal(this.invert):o.getVisibleTerminal(a,this.invert),f=this.dfs(a,t);null!=f&&null!=n.getGeometry(a)&&(null==i?r.child=f:i.next=f,i=f)}}}return r},mxCompactTreeLayout.prototype.layout=function(e){if(null!=e){for(var t=e.child;null!=t;)this.layout(t),t=t.next;null!=e.child?this.attachParent(e,this.join(e)):this.layoutLeaf(e)}},mxCompactTreeLayout.prototype.horizontalLayout=function(e,t,n,r){e.x+=t+e.offsetX,e.y+=n+e.offsetY,r=this.apply(e,r),t=e.child;if(null!=t){r=this.horizontalLayout(t,e.x,e.y,r),n=e.y+t.offsetY;for(var i=t.next;null!=i;)r=this.horizontalLayout(i,e.x+t.offsetX,n,r),n+=i.offsetY,i=i.next}return r},mxCompactTreeLayout.prototype.verticalLayout=function(e,t,n,r,i){e.x+=n+e.offsetY,e.y+=r+e.offsetX,i=this.apply(e,i),t=e.child;if(null!=t)for(i=this.verticalLayout(t,e,e.x,e.y,i),n=e.x+t.offsetY,r=t.next;null!=r;)i=this.verticalLayout(r,e,n,e.y+t.offsetX,i),n+=r.offsetY,r=r.next;return i},mxCompactTreeLayout.prototype.attachParent=function(e,t){var n=this.nodeDistance+this.levelDistance,r=(t-e.width)/2-this.nodeDistance,i=r+e.width+2*this.nodeDistance-t;e.child.offsetX=n+e.height,e.child.offsetY=i,e.contour.upperHead=this.createLine(e.height,0,this.createLine(n,i,e.contour.upperHead)),e.contour.lowerHead=this.createLine(e.height,0,this.createLine(n,r,e.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(e){var t=2*this.nodeDistance;e.contour.upperTail=this.createLine(e.height+t,0),e.contour.upperHead=e.contour.upperTail,e.contour.lowerTail=this.createLine(0,-e.width-t),e.contour.lowerHead=this.createLine(e.height+t,0,e.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(e){var t=2*this.nodeDistance,n=e.child;e.contour=n.contour;for(var r=n.width+t,i=r,n=n.next;null!=n;){var s=this.merge(e.contour,n.contour);n.offsetY=s+r,n.offsetX=0,r=n.width+t,i+=s+r,n=n.next}return i},mxCompactTreeLayout.prototype.merge=function(e,t){for(var n=0,r=0,i=0,s=e.lowerHead,o=t.upperHead;null!=o&&null!=s;){var u=this.offset(n,r,o.dx,o.dy,s.dx,s.dy),r=r+u,i=i+u;n+o.dx<=s.dx?(n+=o.dx,r+=o.dy,o=o.next):(n-=s.dx,r-=s.dy,s=s.next)}return null!=o?(n=this.bridge(e.upperTail,0,0,o,n,r),e.upperTail=null!=n.next?t.upperTail:n,e.lowerTail=t.lowerTail):(n=this.bridge(t.lowerTail,n,r,s,0,0),null==n.next&&(e.lowerTail=n)),e.lowerHead=t.lowerHead,i},mxCompactTreeLayout.prototype.offset=function(e,t,n,r,i,s){return i<=e||0>=e+n?0:(e=0<i*r-n*s?0>e?e*r/n-t:0<e?e*s/i-t:-t:i<e+n?s-(t+(i-e)*r/n):i>e+n?(n+e)*s/i-(t+r):s-(t+r),0<e?e:0)},mxCompactTreeLayout.prototype.bridge=function(e,t,n,r,i,s){return t=i+r.dx-t,0==r.dx?i=r.dy:(i=t*r.dy,i/=r.dx),t=this.createLine(t,i,r.next),e.next=this.createLine(0,s+r.dy-i-n,t),t},mxCompactTreeLayout.prototype.createNode=function(e){var t={};return t.cell=e,t.x=0,t.y=0,t.width=0,t.height=0,e=this.getVertexBounds(e),null!=e&&(this.isHorizontal()?(t.width=e.height,t.height=e.width):(t.width=e.width,t.height=e.height)),t.offsetX=0,t.offsetY=0,t.contour={},t},mxCompactTreeLayout.prototype.apply=function(e,t){var n=this.graph.getModel(),r=e.cell,i=n.getGeometry(r);return null!=r&&null!=i&&(this.isVertexMovable(r)&&(i=this.setVertexLocation(r,e.x,e.y),this.resizeParent&&(n=n.getParent(r),r=mxCellPath.create(n),null==this.parentsChanged[r]&&(this.parentsChanged[r]=n))),t=null==t?new mxRectangle(i.x,i.y,i.width,i.height):new mxRectangle(Math.min(t.x,i.x),Math.min(t.y,i.y),Math.max(t.x+t.width,i.x+i.width),Math.max(t.y+t.height,i.y+i.height))),t},mxCompactTreeLayout.prototype.createLine=function(e,t,n){var r={};return r.dx=e,r.dy=t,r.next=n,r},mxCompactTreeLayout.prototype.adjustParents=function(){var e=[],t;for(t in this.parentsChanged)e.push(this.parentsChanged[t]);this.arrangeGroups(mxUtils.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(e){this.processNodeOutgoing(e);for(e=e.child;null!=e;)this.localEdgeProcessing(e),e=e.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(e){for(var t=e.child,n=e.cell,r=0,i=[];null!=t;){r++;var s=t.x;this.horizontal&&(s=t.y),i.push(new WeightedCellSorter(t,s)),t=t.next}i.sort(WeightedCellSorter.prototype.compare);var s=e.width,o=(r+1)*this.prefHozEdgeSep;s>o+2*this.prefHozEdgeSep&&(s-=2*this.prefHozEdgeSep),e=s/r,t=e/2,s>o+2*this.prefHozEdgeSep&&(t+=this.prefHozEdgeSep);for(var s=this.minEdgeJetty-this.prefVertEdgeOff,o=this.getVertexBounds(n),u=0;u<i.length;u++){for(var a=i[u].cell.cell,f=this.getVertexBounds(a),a=this.graph.getEdgesBetween(n,a,!1),l=[],c,h,p=0;p<a.length;p++)this.horizontal?(c=o.x+o.width,h=o.y+t,l.push(new mxPoint(c,h)),c=o.x+o.width+s,l.push(new mxPoint(c,h)),h=f.y+f.height/2):(c=o.x+t,h=o.y+o.height,l.push(new mxPoint(c,h)),h=o.y+o.height+s,l.push(new mxPoint(c,h)),c=f.x+f.width/2),l.push(new mxPoint(c,h)),this.setEdgePoints(a[p],l);u<r/2?s+=this.prefVertEdgeOff:u>r/2&&(s-=this.prefVertEdgeOff),t+=e}},mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxRadialTreeLayout.prototype.execute=function(e,t){this.parent=e,this.edgeRouting=this.useBoundingBox=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var n=null,r=this.getVertexBounds(this.root);this.centerX=r.x+r.width/2,this.centerY=r.y+r.height/2;for(var i in this.visited){var s=this.getVertexBounds(this.visited[i]),n=null!=n?n:s.clone();n.add(s)}this.calcRowDims([this.node],0);for(var o=0,u=0,n=0;n<this.row.length;n++)i=(this.rowMaxX[n]-this.centerX-this.nodeDistance)/this.rowRadi[n],o=Math.max(o,(this.centerX-this.rowMinX[n]-this.nodeDistance)/this.rowRadi[n]),u=Math.max(u,i);for(n=0;n<this.row.length;n++){var a=this.centerX-this.nodeDistance-o*this.rowRadi[n],f=this.centerX+this.nodeDistance+u*this.rowRadi[n]-a;for(i=0;i<this.row[n].length;i++)s=this.row[n],r=s[i],s=this.getVertexBounds(r.cell),r.theta=(s.x+s.width/2-a)/f*Math.PI*2}for(n=this.row.length-2;0<=n;n--)for(s=this.row[n],i=0;i<s.length;i++){r=s[i],o=r.child;for(a=u=0;null!=o;)a+=o.theta,u++,o=o.next;0<u&&(o=a/u,o>r.theta&&i<s.length-1?r.theta=Math.min(o,s[i+1].theta-Math.PI/10):o<r.theta&&0<i&&(r.theta=Math.max(o,s[i-1].theta+Math.PI/10)))}for(n=0;n<this.row.length;n++)for(i=0;i<this.row[n].length;i++)s=this.row[n],r=s[i],s=this.getVertexBounds(r.cell),this.setVertexLocation(r.cell,this.centerX-s.width/2+this.rowRadi[n]*Math.cos(r.theta),this.centerY-s.height/2+this.rowRadi[n]*Math.sin(r.theta))},mxRadialTreeLayout.prototype.calcRowDims=function(e,t){if(null!=e&&0!=e.length){this.rowMinX[t]=this.centerX,this.rowMaxX[t]=this.centerX,this.rowMinCenX[t]=this.centerX,this.rowMaxCenX[t]=this.centerX,this.row[t]=[];for(var n=!1,r=0;r<e.length;r++)for(var i=null!=e[r]?e[r].child:null;null!=i;){var s=this.getVertexBounds(i.cell);this.rowMinX[t]=Math.min(s.x,this.rowMinX[t]),this.rowMaxX[t]=Math.max(s.x+s.width,this.rowMaxX[t]),this.rowMinCenX[t]=Math.min(s.x+s.width/2,this.rowMinCenX[t]),this.rowMaxCenX[t]=Math.max(s.x+s.width/2,this.rowMaxCenX[t]),this.rowRadi[t]=s.y-this.getVertexBounds(this.root).y,null!=i.child&&(n=!0),this.row[t].push(i),i=i.next}n&&this.calcRowDims(this.row[t],t+1)}},mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxFastOrganicLayout.prototype.execute=function(e){var t=this.graph.getModel();this.vertexArray=[];for(var n=this.graph.getChildVertices(e),r=0;r<n.length;r++)this.isVertexIgnored(n[r])||this.vertexArray.push(n[r]);var i=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,s=this.vertexArray.length;this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],.001>this.forceConstant&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant;for(r=0;r<this.vertexArray.length;r++){var o=this.vertexArray[r];this.cellLocation[r]=[];var u=mxObjectIdentity.get(o);this.indices[u]=r;var a=this.getVertexBounds(o),f=a.width,l=a.height,c=a.x,h=a.y;this.cellLocation[r][0]=c+f/2,this.cellLocation[r][1]=h+l/2,this.radius[r]=Math.min(f,l),this.radiusSquared[r]=this.radius[r]*this.radius[r]}t.beginUpdate();try{for(r=0;r<s;r++){this.dispX[r]=0,this.dispY[r]=0,this.isMoveable[r]=this.isVertexMovable(this.vertexArray[r]);var p=this.graph.getConnections(this.vertexArray[r],e),n=this.graph.getOpposites(p,this.vertexArray[r]);this.neighbours[r]=[];for(f=0;f<n.length;f++){this.resetEdges&&this.graph.resetEdge(p[f]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(p[f],!1);var u=mxObjectIdentity.get(n[f]),d=this.indices[u];this.neighbours[r][f]=null!=d?d:r}}this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(s));for(this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}e=n=null;for(r=0;r<this.vertexArray.length;r++)o=this.vertexArray[r],this.isVertexMovable(o)&&(a=this.getVertexBounds(o),null!=a&&(this.cellLocation[r][0]-=a.width/2,this.cellLocation[r][1]-=a.height/2,c=this.graph.snap(Math.round(this.cellLocation[r][0])),h=this.graph.snap(Math.round(this.cellLocation[r][1])),this.setVertexLocation(o,c,h),n=null==n?c:Math.min(n,c),e=null==e?h:Math.min(e,h)));r=-(n||0)+1,o=-(e||0)+1,null!=i&&(r+=i.x,o+=i.y),this.graph.moveCells(this.vertexArray,r,o)}finally{t.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var e=0;e<this.vertexArray.length;e++)if(this.isMoveable[e]){var t=Math.sqrt(this.dispX[e]*this.dispX[e]+this.dispY[e]*this.dispY[e]);.001>t&&(t=.001);var n=this.dispX[e]/t*Math.min(t,this.temperature),t=this.dispY[e]/t*Math.min(t,this.temperature);this.dispX[e]=0,this.dispY[e]=0,this.cellLocation[e][0]+=n,this.cellLocation[e][1]+=t}},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var e=0;e<this.vertexArray.length;e++)for(var t=0;t<this.neighbours[e].length;t++){var n=this.neighbours[e][t];if(e!=n&&this.isMoveable[e]&&this.isMoveable[n]){var r=this.cellLocation[e][0]-this.cellLocation[n][0],i=this.cellLocation[e][1]-this.cellLocation[n][1],s=r*r+i*i-this.radiusSquared[e]-this.radiusSquared[n];s<this.minDistanceLimitSquared&&(s=this.minDistanceLimitSquared);var o=Math.sqrt(s),s=s/this.forceConstant,r=r/o*s,i=i/o*s;this.dispX[e]-=r,this.dispY[e]-=i,this.dispX[n]+=r,this.dispY[n]+=i}}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var e=this.vertexArray.length,t=0;t<e;t++)for(var n=t;n<e;n++){if(!this.allowedToRun)return;if(n!=t&&this.isMoveable[t]&&this.isMoveable[n]){var r=this.cellLocation[t][0]-this.cellLocation[n][0],i=this.cellLocation[t][1]-this.cellLocation[n][1];0==r&&(r=.01+Math.random()),0==i&&(i=.01+Math.random());var s=Math.sqrt(r*r+i*i),o=s-this.radius[t]-this.radius[n];o>this.maxDistanceLimit||(o<this.minDistanceLimit&&(o=this.minDistanceLimit),o=this.forceConstantSquared/o,r=r/s*o,i=i/s*o,this.dispX[t]+=r,this.dispY[t]+=i,this.dispX[n]-=r,this.dispY[n]-=i)}}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(e){var t=this.graph.getModel();t.beginUpdate();try{for(var n=0,r=null,i=null,s=[],o=t.getChildCount(e),u=0;u<o;u++){var a=t.getChildAt(e,u);if(this.isVertexIgnored(a))this.isEdgeIgnored(a)||(this.resetEdges&&this.graph.resetEdge(a),this.disableEdgeStyle&&this.setEdgeStyleEnabled(a,!1));else{s.push(a);var f=this.getVertexBounds(a),r=null==r?f.y:Math.min(r,f.y),i=null==i?f.x:Math.min(i,f.x),n=Math.max(n,Math.max(f.width,f.height))}}var l=this.getRadius(s.length,n);this.moveCircle&&(i=this.x0,r=this.y0),this.circle(s,l,i,r)}finally{t.endUpdate()}},mxCircleLayout.prototype.getRadius=function(e,t){return Math.max(e*t/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(e,t,n,r){for(var i=e.length,s=2*Math.PI/i,o=0;o<i;o++)this.isVertexMovable(e[o])&&this.setVertexLocation(e[o],Math.round(n+t+t*Math.sin(o*s)),Math.round(r+t+t*Math.cos(o*s)))},mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.execute=function(e){e=this.findParallels(e),this.graph.model.beginUpdate();try{for(var t in e){var n=e[t];1<n.length&&this.layout(n)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(e){for(var t=this.graph.getModel(),n=[],r=t.getChildCount(e),i=0;i<r;i++){var s=t.getChildAt(e,i);if(!this.isEdgeIgnored(s)){var o=this.getEdgeId(s);null!=o&&(null==n[o]&&(n[o]=[]),n[o].push(s))}}return n},mxParallelEdgeLayout.prototype.getEdgeId=function(e){var t=this.graph.getView(),n=t.getVisibleTerminal(e,!0);return e=t.getVisibleTerminal(e,!1),null!=n&&null!=e?(n=mxObjectIdentity.get(n),e=mxObjectIdentity.get(e),n>e?e+"-"+n:n+"-"+e):null},mxParallelEdgeLayout.prototype.layout=function(e){var t=e[0],n=this.graph.getView(),r=this.graph.getModel(),i=r.getGeometry(n.getVisibleTerminal(t,!0)),r=r.getGeometry(n.getVisibleTerminal(t,!1));if(i==r)for(var t=i.x+i.width+this.spacing,n=i.y+i.height/2,s=0;s<e.length;s++)this.route(e[s],t,n),t+=this.spacing;else if(null!=i&&null!=r){var t=i.x+i.width/2,n=i.y+i.height/2,s=r.x+r.width/2-t,o=r.y+r.height/2-n,r=Math.sqrt(s*s+o*o);if(0<r)for(i=o*this.spacing/r,r=s*this.spacing/r,t=t+s/2+i*(e.length-1)/2,n=n+o/2-r*(e.length-1)/2,s=0;s<e.length;s++)this.route(e[s],t,n),t-=i,n+=r}},mxParallelEdgeLayout.prototype.route=function(e,t,n){this.graph.isCellMovable(e)&&this.setEdgePoints(e,[new mxPoint(t,n)])},mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(e,t,n){null!=this.master?this.master.move.apply(this.master,arguments):this.layouts[0].move.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(e){var t=this.graph.getModel();t.beginUpdate();try{for(var n=0;n<this.layouts.length;n++)this.layouts[n].execute.apply(this.layouts[n],arguments)}finally{t.endUpdate()}},mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(e){for(var t=this.graph.view,n=this.graph.getModel(),r=[],i=[],s=n.getChildCount(e),o=0;o<s;o++){var u=n.getChildAt(e,o),a=t.getState(u);null!=a&&(this.isVertexIgnored(u)?this.isEdgeIgnored(u)||r.push(a):i.push(a))}this.placeLabels(i,r)},mxEdgeLabelLayout.prototype.placeLabels=function(e,t){var n=this.graph.getModel();n.beginUpdate();try{for(var r=0;r<t.length;r++){var i=t[r];if(null!=i&&null!=i.text&&null!=i.text.boundingBox)for(var s=0;s<e.length;s++){var o=e[s];null!=o&&this.avoid(i,o)}}}finally{n.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(e,t){var n=this.graph.getModel(),r=e.text.boundingBox;if(mxUtils.intersects(r,t)){var i=-r.y-r.height+t.y,s=-r.y+t.y+t.height,i=Math.abs(i)<Math.abs(s)?i:s,s=-r.x-r.width+t.x,r=-r.x+t.x+t.width,r=Math.abs(s)<Math.abs(r)?s:r;Math.abs(r)<Math.abs(i)?i=0:r=0,s=n.getGeometry(e.cell),null!=s&&(s=s.clone(),null!=s.offset?(s.offset.x+=r,s.offset.y+=i):s.offset=new mxPoint(r,i),n.setGeometry(e.cell,s))}},mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(e){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(e,t){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(e,t){this.isVertex()?this.x[0]=t:this.isEdge()&&(this.x[e-this.minRank-1]=t)},mxGraphAbstractHierarchyCell.prototype.getX=function(e){return this.isVertex()?this.x[0]:this.isEdge()?this.x[e-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(e,t){this.isVertex()?this.y[0]=t:this.isEdge()&&(this.y[e-this.minRank-1]=t)},mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(e){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsTarget.length;t++){var n=this.connectsAsTarget[t];-1==n.maxRank||n.maxRank==e+1?this.nextLayerConnectedCells[0].push(n.source):this.nextLayerConnectedCells[0].push(n)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsSource.length;t++){var n=this.connectsAsSource[t];-1==n.minRank||n.minRank==e-1?this.previousLayerConnectedCells[0].push(n.target):this.previousLayerConnectedCells[0].push(n)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(e){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(e,t){this.temp[0]=t},mxGraphHierarchyNode.prototype.isAncestor=function(e){if(null!=e&&null!=this.hashCode&&null!=e.hashCode&&this.hashCode.length<e.hashCode.length){if(this.hashCode==e.hashCode)return!0;if(null==this.hashCode||null==this.hashCode)return!1;for(var t=0;t<this.hashCode.length;t++)if(this.hashCode[t]!=e.hashCode[t])return!1;return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(e){e=this.source,this.source=this.target,this.target=e,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.nextLayerConnectedCells[t]=[],t==this.temp.length-1?this.nextLayerConnectedCells[t].push(this.source):this.nextLayerConnectedCells[t].push(this)}return this.nextLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.previousLayerConnectedCells[t]=[],0==t?this.previousLayerConnectedCells[t].push(this.target):this.previousLayerConnectedCells[t].push(this)}return this.previousLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(e){return this.temp[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(e,t){this.temp[e-this.minRank-1]=t},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&0<this.edges.length?this.edges[0]:null},mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(e,t,n){for(var r=e.getGraph(),i=0;i<t.length;i++){n[i]=new mxGraphHierarchyNode(t[i]),this.vertexMapper.put(t[i],n[i]);var s=e.getEdges(t[i]);n[i].connectsAsSource=[];for(var o=0;o<s.length;o++){var u=e.getVisibleTerminal(s[o],!1);if(u!=t[i]&&e.graph.model.isVertex(u)&&!e.isVertexIgnored(u)){var a=e.getEdgesBetween(t[i],u,!1),u=e.getEdgesBetween(t[i],u,!0);if(null!=a&&0<a.length&&null==this.edgeMapper.get(a[0])&&2*u.length>=a.length){for(var u=new mxGraphHierarchyEdge(a),f=0;f<a.length;f++){var l=a[f];this.edgeMapper.put(l,u),r.resetEdge(l),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(l,!1),e.setOrthogonalEdge(l,!0))}u.source=n[i],0>mxUtils.indexOf(n[i].connectsAsSource,u)&&n[i].connectsAsSource.push(u)}}}n[i].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var e=[];if(null!=this.roots)for(var t=0;t<this.roots.length;t++){var n=this.vertexMapper.get(this.roots[t]);null!=n&&e.push(n)}for(var r=this.vertexMapper.getValues(),t=0;t<r.length;t++)r[t].temp[0]=-1;for(var i=e.slice();0<e.length;){var n=e[0],s,o;s=n.connectsAsTarget,o=n.connectsAsSource;for(var u=!0,a=this.SOURCESCANSTARTRANK,t=0;t<s.length;t++){var f=s[t];if(5270620!=f.temp[0]){u=!1;break}f=f.source,a=Math.min(a,f.temp[0]-1)}if(u){n.temp[0]=a,this.maxRank=Math.min(this.maxRank,a);if(null!=o)for(t=0;t<o.length;t++)f=o[t],f.temp[0]=5270620,f=f.target,-1==f.temp[0]&&(e.push(f),f.temp[0]=-2);e.shift()}else if(t=e.shift(),e.push(n),t==n&&1==e.length)break}for(t=0;t<r.length;t++)r[t].temp[0]-=this.maxRank;for(t=0;t<i.length;t++)for(n=i[t],e=0,s=n.connectsAsSource,r=0;r<s.length;r++)f=s[r],f=f.target,n.temp[0]=Math.max(e,f.temp[0]+1),e=n.temp[0];this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var n=null;if(null!=this.roots)for(var r=this.roots,n=[],t=0;t<r.length;t++){var i=this.vertexMapper.get(r[t]);n[t]=i}this.visit(function(t,n,r,i,s){0==s&&0>n.maxRank&&0>n.minRank&&(e[n.temp[0]].push(n),n.maxRank=n.temp[0],n.minRank=n.temp[0],n.temp[0]=e[n.maxRank].length-1);if(null!=t&&null!=r&&1<t.maxRank-n.maxRank)for(r.maxRank=t.maxRank,r.minRank=n.maxRank,r.temp=[],r.x=[],r.y=[],t=r.minRank+1;t<r.maxRank;t++)e[t].push(r),r.setGeneralPurposeVariable(t,e[t].length-1)},n,!1,null)},mxGraphHierarchyModel.prototype.visit=function(e,t,n,r){if(null!=t){for(var i=0;i<t.length;i++){var s=t[i];null!=s&&(null==r&&(r={}),n?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=i,this.extendedDfs(null,s,null,e,r,s.hashCode,i,0)):this.dfs(null,s,null,e,r,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(e,t,n,r,i,s){if(null!=t){var o=t.id;if(null==i[o])for(i[o]=t,r(e,t,n,s,0),e=t.connectsAsSource.slice(),n=0;n<e.length;n++)o=e[n],this.dfs(t,o.target,o,r,i,s+1);else r(e,t,n,s,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(e,t,n,r,i,s,o,u){if(null!=t)if(null==e||null!=t.hashCode&&t.hashCode[0]==e.hashCode[0]||(s=e.hashCode.length+1,t.hashCode=e.hashCode.slice(),t.hashCode[s-1]=o),o=t.id,null==i[o])for(i[o]=t,r(e,t,n,u,0),e=t.connectsAsSource.slice(),n=0;n<e.length;n++)o=e[n],this.extendedDfs(t,o.target,o,r,i,t.hashCode,n,u+1);else r(e,t,n,u,1)},mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxSwimlaneModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(e,t,n){for(var r=e.getGraph(),i=e.swimlanes,s=0;s<t.length;s++){n[s]=new mxGraphHierarchyNode(t[s]),this.vertexMapper.put(t[s],n[s]),n[s].swimlaneIndex=-1;for(var o=0;o<i.length;o++)if(r.model.getParent(t[s])==i[o]){n[s].swimlaneIndex=o;break}o=e.getEdges(t[s]),n[s].connectsAsSource=[];for(var u=0;u<o.length;u++){var a=e.getVisibleTerminal(o[u],!1);if(a!=t[s]&&e.graph.model.isVertex(a)&&!e.isVertexIgnored(a)){var f=e.getEdgesBetween(t[s],a,!1),a=e.getEdgesBetween(t[s],a,!0);if(null!=f&&0<f.length&&null==this.edgeMapper.get(f[0])&&2*a.length>=f.length){for(var a=new mxGraphHierarchyEdge(f),l=0;l<f.length;l++){var c=f[l];this.edgeMapper.put(c,a),r.resetEdge(c),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(c,!1),e.setOrthogonalEdge(c,!0))}a.source=n[s],0>mxUtils.indexOf(n[s].connectsAsSource,a)&&n[s].connectsAsSource.push(a)}}}n[s].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var e=[],t={};if(null!=this.roots)for(var n=0;n<this.roots.length;n++){var r=this.vertexMapper.get(this.roots[n]);this.maxChainDfs(null,r,null,t,0),null!=r&&e.push(r)}r=[],t=[];for(n=this.ranksPerGroup.length-1;0<=n;n--)r[n]=n==this.ranksPerGroup.length-1?0:t[n+1]+1,t[n]=r[n]+this.ranksPerGroup[n];this.maxRank=t[0],r=this.vertexMapper.getValues();for(n=0;n<r.length;n++)r[n].temp[0]=-1;for(e.slice();0<e.length;){var r=e[0],i,s;i=r.connectsAsTarget,s=r.connectsAsSource;for(var o=!0,u=t[0],n=0;n<i.length;n++){var a=i[n];if(5270620!=a.temp[0]){o=!1;break}a=a.source,u=Math.min(u,a.temp[0]-1)}if(o){u>t[r.swimlaneIndex]&&(u=t[r.swimlaneIndex]),r.temp[0]=u;if(null!=s)for(n=0;n<s.length;n++)a=s[n],a.temp[0]=5270620,a=a.target,-1==a.temp[0]&&(e.push(a),a.temp[0]=-2);e.shift()}else if(n=e.shift(),e.push(r),n==r&&1==e.length)break}},mxSwimlaneModel.prototype.maxChainDfs=function(e,t,n,r,i){if(null!=t&&(e=mxCellPath.create(t.cell),null==r[e])){r[e]=t,e=t.swimlaneIndex;if(null==this.ranksPerGroup[e]||this.ranksPerGroup[e]<i)this.ranksPerGroup[e]=i;e=t.connectsAsSource.slice();for(n=0;n<e.length;n++){var s=e[n],o=s.target;t.swimlaneIndex<o.swimlaneIndex?this.maxChainDfs(t,o,s,mxUtils.clone(r,null,!0),0):t.swimlaneIndex==o.swimlaneIndex&&this.maxChainDfs(t,o,s,mxUtils.clone(r,null,!0),i+1)}}},mxSwimlaneModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var n=null;if(null!=this.roots)for(var r=this.roots,n=[],t=0;t<r.length;t++){var i=this.vertexMapper.get(r[t]);n[t]=i}this.visit(function(t,n,r,i,s){0==s&&0>n.maxRank&&0>n.minRank&&(e[n.temp[0]].push(n),n.maxRank=n.temp[0],n.minRank=n.temp[0],n.temp[0]=e[n.maxRank].length-1);if(null!=t&&null!=r&&1<t.maxRank-n.maxRank)for(r.maxRank=t.maxRank,r.minRank=n.maxRank,r.temp=[],r.x=[],r.y=[],t=r.minRank+1;t<r.maxRank;t++)e[t].push(r),r.setGeneralPurposeVariable(t,e[t].length-1)},n,!1,null)},mxSwimlaneModel.prototype.visit=function(e,t,n,r){if(null!=t){for(var i=0;i<t.length;i++){var s=t[i];null!=s&&(null==r&&(r={}),n?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=i,this.extendedDfs(null,s,null,e,r,s.hashCode,i,0)):this.dfs(null,s,null,e,r,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(e,t,n,r,i,s){if(null!=t){var o=t.id;if(null==i[o])for(i[o]=t,r(e,t,n,s,0),e=t.connectsAsSource.slice(),n=0;n<e.length;n++)o=e[n],this.dfs(t,o.target,o,r,i,s+1);else r(e,t,n,s,1)}},mxSwimlaneModel.prototype.extendedDfs=function(e,t,n,r,i,s,o,u){if(null!=t)if(null==e||null!=t.hashCode&&t.hashCode[0]==e.hashCode[0]||(s=e.hashCode.length+1,t.hashCode=e.hashCode.slice(),t.hashCode[s-1]=o),o=t.id,null==i[o]){i[o]=t,r(e,t,n,u,0),e=t.connectsAsSource.slice(),n=t.connectsAsTarget.slice();for(o=0;o<e.length;o++){s=e[o];var a=s.target;t.swimlaneIndex<=a.swimlaneIndex&&this.extendedDfs(t,a,s,r,i,t.hashCode,o,u+1)}for(o=0;o<n.length;o++)s=n[o],a=s.source,t.swimlaneIndex<a.swimlaneIndex&&this.extendedDfs(t,a,s,r,i,t.hashCode,o,u+1)}else r(e,t,n,u,1)},mxHierarchicalLayoutStage.prototype.execute=function(e){},mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2,mxMedianHybridCrossingReduction.prototype.execute=function(e){e=this.layout.getModel(),this.nestedBestRanks=[];for(var t=0;t<e.ranks.length;t++)this.nestedBestRanks[t]=e.ranks[t].slice();for(var n=0,r=this.calculateCrossings(e),t=0;t<this.maxIterations&&n<this.maxNoImprovementIterations;t++){this.weightedMedian(t,e),this.transpose(t,e);var i=this.calculateCrossings(e);if(i<r)for(r=i,i=n=0;i<this.nestedBestRanks.length;i++)for(var s=e.ranks[i],o=0;o<s.length;o++){var u=s[o];this.nestedBestRanks[i][u.getGeneralPurposeVariable(i)]=u}else for(n++,i=0;i<this.nestedBestRanks.length;i++)for(s=e.ranks[i],o=0;o<s.length;o++)u=s[o],u.setGeneralPurposeVariable(i,o);if(0==r)break}n=[],r=[];for(t=0;t<e.maxRank+1;t++)r[t]=[],n[t]=r[t];for(t=0;t<this.nestedBestRanks.length;t++)for(i=0;i<this.nestedBestRanks[t].length;i++)r[t].push(this.nestedBestRanks[t][i]);e.ranks=n},mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(e){for(var t=e.ranks.length,n=0,r=1;r<t;r++)n+=this.calculateRankCrossing(r,e);return n},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(e,t){for(var n=0,r=t.ranks[e],i=t.ranks[e-1],s=[],o=0;o<r.length;o++){for(var u=r[o],a=u.getGeneralPurposeVariable(e),u=u.getPreviousLayerConnectedCells(e),f=[],l=0;l<u.length;l++){var c=u[l].getGeneralPurposeVariable(e-1);f.push(c)}f.sort(function(e,t){return e-t}),s[a]=f}r=[];for(o=0;o<s.length;o++)r=r.concat(s[o]);for(s=1;s<i.length;)s<<=1;a=2*s-1,--s,i=[];for(o=0;o<a;++o)i[o]=0;for(o=0;o<r.length;o++)for(a=r[o]+s,++i[a];0<a;)a%2&&(n+=i[a+1]),a=a-1>>1,++i[a];return n},mxMedianHybridCrossingReduction.prototype.transpose=function(e,t){for(var n=!0,r=0;n&&10>r++;)for(var i=1==e%2&&1==r%2,n=!1,s=0;s<t.ranks.length;s++){for(var o=t.ranks[s],u=[],a=0;a<o.length;a++){var f=o[a],l=f.getGeneralPurposeVariable(s);0>l&&(l=a),u[l]=f}for(var c=null,h=null,p,d,v=null,m=null,g,y=null,a=0;a<o.length-1;a++){if(0==a){g=u[a],f=g.getNextLayerConnectedCells(s),l=g.getPreviousLayerConnectedCells(s),p=[],d=[];for(var b=0;b<f.length;b++)p[b]=f[b].getGeneralPurposeVariable(s+1);for(b=0;b<l.length;b++)d[b]=l[b].getGeneralPurposeVariable(s-1)}else f=c,l=h,p=v,d=m,g=y;y=u[a+1],c=y.getNextLayerConnectedCells(s),h=y.getPreviousLayerConnectedCells(s),v=[],m=[];for(b=0;b<c.length;b++)v[b]=c[b].getGeneralPurposeVariable(s+1);for(b=0;b<h.length;b++)m[b]=h[b].getGeneralPurposeVariable(s-1);for(var w=0,E=0,b=0;b<p.length;b++)for(var S=0;S<v.length;S++)p[b]>v[S]&&w++,p[b]<v[S]&&E++;for(b=0;b<d.length;b++)for(S=0;S<m.length;S++)d[b]>m[S]&&w++,d[b]<m[S]&&E++;if(E<w||E==w&&i)c=g.getGeneralPurposeVariable(s),g.setGeneralPurposeVariable(s,y.getGeneralPurposeVariable(s)),y.setGeneralPurposeVariable(s,c),c=f,h=l,v=p,m=d,y=g,i||(n=!0)}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(e,t){var n=0==e%2;if(n)for(var r=t.maxRank-1;0<=r;r--)this.medianRank(r,n);else for(r=1;r<t.maxRank;r++)this.medianRank(r,n)},mxMedianHybridCrossingReduction.prototype.medianRank=function(e,t){for(var n=this.nestedBestRanks[e].length,r=[],i=[],s=0;s<n;s++){var o=this.nestedBestRanks[e][s],u=new MedianCellSorter;u.cell=o;var a;a=t?o.getNextLayerConnectedCells(e):o.getPreviousLayerConnectedCells(e);var f;f=t?e+1:e-1,null!=a&&0!=a.length?(u.medianValue=this.medianValue(a,f),r.push(u)):i[o.getGeneralPurposeVariable(e)]=!0}r.sort(MedianCellSorter.prototype.compare);for(s=0;s<n;s++)null==i[s]&&(o=r.shift().cell,o.setGeneralPurposeVariable(e,s))},mxMedianHybridCrossingReduction.prototype.medianValue=function(e,t){for(var n=[],r=0,i=0;i<e.length;i++){var s=e[i];n[r++]=s.getGeneralPurposeVariable(t)}return n.sort(function(e,t){return e-t}),1==r%2?n[Math.floor(r/2)]:2==r?(n[0]+n[1])/2:(i=r/2,s=n[i-1]-n[0],r=n[r-1]-n[i],(n[i-1]*r+n[i]*s)/(s+r))},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(e,t){return null!=e&&null!=t?t.medianValue>e.medianValue?-1:t.medianValue<e.medianValue?1:0:0},mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(e){e=this.layout.getModel();for(var t={},n=e.vertexMapper.getValues(),r={},i=0;i<n.length;i++)r[n[i].id]=n[i];n=null;if(null!=e.roots)for(var s=e.roots,n=[],i=0;i<s.length;i++)n[i]=e.vertexMapper.get(s[i]);e.visit(function(e,n,i,s,o){n.isAncestor(e)&&(i.invert(),mxUtils.remove(i,e.connectsAsSource),e.connectsAsTarget.push(i),mxUtils.remove(i,n.connectsAsTarget),n.connectsAsSource.push(i)),t[n.id]=n,delete r[n.id]},n,!0,null),i=mxUtils.clone(t,null,!0),e.visit(function(e,n,i,s,o){n.isAncestor(e)&&(i.invert(),mxUtils.remove(i,e.connectsAsSource),n.connectsAsSource.push(i),e.connectsAsTarget.push(i),mxUtils.remove(i,n.connectsAsTarget)),t[n.id]=n,delete r[n.id]},r,!0,i)},mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var e=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var t=0;t<e.ranks.length;t++){mxLog.write("Rank ",t," : ");for(var n=e.ranks[t],r=0;r<n.length;r++)mxLog.write(n[r].getGeneralPurposeVariable(t),"  ");mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(e){this.jettyPositions={},e=this.layout.getModel(),this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),e),this.fineTuning&&this.minNode(e);var t=1e8;if(this.fineTuning)for(var n=0;n<this.maxIterations;n++){0!=n&&(this.medianPos(n,e),this.minNode(e));if(this.currentXDelta<t){for(var r=0;r<e.ranks.length;r++)for(var i=e.ranks[r],s=0;s<i.length;s++){var o=i[s];o.setX(r,o.getGeneralPurposeVariable(r))}t=this.currentXDelta}else for(r=0;r<e.ranks.length;r++)for(i=e.ranks[r],s=0;s<i.length;s++)o=i[s],o.setGeneralPurposeVariable(r,o.getX(r));this.minPath(this.layout.getGraph(),e),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),e)},mxCoordinateAssignment.prototype.minNode=function(e){for(var t=[],n=new mxDictionary,r=[],i=0;i<=e.maxRank;i++){r[i]=e.ranks[i];for(var s=0;s<r[i].length;s++){var o=r[i][s],u=new WeightedCellSorter(o,i);u.rankIndex=s,u.visited=!0,t.push(u),n.put(o,u)}}e=10*t.length;for(s=0;0<t.length&&s<=e;){var o=t.shift(),i=o.cell,a=o.weightedValue,f=parseInt(o.rankIndex),u=i.getNextLayerConnectedCells(a),l=i.getPreviousLayerConnectedCells(a),c=u.length,h=l.length,p=this.medianXValue(u,a+1),d=this.medianXValue(l,a-1),v=c+h,m=i.getGeneralPurposeVariable(a),g=m;0<v&&(g=(p*c+d*h)/v),c=!1,g<m-1?0==f?(i.setGeneralPurposeVariable(a,g),c=!0):(f=r[a][f-1],m=f.getGeneralPurposeVariable(a),m=m+f.width/2+this.intraCellSpacing+i.width/2,m<g?(i.setGeneralPurposeVariable(a,g),c=!0):m<i.getGeneralPurposeVariable(a)-1&&(i.setGeneralPurposeVariable(a,m),c=!0)):g>m+1&&(f==r[a].length-1?(i.setGeneralPurposeVariable(a,g),c=!0):(f=r[a][f+1],m=f.getGeneralPurposeVariable(a),m=m-f.width/2-this.intraCellSpacing-i.width/2,m>g?(i.setGeneralPurposeVariable(a,g),c=!0):m>i.getGeneralPurposeVariable(a)+1&&(i.setGeneralPurposeVariable(a,m),c=!0)));if(c){for(i=0;i<u.length;i++)a=u[i],a=n.get(a),null!=a&&0==a.visited&&(a.visited=!0,t.push(a));for(i=0;i<l.length;i++)a=l[i],a=n.get(a),null!=a&&0==a.visited&&(a.visited=!0,t.push(a))}o.visited=!1,s++}},mxCoordinateAssignment.prototype.medianPos=function(e,t){if(0==e%2)for(var n=t.maxRank;0<n;n--)this.rankMedianPosition(n-1,t,n);else for(n=0;n<t.maxRank-1;n++)this.rankMedianPosition(n+1,t,n)},mxCoordinateAssignment.prototype.rankMedianPosition=function(e,t,n){t=t.ranks[e];for(var r=[],i={},s=0;s<t.length;s++){var o=t[s];r[s]=new WeightedCellSorter,r[s].cell=o,r[s].rankIndex=s,i[o.id]=r[s];var u;u=n<e?o.getPreviousLayerConnectedCells(e):o.getNextLayerConnectedCells(e),r[s].weightedValue=this.calculatedWeightedValue(o,u)}r.sort(WeightedCellSorter.prototype.compare);for(s=0;s<r.length;s++){var a,o=r[s].cell;a=0,u=n<e?o.getPreviousLayerConnectedCells(e).slice():o.getNextLayerConnectedCells(e).slice(),null!=u&&(a=u.length,a=0<a?this.medianXValue(u,n):o.getGeneralPurposeVariable(e));var f=0;u=-1e8;for(var l=r[s].rankIndex-1;0<=l;){var c=i[t[l].id];if(null!=c){var h=c.cell;c.visited?(u=h.getGeneralPurposeVariable(e)+h.width/2+this.intraCellSpacing+f+o.width/2,l=-1):(f+=h.width+this.intraCellSpacing,l--)}}f=0,h=1e8;for(l=r[s].rankIndex+1;l<r.length;)if(c=i[t[l].id],null!=c){var p=c.cell;c.visited?(h=p.getGeneralPurposeVariable(e)-p.width/2-this.intraCellSpacing-f-o.width/2,l=r.length):(f+=p.width+this.intraCellSpacing,l++)}a>=u&&a<=h?o.setGeneralPurposeVariable(e,a):a<u?(o.setGeneralPurposeVariable(e,u),this.currentXDelta+=u-a):a>h&&(o.setGeneralPurposeVariable(e,h),this.currentXDelta+=a-h),r[s].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(e,t){for(var n=0,r=0;r<t.length;r++){var i=t[r];e.isVertex()&&i.isVertex()?n++:n=e.isEdge()&&i.isEdge()?n+8:n+2}return n},mxCoordinateAssignment.prototype.medianXValue=function(e,t){if(0==e.length)return 0;for(var n=[],r=0;r<e.length;r++)n[r]=e[r].getGeneralPurposeVariable(t);return n.sort(function(e,t){return e-t}),1==e.length%2?n[Math.floor(e.length/2)]:(r=e.length/2,(n[r-1]+n[r])/2)},mxCoordinateAssignment.prototype.initialCoords=function(e,t){this.calculateWidestRank(e,t);for(var n=this.widestRank;0<=n;n--)n<t.maxRank&&this.rankCoordinates(n,e,t);for(n=this.widestRank+1;n<=t.maxRank;n++)0<n&&this.rankCoordinates(n,e,t)},mxCoordinateAssignment.prototype.rankCoordinates=function(e,t,n){t=n.ranks[e],n=this.initialX+(this.widestRankValue-this.rankWidths[e])/2;for(var r=!1,i=0;i<t.length;i++){var s=t[i];if(s.isVertex()){var o=this.layout.getVertexBounds(s.cell);null!=o?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(s.width=o.width,s.height=o.height):(s.width=o.height,s.height=o.width):r=!0}else s.isEdge()&&(o=1,null!=s.edges?o=s.edges.length:mxLog.warn("edge.edges is null"),s.width=(o-1)*this.parallelEdgeSpacing);n+=s.width/2,s.setX(e,n),s.setGeneralPurposeVariable(e,n),n+=s.width/2,n+=this.intraCellSpacing}1==r&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(e,t){var n=-this.interRankCellSpacing,r=0;this.rankWidths=[],this.rankY=[];for(var i=t.maxRank;0<=i;i--){for(var s=0,o=t.ranks[i],u=this.initialX,a=!1,f=0;f<o.length;f++){var l=o[f];if(l.isVertex()){var c=this.layout.getVertexBounds(l.cell);null!=c?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(l.width=c.width,l.height=c.height):(l.width=c.height,l.height=c.width):a=!0,s=Math.max(s,l.height)}else l.isEdge()&&(c=1,null!=l.edges?c=l.edges.length:mxLog.warn("edge.edges is null"),l.width=(c-1)*this.parallelEdgeSpacing);u+=l.width/2,l.setX(i,u),l.setGeneralPurposeVariable(i,u),u+=l.width/2,u+=this.intraCellSpacing,u>this.widestRankValue&&(this.widestRankValue=u,this.widestRank=i),this.rankWidths[i]=u}1==a&&mxLog.warn("At least one cell has no bounds"),this.rankY[i]=n,u=s/2+r/2+this.interRankCellSpacing,r=s,n=this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?n+u:n-u;for(f=0;f<o.length;f++)o[f].setY(i,n)}},mxCoordinateAssignment.prototype.minPath=function(e,t){for(var n=t.edgeMapper.getValues(),r=0;r<n.length;r++){var i=n[r];if(!(1>i.maxRank-i.minRank-1)){for(var s=i.getGeneralPurposeVariable(i.minRank+1),o=!0,u=0,a=i.minRank+2;a<i.maxRank;a++){var f=i.getGeneralPurposeVariable(a);s!=f?(o=!1,s=f):u++}if(!o){for(var o=s=0,f=[],l=[],c=i.getGeneralPurposeVariable(i.minRank+1),a=i.minRank+1;a<i.maxRank-1;a++){var h=i.getX(a+1);c==h?(f[a-i.minRank-1]=c,s++):this.repositionValid(t,i,a+1,c)?(f[a-i.minRank-1]=c,s++):c=f[a-i.minRank-1]=h}c=i.getX(a);for(a=i.maxRank-1;a>i.minRank+1;a--)h=i.getX(a-1),c==h?(l[a-i.minRank-2]=c,o++):this.repositionValid(t,i,a-1,c)?(l[a-i.minRank-2]=c,o++):(l[a-i.minRank-2]=i.getX(a-1),c=h);if(o>u||s>u)if(o>=s)for(a=i.maxRank-2;a>i.minRank;a--)i.setX(a,l[a-i.minRank-1]);else if(s>o)for(a=i.minRank+2;a<i.maxRank;a++)i.setX(a,f[a-i.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(e,t,n,r){e=e.ranks[n];for(var i=-1,s=0;s<e.length;s++)if(t==e[s]){i=s;break}if(0>i)return!1;s=t.getGeneralPurposeVariable(n);if(r<s){if(0==i)return!0;e=e[i-1],n=e.getGeneralPurposeVariable(n),n=n+e.width/2+this.intraCellSpacing+t.width/2;if(!(n<=r))return!1}else if(r>s){if(i==e.length-1)return!0;e=e[i+1],n=e.getGeneralPurposeVariable(n),n=n-e.width/2-this.intraCellSpacing-t.width/2;if(!(n>=r))return!1}return!0},mxCoordinateAssignment.prototype.setCellLocations=function(e,t){this.rankTopY=[],this.rankBottomY=[];for(var n=0;n<t.ranks.length;n++)this.rankTopY[n]=Number.MAX_VALUE,this.rankBottomY[n]=-Number.MAX_VALUE;for(var r=t.vertexMapper.getValues(),n=0;n<r.length;n++)this.setVertexLocation(r[n]);this.layout.edgeStyle!=mxHierarchicalEdgeStyle.ORTHOGONAL&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.POLYLINE&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.CURVE||this.localEdgeProcessing(t),r=t.edgeMapper.getValues();for(n=0;n<r.length;n++)this.setEdgePosition(r[n])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(e){for(var t=0;t<e.ranks.length;t++)for(var n=e.ranks[t],r=0;r<n.length;r++){var i=n[r];if(i.isVertex())for(var s=i.getPreviousLayerConnectedCells(t),o=t-1,u=0;2>u;u++){if(-1<o&&o<e.ranks.length&&null!=s&&0<s.length){for(var a=[],f=0;f<s.length;f++){var l=new WeightedCellSorter(s[f],s[f].getX(o));a.push(l)}a.sort(WeightedCellSorter.prototype.compare);for(var l=i.x[0]-i.width/2,c=l+i.width,h=s=0,o=[],f=0;f<a.length;f++){var p=a[f].cell,d;if(p.isVertex()){d=0==u?i.connectsAsSource:i.connectsAsTarget;for(var v=0;v<d.length;v++)if(d[v].source==p||d[v].target==p)s+=d[v].edges.length,h++,o.push(d[v])}else s+=p.edges.length,h++,o.push(p)}i.width>(s+1)*this.prefHozEdgeSep+2*this.prefHozEdgeSep&&(l+=this.prefHozEdgeSep,c-=this.prefHozEdgeSep),a=(c-l)/s,l+=a/2,c=this.minEdgeJetty-this.prefVertEdgeOff;for(f=0;f<o.length;f++)for(h=o[f].edges.length,p=this.jettyPositions[o[f].ids[0]],null==p&&(p=[],this.jettyPositions[o[f].ids[0]]=p),f<s/2?c+=this.prefVertEdgeOff:f>s/2&&(c-=this.prefVertEdgeOff),d=0;d<h;d++)p[4*d+2*u]=l,l+=a,p[4*d+2*u+1]=c}s=i.getNextLayerConnectedCells(t),o=t+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(e){var t=0;if(101207!=e.temp[0]){var n=e.maxRank,r=e.minRank;n==r&&(n=e.source.maxRank,r=e.target.minRank);for(var i=0,s=this.jettyPositions[e.ids[0]],o=e.isReversed?e.target.cell:e.source.cell,u=this.layout.graph,a=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,f=0;f<e.edges.length;f++){var l=e.edges[f],c=this.layout.getVisibleTerminal(l,!0),h=[],p=e.isReversed;c!=o&&(p=!p);if(null!=s){var d=p?2:0,v=p?a?this.rankBottomY[r]:this.rankTopY[r]:a?this.rankTopY[n]:this.rankBottomY[n],m=s[4*i+1+d];p!=a&&(m=-m);var v=v+m,d=s[4*i+d],g=u.model.getTerminal(l,!0);this.layout.isPort(g)&&u.model.getParent(g)==c&&(d=u.view.getState(g),d=null!=d?d.x:c.geometry.x+e.source.width*g.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(h.push(new mxPoint(d,v)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&h.push(new mxPoint(d,v+m))):(h.push(new mxPoint(v,d)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&h.push(new mxPoint(v+m,d)))}d=e.x.length-1,v=m=-1,c=e.maxRank-1;for(p&&(d=0,m=e.x.length,v=1,c=e.minRank+1);e.maxRank!=e.minRank&&d!=m;d+=v){var g=e.x[d]+t,y=(this.rankTopY[c]+this.rankBottomY[c+1])/2,b=(this.rankTopY[c-1]+this.rankBottomY[c])/2;if(p)var w=y,y=b,b=w;this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(h.push(new mxPoint(g,y)),h.push(new mxPoint(g,b))):(h.push(new mxPoint(y,g)),h.push(new mxPoint(b,g))),this.limitX=Math.max(this.limitX,g),c+=v}null!=s&&(d=p?2:0,v=p?a?this.rankTopY[n]:this.rankBottomY[n]:a?this.rankBottomY[r]:this.rankTopY[r],m=s[4*i+3-d],p!=a&&(m=-m),v-=m,d=s[4*i+2-d],p=u.model.getTerminal(l,!1),c=this.layout.getVisibleTerminal(l,!1),this.layout.isPort(p)&&u.model.getParent(p)==c&&(d=u.view.getState(p),d=null!=d?d.x:c.geometry.x+e.target.width*p.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&h.push(new mxPoint(d,v-m)),h.push(new mxPoint(d,v))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&h.push(new mxPoint(v-m,d)),h.push(new mxPoint(v,d)))),e.isReversed&&this.processReversedEdge(e,l),this.layout.setEdgePoints(l,h),t=0==t?this.parallelEdgeSpacing:0<t?-t:-t+this.parallelEdgeSpacing,i++}e.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(e){var t=e.cell,n=e.x[0]-e.width/2,r=e.y[0]-e.height/2;this.rankTopY[e.minRank]=Math.min(this.rankTopY[e.minRank],r),this.rankBottomY[e.minRank]=Math.max(this.rankBottomY[e.minRank],r+e.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(t,n,r):this.layout.setVertexLocation(t,r,n),this.limitX=Math.max(this.limitX,n+e.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(e,t){},mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(e){e=this.layout.getModel();var t=mxUtils.clone(e.vertexMapper,null,!0),n=null;if(null!=e.roots)for(var r=e.roots,n=[],i=0;i<r.length;i++)mxCellPath.create(r[i]),n[i]=e.vertexMapper.get(r[i]);e.visit(function(e,n,r,i,s){i=null!=e&&e.swimlaneIndex==n.swimlaneIndex&&n.isAncestor(e),s=null!=e&&null!=r&&e.swimlaneIndex<n.swimlaneIndex&&r.source==n,i?(r.invert(),mxUtils.remove(r,e.connectsAsSource),n.connectsAsSource.push(r),e.connectsAsTarget.push(r),mxUtils.remove(r,n.connectsAsTarget)):s&&(r.invert(),mxUtils.remove(r,e.connectsAsTarget),n.connectsAsTarget.push(r),e.connectsAsSource.push(r),mxUtils.remove(r,n.connectsAsSource)),e=mxCellPath.create(n.cell),delete t[e]},n,!0,null)};var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(e,t){this.parent=e;var n=this.graph.model;this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null==t||t instanceof Array||(t=[t]);if(null!=t||null!=e){this.parentY=this.parentX=null;if(e!=this.root&&null!=n.isVertex(e)&&this.maintainParentLocation){var r=this.graph.getCellGeometry(e);null!=r&&(this.parentX=r.x,this.parentY=r.y)}if(null!=t){for(var i=[],s=0;s<t.length;s++)(null!=e?n.isAncestor(e,t[s]):1)&&n.isVertex(t[s])&&i.push(t[s]);this.roots=i}n.beginUpdate();try{this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&(r=this.graph.getCellGeometry(e),null!=r&&(r=r.clone(),r.x=this.parentX,r.y=this.parentY,n.setGeometry(e,r)))}finally{n.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(e,t){var n=[];if(null!=e&&null!=t){var r=this.graph.model,i=null,s=-1e5,o;for(o in t){var u=t[o];if(r.isVertex(u)&&this.graph.isCellVisible(u)){for(var a=this.getEdges(u),f=0,l=0,c=0;c<a.length;c++)this.getVisibleTerminal(a[c],!0)==u?f++:l++;0==l&&0<f&&n.push(u),a=f-l,a>s&&(s=a,i=u)}}0==n.length&&null!=i&&n.push(i)}return n},mxHierarchicalLayout.prototype.getEdges=function(e){var t=this.edgesCache.get(e);if(null!=t)return t;for(var n=this.graph.model,t=[],r=this.graph.isCellCollapsed(e),i=n.getChildCount(e),s=0;s<i;s++){var o=n.getChildAt(e,s);if(this.isPort(o))t=t.concat(n.getEdges(o,!0,!0));else if(r||!this.graph.isCellVisible(o))t=t.concat(n.getEdges(o,!0,!0))}t=t.concat(n.getEdges(e,!0,!0)),n=[];for(s=0;s<t.length;s++)r=this.getVisibleTerminal(t[s],!0),i=this.getVisibleTerminal(t[s],!1),(r==i||r!=i&&(i==e&&(null==this.parent||this.isAncestor(this.parent,r,this.traverseAncestors))||r==e&&(null==this.parent||this.isAncestor(this.parent,i,this.traverseAncestors))))&&n.push(t[s]);return this.edgesCache.put(e,n),n},mxHierarchicalLayout.prototype.getVisibleTerminal=function(e,t){var n=this.edgesTargetTermCache;t&&(n=this.edgeSourceTermCache);var r=n.get(e);if(null!=r)return r;var r=this.graph.view.getState(e),i=null!=r?r.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t);return null==i&&(i=null!=r?r.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t)),null!=i&&(this.isPort(i)&&(i=this.graph.model.getParent(i)),n.put(e,i)),i},mxHierarchicalLayout.prototype.run=function(e){var t=[],n=[];if(null==this.roots&&null!=e){var r={};this.filterDescendants(e,r),this.roots=[];var i=!0,s;for(s in r)if(null!=r[s]){i=!1;break}for(;!i;){for(var o=this.findRoots(e,r),i=0;i<o.length;i++){var u={};t.push(u),this.traverse(o[i],!0,null,n,u,t,r)}for(i=0;i<o.length;i++)this.roots.push(o[i]);i=!0;for(s in r)if(null!=r[s]){i=!1;break}}}else for(i=0;i<this.roots.length;i++)u={},t.push(u),this.traverse(this.roots[i],!0,null,n,u,t,null);for(i=n=0;i<t.length;i++){u=t[i],r=[];for(s in u)r.push(u[s]);this.model=new mxGraphHierarchyModel(this,r,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),n=this.placementStage(n,e)}},mxHierarchicalLayout.prototype.filterDescendants=function(e,t){var n=this.graph.model;n.isVertex(e)&&e!=this.parent&&this.graph.isCellVisible(e)&&(t[mxObjectIdentity.get(e)]=e);if(this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var r=n.getChildCount(e),i=0;i<r;i++){var s=n.getChildAt(e,i);this.isPort(s)||this.filterDescendants(s,t)}},mxHierarchicalLayout.prototype.isPort=function(e){return null!=e&&null!=e.geometry?e.geometry.relative:!1},mxHierarchicalLayout.prototype.getEdgesBetween=function(e,t,n){n=null!=n?n:!1;for(var r=this.getEdges(e),i=[],s=0;s<r.length;s++){var o=this.getVisibleTerminal(r[s],!0),u=this.getVisibleTerminal(r[s],!1);(o==e&&u==t||!n&&o==t&&u==e)&&i.push(r[s])}return i},mxHierarchicalLayout.prototype.traverse=function(e,t,n,r,i,s,o){if(null!=e&&null!=r){var u=mxObjectIdentity.get(e);if(null!=r[u]||null!=o&&null==o[u]){if(null==i[u])for(n=0;n<s.length;n++)if(t=s[n],null!=t[u]){for(a in t)i[a]=t[a];s.splice(n,1);break}}else{null==i[u]&&(i[u]=e),null==r[u]&&(r[u]=e),null!==o&&delete o[u];var a=this.getEdges(e),u=[];for(n=0;n<a.length;n++)u[n]=this.getVisibleTerminal(a[n],!0)==e;for(n=0;n<a.length;n++)if(!t||u[n]){e=this.getVisibleTerminal(a[n],!u[n]);for(var f=1,l=0;l<a.length;l++)if(l!=n){var c=u[l];this.getVisibleTerminal(a[l],!c)==e&&(c?f++:f--)}0<=f&&(i=this.traverse(e,t,a[n],r,i,s,o))}}}return i},mxHierarchicalLayout.prototype.cycleStage=function(e){(new mxMinimumCycleRemover(this)).execute(e)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(e){(new mxMedianHybridCrossingReduction(this)).execute(e)},mxHierarchicalLayout.prototype.placementStage=function(e,t){var n=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return n.fineTuning=this.fineTuning,n.execute(t),n.limitX+this.interHierarchySpacing},mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertices=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(e,t){this.parent=e;var n=this.graph.model;this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary;if(!(null==t||1>t.length)){null==e&&(e=n.getParent(t[0])),this.parentY=this.parentX=null;if(e!=this.root&&null!=n.isVertex(e)&&this.maintainParentLocation){var r=this.graph.getCellGeometry(e);null!=r&&(this.parentX=r.x,this.parentY=r.y)}this.swimlanes=t,this.dummyVertices=[];for(var i=0;i<t.length;i++){var s=this.graph.getChildCells(t[i]);if(null==s||0==s.length)s=this.graph.insertVertex(t[i],null,null,0,0,this.dummyVertexWidth,0),this.dummyVertices.push(s)}n.beginUpdate();try{this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&(r=this.graph.getCellGeometry(e),null!=r&&(r=r.clone(),r.x=this.parentX,r.y=this.parentY,n.setGeometry(e,r))),this.graph.removeCells(this.dummyVertices)}finally{n.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var e=[],t=this.model,n;for(n in t.edgeMapper)for(var r=t.edgeMapper[n],i=0;i<r.edges.length;i++)e.push(r.edges[i]);e=this.graph.getBoundingBoxFromGeometry(e,!0),t=[];for(i=0;i<this.swimlanes.length;i++){var s=this.swimlanes[i];n=this.graph.getCellGeometry(s);if(null!=n){var o=this.graph.getChildCells(s),r=this.graph.isSwimlane(s)?this.graph.getStartSize(s):new mxRectangle,s=this.graph.getBoundingBoxFromGeometry(o);t[i]=s,r=s.y+n.y-r.height-this.parentBorder,n=s.y+n.y+s.height,null==e?e=new mxRectangle(0,r,0,n-r):(e.y=Math.min(e.y,r),e.height=Math.max(e.y+e.height,n)-e.y)}}for(i=0;i<this.swimlanes.length;i++)if(s=this.swimlanes[i],n=this.graph.getCellGeometry(s),null!=n){var o=this.graph.getChildCells(s),r=this.graph.isSwimlane(s)?this.graph.getStartSize(s):new mxRectangle,u=n.clone(),a=0==i?this.parentBorder:this.interRankCellSpacing/2;u.x+=t[i].x-r.width-a,u.y=u.y+e.y-n.y-this.parentBorder,u.width=t[i].width+r.width+this.interRankCellSpacing/2+a,u.height=e.height+r.height+2*this.parentBorder,this.graph.model.setGeometry(s,u),this.graph.moveCells(o,-t[i].x+r.width+a,n.y-e.y+this.parentBorder)}},mxSwimlaneLayout.prototype.findRoots=function(e,t){var n=[];if(null!=e&&null!=t){var r=this.graph.model,i=null,s=-1e5,o;for(o in t){var u=t[o];if(null!=u&&r.isVertex(u)&&this.graph.isCellVisible(u)&&r.isAncestor(e,u)){for(var a=this.getEdges(u),f=0,l=0,c=0;c<a.length;c++){var h=this.getVisibleTerminal(a[c],!0);h==u?(h=this.getVisibleTerminal(a[c],!1),r.isAncestor(e,h)&&f++):r.isAncestor(e,h)&&l++}0==l&&0<f&&n.push(u),a=f-l,a>s&&(s=a,i=u)}}0==n.length&&null!=i&&n.push(i)}return n},mxSwimlaneLayout.prototype.getEdges=function(e){var t=this.edgesCache.get(e);if(null!=t)return t;for(var n=this.graph.model,t=[],r=this.graph.isCellCollapsed(e),i=n.getChildCount(e),s=0;s<i;s++){var o=n.getChildAt(e,s);if(this.isPort(o))t=t.concat(n.getEdges(o,!0,!0));else if(r||!this.graph.isCellVisible(o))t=t.concat(n.getEdges(o,!0,!0))}t=t.concat(n.getEdges(e,!0,!0)),n=[];for(s=0;s<t.length;s++)r=this.getVisibleTerminal(t[s],!0),i=this.getVisibleTerminal(t[s],!1),(r==i||r!=i&&(i==e&&(null==this.parent||this.graph.isValidAncestor(r,this.parent,this.traverseAncestors))||r==e&&(null==this.parent||this.graph.isValidAncestor(i,this.parent,this.traverseAncestors))))&&n.push(t[s]);return this.edgesCache.put(e,n),n},mxSwimlaneLayout.prototype.getVisibleTerminal=function(e,t){var n=this.edgesTargetTermCache;t&&(n=this.edgeSourceTermCache);var r=n.get(e);if(null!=r)return r;var r=this.graph.view.getState(e),i=null!=r?r.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t);return null==i&&(i=null!=r?r.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t)),null!=i&&(this.isPort(i)&&(i=this.graph.model.getParent(i)),n.put(e,i)),i},mxSwimlaneLayout.prototype.run=function(e){var t=[],n=[];if(null!=this.swimlanes&&0<this.swimlanes.length&&null!=e){for(var r={},i=0;i<this.swimlanes.length;i++)this.filterDescendants(this.swimlanes[i],r);this.roots=[];var i=!0,s;for(s in r)if(null!=r[s]){i=!1;break}for(var o=0;!i&&o<this.swimlanes.length;){var u=this.findRoots(this.swimlanes[o],r);if(0==u.length)o++;else{for(i=0;i<u.length;i++){var a={};t.push(a),this.traverse(u[i],!0,null,n,a,t,r,o)}for(i=0;i<u.length;i++)this.roots.push(u[i]);i=!0;for(s in r)if(null!=r[s]){i=!1;break}}}}else for(i=0;i<this.roots.length;i++)a={},t.push(a),this.traverse(this.roots[i],!0,null,n,a,t,null);t=[];for(s in n)t.push(n[s]);this.model=new mxSwimlaneModel(this,t,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),initialX=this.placementStage(0,e)},mxSwimlaneLayout.prototype.filterDescendants=function(e,t){var n=this.graph.model;n.isVertex(e)&&e!=this.parent&&n.getParent(e)!=this.parent&&this.graph.isCellVisible(e)&&(t[mxObjectIdentity.get(e)]=e);if(this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var r=n.getChildCount(e),i=0;i<r;i++){var s=n.getChildAt(e,i);this.isPort(s)||this.filterDescendants(s,t)}},mxSwimlaneLayout.prototype.isPort=function(e){return e.geometry.relative?!0:!1},mxSwimlaneLayout.prototype.getEdgesBetween=function(e,t,n){n=null!=n?n:!1;for(var r=this.getEdges(e),i=[],s=0;s<r.length;s++){var o=this.getVisibleTerminal(r[s],!0),u=this.getVisibleTerminal(r[s],!1);(o==e&&u==t||!n&&o==t&&u==e)&&i.push(r[s])}return i},mxSwimlaneLayout.prototype.traverse=function(e,t,n,r,i,s,o,u){if(null!=e&&null!=r){var a=mxObjectIdentity.get(e);if(null!=r[a]||null!=o&&null==o[a]){if(null==i[a])for(n=0;n<s.length;n++)if(e=s[n],null!=e[a]){for(f in e)i[f]=e[f];s.splice(n,1);break}}else{null==i[a]&&(i[a]=e),null==r[a]&&(r[a]=e),null!==o&&delete o[a];var f=this.getEdges(e),a=this.graph.model;for(n=0;n<f.length;n++){var l=this.getVisibleTerminal(f[n],!0),c=l==e;c&&(l=this.getVisibleTerminal(f[n],!1));var h;for(h=0;h<this.swimlanes.length&&!a.isAncestor(this.swimlanes[h],l);h++);h>=this.swimlanes.length||!(h>u||(!t||c)&&h==u)||(i=this.traverse(l,t,f[n],r,i,s,o,h))}}}return i},mxSwimlaneLayout.prototype.cycleStage=function(e){(new mxSwimlaneOrdering(this)).execute(e)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(e){(new mxMedianHybridCrossingReduction(this)).execute(e)},mxSwimlaneLayout.prototype.placementStage=function(e,t){var n=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return n.fineTuning=this.fineTuning,n.execute(t),n.limitX+this.interHierarchySpacing},mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(e){this.createIds=e},mxGraphModel.prototype.createRoot=function(){var e=new mxCell;return e.insert(new mxCell),e},mxGraphModel.prototype.getCell=function(e){return null!=this.cells?this.cells[e]:null},mxGraphModel.prototype.filterCells=function(e,t){var n=null;if(null!=e)for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},mxGraphModel.prototype.getDescendants=function(e){return this.filterDescendants(null,e)},mxGraphModel.prototype.filterDescendants=function(e,t){var n=[];t=t||this.getRoot(),(null==e||e(t))&&n.push(t);for(var r=this.getChildCount(t),i=0;i<r;i++)var s=this.getChildAt(t,i),n=n.concat(this.filterDescendants(e,s));return n},mxGraphModel.prototype.getRoot=function(e){var t=e||this.root;if(null!=e)for(;null!=e;)t=e,e=this.getParent(e);return t},mxGraphModel.prototype.setRoot=function(e){return this.execute(new mxRootChange(this,e)),e},mxGraphModel.prototype.rootChanged=function(e){var t=this.root;return this.root=e,this.nextId=0,this.cells=null,this.cellAdded(e),t},mxGraphModel.prototype.isRoot=function(e){return null!=e&&this.root==e},mxGraphModel.prototype.isLayer=function(e){return this.isRoot(this.getParent(e))},mxGraphModel.prototype.isAncestor=function(e,t){for(;null!=t&&t!=e;)t=this.getParent(t);return t==e},mxGraphModel.prototype.contains=function(e){return this.isAncestor(this.root,e)},mxGraphModel.prototype.getParent=function(e){return null!=e?e.getParent():null},mxGraphModel.prototype.add=function(e,t,n){if(t!=e&&null!=e&&null!=t){null==n&&(n=this.getChildCount(e));var r=e!=this.getParent(t);this.execute(new mxChildChange(this,e,t,n)),this.maintainEdgeParent&&r&&this.updateEdgeParents(t)}return t},mxGraphModel.prototype.cellAdded=function(e){if(null!=e){null==e.getId()&&this.createIds&&e.setId(this.createId(e));if(null!=e.getId()){var t=this.getCell(e.getId());if(t!=e){for(;null!=t;)e.setId(this.createId(e)),t=this.getCell(e.getId());null==this.cells&&(this.cells={}),this.cells[e.getId()]=e}}mxUtils.isNumeric(e.getId())&&(this.nextId=Math.max(this.nextId,e.getId()));for(var t=this.getChildCount(e),n=0;n<t;n++)this.cellAdded(this.getChildAt(e,n))}},mxGraphModel.prototype.createId=function(e){return e=this.nextId,this.nextId++,this.prefix+e+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(e,t){t=t||this.getRoot(e);for(var n=this.getChildCount(e),r=0;r<n;r++){var i=this.getChildAt(e,r);this.updateEdgeParents(i,t)}i=this.getEdgeCount(e),n=[];for(r=0;r<i;r++)n.push(this.getEdgeAt(e,r));for(r=0;r<n.length;r++)i=n[r],this.isAncestor(t,i)&&this.updateEdgeParent(i,t)},mxGraphModel.prototype.updateEdgeParent=function(e,t){for(var n=this.getTerminal(e,!0),r=this.getTerminal(e,!1);null!=n&&!this.isEdge(n)&&null!=n.geometry&&n.geometry.relative;)n=this.getParent(n);for(;null!=r&&this.ignoreRelativeEdgeParent&&!this.isEdge(r)&&null!=r.geometry&&r.geometry.relative;)r=this.getParent(r);if(this.isAncestor(t,n)&&this.isAncestor(t,r)&&(n=n==r?this.getParent(n):this.getNearestCommonAncestor(n,r),null!=n&&(this.getParent(n)!=this.root||this.isAncestor(n,e))&&this.getParent(e)!=n)){r=this.getGeometry(e);if(null!=r){var i=this.getOrigin(this.getParent(e)),s=this.getOrigin(n),o=s.x-i.x,i=s.y-i.y,r=r.clone();r.translate(-o,-i),this.setGeometry(e,r)}this.add(n,e,this.getChildCount(n))}},mxGraphModel.prototype.getOrigin=function(e){var t;return null!=e?(t=this.getOrigin(this.getParent(e)),this.isEdge(e)||(e=this.getGeometry(e),null!=e&&(t.x+=e.x,t.y+=e.y))):t=new mxPoint,t},mxGraphModel.prototype.getNearestCommonAncestor=function(e,t){if(null!=e&&null!=t){var n=mxCellPath.create(t);if(null!=n&&0<n.length){var r=e,i=mxCellPath.create(r);if(n.length<i.length)var r=t,s=i,i=n,n=s;for(;null!=r;){s=this.getParent(r);if(0==n.indexOf(i+mxCellPath.PATH_SEPARATOR)&&null!=s)return r;i=mxCellPath.getParentPath(i),r=s}}}return null},mxGraphModel.prototype.remove=function(e){return e==this.root?this.setRoot(null):null!=this.getParent(e)&&this.execute(new mxChildChange(this,null,e)),e},mxGraphModel.prototype.cellRemoved=function(e){if(null!=e&&null!=this.cells){for(var t=this.getChildCount(e)-1;0<=t;t--)this.cellRemoved(this.getChildAt(e,t));null!=this.cells&&null!=e.getId()&&delete this.cells[e.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(e,t,n){var r=this.getParent(e);return null!=t?t==r&&r.getIndex(e)==n||t.insert(e,n):null!=r&&(n=r.getIndex(e),r.remove(n)),t=this.contains(t),n=this.contains(r),t&&!n?this.cellAdded(e):n&&!t&&this.cellRemoved(e),r},mxGraphModel.prototype.getChildCount=function(e){return null!=e?e.getChildCount():0},mxGraphModel.prototype.getChildAt=function(e,t){return null!=e?e.getChildAt(t):null},mxGraphModel.prototype.getChildren=function(e){return null!=e?e.children:null},mxGraphModel.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraphModel.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraphModel.prototype.getChildCells=function(e,t,n){t=null!=t?t:!1,n=null!=n?n:!1;for(var r=this.getChildCount(e),i=[],s=0;s<r;s++){var o=this.getChildAt(e,s);(!n&&!t||n&&this.isEdge(o)||t&&this.isVertex(o))&&i.push(o)}return i},mxGraphModel.prototype.getTerminal=function(e,t){return null!=e?e.getTerminal(t):null},mxGraphModel.prototype.setTerminal=function(e,t,n){var r=t!=this.getTerminal(e,n);return this.execute(new mxTerminalChange(this,e,t,n)),this.maintainEdgeParent&&r&&this.updateEdgeParent(e,this.getRoot()),t},mxGraphModel.prototype.setTerminals=function(e,t,n){this.beginUpdate();try{this.setTerminal(e,t,!0),this.setTerminal(e,n,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(e,t,n){var r=this.getTerminal(e,n);return null!=t?t.insertEdge(e,n):null!=r&&r.removeEdge(e,n),r},mxGraphModel.prototype.getEdgeCount=function(e){return null!=e?e.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(e,t){return null!=e?e.getEdgeAt(t):null},mxGraphModel.prototype.getDirectedEdgeCount=function(e,t,n){for(var r=0,i=this.getEdgeCount(e),s=0;s<i;s++){var o=this.getEdgeAt(e,s);o!=n&&this.getTerminal(o,t)==e&&r++}return r},mxGraphModel.prototype.getConnections=function(e){return this.getEdges(e,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(e){return this.getEdges(e,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(e){return this.getEdges(e,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(e,t,n,r){t=null!=t?t:!0,n=null!=n?n:!0,r=null!=r?r:!0;for(var i=this.getEdgeCount(e),s=[],o=0;o<i;o++){var u=this.getEdgeAt(e,o),a=this.getTerminal(u,!0),f=this.getTerminal(u,!1);(r&&a==f||a!=f&&(t&&f==e||n&&a==e))&&s.push(u)}return s},mxGraphModel.prototype.getEdgesBetween=function(e,t,n){n=null!=n?n:!1;var r=this.getEdgeCount(e),i=this.getEdgeCount(t),s=e,o=r;i<r&&(o=i,s=t),r=[];for(i=0;i<o;i++){var u=this.getEdgeAt(s,i),a=this.getTerminal(u,!0),f=this.getTerminal(u,!1),l=f==e&&a==t;(a==e&&f==t||!n&&l)&&r.push(u)}return r},mxGraphModel.prototype.getOpposites=function(e,t,n,r){n=null!=n?n:!0,r=null!=r?r:!0;var i=[];if(null!=e)for(var s=0;s<e.length;s++){var o=this.getTerminal(e[s],!0),u=this.getTerminal(e[s],!1);o==t&&null!=u&&u!=t&&r?i.push(u):u==t&&null!=o&&o!=t&&n&&i.push(o)}return i},mxGraphModel.prototype.getTopmostCells=function(e){for(var t=new mxDictionary,n=[],r=0;r<e.length;r++)t.put(e[r],!0);for(r=0;r<e.length;r++){for(var i=e[r],s=!0,o=this.getParent(i);null!=o;){if(t.get(o)){s=!1;break}o=this.getParent(o)}s&&n.push(i)}return n},mxGraphModel.prototype.isVertex=function(e){return null!=e?e.isVertex():!1},mxGraphModel.prototype.isEdge=function(e){return null!=e?e.isEdge():!1},mxGraphModel.prototype.isConnectable=function(e){return null!=e?e.isConnectable():!1},mxGraphModel.prototype.getValue=function(e){return null!=e?e.getValue():null},mxGraphModel.prototype.setValue=function(e,t){return this.execute(new mxValueChange(this,e,t)),t},mxGraphModel.prototype.valueForCellChanged=function(e,t){return e.valueChanged(t)},mxGraphModel.prototype.getGeometry=function(e){return null!=e?e.getGeometry():null},mxGraphModel.prototype.setGeometry=function(e,t){return t!=this.getGeometry(e)&&this.execute(new mxGeometryChange(this,e,t)),t},mxGraphModel.prototype.geometryForCellChanged=function(e,t){var n=this.getGeometry(e);return e.setGeometry(t),n},mxGraphModel.prototype.getStyle=function(e){return null!=e?e.getStyle():null},mxGraphModel.prototype.setStyle=function(e,t){return t!=this.getStyle(e)&&this.execute(new mxStyleChange(this,e,t)),t},mxGraphModel.prototype.styleForCellChanged=function(e,t){var n=this.getStyle(e);return e.setStyle(t),n},mxGraphModel.prototype.isCollapsed=function(e){return null!=e?e.isCollapsed():!1},mxGraphModel.prototype.setCollapsed=function(e,t){return t!=this.isCollapsed(e)&&this.execute(new mxCollapseChange(this,e,t)),t},mxGraphModel.prototype.collapsedStateForCellChanged=function(e,t){var n=this.isCollapsed(e);return e.setCollapsed(t),n},mxGraphModel.prototype.isVisible=function(e){return null!=e?e.isVisible():!1},mxGraphModel.prototype.setVisible=function(e,t){return t!=this.isVisible(e)&&this.execute(new mxVisibleChange(this,e,t)),t},mxGraphModel.prototype.visibleStateForCellChanged=function(e,t){var n=this.isVisible(e);return e.setVisible(t),n},mxGraphModel.prototype.execute=function(e){e.execute(),this.beginUpdate(),this.currentEdit.add(e),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",e)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",e)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT));if(!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit));var e=this.currentEdit;this.currentEdit=this.createUndoableEdit(),e.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e))}}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(e){var t=new mxUndoableEdit(this,null!=e?e:!0);return t.notify=function(){t.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",t,"changes",t.changes)),t.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",t,"changes",t.changes))},t},mxGraphModel.prototype.mergeChildren=function(e,t,n){n=null!=n?n:!0,this.beginUpdate();try{var r={};this.mergeChildrenImpl(e,t,n,r);for(var i in r){var s=r[i],o=this.getTerminal(s,!0);null!=o&&(o=r[mxCellPath.create(o)],this.setTerminal(s,o,!0)),o=this.getTerminal(s,!1),null!=o&&(o=r[mxCellPath.create(o)],this.setTerminal(s,o,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(e,t,n,r){this.beginUpdate();try{for(var i=e.getChildCount(),s=0;s<i;s++){var o=e.getChildAt(s);if("function"==typeof o.getId){var u=o.getId(),a=null==u||this.isEdge(o)&&n?null:this.getCell(u);if(null==a){var f=o.clone();f.setId(u),f.setTerminal(o.getTerminal(!0),!0),f.setTerminal(o.getTerminal(!1),!1),a=t.insert(f),this.cellAdded(a)}r[mxCellPath.create(o)]=a,this.mergeChildrenImpl(o,a,n,r)}}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(e){var t=[];if(null!=e)for(var n=new mxDictionary,r=0;r<e.length;r++){var i=this.getParent(e[r]);null==i||n.get(i)||(n.put(i,!0),t.push(i))}return t},mxGraphModel.prototype.cloneCell=function(e){return null!=e?this.cloneCells([e],!0)[0]:null},mxGraphModel.prototype.cloneCells=function(e,t,n){n=null!=n?n:{};for(var r=[],i=0;i<e.length;i++)null!=e[i]?r.push(this.cloneCellImpl(e[i],n,t)):r.push(null);for(i=0;i<r.length;i++)null!=r[i]&&this.restoreClone(r[i],e[i],n);return r},mxGraphModel.prototype.cloneCellImpl=function(e,t,n){var r=mxObjectIdentity.get(e),i=t[r];if(null==i&&(i=this.cellCloned(e),t[r]=i,n))for(n=this.getChildCount(e),r=0;r<n;r++){var s=this.cloneCellImpl(this.getChildAt(e,r),t,!0);i.insert(s)}return i},mxGraphModel.prototype.cellCloned=function(e){return e.clone()},mxGraphModel.prototype.restoreClone=function(e,t,n){var r=this.getTerminal(t,!0);null!=r&&(r=n[mxObjectIdentity.get(r)],null!=r&&r.insertEdge(e,!0)),r=this.getTerminal(t,!1),null!=r&&(r=n[mxObjectIdentity.get(r)],null!=r&&r.insertEdge(e,!1));for(var r=this.getChildCount(e),i=0;i<r;i++)this.restoreClone(this.getChildAt(e,i),this.getChildAt(t,i),n)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){if(null!=this.child){var e=this.model.getParent(this.child),t=null!=e?e.getIndex(this.child):0;null==this.previous&&this.connect(this.child,!1),e=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=e,this.index=this.previousIndex,this.previousIndex=t}},mxChildChange.prototype.connect=function(e,t){t=null!=t?t:!0;var n=e.getTerminal(!0),r=e.getTerminal(!1);null!=n&&(t?this.model.terminalForCellChanged(e,n,!0):this.model.terminalForCellChanged(e,null,!0)),null!=r&&(t?this.model.terminalForCellChanged(e,r,!1):this.model.terminalForCellChanged(e,null,!1)),e.setTerminal(n,!0),e.setTerminal(r,!1),n=this.model.getChildCount(e);for(r=0;r<n;r++)this.connect(this.model.getChildAt(e,r),t)},mxTerminalChange.prototype.execute=function(){null!=this.cell&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))},mxValueChange.prototype.execute=function(){null!=this.cell&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))},mxStyleChange.prototype.execute=function(){null!=this.cell&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))},mxGeometryChange.prototype.execute=function(){null!=this.cell&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))},mxCollapseChange.prototype.execute=function(){null!=this.cell&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))},mxVisibleChange.prototype.execute=function(){null!=this.cell&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))},mxCellAttributeChange.prototype.execute=function(){if(null!=this.cell){var e=this.cell.getAttribute(this.attribute);null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=e}},mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient="id value parent source target children edges".split(" "),mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(e){this.id=e},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(e){this.value=e},mxCell.prototype.valueChanged=function(e){var t=this.getValue();return this.setValue(e),t},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(e){this.geometry=e},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(e){this.style=e},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(e){this.vertex=e},mxCell.prototype.isEdge=function(){return 0!=this.edge},mxCell.prototype.setEdge=function(e){this.edge=e},mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(e){this.connectable=e},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(e){this.visible=e},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(e){this.collapsed=e},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(e){this.parent=e},mxCell.prototype.getTerminal=function(e){return e?this.source:this.target},mxCell.prototype.setTerminal=function(e,t){return t?this.source=e:this.target=e,e},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(e){return mxUtils.indexOf(this.children,e)},mxCell.prototype.getChildAt=function(e){return null==this.children?null:this.children[e]},mxCell.prototype.insert=function(e,t){return null!=e&&(null==t&&(t=this.getChildCount(),e.getParent()==this&&t--),e.removeFromParent(),e.setParent(this),null==this.children?(this.children=[],this.children.push(e)):this.children.splice(t,0,e)),e},mxCell.prototype.remove=function(e){var t=null;return null!=this.children&&0<=e&&(t=this.getChildAt(e),null!=t&&(this.children.splice(e,1),t.setParent(null))),t},mxCell.prototype.removeFromParent=function(){if(null!=this.parent){var e=this.parent.getIndex(this);this.parent.remove(e)}},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(e){return mxUtils.indexOf(this.edges,e)},mxCell.prototype.getEdgeAt=function(e){return null==this.edges?null:this.edges[e]},mxCell.prototype.insertEdge=function(e,t){return null!=e&&(e.removeFromTerminal(t),e.setTerminal(this,t),null==this.edges||e.getTerminal(!t)!=this||0>mxUtils.indexOf(this.edges,e))&&(null==this.edges&&(this.edges=[]),this.edges.push(e)),e},mxCell.prototype.removeEdge=function(e,t){if(null!=e){if(e.getTerminal(!t)!=this&&null!=this.edges){var n=this.getEdgeIndex(e);0<=n&&this.edges.splice(n,1)}e.setTerminal(null,t)}return e},mxCell.prototype.removeFromTerminal=function(e){var t=this.getTerminal(e);null!=t&&t.removeEdge(this,e)},mxCell.prototype.hasAttribute=function(e){var t=this.getValue();return null!=t&&t.nodeType==mxConstants.NODETYPE_ELEMENT&&t.hasAttribute?t.hasAttribute(e):null!=t.getAttribute(e)},mxCell.prototype.getAttribute=function(e,t){var n=this.getValue();return(null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT?n.getAttribute(e):null)||t},mxCell.prototype.setAttribute=function(e,t){var n=this.getValue();null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT&&n.setAttribute(e,t)},mxCell.prototype.clone=function(){var e=mxUtils.clone(this,this.mxTransient);return e.setValue(this.cloneValue()),e},mxCell.prototype.cloneValue=function(){var e=this.getValue();return null!=e&&("function"==typeof e.clone?e=e.clone():isNaN(e.nodeType)||(e=e.cloneNode(!0))),e},mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){if(null!=this.alternateBounds){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=e}},mxGeometry.prototype.getTerminalPoint=function(e){return e?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(e,t){return t?this.sourcePoint=e:this.targetPoint=e,e},mxGeometry.prototype.rotate=function(e,t){var n=mxUtils.toRadians(e),r=Math.cos(n),n=Math.sin(n);if(!this.relative){var i=new mxPoint(this.getCenterX(),this.getCenterY()),i=mxUtils.getRotatedPoint(i,r,n,t);this.x=Math.round(i.x-this.width/2),this.y=Math.round(i.y-this.height/2)}null!=this.sourcePoint&&(i=mxUtils.getRotatedPoint(this.sourcePoint,r,n,t),this.sourcePoint.x=Math.round(i.x),this.sourcePoint.y=Math.round(i.y)),null!=this.targetPoint&&(i=mxUtils.getRotatedPoint(this.targetPoint,r,n,t),this.targetPoint.x=Math.round(i.x),this.targetPoint.y=Math.round(i.y));if(null!=this.points)for(var s=0;s<this.points.length;s++)null!=this.points[s]&&(i=mxUtils.getRotatedPoint(this.points[s],r,n,t),this.points[s].x=Math.round(i.x),this.points[s].y=Math.round(i.y))},mxGeometry.prototype.translate=function(e,t){e=parseFloat(e),t=parseFloat(t),this.relative||(this.x=parseFloat(this.x)+e,this.y=parseFloat(this.y)+t),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+t),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+e,this.targetPoint.y=parseFloat(this.targetPoint.y)+t);if(this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var n=0;n<this.points.length;n++)null!=this.points[n]&&(this.points[n].x=parseFloat(this.points[n].x)+e,this.points[n].y=parseFloat(this.points[n].y)+t)},mxGeometry.prototype.scale=function(e,t,n){e=parseFloat(e),t=parseFloat(t),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*t),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*e,this.targetPoint.y=parseFloat(this.targetPoint.y)*t);if(null!=this.points)for(var r=0;r<this.points.length;r++)null!=this.points[r]&&(this.points[r].x=parseFloat(this.points[r].x)*e,this.points[r].y=parseFloat(this.points[r].y)*t);this.relative||(this.x=parseFloat(this.x)*e,this.y=parseFloat(this.y)*t,n&&(t=e=Math.min(e,t)),this.width=parseFloat(this.width)*e,this.height=parseFloat(this.height)*t)},mxGeometry.prototype.equals=function(e){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==e.relative&&(null==this.sourcePoint&&null==e.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(e.sourcePoint))&&(null==this.targetPoint&&null==e.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(e.targetPoint))&&(null==this.points&&null==e.points||null!=this.points&&mxUtils.equalPoints(this.points,e.points))&&(null==this.alternateBounds&&null==e.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(e.alternateBounds))&&(null==this.offset&&null==e.offset||null!=this.offset&&this.offset.equals(e.offset))};var mxCellPath={PATH_SEPARATOR:".",create:function(e){var t="";if(null!=e)for(var n=e.getParent();null!=n;)t=n.getIndex(e)+mxCellPath.PATH_SEPARATOR+t,e=n,n=e.getParent();return e=t.length,1<e&&(t=t.substring(0,e-1)),t},getParentPath:function(e){if(null!=e){var t=e.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(0<=t)return e.substring(0,t);if(0<e.length)return""}return null},resolve:function(e,t){var n=e;if(null!=t)for(var r=t.split(mxCellPath.PATH_SEPARATOR),i=0;i<r.length;i++)n=n.getChildAt(parseInt(r[i]));return n},compare:function(e,t){for(var n=Math.min(e.length,t.length),r=0,i=0;i<n;i++)if(e[i]!=t[i]){0==e[i].length||0==t[i].length?r=e[i]==t[i]?0:e[i]>t[i]?1:-1:(n=parseInt(e[i]),i=parseInt(t[i]),r=n==i?0:n>i?1:-1);break}return 0==r&&(n=e.length,i=t.length,n!=i&&(r=n>i?1:-1)),r}},mxPerimeter={RectanglePerimeter:function(e,t,n,r){t=e.getCenterX();var i=e.getCenterY(),s=Math.atan2(n.y-i,n.x-t),o=new mxPoint(0,0),u=Math.PI,a=Math.PI/2-s,f=Math.atan2(e.height,e.width);return s<-u+f||s>u-f?(o.x=e.x,o.y=i-e.width*Math.tan(s)/2):s<-f?(o.y=e.y,o.x=t-e.height*Math.tan(a)/2):s<f?(o.x=e.x+e.width,o.y=i+e.width*Math.tan(s)/2):(o.y=e.y+e.height,o.x=t+e.height*Math.tan(a)/2),r&&(n.x>=e.x&&n.x<=e.x+e.width?o.x=n.x:n.y>=e.y&&n.y<=e.y+e.height&&(o.y=n.y),n.x<e.x?o.x=e.x:n.x>e.x+e.width&&(o.x=e.x+e.width),n.y<e.y?o.y=e.y:n.y>e.y+e.height&&(o.y=e.y+e.height)),o},EllipsePerimeter:function(e,t,n,r){var i=e.x,s=e.y,o=e.width/2,u=e.height/2,a=i+o,f=s+u;t=n.x,n=n.y;var l=parseInt(t-a),c=parseInt(n-f);if(0==l&&0!=c)return new mxPoint(a,f+u*c/Math.abs(c));if(0==l&&0==c)return new mxPoint(t,n);if(r){if(n>=s&&n<=s+e.height)return e=n-f,e=Math.sqrt(o*o*(1-e*e/(u*u)))||0,t<=i&&(e=-e),new mxPoint(a+e,n);if(t>=i&&t<=i+e.width)return e=t-a,e=Math.sqrt(u*u*(1-e*e/(o*o)))||0,n<=s&&(e=-e),new mxPoint(t,f+e)}return i=c/l,f-=i*a,s=o*o*i*i+u*u,e=-2*a*s,u=Math.sqrt(e*e-4*s*(o*o*i*i*a*a+u*u*a*a-o*o*u*u)),o=(-e+u)/(2*s),a=(-e-u)/(2*s),u=i*o+f,f=i*a+f,Math.sqrt(Math.pow(o-t,2)+Math.pow(u-n,2))<Math.sqrt(Math.pow(a-t,2)+Math.pow(f-n,2))?(t=o,n=u):(t=a,n=f),new mxPoint(t,n)},RhombusPerimeter:function(e,t,n,r){t=e.x;var i=e.y,s=e.width;e=e.height;var o=t+s/2,u=i+e/2,a=n.x;n=n.y;if(o==a)return u>n?new mxPoint(o,i):new mxPoint(o,i+e);if(u==n)return o>a?new mxPoint(t,u):new mxPoint(t+s,u);var f=o,l=u;return r&&(a>=t&&a<=t+s?f=a:n>=i&&n<=i+e&&(l=n)),a<o?n<u?mxUtils.intersection(a,n,f,l,o,i,t,u):mxUtils.intersection(a,n,f,l,o,i+e,t,u):n<u?mxUtils.intersection(a,n,f,l,o,i,t+s,u):mxUtils.intersection(a,n,f,l,o,i+e,t+s,u)},TrianglePerimeter:function(e,t,n,r){t=null!=t?t.style[mxConstants.STYLE_DIRECTION]:null;var i=t==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_SOUTH,s=e.x,o=e.y,u=e.width,a=e.height;e=s+u/2;var f=o+a/2,l=new mxPoint(s,o),c=new mxPoint(s+u,f),h=new mxPoint(s,o+a);t==mxConstants.DIRECTION_NORTH?(l=h,c=new mxPoint(e,o),h=new mxPoint(s+u,o+a)):t==mxConstants.DIRECTION_SOUTH?(c=new mxPoint(e,o+a),h=new mxPoint(s+u,o)):t==mxConstants.DIRECTION_WEST&&(l=new mxPoint(s+u,o),c=new mxPoint(s,f),h=new mxPoint(s+u,o+a));var p=n.x-e,d=n.y-f,p=i?Math.atan2(p,d):Math.atan2(d,p),d=i?Math.atan2(u,a):Math.atan2(a,u);return(t==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_WEST?p>-d&&p<d:p<-Math.PI+d||p>Math.PI-d)?n=r&&(i&&n.x>=l.x&&n.x<=h.x||!i&&n.y>=l.y&&n.y<=h.y)?i?new mxPoint(n.x,l.y):new mxPoint(l.x,n.y):t==mxConstants.DIRECTION_NORTH?new mxPoint(s+u/2+a*Math.tan(p)/2,o+a):t==mxConstants.DIRECTION_SOUTH?new mxPoint(s+u/2-a*Math.tan(p)/2,o):t==mxConstants.DIRECTION_WEST?new mxPoint(s+u,o+a/2+u*Math.tan(p)/2):new mxPoint(s,o+a/2-u*Math.tan(p)/2):(r&&(r=new mxPoint(e,f),n.y>=o&&n.y<=o+a?(r.x=i?e:t==mxConstants.DIRECTION_WEST?s+u:s,r.y=n.y):n.x>=s&&n.x<=s+u&&(r.x=n.x,r.y=i?t==mxConstants.DIRECTION_NORTH?o+a:o:f),e=r.x,f=r.y),n=i&&n.x<=s+u/2||!i&&n.y<=o+a/2?mxUtils.intersection(n.x,n.y,e,f,l.x,l.y,c.x,c.y):mxUtils.intersection(n.x,n.y,e,f,c.x,c.y,h.x,h.y)),null==n&&(n=new mxPoint(e,f)),n},HexagonPerimeter:function(e,t,n,r){var i=e.x,s=e.y,o=e.width,u=e.height,a=e.getCenterX();e=e.getCenterY();var f=n.x,l=n.y,c=-Math.atan2(l-e,f-a),h=Math.PI,p=Math.PI/2;new mxPoint(a,e),t=null!=t?mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST;var d=t==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_SOUTH;t=new mxPoint;var v=new mxPoint;if(f<i&&l<s||f<i&&l>s+u||f>i+o&&l<s||f>i+o&&l>s+u)r=!1;if(r){if(d){if(f==a){if(l<=s)return new mxPoint(a,s);if(l>=s+u)return new mxPoint(a,s+u)}else if(f<i){if(l==s+u/4)return new mxPoint(i,s+u/4);if(l==s+3*u/4)return new mxPoint(i,s+3*u/4)}else if(f>i+o){if(l==s+u/4)return new mxPoint(i+o,s+u/4);if(l==s+3*u/4)return new mxPoint(i+o,s+3*u/4)}else if(f==i){if(l<e)return new mxPoint(i,s+u/4);if(l>e)return new mxPoint(i,s+3*u/4)}else if(f==i+o){if(l<e)return new mxPoint(i+o,s+u/4);if(l>e)return new mxPoint(i+o,s+3*u/4)}if(l==s)return new mxPoint(a,s);if(l==s+u)return new mxPoint(a,s+u);f<a?l>s+u/4&&l<s+3*u/4?(t=new mxPoint(i,s),v=new mxPoint(i,s+u)):l<s+u/4?(t=new mxPoint(i-Math.floor(.5*o),s+Math.floor(.5*u)),v=new mxPoint(i+o,s-Math.floor(.25*u))):l>s+3*u/4&&(t=new mxPoint(i-Math.floor(.5*o),s+Math.floor(.5*u)),v=new mxPoint(i+o,s+Math.floor(1.25*u))):f>a&&(l>s+u/4&&l<s+3*u/4?(t=new mxPoint(i+o,s),v=new mxPoint(i+o,s+u)):l<s+u/4?(t=new mxPoint(i,s-Math.floor(.25*u)),v=new mxPoint(i+Math.floor(1.5*o),s+Math.floor(.5*u))):l>s+3*u/4&&(t=new mxPoint(i+Math.floor(1.5*o),s+Math.floor(.5*u)),v=new mxPoint(i,s+Math.floor(1.25*u))))}else{if(l==e){if(f<=i)return new mxPoint(i,s+u/2);if(f>=i+o)return new mxPoint(i+o,s+u/2)}else if(l<s){if(f==i+o/4)return new mxPoint(i+o/4,s);if(f==i+3*o/4)return new mxPoint(i+3*o/4,s)}else if(l>s+u){if(f==i+o/4)return new mxPoint(i+o/4,s+u);if(f==i+3*o/4)return new mxPoint(i+3*o/4,s+u)}else if(l==s){if(f<a)return new mxPoint(i+o/4,s);if(f>a)return new mxPoint(i+3*o/4,s)}else if(l==s+u){if(f<a)return new mxPoint(i+o/4,s+u);if(l>e)return new mxPoint(i+3*o/4,s+u)}if(f==i)return new mxPoint(i,e);if(f==i+o)return new mxPoint(i+o,e);l<e?f>i+o/4&&f<i+3*o/4?(t=new mxPoint(i,s),v=new mxPoint(i+o,s)):f<i+o/4?(t=new mxPoint(i-Math.floor(.25*o),s+u),v=new mxPoint(i+Math.floor(.5*o),s-Math.floor(.5*u))):f>i+3*o/4&&(t=new mxPoint(i+Math.floor(.5*o),s-Math.floor(.5*u)),v=new mxPoint(i+Math.floor(1.25*o),s+u)):l>e&&(f>i+o/4&&f<i+3*o/4?(t=new mxPoint(i,s+u),v=new mxPoint(i+o,s+u)):f<i+o/4?(t=new mxPoint(i-Math.floor(.25*o),s),v=new mxPoint(i+Math.floor(.5*o),s+Math.floor(1.5*u))):f>i+3*o/4&&(t=new mxPoint(i+Math.floor(.5*o),s+Math.floor(1.5*u)),v=new mxPoint(i+Math.floor(1.25*o),s)))}r=a,c=e,f>=i&&f<=i+o?(r=f,c=l<e?s+u:s):l>=s&&l<=s+u&&(c=l,r=f<a?i+o:i),n=mxUtils.intersection(r,c,n.x,n.y,t.x,t.y,v.x,v.y)}else{if(d){f=Math.atan2(u/4,o/2);if(c==f)return new mxPoint(i+o,s+Math.floor(.25*u));if(c==p)return new mxPoint(i+Math.floor(.5*o),s);if(c==h-f)return new mxPoint(i,s+Math.floor(.25*u));if(c==-f)return new mxPoint(i+o,s+Math.floor(.75*u));if(c==-p)return new mxPoint(i+Math.floor(.5*o),s+u);if(c==-h+f)return new mxPoint(i,s+Math.floor(.75*u));c<f&&c>-f?(t=new mxPoint(i+o,s),v=new mxPoint(i+o,s+u)):c>f&&c<p?(t=new mxPoint(i,s-Math.floor(.25*u)),v=new mxPoint(i+Math.floor(1.5*o),s+Math.floor(.5*u))):c>p&&c<h-f?(t=new mxPoint(i-Math.floor(.5*o),s+Math.floor(.5*u)),v=new mxPoint(i+o,s-Math.floor(.25*u))):c>h-f&&c<=h||c<-h+f&&c>=-h?(t=new mxPoint(i,s),v=new mxPoint(i,s+u)):c<-f&&c>-p?(t=new mxPoint(i+Math.floor(1.5*o),s+Math.floor(.5*u)),v=new mxPoint(i,s+Math.floor(1.25*u))):c<-p&&c>-h+f&&(t=new mxPoint(i-Math.floor(.5*o),s+Math.floor(.5*u)),v=new mxPoint(i+o,s+Math.floor(1.25*u)))}else{f=Math.atan2(u/2,o/4);if(c==f)return new mxPoint(i+Math.floor(.75*o),s);if(c==h-f)return new mxPoint(i+Math.floor(.25*o),s);if(c==h||c==-h)return new mxPoint(i,s+Math.floor(.5*u));if(0==c)return new mxPoint(i+o,s+Math.floor(.5*u));if(c==-f)return new mxPoint(i+Math.floor(.75*o),s+u);if(c==-h+f)return new mxPoint(i+Math.floor(.25*o),s+u);0<c&&c<f?(t=new mxPoint(i+Math.floor(.5*o),s-Math.floor(.5*u)),v=new mxPoint(i+Math.floor(1.25*o),s+u)):c>f&&c<h-f?(t=new mxPoint(i,s),v=new mxPoint(i+o,s)):c>h-f&&c<h?(t=new mxPoint(i-Math.floor(.25*o),s+u),v=new mxPoint(i+Math.floor(.5*o),s-Math.floor(.5*u))):0>c&&c>-f?(t=new mxPoint(i+Math.floor(.5*o),s+Math.floor(1.5*u)),v=new mxPoint(i+Math.floor(1.25*o),s)):c<-f&&c>-h+f?(t=new mxPoint(i,s+u),v=new mxPoint(i+o,s+u)):c<-h+f&&c>-h&&(t=new mxPoint(i-Math.floor(.25*o),s),v=new mxPoint(i+Math.floor(.5*o),s+Math.floor(1.5*u)))}n=mxUtils.intersection(a,e,n.x,n.y,t.x,t.y,v.x,v.y)}return null==n?new mxPoint(a,e):n}};mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var e="";return 5==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=5">':8==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=8">':8<document.documentMode&&(e='<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->'),e},mxPrintPreview.prototype.appendGraph=function(e,t,n,r,i,s){this.graph=e,this.scale=null!=t?t:1/e.pageScale,this.x0=n,this.y0=r,this.open(null,null,i,s)},mxPrintPreview.prototype.open=function(e,t,n,r){var i=this.graph.cellRenderer.initializeOverlay,s=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(e,t){t.init(e.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(e,t,n,r){t.dialect=e.view.graph.dialect,t.init(e.view.getDrawPane())}),this.wnd=null!=t?t:this.wnd;var o=!1;null==this.wnd&&(o=!0,this.wnd=window.open());var u=this.wnd.document;if(o){var a=this.getDoctype();null!=a&&0<a.length&&u.writeln(a),mxClient.IS_VML?u.writeln('<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">'):("CSS1Compat"===document.compatMode&&u.writeln("<!DOCTYPE html>"),u.writeln("<html>")),u.writeln("<head>"),this.writeHead(u,e),u.writeln("</head>"),u.writeln('<body class="mxPage">')}var f=this.graph.getGraphBounds().clone(),l=this.graph.getView().getScale(),c=l/this.scale,h=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=h.x*this.scale,this.y0-=h.y*this.scale,f.width+=f.x,f.height+=f.y,f.x=0,this.border=f.y=0);var p=this.pageFormat.width-2*this.border,d=this.pageFormat.height-2*this.border;this.pageFormat.height+=this.marginTop+this.marginBottom,f.width/=c,f.height/=c;var v=Math.max(1,Math.ceil((f.width+this.x0)/p)),m=Math.max(1,Math.ceil((f.height+this.y0)/d));this.pageCount=v*m;var g=mxUtils.bind(this,function(){if(this.pageSelector&&(1<m||1<v)){var e=this.createPageSelector(m,v);u.body.appendChild(e);if(mxClient.IS_IE&&null==u.documentMode||5==u.documentMode||8==u.documentMode||7==u.documentMode){e.style.position="absolute";var t=function(){e.style.top=(u.body.scrollTop||u.documentElement.scrollTop)+10+"px"};mxEvent.addListener(this.wnd,"scroll",function(e){t()}),mxEvent.addListener(this.wnd,"resize",function(e){t()})}}}),y=mxUtils.bind(this,function(e,t){null!=this.borderColor&&(e.style.borderColor=this.borderColor,e.style.borderStyle="solid",e.style.borderWidth="1px"),e.style.background=this.backgroundColor;if(n||t)e.style.pageBreakAfter="always";if(o&&(mxClient.IS_IE||11<=document.documentMode||mxClient.IS_EDGE))u.writeln(e.outerHTML),e.parentNode.removeChild(e);else if(mxClient.IS_IE||11<=document.documentMode||mxClient.IS_EDGE){var r=u.createElement("div");r.innerHTML=e.outerHTML,r=r.getElementsByTagName("div")[0],u.body.appendChild(r),e.parentNode.removeChild(e)}else e.parentNode.removeChild(e),u.body.appendChild(e);(n||t)&&this.addPageBreak(u)}),b=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(null!=b)for(var w=0;w<b.length;w++)y(b[w],!0);for(var E=this.getAppendices(this.pageFormat.width,this.pageFormat.height),w=0;w<m;w++){var S=w*d/this.scale-this.y0/this.scale+(f.y-h.y*l)/l;for(e=0;e<v;e++){if(null==this.wnd)return null;var x=e*p/this.scale-this.x0/this.scale+(f.x-h.x*l)/l,T=w*v+e+1,N=new mxRectangle(x,S,p,d),s=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,mxUtils.bind(this,function(e){this.addGraphFragment(-x,-S,this.scale,T,e,N),this.printBackgroundImage&&this.insertBackgroundImage(e,-x,-S)}),T);s.setAttribute("id","mxPage-"+T),y(s,null!=E||w<m-1||e<v-1)}}if(null!=E)for(w=0;w<E.length;w++)y(E[w],w<E.length-1);o&&!r&&(this.closeDocument(),g()),this.wnd.focus()}catch(C){null!=s&&null!=s.parentNode&&s.parentNode.removeChild(s)}finally{this.graph.cellRenderer.initializeOverlay=i}return this.wnd},mxPrintPreview.prototype.addPageBreak=function(e){var t=e.createElement("hr");t.className="mxPageBreak",e.body.appendChild(t)},mxPrintPreview.prototype.closeDocument=function(){try{if(null!=this.wnd&&null!=this.wnd.document){var e=this.wnd.document;this.writePostfix(e),e.writeln("</body>"),e.writeln("</html>"),e.close(),mxEvent.release(e.body)}}catch(t){}},mxPrintPreview.prototype.writeHead=function(e,t){null!=this.title&&e.writeln("<title>"+this.title+"</title>"),mxClient.IS_VML&&e.writeln('<style type="text/css">v\\:*{behavior:url(#default#VML)}o\\:*{behavior:url(#default#VML)}</style>'),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",e),e.writeln('<style type="text/css">'),e.writeln("@media print {"),e.writeln("  * { -webkit-print-color-adjust: exact; }"),e.writeln("  table.mxPageSelector { display: none; }"),e.writeln("  hr.mxPageBreak { display: none; }"),e.writeln("}"),e.writeln("@media screen {"),e.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),e.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),e.writeln("  body.mxPage { background: gray; }"),e.writeln("}"),null!=t&&e.writeln(t),e.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(e){},mxPrintPreview.prototype.createPageSelector=function(e,t){var n=this.wnd.document,r=n.createElement("table");r.className="mxPageSelector",r.setAttribute("border","0");for(var i=n.createElement("tbody"),s=0;s<e;s++){for(var o=n.createElement("tr"),u=0;u<t;u++){var a=s*t+u+1,f=n.createElement("td"),l=n.createElement("a");l.setAttribute("href","#mxPage-"+a),!mxClient.IS_NS||mxClient.IS_SF||mxClient.IS_GC||l.setAttribute("onclick","var page = document.getElementById('mxPage-"+a+"');page.scrollIntoView(true);event.preventDefault();"),mxUtils.write(l,a,n),f.appendChild(l),o.appendChild(f)}i.appendChild(o)}return r.appendChild(i),r},mxPrintPreview.prototype.renderPage=function(e,t,n,r,i,s){s=this.wnd.document;var o=document.createElement("div"),u=null;try{if(0!=n||0!=r){o.style.position="relative",o.style.width=e+"px",o.style.height=t+"px",o.style.pageBreakInside="avoid";var a=document.createElement("div");a.style.position="relative",a.style.top=this.border+"px",a.style.left=this.border+"px",a.style.width=e-2*this.border+"px",a.style.height=t-2*this.border+"px",a.style.overflow="hidden";var f=document.createElement("div");f.style.position="relative",f.style.marginLeft=n+"px",f.style.marginTop=r+"px",8==s.documentMode&&(a.style.position="absolute",f.style.position="absolute"),10==s.documentMode&&(f.style.width="100%",f.style.height="100%"),a.appendChild(f),o.appendChild(a),document.body.appendChild(o),u=f}else o.style.width=e+"px",o.style.height=t+"px",o.style.overflow="hidden",o.style.pageBreakInside="avoid",8==s.documentMode&&(o.style.position="relative"),a=document.createElement("div"),a.style.width=e-2*this.border+"px",a.style.height=t-2*this.border+"px",a.style.overflow="hidden",!mxClient.IS_IE||null!=s.documentMode&&5!=s.documentMode&&8!=s.documentMode&&7!=s.documentMode?(a.style.top=this.border+"px",a.style.left=this.border+"px"):(a.style.marginTop=this.border+"px",a.style.marginLeft=this.border+"px"),this.graph.dialect==mxConstants.DIALECT_VML&&(a.style.position="absolute"),o.appendChild(a),document.body.appendChild(o),u=a}catch(l){throw o.parentNode.removeChild(o),l}return i(u),o},mxPrintPreview.prototype.getRoot=function(){var e=this.graph.view.currentRoot;return null==e&&(e=this.graph.getModel().getRoot()),e},mxPrintPreview.prototype.addGraphFragment=function(e,t,n,r,i,s){var o=this.graph.getView();r=this.graph.container,this.graph.container=i;var u=o.getCanvas(),a=o.getBackgroundPane(),f=o.getDrawPane(),l=o.getOverlayPane();if(this.graph.dialect==mxConstants.DIALECT_SVG){if(o.createSvg(),!mxClient.NO_FO){var c=o.getDrawPane().parentNode;c.getAttribute("transform"),c.setAttribute("transformOrigin","0 0"),c.setAttribute("transform","scale("+n+","+n+")translate("+e+","+t+")"),n=1,t=e=0}}else this.graph.dialect==mxConstants.DIALECT_VML?o.createVml():o.createHtml();c=o.isEventsEnabled(),o.setEventsEnabled(!1);var h=this.graph.isEnabled();this.graph.setEnabled(!1);var p=o.getTranslate();o.translate=new mxPoint(e,t);var d=this.graph.cellRenderer.redraw,v=o.states;e=o.scale;if(this.clipping){var m=new mxRectangle((s.x+p.x)*e,(s.y+p.y)*e,s.width*e/n,s.height*e/n);this.graph.cellRenderer.redraw=function(e,t,n){if(null!=e){var r=v.get(e.cell);null!=r&&(r=o.getBoundingBox(r,!1),null==r||mxUtils.intersects(m,r))}d.apply(this,arguments)}}e=null;try{var g=[this.getRoot()];e=new mxTemporaryCellStates(o,n,g,null,mxUtils.bind(this,function(e){return this.getLinkForCellState(e)}))}finally{if(mxClient.IS_IE)o.overlayPane.innerHTML="",o.canvas.style.overflow="hidden",o.canvas.style.position="relative",o.canvas.style.top=this.marginTop+"px",o.canvas.style.width=s.width+"px",o.canvas.style.height=s.height+"px";else for(n=i.firstChild;null!=n;)g=n.nextSibling,t=n.nodeName.toLowerCase(),"svg"==t?(n.style.overflow="hidden",n.style.position="relative",n.style.top=this.marginTop+"px",n.setAttribute("width",s.width),n.setAttribute("height",s.height),n.style.width="",n.style.height=""):"default"!=n.style.cursor&&"div"!=t&&n.parentNode.removeChild(n),n=g;this.printBackgroundImage&&(i=i.getElementsByTagName("svg"),0<i.length&&(i[0].style.position="absolute")),o.overlayPane.parentNode.removeChild(o.overlayPane),this.graph.setEnabled(h),this.graph.container=r,this.graph.cellRenderer.redraw=d,o.canvas=u,o.backgroundPane=a,o.drawPane=f,o.overlayPane=l,o.translate=p,e.destroy(),o.setEventsEnabled(c)}},mxPrintPreview.prototype.getLinkForCellState=function(e){return this.graph.getLinkForCell(e.cell)},mxPrintPreview.prototype.insertBackgroundImage=function(e,t,n){var r=this.graph.backgroundImage;if(null!=r){var i=document.createElement("img");i.style.position="absolute",i.style.marginLeft=Math.round(t*this.scale)+"px",i.style.marginTop=Math.round(n*this.scale)+"px",i.setAttribute("width",Math.round(this.scale*r.width)),i.setAttribute("height",Math.round(this.scale*r.height)),i.src=r.src,e.insertBefore(i,e.firstChild)}},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(e){e=this.open(e),null!=e&&e.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},mxStylesheet.prototype.createDefaultVertexStyle=function(){var e={};return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,e[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#774400",e},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var e={};return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,e[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#446299",e},mxStylesheet.prototype.putDefaultVertexStyle=function(e){this.putCellStyle("defaultVertex",e)},mxStylesheet.prototype.putDefaultEdgeStyle=function(e){this.putCellStyle("defaultEdge",e)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(e,t){this.styles[e]=t},mxStylesheet.prototype.getCellStyle=function(e,t){var n=t;if(null!=e&&0<e.length)for(var r=e.split(";"),n=null!=n&&";"!=e.charAt(0)?mxUtils.clone(n):{},i=0;i<r.length;i++){var s=r[i],o=s.indexOf("=");if(0<=o){var u=s.substring(0,o),s=s.substring(o+1);s==mxConstants.NONE?delete n[u]:mxUtils.isNumeric(s)?n[u]=parseFloat(s):n[u]=s}else if(s=this.styles[s],null!=s)for(u in s)n[u]=s[u]}return n},mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.getPerimeterBounds=function(e,t){e=e||0,t=null!=t?t:new mxRectangle(this.x,this.y,this.width,this.height);if(null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect){var n=this.shape.stencil.computeAspect(this.style,t.x,t.y,t.width,t.height);t.x=n.x,t.y=n.y,t.width=this.shape.stencil.w0*n.width,t.height=this.shape.stencil.h0*n.height}return 0!=e&&t.grow(e),t},mxCellState.prototype.setAbsoluteTerminalPoint=function(e,t){t?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[0]=e):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(e)):1==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[this.absolutePoints.length-1]=e},mxCellState.prototype.setCursor=function(e){null!=this.shape&&this.shape.setCursor(e),null!=this.text&&this.text.setCursor(e)},mxCellState.prototype.getVisibleTerminal=function(e){return e=this.getVisibleTerminalState(e),null!=e?e.cell:null},mxCellState.prototype.getVisibleTerminalState=function(e){return e?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(e,t){t?this.visibleSourceState=e:this.visibleTargetState=e},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var e=this.view.translate,t=this.view.scale;this.cellBounds=new mxRectangle(this.x/t-e.x,this.y/t-e.y,this.width/t,this.height/t),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(e){this.view=e.view,this.cell=e.cell,this.style=e.style,this.absolutePoints=e.absolutePoints,this.origin=e.origin,this.absoluteOffset=e.absoluteOffset,this.boundingBox=e.boundingBox,this.terminalDistance=e.terminalDistance,this.segments=e.segments,this.length=e.length,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.unscaledWidth=e.unscaledWidth},mxCellState.prototype.clone=function(){var e=new mxCellState(this.view,this.cell,this.style);if(null!=this.absolutePoints){e.absolutePoints=[];for(var t=0;t<this.absolutePoints.length;t++)e.absolutePoints[t]=this.absolutePoints[t].clone()}return null!=this.origin&&(e.origin=this.origin.clone()),null!=this.absoluteOffset&&(e.absoluteOffset=this.absoluteOffset.clone()),null!=this.boundingBox&&(e.boundingBox=this.boundingBox.clone()),e.terminalDistance=this.terminalDistance,e.segments=this.segments,e.length=this.length,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.unscaledWidth=this.unscaledWidth,e},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(e){this.singleSelection=e},mxGraphSelectionModel.prototype.isSelected=function(e){return null!=e?0<=mxUtils.indexOf(this.cells,e):!1},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(e){null!=e&&this.setCells([e])},mxGraphSelectionModel.prototype.setCells=function(e){if(null!=e){this.singleSelection&&(e=[this.getFirstSelectableCell(e)]);for(var t=[],n=0;n<e.length;n++)this.graph.isCellSelectable(e[n])&&t.push(e[n]);this.changeSelection(t,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(e){if(null!=e)for(var t=0;t<e.length;t++)if(this.graph.isCellSelectable(e[t]))return e[t];return null},mxGraphSelectionModel.prototype.addCell=function(e){null!=e&&this.addCells([e])},mxGraphSelectionModel.prototype.addCells=function(e){if(null!=e){var t=null;this.singleSelection&&(t=this.cells,e=[this.getFirstSelectableCell(e)]);for(var n=[],r=0;r<e.length;r++)!this.isSelected(e[r])&&this.graph.isCellSelectable(e[r])&&n.push(e[r]);this.changeSelection(n,t)}},mxGraphSelectionModel.prototype.removeCell=function(e){null!=e&&this.removeCells([e])},mxGraphSelectionModel.prototype.removeCells=function(e){if(null!=e){for(var t=[],n=0;n<e.length;n++)this.isSelected(e[n])&&t.push(e[n]);this.changeSelection(null,t)}},mxGraphSelectionModel.prototype.changeSelection=function(e,t){if(null!=e&&0<e.length&&null!=e[0]||null!=t&&0<t.length&&null!=t[0]){var n=new mxSelectionChange(this,e,t);n.execute();var r=new mxUndoableEdit(this,!1);r.add(n),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",r))}},mxGraphSelectionModel.prototype.cellAdded=function(e){null==e||this.isSelected(e)||this.cells.push(e)},mxGraphSelectionModel.prototype.cellRemoved=function(e){null!=e&&(e=mxUtils.indexOf(this.cells,e),0<=e&&this.cells.splice(e,1))},mxSelectionChange.prototype.execute=function(){var e=mxLog.enter("mxSelectionChange.execute");window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource;if(null!=this.removed)for(var t=0;t<this.removed.length;t++)this.selectionModel.cellRemoved(this.removed[t]);if(null!=this.added)for(t=0;t<this.added.length;t++)this.selectionModel.cellAdded(this.added[t]);t=this.added,this.added=this.removed,this.removed=t,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",e),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode="",mxCellEditor.prototype.zIndex=5,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.wordWrapPadding=mxClient.IS_QUIRKS?2:mxClient.IS_IE11?0:1,mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position=this.isLegacyEditor()?"absolute":"relative",this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(e,t){this.graph.labelChanged(e.cell,t,this.trigger)},mxCellEditor.prototype.getInitialValue=function(e,t){var n=mxUtils.htmlEntities(this.graph.getEditingValue(e.cell,t),!1);return mxClient.IS_QUIRKS||8==document.documentMode||9==document.documentMode||10==document.documentMode||(n=mxUtils.replaceTrailingNewlines(n,"<div><br></div>")),n.replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(e){return mxUtils.extractTextWithWhitespace(this.textarea.childNodes)},mxCellEditor.prototype.isCancelEditingKeyEvent=function(e){return this.escapeCancelsEditing||mxEvent.isShiftDown(e)||mxEvent.isControlDown(e)||mxEvent.isMetaDown(e)},mxCellEditor.prototype.installListeners=function(e){mxEvent.addListener(e,"blur",mxUtils.bind(this,function(e){this.blurEnabled&&this.focusLost(e)})),mxEvent.addListener(e,"keydown",mxUtils.bind(this,function(e){mxEvent.isConsumed(e)||(this.isStopEditingEvent(e)?(this.graph.stopEditing(!1),mxEvent.consume(e)):27==e.keyCode&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(e)),mxEvent.consume(e)))}));var t=mxUtils.bind(this,function(t){null!=this.editingCell&&this.clearOnChange&&e.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=t.keyCode&&46!=t.keyCode)&&(this.clearOnChange=!1,e.innerHTML="")});mxEvent.addListener(e,"keypress",t),mxEvent.addListener(e,"paste",t),t=mxUtils.bind(this,function(e){null!=this.editingCell&&(0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length):this.clearOnChange=!1)}),mxEvent.addListener(e,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",t),mxEvent.addListener(e,"cut",t),mxEvent.addListener(e,"paste",t);var t=mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input",n=mxUtils.bind(this,function(e){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(e)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(e,t,n),9<=document.documentMode?(mxEvent.addListener(e,"DOMNodeRemoved",n),mxEvent.addListener(e,"DOMNodeInserted",n)):(mxEvent.addListener(e,"cut",n),mxEvent.addListener(e,"paste",n))},mxCellEditor.prototype.isStopEditingEvent=function(e){return 113==e.keyCode||this.graph.isEnterStopsCellEditing()&&13==e.keyCode&&!mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)},mxCellEditor.prototype.isEventSource=function(e){return mxEvent.getSource(e)==this.textarea},mxCellEditor.prototype.resize=function(){var e=this.graph.getView().getState(this.editingCell);if(null==e)this.stopEditing(!0);else if(null!=this.textarea){var t=this.graph.getModel().isEdge(e.cell),n=this.graph.getView().scale,r=null;if(this.autoSize&&"fill"!=e.style[mxConstants.STYLE_OVERFLOW]){var i=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null),r=null!=e.text?e.text.margin:null;null==r&&(r=mxUtils.getAlignmentAsPoint(mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE)));if(t)this.bounds=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y,0,0),null!=i&&(i=(parseFloat(i)+2)*n,this.bounds.width=i,this.bounds.x+=r.x*i);else{var t=mxRectangle.fromRectangle(e),s=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),o=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),t=null!=e.shape&&s==mxConstants.ALIGN_CENTER&&o==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(t):t;null!=i&&(t.width=parseFloat(i)*n);if(!e.view.graph.cellRenderer.legacySpacing||"width"!=e.style[mxConstants.STYLE_OVERFLOW])var s=parseInt(e.style[mxConstants.STYLE_SPACING]||2)*n,u=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*n+s,a=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*n+s,f=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*n+s,l=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*n+s,s=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),o=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),t=new mxRectangle(t.x+l,t.y+u,t.width-(s==mxConstants.ALIGN_CENTER&&null==i?l+a:0),t.height-(o==mxConstants.ALIGN_MIDDLE?u+f:0));this.bounds=new mxRectangle(t.x+e.absoluteOffset.x,t.y+e.absoluteOffset.y,t.width,t.height)}this.graph.isWrapping(e.cell)&&(2<=this.bounds.width||2<=this.bounds.height)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal",i=Math.round(this.bounds.width/n)+this.wordWrapPadding,"relative"!=this.textarea.style.position?(this.textarea.style.width=i+"px",this.textarea.scrollWidth>i&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):this.textarea.style.maxWidth=i+"px"):(this.textarea.style.whiteSpace="nowrap",this.textarea.style.width=""),8==document.documentMode&&(this.textarea.style.zoom="1",this.textarea.style.height="auto"),e=this.textarea.scrollWidth,i=this.textarea.scrollHeight,8==document.documentMode?(this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-r.x*(this.bounds.width-(e+1)*n)+e*(n-1)*0+2*(r.x+.5))/n))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-r.y*(this.bounds.height-(i+.5)*n)+i*(n-1)*0+1*Math.abs(r.y+.5))/n))+"px",this.textarea.style.width=Math.round(e*n)+"px",this.textarea.style.height=Math.round(i*n)+"px"):mxClient.IS_QUIRKS?(this.textarea.style.left=Math.max(0,Math.ceil(this.bounds.x-r.x*(this.bounds.width-(e+1)*n)+e*(n-1)*0+2*(r.x+.5)))+"px",this.textarea.style.top=Math.max(0,Math.ceil(this.bounds.y-r.y*(this.bounds.height-(i+.5)*n)+i*(n-1)*0+1*Math.abs(r.y+.5)))+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-r.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-r.y*(this.bounds.height-4)+(-1==r.y?3:0))+1)+"px")}else this.bounds=this.getEditorBounds(e),this.textarea.style.width=Math.round(this.bounds.width/n)+"px",this.textarea.style.height=Math.round(this.bounds.height/n)+"px",8==document.documentMode||mxClient.IS_QUIRKS?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(e.cell)&&(2<=this.bounds.width||2<=this.bounds.height)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/n)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""));mxClient.IS_VML?this.textarea.style.zoom=n:(mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+n+","+n+")"+(null==r?"":" translate("+100*r.x+"%,"+100*r.y+"%)")))}},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(e){return null},mxCellEditor.prototype.isLegacyEditor=function(){if(mxClient.IS_VML)return!0;var e=!1;if(mxClient.IS_SVG){var t=this.graph.view.getDrawPane().ownerSVGElement;null!=t&&(e="absolute"==mxUtils.getCurrentStyle(t).position)}return!e},mxCellEditor.prototype.startEditing=function(e,t){this.stopEditing(!0),null==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip();var n=this.graph.getView().getState(e);if(null!=n){this.graph.getView();var r=mxUtils.getValue(n.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),i=mxUtils.getValue(n.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),s=mxUtils.getValue(n.style,mxConstants.STYLE_FONTCOLOR,"black"),o=mxUtils.getValue(n.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),u=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,a=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,f=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(r*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(n),this.textarea.style.textDecoration=f?"underline":"",this.textarea.style.fontWeight=u?"bold":"normal",this.textarea.style.fontStyle=a?"italic":"",this.textarea.style.fontSize=Math.round(r)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=i,this.textarea.style.textAlign=o,this.textarea.style.outline="none",this.textarea.style.color=s,r=this.textDirection=mxUtils.getValue(n.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),r==mxConstants.TEXT_DIRECTION_AUTO&&(null==n||null==n.text||n.text.dialect==mxConstants.DIALECT_STRICTHTML||mxUtils.isNode(n.text.value)||(r=n.text.getAutoDirection())),r==mxConstants.TEXT_DIRECTION_LTR||r==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",r):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(n,t)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=e,this.trigger=t,this.textNode=null,null!=n.text&&this.isHideLabel(n)&&(this.textNode=n.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(n.cell)||"fill"!=n.style[mxConstants.STYLE_OVERFLOW])&&window.setTimeout(mxUtils.bind(this,function(){this.resize()}),0),this.resize();try{this.textarea.focus(),this.isSelectText()&&0<this.textarea.innerHTML.length&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch(l){}}},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.clearSelection=function(){var e=null;window.getSelection?e=window.getSelection():document.selection&&(e=document.selection),null!=e&&(e.empty?e.empty():e.removeAllRanges&&e.removeAllRanges())},mxCellEditor.prototype.stopEditing=function(e){if(null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null),e=e?null:this.graph.view.getState(this.editingCell);var t=this.initialValue;this.bounds=this.trigger=this.editingCell=this.initialValue=null,this.textarea.blur(),this.clearSelection(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),null!=e&&this.textarea.innerHTML!=t&&(this.prepareTextarea(),t=this.getCurrentValue(e),null!=t&&this.applyValue(e,t)),mxEvent.release(this.textarea),this.textarea=null}},mxCellEditor.prototype.prepareTextarea=function(){mxClient.IS_FF&&null!=this.textarea.lastChild&&"BR"==this.textarea.lastChild.nodeName&&this.textarea.removeChild(this.textarea.lastChild)},mxCellEditor.prototype.isHideLabel=function(e){return!0},mxCellEditor.prototype.getMinimumSize=function(e){var t=this.graph.getView().scale;return new mxRectangle(0,0,null==e.text?30:e.text.size*t+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEditorBounds=function(e){var t=this.graph.getModel().isEdge(e.cell),n=this.graph.getView().scale,r=this.getMinimumSize(e),i=r.width,r=r.height;if(!t&&e.view.graph.cellRenderer.legacySpacing&&"fill"==e.style[mxConstants.STYLE_OVERFLOW])n=e.shape.getLabelBounds(mxRectangle.fromRectangle(e));else{var s=parseInt(e.style[mxConstants.STYLE_SPACING]||0)*n,o=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*n+s,u=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*n+s,a=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*n+s,s=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*n+s,n=new mxRectangle(e.x,e.y,Math.max(i,e.width-s-u),Math.max(r,e.height-o-a)),u=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),a=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),n=null!=e.shape&&u==mxConstants.ALIGN_CENTER&&a==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(n):n;t?(n.x=e.absoluteOffset.x,n.y=e.absoluteOffset.y,null!=e.text&&null!=e.text.boundingBox&&(0<e.text.boundingBox.x&&(n.x=e.text.boundingBox.x),0<e.text.boundingBox.y&&(n.y=e.text.boundingBox.y))):null!=e.text&&null!=e.text.boundingBox&&(n.x=Math.min(n.x,e.text.boundingBox.x),n.y=Math.min(n.y,e.text.boundingBox.y)),n.x+=s,n.y+=o,null!=e.text&&null!=e.text.boundingBox&&(t?(n.width=Math.max(i,e.text.boundingBox.width),n.height=Math.max(r,e.text.boundingBox.height)):(n.width=Math.max(n.width,e.text.boundingBox.width),n.height=Math.max(n.height,e.text.boundingBox.height))),this.graph.getModel().isVertex(e.cell)&&(t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),t==mxConstants.ALIGN_LEFT?n.x-=e.width:t==mxConstants.ALIGN_RIGHT&&(n.x+=e.width),t=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),t==mxConstants.ALIGN_TOP?n.y-=e.height:t==mxConstants.ALIGN_BOTTOM&&(n.y+=e.height))}return new mxRectangle(Math.round(n.x),Math.round(n.y),Math.round(n.width),Math.round(n.height))},mxCellEditor.prototype.getEmptyLabelText=function(e){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)},mxCellRenderer.defaultShapes={},mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.minSvgStrokeWidth=1,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(e,t){mxCellRenderer.defaultShapes[e]=t},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(e){e.shape.dialect=e.view.graph.dialect,this.configureShape(e),e.shape.init(e.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(e){var t=null;return null!=e.style&&(t=mxStencilRegistry.getStencil(e.style[mxConstants.STYLE_SHAPE]),t=null!=t?new mxShape(t):new(this.getShapeConstructor(e))),t},mxCellRenderer.prototype.createIndicatorShape=function(e){e.shape.indicatorShape=this.getShape(e.view.graph.getIndicatorShape(e))},mxCellRenderer.prototype.getShape=function(e){return null!=e?mxCellRenderer.defaultShapes[e]:null},mxCellRenderer.prototype.getShapeConstructor=function(e){var t=this.getShape(e.style[mxConstants.STYLE_SHAPE]);return null==t&&(t=e.view.graph.getModel().isEdge(e.cell)?this.defaultEdgeShape:this.defaultVertexShape),t},mxCellRenderer.prototype.configureShape=function(e){e.shape.apply(e),e.shape.image=e.view.graph.getImage(e),e.shape.indicatorColor=e.view.graph.getIndicatorColor(e),e.shape.indicatorStrokeColor=e.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],e.shape.indicatorGradientColor=e.view.graph.getIndicatorGradientColor(e),e.shape.indicatorDirection=e.style[mxConstants.STYLE_INDICATOR_DIRECTION],e.shape.indicatorImage=e.view.graph.getIndicatorImage(e),this.postConfigureShape(e)},mxCellRenderer.prototype.postConfigureShape=function(e){null!=e.shape&&(this.resolveColor(e,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(e,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(e,"fill",mxConstants.STYLE_FILLCOLOR),this.resolveColor(e,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(e,"gradient",mxConstants.STYLE_GRADIENTCOLOR))},mxCellRenderer.prototype.checkPlaceholderStyles=function(e){if(null!=e.style)for(var t=["inherit","swimlane","indicated"],n=[mxConstants.STYLE_FILLCOLOR,mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_GRADIENTCOLOR],r=0;r<n.length;r++)if(0<=mxUtils.indexOf(t,e.style[n[r]]))return!0;return!1},mxCellRenderer.prototype.resolveColor=function(e,t,n){var r=e.shape[t],i=e.view.graph,s=null;"inherit"==r?s=i.model.getParent(e.cell):"swimlane"==r?(e.shape[t]=n==mxConstants.STYLE_STROKECOLOR?"#000000":"#ffffff",s=null!=i.model.getTerminal(e.cell,!1)?i.model.getTerminal(e.cell,!1):e.cell,s=i.getSwimlane(s),n=i.swimlaneIndicatorColorAttribute):"indicated"==r&&(e.shape[t]=e.shape.indicatorColor),null!=s&&(r=i.getView().getState(s),e.shape[t]=null,null!=r&&(e.shape[t]=null!=r.shape&&"indicatorColor"!=t?r.shape[t]:r.style[n]))},mxCellRenderer.prototype.getLabelValue=function(e){return e.view.graph.getLabel(e.cell)},mxCellRenderer.prototype.createLabel=function(e,t){var n=e.view.graph;n.getModel().isEdge(e.cell);if(0<e.style[mxConstants.STYLE_FONTSIZE]||null==e.style[mxConstants.STYLE_FONTSIZE]){var r=n.isHtmlLabel(e.cell)||null!=t&&mxUtils.isNode(t);e.text=new this.defaultTextShape(t,new mxRectangle,e.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,n.getVerticalAlign(e),e.style[mxConstants.STYLE_FONTCOLOR],e.style[mxConstants.STYLE_FONTFAMILY],e.style[mxConstants.STYLE_FONTSIZE],e.style[mxConstants.STYLE_FONTSTYLE],e.style[mxConstants.STYLE_SPACING],e.style[mxConstants.STYLE_SPACING_TOP],e.style[mxConstants.STYLE_SPACING_RIGHT],e.style[mxConstants.STYLE_SPACING_BOTTOM],e.style[mxConstants.STYLE_SPACING_LEFT],e.style[mxConstants.STYLE_HORIZONTAL],e.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],e.style[mxConstants.STYLE_LABEL_BORDERCOLOR],n.isWrapping(e.cell)&&n.isHtmlLabel(e.cell),n.isLabelClipped(e.cell),e.style[mxConstants.STYLE_OVERFLOW],e.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),e.text.opacity=mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_OPACITY,100),e.text.dialect=r?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,e.text.style=e.style,e.text.state=e,this.initializeLabel(e,e.text);var i=!1,s=function(t){var r=e;if(mxClient.IS_TOUCH||i)r=mxEvent.getClientX(t),t=mxEvent.getClientY(t),t=mxUtils.convertPoint(n.container,r,t),r=n.view.getState(n.getCellAt(t.x,t.y));return r};mxEvent.addGestureListeners(e.text.node,mxUtils.bind(this,function(t){this.isLabelEvent(e,t)&&(n.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,e)),i=n.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(t).nodeName)}),mxUtils.bind(this,function(t){this.isLabelEvent(e,t)&&n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,s(t)))}),mxUtils.bind(this,function(t){this.isLabelEvent(e,t)&&(n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,s(t))),i=!1)})),n.nativeDblClickEnabled&&mxEvent.addListener(e.text.node,"dblclick",mxUtils.bind(this,function(t){this.isLabelEvent(e,t)&&(n.dblClick(t,e.cell),mxEvent.consume(t))}))}},mxCellRenderer.prototype.initializeLabel=function(e,t){mxClient.IS_SVG&&mxClient.NO_FO&&t.dialect!=mxConstants.DIALECT_SVG?t.init(e.view.graph.container):t.init(e.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(e){var t=e.view.graph.getCellOverlays(e.cell),n=null;if(null!=t)for(var n=new mxDictionary,r=0;r<t.length;r++){var i=null!=e.overlays?e.overlays.remove(t[r]):null;null==i&&(i=new mxImageShape(new mxRectangle,t[r].image.src),i.dialect=e.view.graph.dialect,i.preserveImageAspect=!1,i.overlay=t[r],this.initializeOverlay(e,i),this.installCellOverlayListeners(e,t[r],i),null!=t[r].cursor&&(i.node.style.cursor=t[r].cursor)),n.put(t[r],i)}null!=e.overlays&&e.overlays.visit(function(e,t){t.destroy()}),e.overlays=n},mxCellRenderer.prototype.initializeOverlay=function(e,t){t.init(e.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(e,t,n){var r=e.view.graph;mxEvent.addListener(n.node,"click",function(n){r.isEditing()&&r.stopEditing(!r.isInvokesStopCellEditing()),t.fireEvent(new mxEventObject(mxEvent.CLICK,"event",n,"cell",e.cell))}),mxEvent.addGestureListeners(n.node,function(e){mxEvent.consume(e)},function(t){r.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e))}),mxClient.IS_TOUCH&&mxEvent.addListener(n.node,"touchend",function(n){t.fireEvent(new mxEventObject(mxEvent.CLICK,"event",n,"cell",e.cell))})},mxCellRenderer.prototype.createControl=function(e){var t=e.view.graph,n=t.getFoldingImage(e);if(t.foldingEnabled&&null!=n){if(null==e.control){var r=new mxRectangle(0,0,n.width,n.height);e.control=new mxImageShape(r,n.src),e.control.preserveImageAspect=!1,e.control.dialect=t.dialect,this.initControl(e,e.control,!0,this.createControlClickHandler(e))}}else null!=e.control&&(e.control.destroy(),e.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(e){var t=e.view.graph;return mxUtils.bind(this,function(n){if(this.forceControlClickHandler||t.isEnabled()){var r=!t.isCellCollapsed(e.cell);t.foldCells(r,!1,[e.cell],null,n),mxEvent.consume(n)}})},mxCellRenderer.prototype.initControl=function(e,t,n,r){var i=e.view.graph;i.isHtmlLabel(e.cell)&&mxClient.NO_FO&&i.dialect==mxConstants.DIALECT_SVG?(t.dialect=mxConstants.DIALECT_PREFERHTML,t.init(i.container),t.node.style.zIndex=1):t.init(e.view.getOverlayPane()),t=t.innerNode||t.node,null==r||mxClient.IS_IOS||(i.isEnabled()&&(t.style.cursor="pointer"),mxEvent.addListener(t,"click",r));if(n){var s=null;mxEvent.addGestureListeners(t,function(t){s=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),i.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,e)),mxEvent.consume(t)},function(t){i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e))},function(t){i.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,e)),mxEvent.consume(t)}),null!=r&&mxClient.IS_IOS&&t.addEventListener("touchend",function(e){if(null!=s){var t=i.tolerance;Math.abs(s.x-mxEvent.getClientX(e))<t&&Math.abs(s.y-mxEvent.getClientY(e))<t&&(r.call(r,e),mxEvent.consume(e))}},!0)}return t},mxCellRenderer.prototype.isShapeEvent=function(e,t){return!0},mxCellRenderer.prototype.isLabelEvent=function(e,t){return!0},mxCellRenderer.prototype.installListeners=function(e){var t=e.view.graph,n=function(n){var r=e;if(t.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(n).nodeName||mxClient.IS_TOUCH)r=mxEvent.getClientX(n),n=mxEvent.getClientY(n),n=mxUtils.convertPoint(t.container,r,n),r=t.view.getState(t.getCellAt(n.x,n.y));return r};mxEvent.addGestureListeners(e.shape.node,mxUtils.bind(this,function(n){this.isShapeEvent(e,n)&&t.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(n,e))}),mxUtils.bind(this,function(r){this.isShapeEvent(e,r)&&t.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(r,n(r)))}),mxUtils.bind(this,function(r){this.isShapeEvent(e,r)&&t.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(r,n(r)))})),t.nativeDblClickEnabled&&mxEvent.addListener(e.shape.node,"dblclick",mxUtils.bind(this,function(n){this.isShapeEvent(e,n)&&(t.dblClick(n,e.cell),mxEvent.consume(n))}))},mxCellRenderer.prototype.redrawLabel=function(e,t){var n=e.view.graph,r=this.getLabelValue(e),i=n.isWrapping(e.cell),s=n.isLabelClipped(e.cell),o=e.view.graph.isHtmlLabel(e.cell)||null!=r&&mxUtils.isNode(r)?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,u=e.style[mxConstants.STYLE_OVERFLOW]||"visible";null==e.text||e.text.wrap==i&&e.text.clipped==s&&e.text.overflow==u&&e.text.dialect==o||(e.text.destroy(),e.text=null),null==e.text&&null!=r&&(mxUtils.isNode(r)||0<r.length)?this.createLabel(e,r):null==e.text||null!=r&&0!=r.length||(e.text.destroy(),e.text=null);if(null!=e.text){t&&(null!=e.text.lastValue&&this.isTextShapeInvalid(e,e.text)&&(e.text.lastValue=null),e.text.resetStyles(),e.text.apply(e),e.text.valign=n.getVerticalAlign(e));var n=this.getLabelBounds(e),a=this.getTextScale(e);if(t||e.text.value!=r||e.text.isWrapping!=i||e.text.overflow!=u||e.text.isClipping!=s||e.text.scale!=a||e.text.dialect!=o||!e.text.bounds.equals(n))0!=e.text.bounds.width&&null!=e.unscaledWidth&&0!=Math.round(e.text.bounds.width/e.text.scale*a-n.width)&&(e.unscaledWidth=null),e.text.dialect=o,e.text.value=r,e.text.bounds=n,e.text.scale=a,e.text.wrap=i,e.text.clipped=s,e.text.overflow=u,r=e.text.node.style.visibility,this.redrawLabelShape(e.text),e.text.node.style.visibility=r}},mxCellRenderer.prototype.isTextShapeInvalid=function(e,t){function n(n,r,i){return result="spacingTop"==r||"spacingRight"==r||"spacingBottom"==r||"spacingLeft"==r?parseFloat(t[n])-parseFloat(t.spacing)!=(e.style[r]||i):t[n]!=(e.style[r]||i)}return n("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||n("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||n("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||n("color",mxConstants.STYLE_FONTCOLOR,"black")||n("align",mxConstants.STYLE_ALIGN,"")||n("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||n("spacing",mxConstants.STYLE_SPACING,2)||n("spacingTop",mxConstants.STYLE_SPACING_TOP,0)||n("spacingRight",mxConstants.STYLE_SPACING_RIGHT,0)||n("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,0)||n("spacingLeft",mxConstants.STYLE_SPACING_LEFT,0)||n("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||n("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||n("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||n("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||n("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(e){e.redraw()},mxCellRenderer.prototype.getTextScale=function(e){return e.view.scale},mxCellRenderer.prototype.getLabelBounds=function(e){var t=e.view.graph,n=e.view.scale,r=t.getModel().isEdge(e.cell),i=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y);if(r){var s=e.text.getSpacing();i.x+=s.x*n,i.y+=s.y*n,t=t.getCellGeometry(e.cell),null!=t&&(i.width=Math.max(0,t.width*n),i.height=Math.max(0,t.height*n))}else e.text.isPaintBoundsInverted()&&(t=i.x,i.x=i.y,i.y=t),i.x+=e.x,i.y+=e.y,i.width=Math.max(1,e.width),i.height=Math.max(1,e.height),t=mxUtils.getValue(e.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),t!=mxConstants.NONE&&""!=t&&(s=parseFloat(mxUtils.getValue(e.style,mxConstants.STYLE_STROKEWIDTH,1))*n,t=1+Math.floor((s-1)/2),s=Math.floor(s+1),i.x+=t,i.y+=t,i.width-=s,i.height-=s);return e.text.isPaintBoundsInverted()&&(t=(e.width-e.height)/2,i.x+=t,i.y-=t,t=i.width,i.width=i.height,i.height=t),null!=e.shape&&(t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),s=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),t==mxConstants.ALIGN_CENTER&&s==mxConstants.ALIGN_MIDDLE&&(i=e.shape.getLabelBounds(i))),t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null),null!=t&&(i.width=parseFloat(t)*n),r||this.rotateLabelBounds(e,i),i},mxCellRenderer.prototype.rotateLabelBounds=function(e,t){t.y-=e.text.margin.y*t.height,t.x-=e.text.margin.x*t.width;if(!this.legacySpacing||"fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&"width"!=e.style[mxConstants.STYLE_OVERFLOW]){var n=e.view.scale,r=e.text.getSpacing();t.x+=r.x*n,t.y+=r.y*n;var r=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),i=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),s=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);t.width=Math.max(0,t.width-(r==mxConstants.ALIGN_CENTER&&null==s?e.text.spacingLeft*n+e.text.spacingRight*n:0)),t.height=Math.max(0,t.height-(i==mxConstants.ALIGN_MIDDLE?e.text.spacingTop*n+e.text.spacingBottom*n:0))}i=e.text.getTextRotation(),0!=i&&null!=e&&e.view.graph.model.isVertex(e.cell)&&(n=e.getCenterX(),r=e.getCenterY(),t.x!=n||t.y!=r)&&(i*=Math.PI/180,pt=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(i),Math.sin(i),new mxPoint(n,r)),t.x=pt.x,t.y=pt.y)},mxCellRenderer.prototype.redrawCellOverlays=function(e,t){this.createCellOverlays(e);if(null!=e.overlays){var n=mxUtils.mod(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),90),r=mxUtils.toRadians(n),i=Math.cos(r),s=Math.sin(r);e.overlays.visit(function(r,o){var u=o.overlay.getBounds(e);if(!e.view.graph.getModel().isEdge(e.cell)&&null!=e.shape&&0!=n){var l=u.getCenterX(),h=u.getCenterY(),h=mxUtils.getRotatedPoint(new mxPoint(l,h),i,s,new mxPoint(e.getCenterX(),e.getCenterY())),l=h.x,h=h.y;u.x=Math.round(l-u.width/2),u.y=Math.round(h-u.height/2)}if(t||null==o.bounds||o.scale!=e.view.scale||!o.bounds.equals(u))o.bounds=u,o.scale=e.view.scale,o.redraw()})}},mxCellRenderer.prototype.redrawControl=function(e,t){var n=e.view.graph.getFoldingImage(e);if(null!=e.control&&null!=n){var n=this.getControlBounds(e,n.width,n.height),r=this.legacyControlPosition?mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0):e.shape.getTextRotation(),i=e.view.scale;if(t||e.control.scale!=i||!e.control.bounds.equals(n)||e.control.rotation!=r)e.control.rotation=r,e.control.bounds=n,e.control.scale=i,e.control.redraw()}},mxCellRenderer.prototype.getControlBounds=function(e,t,n){if(null!=e.control){var r=e.view.scale,i=e.getCenterX(),s=e.getCenterY();if(!e.view.graph.getModel().isEdge(e.cell)&&(i=e.x+t*r,s=e.y+n*r,null!=e.shape)){var o=e.shape.getShapeRotation();if(this.legacyControlPosition)o=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0);else if(e.shape.isPaintBoundsInverted())var u=(e.width-e.height)/2,i=i+u,s=s-u;0!=o&&(u=mxUtils.toRadians(o),o=Math.cos(u),u=Math.sin(u),s=mxUtils.getRotatedPoint(new mxPoint(i,s),o,u,new mxPoint(e.getCenterX(),e.getCenterY())),i=s.x,s=s.y)}return e.view.graph.getModel().isEdge(e.cell),new mxRectangle(Math.round(i-t/2*r),Math.round(s-n/2*r),Math.round(t*r),Math.round(n*r))}return null},mxCellRenderer.prototype.insertStateAfter=function(e,t,n){for(var r=this.getShapesForState(e),i=0;i<r.length;i++)if(null!=r[i]&&null!=r[i].node){var s=r[i].node.parentNode!=e.view.getDrawPane()&&r[i].node.parentNode!=e.view.getOverlayPane(),o=s?n:t;if(null!=o&&o.nextSibling!=r[i].node)null==o.nextSibling?o.parentNode.appendChild(r[i].node):o.parentNode.insertBefore(r[i].node,o.nextSibling);else if(null==o)if(r[i].node.parentNode==e.view.graph.container){for(o=e.view.canvas;null!=o&&o.parentNode!=e.view.graph.container;)o=o.parentNode;null!=o&&null!=o.nextSibling?o.nextSibling!=r[i].node&&r[i].node.parentNode.insertBefore(r[i].node,o.nextSibling):r[i].node.parentNode.appendChild(r[i].node)}else null!=r[i].node.parentNode.firstChild&&r[i].node.parentNode.firstChild!=r[i].node&&r[i].node.parentNode.insertBefore(r[i].node,r[i].node.parentNode.firstChild);s?n=r[i].node:t=r[i].node}return[t,n]},mxCellRenderer.prototype.getShapesForState=function(e){return[e.shape,e.text,e.control]},mxCellRenderer.prototype.redraw=function(e,t,n){t=this.redrawShape(e,t,n),null==e.shape||null!=n&&!n||(this.redrawLabel(e,t),this.redrawCellOverlays(e,t),this.redrawControl(e,t))},mxCellRenderer.prototype.redrawShape=function(e,t,n){var r=e.view.graph.model,i=!1;return null!=e.shape&&null!=e.shape.style&&null!=e.style&&e.shape.style[mxConstants.STYLE_SHAPE]!=e.style[mxConstants.STYLE_SHAPE]&&(e.shape.destroy(),e.shape=null),null==e.shape&&null!=e.view.graph.container&&e.cell!=e.view.currentRoot&&(r.isVertex(e.cell)||r.isEdge(e.cell))?(e.shape=this.createShape(e),null!=e.shape&&(e.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,e.shape.antiAlias=this.antiAlias,this.createIndicatorShape(e),this.initializeShape(e),this.createCellOverlays(e),this.installListeners(e),e.view.graph.selectionCellsHandler.updateHandler(e))):t||null==e.shape||mxUtils.equalEntries(e.shape.style,e.style)&&!this.checkPlaceholderStyles(e)||(e.shape.resetStyles(),this.configureShape(e),e.view.graph.selectionCellsHandler.updateHandler(e),t=!0),null!=e.shape&&(this.createControl(e),t||this.isShapeInvalid(e,e.shape))&&(null!=e.absolutePoints?(e.shape.points=e.absolutePoints.slice(),e.shape.bounds=null):(e.shape.points=null,e.shape.bounds=new mxRectangle(e.x,e.y,e.width,e.height)),e.shape.scale=e.view.scale,null==n||n?this.doRedrawShape(e):e.shape.updateBoundingBox(),i=!0),i},mxCellRenderer.prototype.doRedrawShape=function(e){e.shape.redraw()},mxCellRenderer.prototype.isShapeInvalid=function(e,t){return null==t.bounds||t.scale!=e.view.scale||null==e.absolutePoints&&!t.bounds.equals(e)||null!=e.absolutePoints&&!mxUtils.equalPoints(t.points,e.absolutePoints)},mxCellRenderer.prototype.destroy=function(e){null!=e.shape&&(null!=e.text&&(e.text.destroy(),e.text=null),null!=e.overlays&&(e.overlays.visit(function(e,t){t.destroy()}),e.overlays=null),null!=e.control&&(e.control.destroy(),e.control=null),e.shape.destroy(),e.shape=null)};var mxEdgeStyle={EntityRelation:function(e,t,n,r,i){var s=e.view,o=s.graph;r=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*s.scale;var u=e.absolutePoints,a=u[0],f=u[u.length-1],u=!1;if(null!=a)t=new mxCellState,t.x=a.x,t.y=a.y;else{if(null==t)return;var l=mxUtils.getPortConstraints(t,e,!0,mxConstants.DIRECTION_MASK_NONE);l!=mxConstants.DIRECTION_MASK_NONE&&l!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST?u=l==mxConstants.DIRECTION_MASK_WEST:(a=o.getCellGeometry(t.cell),a.relative?u=.5>=a.x:null!=n&&(u=n.x+n.width<t.x))}a=!0,null!=f?(n=new mxCellState,n.x=f.x,n.y=f.y):null!=n&&(l=mxUtils.getPortConstraints(n,e,!1,mxConstants.DIRECTION_MASK_NONE),l!=mxConstants.DIRECTION_MASK_NONE&&l!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST?a=l==mxConstants.DIRECTION_MASK_WEST:(e=o.getCellGeometry(n.cell),e.relative?a=.5>=e.x:null!=t&&(a=t.x+t.width<n.x))),null!=t&&null!=n&&(e=u?t.x:t.x+t.width,t=s.getRoutingCenterY(t),o=a?n.x:n.x+n.width,n=s.getRoutingCenterY(n),s=new mxPoint(e+(u?-r:r),t),f=new mxPoint(o+(a?-r:r),n),u==a?(r=u?Math.min(e,o)-r:Math.max(e,o)+r,i.push(new mxPoint(r,t)),i.push(new mxPoint(r,n))):(s.x<f.x==u?(r=t+(n-t)/2,i.push(s),i.push(new mxPoint(s.x,r)),i.push(new mxPoint(f.x,r))):i.push(s),i.push(f)))},Loop:function(e,t,n,r,i){n=e.absolutePoints;var s=n[n.length-1];if(null!=n[0]&&null!=s){if(null!=r&&0<r.length)for(t=0;t<r.length;t++)n=r[t],n=e.view.transformControlPoint(e,n),i.push(new mxPoint(n.x,n.y))}else if(null!=t){var s=e.view,o=s.graph;n=null!=r&&0<r.length?r[0]:null,null!=n&&(n=s.transformControlPoint(e,n),mxUtils.contains(t,n.x,n.y)&&(n=null));var u=r=0,a=0,f=0,o=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,o.gridSize)*s.scale;e=mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST),e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH?(r=s.getRoutingCenterX(t),u=o):(a=s.getRoutingCenterY(t),f=o),null==n||n.x<t.x||n.x>t.x+t.width?null!=n?(r=n.x,f=Math.max(Math.abs(a-n.y),f)):e==mxConstants.DIRECTION_NORTH?a=t.y-2*u:e==mxConstants.DIRECTION_SOUTH?a=t.y+t.height+2*u:r=e==mxConstants.DIRECTION_EAST?t.x-2*f:t.x+t.width+2*f:null!=n&&(r=s.getRoutingCenterX(t),u=Math.max(Math.abs(r-n.x),f),a=n.y,f=0),i.push(new mxPoint(r-u,a-f)),i.push(new mxPoint(r+u,a+f))}},ElbowConnector:function(e,t,n,r,i){var s=null!=r&&0<r.length?r[0]:null,o=!1,u=!1;if(null!=t&&null!=n)if(null!=s)var a=Math.min(t.x,n.x),f=Math.max(t.x+t.width,n.x+n.width),u=Math.min(t.y,n.y),l=Math.max(t.y+t.height,n.y+n.height),s=e.view.transformControlPoint(e,s),o=s.y<u||s.y>l,u=s.x<a||s.x>f;else a=Math.max(t.x,n.x),f=Math.min(t.x+t.width,n.x+n.width),(o=a==f)||(u=Math.max(t.y,n.y),l=Math.min(t.y+t.height,n.y+n.height),u=u==l);u||!o&&e.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(e,t,n,r,i):mxEdgeStyle.TopToBottom(e,t,n,r,i)},SideToSide:function(e,t,n,r,i){var s=e.view;r=null!=r&&0<r.length?r[0]:null;var o=e.absolutePoints,u=o[0],o=o[o.length-1];null!=r&&(r=s.transformControlPoint(e,r)),null!=u&&(t=new mxCellState,t.x=u.x,t.y=u.y),null!=o&&(n=new mxCellState,n.x=o.x,n.y=o.y),null!=t&&null!=n&&(e=Math.max(t.x,n.x),u=Math.min(t.x+t.width,n.x+n.width),e=null!=r?r.x:Math.round(u+(e-u)/2),u=s.getRoutingCenterY(t),s=s.getRoutingCenterY(n),null!=r&&(r.y>=t.y&&r.y<=t.y+t.height&&(u=r.y),r.y>=n.y&&r.y<=n.y+n.height&&(s=r.y)),mxUtils.contains(n,e,u)||mxUtils.contains(t,e,u)||i.push(new mxPoint(e,u)),mxUtils.contains(n,e,s)||mxUtils.contains(t,e,s)||i.push(new mxPoint(e,s)),1==i.length&&(null!=r?mxUtils.contains(n,e,r.y)||mxUtils.contains(t,e,r.y)||i.push(new mxPoint(e,r.y)):(s=Math.max(t.y,n.y),i.push(new mxPoint(e,s+(Math.min(t.y+t.height,n.y+n.height)-s)/2)))))},TopToBottom:function(e,t,n,r,i){var s=e.view;r=null!=r&&0<r.length?r[0]:null;var o=e.absolutePoints,u=o[0],o=o[o.length-1];null!=r&&(r=s.transformControlPoint(e,r)),null!=u&&(t=new mxCellState,t.x=u.x,t.y=u.y),null!=o&&(n=new mxCellState,n.x=o.x,n.y=o.y),null!=t&&null!=n&&(u=Math.max(t.y,n.y),o=Math.min(t.y+t.height,n.y+n.height),e=s.getRoutingCenterX(t),null!=r&&r.x>=t.x&&r.x<=t.x+t.width&&(e=r.x),u=null!=r?r.y:Math.round(o+(u-o)/2),mxUtils.contains(n,e,u)||mxUtils.contains(t,e,u)||i.push(new mxPoint(e,u)),e=null!=r&&r.x>=n.x&&r.x<=n.x+n.width?r.x:s.getRoutingCenterX(n),mxUtils.contains(n,e,u)||mxUtils.contains(t,e,u)||i.push(new mxPoint(e,u)),1==i.length&&(null!=r&&1==i.length?mxUtils.contains(n,r.x,u)||mxUtils.contains(t,r.x,u)||i.push(new mxPoint(r.x,u)):(s=Math.max(t.x,n.x),i.push(new mxPoint(s+(Math.min(t.x+t.width,n.x+n.width)-s)/2,u)))))},SegmentConnector:function(e,t,n,r,i){function s(e){if(null==a||Math.abs(a.x-e.x)>=u||Math.abs(a.y-e.y)>=u)i.push(e),a=e;return a}var o=e.absolutePoints,u=Math.max(1,e.view.scale),a=0<i.length?i[0]:null,f=!0,l=null,c=o[0];null==c&&null!=t?c=new mxPoint(e.view.getRoutingCenterX(t),e.view.getRoutingCenterY(t)):null!=c&&(c=c.clone()),c.x=Math.round(c.x),c.y=Math.round(c.y);var h=o.length-1;if(null!=r&&0<r.length){for(var l=[],p=0;p<r.length;p++){var d=e.view.transformControlPoint(e,r[p]);null!=d&&(d.x=Math.round(d.x),d.y=Math.round(d.y),l.push(d))}if(0==l.length)return;r=l,null!=c&&null!=r[0]&&(Math.abs(r[0].x-c.x)<u&&(r[0].x=c.x),Math.abs(r[0].y-c.y)<u&&(r[0].y=c.y)),d=o[h],null!=d&&null!=r[r.length-1]&&(Math.abs(r[r.length-1].x-d.x)<u&&(r[r.length-1].x=d.x),Math.abs(r[r.length-1].y-d.y)<u&&(r[r.length-1].y=d.y));var l=r[0],v=t,m=o[0],g=!1,y=!1,g=l;null!=m&&(m.x=Math.round(m.x),m.y=Math.round(m.y),v=null);for(p=0;2>p;p++){var b=null!=m&&m.x==g.x,w=null!=m&&m.y==g.y,E=null!=v&&g.y>=v.y&&g.y<=v.y+v.height,v=null!=v&&g.x>=v.x&&g.x<=v.x+v.width,g=w||null==m&&E,y=b||null==m&&v;if(0!=p||!(g&&y||b&&w)){if(null!=m&&!w&&!b&&(E||v)){f=E?!1:!0;break}if(y||g){f=g,1==p&&(f=0==r.length%2?g:y);break}}v=n,m=o[h],null!=m&&(m.x=Math.round(m.x),m.y=Math.round(m.y),v=null),g=r[r.length-1],b&&w&&(r=r.slice(1))}f&&(null!=o[0]&&o[0].y!=l.y||null==o[0]&&null!=t&&(l.y<t.y||l.y>t.y+t.height))?s(new mxPoint(c.x,l.y)):!f&&(null!=o[0]&&o[0].x!=l.x||null==o[0]&&null!=t&&(l.x<t.x||l.x>t.x+t.width))&&s(new mxPoint(l.x,c.y)),f?c.y=l.y:c.x=l.x;for(p=0;p<r.length;p++)f=!f,l=r[p],f?c.y=l.y:c.x=l.x,s(c.clone())}else l=c,f=!0;c=o[h],null==c&&null!=n&&(c=new mxPoint(e.view.getRoutingCenterX(n),e.view.getRoutingCenterY(n))),null!=c&&(c.x=Math.round(c.x),c.y=Math.round(c.y),null!=l&&(f&&(null!=o[h]&&o[h].y!=l.y||null==o[h]&&null!=n&&(l.y<n.y||l.y>n.y+n.height))?s(new mxPoint(c.x,l.y)):!f&&(null!=o[h]&&o[h].x!=l.x||null==o[h]&&null!=n&&(l.x<n.x||l.x>n.x+n.width))&&s(new mxPoint(l.x,c.y))));if(null==o[0]&&null!=t)for(;1<i.length&&null!=i[1]&&mxUtils.contains(t,i[1].x,i[1].y);)i.splice(1,1);if(null==o[h]&&null!=n)for(;1<i.length&&null!=i[i.length-1]&&mxUtils.contains(n,i[i.length-1].x,i[i.length-1].y);)i.splice(i.length-1,1);null!=d&&null!=i[i.length-1]&&Math.abs(d.x-i[i.length-1].x)<u&&Math.abs(d.y-i[i.length-1].y)<u&&(i.splice(i.length-1,1),null!=i[i.length-1]&&(Math.abs(i[i.length-1].x-d.x)<u&&(i[i.length-1].x=d.x),Math.abs(i[i.length-1].y-d.y)<u&&(i[i.length-1].y=d.y)))},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(e,t,n,r,i){return t=mxUtils.getValue(e.style,i?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(e.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer)),"auto"==t&&(mxUtils.getValue(e.style,i?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE?(e=mxUtils.getNumber(e.style,i?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),t=Math.max(2,Math.ceil((e+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer):t=2*mxEdgeStyle.orthBuffer),t},OrthConnector:function(e,t,n,r,i){var s=e.view.graph,o=null==t?!1:s.getModel().isEdge(t.cell),u=null==n?!1:s.getModel().isEdge(n.cell),s=e.absolutePoints,a=s[0],f=s[s.length-1],l=null!=t?t.x:a.x,c=null!=t?t.y:a.y,h=null!=t?t.width:0,p=null!=t?t.height:0,d=null!=n?n.x:f.x,v=null!=n?n.y:f.y,m=null!=n?n.width:0,g=null!=n?n.height:0,s=e.view.scale*mxEdgeStyle.getJettySize(e,t,n,r,!0),y=e.view.scale*mxEdgeStyle.getJettySize(e,t,n,r,!1);null!=t&&n==t&&(s=y=Math.max(s,y));var b=y+s,w=!1;if(null!=a&&null!=f)var w=f.x-a.x,E=f.y-a.y,w=w*w+E*E<b*b;if(w||mxEdgeStyle.orthPointsFallback&&null!=r&&0<r.length||o||u)mxEdgeStyle.SegmentConnector(e,t,n,r,i);else{r=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],null!=t&&(r[0]=mxUtils.getPortConstraints(t,e,!0,mxConstants.DIRECTION_MASK_ALL),w=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0),0!=w&&(w=mxUtils.getBoundingBox(new mxRectangle(l,c,h,p),w),l=w.x,c=w.y,h=w.width,p=w.height)),null!=n&&(r[1]=mxUtils.getPortConstraints(n,e,!1,mxConstants.DIRECTION_MASK_ALL),w=mxUtils.getValue(n.style,mxConstants.STYLE_ROTATION,0),0!=w&&(w=mxUtils.getBoundingBox(new mxRectangle(d,v,m,g),w),d=w.x,v=w.y,m=w.width,g=w.height)),l=Math.round(10*l)/10,c=Math.round(10*c)/10,h=Math.round(10*h)/10,p=Math.round(10*p)/10,d=Math.round(10*d)/10,v=Math.round(10*v)/10,m=Math.round(10*m)/10,g=Math.round(10*g)/10,e=[0,0],l=[[l,c,h,p],[d,v,m,g]],y=[s,y];for(w=0;2>w;w++)mxEdgeStyle.limits[w][1]=l[w][0]-y[w],mxEdgeStyle.limits[w][2]=l[w][1]-y[w],mxEdgeStyle.limits[w][4]=l[w][0]+l[w][2]+y[w],mxEdgeStyle.limits[w][8]=l[w][1]+l[w][3]+y[w];y=l[0][1]+l[0][3]/2,c=l[1][1]+l[1][3]/2,w=l[0][0]+l[0][2]/2-(l[1][0]+l[1][2]/2),E=y-c,y=0,0>w?y=0>E?2:1:0>=E&&(y=3,0==w&&(y=2)),c=null,null!=t&&(c=a),t=[[.5,.5],[.5,.5]];for(w=0;2>w;w++)null!=c&&(t[w][0]=(c.x-l[w][0])/l[w][2],1>=Math.abs(c.x-l[w][0])?e[w]=mxConstants.DIRECTION_MASK_WEST:1>=Math.abs(c.x-l[w][0]-l[w][2])&&(e[w]=mxConstants.DIRECTION_MASK_EAST),t[w][1]=(c.y-l[w][1])/l[w][3],1>=Math.abs(c.y-l[w][1])?e[w]=mxConstants.DIRECTION_MASK_NORTH:1>=Math.abs(c.y-l[w][1]-l[w][3])&&(e[w]=mxConstants.DIRECTION_MASK_SOUTH)),c=null,null!=n&&(c=f);w=l[0][1]-(l[1][1]+l[1][3]),f=l[0][0]-(l[1][0]+l[1][2]),c=l[1][1]-(l[0][1]+l[0][3]),h=l[1][0]-(l[0][0]+l[0][2]),mxEdgeStyle.vertexSeperations[1]=Math.max(f-b,0),mxEdgeStyle.vertexSeperations[2]=Math.max(w-b,0),mxEdgeStyle.vertexSeperations[4]=Math.max(c-b,0),mxEdgeStyle.vertexSeperations[3]=Math.max(h-b,0),b=[],n=[],a=[],n[0]=f>=h?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,a[0]=w>=c?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,n[1]=mxUtils.reversePortConstraints(n[0]),a[1]=mxUtils.reversePortConstraints(a[0]),f=f>=h?f:h,c=w>=c?w:c,h=[[0,0],[0,0]],p=!1;for(w=0;2>w;w++)0==e[w]&&(0==(n[w]&r[w])&&(n[w]=mxUtils.reversePortConstraints(n[w])),0==(a[w]&r[w])&&(a[w]=mxUtils.reversePortConstraints(a[w])),h[w][0]=a[w],h[w][1]=n[w]);0<c&&0<f&&(0<(n[0]&r[0])&&0<(a[1]&r[1])?(h[0][0]=n[0],h[0][1]=a[0],h[1][0]=a[1],h[1][1]=n[1],p=!0):0<(a[0]&r[0])&&0<(n[1]&r[1])&&(h[0][0]=a[0],h[0][1]=n[0],h[1][0]=n[1],h[1][1]=a[1],p=!0)),0<c&&!p&&(h[0][0]=a[0],h[0][1]=n[0],h[1][0]=a[1],h[1][1]=n[1],p=!0),0<f&&!p&&(h[0][0]=n[0],h[0][1]=a[0],h[1][0]=n[1],h[1][1]=a[1]);for(w=0;2>w;w++)0==e[w]&&(0==(h[w][0]&r[w])&&(h[w][0]=h[w][1]),b[w]=h[w][0]&r[w],b[w]|=(h[w][1]&r[w])<<8,b[w]|=(h[1-w][w]&r[w])<<16,b[w]|=(h[1-w][1-w]&r[w])<<24,0==(b[w]&15)&&(b[w]<<=8),0==(b[w]&3840)&&(b[w]=b[w]&15|b[w]>>8),0==(b[w]&983040)&&(b[w]=b[w]&65535|(b[w]&251658240)>>8),e[w]=b[w]&15,r[w]==mxConstants.DIRECTION_MASK_WEST||r[w]==mxConstants.DIRECTION_MASK_NORTH||r[w]==mxConstants.DIRECTION_MASK_EAST||r[w]==mxConstants.DIRECTION_MASK_SOUTH)&&(e[w]=r[w]);r=e[0]==mxConstants.DIRECTION_MASK_EAST?3:e[0],b=e[1]==mxConstants.DIRECTION_MASK_EAST?3:e[1],r-=y,b-=y,1>r&&(r+=4),1>b&&(b+=4),r=mxEdgeStyle.routePatterns[r-1][b-1],mxEdgeStyle.wayPoints1[0][0]=l[0][0],mxEdgeStyle.wayPoints1[0][1]=l[0][1];switch(e[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=s,mxEdgeStyle.wayPoints1[0][1]+=t[0][1]*l[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=t[0][0]*l[0][2],mxEdgeStyle.wayPoints1[0][1]+=l[0][3]+s;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=l[0][2]+s,mxEdgeStyle.wayPoints1[0][1]+=t[0][1]*l[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=t[0][0]*l[0][2],mxEdgeStyle.wayPoints1[0][1]-=s}s=0,n=b=0<(e[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1;for(w=0;w<r.length;w++)a=r[w]&15,p=a==mxConstants.DIRECTION_MASK_EAST?3:a,p+=y,4<p&&(p-=4),f=mxEdgeStyle.dirVectors[p-1],a=0<p%2?0:1,a!=b&&(s++,mxEdgeStyle.wayPoints1[s][0]=mxEdgeStyle.wayPoints1[s-1][0],mxEdgeStyle.wayPoints1[s][1]=mxEdgeStyle.wayPoints1[s-1][1]),d=0<(r[w]&mxEdgeStyle.TARGET_MASK),v=0<(r[w]&mxEdgeStyle.SOURCE_MASK),c=(r[w]&mxEdgeStyle.SIDE_MASK)>>5,c<<=y,15<c&&(c>>=4),h=0<(r[w]&mxEdgeStyle.CENTER_MASK),(v||d)&&9>c?(p=v?0:1,c=h&&0==a?l[p][0]+t[p][0]*l[p][2]:h?l[p][1]+t[p][1]*l[p][3]:mxEdgeStyle.limits[p][c],0==a?(c=(c-mxEdgeStyle.wayPoints1[s][0])*f[0],0<c&&(mxEdgeStyle.wayPoints1[s][0]+=f[0]*c)):(c=(c-mxEdgeStyle.wayPoints1[s][1])*f[1],0<c&&(mxEdgeStyle.wayPoints1[s][1]+=f[1]*c))):h&&(mxEdgeStyle.wayPoints1[s][0]+=f[0]*Math.abs(mxEdgeStyle.vertexSeperations[p]/2),mxEdgeStyle.wayPoints1[s][1]+=f[1]*Math.abs(mxEdgeStyle.vertexSeperations[p]/2)),0<s&&mxEdgeStyle.wayPoints1[s][a]==mxEdgeStyle.wayPoints1[s-1][a]?s--:b=a;for(w=0;w<=s&&(w!=s||((0<(e[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1)==n?0:1)==(s+1)%2);w++)i.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[w][0]),Math.round(mxEdgeStyle.wayPoints1[w][1])));for(e=1;e<i.length;)null==i[e-1]||null==i[e]||i[e-1].x!=i[e].x||i[e-1].y!=i[e].y?e++:i.splice(e,1)}},getRoutePattern:function(e,t,n,r){var i=e[0]==mxConstants.DIRECTION_MASK_EAST?3:e[0];return e=e[1]==mxConstants.DIRECTION_MASK_EAST?3:e[1],i-=t,e-=t,1>i&&(i+=4),1>e&&(e+=4),t=routePatterns[i-1][e-1],0!=n&&0!=r||null==inlineRoutePatterns[i-1][e-1]||(t=inlineRoutePatterns[i-1][e-1]),t}},mxStyleRegistry={values:[],putValue:function(e,t){mxStyleRegistry.values[e]=t},getValue:function(e){return mxStyleRegistry.values[e]},getName:function(e){for(var t in mxStyleRegistry.values)if(mxStyleRegistry.values[t]==e)return t;return null}};mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.optimizeVmlReflows=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.states=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(e){this.graphBounds=e},mxGraphView.prototype.getBounds=function(e){var t=null;if(null!=e&&0<e.length)for(var n=this.graph.getModel(),r=0;r<e.length;r++)if(n.isVertex(e[r])||n.isEdge(e[r])){var i=this.getState(e[r]);null!=i&&(null==t?t=mxRectangle.fromRectangle(i):t.add(i))}return t},mxGraphView.prototype.setCurrentRoot=function(e){if(this.currentRoot!=e){var t=new mxCurrentRootChange(this,e);t.execute();var n=new mxUndoableEdit(this,!0);n.add(t),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",n)),this.graph.sizeDidChange()}return e},mxGraphView.prototype.scaleAndTranslate=function(e,t,n){var r=this.scale,i=new mxPoint(this.translate.x,this.translate.y);if(this.scale!=e||this.translate.x!=t||this.translate.y!=n)this.scale=e,this.translate.x=t,this.translate.y=n,this.isEventsEnabled()&&this.viewStateChanged();this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",e,"previousScale",r,"translate",this.translate,"previousTranslate",i))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(e){var t=this.scale;this.scale!=e&&(this.scale=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",e,"previousScale",t))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(e,t){var n=new mxPoint(this.translate.x,this.translate.y);if(this.translate.x!=e||this.translate.y!=t)this.translate.x=e,this.translate.y=t,this.isEventsEnabled()&&this.viewStateChanged();this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",n))},mxGraphView.prototype.viewStateChanged=function(){this.revalidate(),this.graph.sizeDidChange()},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(e,t,n){var r=this.graph.getModel();e=e||r.getRoot(),t=null!=t?t:!1,n=null!=n?n:!0,this.removeState(e);if(n&&(t||e!=this.currentRoot)){n=r.getChildCount(e);for(var i=0;i<n;i++)this.clear(r.getChildAt(e,i),t)}else this.invalidate(e)},mxGraphView.prototype.invalidate=function(e,t,n){var r=this.graph.getModel();e=e||r.getRoot(),t=null!=t?t:!0,n=null!=n?n:!0;var i=this.getState(e);null!=i&&(i.invalid=!0);if(!e.invalidating){e.invalidating=!0;if(t)for(var s=r.getChildCount(e),i=0;i<s;i++){var o=r.getChildAt(e,i);this.invalidate(o,t,n)}if(n)for(s=r.getEdgeCount(e),i=0;i<s;i++)this.invalidate(r.getEdgeAt(e,i),t,n);delete e.invalidating}},mxGraphView.prototype.validate=function(e){var t=mxLog.enter("mxGraphView.validate");window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var n=null;this.optimizeVmlReflows&&null!=this.canvas&&null==this.textDiv&&(8==document.documentMode&&!mxClient.IS_EM||mxClient.IS_QUIRKS)&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),n=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv)),e=this.getBoundingBox(this.validateCellState(this.validateCell(e||(null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot())))),this.setGraphBounds(null!=e?e:this.getEmptyBounds()),this.validateBackground(),null!=n&&(this.canvas.style.display=n,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",t)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.getBoundingBox=function(e,t){t=null!=t?t:!0;var n=null;if(null!=e&&(null!=e.shape&&null!=e.shape.boundingBox&&(n=e.shape.boundingBox.clone()),null!=e.text&&null!=e.text.boundingBox&&(null!=n?n.add(e.text.boundingBox):n=e.text.boundingBox.clone()),t))for(var r=this.graph.getModel(),i=r.getChildCount(e.cell),s=0;s<i;s++){var o=this.getBoundingBox(this.getState(r.getChildAt(e.cell,s)));null!=o&&(null==n?n=o:n.add(o))}return n},mxGraphView.prototype.createBackgroundPageShape=function(e){return new mxRectangleShape(e,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var e=this.graph.getBackgroundImage();if(null!=e){if(null==this.backgroundImage||this.backgroundImage.image!=e.src){null!=this.backgroundImage&&this.backgroundImage.destroy();var t=new mxRectangle(0,0,1,1);this.backgroundImage=new mxImageShape(t,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),8!=document.documentMode||mxClient.IS_EM||mxEvent.addGestureListeners(this.backgroundImage.node,mxUtils.bind(this,function(e){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e))}),mxUtils.bind(this,function(e){this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e))}),mxUtils.bind(this,function(e){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e))}))}this.redrawBackgroundImage(this.backgroundImage,e)}else null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){if(this.graph.pageVisible){var e=this.getBackgroundPageBounds();null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(e),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(e){this.graph.dblClick(e)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(e){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e))}),mxUtils.bind(this,function(e){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(e)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e))}),mxUtils.bind(this,function(e){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=e,this.backgroundPageShape.redraw())}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.graph.pageFormat,t=this.scale*this.graph.pageScale;return new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,e.width*t,e.height*t)},mxGraphView.prototype.redrawBackgroundImage=function(e,t){e.scale=this.scale,e.bounds.x=this.scale*this.translate.x,e.bounds.y=this.scale*this.translate.y,e.bounds.width=this.scale*t.width,e.bounds.height=this.scale*t.height,e.redraw()},mxGraphView.prototype.validateCell=function(e,t){if(null!=e)if(t=(null!=t?t:!0)&&this.graph.isCellVisible(e),null==this.getState(e,t)||t)for(var n=this.graph.getModel(),r=n.getChildCount(e),i=0;i<r;i++)this.validateCell(n.getChildAt(e,i),t&&(!this.isCellCollapsed(e)||e==this.currentRoot));else this.removeState(e);return e},mxGraphView.prototype.validateCellState=function(e,t){t=null!=t?t:!0;var n=null;if(null!=e&&(n=this.getState(e),null!=n)){var r=this.graph.getModel();n.invalid&&(n.invalid=!1,null==n.style&&(n.style=this.graph.getCellStyle(n.cell)),e!=this.currentRoot&&this.validateCellState(r.getParent(e),!1),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!0),!1),!0),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!1),!1),!1),this.updateCellState(n),e==this.currentRoot||n.invalid||(this.graph.cellRenderer.redraw(n,!1,this.isRendering()),n.updateCachedBounds()));if(t&&!n.invalid){null!=n.shape&&this.stateValidated(n);for(var i=r.getChildCount(e),s=0;s<i;s++)this.validateCellState(r.getChildAt(e,s))}}return n},mxGraphView.prototype.updateCellState=function(e){e.absoluteOffset.x=0,e.absoluteOffset.y=0,e.origin.x=0,e.origin.y=0,e.length=0;if(e.cell!=this.currentRoot){var t=this.graph.getModel(),n=this.getState(t.getParent(e.cell));null!=n&&n.cell!=this.currentRoot&&(e.origin.x+=n.origin.x,e.origin.y+=n.origin.y);var r=this.graph.getChildOffsetForCell(e.cell);null!=r&&(e.origin.x+=r.x,e.origin.y+=r.y);var i=this.graph.getCellGeometry(e.cell);null!=i&&(t.isEdge(e.cell)||(r=i.offset||this.EMPTY_POINT,i.relative&&null!=n?t.isEdge(n.cell)?(r=this.getPoint(n,i),null!=r&&(e.origin.x+=r.x/this.scale-n.origin.x-this.translate.x,e.origin.y+=r.y/this.scale-n.origin.y-this.translate.y)):(e.origin.x+=i.x*n.width/this.scale+r.x,e.origin.y+=i.y*n.height/this.scale+r.y):(e.absoluteOffset.x=this.scale*r.x,e.absoluteOffset.y=this.scale*r.y,e.origin.x+=i.x,e.origin.y+=i.y)),e.x=this.scale*(this.translate.x+e.origin.x),e.y=this.scale*(this.translate.y+e.origin.y),e.width=this.scale*i.width,e.unscaledWidth=i.width,e.height=this.scale*i.height,t.isVertex(e.cell)&&this.updateVertexState(e,i),t.isEdge(e.cell)&&this.updateEdgeState(e,i))}e.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(e){return this.graph.isCellCollapsed(e)},mxGraphView.prototype.updateVertexState=function(e,t){var n=this.graph.getModel(),r=this.getState(n.getParent(e.cell));if(t.relative&&null!=r&&!n.isEdge(r.cell)){var i=mxUtils.toRadians(r.style[mxConstants.STYLE_ROTATION]||"0");if(0!=i){var n=Math.cos(i),i=Math.sin(i),s=new mxPoint(e.getCenterX(),e.getCenterY()),r=new mxPoint(r.getCenterX(),r.getCenterY()),r=mxUtils.getRotatedPoint(s,n,i,r);e.x=r.x-e.width/2,e.y=r.y-e.height/2}}this.updateVertexLabelOffset(e)},mxGraphView.prototype.updateEdgeState=function(e,t){var n=e.getVisibleTerminalState(!0),r=e.getVisibleTerminalState(!1);null!=this.graph.model.getTerminal(e.cell,!0)&&null==n||null==n&&null==t.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(e.cell,!1)&&null==r||null==r&&null==t.getTerminalPoint(!1)?this.clear(e.cell,!0):(this.updateFixedTerminalPoints(e,n,r),this.updatePoints(e,t.points,n,r),this.updateFloatingTerminalPoints(e,n,r),n=e.absolutePoints,e.cell!=this.currentRoot&&(null==n||2>n.length||null==n[0]||null==n[n.length-1])?this.clear(e.cell,!0):(this.updateEdgeBounds(e),this.updateEdgeLabelOffset(e)))},mxGraphView.prototype.updateVertexLabelOffset=function(e){var t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);if(t==mxConstants.ALIGN_LEFT)t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null),t=null!=t?t*this.scale:e.width,e.absoluteOffset.x-=t;else if(t==mxConstants.ALIGN_RIGHT)e.absoluteOffset.x+=e.width;else if(t==mxConstants.ALIGN_CENTER&&(t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null),null!=t)){var n=mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),r=0;n==mxConstants.ALIGN_CENTER?r=.5:n==mxConstants.ALIGN_RIGHT&&(r=1),0!=r&&(e.absoluteOffset.x-=(t*this.scale-e.width)*r)}t=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),t==mxConstants.ALIGN_TOP?e.absoluteOffset.y-=e.height:t==mxConstants.ALIGN_BOTTOM&&(e.absoluteOffset.y+=e.height)},mxGraphView.prototype.resetValidationState=function(){this.lastForegroundHtmlNode=this.lastForegroundNode=this.lastHtmlNode=this.lastNode=null},mxGraphView.prototype.stateValidated=function(e){var t=this.graph.getModel().isEdge(e.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(e.cell)&&this.graph.keepEdgesInBackground;e=this.graph.cellRenderer.insertStateAfter(e,t?this.lastForegroundNode||this.lastNode:this.lastNode,t?this.lastForegroundHtmlNode||this.lastHtmlNode:this.lastHtmlNode),t?(this.lastForegroundHtmlNode=e[1],this.lastForegroundNode=e[0]):(this.lastHtmlNode=e[1],this.lastNode=e[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(e,t,n){this.updateFixedTerminalPoint(e,t,!0,this.graph.getConnectionConstraint(e,t,!0)),this.updateFixedTerminalPoint(e,n,!1,this.graph.getConnectionConstraint(e,n,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(e,t,n,r){e.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(e,t,n,r),n)},mxGraphView.prototype.getFixedTerminalPoint=function(e,t,n,r){var i=null;null!=r&&(i=this.graph.getConnectionPoint(t,r));if(null==i&&null==t){t=this.scale,r=this.translate;var s=e.origin,i=this.graph.getCellGeometry(e.cell).getTerminalPoint(n);null!=i&&(i=new mxPoint(t*(r.x+i.x+s.x),t*(r.y+i.y+s.y)))}return i},mxGraphView.prototype.updateBoundsFromStencil=function(e){var t=null;if(null!=e&&null!=e.shape&&null!=e.shape.stencil&&"fixed"==e.shape.stencil.aspect){var t=mxRectangle.fromRectangle(e),n=e.shape.stencil.computeAspect(e.style,e.x,e.y,e.width,e.height);e.setRect(n.x,n.y,e.shape.stencil.w0*n.width,e.shape.stencil.h0*n.height)}return t},mxGraphView.prototype.updatePoints=function(e,t,n,r){if(null!=e){var i=[];i.push(e.absolutePoints[0]);var s=this.getEdgeStyle(e,t,n,r);if(null!=s){n=this.getTerminalPort(e,n,!0),r=this.getTerminalPort(e,r,!1);var o=this.updateBoundsFromStencil(n),u=this.updateBoundsFromStencil(r);s(e,n,r,t,i),null!=o&&n.setRect(o.x,o.y,o.width,o.height),null!=u&&r.setRect(u.x,u.y,u.width,u.height)}else if(null!=t)for(s=0;s<t.length;s++)null!=t[s]&&(n=mxUtils.clone(t[s]),i.push(this.transformControlPoint(e,n)));t=e.absolutePoints,i.push(t[t.length-1]),e.absolutePoints=i}},mxGraphView.prototype.transformControlPoint=function(e,t){if(null!=e&&null!=t){var n=e.origin;return new mxPoint(this.scale*(t.x+this.translate.x+n.x),this.scale*(t.y+this.translate.y+n.y))}return null},mxGraphView.prototype.isLoopStyleEnabled=function(e,t,n,r){var i=this.graph.getConnectionConstraint(e,n,!0),s=this.graph.getConnectionConstraint(e,r,!1);return!(null==t||2>t.length)||mxUtils.getValue(e.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)&&(null!=i&&null!=i.point||null!=s&&null!=s.point)?!1:null!=n&&n==r},mxGraphView.prototype.getEdgeStyle=function(e,t,n,r){return e=this.isLoopStyleEnabled(e,t,n,r)?mxUtils.getValue(e.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(e.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:e.style[mxConstants.STYLE_EDGE],"string"==typeof e&&(t=mxStyleRegistry.getValue(e),null==t&&this.isAllowEval()&&(t=mxUtils.eval(e)),e=t),"function"==typeof e?e:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(e,t,n){var r=e.absolutePoints,i=r[0];null==r[r.length-1]&&null!=n&&this.updateFloatingTerminalPoint(e,n,t,!1),null==i&&null!=t&&this.updateFloatingTerminalPoint(e,t,n,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(e,t,n,r){e.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(e,t,n,r),r)},mxGraphView.prototype.getFloatingTerminalPoint=function(e,t,n,r){t=this.getTerminalPort(e,t,r);var i=this.getNextPoint(e,n,r),s=this.graph.isOrthogonal(e);n=mxUtils.toRadians(Number(t.style[mxConstants.STYLE_ROTATION]||"0"));var o=new mxPoint(t.getCenterX(),t.getCenterY());if(0!=n)var u=Math.cos(-n),a=Math.sin(-n),i=mxUtils.getRotatedPoint(i,u,a,o);return u=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0),u+=parseFloat(e.style[r?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),e=this.getPerimeterPoint(t,i,0==n&&s,u),0!=n&&(u=Math.cos(n),a=Math.sin(n),e=mxUtils.getRotatedPoint(e,u,a,o)),e},mxGraphView.prototype.getTerminalPort=function(e,t,n){return e=mxUtils.getValue(e.style,n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT),null!=e&&(e=this.getState(this.graph.getModel().getCell(e)),null!=e&&(t=e)),t},mxGraphView.prototype.getPerimeterPoint=function(e,t,n,r){var i=null;if(null!=e){var s=this.getPerimeterFunction(e);if(null!=s&&null!=t&&(r=this.getPerimeterBounds(e,r),0<r.width||0<r.height)){var i=new mxPoint(t.x,t.y),o=t=!1;this.graph.model.isVertex(e.cell)&&(t=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPH,0),o=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPV,0),null!=e.shape&&null!=e.shape.stencil&&(t=1==mxUtils.getValue(e.style,"stencilFlipH",0)||t,o=1==mxUtils.getValue(e.style,"stencilFlipV",0)||o),t&&(i.x=2*r.getCenterX()-i.x),o&&(i.y=2*r.getCenterY()-i.y)),i=s(r,e,i,n),null!=i&&(t&&(i.x=2*r.getCenterX()-i.x),o&&(i.y=2*r.getCenterY()-i.y))}null==i&&(i=this.getPoint(e))}return i},mxGraphView.prototype.getRoutingCenterX=function(e){var t=null!=e.style?parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_X])||0:0;return e.getCenterX()+t*e.width},mxGraphView.prototype.getRoutingCenterY=function(e){var t=null!=e.style?parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0:0;return e.getCenterY()+t*e.height},mxGraphView.prototype.getPerimeterBounds=function(e,t){return t=null!=t?t:0,null!=e&&(t+=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),e.getPerimeterBounds(t*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(e){e=e.style[mxConstants.STYLE_PERIMETER];if("string"==typeof e){var t=mxStyleRegistry.getValue(e);null==t&&this.isAllowEval()&&(t=mxUtils.eval(e)),e=t}return"function"==typeof e?e:null},mxGraphView.prototype.getNextPoint=function(e,t,n){e=e.absolutePoints;var r=null;return null!=e&&2<=e.length&&(r=e.length,r=e[n?Math.min(1,r-1):Math.max(0,r-2)]),null==r&&null!=t&&(r=new mxPoint(t.getCenterX(),t.getCenterY())),r},mxGraphView.prototype.getVisibleTerminal=function(e,t){for(var n=this.graph.getModel(),r=n.getTerminal(e,t),i=r;null!=r&&r!=this.currentRoot;){if(!this.graph.isCellVisible(i)||this.isCellCollapsed(r))i=r;r=n.getParent(r)}return null==i||n.contains(i)&&n.getParent(i)!=n.getRoot()&&i!=this.currentRoot||(i=null),i},mxGraphView.prototype.updateEdgeBounds=function(e){var t=e.absolutePoints,n=t[0],r=t[t.length-1];if(n.x!=r.x||n.y!=r.y){var i=r.x-n.x,s=r.y-n.y;e.terminalDistance=Math.sqrt(i*i+s*s)}else e.terminalDistance=0;var r=0,o=[],s=n;if(null!=s){for(var n=s.x,u=s.y,a=n,f=u,l=1;l<t.length;l++){var c=t[l];null!=c&&(i=s.x-c.x,s=s.y-c.y,i=Math.sqrt(i*i+s*s),o.push(i),r+=i,s=c,n=Math.min(s.x,n),u=Math.min(s.y,u),a=Math.max(s.x,a),f=Math.max(s.y,f))}e.length=r,e.segments=o,e.x=n,e.y=u,e.width=Math.max(1,a-n),e.height=Math.max(1,f-u)}},mxGraphView.prototype.getPoint=function(e,t){var n=e.getCenterX(),r=e.getCenterY();if(null==e.segments||null!=t&&!t.relative)null!=t&&(f=t.offset,null!=f&&(n+=f.x,r+=f.y));else{for(var i=e.absolutePoints.length,s=Math.round(((null!=t?t.x/2:0)+.5)*e.length),o=e.segments[0],u=0,a=1;s>=Math.round(u+o)&&a<i-1;)u+=o,o=e.segments[a++];i=0==o?0:(s-u)/o,s=e.absolutePoints[a-1],a=e.absolutePoints[a];if(null!=s&&null!=a){u=n=r=0;if(null!=t){var r=t.y,f=t.offset;null!=f&&(n=f.x,u=f.y)}f=a.x-s.x,a=a.y-s.y,n=s.x+f*i+((0==o?0:a/o)*r+n)*this.scale,r=s.y+a*i-((0==o?0:f/o)*r-u)*this.scale}}return new mxPoint(n,r)},mxGraphView.prototype.getRelativePoint=function(e,t,n){var r=this.graph.getModel().getGeometry(e.cell);if(null!=r){var i=e.absolutePoints.length;if(r.relative&&1<i){for(var r=e.length,s=e.segments,o=e.absolutePoints[0],u=e.absolutePoints[1],a=mxUtils.ptSegDistSq(o.x,o.y,u.x,u.y,t,n),f=0,l=0,c=0,h=2;h<i;h++)l+=s[h-2],u=e.absolutePoints[h],o=mxUtils.ptSegDistSq(o.x,o.y,u.x,u.y,t,n),o<=a&&(a=o,f=h-1,c=l),o=u;return i=s[f],o=e.absolutePoints[f],u=e.absolutePoints[f+1],a=u.x,s=u.y,e=o.x-a,f=o.y-s,s=(e-(t-a))*e+(f-(n-s))*f,e=Math.sqrt(0>=s?0:s*s/(e*e+f*f)),e>i&&(e=i),i=Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,u.x,u.y,t,n)),-1==mxUtils.relativeCcw(o.x,o.y,u.x,u.y,t,n)&&(i=-i),new mxPoint((r/2-c-e)/r*-2,i/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(e){var t=e.absolutePoints;e.absoluteOffset.x=e.getCenterX(),e.absoluteOffset.y=e.getCenterY();if(null!=t&&0<t.length&&null!=e.segments){var n=this.graph.getCellGeometry(e.cell);if(n.relative){var r=this.getPoint(e,n);null!=r&&(e.absoluteOffset=r)}else{var r=t[0],i=t[t.length-1];if(null!=r&&null!=i){var t=i.x-r.x,s=i.y-r.y,o=i=0,n=n.offset;null!=n&&(i=n.x,o=n.y),n=r.y+s/2+o*this.scale,e.absoluteOffset.x=r.x+t/2+i*this.scale,e.absoluteOffset.y=n}}}},mxGraphView.prototype.getState=function(e,t){t=t||!1;var n=null;return null!=e&&(n=this.states.get(e),t&&(null==n||this.updateStyle)&&this.graph.isCellVisible(e)&&(null==n?(n=this.createState(e),this.states.put(e,n)):n.style=this.graph.getCellStyle(e))),n},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(e){this.rendering=e},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(e){this.allowEval=e},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(e){this.states=e},mxGraphView.prototype.getCellStates=function(e){if(null==e)return this.states;for(var t=[],n=0;n<e.length;n++){var r=this.getState(e[n]);null!=r&&t.push(r)}return t},mxGraphView.prototype.removeState=function(e){var t=null;return null!=e&&(t=this.states.remove(e),null!=t&&(this.graph.cellRenderer.destroy(t),t.invalid=!0,t.destroy())),t},mxGraphView.prototype.createState=function(e){return new mxCellState(this,e,this.graph.getCellStyle(e))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(e){return e=mxEvent.getSource(e),e==this.graph.container||e.parentNode==this.backgroundPane||null!=e.parentNode&&e.parentNode.parentNode==this.backgroundPane||e==this.canvas.parentNode||e==this.canvas||e==this.backgroundPane||e==this.drawPane||e==this.overlayPane||e==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(e){var t=mxUtils.getOffset(this.graph.container);e=new mxPoint(e.clientX-t.x,e.clientY-t.y);var t=this.graph.container.offsetWidth,n=this.graph.container.clientWidth;return t>n&&e.x>n+2&&e.x<=t?!0:(t=this.graph.container.offsetHeight,n=this.graph.container.clientHeight,t>n&&e.y>n+2&&e.y<=t?!0:!1)},mxGraphView.prototype.init=function(){this.installListeners();var e=this.graph;e.dialect==mxConstants.DIALECT_SVG?this.createSvg():e.dialect==mxConstants.DIALECT_VML?this.createVml():this.createHtml()},mxGraphView.prototype.installListeners=function(){var e=this.graph,t=e.container;if(null!=t){mxClient.IS_TOUCH&&(mxEvent.addListener(t,"gesturestart",mxUtils.bind(this,function(t){e.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(t,"gesturechange",mxUtils.bind(this,function(t){e.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(t,"gestureend",mxUtils.bind(this,function(t){e.fireGestureEvent(t),mxEvent.consume(t)}))),mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){!this.isContainerEvent(t)||(mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_GC||mxClient.IS_OP||mxClient.IS_SF)&&this.isScrollEvent(t)||e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.isContainerEvent(t)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.isContainerEvent(t)&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))})),mxEvent.addListener(t,"dblclick",mxUtils.bind(this,function(t){this.isContainerEvent(t)&&e.dblClick(t)}));var n=function(n){var r=null;return mxClient.IS_TOUCH&&(r=mxEvent.getClientX(n),n=mxEvent.getClientY(n),n=mxUtils.convertPoint(t,r,n),r=e.view.getState(e.getCellAt(n.x,n.y))),r};e.addMouseListener({mouseDown:function(t,n){e.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(t){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(t)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&!mxEvent.isConsumed(t)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,n(t)))}),this.endHandler=mxUtils.bind(this,function(t){this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(t)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler)}},mxGraphView.prototype.createHtml=function(){var e=this.graph.container;null!=e&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas),this.updateContainerStyle(e),mxClient.IS_QUIRKS&&(e=mxUtils.bind(this,function(e){e=this.getGraphBounds(),this.updateHtmlCanvasSize(e.x+e.width+this.graph.border,e.y+e.height+this.graph.border)}),mxEvent.addListener(window,"resize",e)))},mxGraphView.prototype.updateHtmlCanvasSize=function(e,t){if(null!=this.graph.container){var n=this.graph.container.offsetHeight;this.canvas.style.width=this.graph.container.offsetWidth<e?e+"px":"100%",this.canvas.style.height=n<t?t+"px":"100%"}},mxGraphView.prototype.createHtmlPane=function(e,t){var n=document.createElement("DIV");return null!=e&&null!=t?(n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=e,n.style.height=t):n.style.position="relative",n},mxGraphView.prototype.createVml=function(){var e=this.graph.container;if(null!=e){var t=e.offsetWidth,n=e.offsetHeight;this.canvas=this.createVmlPane(t,n),this.canvas.style.overflow="hidden",this.backgroundPane=this.createVmlPane(t,n),this.drawPane=this.createVmlPane(t,n),this.overlayPane=this.createVmlPane(t,n),this.decoratorPane=this.createVmlPane(t,n),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas)}},mxGraphView.prototype.createVmlPane=function(e,t){var n=document.createElement(mxClient.VML_PREFIX+":group");return n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=e+"px",n.style.height=t+"px",n.setAttribute("coordsize",e+","+t),n.setAttribute("coordorigin","0,0"),n},mxGraphView.prototype.createSvg=function(){var e=this.graph.container;this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var t=document.createElementNS(mxConstants.NS_SVG,"svg");t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.display="block",t.appendChild(this.canvas);if(mxClient.IS_IE||mxClient.IS_IE11)t.style.overflow="hidden";null!=e&&(e.appendChild(t),this.updateContainerStyle(e))},mxGraphView.prototype.updateContainerStyle=function(e){var t=mxUtils.getCurrentStyle(e);null!=t&&"static"==t.position&&(e.style.position="relative"),mxClient.IS_POINTER&&(e.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var e=null!=this.canvas?this.canvas.ownerSVGElement:null;null==e&&(e=this.canvas),null!=e&&null!=e.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),e.parentNode.removeChild(e),this.decoratorPane=this.overlayPane=this.drawPane=this.backgroundPane=this.canvas=this.endHandler=this.moveHandler=null)},mxCurrentRootChange.prototype.execute=function(){var e=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=e,e=this.view.graph.getTranslateForRoot(this.view.currentRoot),null!=e&&(this.view.translate=new mxPoint(-e.x,-e.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh(),this.view.fireEvent(new mxEventObject(this.isUp?mxEvent.UP:mxEvent.DOWN,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},mxLoadResources?mxResources.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.EMPTY_ARRAY=[],mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=500,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0,mxGraph.prototype.extendParentsOnMove=!1,mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(e){this.container=e,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(e,"mouseleave",mxUtils.bind(this,function(){null!=this.tooltipHandler&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(e,"selectstart",mxUtils.bind(this,function(e){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(e)}))),8==document.documentMode&&e.insertAdjacentHTML("beforeend","<"+mxClient.VML_PREFIX+':group style="DISPLAY: none;"></'+mxClient.VML_PREFIX+":group>")},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(e){this.stylesheet=e},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(e){this.selectionModel=e},mxGraph.prototype.getSelectionCellsForChanges=function(e){for(var t=new mxDictionary,n=[],r=mxUtils.bind(this,function(e){if(!t.get(e)&&this.model.contains(e))if(this.model.isEdge(e)||this.model.isVertex(e))t.put(e,!0),n.push(e);else for(var i=this.model.getChildCount(e),s=0;s<i;s++)r(this.model.getChildAt(e,s))}),i=0;i<e.length;i++){var s=e[i];if(s.constructor!=mxRootChange){var o=null;s instanceof mxChildChange?o=s.child:null!=s.cell&&s.cell instanceof mxCell&&(o=s.cell),null!=o&&r(o)}}return n},mxGraph.prototype.graphModelChanged=function(e){for(var t=0;t<e.length;t++)this.processChange(e[t]);this.updateSelection(),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.updateSelection=function(){for(var e=this.getSelectionCells(),t=[],n=0;n<e.length;n++)if(this.model.contains(e[n]))for(var r=this.model.getParent(e[n]);null!=r&&r!=this.view.currentRoot;){if(this.isCellCollapsed(r)||!this.isCellVisible(r)){t.push(e[n]);break}r=this.model.getParent(r)}else t.push(e[n]);this.removeSelectionCells(t)},mxGraph.prototype.processChange=function(e){if(e instanceof mxRootChange)this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(e.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT));else if(e instanceof mxChildChange){var t=this.model.getParent(e.child);this.view.invalidate(e.child,!0,!0);if(!this.model.contains(t)||this.isCellCollapsed(t))this.view.invalidate(e.child,!0,!0),this.removeStateForCell(e.child),this.view.currentRoot==e.child&&this.home();t!=e.previous&&(null!=t&&this.view.invalidate(t,!1,!1),null!=e.previous&&this.view.invalidate(e.previous,!1,!1))}else e instanceof mxTerminalChange||e instanceof mxGeometryChange?(e instanceof mxTerminalChange||null==e.previous&&null!=e.geometry||null!=e.previous&&!e.previous.equals(e.geometry))&&this.view.invalidate(e.cell):e instanceof mxValueChange?this.view.invalidate(e.cell,!1,!1):e instanceof mxStyleChange?(this.view.invalidate(e.cell,!0,!0),e=this.view.getState(e.cell),null!=e&&(e.style=null)):null!=e.cell&&e.cell instanceof mxCell&&this.removeStateForCell(e.cell)},mxGraph.prototype.removeStateForCell=function(e){for(var t=this.model.getChildCount(e),n=0;n<t;n++)this.removeStateForCell(this.model.getChildAt(e,n));this.view.invalidate(e,!1,!0),this.view.removeState(e)},mxGraph.prototype.addCellOverlay=function(e,t){null==e.overlays&&(e.overlays=[]),e.overlays.push(t);var n=this.view.getState(e);return null!=n&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",e,"overlay",t)),t},mxGraph.prototype.getCellOverlays=function(e){return e.overlays},mxGraph.prototype.removeCellOverlay=function(e,t){if(null==t)this.removeCellOverlays(e);else{var n=mxUtils.indexOf(e.overlays,t);0<=n?(e.overlays.splice(n,1),0==e.overlays.length&&(e.overlays=null),n=this.view.getState(e),null!=n&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",t))):t=null}return t},mxGraph.prototype.removeCellOverlays=function(e){var t=e.overlays;if(null!=t){e.overlays=null;var n=this.view.getState(e);null!=n&&this.cellRenderer.redraw(n);for(n=0;n<t.length;n++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",t[n]))}return t},mxGraph.prototype.clearCellOverlays=function(e){e=null!=e?e:this.model.getRoot(),this.removeCellOverlays(e);for(var t=this.model.getChildCount(e),n=0;n<t;n++){var r=this.model.getChildAt(e,n);this.clearCellOverlays(r)}},mxGraph.prototype.setCellWarning=function(e,t,n,r){return null!=t&&0<t.length?(n=null!=n?n:this.warningImage,t=new mxCellOverlay(n,"<font color=red>"+t+"</font>"),r&&t.addListener(mxEvent.CLICK,mxUtils.bind(this,function(t,n){this.isEnabled()&&this.setSelectionCell(e)})),this.addCellOverlay(e,t)):(this.removeCellOverlays(e),null)},mxGraph.prototype.startEditing=function(e){this.startEditingAtCell(null,e)},mxGraph.prototype.startEditingAtCell=function(e,t){null!=t&&mxEvent.isMultiTouchEvent(t)||(null==e&&(e=this.getSelectionCell(),null==e||this.isCellEditable(e)||(e=null)),null!=e&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",e,"event",t)),this.cellEditor.startEditing(e,t),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",e,"event",t))))},mxGraph.prototype.getEditingValue=function(e,t){return this.convertValueToString(e)},mxGraph.prototype.stopEditing=function(e){this.cellEditor.stopEditing(e),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",e))},mxGraph.prototype.labelChanged=function(e,t,n){this.model.beginUpdate();try{var r=e.value;this.cellLabelChanged(e,t,this.isAutoSizeCell(e)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",e,"value",t,"old",r,"event",n))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellLabelChanged=function(e,t,n){this.model.beginUpdate();try{this.model.setValue(e,t),n&&this.cellSizeUpdated(e,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(e){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",e))},mxGraph.prototype.click=function(e){var t=e.getEvent(),n=e.getCell(),r=new mxEventObject(mxEvent.CLICK,"event",t,"cell",n);e.isConsumed()&&r.consume(),this.fireEvent(r);if(this.isEnabled()&&!mxEvent.isConsumed(t)&&!r.isConsumed())if(null!=n){if(this.isTransparentClickEvent(t)){var i=!1;e=this.getCellAt(e.graphX,e.graphY,null,null,null,mxUtils.bind(this,function(e){return e=this.isCellSelected(e.cell),i=i||e,!i||e})),null!=e&&(n=e)}this.selectCellForEvent(n,t)}else n=null,this.isSwimlaneSelectionEnabled()&&(n=this.getSwimlaneAt(e.getGraphX(),e.getGraphY())),null!=n?this.selectCellForEvent(n,t):this.isToggleEvent(t)||this.clearSelection()},mxGraph.prototype.dblClick=function(e,t){var n=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",e,"cell",t);this.fireEvent(n),!this.isEnabled()||mxEvent.isConsumed(e)||n.isConsumed()||null==t||!this.isCellEditable(t)||this.isEditing(t)||(this.startEditingAtCell(t,e),mxEvent.consume(e))},mxGraph.prototype.tapAndHold=function(e){var t=e.getEvent(),n=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",t,"cell",e.getCell());this.fireEvent(n),n.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent.isConsumed(t)&&!n.isConsumed()&&this.connectionHandler.isEnabled()&&(t=this.view.getState(this.connectionHandler.marker.getCell(e)),null!=t&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=t,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(e),this.connectionHandler.previous=t,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous))))},mxGraph.prototype.scrollPointToVisible=function(e,t,n,r){if(this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container))this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(e+this.panDx,t+this.panDy));else{var i=this.container;r=null!=r?r:20;if(e>=i.scrollLeft&&t>=i.scrollTop&&e<=i.scrollLeft+i.clientWidth&&t<=i.scrollTop+i.clientHeight){var s=i.scrollLeft+i.clientWidth-e;if(s<r){if(e=i.scrollLeft,i.scrollLeft+=r-s,n&&e==i.scrollLeft){if(this.dialect==mxConstants.DIALECT_SVG){e=this.view.getDrawPane().ownerSVGElement;var o=this.container.scrollWidth+r-s}else o=Math.max(i.clientWidth,i.scrollWidth)+r-s,e=this.view.getCanvas();e.style.width=o+"px",i.scrollLeft+=r-s}}else s=e-i.scrollLeft,s<r&&(i.scrollLeft-=r-s);s=i.scrollTop+i.clientHeight-t,s<r?(e=i.scrollTop,i.scrollTop+=r-s,e==i.scrollTop&&n&&(this.dialect==mxConstants.DIALECT_SVG?(e=this.view.getDrawPane().ownerSVGElement,t=this.container.scrollHeight+r-s):(t=Math.max(i.clientHeight,i.scrollHeight)+r-s,e=this.view.getCanvas()),e.style.height=t+"px",i.scrollTop+=r-s)):(s=t-i.scrollTop,s<r&&(i.scrollTop-=r-s))}}},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var e=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(e.paddingLeft)+("none"!=e.borderLeftStyle?mxUtils.parseCssNumber(e.borderLeftWidth):0),mxUtils.parseCssNumber(e.paddingTop)+("none"!=e.borderTopStyle?mxUtils.parseCssNumber(e.borderTopWidth):0),mxUtils.parseCssNumber(e.paddingRight)+("none"!=e.borderRightStyle?mxUtils.parseCssNumber(e.borderRightWidth):0),mxUtils.parseCssNumber(e.paddingBottom)+("none"!=e.borderBottomStyle?mxUtils.parseCssNumber(e.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(e,t,n){e=this.view.translate;var r=this.pageFormat,i=this.pageScale,r=new mxRectangle(0,0,Math.ceil(r.width*i),Math.ceil(r.height*i));return new mxRectangle(0,0,(this.pageBreaksVisible?Math.ceil(t/r.width):1)*r.width+2+e.x,(this.pageBreaksVisible?Math.ceil(n/r.height):1)*r.height+2+e.y)},mxGraph.prototype.fit=function(e,t,n,r,i,s,o){if(null!=this.container){e=null!=e?e:this.getBorder(),t=null!=t?t:!1,n=null!=n?n:0,r=null!=r?r:!0,i=null!=i?i:!1,s=null!=s?s:!1;var u=this.getBorderSizes(),a=this.container.offsetWidth-u.x-u.width-1,f=null!=o?o:this.container.offsetHeight-u.y-u.height-1;o=this.view.getGraphBounds();if(0<o.width&&0<o.height){t&&null!=o.x&&null!=o.y&&(o=o.clone(),o.width+=o.x,o.height+=o.y,o.x=0,o.y=0);var u=this.view.scale,l=o.width/u,c=o.height/u;null!=this.backgroundImage&&(l=Math.max(l,this.backgroundImage.width-o.x/u),c=Math.max(c,this.backgroundImage.height-o.y/u));var h=(t?e:2*e)+n+1,a=a-h,f=f-h;i=i?f/c:s?a/l:Math.min(a/l,f/c),null!=this.minFitScale&&(i=Math.max(i,this.minFitScale)),null!=this.maxFitScale&&(i=Math.min(i,this.maxFitScale));if(!r)return i;t?this.view.scale!=i&&this.view.setScale(i):mxUtils.hasScrollbars(this.container)?(this.view.setScale(i),e=this.getGraphBounds(),null!=e.x&&(this.container.scrollLeft=e.x),null!=e.y&&(this.container.scrollTop=e.y)):this.view.scaleAndTranslate(i,null!=o.x?Math.floor(this.view.translate.x-o.x/u+e/i+n/2):e,null!=o.y?Math.floor(this.view.translate.y-o.y/u+e/i+n/2):e)}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var e=this.getGraphBounds();if(null!=this.container){var t=this.getBorder(),n=Math.max(0,e.x+e.width+2*t*this.view.scale),t=Math.max(0,e.y+e.height+2*t*this.view.scale);null!=this.minimumContainerSize&&(n=Math.max(n,this.minimumContainerSize.width),t=Math.max(t,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(n,t);if(this.preferPageSize||!mxClient.IS_IE&&this.pageVisible){var r=this.getPreferredPageSize(e,Math.max(1,n),Math.max(1,t));null!=r&&(n=r.width*this.view.scale,t=r.height*this.view.scale)}null!=this.minimumGraphSize&&(n=Math.max(n,this.minimumGraphSize.width*this.view.scale),t=Math.max(t,this.minimumGraphSize.height*this.view.scale)),n=Math.ceil(n),t=Math.ceil(t),this.dialect==mxConstants.DIALECT_SVG?(r=this.view.getDrawPane().ownerSVGElement,r.style.minWidth=Math.max(1,n)+"px",r.style.minHeight=Math.max(1,t)+"px",r.style.width="100%",r.style.height="100%"):mxClient.IS_QUIRKS?this.view.updateHtmlCanvasSize(Math.max(1,n),Math.max(1,t)):(this.view.canvas.style.minWidth=Math.max(1,n)+"px",this.view.canvas.style.minHeight=Math.max(1,t)+"px"),this.updatePageBreaks(this.pageBreaksVisible,n,t)}this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",e))},mxGraph.prototype.doResizeContainer=function(e,t){null!=this.maximumContainerSize&&(e=Math.min(this.maximumContainerSize.width,e),t=Math.min(this.maximumContainerSize.height,t)),this.container.style.width=Math.ceil(e)+"px",this.container.style.height=Math.ceil(t)+"px"},mxGraph.prototype.updatePageBreaks=function(e,t,n){t=this.view.scale,n=this.view.translate;var r=this.pageFormat,i=t*this.pageScale,s=new mxRectangle(0,0,r.width*i,r.height*i),r=mxRectangle.fromRectangle(this.getGraphBounds());r.width=Math.max(1,r.width),r.height=Math.max(1,r.height),s.x=Math.floor((r.x-n.x*t)/s.width)*s.width+n.x*t,s.y=Math.floor((r.y-n.y*t)/s.height)*s.height+n.y*t,r.width=Math.ceil((r.width+(r.x-s.x))/s.width)*s.width,r.height=Math.ceil((r.height+(r.y-s.y))/s.height)*s.height;var o=(e=e&&Math.min(s.width,s.height)>this.minPageBreakDist)?Math.ceil(r.height/s.height)+1:0,u=e?Math.ceil(r.width/s.width)+1:0,a=(u-1)*s.width,f=(o-1)*s.height;null==this.horizontalPageBreaks&&0<o&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<u&&(this.verticalPageBreaks=[]),e=mxUtils.bind(this,function(e){if(null!=e){for(var t=e==this.horizontalPageBreaks?o:u,n=0;n<=t;n++){var r=e==this.horizontalPageBreaks?[new mxPoint(Math.round(s.x),Math.round(s.y+n*s.height)),new mxPoint(Math.round(s.x+a),Math.round(s.y+n*s.height))]:[new mxPoint(Math.round(s.x+n*s.width),Math.round(s.y)),new mxPoint(Math.round(s.x+n*s.width),Math.round(s.y+f))];null!=e[n]?(e[n].points=r,e[n].redraw()):(r=new mxPolyline(r,this.pageBreakColor),r.dialect=this.dialect,r.pointerEvents=!1,r.isDashed=this.pageBreakDashed,r.init(this.view.backgroundPane),r.redraw(),e[n]=r)}for(n=t;n<e.length;n++)e[n].destroy();e.splice(t,e.length-t)}}),e(this.horizontalPageBreaks),e(this.verticalPageBreaks)},mxGraph.prototype.getCellStyle=function(e){var t=this.model.getStyle(e);return e=this.model.isEdge(e)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle(),null!=t&&(e=this.postProcessCellStyle(this.stylesheet.getCellStyle(t,e))),null==e&&(e=mxGraph.prototype.EMPTY_ARRAY),e},mxGraph.prototype.postProcessCellStyle=function(e){if(null!=e){var t=e[mxConstants.STYLE_IMAGE],n=this.getImageFromBundles(t);null!=n?e[mxConstants.STYLE_IMAGE]=n:n=t,null!=n&&"data:image/"==n.substring(0,11)&&("data:image/svg+xml,<"==n.substring(0,20)?n=n.substring(0,19)+encodeURIComponent(n.substring(19)):"data:image/svg+xml,%3C"!=n.substring(0,22)&&(t=n.indexOf(","),0<t&&";base64,"!=n.substring(t-7,t+1)&&(n=n.substring(0,t)+";base64,"+n.substring(t+1))),e[mxConstants.STYLE_IMAGE]=n)}return e},mxGraph.prototype.setCellStyle=function(e,t){t=t||this.getSelectionCells();if(null!=t){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)this.model.setStyle(t[n],e)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(e,t,n){return n=n||this.getSelectionCell(),this.toggleCellStyles(e,t,[n])},mxGraph.prototype.toggleCellStyles=function(e,t,n){t=null!=t?t:!1,n=n||this.getSelectionCells();var r=null;if(null!=n&&0<n.length){var i=this.view.getState(n[0]),i=null!=i?i.style:this.getCellStyle(n[0]);null!=i&&(r=mxUtils.getValue(i,e,t)?0:1,this.setCellStyles(e,r,n))}return r},mxGraph.prototype.setCellStyles=function(e,t,n){n=n||this.getSelectionCells(),mxUtils.setCellStyles(this.model,n,e,t)},mxGraph.prototype.toggleCellStyleFlags=function(e,t,n){this.setCellStyleFlags(e,t,null,n)},mxGraph.prototype.setCellStyleFlags=function(e,t,n,r){r=r||this.getSelectionCells();if(null!=r&&0<r.length){if(null==n){var i=this.view.getState(r[0]),i=null!=i?i.style:this.getCellStyle(r[0]);null!=i&&(n=(parseInt(i[e]||0)&t)!=t)}mxUtils.setCellStyleFlags(this.model,r,e,t,n)}},mxGraph.prototype.alignCells=function(e,t,n){null==t&&(t=this.getSelectionCells());if(null!=t&&1<t.length){if(null==n)for(var r=0;r<t.length;r++){var i=this.view.getState(t[r]);if(null!=i&&!this.model.isEdge(t[r]))if(null==n){if(e==mxConstants.ALIGN_CENTER){n=i.x+i.width/2;break}if(e==mxConstants.ALIGN_RIGHT)n=i.x+i.width;else if(e==mxConstants.ALIGN_TOP)n=i.y;else{if(e==mxConstants.ALIGN_MIDDLE){n=i.y+i.height/2;break}n=e==mxConstants.ALIGN_BOTTOM?i.y+i.height:i.x}}else n=e==mxConstants.ALIGN_RIGHT?Math.max(n,i.x+i.width):e==mxConstants.ALIGN_TOP?Math.min(n,i.y):e==mxConstants.ALIGN_BOTTOM?Math.max(n,i.y+i.height):Math.min(n,i.x)}if(null!=n){var s=this.view.scale;this.model.beginUpdate();try{for(r=0;r<t.length;r++)if(i=this.view.getState(t[r]),null!=i){var o=this.getCellGeometry(t[r]);null==o||this.model.isEdge(t[r])||(o=o.clone(),e==mxConstants.ALIGN_CENTER?o.x+=(n-i.x-i.width/2)/s:e==mxConstants.ALIGN_RIGHT?o.x+=(n-i.x-i.width)/s:e==mxConstants.ALIGN_TOP?o.y+=(n-i.y)/s:e==mxConstants.ALIGN_MIDDLE?o.y+=(n-i.y-i.height/2)/s:e==mxConstants.ALIGN_BOTTOM?o.y+=(n-i.y-i.height)/s:o.x+=(n-i.x)/s,this.resizeCell(t[r],o))}this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",e,"cells",t))}finally{this.model.endUpdate()}}}return t},mxGraph.prototype.flipEdge=function(e){if(null!=e&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var t=this.model.getStyle(e);null==t||0==t.length?this.model.setStyle(e,this.alternateEdgeStyle):this.model.setStyle(e,null),this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",e))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.addImageBundle=function(e){this.imageBundles.push(e)},mxGraph.prototype.removeImageBundle=function(e){for(var t=[],n=0;n<this.imageBundles.length;n++)this.imageBundles[n]!=e&&t.push(this.imageBundles[n]);this.imageBundles=t},mxGraph.prototype.getImageFromBundles=function(e){if(null!=e)for(var t=0;t<this.imageBundles.length;t++){var n=this.imageBundles[t].getImage(e);if(null!=n)return n}return null},mxGraph.prototype.orderCells=function(e,t){null==t&&(t=mxUtils.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(t,e),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",e,"cells",t))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsOrdered=function(e,t){if(null!=e){this.model.beginUpdate();try{for(var n=0;n<e.length;n++){var r=this.model.getParent(e[n]);t?this.model.add(r,e[n],n):this.model.add(r,e[n],this.model.getChildCount(r)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",t,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(e,t,n){null==n&&(n=mxUtils.sortCells(this.getSelectionCells(),!0)),n=this.getCellsForGroup(n),null==e&&(e=this.createGroupCell(n));var r=this.getBoundsForGroup(e,n,t);if(0<n.length&&null!=r){var i=this.model.getParent(e);null==i&&(i=this.model.getParent(n[0])),this.model.beginUpdate();try{null==this.getCellGeometry(e)&&this.model.setGeometry(e,new mxGeometry);var s=this.model.getChildCount(i);this.cellsAdded([e],i,s,null,null,!1,!1,!1),s=this.model.getChildCount(e),this.cellsAdded(n,e,s,null,null,!1,!1,!1),this.cellsMoved(n,-r.x,-r.y,!1,!1,!1),this.cellsResized([e],[r],!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",e,"border",t,"cells",n))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.getCellsForGroup=function(e){var t=[];if(null!=e&&0<e.length){var n=this.model.getParent(e[0]);t.push(e[0]);for(var r=1;r<e.length;r++)this.model.getParent(e[r])==n&&t.push(e[r])}return t},mxGraph.prototype.getBoundsForGroup=function(e,t,n){return t=this.getBoundingBoxFromGeometry(t,!0),null!=t&&(this.isSwimlane(e)&&(e=this.getStartSize(e),t.x-=e.width,t.y-=e.height,t.width+=e.width,t.height+=e.height),null!=n&&(t.x-=n,t.y-=n,t.width+=2*n,t.height+=2*n)),t},mxGraph.prototype.createGroupCell=function(e){return e=new mxCell(""),e.setVertex(!0),e.setConnectable(!1),e},mxGraph.prototype.ungroupCells=function(e){var t=[];if(null==e){e=this.getSelectionCells();for(var n=[],r=0;r<e.length;r++)0<this.model.getChildCount(e[r])&&n.push(e[r]);e=n}if(null!=e&&0<e.length){this.model.beginUpdate();try{for(r=0;r<e.length;r++){var i=this.model.getChildren(e[r]);if(null!=i&&0<i.length){var i=i.slice(),s=this.model.getParent(e[r]),o=this.model.getChildCount(s);this.cellsAdded(i,s,o,null,null,!0),t=t.concat(i)}}this.removeCellsAfterUngroup(e),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",e))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.removeCellsAfterUngroup=function(e){this.cellsRemoved(this.addAllEdges(e))},mxGraph.prototype.removeCellsFromParent=function(e){null==e&&(e=this.getSelectionCells()),this.model.beginUpdate();try{var t=this.getDefaultParent(),n=this.model.getChildCount(t);this.cellsAdded(e,t,n,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",e))}finally{this.model.endUpdate()}return e},mxGraph.prototype.updateGroupBounds=function(e,t,n,r,i,s,o){null==e&&(e=this.getSelectionCells()),t=null!=t?t:0,n=null!=n?n:!1,r=null!=r?r:0,i=null!=i?i:0,s=null!=s?s:0,o=null!=o?o:0,this.model.beginUpdate();try{for(var u=e.length-1;0<=u;u--){var a=this.getCellGeometry(e[u]);if(null!=a){var f=this.getChildCells(e[u]);if(null!=f&&0<f.length){var l=this.getBoundingBoxFromGeometry(f,!0);if(null!=l&&0<l.width&&0<l.height){var c=0,h=0;if(this.isSwimlane(e[u]))var p=this.getStartSize(e[u]),c=p.width,h=p.height;a=a.clone(),n&&(a.x=Math.round(a.x+l.x-t-c-o),a.y=Math.round(a.y+l.y-t-h-r)),a.width=Math.round(l.width+2*t+c+o+i),a.height=Math.round(l.height+2*t+h+r+s),this.model.setGeometry(e[u],a),this.moveCells(f,t+c-l.x+o,t+h-l.y+r)}}}}}finally{this.model.endUpdate()}return e},mxGraph.prototype.getBoundingBox=function(e){var t=null;if(null!=e&&0<e.length)for(var n=0;n<e.length;n++)if(this.model.isVertex(e[n])||this.model.isEdge(e[n])){var r=this.view.getBoundingBox(this.view.getState(e[n]),!0);null!=r&&(null==t?t=mxRectangle.fromRectangle(r):t.add(r))}return t},mxGraph.prototype.cloneCell=function(e,t,n,r){return this.cloneCells([e],t,n,r)[0]},mxGraph.prototype.cloneCells=function(e,t,n,r){t=null!=t?t:!0;var i=null;if(null!=e){for(var s=new mxDictionary,i=[],o=0;o<e.length;o++)s.put(e[o],!0),i.push(e[o]);if(0<i.length)for(var u=this.view.scale,a=this.view.translate,i=this.model.cloneCells(e,!0,n),o=0;o<e.length;o++)if(!t&&this.model.isEdge(i[o])&&null!=this.getEdgeValidationError(i[o],this.model.getTerminal(i[o],!0),this.model.getTerminal(i[o],!1)))i[o]=null;else{var f=this.model.getGeometry(i[o]);if(null!=f){var l=this.view.getState(e[o]),c=this.view.getState(this.model.getParent(e[o]));if(null!=l&&null!=c)if(n=r?0:c.origin.x,c=r?0:c.origin.y,this.model.isEdge(i[o])){for(var l=l.absolutePoints,h=this.model.getTerminal(e[o],!0);null!=h&&!s.get(h);)h=this.model.getParent(h);null==h&&f.setTerminalPoint(new mxPoint(l[0].x/u-a.x,l[0].y/u-a.y),!0);for(h=this.model.getTerminal(e[o],!1);null!=h&&!s.get(h);)h=this.model.getParent(h);null==h&&(h=l.length-1,f.setTerminalPoint(new mxPoint(l[h].x/u-a.x,l[h].y/u-a.y),!1)),f=f.points;if(null!=f)for(l=0;l<f.length;l++)f[l].x+=n,f[l].y+=c}else f.translate(n,c)}}else i=[]}return i},mxGraph.prototype.insertVertex=function(e,t,n,r,i,s,o,u,a){return t=this.createVertex(e,t,n,r,i,s,o,u,a),this.addCell(t,e)},mxGraph.prototype.createVertex=function(e,t,n,r,i,s,o,u,a){return e=new mxGeometry(r,i,s,o),e.relative=null!=a?a:!1,n=new mxCell(n,e,u),n.setId(t),n.setVertex(!0),n.setConnectable(!0),n},mxGraph.prototype.insertEdge=function(e,t,n,r,i,s){return t=this.createEdge(e,t,n,r,i,s),this.addEdge(t,e,r,i)},mxGraph.prototype.createEdge=function(e,t,n,r,i,s){return e=new mxCell(n,new mxGeometry,s),e.setId(t),e.setEdge(!0),e.geometry.relative=!0,e},mxGraph.prototype.addEdge=function(e,t,n,r,i){return this.addCell(e,t,i,n,r)},mxGraph.prototype.addCell=function(e,t,n,r,i){return this.addCells([e],t,n,r,i)[0]},mxGraph.prototype.addCells=function(e,t,n,r,i){null==t&&(t=this.getDefaultParent()),null==n&&(n=this.model.getChildCount(t)),this.model.beginUpdate();try{this.cellsAdded(e,t,n,r,i,!1,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",e,"parent",t,"index",n,"source",r,"target",i))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsAdded=function(e,t,n,r,i,s,o,u){if(null!=e&&null!=t&&null!=n){this.model.beginUpdate();try{for(var a=s?this.view.getState(t):null,f=null!=a?a.origin:null,l=new mxPoint(0,0),a=0;a<e.length;a++)if(null==e[a])n--;else{var c=this.model.getParent(e[a]);if(null!=f&&e[a]!=t&&t!=c){var h=this.view.getState(c),p=null!=h?h.origin:l,d=this.model.getGeometry(e[a]);if(null!=d){var v=p.x-f.x,m=p.y-f.y,d=d.clone();d.translate(v,m),d.relative||!this.model.isVertex(e[a])||this.isAllowNegativeCoordinates()||(d.x=Math.max(0,d.x),d.y=Math.max(0,d.y)),this.model.setGeometry(e[a],d)}}t==c&&n+a>this.model.getChildCount(t)&&n--,this.model.add(t,e[a],n+a),this.autoSizeCellsOnAdd&&this.autoSizeCell(e[a],!0),(null==u||u)&&this.isExtendParentsOnAdd(e[a])&&this.isExtendParent(e[a])&&this.extendParent(e[a]),(null==o||o)&&this.constrainChild(e[a]),null!=r&&this.cellConnected(e[a],r,!0),null!=i&&this.cellConnected(e[a],i,!1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",e,"parent",t,"index",n,"source",r,"target",i,"absolute",s))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(e,t){if(null!=t?t:1)for(var n=this.model.getChildCount(e),r=0;r<n;r++)this.autoSizeCell(this.model.getChildAt(e,r));this.getModel().isVertex(e)&&this.isAutoSizeCell(e)&&this.updateCellSize(e)},mxGraph.prototype.removeCells=function(e,t){t=null!=t?t:!0,null==e&&(e=this.getDeletableCells(this.getSelectionCells()));if(t)e=this.getDeletableCells(this.addAllEdges(e));else{e=e.slice();for(var n=this.getDeletableCells(this.getAllEdges(e)),r=new mxDictionary,i=0;i<e.length;i++)r.put(e[i],!0);for(i=0;i<n.length;i++)null!=this.view.getState(n[i])||r.get(n[i])||(r.put(n[i],!0),e.push(n[i]))}this.model.beginUpdate();try{this.cellsRemoved(e),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",e,"includeEdges",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsRemoved=function(e){if(null!=e&&0<e.length){var t=this.view.scale,n=this.view.translate;this.model.beginUpdate();try{for(var r=new mxDictionary,i=0;i<e.length;i++)r.put(e[i],!0);for(i=0;i<e.length;i++){for(var s=this.getAllEdges([e[i]]),o=mxUtils.bind(this,function(r,s){var o=this.model.getGeometry(r);if(null!=o){for(var u=this.model.getTerminal(r,s),f=!1,l=u;null!=l;){if(e[i]==l){f=!0;break}l=this.model.getParent(l)}f&&(o=o.clone(),f=this.view.getState(r),null!=f?(u=f.absolutePoints,l=s?0:u.length-1,o.setTerminalPoint(new mxPoint(u[l].x/t-n.x-f.origin.x,u[l].y/t-n.y-f.origin.y),s)):(u=this.view.getState(u),null!=u&&o.setTerminalPoint(new mxPoint(u.getCenterX()/t-n.x,u.getCenterY()/t-n.y),s)),this.model.setGeometry(r,o),this.model.setTerminal(r,null,s))}}),u=0;u<s.length;u++)r.get(s[u])||(r.put(s[u],!0),o(s[u],!0),o(s[u],!1));this.model.remove(e[i])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(e,t,n,r,i){r=r||0,i=i||0;var s=this.model.getParent(e),o=this.model.getTerminal(e,!0);this.model.beginUpdate();try{if(null==n){n=this.cloneCell(e);var u=this.view.getState(e),a=this.getCellGeometry(n);if(null!=a&&null!=a.points&&null!=u){var f=this.view.translate,l=this.view.scale,c=mxUtils.findNearestSegment(u,(r+f.x)*l,(i+f.y)*l);a.points=a.points.slice(0,c),a=this.getCellGeometry(e),null!=a&&null!=a.points&&(a=a.clone(),a.points=a.points.slice(c),this.model.setGeometry(e,a))}}this.cellsMoved(t,r,i,!1,!1),this.cellsAdded(t,s,this.model.getChildCount(s),null,null,!0),this.cellsAdded([n],s,this.model.getChildCount(s),o,t[0],!1),this.cellConnected(e,t[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",e,"cells",t,"newEdge",n,"dx",r,"dy",i))}finally{this.model.endUpdate()}return n},mxGraph.prototype.toggleCells=function(e,t,n){null==t&&(t=this.getSelectionCells()),n&&(t=this.addAllEdges(t)),this.model.beginUpdate();try{this.cellsToggled(t,e),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",e,"cells",t,"includeEdges",n))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsToggled=function(e,t){if(null!=e&&0<e.length){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)this.model.setVisible(e[n],t)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(e,t,n,r,i){t=null!=t?t:!1,null==n&&(n=this.getFoldableCells(this.getSelectionCells(),e)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(n,e,t,r),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",e,"recurse",t,"cells",n))}finally{this.model.endUpdate()}return n},mxGraph.prototype.cellsFolded=function(e,t,n,r){if(null!=e&&0<e.length){this.model.beginUpdate();try{for(var i=0;i<e.length;i++)if((!r||this.isCellFoldable(e[i],t))&&t!=this.isCellCollapsed(e[i])){this.model.setCollapsed(e[i],t),this.swapBounds(e[i],t),this.isExtendParent(e[i])&&this.extendParent(e[i]);if(n){var s=this.model.getChildren(e[i]);this.cellsFolded(s,t,n)}this.constrainChild(e[i])}this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",e,"collapse",t,"recurse",n))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(e,t){if(null!=e){var n=this.model.getGeometry(e);null!=n&&(n=n.clone(),this.updateAlternateBounds(e,n,t),n.swap(),this.model.setGeometry(e,n))}},mxGraph.prototype.updateAlternateBounds=function(e,t,n){if(null!=e&&null!=t){n=this.view.getState(e),n=null!=n?n.style:this.getCellStyle(e);if(null==t.alternateBounds){var r=t;this.collapseToPreferredSize&&(e=this.getPreferredSizeForCell(e),null!=e&&(r=e,e=mxUtils.getValue(n,mxConstants.STYLE_STARTSIZE),0<e&&(r.height=Math.max(r.height,e)))),t.alternateBounds=new mxRectangle(0,0,r.width,r.height)}if(null!=t.alternateBounds){t.alternateBounds.x=t.x,t.alternateBounds.y=t.y;var i=mxUtils.toRadians(n[mxConstants.STYLE_ROTATION]||0);0!=i&&(e=t.alternateBounds.getCenterX()-t.getCenterX(),n=t.alternateBounds.getCenterY()-t.getCenterY(),r=Math.cos(i),i=Math.sin(i),t.alternateBounds.x+=r*e-i*n-e,t.alternateBounds.y+=i*e+r*n-n)}}},mxGraph.prototype.addAllEdges=function(e){var t=e.slice();return mxUtils.removeDuplicates(t.concat(this.getAllEdges(e)))},mxGraph.prototype.getAllEdges=function(e){var t=[];if(null!=e)for(var n=0;n<e.length;n++){for(var r=this.model.getEdgeCount(e[n]),i=0;i<r;i++)t.push(this.model.getEdgeAt(e[n],i));r=this.model.getChildren(e[n]),t=t.concat(this.getAllEdges(r))}return t},mxGraph.prototype.updateCellSize=function(e,t){t=null!=t?t:!1,this.model.beginUpdate();try{this.cellSizeUpdated(e,t),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",e,"ignoreChildren",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellSizeUpdated=function(e,t){if(null!=e){this.model.beginUpdate();try{var n=this.getPreferredSizeForCell(e),r=this.model.getGeometry(e);if(null!=n&&null!=r){var i=this.isCellCollapsed(e),r=r.clone();if(this.isSwimlane(e)){var s=this.view.getState(e),o=null!=s?s.style:this.getCellStyle(e),u=this.model.getStyle(e);null==u&&(u=""),mxUtils.getValue(o,mxConstants.STYLE_HORIZONTAL,!0)?(u=mxUtils.setStyle(u,mxConstants.STYLE_STARTSIZE,n.height+8),i&&(r.height=n.height+8),r.width=n.width):(u=mxUtils.setStyle(u,mxConstants.STYLE_STARTSIZE,n.width+8),i&&(r.width=n.width+8),r.height=n.height),this.model.setStyle(e,u)}else r.width=n.width,r.height=n.height;if(!t&&!i){var a=this.view.getBounds(this.model.getChildren(e));if(null!=a){var f=this.view.translate,l=this.view.scale,c=(a.y+a.height)/l-r.y-f.y;r.width=Math.max(r.width,(a.x+a.width)/l-r.x-f.x),r.height=Math.max(r.height,c)}}this.cellsResized([e],[r],!1)}}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(e){var t=null;if(null!=e){var n=this.view.getState(e)||this.view.createState(e),r=n.style;if(!this.model.isEdge(e)){var i=r[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE;e=t=0,null==this.getImage(n)&&null==r[mxConstants.STYLE_IMAGE]||r[mxConstants.STYLE_SHAPE]!=mxConstants.SHAPE_LABEL||(r[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(t+=parseFloat(r[mxConstants.STYLE_IMAGE_WIDTH])||mxLabel.prototype.imageSize),r[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER&&(e+=parseFloat(r[mxConstants.STYLE_IMAGE_HEIGHT])||mxLabel.prototype.imageSize)),t+=2*(r[mxConstants.STYLE_SPACING]||0),t+=r[mxConstants.STYLE_SPACING_LEFT]||0,t+=r[mxConstants.STYLE_SPACING_RIGHT]||0,e+=2*(r[mxConstants.STYLE_SPACING]||0),e+=r[mxConstants.STYLE_SPACING_TOP]||0,e+=r[mxConstants.STYLE_SPACING_BOTTOM]||0;var s=this.getFoldingImage(n);null!=s&&(t+=s.width+8),s=this.cellRenderer.getLabelValue(n),null!=s&&0<s.length?(this.isHtmlLabel(n.cell)||(s=mxUtils.htmlEntities(s)),s=s.replace(/\n/g,"<br>"),i=mxUtils.getSizeForString(s,i,r[mxConstants.STYLE_FONTFAMILY]),n=i.width+t,e=i.height+e,mxUtils.getValue(r,mxConstants.STYLE_HORIZONTAL,!0)||(r=e,e=n,n=r),this.gridEnabled&&(n=this.snap(n+this.gridSize/2),e=this.snap(e+this.gridSize/2)),t=new mxRectangle(0,0,n,e)):(r=4*this.gridSize,t=new mxRectangle(0,0,r,r))}}return t},mxGraph.prototype.resizeCell=function(e,t,n){return this.resizeCells([e],[t],n)[0]},mxGraph.prototype.resizeCells=function(e,t,n){n=null!=n?n:this.isRecursiveResize(),this.model.beginUpdate();try{this.cellsResized(e,t,n),this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",e,"bounds",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsResized=function(e,t,n){n=null!=n?n:!1;if(null!=e&&null!=t&&e.length==t.length){this.model.beginUpdate();try{for(var r=0;r<e.length;r++)this.cellResized(e[r],t[r],!1,n),this.isExtendParent(e[r])&&this.extendParent(e[r]),this.constrainChild(e[r]);this.resetEdgesOnResize&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",e,"bounds",t))}finally{this.model.endUpdate()}}},mxGraph.prototype.cellResized=function(e,t,n,r){var i=this.model.getGeometry(e);if(null!=i&&(i.x!=t.x||i.y!=t.y||i.width!=t.width||i.height!=t.height)){i=i.clone(),!n&&i.relative?(n=i.offset,null!=n&&(n.x+=t.x-i.x,n.y+=t.y-i.y)):(i.x=t.x,i.y=t.y),i.width=t.width,i.height=t.height,i.relative||!this.model.isVertex(e)||this.isAllowNegativeCoordinates()||(i.x=Math.max(0,i.x),i.y=Math.max(0,i.y)),this.model.beginUpdate();try{r&&this.resizeChildCells(e,i),this.model.setGeometry(e,i),this.constrainChildCells(e)}finally{this.model.endUpdate()}}},mxGraph.prototype.resizeChildCells=function(e,t){for(var n=this.model.getGeometry(e),r=t.width/n.width,n=t.height/n.height,i=this.model.getChildCount(e),s=0;s<i;s++)this.scaleCell(this.model.getChildAt(e,s),r,n,!0)},mxGraph.prototype.constrainChildCells=function(e){for(var t=this.model.getChildCount(e),n=0;n<t;n++)this.constrainChild(this.model.getChildAt(e,n))},mxGraph.prototype.scaleCell=function(e,t,n,r){var i=this.model.getGeometry(e);if(null!=i){var s=this.view.getState(e),s=null!=s?s.style:this.getCellStyle(e),i=i.clone(),o=i.x,u=i.y,a=i.width,f=i.height;i.scale(t,n,"fixed"==s[mxConstants.STYLE_ASPECT]),"1"==s[mxConstants.STYLE_RESIZE_WIDTH]?i.width=a*t:"0"==s[mxConstants.STYLE_RESIZE_WIDTH]&&(i.width=a),"1"==s[mxConstants.STYLE_RESIZE_HEIGHT]?i.height=f*n:"0"==s[mxConstants.STYLE_RESIZE_HEIGHT]&&(i.height=f),this.isCellMovable(e)||(i.x=o,i.y=u),this.isCellResizable(e)||(i.width=a,i.height=f),this.model.isVertex(e)?this.cellResized(e,i,!0,r):this.model.setGeometry(e,i)}},mxGraph.prototype.extendParent=function(e){if(null!=e){var t=this.model.getParent(e),n=this.getCellGeometry(t);null==t||null==n||this.isCellCollapsed(t)||(e=this.getCellGeometry(e),null!=e&&!e.relative&&(n.width<e.x+e.width||n.height<e.y+e.height)&&(n=n.clone(),n.width=Math.max(n.width,e.x+e.width),n.height=Math.max(n.height,e.y+e.height),this.cellsResized([t],[n],!1)))}},mxGraph.prototype.importCells=function(e,t,n,r,i,s){return this.moveCells(e,t,n,!0,r,i,s)},mxGraph.prototype.moveCells=function(e,t,n,r,i,s,o){t=null!=t?t:0,n=null!=n?n:0,r=null!=r?r:!1;if(null!=e&&(0!=t||0!=n||r||null!=i)){e=this.model.getTopmostCells(e),this.model.beginUpdate();try{for(var u=new mxDictionary,a=0;a<e.length;a++)u.put(e[a],!0);for(var f=mxUtils.bind(this,function(e){for(;null!=e;){if(u.get(e))return!0;e=this.model.getParent(e)}return!1}),l=[],a=0;a<e.length;a++){var c=this.getCellGeometry(e[a]),h=this.model.getParent(e[a]);null!=c&&c.relative&&this.model.isEdge(h)&&(f(this.model.getTerminal(h,!0))||f(this.model.getTerminal(h,!1)))||l.push(e[a])}e=l,r&&(e=this.cloneCells(e,this.isCloneInvalidEdges(),o),null==i&&(i=this.getDefaultParent()));var p=this.isAllowNegativeCoordinates();null!=i&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(e,t,n,!r&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==i,this.isExtendParentsOnMove()&&null==i),this.setAllowNegativeCoordinates(p);if(null!=i){var d=this.model.getChildCount(i);this.cellsAdded(e,i,d,null,null,!0)}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",e,"dx",t,"dy",n,"clone",r,"target",i,"event",s))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.cellsMoved=function(e,t,n,r,i,s){if(null!=e&&(0!=t||0!=n)){s=null!=s?s:!1,this.model.beginUpdate();try{r&&this.disconnectGraph(e);for(var o=0;o<e.length;o++)this.translateCell(e[o],t,n),s&&this.isExtendParent(e[o])?this.extendParent(e[o]):i&&this.constrainChild(e[o]);this.resetEdgesOnMove&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",e,"dx",t,"dy",n,"disconnect",r))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(e,t,n){var r=this.model.getGeometry(e);if(null!=r){t=parseFloat(t),n=parseFloat(n),r=r.clone(),r.translate(t,n),r.relative||!this.model.isVertex(e)||this.isAllowNegativeCoordinates()||(r.x=Math.max(0,parseFloat(r.x)),r.y=Math.max(0,parseFloat(r.y)));if(r.relative&&!this.model.isEdge(e)){var i=this.model.getParent(e),s=0;this.model.isVertex(i)&&(s=this.view.getState(i),i=null!=s?s.style:this.getCellStyle(i),s=mxUtils.getValue(i,mxConstants.STYLE_ROTATION,0)),0!=s&&(s=mxUtils.toRadians(-s),i=Math.cos(s),s=Math.sin(s),n=mxUtils.getRotatedPoint(new mxPoint(t,n),i,s,new mxPoint(0,0)),t=n.x,n=n.y),null==r.offset?r.offset=new mxPoint(t,n):(r.offset.x=parseFloat(r.offset.x)+t,r.offset.y=parseFloat(r.offset.y)+n)}this.model.setGeometry(e,r)}},mxGraph.prototype.getCellContainmentArea=function(e){if(null!=e&&!this.model.isEdge(e)){var t=this.model.getParent(e);if(null!=t&&t!=this.getDefaultParent()){var n=this.model.getGeometry(t);if(null!=n){var r=e=0,i=n.width,n=n.height;if(this.isSwimlane(t)){var s=this.getStartSize(t),o=this.view.getState(t),u=null!=o?o.style:this.getCellStyle(t),t=mxUtils.getValue(u,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),o=1==mxUtils.getValue(u,mxConstants.STYLE_FLIPH,0),u=1==mxUtils.getValue(u,mxConstants.STYLE_FLIPV,0);if(t==mxConstants.DIRECTION_SOUTH||t==mxConstants.DIRECTION_NORTH){var a=s.width;s.width=s.height,s.height=a}if(t==mxConstants.DIRECTION_EAST&&!u||t==mxConstants.DIRECTION_NORTH&&!o||t==mxConstants.DIRECTION_WEST&&u||t==mxConstants.DIRECTION_SOUTH&&o)e=s.width,r=s.height;i-=s.width,n-=s.height}return new mxRectangle(e,r,i,n)}}}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(e,t){if(null!=e){var n=this.getCellGeometry(e);if(null!=n&&(this.isConstrainRelativeChildren()||!n.relative)){var r=this.model.getParent(e);this.getCellGeometry(r);var i=this.getMaximumGraphBounds();null!=i&&(r=this.getBoundingBoxFromGeometry([r],!1),null!=r&&(i=mxRectangle.fromRectangle(i),i.x-=r.x,i.y-=r.y));if(this.isConstrainChild(e)&&(r=this.getCellContainmentArea(e),null!=r)){var s=this.getOverlap(e);0<s&&(r=mxRectangle.fromRectangle(r),r.x-=r.width*s,r.y-=r.height*s,r.width+=2*r.width*s,r.height+=2*r.height*s),null==i?i=r:(i=mxRectangle.fromRectangle(i),i.intersect(r))}if(null!=i){r=[e];if(!this.isCellCollapsed(e))for(var s=this.model.getDescendants(e),o=0;o<s.length;o++)this.isCellVisible(s[o])&&r.push(s[o]);r=this.getBoundingBoxFromGeometry(r,!1);if(null!=r){n=n.clone(),s=0,n.width>i.width&&(s=n.width-i.width,n.width-=s),r.x+r.width>i.x+i.width&&(s-=r.x+r.width-i.x-i.width-s),o=0,n.height>i.height&&(o=n.height-i.height,n.height-=o),r.y+r.height>i.y+i.height&&(o-=r.y+r.height-i.y-i.height-o),r.x<i.x&&(s-=r.x-i.x),r.y<i.y&&(o-=r.y-i.y);if(0!=s||0!=o)n.relative?(null==n.offset&&(n.offset=new mxPoint),n.offset.x+=s,n.offset.y+=o):(n.x+=s,n.y+=o);this.model.setGeometry(e,n)}}}}},mxGraph.prototype.resetEdges=function(e){if(null!=e){for(var t=new mxDictionary,n=0;n<e.length;n++)t.put(e[n],!0);this.model.beginUpdate();try{for(n=0;n<e.length;n++){var r=this.model.getEdges(e[n]);if(null!=r)for(var i=0;i<r.length;i++){var s=this.view.getState(r[i]),o=null!=s?s.getVisibleTerminal(!0):this.view.getVisibleTerminal(r[i],!0),u=null!=s?s.getVisibleTerminal(!1):this.view.getVisibleTerminal(r[i],!1);t.get(o)&&t.get(u)||this.resetEdge(r[i])}this.resetEdges(this.model.getChildren(e[n]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(e){var t=this.model.getGeometry(e);return null!=t&&null!=t.points&&0<t.points.length&&(t=t.clone(),t.points=[],this.model.setGeometry(e,t)),e},mxGraph.prototype.getOutlineConstraint=function(e,t,n){if(null!=t.shape){n=this.view.getPerimeterBounds(t);var r=t.style[mxConstants.STYLE_DIRECTION];if(r==mxConstants.DIRECTION_NORTH||r==mxConstants.DIRECTION_SOUTH){n.x+=n.width/2-n.height/2,n.y+=n.height/2-n.width/2;var i=n.width;n.width=n.height,n.height=i}var s=mxUtils.toRadians(t.shape.getShapeRotation());if(0!=s){var i=Math.cos(-s),s=Math.sin(-s),o=new mxPoint(n.getCenterX(),n.getCenterY());e=mxUtils.getRotatedPoint(e,i,s,o)}var o=s=1,u=0,a=0;if(this.getModel().isVertex(t.cell)){var f=t.style[mxConstants.STYLE_FLIPH],l=t.style[mxConstants.STYLE_FLIPV];null!=t.shape&&null!=t.shape.stencil&&(f=1==mxUtils.getValue(t.style,"stencilFlipH",0)||f,l=1==mxUtils.getValue(t.style,"stencilFlipV",0)||l);if(r==mxConstants.DIRECTION_NORTH||r==mxConstants.DIRECTION_SOUTH)i=f,f=l,l=i;f&&(s=-1,u=-n.width),l&&(o=-1,a=-n.height)}return e=new mxPoint((e.x-n.x)*s-u+n.x,(e.y-n.y)*o-a+n.y),new mxConnectionConstraint(new mxPoint(0==n.width?0:Math.round(1e3*(e.x-n.x)/n.width)/1e3,0==n.height?0:Math.round(1e3*(e.y-n.y)/n.height)/1e3),!1)}return null},mxGraph.prototype.getAllConnectionConstraints=function(e,t){return null!=e&&null!=e.shape&&null!=e.shape.stencil?e.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(e,t,n){t=null;var r=e.style[n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X];if(null!=r){var i=e.style[n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y];null!=i&&(t=new mxPoint(parseFloat(r),parseFloat(i)))}var r=!1,s=i=0;return null!=t&&(r=mxUtils.getValue(e.style,n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0),i=parseFloat(e.style[n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX]),s=parseFloat(e.style[n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY]),i=isFinite(i)?i:0,s=isFinite(s)?s:0),new mxConnectionConstraint(t,r,null,i,s)},mxGraph.prototype.setConnectionConstraint=function(e,t,n,r){if(null!=r){this.model.beginUpdate();try{null==r||null==r.point?(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,null,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,null,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[e])):null!=r.point&&(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,r.point.x,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,r.point.y,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,r.dx,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,r.dy,[e]),r.perimeter?this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[e]):this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,"0",[e]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(e,t){var n=null;if(null!=e&&null!=t.point){var r=this.view.getPerimeterBounds(e),i=new mxPoint(r.getCenterX(),r.getCenterY()),n=e.style[mxConstants.STYLE_DIRECTION],s=0;null!=n&&1==mxUtils.getValue(e.style,mxConstants.STYLE_ANCHOR_POINT_DIRECTION,1)&&(n==mxConstants.DIRECTION_NORTH?s+=270:n==mxConstants.DIRECTION_WEST?s+=180:n==mxConstants.DIRECTION_SOUTH&&(s+=90),n!=mxConstants.DIRECTION_NORTH&&n!=mxConstants.DIRECTION_SOUTH||r.rotate90());var n=this.view.scale,n=new mxPoint(r.x+t.point.x*r.width+t.dx*n,r.y+t.point.y*r.height+t.dy*n),o=e.style[mxConstants.STYLE_ROTATION]||0;if(t.perimeter){if(0!=s){var u=r=0;90==s?u=1:180==s?r=-1:270==s&&(u=-1),n=mxUtils.getRotatedPoint(n,r,u,i)}n=this.view.getPerimeterPoint(e,n,!1)}else o+=s,this.getModel().isVertex(e.cell)&&(s=1==e.style[mxConstants.STYLE_FLIPH],u=1==e.style[mxConstants.STYLE_FLIPV],null!=e.shape&&null!=e.shape.stencil&&(s=1==mxUtils.getValue(e.style,"stencilFlipH",0)||s,u=1==mxUtils.getValue(e.style,"stencilFlipV",0)||u),s&&(n.x=2*r.getCenterX()-n.x),u&&(n.y=2*r.getCenterY()-n.y));0!=o&&null!=n&&(s=mxUtils.toRadians(o),r=Math.cos(s),u=Math.sin(s),n=mxUtils.getRotatedPoint(n,r,u,i))}return null!=n&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),n},mxGraph.prototype.connectCell=function(e,t,n,r){this.model.beginUpdate();try{var i=this.model.getTerminal(e,n);this.cellConnected(e,t,n,r),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",e,"terminal",t,"source",n,"previous",i))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellConnected=function(e,t,n,r){if(null!=e){this.model.beginUpdate();try{var i=this.model.getTerminal(e,n);this.setConnectionConstraint(e,t,n,r),this.isPortsEnabled()&&(r=null,this.isPort(t)&&(r=t.getId(),t=this.getTerminalForPort(t,n)),this.setCellStyles(n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,r,[e])),this.model.setTerminal(e,t,n),this.resetEdgesOnConnect&&this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",e,"terminal",t,"source",n,"previous",i))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(e){if(null!=e){this.model.beginUpdate();try{for(var t=this.view.scale,n=this.view.translate,r=new mxDictionary,i=0;i<e.length;i++)r.put(e[i],!0);for(i=0;i<e.length;i++)if(this.model.isEdge(e[i])){var s=this.model.getGeometry(e[i]);if(null!=s){var o=this.view.getState(e[i]),u=this.view.getState(this.model.getParent(e[i]));if(null!=o&&null!=u){var s=s.clone(),a=-u.origin.x,f=-u.origin.y,l=o.absolutePoints,c=this.model.getTerminal(e[i],!0);if(null!=c&&this.isCellDisconnectable(e[i],c,!0)){for(;null!=c&&!r.get(c);)c=this.model.getParent(c);null==c&&(s.setTerminalPoint(new mxPoint(l[0].x/t-n.x+a,l[0].y/t-n.y+f),!0),this.model.setTerminal(e[i],null,!0))}var h=this.model.getTerminal(e[i],!1);if(null!=h&&this.isCellDisconnectable(e[i],h,!1)){for(;null!=h&&!r.get(h);)h=this.model.getParent(h);if(null==h){var p=l.length-1;s.setTerminalPoint(new mxPoint(l[p].x/t-n.x+a,l[p].y/t-n.y+f),!1),this.model.setTerminal(e[i],null,!1)}}this.model.setGeometry(e[i],s)}}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(e){return null},mxGraph.prototype.isPort=function(e){return!1},mxGraph.prototype.getTerminalForPort=function(e,t){return this.model.getParent(e)},mxGraph.prototype.getChildOffsetForCell=function(e){return null},mxGraph.prototype.enterGroup=function(e){e=e||this.getSelectionCell(),null!=e&&this.isValidRoot(e)&&(this.view.setCurrentRoot(e),this.clearSelection())},mxGraph.prototype.exitGroup=function(){var e=this.model.getRoot(),t=this.getCurrentRoot();if(null!=t){for(var n=this.model.getParent(t);n!=e&&!this.isValidRoot(n)&&this.model.getParent(n)!=e;)n=this.model.getParent(n);n==e||this.model.getParent(n)==e?this.view.setCurrentRoot(null):this.view.setCurrentRoot(n),null!=this.view.getState(t)&&this.setSelectionCell(t)}},mxGraph.prototype.home=function(){var e=this.getCurrentRoot();null!=e&&(this.view.setCurrentRoot(null),null!=this.view.getState(e)&&this.setSelectionCell(e))},mxGraph.prototype.isValidRoot=function(e){return null!=e},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(e,t,n){var r=[e];t&&(r=r.concat(this.model.getEdges(e))),r=this.view.getBounds(r);if(n){n=this.model.getChildCount(e);for(var i=0;i<n;i++){var s=this.getCellBounds(this.model.getChildAt(e,i),t,!0);null!=r?r.add(s):r=s}}return r},mxGraph.prototype.getBoundingBoxFromGeometry=function(e,t){t=null!=t?t:!1;var n=null;if(null!=e)for(var r=0;r<e.length;r++)if(t||this.model.isVertex(e[r])){var i=this.getCellGeometry(e[r]);if(null!=i){var s=null;if(this.model.isEdge(e[r])){s=function(e){null!=e&&(null==o?o=new mxRectangle(e.x,e.y,0,0):o.add(new mxRectangle(e.x,e.y,0,0)))},null==this.model.getTerminal(e[r],!0)&&s(i.getTerminalPoint(!0)),null==this.model.getTerminal(e[r],!1)&&s(i.getTerminalPoint(!1)),i=i.points;if(null!=i&&0<i.length)for(var o=new mxRectangle(i[0].x,i[0].y,0,0),u=1;u<i.length;u++)s(i[u]);s=o}else u=this.model.getParent(e[r]),i.relative?this.model.isVertex(u)&&u!=this.view.currentRoot&&(o=this.getBoundingBoxFromGeometry([u],!1),null!=o&&(s=new mxRectangle(i.x*o.width,i.y*o.height,i.width,i.height),0<=mxUtils.indexOf(e,u)&&(s.x+=o.x,s.y+=o.y))):(s=mxRectangle.fromRectangle(i),this.model.isVertex(u)&&0<=mxUtils.indexOf(e,u)&&(o=this.getBoundingBoxFromGeometry([u],!1),null!=o&&(s.x+=o.x,s.y+=o.y))),null!=s&&null!=i.offset&&(s.x+=i.offset.x,s.y+=i.offset.y);null!=s&&(null==n?n=mxRectangle.fromRectangle(s):n.add(s))}}return n},mxGraph.prototype.refresh=function(e){this.view.clear(e,null==e),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(e){return this.gridEnabled&&(e=Math.round(e/this.gridSize)*this.gridSize),e},mxGraph.prototype.panGraph=function(e,t){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-e,this.container.scrollTop=-t;else{var n=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==e&&0==t){if(mxClient.IS_IE?n.setAttribute("transform","translate("+e+","+t+")"):n.removeAttribute("transform"),null!=this.shiftPreview1){for(var r=this.shiftPreview1.firstChild;null!=r;){var i=r.nextSibling;this.container.appendChild(r),r=i}null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(n.parentNode);for(r=this.shiftPreview2.firstChild;null!=r;)i=r.nextSibling,this.container.appendChild(r),r=i;null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{n.setAttribute("transform","translate("+e+","+t+")");if(null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";for(var s=this.shiftPreview1,r=this.container.firstChild;null!=r;)i=r.nextSibling,r!=n.parentNode?s.appendChild(r):s=this.shiftPreview2,r=i;null!=this.shiftPreview1.firstChild&&this.container.insertBefore(this.shiftPreview1,n.parentNode),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=e+"px",this.shiftPreview1.style.top=t+"px",this.shiftPreview2.style.left=e+"px",this.shiftPreview2.style.top=t+"px"}else n.style.left=e+"px",n.style.top=t+"px";this.panDx=e,this.panDy=t,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(e,t){this.zoom(e/this.view.scale,t)},mxGraph.prototype.center=function(e,t,n,r){e=null!=e?e:!0,t=null!=t?t:!0,n=null!=n?n:.5,r=null!=r?r:.5;var i=mxUtils.hasScrollbars(this.container),s=this.container.clientWidth,o=this.container.clientHeight,u=this.getGraphBounds(),a=this.view.translate,f=this.view.scale,l=e?s-u.width:0,c=t?o-u.height:0;i?(u.x-=a.x,u.y-=a.y,e=this.container.scrollWidth,t=this.container.scrollHeight,e>s&&(l=0),t>o&&(c=0),this.view.setTranslate(Math.floor(l/2-u.x),Math.floor(c/2-u.y)),this.container.scrollLeft=(e-s)/2,this.container.scrollTop=(t-o)/2):this.view.setTranslate(e?Math.floor(a.x-u.x*f+l*n/f):a.x,t?Math.floor(a.y-u.y*f+c*r/f):a.y)},mxGraph.prototype.zoom=function(e,t){t=null!=t?t:this.centerZoom;var n=Math.round(this.view.scale*e*100)/100,r=this.view.getState(this.getSelectionCell());e=n/this.view.scale;if(this.keepSelectionVisibleOnZoom&&null!=r)r=new mxRectangle(r.x*e,r.y*e,r.width*e,r.height*e),this.view.scale=n,this.scrollRectToVisible(r)||(this.view.revalidate(),this.view.setScale(n));else if(r=mxUtils.hasScrollbars(this.container),t&&!r){var r=this.container.offsetWidth,i=this.container.offsetHeight;if(1<e)var s=(e-1)/(2*n),r=r*-s,i=i*-s;else s=(1/e-1)/(2*this.view.scale),r*=s,i*=s;this.view.scaleAndTranslate(n,this.view.translate.x+r,this.view.translate.y+i)}else{var s=this.view.translate.x,o=this.view.translate.y,u=this.container.scrollLeft,a=this.container.scrollTop;this.view.setScale(n),r&&(i=r=0,t&&(r=this.container.offsetWidth*(e-1)/2,i=this.container.offsetHeight*(e-1)/2),this.container.scrollLeft=(this.view.translate.x-s)*this.view.scale+Math.round(u*e+r),this.container.scrollTop=(this.view.translate.y-o)*this.view.scale+Math.round(a*e+i))}},mxGraph.prototype.zoomToRect=function(e){var t=this.container.clientWidth/e.width/(this.container.clientHeight/e.height);e.x=Math.max(0,e.x),e.y=Math.max(0,e.y);var n=Math.min(this.container.scrollWidth,e.x+e.width),r=Math.min(this.container.scrollHeight,e.y+e.height);e.width=n-e.x,e.height=r-e.y,1>t?(t=e.height/t,n=(t-e.height)/2,e.height=t,e.y-=Math.min(e.y,n),r=Math.min(this.container.scrollHeight,e.y+e.height),e.height=r-e.y):(t*=e.width,n=(t-e.width)/2,e.width=t,e.x-=Math.min(e.x,n),n=Math.min(this.container.scrollWidth,e.x+e.width),e.width=n-e.x),t=this.container.clientWidth/e.width,n=this.view.scale*t,mxUtils.hasScrollbars(this.container)?(this.view.setScale(n),this.container.scrollLeft=Math.round(e.x*t),this.container.scrollTop=Math.round(e.y*t)):this.view.scaleAndTranslate(n,this.view.translate.x-e.x/this.view.scale,this.view.translate.y-e.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(e,t){var n=-this.view.translate.x,r=-this.view.translate.y,i=this.view.getState(e);null!=i&&(n=new mxRectangle(n+i.x,r+i.y,i.width,i.height),t&&null!=this.container&&(r=this.container.clientWidth,i=this.container.clientHeight,n.x=n.getCenterX()-r/2,n.width=r,n.y=n.getCenterY()-i/2,n.height=i),r=new mxPoint(this.view.translate.x,this.view.translate.y),this.scrollRectToVisible(n)&&(n=new mxPoint(this.view.translate.x,this.view.translate.y),this.view.translate.x=r.x,this.view.translate.y=r.y,this.view.setTranslate(n.x,n.y)))},mxGraph.prototype.scrollRectToVisible=function(e){var t=!1;if(null!=e){var n=this.container.offsetWidth,r=this.container.offsetHeight,i=Math.min(n,e.width),s=Math.min(r,e.height);if(mxUtils.hasScrollbars(this.container)){n=this.container,e.x+=this.view.translate.x,e.y+=this.view.translate.y;var o=n.scrollLeft-e.x,r=Math.max(o-n.scrollLeft,0);0<o?n.scrollLeft-=o+2:(o=e.x+i-n.scrollLeft-n.clientWidth,0<o&&(n.scrollLeft+=o+2)),i=n.scrollTop-e.y,o=Math.max(0,i-n.scrollTop),0<i?n.scrollTop-=i+2:(i=e.y+s-n.scrollTop-n.clientHeight,0<i&&(n.scrollTop+=i+2)),this.useScrollbarsForPanning||0==r&&0==o||this.view.setTranslate(r,o)}else{var o=-this.view.translate.x,u=-this.view.translate.y,a=this.view.scale;e.x+i>o+n&&(this.view.translate.x-=(e.x+i-n-o)/a,t=!0),e.y+s>u+r&&(this.view.translate.y-=(e.y+s-r-u)/a,t=!0),e.x<o&&(this.view.translate.x+=(o-e.x)/a,t=!0),e.y<u&&(this.view.translate.y+=(u-e.y)/a,t=!0),t&&(this.view.refresh(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.refresh())}}return t},mxGraph.prototype.getCellGeometry=function(e){return this.model.getGeometry(e)},mxGraph.prototype.isCellVisible=function(e){return this.model.isVisible(e)},mxGraph.prototype.isCellCollapsed=function(e){return this.model.isCollapsed(e)},mxGraph.prototype.isCellConnectable=function(e){return this.model.isConnectable(e)},mxGraph.prototype.isOrthogonal=function(e){var t=e.style[mxConstants.STYLE_ORTHOGONAL];return null!=t?t:(e=this.view.getEdgeStyle(e),e==mxEdgeStyle.SegmentConnector||e==mxEdgeStyle.ElbowConnector||e==mxEdgeStyle.SideToSide||e==mxEdgeStyle.TopToBottom||e==mxEdgeStyle.EntityRelation||e==mxEdgeStyle.OrthConnector)},mxGraph.prototype.isLoop=function(e){var t=e.getVisibleTerminalState(!0);return e=e.getVisibleTerminalState(!1),null!=t&&t==e},mxGraph.prototype.isCloneEvent=function(e){return mxEvent.isControlDown(e)},mxGraph.prototype.isTransparentClickEvent=function(e){return!1},mxGraph.prototype.isToggleEvent=function(e){return mxClient.IS_MAC?mxEvent.isMetaDown(e):mxEvent.isControlDown(e)},mxGraph.prototype.isGridEnabledEvent=function(e){return null!=e&&!mxEvent.isAltDown(e)},mxGraph.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e)},mxGraph.prototype.isIgnoreTerminalEvent=function(e){return!1},mxGraph.prototype.validationAlert=function(e){mxUtils.alert(e)},mxGraph.prototype.isEdgeValid=function(e,t,n){return null==this.getEdgeValidationError(e,t,n)},mxGraph.prototype.getEdgeValidationError=function(e,t,n){if(null==e||!!this.isAllowDanglingEdges()||null!=t&&null!=n){if(null!=e&&null==this.model.getTerminal(e,!0)&&null==this.model.getTerminal(e,!1))return null;if(!this.allowLoops&&t==n&&null!=t||!this.isValidConnection(t,n))return"";if(null!=t&&null!=n){var r="";if(!this.multigraph){var i=this.model.getEdgesBetween(t,n,!0);if(1<i.length||1==i.length&&i[0]!=e)r+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n"}var i=this.model.getDirectedEdgeCount(t,!0,e),s=this.model.getDirectedEdgeCount(n,!1,e);if(null!=this.multiplicities)for(var o=0;o<this.multiplicities.length;o++){var u=this.multiplicities[o].check(this,e,t,n,i,s);null!=u&&(r+=u)}return u=this.validateEdge(e,t,n),null!=u&&(r+=u),0<r.length?r:null}return this.allowDanglingEdges?null:""}return""},mxGraph.prototype.validateEdge=function(e,t,n){return null},mxGraph.prototype.validateGraph=function(e,t){e=null!=e?e:this.model.getRoot(),t=null!=t?t:{};for(var n=!0,r=this.model.getChildCount(e),i=0;i<r;i++){var s=this.model.getChildAt(e,i),o=t;this.isValidRoot(s)&&(o={}),o=this.validateGraph(s,o),null!=o?this.setCellWarning(s,o.replace(/\n/g,"<br>")):this.setCellWarning(s,null),n=n&&null==o}return r="",this.isCellCollapsed(e)&&!n&&(r+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),r=this.model.isEdge(e)?r+(this.getEdgeValidationError(e,this.model.getTerminal(e,!0),this.model.getTerminal(e,!1))||""):r+(this.getCellValidationError(e)||""),i=this.validateCell(e,t),null!=i&&(r+=i),null==this.model.getParent(e)&&this.view.validate(),0<r.length||!n?r:null},mxGraph.prototype.getCellValidationError=function(e){var t=this.model.getDirectedEdgeCount(e,!0),n=this.model.getDirectedEdgeCount(e,!1);e=this.model.getValue(e);var r="";if(null!=this.multiplicities)for(var i=0;i<this.multiplicities.length;i++){var s=this.multiplicities[i];s.source&&mxUtils.isNode(e,s.type,s.attr,s.value)&&(t>s.max||t<s.min)?r+=s.countError+"\n":!s.source&&mxUtils.isNode(e,s.type,s.attr,s.value)&&(n>s.max||n<s.min)&&(r+=s.countError+"\n")}return 0<r.length?r:null},mxGraph.prototype.validateCell=function(e,t){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(e){this.backgroundImage=e},mxGraph.prototype.getFoldingImage=function(e){if(null!=e&&this.foldingEnabled&&!this.getModel().isEdge(e.cell)){var t=this.isCellCollapsed(e.cell);if(this.isCellFoldable(e.cell,!t))return t?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(e){e=this.model.getValue(e);if(null!=e){if(mxUtils.isNode(e))return e.nodeName;if("function"==typeof e.toString)return e.toString()}return""},mxGraph.prototype.getLabel=function(e){var t="";if(this.labelsVisible&&null!=e){var n=this.view.getState(e),n=null!=n?n.style:this.getCellStyle(e);mxUtils.getValue(n,mxConstants.STYLE_NOLABEL,!1)||(t=this.convertValueToString(e))}return t},mxGraph.prototype.isHtmlLabel=function(e){return this.isHtmlLabels()},mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(e){this.htmlLabels=e},mxGraph.prototype.isWrapping=function(e){var t=this.view.getState(e);return e=null!=t?t.style:this.getCellStyle(e),null!=e?"wrap"==e[mxConstants.STYLE_WHITE_SPACE]:!1},mxGraph.prototype.isLabelClipped=function(e){var t=this.view.getState(e);return e=null!=t?t.style:this.getCellStyle(e),null!=e?"hidden"==e[mxConstants.STYLE_OVERFLOW]:!1},mxGraph.prototype.getTooltip=function(e,t,n,r){var i=null;return null!=e&&(null==e.control||t!=e.control.node&&t.parentNode!=e.control.node||(i=this.collapseExpandResource,i=mxUtils.htmlEntities(mxResources.get(i)||i).replace(/\\n/g,"<br>")),null==i&&null!=e.overlays&&e.overlays.visit(function(e,n){null!=i||t!=n.node&&t.parentNode!=n.node||(i=n.overlay.toString())}),null==i&&(n=this.selectionCellsHandler.getHandler(e.cell),null!=n&&"function"==typeof n.getTooltipForNode&&(i=n.getTooltipForNode(t))),null==i&&(i=this.getTooltipForCell(e.cell))),i},mxGraph.prototype.getTooltipForCell=function(e){return null!=e&&null!=e.getTooltip?e.getTooltip():this.convertValueToString(e)},mxGraph.prototype.getLinkForCell=function(e){return null},mxGraph.prototype.getCursorForMouseEvent=function(e){return this.getCursorForCell(e.getCell())},mxGraph.prototype.getCursorForCell=function(e){return null},mxGraph.prototype.getStartSize=function(e){var t=new mxRectangle,n=this.view.getState(e);return e=null!=n?n.style:this.getCellStyle(e),null!=e&&(n=parseInt(mxUtils.getValue(e,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),mxUtils.getValue(e,mxConstants.STYLE_HORIZONTAL,!0)?t.height=n:t.width=n),t},mxGraph.prototype.getImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.getVerticalAlign=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(e){this.border=e},mxGraph.prototype.isSwimlane=function(e){if(null!=e&&this.model.getParent(e)!=this.model.getRoot()){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);if(null!=t&&!this.model.isEdge(e))return t[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE}return!1},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(e){this.resizeContainer=e},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(e){this.enabled=e},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(e){this.escapeEnabled=e},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(e){this.invokesStopCellEditing=e},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(e){this.enterStopsCellEditing=e},mxGraph.prototype.isCellLocked=function(e){var t=this.model.getGeometry(e);return this.isCellsLocked()||null!=t&&this.model.isVertex(e)&&t.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(e){this.cellsLocked=e},mxGraph.prototype.getCloneableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(e){return this.isCellCloneable(e)}))},mxGraph.prototype.isCellCloneable=function(e){var t=this.view.getState(e);return e=null!=t?t.style:this.getCellStyle(e),this.isCellsCloneable()&&0!=e[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(e){this.cellsCloneable=e},mxGraph.prototype.getExportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(e){return this.canExportCell(e)}))},mxGraph.prototype.canExportCell=function(e){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(e){return this.canImportCell(e)}))},mxGraph.prototype.canImportCell=function(e){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(e){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(e){this.cellsSelectable=e},mxGraph.prototype.getDeletableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(e){return this.isCellDeletable(e)}))},mxGraph.prototype.isCellDeletable=function(e){var t=this.view.getState(e);return e=null!=t?t.style:this.getCellStyle(e),this.isCellsDeletable()&&0!=e[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(e){this.cellsDeletable=e},mxGraph.prototype.isLabelMovable=function(e){return!this.isCellLocked(e)&&(this.model.isEdge(e)&&this.edgeLabelsMovable||this.model.isVertex(e)&&this.vertexLabelsMovable)},mxGraph.prototype.isCellRotatable=function(e){var t=this.view.getState(e);return 0!=(null!=t?t.style:this.getCellStyle(e))[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(e){return this.isCellMovable(e)}))},mxGraph.prototype.isCellMovable=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=t[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(e){this.cellsMovable=e},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(e){this.portsEnabled=e},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(e){this.gridSize=e},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(e){this.tolerance=e},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(e){this.vertexLabelsMovable=e},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(e){this.edgeLabelsMovable=e},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(e){this.swimlaneNesting=e},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(e){this.swimlaneSelectionEnabled=e},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(e){this.multigraph=e},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(e){this.allowDanglingEdges=e},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(e){this.connectableEdges=e},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(e){this.cloneInvalidEdges=e},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(e){this.allowLoops=e},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(e){this.disconnectOnMove=e},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(e){this.dropEnabled=e},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(e){this.splitEnabled=e},mxGraph.prototype.isCellResizable=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return this.isCellsResizable()&&!this.isCellLocked(e)&&"0"!=mxUtils.getValue(t,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(e){this.cellsResizable=e},mxGraph.prototype.isTerminalPointMovable=function(e,t){return!0},mxGraph.prototype.isCellBendable=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return this.isCellsBendable()&&!this.isCellLocked(e)&&0!=t[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(e){this.cellsBendable=e},mxGraph.prototype.isCellEditable=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return this.isCellsEditable()&&!this.isCellLocked(e)&&0!=t[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(e){this.cellsEditable=e},mxGraph.prototype.isCellDisconnectable=function(e,t,n){return this.isCellsDisconnectable()&&!this.isCellLocked(e)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(e){this.cellsDisconnectable=e},mxGraph.prototype.isValidSource=function(e){return null==e&&this.allowDanglingEdges||null!=e&&(!this.model.isEdge(e)||this.connectableEdges)&&this.isCellConnectable(e)},mxGraph.prototype.isValidTarget=function(e){return this.isValidSource(e)},mxGraph.prototype.isValidConnection=function(e,t){return this.isValidSource(e)&&this.isValidTarget(t)},mxGraph.prototype.setConnectable=function(e){this.connectionHandler.setEnabled(e)},mxGraph.prototype.isConnectable=function(e){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(e){this.tooltipHandler.setEnabled(e)},mxGraph.prototype.setPanning=function(e){this.panningHandler.panningEnabled=e},mxGraph.prototype.isEditing=function(e){if(null!=this.cellEditor){var t=this.cellEditor.getEditingCell();return null==e?null!=t:e==t}return!1},mxGraph.prototype.isAutoSizeCell=function(e){var t=this.view.getState(e);return e=null!=t?t.style:this.getCellStyle(e),this.isAutoSizeCells()||1==e[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(e){this.autoSizeCells=e},mxGraph.prototype.isExtendParent=function(e){return!this.getModel().isEdge(e)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(e){this.extendParents=e},mxGraph.prototype.isExtendParentsOnAdd=function(e){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(e){this.extendParentsOnAdd=e},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(e){this.extendParentsOnMove=e},mxGraph.prototype.isRecursiveResize=function(e){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(e){this.recursiveResize=e},mxGraph.prototype.isConstrainChild=function(e){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(e))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(e){this.constrainChildren=e},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(e){this.constrainRelativeChildren=e},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(e){this.allowNegativeCoordinates=e},mxGraph.prototype.getOverlap=function(e){return this.isAllowOverlapParent(e)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(e){return!1},mxGraph.prototype.getFoldableCells=function(e,t){return this.model.filterCells(e,mxUtils.bind(this,function(e){return this.isCellFoldable(e,t)}))},mxGraph.prototype.isCellFoldable=function(e,t){var n=this.view.getState(e),n=null!=n?n.style:this.getCellStyle(e);return 0<this.model.getChildCount(e)&&0!=n[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(e,t,n){return null!=e&&(this.isSplitEnabled()&&this.isSplitTarget(e,t,n)||!this.model.isEdge(e)&&(this.isSwimlane(e)||0<this.model.getChildCount(e)&&!this.isCellCollapsed(e)))},mxGraph.prototype.isSplitTarget=function(e,t,n){return this.model.isEdge(e)&&null!=t&&1==t.length&&this.isCellConnectable(t[0])&&null==this.getEdgeValidationError(e,this.model.getTerminal(e,!0),t[0])?(n=this.model.getTerminal(e,!0),e=this.model.getTerminal(e,!1),!this.model.isAncestor(t[0],n)&&!this.model.isAncestor(t[0],e)):!1},mxGraph.prototype.getDropTarget=function(e,t,n,r){if(!this.isSwimlaneNesting())for(var i=0;i<e.length;i++)if(this.isSwimlane(e[i]))return null;i=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),i.x-=this.panDx,i.y-=this.panDy,i=this.getSwimlaneAt(i.x,i.y);if(null==n)n=i;else if(null!=i){for(var s=this.model.getParent(i);null!=s&&this.isSwimlane(s)&&s!=n;)s=this.model.getParent(s);s==n&&(n=i)}for(;null!=n&&!this.isValidDropTarget(n,e,t)&&!this.model.isLayer(n);)n=this.model.getParent(n);if(null==r||!r)for(var o=n;null!=o&&0>mxUtils.indexOf(e,o);)o=this.model.getParent(o);return this.model.isLayer(n)||null!=o?null:n},mxGraph.prototype.getDefaultParent=function(){var e=this.getCurrentRoot();return null==e&&(e=this.defaultParent,null==e&&(e=this.model.getRoot(),e=this.model.getChildAt(e,0))),e},mxGraph.prototype.setDefaultParent=function(e){this.defaultParent=e},mxGraph.prototype.getSwimlane=function(e){for(;null!=e&&!this.isSwimlane(e);)e=this.model.getParent(e);return e},mxGraph.prototype.getSwimlaneAt=function(e,t,n){n=n||this.getDefaultParent();if(null!=n)for(var r=this.model.getChildCount(n),i=0;i<r;i++){var s=this.model.getChildAt(n,i),o=this.getSwimlaneAt(e,t,s);if(null!=o)return o;if(this.isSwimlane(s)&&(o=this.view.getState(s),this.intersects(o,e,t)))return s}return null},mxGraph.prototype.getCellAt=function(e,t,n,r,i,s){r=null!=r?r:!0,i=null!=i?i:!0,null==n&&(n=this.getCurrentRoot(),null==n&&(n=this.getModel().getRoot()));if(null!=n)for(var o=this.model.getChildCount(n)-1;0<=o;o--){var u=this.model.getChildAt(n,o),a=this.getCellAt(e,t,u,r,i,s);if(null!=a)return a;if(this.isCellVisible(u)&&(i&&this.model.isEdge(u)||r&&this.model.isVertex(u))&&(a=this.view.getState(u),null!=a&&(null==s||!s(a,e,t))&&this.intersects(a,e,t)))return u}return null},mxGraph.prototype.intersects=function(e,t,n){if(null!=e){var r=e.absolutePoints;if(null!=r){e=this.tolerance*this.tolerance;for(var i=r[0],s=1;s<r.length;s++){var o=r[s];if(mxUtils.ptSegDistSq(i.x,i.y,o.x,o.y,t,n)<=e)return!0;i=o}}else if(i=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0),0!=i&&(r=Math.cos(-i),i=Math.sin(-i),s=new mxPoint(e.getCenterX(),e.getCenterY()),i=mxUtils.getRotatedPoint(new mxPoint(t,n),r,i,s),t=i.x,n=i.y),mxUtils.contains(e,t,n))return!0}return!1},mxGraph.prototype.hitsSwimlaneContent=function(e,t,n){var r=this.getView().getState(e);e=this.getStartSize(e);if(null!=r){var i=this.getView().getScale();t-=r.x,n-=r.y;if(0<e.width&&0<t&&t>e.width*i||0<e.height&&0<n&&n>e.height*i)return!0}return!1},mxGraph.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraph.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraph.prototype.getChildCells=function(e,t,n){e=null!=e?e:this.getDefaultParent(),e=this.model.getChildCells(e,null!=t?t:!1,null!=n?n:!1),t=[];for(n=0;n<e.length;n++)this.isCellVisible(e[n])&&t.push(e[n]);return t},mxGraph.prototype.getConnections=function(e,t){return this.getEdges(e,t,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(e,t){return this.getEdges(e,t,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(e,t){return this.getEdges(e,t,!1,!0,!1)},mxGraph.prototype.getEdges=function(e,t,n,r,i,s){n=null!=n?n:!0,r=null!=r?r:!0,i=null!=i?i:!0,s=null!=s?s:!1;for(var o=[],u=this.isCellCollapsed(e),a=this.model.getChildCount(e),f=0;f<a;f++){var l=this.model.getChildAt(e,f);if(u||!this.isCellVisible(l))o=o.concat(this.model.getEdges(l,n,r))}o=o.concat(this.model.getEdges(e,n,r)),u=[];for(f=0;f<o.length;f++)l=this.view.getState(o[f]),a=null!=l?l.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[f],!0),l=null!=l?l.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[f],!1),(i&&a==l||a!=l&&(n&&l==e&&(null==t||this.isValidAncestor(a,t,s))||r&&a==e&&(null==t||this.isValidAncestor(l,t,s))))&&u.push(o[f]);return u},mxGraph.prototype.isValidAncestor=function(e,t,n){return n?this.model.isAncestor(t,e):this.model.getParent(e)==t},mxGraph.prototype.getOpposites=function(e,t,n,r){n=null!=n?n:!0,r=null!=r?r:!0;var i=[],s=new mxDictionary;if(null!=e)for(var o=0;o<e.length;o++){var u=this.view.getState(e[o]),a=null!=u?u.getVisibleTerminal(!0):this.view.getVisibleTerminal(e[o],!0),u=null!=u?u.getVisibleTerminal(!1):this.view.getVisibleTerminal(e[o],!1);a==t&&null!=u&&u!=t&&r?s.get(u)||(s.put(u,!0),i.push(u)):u==t&&null!=a&&a!=t&&n&&!s.get(a)&&(s.put(a,!0),i.push(a))}return i},mxGraph.prototype.getEdgesBetween=function(e,t,n){n=null!=n?n:!1;for(var r=this.getEdges(e),i=[],s=0;s<r.length;s++){var o=this.view.getState(r[s]),u=null!=o?o.getVisibleTerminal(!0):this.view.getVisibleTerminal(r[s],!0),o=null!=o?o.getVisibleTerminal(!1):this.view.getVisibleTerminal(r[s],!1);(u==e&&o==t||!n&&u==t&&o==e)&&i.push(r[s])}return i},mxGraph.prototype.getPointForEvent=function(e,t){var n=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),r=this.view.scale,i=this.view.translate,s=0!=t?this.gridSize/2:0;return n.x=this.snap(n.x/r-i.x-s),n.y=this.snap(n.y/r-i.y-s),n},mxGraph.prototype.getCells=function(e,t,n,r,i,s){s=null!=s?s:[];if(0<n||0<r){var o=this.getModel(),u=e+n,a=t+r;null==i&&(i=this.getCurrentRoot(),null==i&&(i=o.getRoot()));if(null!=i)for(var f=o.getChildCount(i),l=0;l<f;l++){var c=o.getChildAt(i,l),h=this.view.getState(c);if(null!=h&&this.isCellVisible(c)){var p=mxUtils.getValue(h.style,mxConstants.STYLE_ROTATION)||0;0!=p&&(h=mxUtils.getBoundingBox(h,p)),(o.isEdge(c)||o.isVertex(c))&&h.x>=e&&h.y+h.height<=a&&h.y>=t&&h.x+h.width<=u?s.push(c):this.getCells(e,t,n,r,c,s)}}}return s},mxGraph.prototype.getCellsBeyond=function(e,t,n,r,i){var s=[];if(r||i)if(null==n&&(n=this.getDefaultParent()),null!=n)for(var o=this.model.getChildCount(n),u=0;u<o;u++){var a=this.model.getChildAt(n,u),f=this.view.getState(a);this.isCellVisible(a)&&null!=f&&(!r||f.x>=e)&&(!i||f.y>=t)&&s.push(a)}return s},mxGraph.prototype.findTreeRoots=function(e,t,n){t=null!=t?t:!1,n=null!=n?n:!1;var r=[];if(null!=e){for(var i=this.getModel(),s=i.getChildCount(e),o=null,u=0,a=0;a<s;a++){var f=i.getChildAt(e,a);if(this.model.isVertex(f)&&this.isCellVisible(f)){for(var l=this.getConnections(f,t?e:null),c=0,h=0,p=0;p<l.length;p++)this.view.getVisibleTerminal(l[p],!0)==f?c++:h++;(n&&0==c&&0<h||!n&&0==h&&0<c)&&r.push(f),l=n?h-c:c-h,l>u&&(u=l,o=f)}}0==r.length&&null!=o&&r.push(o)}return r},mxGraph.prototype.traverse=function(e,t,n,r,i,s){if(null!=n&&null!=e&&(t=null!=t?t:!0,s=null!=s?s:!1,i=i||new mxDictionary,!i.get(e)&&(i.put(e,!0),r=n(e,r),null==r||r))&&(r=this.model.getEdgeCount(e),0<r))for(var o=0;o<r;o++){var u=this.model.getEdgeAt(e,o),a=this.model.getTerminal(u,!0)==e;t&&!s!=a||(a=this.model.getTerminal(u,!a),this.traverse(a,t,n,u,i,s))}},mxGraph.prototype.isCellSelected=function(e){return this.getSelectionModel().isSelected(e)},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(e){this.getSelectionModel().setCell(e)},mxGraph.prototype.setSelectionCells=function(e){this.getSelectionModel().setCells(e)},mxGraph.prototype.addSelectionCell=function(e){this.getSelectionModel().addCell(e)},mxGraph.prototype.addSelectionCells=function(e){this.getSelectionModel().addCells(e)},mxGraph.prototype.removeSelectionCell=function(e){this.getSelectionModel().removeCell(e)},mxGraph.prototype.removeSelectionCells=function(e){this.getSelectionModel().removeCells(e)},mxGraph.prototype.selectRegion=function(e,t){var n=this.getCells(e.x,e.y,e.width,e.height);return this.selectCellsForEvent(n,t),n},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(e,t,n){var r=this.selectionModel,i=0<r.cells.length?r.cells[0]:null;1<r.cells.length&&r.clear();var r=null!=i?this.model.getParent(i):this.getDefaultParent(),s=this.model.getChildCount(r);null==i&&0<s?(e=this.model.getChildAt(r,0),this.setSelectionCell(e)):null!=i&&!t||null==this.view.getState(r)||null==this.model.getGeometry(r)?null!=i&&n?0<this.model.getChildCount(i)&&(e=this.model.getChildAt(i,0),this.setSelectionCell(e)):0<s&&(t=r.getIndex(i),e?(t++,e=this.model.getChildAt(r,t%s)):(t--,e=this.model.getChildAt(r,0>t?s-1:t)),this.setSelectionCell(e)):this.getCurrentRoot()!=r&&this.setSelectionCell(r)},mxGraph.prototype.selectAll=function(e,t){e=e||this.getDefaultParent();var n=t?this.model.filterDescendants(function(t){return t!=e},e):this.model.getChildren(e);null!=n&&this.setSelectionCells(n)},mxGraph.prototype.selectVertices=function(e){this.selectCells(!0,!1,e)},mxGraph.prototype.selectEdges=function(e){this.selectCells(!1,!0,e)},mxGraph.prototype.selectCells=function(e,t,n){n=n||this.getDefaultParent();var r=mxUtils.bind(this,function(n){return null!=this.view.getState(n)&&(0==this.model.getChildCount(n)&&this.model.isVertex(n)&&e&&!this.model.isEdge(this.model.getParent(n))||this.model.isEdge(n)&&t)});n=this.model.filterDescendants(r,n),this.setSelectionCells(n)},mxGraph.prototype.selectCellForEvent=function(e,t){var n=this.isCellSelected(e);this.isToggleEvent(t)?n?this.removeSelectionCell(e):this.addSelectionCell(e):n&&1==this.getSelectionCount()||this.setSelectionCell(e)},mxGraph.prototype.selectCellsForEvent=function(e,t){this.isToggleEvent(t)?this.addSelectionCells(e):this.setSelectionCells(e)},mxGraph.prototype.createHandler=function(e){var t=null;if(null!=e)if(this.model.isEdge(e.cell))var t=e.getVisibleTerminalState(!0),n=e.getVisibleTerminalState(!1),r=this.getCellGeometry(e.cell),t=this.view.getEdgeStyle(e,null!=r?r.points:null,t,n),t=this.createEdgeHandler(e,t);else t=this.createVertexHandler(e);return t},mxGraph.prototype.createVertexHandler=function(e){return new mxVertexHandler(e)},mxGraph.prototype.createEdgeHandler=function(e,t){return t==mxEdgeStyle.Loop||t==mxEdgeStyle.ElbowConnector||t==mxEdgeStyle.SideToSide||t==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(e):t==mxEdgeStyle.SegmentConnector||t==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(e):new mxEdgeHandler(e)},mxGraph.prototype.createEdgeSegmentHandler=function(e){return new mxEdgeSegmentHandler(e)},mxGraph.prototype.createElbowEdgeHandler=function(e){return new mxElbowEdgeHandler(e)},mxGraph.prototype.addMouseListener=function(e){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(e)},mxGraph.prototype.removeMouseListener=function(e){if(null!=this.mouseListeners)for(var t=0;t<this.mouseListeners.length;t++)if(this.mouseListeners[t]==e){this.mouseListeners.splice(t,1);break}},mxGraph.prototype.updateMouseEvent=function(e,t){if(null==e.graphX||null==e.graphY){var n=mxUtils.convertPoint(this.container,e.getX(),e.getY());e.graphX=n.x-this.panDx,e.graphY=n.y-this.panDy,null==e.getCell()&&this.isMouseDown&&t==mxEvent.MOUSE_MOVE&&(e.state=this.view.getState(this.getCellAt(n.x,n.y,null,null,null,function(e){return null==e.shape||e.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(e.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=e.shape.fill&&e.shape.fill!=mxConstants.NONE})))}return e},mxGraph.prototype.getStateForTouchEvent=function(e){var t=mxEvent.getClientX(e);return e=mxEvent.getClientY(e),t=mxUtils.convertPoint(this.container,t,e),this.view.getState(this.getCellAt(t.x,t.y))},mxGraph.prototype.isEventIgnored=function(e,t,n){var r=mxEvent.isMouseEvent(t.getEvent()),i=!1;return t.getEvent()==this.lastEvent?i=!0:this.lastEvent=t.getEvent(),null!=this.eventSource&&e!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.eventSource=this.mouseUpRedirect=this.mouseMoveRedirect=null):mxClient.IS_GC||null==this.eventSource||t.getSource()==this.eventSource?!mxClient.IS_TOUCH||e!=mxEvent.MOUSE_DOWN||r||mxEvent.isPenEvent(t.getEvent())||(this.eventSource=t.getSource(),this.mouseMoveRedirect=mxUtils.bind(this,function(e){this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e,this.getStateForTouchEvent(e)))}),this.mouseUpRedirect=mxUtils.bind(this,function(e){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e,this.getStateForTouchEvent(e)))}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)):i=!0,this.isSyntheticEventIgnored(e,t,n)&&(i=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&e!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail?!0:(e==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:e!=mxEvent.MOUSE_DOWN||this.isMouseDown?!i&&((!mxClient.IS_FF||e!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=r||e==mxEvent.MOUSE_DOWN&&this.isMouseDown||e==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(i=!0):(this.isMouseDown=!0,this.isMouseTrigger=r),i||e!=mxEvent.MOUSE_DOWN||(this.lastMouseX=t.getX(),this.lastMouseY=t.getY()),i)},mxGraph.prototype.isSyntheticEventIgnored=function(e,t,n){return n=!1,t=mxEvent.isMouseEvent(t.getEvent()),this.ignoreMouseEvents&&t&&e!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=e!=mxEvent.MOUSE_UP,n=!0):mxClient.IS_FF&&!t&&e==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),n},mxGraph.prototype.isEventSourceIgnored=function(e,t){var n=t.getSource(),r=null!=n.nodeName?n.nodeName.toLowerCase():"",i=!mxEvent.isMouseEvent(t.getEvent())||mxEvent.isLeftMouseButton(t.getEvent());return e==mxEvent.MOUSE_DOWN&&i&&("select"==r||"option"==r||"input"==r&&"checkbox"!=n.type&&"radio"!=n.type&&"button"!=n.type&&"submit"!=n.type&&"file"!=n.type)},mxGraph.prototype.getEventState=function(e){return e},mxGraph.prototype.fireMouseEvent=function(e,t,n){if(this.isEventSourceIgnored(e,t))null!=this.tooltipHandler&&this.tooltipHandler.hide();else{null==n&&(n=this),t=this.updateMouseEvent(t,e);if(!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(t.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent.isTouchEvent(t.getEvent())||mxEvent.isPenEvent(t.getEvent()))){var r=(new Date).getTime();if(!mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_DOWN||mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_UP&&!this.fireDoubleClick){if(null!=this.lastTouchEvent&&this.lastTouchEvent!=t.getEvent()&&r-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance&&2>this.doubleClickCounter){if(this.doubleClickCounter++,r=!1,e==mxEvent.MOUSE_UP?t.getCell()==this.lastTouchCell&&null!=this.lastTouchCell&&(this.lastTouchTime=0,r=this.lastTouchCell,this.lastTouchCell=null,mxClient.IS_QUIRKS&&t.getSource().fireEvent("ondblclick"),this.dblClick(t.getEvent(),r),r=!0):(this.fireDoubleClick=!0,this.lastTouchTime=0),!mxClient.IS_QUIRKS||r){mxEvent.consume(t.getEvent());return}}else if(null==this.lastTouchEvent||this.lastTouchEvent!=t.getEvent())this.lastTouchCell=t.getCell(),this.lastTouchX=t.getX(),this.lastTouchY=t.getY(),this.lastTouchTime=r,this.lastTouchEvent=t.getEvent(),this.doubleClickCounter=0}else if((this.isMouseDown||e==mxEvent.MOUSE_UP)&&this.fireDoubleClick){this.fireDoubleClick=!1,r=this.lastTouchCell,this.lastTouchCell=null,this.isMouseDown=!1,(null!=r||(mxEvent.isTouchEvent(t.getEvent())||mxEvent.isPenEvent(t.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF))&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance?this.dblClick(t.getEvent(),r):mxEvent.consume(t.getEvent());return}}if(!this.isEventIgnored(e,t,n)){t.state=this.getEventState(t.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",e,"event",t));if(mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||t.getEvent().target!=this.container){if(e==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(t.getEvent))this.scrollPointToVisible(t.getGraphX(),t.getGraphY(),this.autoExtend);else if(e==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)){var r=this.view.scale,i=this.view.translate;this.view.setTranslate(i.x-this.container.scrollLeft/r,i.y-this.container.scrollTop/r),this.container.scrollLeft=0,this.container.scrollTop=0}if(null!=this.mouseListeners)for(r=[n,t],t.getEvent().preventDefault||(t.getEvent().returnValue=!0),i=0;i<this.mouseListeners.length;i++){var s=this.mouseListeners[i];e==mxEvent.MOUSE_DOWN?s.mouseDown.apply(s,r):e==mxEvent.MOUSE_MOVE?s.mouseMove.apply(s,r):e==mxEvent.MOUSE_UP&&s.mouseUp.apply(s,r)}e==mxEvent.MOUSE_UP&&this.click(t)}(mxEvent.isTouchEvent(t.getEvent())||mxEvent.isPenEvent(t.getEvent()))&&e==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress?(this.tapAndHoldInProgress=!0,this.initialTouchX=t.getGraphX(),this.initialTouchY=t.getGraphY(),this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,function(){this.tapAndHoldValid&&this.tapAndHold(t),this.tapAndHoldValid=this.tapAndHoldInProgress=!1}),this.tapAndHoldDelay),this.tapAndHoldValid=!0):e==mxEvent.MOUSE_UP?this.tapAndHoldValid=this.tapAndHoldInProgress=!1:this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-t.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-t.getGraphY())<this.tolerance),e==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(t.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(e,t,n)}}},mxGraph.prototype.consumeMouseEvent=function(e,t,n){e==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(t.getEvent())&&t.consume(!1)},mxGraph.prototype.fireGestureEvent=function(e,t){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",e,"cell",t))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM,mxCellOverlay.prototype.offset=null,mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(e){var t=e.view.graph.getModel().isEdge(e.cell),n=e.view.scale,r=this.image.width,i=this.image.height;if(t)if(t=e.absolutePoints,1==t.length%2)t=t[Math.floor(t.length/2)];else{var s=t.length/2;e=t[s-1],t=t[s],t=new mxPoint(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2)}else t=new mxPoint,t.x=this.align==mxConstants.ALIGN_LEFT?e.x:this.align==mxConstants.ALIGN_CENTER?e.x+e.width/2:e.x+e.width,t.y=this.verticalAlign==mxConstants.ALIGN_TOP?e.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?e.y+e.height/2:e.y+e.height;return new mxRectangle(Math.round(t.x-(r*this.defaultOverlap-this.offset.x)*n),Math.round(t.y-(i*this.defaultOverlap-this.offset.y)*n),r*n,i*n)},mxCellOverlay.prototype.toString=function(){return this.tooltip},mxOutline.prototype.source=null,mxOutline.prototype.outline=null,mxOutline.prototype.graphRenderHint=mxConstants.RENDERING_HINT_FASTER,mxOutline.prototype.enabled=!0,mxOutline.prototype.showViewport=!0,mxOutline.prototype.border=10,mxOutline.prototype.sizerSize=8,mxOutline.prototype.labelsVisible=!1,mxOutline.prototype.updateOnPan=!1,mxOutline.prototype.sizerImage=null,mxOutline.prototype.minScale=1e-4,mxOutline.prototype.suspended=!1,mxOutline.prototype.forceVmlHandles=8==document.documentMode,mxOutline.prototype.createGraph=function(e){return e=new mxGraph(e,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet()),e.foldingEnabled=!1,e.autoScroll=!1,e},mxOutline.prototype.init=function(e){this.outline=this.createGraph(e);var t=this.outline.graphModelChanged;this.outline.graphModelChanged=mxUtils.bind(this,function(e){this.suspended||null==this.outline||t.apply(this.outline,arguments)}),mxClient.IS_SVG&&(e=this.outline.getView().getCanvas().parentNode,e.setAttribute("shape-rendering","optimizeSpeed"),e.setAttribute("image-rendering","optimizeSpeed")),this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=mxUtils.bind(this,function(e,t){this.suspended||this.active||this.update()}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.outline.addMouseListener(this),e=this.source.getView(),e.addListener(mxEvent.SCALE,this.updateHandler),e.addListener(mxEvent.TRANSLATE,this.updateHandler),e.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),e.addListener(mxEvent.DOWN,this.updateHandler),e.addListener(mxEvent.UP,this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=mxUtils.bind(this,function(e){this.updateOnPan&&this.updateHandler.apply(this,arguments)}),this.source.addListener(mxEvent.PAN,this.panHandler),this.refreshHandler=mxUtils.bind(this,function(e){this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()}),this.source.addListener(mxEvent.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants.OUTLINE_COLOR,mxConstants.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.forceVmlHandles&&(this.selectionBorder.isHtmlAllowed=function(){return!1}),this.selectionBorder.init(this.outline.getView().getOverlayPane()),e=mxUtils.bind(this,function(e){var t=mxEvent.getSource(e),n=mxUtils.bind(this,function(e){this.outline.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e))}),r=mxUtils.bind(this,function(e){mxEvent.removeGestureListeners(t,null,n,r),this.outline.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e))});mxEvent.addGestureListeners(t,null,n,r),this.outline.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e))}),mxEvent.addGestureListeners(this.selectionBorder.node,e),this.sizer=this.createSizer(),this.forceVmlHandles&&(this.sizer.isHtmlAllowed=function(){return!1}),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent.addGestureListeners(this.sizer.node,e),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(e){this.enabled=e},mxOutline.prototype.setZoomEnabled=function(e){this.sizer.node.style.visibility=e?"visible":"hidden"},mxOutline.prototype.refresh=function(){this.update(!0)},mxOutline.prototype.createSizer=function(){var e=null!=this.sizerImage?new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src):new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants.OUTLINE_HANDLE_FILLCOLOR,mxConstants.OUTLINE_HANDLE_STROKECOLOR);return e.dialect=this.outline.dialect,e},mxOutline.prototype.getSourceContainerSize=function(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)},mxOutline.prototype.getOutlineOffset=function(e){return null},mxOutline.prototype.getSourceGraphBounds=function(){return this.source.getGraphBounds()},mxOutline.prototype.update=function(e){if(null!=this.source&&null!=this.source.container&&null!=this.outline&&null!=this.outline.container){var t=this.source.view.scale,n=this.getSourceGraphBounds(),n=new mxRectangle(n.x/t+this.source.panDx,n.y/t+this.source.panDy,n.width/t,n.height/t),r=new mxRectangle(0,0,this.source.container.clientWidth/t,this.source.container.clientHeight/t),i=n.clone();i.add(r),r=this.getSourceContainerSize(),t=Math.min(Math.max(0,this.outline.container.clientWidth-this.border)/Math.max(r.width/t,i.width),Math.max(0,this.outline.container.clientHeight-this.border)/Math.max(r.height/t,i.height)),r=isNaN(t)?this.minScale:Math.max(this.minScale,t);if(0<r){this.outline.getView().scale!=r&&(this.outline.getView().scale=r,e=!0),t=this.outline.getView(),t.currentRoot!=this.source.getView().currentRoot&&t.setCurrentRoot(this.source.getView().currentRoot);var i=this.source.view.translate,s=i.x+this.source.panDx,o=i.y+this.source.panDy,r=this.getOutlineOffset(r);null!=r&&(s+=r.x,o+=r.y),0>n.x&&(s-=n.x),0>n.y&&(o-=n.y);if(t.translate.x!=s||t.translate.y!=o)t.translate.x=s,t.translate.y=o,e=!0;var n=t.translate,r=this.source.getView().scale,s=r/t.scale,o=1/t.scale,u=this.source.container;this.bounds=new mxRectangle((n.x-i.x-this.source.panDx)/o,(n.y-i.y-this.source.panDy)/o,u.clientWidth/s,u.clientHeight/s),this.bounds.x+=this.source.container.scrollLeft*t.scale/r,this.bounds.y+=this.source.container.scrollTop*t.scale/r,n=this.selectionBorder.bounds;if(n.x!=this.bounds.x||n.y!=this.bounds.y||n.width!=this.bounds.width||n.height!=this.bounds.height)this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw();n=this.sizer.bounds,t=new mxRectangle(this.bounds.x+this.bounds.width-n.width/2,this.bounds.y+this.bounds.height-n.height/2,n.width,n.height);if(n.x!=t.x||n.y!=t.y||n.width!=t.width||n.height!=t.height)this.sizer.bounds=t,"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw();e&&this.outline.view.revalidate()}}},mxOutline.prototype.mouseDown=function(e,t){if(this.enabled&&this.showViewport){var n=mxEvent.isMouseEvent(t.getEvent())?0:this.source.tolerance,n=this.source.allowHandleBoundsCheck&&(mxClient.IS_IE||0<n)?new mxRectangle(t.getGraphX()-n,t.getGraphY()-n,2*n,2*n):null;this.zoom=t.isSource(this.sizer)||null!=n&&mxUtils.intersects(shape.bounds,n),this.startX=t.getX(),this.startY=t.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):this.dy0=this.dx0=0}t.consume()},mxOutline.prototype.mouseMove=function(e,t){if(this.active){this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display;var n=this.getTranslateForEvent(t),r=n.x,i=n.y;if(this.zoom)n=this.source.container,i=r/(n.clientWidth/n.clientHeight),n=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+r),Math.max(1,this.bounds.height+i)),this.selectionBorder.bounds=n,this.selectionBorder.redraw();else{var s=this.outline.getView().scale,n=new mxRectangle(this.bounds.x+r,this.bounds.y+i,this.bounds.width,this.bounds.height);this.selectionBorder.bounds=n,this.selectionBorder.redraw(),r=r/s*this.source.getView().scale,i=i/s*this.source.getView().scale,this.source.panGraph(-r-this.dx0,-i-this.dy0)}r=this.sizer.bounds,this.sizer.bounds=new mxRectangle(n.x+n.width-r.width/2,n.y+n.height-r.height/2,r.width,r.height),"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw(),t.consume()}},mxOutline.prototype.getTranslateForEvent=function(e){return new mxPoint(e.getX()-this.startX,e.getY()-this.startY)},mxOutline.prototype.mouseUp=function(e,t){if(this.active){var n=this.getTranslateForEvent(t),r=n.x,n=n.y;if(0<Math.abs(r)||0<Math.abs(n)){if(this.zoom){var n=this.selectionBorder.bounds.width,i=this.source.getView().scale;this.source.zoomTo(Math.max(this.minScale,i-r*i/n),!1)}else this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)||(this.source.panGraph(0,0),r/=this.outline.getView().scale,n/=this.outline.getView().scale,i=this.source.getView().translate,this.source.getView().setTranslate(i.x-r,i.y-n));this.update(),t.consume()}this.index=null,this.active=!1}},mxOutline.prototype.destroy=function(){null!=this.source&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.source=null),null!=this.outline&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.sizer&&(this.sizer.destroy(),this.sizer=null)},mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(e,t,n,r,i,s){var o="";if(this.source&&this.checkTerminal(e,n,t)||!this.source&&this.checkTerminal(e,r,t))null!=this.countError&&(this.source&&(0==this.max||i>=this.max)||!this.source&&(0==this.max||s>=this.max))&&(o+=this.countError+"\n"),null!=this.validNeighbors&&null!=this.typeError&&0<this.validNeighbors.length&&(this.checkNeighbors(e,t,n,r)||(o+=this.typeError+"\n"));return 0<o.length?o:null},mxMultiplicity.prototype.checkNeighbors=function(e,t,n,r){t=e.model.getValue(n),r=e.model.getValue(r),n=!this.validNeighborsAllowed;for(var i=this.validNeighbors,s=0;s<i.length;s++){if(this.source&&this.checkType(e,r,i[s])){n=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(e,t,i[s])){n=this.validNeighborsAllowed;break}}return n},mxMultiplicity.prototype.checkTerminal=function(e,t,n){return t=e.model.getValue(t),this.checkType(e,t,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(e,t,n,r,i){return null!=t?isNaN(t.nodeType)?t==n:mxUtils.isNode(t,n,r,i):!1},mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.updateHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(e){this.enabled=e},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(e){this.bubbling=e},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(e){if(null!=this.graph){var t=this.graph.getModel();t.removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler)}this.graph=e,null!=this.graph&&(t=this.graph.getModel(),t.addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler))},mxLayoutManager.prototype.getLayout=function(e){return null},mxLayoutManager.prototype.beforeUndo=function(e){e=this.getCellsForChanges(e.changes);for(var t=this.getGraph().getModel(),n=[],r=0;r<e.length;r++)n=n.concat(t.getDescendants(e[r]));e=n;if(this.isBubbling())for(n=t.getParents(e);0<n.length;)e=e.concat(n),n=t.getParents(n);this.executeLayoutForCells(e)},mxLayoutManager.prototype.executeLayoutForCells=function(e){e=mxUtils.sortCells(e,!0),e=e.concat(e.slice().reverse()),this.layoutCells(e)},mxLayoutManager.prototype.cellsMoved=function(e,t){if(null!=e&&null!=t)for(var n=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(t),mxEvent.getClientY(t)),r=this.getGraph().getModel(),i=0;i<e.length;i++){var s=r.getParent(e[i]);0>mxUtils.indexOf(e,s)&&(s=this.getLayout(s),null!=s&&s.moveCell(e[i],n.x,n.y))}},mxLayoutManager.prototype.getCellsForChanges=function(e){for(var t=new mxDictionary,n=[],r=0;r<e.length;r++){var i=e[r];if(i instanceof mxRootChange)return[];for(var i=this.getCellsForChange(i),s=0;s<i.length;s++)null==i[s]||t.get(i[s])||(t.put(i[s],!0),n.push(i[s]))}return n},mxLayoutManager.prototype.getCellsForChange=function(e){var t=this.getGraph().getModel();return e instanceof mxChildChange?[e.child,e.previous,t.getParent(e.child)]:e instanceof mxTerminalChange||e instanceof mxGeometryChange?[e.cell,t.getParent(e.cell)]:e instanceof mxVisibleChange||e instanceof mxStyleChange?[e.cell]:[]},mxLayoutManager.prototype.layoutCells=function(e){if(0<e.length){var t=this.getGraph().getModel();t.beginUpdate();try{for(var n=null,r=0;r<e.length;r++)e[r]!=t.getRoot()&&e[r]!=n&&this.executeLayout(this.getLayout(e[r]),e[r])&&(n=e[r]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",e))}finally{t.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(e,t){var n=!1;return null!=e&&null!=t&&(e.execute(t),n=!0),n},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(e){this.enabled=e},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(e){this.horizontal=e},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(e){this.addEnabled=e},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(e){this.resizeEnabled=e},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(e){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=e,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(e){return!this.getGraph().isSwimlane(e)},mxSwimlaneManager.prototype.isCellHorizontal=function(e){return this.graph.isSwimlane(e)?(e=this.graph.getCellStyle(e),1==mxUtils.getValue(e,mxConstants.STYLE_HORIZONTAL,1)):!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(e){if(null!=e){var t=this.getGraph().getModel();t.beginUpdate();try{for(var n=0;n<e.length;n++)this.isSwimlaneIgnored(e[n])||this.swimlaneAdded(e[n])}finally{t.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(e){for(var t=this.getGraph().getModel(),n=t.getParent(e),r=t.getChildCount(n),i=null,s=0;s<r;s++){var o=t.getChildAt(n,s);if(o!=e&&!this.isSwimlaneIgnored(o)&&(i=t.getGeometry(o),null!=i))break}null!=i&&(t=null!=n?this.isCellHorizontal(n):this.horizontal,this.resizeSwimlane(e,i.width,i.height,t))},mxSwimlaneManager.prototype.cellsResized=function(e){if(null!=e){var t=this.getGraph().getModel();t.beginUpdate();try{for(var n=0;n<e.length;n++)if(!this.isSwimlaneIgnored(e[n])){var r=t.getGeometry(e[n]);if(null!=r){for(var i=new mxRectangle(0,0,r.width,r.height),s=e[n],o=s;null!=o;){var s=o,o=t.getParent(o),u=this.graph.isSwimlane(o)?this.graph.getStartSize(o):new mxRectangle;i.width+=u.width,i.height+=u.height}var a=null!=o?this.isCellHorizontal(o):this.horizontal;this.resizeSwimlane(s,i.width,i.height,a)}}}finally{t.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(e,t,n,r){var i=this.getGraph().getModel();i.beginUpdate();try{var s=this.isCellHorizontal(e);if(!this.isSwimlaneIgnored(e)){var o=i.getGeometry(e);null!=o&&(r&&o.height!=n||!r&&o.width!=t)&&(o=o.clone(),r?o.height=n:o.width=t,i.setGeometry(e,o))}var u=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;t-=u.width,n-=u.height;var a=i.getChildCount(e);for(r=0;r<a;r++){var f=i.getChildAt(e,r);this.resizeSwimlane(f,t,n,s)}}finally{i.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape},mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(e,t,n,r,i){r=null!=r?r:!0,i=null!=i?i:!0;var s=this.deltas.get(e.cell);return null==s?(s={point:new mxPoint(t,n),state:e},this.deltas.put(e.cell,s),this.count++):r?(s.point.x+=t,s.point.y+=n):(s.point.x=t,s.point.y=n),i&&this.addEdges(e),s.point},mxCellStatePreview.prototype.show=function(e){this.deltas.visit(mxUtils.bind(this,function(e,t){this.translateState(t.state,t.point.x,t.point.y)})),this.deltas.visit(mxUtils.bind(this,function(t,n){this.revalidateState(n.state,n.point.x,n.point.y,e)}))},mxCellStatePreview.prototype.translateState=function(e,t,n){if(null!=e){var r=this.graph.getModel();if(r.isVertex(e.cell)){e.view.updateCellState(e);var i=r.getGeometry(e.cell);0==t&&0==n||null==i||i.relative&&null==this.deltas.get(e.cell)||(e.x+=t,e.y+=n)}for(var i=r.getChildCount(e.cell),s=0;s<i;s++)this.translateState(e.view.getState(r.getChildAt(e.cell,s)),t,n)}},mxCellStatePreview.prototype.revalidateState=function(e,t,n,r){if(null!=e){var i=this.graph.getModel();i.isEdge(e.cell)&&e.view.updateCellState(e);var s=this.graph.getCellGeometry(e.cell),o=e.view.getState(i.getParent(e.cell));0==t&&0==n||null==s||!s.relative||!i.isVertex(e.cell)||null!=o&&!i.isVertex(o.cell)&&null==this.deltas.get(e.cell)||(e.x+=t,e.y+=n),this.graph.cellRenderer.redraw(e),null!=r&&r(e),s=i.getChildCount(e.cell);for(o=0;o<s;o++)this.revalidateState(this.graph.view.getState(i.getChildAt(e.cell,o)),t,n,r)}},mxCellStatePreview.prototype.addEdges=function(e){for(var t=this.graph.getModel(),n=t.getEdgeCount(e.cell),r=0;r<n;r++){var i=e.view.getState(t.getEdgeAt(e.cell,r));null!=i&&this.moveState(i,0,0)}},mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,mxConnectionConstraint.prototype.name=null,mxConnectionConstraint.prototype.dx=null,mxConnectionConstraint.prototype.dy=null,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(e){this.enabled=e},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(e){this.cloneEnabled=e},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(e){this.moveEnabled=e},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(e){this.selectEnabled=e},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(e){this.removeCellsFromParent=e},mxGraphHandler.prototype.getInitialCellForEvent=function(e){return e.getCell()},mxGraphHandler.prototype.isDelayedSelection=function(e,t){return this.graph.isCellSelected(e)},mxGraphHandler.prototype.consumeMouseEvent=function(e,t){t.consume()},mxGraphHandler.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=t.getState()&&!mxEvent.isMultiTouchEvent(t.getEvent())){var n=this.getInitialCellForEvent(t);this.delayedSelection=this.isDelayedSelection(n,t),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(n,t.getEvent());if(this.isMoveEnabled()){var r=this.graph.model,i=r.getGeometry(n);this.graph.isCellMovable(n)&&(!r.isEdge(n)||1<this.graph.getSelectionCount()||null!=i.points&&0<i.points.length||null==r.getTerminal(n,!0)||null==r.getTerminal(n,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(t.getEvent())&&this.graph.isCellsCloneable())?this.start(n,t.getX(),t.getY()):this.delayedSelection&&(this.cell=n),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent.MOUSE_DOWN,t)}}},mxGraphHandler.prototype.getGuideStates=function(){var e=this.graph.getDefaultParent(),t=this.graph.getModel(),n=mxUtils.bind(this,function(e){return null!=this.graph.view.getState(e)&&t.isVertex(e)&&null!=t.getGeometry(e)&&!t.getGeometry(e).relative});return this.graph.view.getCellStates(t.filterDescendants(n,e))},mxGraphHandler.prototype.getCells=function(e){return!this.delayedSelection&&this.graph.isCellMovable(e)?[e]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(e){return e=this.getBoundingBox(e),null!=e&&(e.width=Math.max(0,e.width-1),e.height=Math.max(0,e.height-1),e.width<this.minimumSize?(e.x-=(this.minimumSize-e.width)/2,e.width=this.minimumSize):(e.x=Math.round(e.x),e.width=Math.ceil(e.width)),e.height<this.minimumSize?(e.y-=(this.minimumSize-e.height)/2,e.height=this.minimumSize):(e.y=Math.round(e.y),e.height=Math.ceil(e.height))),e},mxGraphHandler.prototype.getBoundingBox=function(e){var t=null;if(null!=e&&0<e.length)for(var n=this.graph.getModel(),r=0;r<e.length;r++)if(n.isVertex(e[r])||n.isEdge(e[r])){var i=this.graph.view.getState(e[r]);if(null!=i){var s=i;n.isVertex(e[r])&&null!=i.shape&&null!=i.shape.boundingBox&&(s=i.shape.boundingBox),null==t?t=mxRectangle.fromRectangle(s):t.add(s)}}return t},mxGraphHandler.prototype.createPreviewShape=function(e){return e=new mxRectangleShape(e,null,this.previewColor),e.isDashed=!0,this.htmlPreview?(e.dialect=mxConstants.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane()),e.pointerEvents=!1,mxClient.IS_IOS&&(e.getSvgScreenOffset=function(){return 0})),e},mxGraphHandler.prototype.start=function(e,t,n){this.cell=e,this.first=mxUtils.convertPoint(this.graph.container,t,n),this.cells=this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.guidesEnabled&&(this.guide=new mxGuide(this.graph,this.getGuideStates()))},mxGraphHandler.prototype.useGuidesForEvent=function(e){return null!=this.guide?this.guide.isEnabledForEvent(e.getEvent()):!0},mxGraphHandler.prototype.snap=function(e){var t=this.scaleGrid?this.graph.view.scale:1;return e.x=this.graph.snap(e.x/t)*t,e.y=this.graph.snap(e.y/t)*t,e},mxGraphHandler.prototype.getDelta=function(e){e=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY());var t=this.graph.view.scale;return new mxPoint(this.roundLength((e.x-this.first.x)/t)*t,this.roundLength((e.y-this.first.y)/t)*t)},mxGraphHandler.prototype.updateHint=function(e){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(e){return Math.round(2*e)/2},mxGraphHandler.prototype.mouseMove=function(e,t){var n=this.graph;if(!t.isConsumed()&&n.isMouseDown&&null!=this.cell&&null!=this.first&&null!=this.bounds)if(mxEvent.isMultiTouchEvent(t.getEvent()))this.reset();else{var r=this.getDelta(t),i=r.x,r=r.y,s=n.tolerance;if(null!=this.shape||Math.abs(i)>s||Math.abs(r)>s){null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3)),null==this.shape&&(this.shape=this.createPreviewShape(this.bounds));var s=n.isCloneEvent(t.getEvent())&&n.isCellsCloneable()&&this.isCloneEnabled(),o=n.isGridEnabledEvent(t.getEvent()),u=!0;if(null!=this.guide&&this.useGuidesForEvent(t))r=this.guide.move(this.bounds,new mxPoint(i,r),o,s),u=!1,i=r.x,r=r.y;else if(o)var a=n.getView().translate,f=n.getView().scale,o=this.bounds.x-(n.snap(this.bounds.x/f-a.x)+a.x)*f,a=this.bounds.y-(n.snap(this.bounds.y/f-a.y)+a.y)*f,r=this.snap(new mxPoint(i,r)),i=r.x-o,r=r.y-a;null!=this.guide&&u&&this.guide.hide(),n.isConstrainedEvent(t.getEvent())&&(Math.abs(i)>Math.abs(r)?r=0:i=0),this.currentDx=i,this.currentDy=r,this.updatePreviewShape(),u=null,r=t.getCell(),n.isDropEnabled()&&this.highlightEnabled&&(u=n.getDropTarget(this.cells,t.getEvent(),r,s)),i=n.getView().getState(u),o=!1,null==i||n.model.getParent(this.cell)==u&&!s?(this.target=null,this.connectOnDrop&&null!=r&&1==this.cells.length&&n.getModel().isVertex(r)&&n.isCellConnectable(r)&&(i=n.getView().getState(r),null!=i&&(n=null==n.getEdgeValidationError(null,this.cell,r)?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR,this.setHighlightColor(n),o=!0))):(this.target!=u&&(this.target=u,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),o=!0),null!=i&&o?this.highlight.highlight(i):this.highlight.hide()}this.updateHint(t),this.consumeMouseEvent(mxEvent.MOUSE_MOVE,t),mxEvent.consume(t.getEvent())}else!this.isMoveEnabled()&&!this.isCloneEnabled()||!this.updateCursor||t.isConsumed()||null==t.getState()&&null==t.sourceState||n.isMouseDown||(s=n.getCursorForMouseEvent(t),null==s&&n.isEnabled()&&n.isCellMovable(t.getCell())&&(s=n.getModel().isEdge(t.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX),null!=s&&null!=t.sourceState&&t.sourceState.setCursor(s))},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx-this.graph.panDx),Math.round(this.pBounds.y+this.currentDy-this.graph.panDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.setHighlightColor=function(e){null!=this.highlight&&this.highlight.setHighlightColor(e)},mxGraphHandler.prototype.mouseUp=function(e,t){if(!t.isConsumed()){var n=this.graph;if(null!=this.cell&&null!=this.first&&null!=this.shape&&null!=this.currentDx&&null!=this.currentDy){var r=t.getCell();if(this.connectOnDrop&&null==this.target&&null!=r&&n.getModel().isVertex(r)&&n.isCellConnectable(r)&&n.isEdgeValid(null,this.cell,r))n.connectionHandler.connect(this.cell,r,t.getEvent());else{var r=n.isCloneEvent(t.getEvent())&&n.isCellsCloneable()&&this.isCloneEnabled(),i=n.getView().scale,s=this.roundLength(this.currentDx/i),i=this.roundLength(this.currentDy/i),o=this.target;n.isSplitEnabled()&&n.isSplitTarget(o,this.cells,t.getEvent())?n.splitEdge(o,this.cells,null,s,i):this.moveCells(this.cells,s,i,r,this.target,t.getEvent())}}else this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(t)}this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,t),this.reset()},mxGraphHandler.prototype.selectDelayed=function(e){this.graph.isCellSelected(this.cell)&&this.graph.popupMenuHandler.isPopupTrigger(e)||this.graph.selectCellForEvent(this.cell,e.getEvent())},mxGraphHandler.prototype.reset=function(){this.destroyShapes(),this.removeHint(),this.delayedSelection=this.cellWasClicked=!1,this.target=this.cell=this.first=this.guides=this.currentDy=this.currentDx=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(e,t,n){if(this.graph.getModel().isVertex(e)&&(e=this.graph.getView().getState(e),null!=e)){n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(n),mxEvent.getClientY(n));var r=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0);if(0!=r){t=Math.cos(-r);var r=Math.sin(-r),i=new mxPoint(e.getCenterX(),e.getCenterY());n=mxUtils.getRotatedPoint(n,t,r,i)}return!mxUtils.contains(e,n.x,n.y)}return!1},mxGraphHandler.prototype.moveCells=function(e,t,n,r,i,s){r&&(e=this.graph.getCloneableCells(e)),null==i&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(this.graph.getModel().getParent(this.cell),e,s)&&(i=this.graph.getDefaultParent()),r=r&&!this.graph.isCellLocked(i||this.graph.getDefaultParent()),e=this.graph.moveCells(e,t-this.graph.panDx/this.graph.view.scale,n-this.graph.panDy/this.graph.view.scale,r,i,s),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(e[0]),r&&this.graph.setSelectionCells(e)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.refreshHandler&&(this.graph.getModel().removeListener(this.refreshHandler),this.refreshHandler=null),this.destroyShapes(),this.removeHint()},mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(e){this.panningEnabled=e},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(e){this.pinchEnabled=e},mxPanningHandler.prototype.isPanningTrigger=function(e){var t=e.getEvent();return this.useLeftButtonForPanning&&null==e.getState()&&mxEvent.isLeftMouseButton(t)||mxEvent.isControlDown(t)&&mxEvent.isShiftDown(t)||this.usePopupTrigger&&mxEvent.isPopupTrigger(t)},mxPanningHandler.prototype.isForcePanningEvent=function(e){return this.ignoreCell||mxEvent.isMultiTouchEvent(e.getEvent())},mxPanningHandler.prototype.mouseDown=function(e,t){this.mouseDownEvent=t,!t.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(t)&&(this.start(t),this.consumePanningTrigger(t))},mxPanningHandler.prototype.start=function(e){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=e.getX(),this.startY=e.getY(),this.dy=this.dx=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(e){e.consume()},mxPanningHandler.prototype.mouseMove=function(e,t){this.dx=t.getX()-this.startX,this.dy=t.getY()-this.startY;if(this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",t));else if(this.panningTrigger){var n=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!n&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",t))}(this.active||this.panningTrigger)&&t.consume()},mxPanningHandler.prototype.mouseUp=function(e,t){if(this.active){if(null!=this.dx&&null!=this.dy){if(!this.graph.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.graph.container)){var n=this.graph.getView().scale,r=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(r.x+this.dx/n,r.y+this.dy/n)}t.consume()}this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",t))}this.reset()},mxPanningHandler.prototype.reset=function(){this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dy=this.dx=null},mxPanningHandler.prototype.panGraph=function(e,t){this.graph.getView().setTranslate(e,t)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)},mxPopupMenuHandler.prototype=new mxPopupMenu,mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler,mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(e){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(e,t){this.isEnabled()&&!mxEvent.isMultiTouchEvent(t.getEvent())&&(this.hideMenu(),this.triggerX=t.getGraphX(),this.triggerY=t.getGraphY(),this.screenX=mxEvent.getMainEvent(t.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(t.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(t),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(e,t){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(t.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(t.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(e,t){if(this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY){var n=this.getCellForPopupEvent(t);this.graph.isEnabled()&&this.isSelectOnPopup(t)&&null!=n&&!this.graph.isCellSelected(n)?this.graph.setSelectionCell(n):this.clearSelectionOnBackground&&null==n&&this.graph.clearSelection(),this.graph.tooltipHandler.hide();var r=mxUtils.getScrollOrigin();this.popup(t.getX()+r.x+1,t.getY()+r.y+1,n,t.getEvent()),t.consume()}this.inTolerance=this.popupTrigger=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(e){return e.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(e){this.enabled=e},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(e){this.hotspot=e},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(e){this.hotspotEnabled=e},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){this.validState=null,null!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(e){var t=null;return this.isEnabled()&&(t=this.getState(e),this.setCurrentState(t,e)),t},mxCellMarker.prototype.setCurrentState=function(e,t,n){var r=null!=e?this.isValidState(e):!1;n=null!=n?n:this.getMarkerColor(t.getEvent(),e,r),this.validState=r?e:null;if(e!=this.markedState||n!=this.currentColor)this.currentColor=n,null!=e&&null!=this.currentColor?(this.markedState=e,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.markCell=function(e,t){var n=this.graph.getView().getState(e);null!=n&&(this.currentColor=null!=t?t:this.validColor,this.markedState=n,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(e){return!0},mxCellMarker.prototype.getMarkerColor=function(e,t,n){return n?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(e){var t=this.graph.getView(),n=this.getCell(e),t=this.getStateToMark(t.getState(n));return null!=t&&this.intersects(t,e)?t:null},mxCellMarker.prototype.getCell=function(e){return e.getCell()},mxCellMarker.prototype.getStateToMark=function(e){return e},mxCellMarker.prototype.intersects=function(e,t){return this.hotspotEnabled?mxUtils.intersectsHotspot(e,t.getGraphX(),t.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE):!0},mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()},mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(e){this.enabled=e},mxSelectionCellsHandler.prototype.getHandler=function(e){return this.handlers.get(e)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(e,t){t.reset.apply(t)})},mxSelectionCellsHandler.prototype.refresh=function(){var e=this.handlers;this.handlers=new mxDictionary;for(var t=this.graph.getSelectionCells(),n=0;n<t.length;n++){var r=this.graph.view.getState(t[n]);if(null!=r){var i=e.remove(t[n]);null!=i&&(i.state!=r?(i.destroy(),i=null):this.isHandlerActive(i)||(null!=i.refresh&&i.refresh(),i.redraw())),null==i&&(i=this.graph.createHandler(r),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",r))),null!=i&&this.handlers.put(t[n],i)}}e.visit(mxUtils.bind(this,function(e,t){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",t.state)),t.destroy()}))},mxSelectionCellsHandler.prototype.isHandlerActive=function(e){return null!=e.index},mxSelectionCellsHandler.prototype.updateHandler=function(e){var t=this.handlers.remove(e.cell);null!=t&&(t.destroy(),t=this.graph.createHandler(e),null!=t&&this.handlers.put(e.cell,t))},mxSelectionCellsHandler.prototype.mouseDown=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var n=[e,t];this.handlers.visit(function(e,t){t.mouseDown.apply(t,n)})}},mxSelectionCellsHandler.prototype.mouseMove=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var n=[e,t];this.handlers.visit(function(e,t){t.mouseMove.apply(t,n)})}},mxSelectionCellsHandler.prototype.mouseUp=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var n=[e,t];this.handlers.visit(function(e,t){t.mouseUp.apply(t,n)})}},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)},mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=mxClient.IS_VML,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(e){this.enabled=e},mxConnectionHandler.prototype.isInsertBefore=function(e,t,n,r,i){return this.insertBeforeSource&&t!=n},mxConnectionHandler.prototype.isCreateTarget=function(e){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(e){this.createTarget=e},mxConnectionHandler.prototype.createShape=function(){var e=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.scale=this.graph.view.scale,e.pointerEvents=!1,e.isDashed=!0,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,null),e},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(e){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(e){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(e){return!0},mxConnectionHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph);return e.hotspotEnabled=!0,e.getCell=mxUtils.bind(this,function(t){var n=mxCellMarker.prototype.getCell.apply(e,arguments);this.error=null,null==n&&null!=this.currentPoint&&(n=this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y));if(null!=n&&!this.graph.isCellConnectable(n)){var r=this.graph.getModel().getParent(n);this.graph.getModel().isVertex(r)&&this.graph.isCellConnectable(r)&&(n=r)}if(this.graph.isSwimlane(n)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(n,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(n))n=null;return null!=n?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,n),null!=this.error&&0==this.error.length&&(n=null,this.isCreateTarget(t.getEvent())&&(this.error=null))):this.isValidSource(n,t)||(n=null):!this.isConnecting()||this.isCreateTarget(t.getEvent())||this.graph.allowDanglingEdges||(this.error=""),n}),e.isValidState=mxUtils.bind(this,function(t){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(e,arguments)}),e.getMarkerColor=mxUtils.bind(this,function(t,n,r){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(e,arguments):null}),e.intersects=mxUtils.bind(this,function(t,n){return null!=this.connectImage||this.isConnecting()?!0:mxCellMarker.prototype.intersects.apply(e,arguments)}),e},mxConnectionHandler.prototype.start=function(e,t,n,r){this.previous=e,this.first=new mxPoint(t,n),this.edgeState=null!=r?r:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=e,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(e,t){return this.graph.isValidSource(e)},mxConnectionHandler.prototype.isValidTarget=function(e){return!0},mxConnectionHandler.prototype.validateConnection=function(e,t){return this.isValidTarget(t)?this.graph.getEdgeValidationError(null,e,t):""},mxConnectionHandler.prototype.getConnectImage=function(e){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(e){return null!=e.text&&e.text.node.parentNode==this.graph.container?!0:this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(e){var t=this.getConnectImage(e);if(null!=t&&null!=e){this.iconState=e;var n=[],r=new mxRectangle(0,0,t.width,t.height),i=new mxImageShape(r,t.src,null,null,0);i.preserveImageAspect=!1,this.isMoveIconToFrontForState(e)?(i.dialect=mxConstants.DIALECT_STRICTHTML,i.init(this.graph.container)):(i.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,i.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=i.node.previousSibling&&i.node.parentNode.insertBefore(i.node,i.node.parentNode.firstChild)),i.node.style.cursor=mxConstants.CURSOR_CONNECT;var s=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:e}),t=mxUtils.bind(this,function(e){mxEvent.isConsumed(e)||(this.icon=i,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e,s())))});return mxEvent.redirectMouseEvents(i.node,this.graph,s,t),n.push(i),this.redrawIcons(n,this.iconState),n}return null},mxConnectionHandler.prototype.redrawIcons=function(e,t){if(null!=e&&null!=e[0]&&null!=t){var n=this.getIconPosition(e[0],t);e[0].bounds.x=n.x,e[0].bounds.y=n.y,e[0].redraw()}},mxConnectionHandler.prototype.getIconPosition=function(e,t){var n=this.graph.getView().scale,r=t.getCenterX(),i=t.getCenterY();if(this.graph.isSwimlane(t.cell)){var s=this.graph.getStartSize(t.cell),r=0!=s.width?t.x+s.width*n/2:r,i=0!=s.height?t.y+s.height*n/2:i,s=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0);if(0!=s)var n=Math.cos(s),s=Math.sin(s),o=new mxPoint(t.getCenterX(),t.getCenterY()),i=mxUtils.getRotatedPoint(new mxPoint(r,i),n,s,o),r=i.x,i=i.y}return new mxPoint(r-e.bounds.width/2,i-e.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var e=0;e<this.icons.length;e++)this.icons[e].destroy();this.iconState=this.selectedIcon=this.icon=this.icons=null}},mxConnectionHandler.prototype.isStartEvent=function(e){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(e,t){this.mouseDownCounter++;if(this.isEnabled()&&this.graph.isEnabled()&&!t.isConsumed()&&!this.isConnecting()&&this.isStartEvent(t)){null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.edgeState=this.createEdgeState(t),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState));if(null==this.previous&&null!=this.edgeState){var n=this.graph.getPointForEvent(t.getEvent());this.edgeState.cell.geometry.setTerminalPoint(n,!0)}this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),t.consume()}this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(e){return!this.graph.isCellMovable(e.cell)},mxConnectionHandler.prototype.createEdgeState=function(e){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(e){var t=mxUtils.getOffset(this.graph.container),n=e.getEvent(),r=mxEvent.getClientX(n),n=mxEvent.getClientY(n),i=document.documentElement,s=this.currentPoint.x-this.graph.container.scrollLeft+t.x-((window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)),t=this.currentPoint.y-this.graph.container.scrollTop+t.y-((window.pageYOffset||i.scrollTop)-(i.clientTop||0));return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(r,n)||(s!=r||t!=n)&&null==e.getState()&&this.marker.highlight.isHighlightAt(s,t))},mxConnectionHandler.prototype.updateCurrentState=function(e,t){this.constraintHandler.update(e,null==this.first,!1,null==this.first||e.isSource(this.marker.highlight.shape)?null:t);if(null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint)null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error?this.currentState=this.constraintHandler.currentFocus:this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(e.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(e),this.currentState=this.marker.getValidState(),null==this.currentState||this.isCellEnabled(this.currentState.cell)||(this.currentState=null));var n=this.isOutlineConnectEvent(e);null!=this.currentState&&n&&(e.isSource(this.marker.highlight.shape)&&(t=new mxPoint(e.getGraphX(),e.getGraphY())),n=this.graph.getOutlineConstraint(t,this.currentState,e),this.constraintHandler.setFocus(e,this.currentState,!1),this.constraintHandler.currentConstraint=n,this.constraintHandler.currentPoint=t),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&(n=this.graph.view.scale,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.getValidState()!=e.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint()))}},mxConnectionHandler.prototype.isCellEnabled=function(e){return!0},mxConnectionHandler.prototype.convertWaypoint=function(e){var t=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();e.x=e.x/t-n.x,e.y=e.y/t-n.y},mxConnectionHandler.prototype.snapToPreview=function(e,t){if(!mxEvent.isAltDown(e.getEvent())&&null!=this.previous){var n=this.graph.gridSize*this.graph.view.scale/2,r=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(r.x-e.getGraphX())<n&&(t.x=r.x),Math.abs(r.y-e.getGraphY())<n&&(t.y=r.y)}},mxConnectionHandler.prototype.mouseMove=function(e,t){if(t.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{this.isEnabled()||null==this.currentState||(this.destroyIcons(),this.currentState=null);var n=this.graph.getView(),r=n.scale,i=n.translate,n=new mxPoint(t.getGraphX(),t.getGraphY());this.error=null,this.graph.isGridEnabledEvent(t.getEvent())&&(n=new mxPoint((this.graph.snap(n.x/r-i.x)+i.x)*r,(this.graph.snap(n.y/r-i.y)+i.y)*r)),this.snapToPreview(t,n),this.currentPoint=n,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&(null!=this.shape||null==this.first||Math.abs(t.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(t.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(t,n);if(null!=this.first){var s=null,r=n;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(s=this.constraintHandler.currentConstraint,r=this.constraintHandler.currentPoint.clone()):null!=this.previous&&!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())&&(Math.abs(this.previous.getCenterX()-n.x)<Math.abs(this.previous.getCenterY()-n.y)?n.x=this.previous.getCenterX():n.y=this.previous.getCenterY()),i=this.first;if(null!=this.selectedIcon){var o=this.selectedIcon.bounds.width,u=this.selectedIcon.bounds.height;null!=this.currentState&&this.targetConnectImage?(o=this.getIconPosition(this.selectedIcon,this.currentState),this.selectedIcon.bounds.x=o.x,this.selectedIcon.bounds.y=o.y):(o=new mxRectangle(t.getGraphX()+this.connectIconOffset.x,t.getGraphY()+this.connectIconOffset.y,o,u),this.selectedIcon.bounds=o),this.selectedIcon.redraw()}null!=this.edgeState?(this.updateEdgeState(r,s),r=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],i=this.edgeState.absolutePoints[0]):(null!=this.currentState&&null==this.constraintHandler.currentConstraint&&(o=this.getTargetPerimeterPoint(this.currentState,t),null!=o&&(r=o)),null==this.sourceConstraint&&null!=this.previous&&(o=this.getSourcePerimeterPoint(this.previous,null!=this.waypoints&&0<this.waypoints.length?this.waypoints[0]:r,t),null!=o&&(i=o)));if(null==this.currentState&&this.movePreviewAway){o=i,null!=this.edgeState&&2<=this.edgeState.absolutePoints.length&&(s=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2],null!=s&&(o=s)),s=r.x-o.x,o=r.y-o.y,u=Math.sqrt(s*s+o*o);if(0==u)return;this.originalPoint=r.clone(),r.x-=4*s/u,r.y-=4*o/u}else this.originalPoint=null;null==this.shape&&(s=Math.abs(t.getGraphX()-this.first.x),o=Math.abs(t.getGraphY()-this.first.y),s>this.graph.tolerance||o>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(t,n)),null!=this.shape&&(null!=this.edgeState?this.shape.points=this.edgeState.absolutePoints:(n=[i],null!=this.waypoints&&(n=n.concat(this.waypoints)),n.push(r),this.shape.points=n),this.drawPreview()),null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(t.getEvent()),t.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),t.consume())),this.previous=this.currentState):this.previous!=this.currentState||null==this.currentState||null!=this.icons||this.graph.isMouseDown||t.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){n=!1,r=t.getSource();for(i=0;i<this.icons.length&&!n;i++)n=r==this.icons[i].node||r.parentNode==this.icons[i].node;n||this.updateIcons(this.currentState,this.icons,t)}}},mxConnectionHandler.prototype.updateEdgeState=function(e,t){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=t&&null!=t.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=t.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=t.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:e],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==t&&(t=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,t));var n=null;if(null!=this.waypoints)for(var n=[],r=0;r<this.waypoints.length;r++){var i=this.waypoints[r].clone();this.convertWaypoint(i),n[r]=i}this.graph.view.updatePoints(this.edgeState,n,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(e,t){var n=null,r=e.view,i=r.getPerimeterFunction(e);if(null!=i){var s=null!=this.waypoints&&0<this.waypoints.length?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),r=i(r.getPerimeterBounds(e),this.edgeState,s,!1);null!=r&&(n=r)}else n=new mxPoint(e.getCenterX(),e.getCenterY());return n},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(e,t,n){n=null;var r=e.view,i=r.getPerimeterFunction(e),s=new mxPoint(e.getCenterX(),e.getCenterY());if(null!=i){var o=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),u=Math.PI/180*-o;0!=o&&(t=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(u),Math.sin(u),s)),e=i(r.getPerimeterBounds(e),e,t,!1),null!=e&&(0!=o&&(e=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(-u),Math.sin(-u),s)),n=e)}else n=s;return n},mxConnectionHandler.prototype.updateIcons=function(e,t,n){},mxConnectionHandler.prototype.isStopEvent=function(e){return null!=e.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(e){var t=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY()),n=Math.abs(t.x-this.first.x),t=Math.abs(t.y-this.first.y);if(null!=this.waypoints||1<this.mouseDownCounter&&(n>this.graph.tolerance||t>this.graph.tolerance))null==this.waypoints&&(this.waypoints=[]),n=this.graph.view.scale,t=new mxPoint(this.graph.snap(e.getGraphX()/n)*n,this.graph.snap(e.getGraphY()/n)*n),this.waypoints.push(t)},mxConnectionHandler.prototype.checkConstraints=function(e,t){return null==e||null==t||null==e.point||null==t.point||!e.point.equals(t.point)||e.perimeter!=t.perimeter},mxConnectionHandler.prototype.mouseUp=function(e,t){if(!t.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(t)){this.addWaypointForEvent(t),t.consume();return}var n=this.sourceConstraint,r=this.constraintHandler.currentConstraint,i=null!=this.previous?this.previous.cell:null,s=null;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(s=this.constraintHandler.currentFocus.cell),null==s&&null!=this.currentState&&(s=this.currentState.cell),null!=this.error||null!=i&&null!=s&&i==s&&!this.checkConstraints(n,r)?(null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,t.getEvent()),null!=this.error&&0<this.error.length&&this.graph.validationAlert(this.error)):this.connect(i,s,t.getEvent(),t.getCell()),this.destroyIcons(),t.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.sourceConstraint=this.error=this.previous=this.edgeState=this.currentPoint=this.originalPoint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(e){this.shape.strokewidth=this.getEdgeWidth(e),this.shape.stroke=this.getEdgeColor(e)},mxConnectionHandler.prototype.getEdgeColor=function(e){return e?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(e){return e?3:1},mxConnectionHandler.prototype.connect=function(e,t,n,r){if(null!=t||this.isCreateTarget(n)||this.graph.allowDanglingEdges){var i=this.graph.getModel(),s=!1,o=null;i.beginUpdate();try{if(null!=e&&null==t&&!this.graph.isIgnoreTerminalEvent(n)&&this.isCreateTarget(n)&&(t=this.createTargetVertex(n,e),null!=t)){r=this.graph.getDropTarget([t],n,r),s=!0;if(null!=r&&this.graph.getModel().isEdge(r))r=this.graph.getDefaultParent();else{var u=this.graph.getView().getState(r);if(null!=u){var a=i.getGeometry(t);a.x-=u.origin.x,a.y-=u.origin.y}}this.graph.addCell(t,r)}var f=this.graph.getDefaultParent();null!=e&&null!=t&&i.getParent(e)==i.getParent(t)&&i.getParent(i.getParent(e))!=i.getRoot()&&(f=i.getParent(e),null!=e.geometry&&e.geometry.relative&&null!=t.geometry&&t.geometry.relative&&(f=i.getParent(f)));var l=u=null;null!=this.edgeState&&(u=this.edgeState.cell.value,l=this.edgeState.cell.style),o=this.insertEdge(f,null,u,e,t,l);if(null!=o){this.graph.setConnectionConstraint(o,e,!0,this.sourceConstraint),this.graph.setConnectionConstraint(o,t,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&i.setGeometry(o,this.edgeState.cell.geometry),f=i.getParent(e);if(this.isInsertBefore(o,e,t,n,r)){for(a=e;null!=a.parent&&null!=a.geometry&&a.geometry.relative&&a.parent!=o.parent;)a=this.graph.model.getParent(a);null!=a&&null!=a.parent&&a.parent==o.parent&&i.add(f,o,a.parent.getIndex(a))}var c=i.getGeometry(o);null==c&&(c=new mxGeometry,c.relative=!0,i.setGeometry(o,c));if(null!=this.waypoints&&0<this.waypoints.length){var h=this.graph.view.scale,p=this.graph.view.translate;c.points=[];for(e=0;e<this.waypoints.length;e++){var d=this.waypoints[e];c.points.push(new mxPoint(d.x/h-p.x,d.y/h-p.y))}}if(null==t){var v=this.graph.view.translate,h=this.graph.view.scale,d=null!=this.originalPoint?new mxPoint(this.originalPoint.x/h-v.x,this.originalPoint.y/h-v.y):new mxPoint(this.currentPoint.x/h-v.x,this.currentPoint.y/h-v.y);d.x-=this.graph.panDx/this.graph.view.scale,d.y-=this.graph.panDy/this.graph.view.scale,c.setTerminalPoint(d,!1)}this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",o,"terminal",t,"event",n,"target",r,"terminalInserted",s))}}catch(m){mxLog.show(),mxLog.debug(m.message)}finally{i.endUpdate()}this.select&&this.selectCells(o,s?t:null)}},mxConnectionHandler.prototype.selectCells=function(e,t){this.graph.setSelectionCell(e)},mxConnectionHandler.prototype.insertEdge=function(e,t,n,r,i,s){return null==this.factoryMethod?this.graph.insertEdge(e,t,n,r,i,s):(t=this.createEdge(n,r,i,s),this.graph.addEdge(t,e,r,i))},mxConnectionHandler.prototype.createTargetVertex=function(e,t){for(var n=this.graph.getCellGeometry(t);null!=n&&n.relative;)t=this.graph.getModel().getParent(t),n=this.graph.getCellGeometry(t);var r=this.graph.cloneCell(t),n=this.graph.getModel().getGeometry(r);if(null!=n){var i=this.graph.view.translate,s=this.graph.view.scale,o=new mxPoint(this.currentPoint.x/s-i.x,this.currentPoint.y/s-i.y);n.x=Math.round(o.x-n.width/2-this.graph.panDx/s),n.y=Math.round(o.y-n.height/2-this.graph.panDy/s),o=this.getAlignmentTolerance();if(0<o){var u=this.graph.view.getState(t);if(null!=u){var a=u.x/s-i.x,i=u.y/s-i.y;Math.abs(a-n.x)<=o&&(n.x=Math.round(a)),Math.abs(i-n.y)<=o&&(n.y=Math.round(i))}}}return r},mxConnectionHandler.prototype.getAlignmentTolerance=function(e){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(e,t,n,r){var i=null;return null!=this.factoryMethod&&(i=this.factoryMethod(t,n,r)),null==i&&(i=new mxCell(e||""),i.setEdge(!0),i.setStyle(r),e=new mxGeometry,e.relative=!0,i.setGeometry(e)),i},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(e){this.enabled=e},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.focusPoints=this.currentFocus=this.currentPoint=this.currentFocusArea=this.currentConstraint=null},mxConstraintHandler.prototype.getTolerance=function(e){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(e,t,n){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(e,t){return!1},mxConstraintHandler.prototype.isStateIgnored=function(e,t){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusPoints=this.focusIcons=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(e){return mxEvent.isShiftDown(e.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(e,t){var n=e.getCell();null!=n||null==t||e.getGraphX()==t.x&&e.getGraphY()==t.y||(n=this.graph.getCellAt(t.x,t.y));if(null!=n&&!this.graph.isCellConnectable(n)){var r=this.graph.getModel().getParent(n);this.graph.getModel().isVertex(r)&&this.graph.isCellConnectable(r)&&(n=r)}return this.graph.isCellLocked(n)?null:n},mxConstraintHandler.prototype.update=function(e,t,n,r){if(this.isEnabled()&&!this.isEventIgnored(e)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var i=this.getTolerance(e),s=null!=r?r.x:e.getGraphX(),o=null!=r?r.y:e.getGraphY(),s=new mxRectangle(s-i,o-i,2*i,2*i),i=new mxRectangle(e.getGraphX()-i,e.getGraphY()-i,2*i,2*i),u=this.graph.view.getState(this.getCellForEvent(e,r));this.isKeepFocusEvent(e)||null!=this.currentFocusArea&&null!=this.currentFocus&&null==u&&this.graph.getModel().isVertex(this.currentFocus.cell)&&mxUtils.intersects(this.currentFocusArea,i)||u==this.currentFocus||(this.currentFocus=this.currentFocusArea=null,this.setFocus(e,u,t)),e=this.currentPoint=this.currentConstraint=null;if(null!=this.focusIcons&&null!=this.constraints&&(null==u||this.currentFocus==u))for(var o=i.getCenterX(),a=i.getCenterY(),f=0;f<this.focusIcons.length;f++){var l=o-this.focusIcons[f].bounds.getCenterX(),c=a-this.focusIcons[f].bounds.getCenterY(),l=l*l+c*c;if((this.intersects(this.focusIcons[f],i,t,n)||null!=r&&this.intersects(this.focusIcons[f],s,t,n))&&(null==e||l<e)){this.currentConstraint=this.constraints[f],this.currentPoint=this.focusPoints[f],e=l,l=this.focusIcons[f].bounds.clone(),l.grow(mxConstants.HIGHLIGHT_SIZE+1),--l.width,--l.height;if(null==this.focusHighlight){c=this.createHighlightShape(),c.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,c.pointerEvents=!1,c.init(this.graph.getView().getOverlayPane()),this.focusHighlight=c;var h=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:u});mxEvent.redirectMouseEvents(c.node,this.graph,h)}this.focusHighlight.bounds=l,this.focusHighlight.redraw()}}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentPoint=this.currentFocus=this.currentConstraint=null},mxConstraintHandler.prototype.redraw=function(){if(null!=this.currentFocus&&null!=this.constraints&&null!=this.focusIcons){var e=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=e,this.currentFocusArea=new mxRectangle(e.x,e.y,e.width,e.height);for(var t=0;t<this.constraints.length;t++){var n=this.graph.getConnectionPoint(e,this.constraints[t]),r=this.getImageForConstraint(e,this.constraints[t],n),r=new mxRectangle(Math.round(n.x-r.width/2),Math.round(n.y-r.height/2),r.width,r.height);this.focusIcons[t].bounds=r,this.focusIcons[t].redraw(),this.currentFocusArea.add(this.focusIcons[t].bounds),this.focusPoints[t]=n}}},mxConstraintHandler.prototype.setFocus=function(e,t,n){this.constraints=null!=t&&!this.isStateIgnored(t,n)&&this.graph.isCellConnectable(t.cell)?this.isEnabled()?this.graph.getAllConnectionConstraints(t,n)||[]:[]:null;if(null!=this.constraints){this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height);if(null!=this.focusIcons){for(n=0;n<this.focusIcons.length;n++)this.focusIcons[n].destroy();this.focusPoints=this.focusIcons=null}this.focusPoints=[],this.focusIcons=[];for(n=0;n<this.constraints.length;n++){var r=this.graph.getConnectionPoint(t,this.constraints[n]),i=this.getImageForConstraint(t,this.constraints[n],r),s=i.src,i=new mxRectangle(Math.round(r.x-i.width/2),Math.round(r.y-i.height/2),i.width,i.height),s=new mxImageShape(i,s);s.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,s.preserveImageAspect=!1,s.init(this.graph.getView().getDecoratorPane()),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(s.node,"dragstart",function(e){return mxEvent.consume(e),!1}),null!=s.node.previousSibling&&s.node.parentNode.insertBefore(s.node,s.node.parentNode.firstChild),i=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:t}),s.redraw(),mxEvent.redirectMouseEvents(s.node,this.graph,i),this.currentFocusArea.add(s.bounds),this.focusIcons.push(s),this.focusPoints.push(r)}this.currentFocusArea.grow(this.getTolerance(e))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var e=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return e.opacity=mxConstants.HIGHLIGHT_OPACITY,e},mxConstraintHandler.prototype.intersects=function(e,t,n,r){return mxUtils.intersects(e.bounds,t)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.fadeOut=!1,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(e){this.enabled=e},mxRubberband.prototype.isForceRubberbandEvent=function(e){return mxEvent.isAltDown(e.getEvent())},mxRubberband.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null==t.getState()&&!mxEvent.isMultiTouchEvent(t.getEvent())){var n=mxUtils.getOffset(this.graph.container),r=mxUtils.getScrollOrigin(this.graph.container);r.x-=n.x,r.y-=n.y,this.start(t.getX()+r.x,t.getY()+r.y),t.consume(!1)}},mxRubberband.prototype.start=function(e,t){function n(e){e=new mxMouseEvent(e);var t=mxUtils.convertPoint(r,e.getX(),e.getY());return e.graphX=t.x,e.graphY=t.y,e}this.first=new mxPoint(e,t);var r=this.graph.container;this.dragHandler=mxUtils.bind(this,function(e){this.mouseMove(this.graph,n(e))}),this.dropHandler=mxUtils.bind(this,function(e){this.mouseUp(this.graph,n(e))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(e,t){if(!t.isConsumed()&&null!=this.first){var n=mxUtils.getScrollOrigin(this.graph.container),r=mxUtils.getOffset(this.graph.container);n.x-=r.x,n.y-=r.y;var r=t.getX()+n.x,n=t.getY()+n.y,i=this.first.x-r,s=this.first.y-n,o=this.graph.tolerance;if(null!=this.div||Math.abs(i)>o||Math.abs(s)>o)null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(r,n),t.consume()}},mxRubberband.prototype.createShape=function(){null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var e=this.sharedDiv;return mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut&&(this.sharedDiv=null),e},mxRubberband.prototype.isActive=function(e,t){return null!=this.div&&"none"!=this.div.style.display},mxRubberband.prototype.mouseUp=function(e,t){var n=this.isActive();this.reset(),n&&(this.execute(t.getEvent()),t.consume())},mxRubberband.prototype.execute=function(e){var t=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(t,e)},mxRubberband.prototype.reset=function(){if(null!=this.div)if(mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut){var e=this.div;mxUtils.setPrefixedStyle(e.style,"transition","all 0.2s linear"),e.style.pointerEvents="none",e.style.opacity=0,window.setTimeout(function(){e.parentNode.removeChild(e)},200)}else this.div.parentNode.removeChild(this.div);mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dropHandler=this.dragHandler=null,this.currentY=this.currentX=0,this.div=this.first=null},mxRubberband.prototype.update=function(e,t){this.currentX=e,this.currentY=t,this.repaint()},mxRubberband.prototype.repaint=function(){if(null!=this.div){var e=this.currentX-this.graph.panDx,t=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,e),this.y=Math.min(this.first.y,t),this.width=Math.max(this.first.x,e)-this.x,this.height=Math.max(this.first.y,t)-this.y,e=mxClient.IS_VML?this.graph.panDy:0,this.div.style.left=this.x+(mxClient.IS_VML?this.graph.panDx:0)+"px",this.div.style.top=this.y+e+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(e){},mxHandle.prototype.setPosition=function(e,t,n){},mxHandle.prototype.execute=function(){},mxHandle.prototype.copyStyle=function(e){this.graph.setCellStyles(e,this.state.style[e],[this.state.cell])},mxHandle.prototype.processEvent=function(e){var t=this.graph.view.scale,n=this.graph.view.translate,n=new mxPoint(e.getGraphX()/t-n.x,e.getGraphY()/t-n.y);null!=this.shape&&null!=this.shape.bounds&&(n.x-=this.shape.bounds.width/t/4,n.y-=this.shape.bounds.height/t/4);var t=-mxUtils.toRadians(this.getRotation()),r=-mxUtils.toRadians(this.getTotalRotation())-t,n=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(n,t),this.ignoreGrid||!this.graph.isGridEnabledEvent(e.getEvent())),r));this.setPosition(this.state.getPaintBounds(),n,e),this.positionChanged(),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var e=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):this.shape=this.createShape(e),this.initShape(e)},mxHandle.prototype.createShape=function(e){return e=new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE),new mxRectangleShape(e,mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(e){e&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){if(null!=this.shape&&null!=this.state.shape){var e=this.getPosition(this.state.getPaintBounds());if(null!=e){var t=mxUtils.toRadians(this.getTotalRotation()),e=this.rotatePoint(this.flipPoint(e),t),t=this.graph.view.scale,n=this.graph.view.translate;this.shape.bounds.x=Math.floor((e.x+n.x)*t-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((e.y+n.y)*t-this.shape.bounds.height/2),this.shape.redraw()}}},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(e,t){var n=this.state.getCellBounds(),n=new mxPoint(n.getCenterX(),n.getCenterY());return mxUtils.getRotatedPoint(e,Math.cos(t),Math.sin(t),n)},mxHandle.prototype.flipPoint=function(e){if(null!=this.state.shape){var t=this.state.getCellBounds();this.state.shape.flipH&&(e.x=2*t.x+t.width-e.x),this.state.shape.flipV&&(e.y=2*t.y+t.height-e.y)}return e},mxHandle.prototype.snapPoint=function(e,t){return t||(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e},mxHandle.prototype.setVisible=function(e){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=e?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},mxVertexHandler.prototype.graph=null,mxVertexHandler.prototype.state=null,mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX);if(0>=mxGraphHandler.prototype.maxCells||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells){var e=this.graph.isCellResizable(this.state.cell);this.sizers=[];if(e||this.graph.isLabelMovable(this.state.cell)&&2<=this.state.width&&2<=this.state.height){var t=0;e&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",t++)),this.sizers.push(this.createSizer("n-resize",t++)),this.sizers.push(this.createSizer("ne-resize",t++)),this.sizers.push(this.createSizer("w-resize",t++)),this.sizers.push(this.createSizer("e-resize",t++)),this.sizers.push(this.createSizer("sw-resize",t++)),this.sizers.push(this.createSizer("s-resize",t++))),this.sizers.push(this.createSizer("se-resize",t++))),e=this.graph.model.getGeometry(this.state.cell),null==e||e.relative||this.graph.isSwimlane(this.state.cell)||!this.graph.isLabelMovable(this.state.cell)||(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&2>this.state.width&&2>this.state.height&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(0>=mxGraphHandler.prototype.maxCells||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)&&2<=this.state.width&&2<=this.state.height},mxVertexHandler.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(e,t){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var e=this.graph.getChildCells(this.state.cell);if(0<e.length&&(this.minBounds=this.graph.view.getBounds(e),null!=this.minBounds)){var e=this.state.view.scale,t=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=e,this.minBounds.y/=e,this.minBounds.width/=e,this.minBounds.height/=e,this.x0=this.state.x/e-t.x,this.y0=this.state.y/e-t.y}},mxVertexHandler.prototype.getSelectionBounds=function(e){return new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))},mxVertexHandler.prototype.createParentHighlightShape=function(e){return this.createSelectionShape(e)},mxVertexHandler.prototype.createSelectionShape=function(e){return e=new mxRectangleShape(e,null,this.getSelectionColor()),e.strokewidth=this.getSelectionStrokeWidth(),e.isDashed=this.isSelectionDashed(),e},mxVertexHandler.prototype.getSelectionColor=function(){return mxConstants.VERTEX_SELECTION_COLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(e,t,n,r){return n=n||mxConstants.HANDLE_SIZE,n=new mxRectangle(0,0,n,n),r=this.createSizerShape(n,t,r),r.isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(--r.bounds.height,--r.bounds.width,r.dialect=mxConstants.DIALECT_STRICTHTML,r.init(this.graph.container)):(r.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,r.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(r.node,this.graph,this.state),this.graph.isEnabled()&&r.setCursor(e),this.isSizerVisible(t)||(r.visible=!1),r},mxVertexHandler.prototype.isSizerVisible=function(e){return!0},mxVertexHandler.prototype.createSizerShape=function(e,t,n){return null!=this.handleImage?(e=new mxRectangle(e.x,e.y,this.handleImage.width,this.handleImage.height),e=new mxImageShape(e,this.handleImage.src),e.preserveImageAspect=!1,e):t==mxEvent.ROTATION_HANDLE?new mxEllipse(e,n||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR):new mxRectangleShape(e,n||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(e,t,n){null!=e&&(e.bounds.x=Math.floor(t-e.bounds.width/2),e.bounds.y=Math.floor(n-e.bounds.height/2),null!=e.node&&"none"!=e.node.style.display&&e.redraw())},mxVertexHandler.prototype.getHandleForEvent=function(e){function t(t){return null!=t&&(e.isSource(t)||null!=r&&mxUtils.intersects(t.bounds,r)&&"none"!=t.node.style.display&&"hidden"!=t.node.style.visibility)}var n=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,r=this.allowHandleBoundsCheck&&(mxClient.IS_IE||0<n)?new mxRectangle(e.getGraphX()-n,e.getGraphY()-n,2*n,2*n):null;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(n=this.customHandles.length-1;0<=n;n--)if(t(this.customHandles[n].shape))return mxEvent.CUSTOM_HANDLE-n;if(t(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(t(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(n=0;n<this.sizers.length;n++)if(t(this.sizers[n]))return n;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(e){return!0},mxVertexHandler.prototype.mouseDown=function(e,t){var n=mxEvent.isMouseEvent(t.getEvent())?0:this.tolerance;!t.isConsumed()&&this.graph.isEnabled()&&(0<n||t.getState()==this.state)&&(n=this.getHandleForEvent(t),null!=n&&(this.start(t.getGraphX(),t.getGraphY(),n),t.consume()))},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(e,t,n){this.inTolerance=!0,this.childOffsetY=this.childOffsetX=0,this.index=n,this.startX=e,this.startY=t,e=this.state.view.graph.model,t=e.getParent(this.state.cell),this.state.view.currentRoot!=t&&(e.isVertex(t)||e.isEdge(t))&&(this.parentState=this.state.view.graph.view.getState(t)),this.selectionBorder.node.style.display=n==mxEvent.ROTATION_HANDLE?"inline":"none";if(!this.livePreview||this.isLivePreviewBorder())this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container));if(this.livePreview)for(this.hideSizers(),n==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":n==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[n]?this.sizers[n].node.style.display="":n<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-n].setVisible(!0),n=this.graph.getEdges(this.state.cell),this.edgeHandlers=[],e=0;e<n.length;e++)t=this.graph.selectionCellsHandler.getHandler(n[e]),null!=t&&this.edgeHandlers.push(t)},mxVertexHandler.prototype.setHandlesVisible=function(e){if(null!=this.sizers)for(var t=0;t<this.sizers.length;t++)this.sizers[t].node.style.display=e?"":"none";if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(e){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(e.getEvent())||Math.abs(e.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(e.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(e){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(e){return Math.round(10*e)/10},mxVertexHandler.prototype.roundLength=function(e){return Math.round(e)},mxVertexHandler.prototype.mouseMove=function(e,t){t.isConsumed()||null==this.index?this.graph.isMouseDown||null==this.getHandleForEvent(t)||t.consume(!1):(this.checkTolerance(t),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(t),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].active=!0):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(t):this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(t):this.resizeVertex(t),this.updateHint(t)),t.consume())},mxVertexHandler.prototype.moveLabel=function(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),n=this.graph.view.translate,r=this.graph.view.scale;this.graph.isGridEnabledEvent(e.getEvent())&&(t.x=(this.graph.snap(t.x/r-n.x)+n.x)*r,t.y=(this.graph.snap(t.y/r-n.y)+n.y)*r),this.moveSizerTo(this.sizers[null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1],t.x,t.y)},mxVertexHandler.prototype.rotateVertex=function(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),n=this.state.x+this.state.width/2-t.x,r=this.state.y+this.state.height/2-t.y;this.currentAlpha=0!=n?180*Math.atan(r/n)/Math.PI+90:0>r?180:0,0<n&&(this.currentAlpha-=180),this.rotationRaster&&this.graph.isGridEnabledEvent(e.getEvent())?(n=t.x-this.state.getCenterX(),r=t.y-this.state.getCenterY(),e=Math.max(1,5*Math.min(3,Math.max(0,Math.round(80/Math.abs(3*Math.abs(Math.sqrt(n*n+r*r)-20)))))),this.currentAlpha=Math.round(this.currentAlpha/e)*e):this.currentAlpha=this.roundAngle(this.currentAlpha),this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreview&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(e){var t=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),n=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),r=new mxPoint(e.getGraphX(),e.getGraphY()),i=this.graph.view.translate,s=this.graph.view.scale,o=Math.cos(-n),u=Math.sin(-n),a=r.x-this.startX,r=r.y-this.startY,f=u*a+o*r,a=o*a-u*r,r=f,o=this.graph.getCellGeometry(this.state.cell);this.unscaledBounds=this.union(o,a/s,r/s,this.index,this.graph.isGridEnabledEvent(e.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(e),this.isCenteredEvent(this.state,e)),o.relative||(u=this.graph.getMaximumGraphBounds(),null!=u&&null!=this.parentState&&(u=mxRectangle.fromRectangle(u),u.x-=(this.parentState.x-i.x*s)/s,u.y-=(this.parentState.y-i.y*s)/s),this.graph.isConstrainChild(this.state.cell)&&(a=this.graph.getCellContainmentArea(this.state.cell),null!=a&&(r=this.graph.getOverlap(this.state.cell),0<r&&(a=mxRectangle.fromRectangle(a),a.x-=a.width*r,a.y-=a.height*r,a.width+=2*a.width*r,a.height+=2*a.height*r),null==u?u=a:(u=mxRectangle.fromRectangle(u),u.intersect(a)))),null!=u&&(this.unscaledBounds.x<u.x&&(this.unscaledBounds.width-=u.x-this.unscaledBounds.x,this.unscaledBounds.x=u.x),this.unscaledBounds.y<u.y&&(this.unscaledBounds.height-=u.y-this.unscaledBounds.y,this.unscaledBounds.y=u.y),this.unscaledBounds.x+this.unscaledBounds.width>u.x+u.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-u.x-u.width),this.unscaledBounds.y+this.unscaledBounds.height>u.y+u.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-u.y-u.height))),this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:i.x*s)+this.unscaledBounds.x*s,(null!=this.parentState?this.parentState.y:i.y*s)+this.unscaledBounds.y*s,this.unscaledBounds.width*s,this.unscaledBounds.height*s),o.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),o=Math.cos(n),u=Math.sin(n),n=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY()),a=n.x-t.x,r=n.y-t.y,t=o*a-u*r-a,n=u*a+o*r-r,a=this.bounds.x-this.state.x,r=this.bounds.y-this.state.y,i=o*a-u*r,o=u*a+o*r,this.bounds.x+=t,this.bounds.y+=n,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+t/s),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+n/s),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==t&&0==n?this.childOffsetY=this.childOffsetX=0:(this.childOffsetX=this.state.x-this.bounds.x+i,this.childOffsetY=this.state.y-this.bounds.y+o),this.livePreview&&this.updateLivePreview(e),null!=this.preview&&this.drawPreview()},mxVertexHandler.prototype.updateLivePreview=function(e){var t=this.graph.view.scale,n=this.graph.view.translate;e=this.state.clone(),this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/t-n.x,this.state.y/t-n.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height,this.state.unscaledWidth=null,t=this.state.absoluteOffset,new mxPoint(t.x,t.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0,t=this.graph.getCellGeometry(this.state.cell),null!=t&&(n=t.offset||this.EMPTY_POINT,null==n||t.relative||(this.state.absoluteOffset.x=this.state.view.scale*n.x,this.state.absoluteOffset.y=this.state.view.scale*n.y),this.state.view.updateVertexLabelOffset(this.state)),this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.state.setState(e)},mxVertexHandler.prototype.mouseUp=function(e,t){if(null!=this.index&&null!=this.state){var n=new mxPoint(t.getGraphX(),t.getGraphY());this.graph.getModel().beginUpdate();try{if(this.index<=mxEvent.CUSTOM_HANDLE)null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].active=!1,this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].execute());else if(this.index==mxEvent.ROTATION_HANDLE)if(null!=this.currentAlpha){var r=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0);0!=r&&this.rotateCell(this.state.cell,r)}else this.rotateClick();else{var i=this.graph.isGridEnabledEvent(t.getEvent()),s=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=Math.cos(-s),u=Math.sin(-s),a=n.x-this.startX,f=n.y-this.startY,n=u*a+o*f,a=o*a-u*f,f=n,l=this.graph.view.scale,c=this.isRecursiveResize(this.state,t);this.resizeCell(this.state.cell,this.roundLength(a/l),this.roundLength(f/l),this.index,i,this.isConstrainedEvent(t),c)}}finally{this.graph.getModel().endUpdate()}t.consume(),this.reset()}},mxVertexHandler.prototype.isRecursiveResize=function(e,t){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(e,t,n){if(0!=t){var r=this.graph.getModel();if(r.isVertex(e)||r.isEdge(e)){if(!r.isEdge(e)){var i=this.graph.view.getState(e),i=null!=i?i.style:this.graph.getCellStyle(e);null!=i&&this.graph.setCellStyles(mxConstants.STYLE_ROTATION,(i[mxConstants.STYLE_ROTATION]||0)+t,[e])}i=this.graph.getCellGeometry(e);if(null!=i){var s=this.graph.getCellGeometry(n);null==s||r.isEdge(n)||(i=i.clone(),i.rotate(t,new mxPoint(s.width/2,s.height/2)),r.setGeometry(e,i));if(r.isVertex(e)&&!i.relative||r.isEdge(e))for(n=r.getChildCount(e),i=0;i<n;i++)this.rotateCell(r.getChildAt(e,i),t,e)}}}},mxVertexHandler.prototype.reset=function(){null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),this.index=this.inTolerance=this.currentAlpha=null,null!=this.preview&&(this.preview.destroy(),this.preview=null);if(this.livePreview&&null!=this.sizers)for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].active?(this.customHandles[e].active=!1,this.customHandles[e].reset()):this.customHandles[e].setVisible(!0);null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.unscaledBounds=this.edgeHandlers=null},mxVertexHandler.prototype.resizeCell=function(e,t,n,r,i,s,o){i=this.graph.model.getGeometry(e),null!=i&&(r==mxEvent.LABEL_HANDLE?(n=this.graph.view.scale,t=Math.round((this.labelShape.bounds.getCenterX()-this.startX)/n),n=Math.round((this.labelShape.bounds.getCenterY()-this.startY)/n),i=i.clone(),null==i.offset?i.offset=new mxPoint(t,n):(i.offset.x+=t,i.offset.y+=n),this.graph.model.setGeometry(e,i)):null!=this.unscaledBounds&&(n=this.graph.view.scale,0==this.childOffsetX&&0==this.childOffsetY||this.moveChildren(e,Math.round(this.childOffsetX/n),Math.round(this.childOffsetY/n)),this.graph.resizeCell(e,this.unscaledBounds,o)))},mxVertexHandler.prototype.moveChildren=function(e,t,n){for(var r=this.graph.getModel(),i=r.getChildCount(e),s=0;s<i;s++){var o=r.getChildAt(e,s),u=this.graph.getCellGeometry(o);null!=u&&(u=u.clone(),u.translate(t,n),r.setGeometry(o,u))}},mxVertexHandler.prototype.union=function(e,t,n,r,i,s,o,u,a){if(this.singleSizer)return r=e.x+e.width+t,o=e.y+e.height+n,i&&(r=this.graph.snap(r/s)*s,o=this.graph.snap(o/s)*s),s=new mxRectangle(e.x,e.y,0,0),s.add(new mxRectangle(r,o,0,0)),s;var f=e.width,l=e.height,c=e.x-o.x*s,h=c+f;e=e.y-o.y*s;var p=e+l,d=c+f/2,v=e+l/2;4<r?(p+=n,i&&(p=this.graph.snap(p/s)*s)):3>r&&(e+=n,i&&(e=this.graph.snap(e/s)*s));if(0==r||3==r||5==r)c+=t,i&&(c=this.graph.snap(c/s)*s);else if(2==r||4==r||7==r)h+=t,i&&(h=this.graph.snap(h/s)*s);return i=h-c,n=p-e,u&&(u=this.graph.getCellGeometry(this.state.cell),null!=u&&(u=u.width/u.height,1==r||2==r||7==r||6==r?i=n*u:n=i/u,0==r&&(c=h-i,e=p-n))),a&&(i+=i-f,n+=n-l,c+=d-(c+i/2),e+=v-(e+n/2)),0>i&&(c+=i,i=Math.abs(i)),0>n&&(e+=n,n=Math.abs(n)),r=new mxRectangle(c+o.x*s,e+o.y*s,i,n),null!=this.minBounds&&(r.width=Math.max(r.width,this.minBounds.x*s+this.minBounds.width*s+Math.max(0,this.x0*s-r.x)),r.height=Math.max(r.height,this.minBounds.y*s+this.minBounds.height*s+Math.max(0,this.y0*s-r.y))),r},mxVertexHandler.prototype.redraw=function(){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.redrawHandles(),this.drawPreview()},mxVertexHandler.prototype.getHandlePadding=function(){var e=new mxPoint(0,0),t=this.tolerance;return null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*t||this.bounds.height<2*this.sizers[0].bounds.height+2*t)&&(t/=2,e.x=this.sizers[0].bounds.width+t,e.y=this.sizers[0].bounds.height+t),e},mxVertexHandler.prototype.redrawHandles=function(){var e=this.tolerance;this.verticalOffset=this.horizontalOffset=0;var t=this.bounds;if(null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]){if(null==this.index&&this.manageSizers&&8<=this.sizers.length){var n=this.getHandlePadding();this.horizontalOffset=n.x,this.verticalOffset=n.y;if(0!=this.horizontalOffset||0!=this.verticalOffset)t=new mxRectangle(t.x,t.y,t.width,t.height),t.x-=this.horizontalOffset/2,t.width+=this.horizontalOffset,t.y-=this.verticalOffset/2,t.height+=this.verticalOffset;8<=this.sizers.length&&(t.width<2*this.sizers[0].bounds.width+2*e||t.height<2*this.sizers[0].bounds.height+2*e?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}e=t.x+t.width,n=t.y+t.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],e,n);else{var r=t.x+t.width/2,i=t.y+t.height/2;if(8<=this.sizers.length){var s="nw-resize n-resize ne-resize e-resize se-resize s-resize sw-resize w-resize".split(" "),o=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),u=Math.cos(o),a=Math.sin(o),o=Math.round(4*o/Math.PI),f=new mxPoint(t.getCenterX(),t.getCenterY()),l=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),u,a,f);this.moveSizerTo(this.sizers[0],l.x,l.y),this.sizers[0].setCursor(s[mxUtils.mod(0+o,s.length)]),l.x=r,l.y=t.y,l=mxUtils.getRotatedPoint(l,u,a,f),this.moveSizerTo(this.sizers[1],l.x,l.y),this.sizers[1].setCursor(s[mxUtils.mod(1+o,s.length)]),l.x=e,l.y=t.y,l=mxUtils.getRotatedPoint(l,u,a,f),this.moveSizerTo(this.sizers[2],l.x,l.y),this.sizers[2].setCursor(s[mxUtils.mod(2+o,s.length)]),l.x=t.x,l.y=i,l=mxUtils.getRotatedPoint(l,u,a,f),this.moveSizerTo(this.sizers[3],l.x,l.y),this.sizers[3].setCursor(s[mxUtils.mod(7+o,s.length)]),l.x=e,l.y=i,l=mxUtils.getRotatedPoint(l,u,a,f),this.moveSizerTo(this.sizers[4],l.x,l.y),this.sizers[4].setCursor(s[mxUtils.mod(3+o,s.length)]),l.x=t.x,l.y=n,l=mxUtils.getRotatedPoint(l,u,a,f),this.moveSizerTo(this.sizers[5],l.x,l.y),this.sizers[5].setCursor(s[mxUtils.mod(6+o,s.length)]),l.x=r,l.y=n,l=mxUtils.getRotatedPoint(l,u,a,f),this.moveSizerTo(this.sizers[6],l.x,l.y),this.sizers[6].setCursor(s[mxUtils.mod(5+o,s.length)]),l.x=e,l.y=n,l=mxUtils.getRotatedPoint(l,u,a,f),this.moveSizerTo(this.sizers[7],l.x,l.y),this.sizers[7].setCursor(s[mxUtils.mod(4+o,s.length)]),this.moveSizerTo(this.sizers[8],r+this.state.absoluteOffset.x,i+this.state.absoluteOffset.y)}else 2<=this.state.width&&2<=this.state.height?this.moveSizerTo(this.sizers[0],r+this.state.absoluteOffset.x,i+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y)}}null!=this.rotationShape&&(o=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),u=Math.cos(o),a=Math.sin(o),f=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),l=mxUtils.getRotatedPoint(this.getRotationHandlePosition(),u,a,f),null!=this.rotationShape.node&&(this.moveSizerTo(this.rotationShape,l.x,l.y),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()?"hidden":"")),null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"));if(null!=this.edgeHandlers)for(t=0;t<this.edgeHandlers.length;t++)this.edgeHandlers[t].redraw();if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)e=this.customHandles[t].shape.node.style.display,this.customHandles[t].redraw(),this.customHandles[t].shape.node.style.display=e,this.customHandles[t].shape.node.style.visibility=this.graph.isEditing()?"hidden":"";this.updateParentHighlight()},mxVertexHandler.prototype.getRotationHandlePosition=function(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)},mxVertexHandler.prototype.updateParentHighlight=function(){if(null!=this.selectionBorder)if(null!=this.parentHighlight){var e=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(e)){var e=this.graph.view.getState(e),t=this.parentHighlight.bounds;null==e||t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height||(this.parentHighlight.bounds=e,this.parentHighlight.redraw())}else this.parentHighlight.destroy(),this.parentHighlight=null}else this.parentHighlightEnabled&&(e=this.graph.model.getParent(this.state.cell),this.graph.model.isVertex(e)&&(e=this.graph.view.getState(e),null!=e&&(this.parentHighlight=this.createParentHighlightShape(e),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(e.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()))))},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw(),null!=this.parentHighlight&&this.parentHighlight.redraw()},mxVertexHandler.prototype.destroy=function(){null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.parentHighlight&&(this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint();if(null!=this.sizers){for(var e=0;e<this.sizers.length;e++)this.sizers[e].destroy();this.sizers=null}if(null!=this.customHandles){for(e=0;e<this.customHandles.length;e++)this.customHandles[e].destroy();this.customHandles=null}},mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=20,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container;if(!this.preferHtml){var e=this.state.getVisibleTerminalState(!0);null!=e&&(this.preferHtml=null!=e.text&&e.text.node.parentNode==this.graph.container),this.preferHtml||(e=this.state.getVisibleTerminalState(!1),null!=e&&(this.preferHtml=null!=e.text&&e.text.node.parentNode==this.graph.container))}this.parentHighlightEnabled&&(e=this.graph.model.getParent(this.state.cell),this.graph.model.isVertex(e)&&(e=this.graph.view.getState(e),null!=e&&(this.parentHighlight=this.createParentHighlightShape(e),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(e.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()))));if(this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells||0>=mxGraphHandler.prototype.maxCells)this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends());this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.redraw()},mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(e){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isAddPointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.isRemovePointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.getSelectionPoints=function(e){return e.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(e){return e=new mxRectangleShape(e,null,this.getSelectionColor()),e.strokewidth=this.getSelectionStrokeWidth(),e.isDashed=this.isSelectionDashed(),e},mxEdgeHandler.prototype.createSelectionShape=function(e){return e=new this.state.shape.constructor,e.outline=!0,e.apply(this.state),e.isDashed=this.isSelectionDashed(),e.stroke=this.getSelectionColor(),e.isShadow=!1,e},mxEdgeHandler.prototype.getSelectionColor=function(){return mxConstants.EDGE_SELECTION_COLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(e){return!0},mxEdgeHandler.prototype.getCellAt=function(e,t){return this.outlineConnect?null:this.graph.getCellAt(e,t)},mxEdgeHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph),t=this;return e.getCell=function(e){var n=mxCellMarker.prototype.getCell.apply(this,arguments);n!=t.state.cell&&null!=n||null==t.currentPoint||(n=t.graph.getCellAt(t.currentPoint.x,t.currentPoint.y));if(null!=n&&!this.graph.isCellConnectable(n)){var r=this.graph.getModel().getParent(n);this.graph.getModel().isVertex(r)&&this.graph.isCellConnectable(r)&&(n=r)}r=t.graph.getModel();if(this.graph.isSwimlane(n)&&null!=t.currentPoint&&this.graph.hitsSwimlaneContent(n,t.currentPoint.x,t.currentPoint.y)||!t.isConnectableCell(n)||n==t.state.cell||null!=n&&!t.graph.connectableEdges&&r.isEdge(n)||r.isAncestor(t.state.cell,n))n=null;return this.graph.isCellConnectable(n)||(n=null),n},e.isValidState=function(e){var n=t.graph.getModel(),n=t.graph.view.getTerminalPort(e,t.graph.view.getState(n.getTerminal(t.state.cell,!t.isSource)),!t.isSource),n=null!=n?n.cell:null;return t.error=t.validateConnection(t.isSource?e.cell:n,t.isSource?n:e.cell),null==t.error},e},mxEdgeHandler.prototype.validateConnection=function(e,t){return this.graph.getEdgeValidationError(this.state.cell,e,t)},mxEdgeHandler.prototype.createBends=function(){for(var e=this.state.cell,t=[],n=0;n<this.abspoints.length;n++)if(this.isHandleVisible(n)){var r=n==this.abspoints.length-1,i=0==n||r;(i||this.graph.isCellBendable(e))&&mxUtils.bind(this,function(e){var r=this.createHandleShape(e);this.initBend(r,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,e)}))),this.isHandleEnabled(n)&&r.setCursor(i?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),t.push(r),i||(this.points.push(new mxPoint(0,0)),r.node.style.visibility="hidden")})(n)}return t},mxEdgeHandler.prototype.createVirtualBends=function(){var e=[];if(this.graph.isCellBendable(this.state.cell))for(var t=1;t<this.abspoints.length;t++)mxUtils.bind(this,function(t){this.initBend(t),t.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),e.push(t)})(this.createHandleShape());return e},mxEdgeHandler.prototype.isHandleEnabled=function(e){return!0},mxEdgeHandler.prototype.isHandleVisible=function(e){var t=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),r=this.graph.getCellGeometry(this.state.cell);return(null!=r?this.graph.view.getEdgeStyle(this.state,r.points,t,n):null)!=mxEdgeStyle.EntityRelation||0==e||e==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(e){return null!=this.handleImage?(e=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src),e.preserveImageAspect=!1,e):(e=mxConstants.HANDLE_SIZE,this.preferHtml&&--e,new mxRectangleShape(new mxRectangle(0,0,e,e),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))},mxEdgeHandler.prototype.createLabelHandleShape=function(){if(null!=this.labelHandleImage){var e=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return e.preserveImageAspect=!1,e}return e=mxConstants.LABEL_HANDLE_SIZE,new mxRectangleShape(new mxRectangle(0,0,e,e),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.initBend=function(e,t){this.preferHtml?(e.dialect=mxConstants.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(e.node,this.graph,this.state,null,null,null,t),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(e.node,"dragstart",function(e){return mxEvent.consume(e),!1}),mxClient.IS_TOUCH&&e.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(e){function t(t){if(null!=t&&"none"!=t.node.style.display&&"hidden"!=t.node.style.visibility&&(e.isSource(t)||null!=r&&mxUtils.intersects(t.bounds,r))){var n=e.getGraphX()-t.bounds.getCenterX();t=e.getGraphY()-t.bounds.getCenterY(),n=n*n+t*t;if(null==i||n<=i)return i=n,!0}return!1}var n=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,r=this.allowHandleBoundsCheck&&(mxClient.IS_IE||0<n)?new mxRectangle(e.getGraphX()-n,e.getGraphY()-n,2*n,2*n):null,i=null,n=null;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(var s=this.customHandles.length-1;0<=s;s--)if(t(this.customHandles[s].shape))return mxEvent.CUSTOM_HANDLE-s;if(e.isSource(this.state.text)||t(this.labelShape))n=mxEvent.LABEL_HANDLE;if(null!=this.bends)for(s=0;s<this.bends.length;s++)t(this.bends[s])&&(n=s);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(e))for(s=0;s<this.virtualBends.length;s++)t(this.virtualBends[s])&&(n=mxEvent.VIRTUAL_HANDLE-s);return n},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(e){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(e){return!0},mxEdgeHandler.prototype.mouseDown=function(e,t){var n=this.getHandleForEvent(t);if(null!=this.bends&&null!=this.bends[n]){var r=this.bends[n].bounds;this.snapPoint=new mxPoint(r.getCenterX(),r.getCenterY())}if(this.addEnabled&&null==n&&this.isAddPointEvent(t.getEvent()))this.addPoint(this.state,t.getEvent()),t.consume();else if(null!=n&&!t.isConsumed()&&this.graph.isEnabled()){if(this.removeEnabled&&this.isRemovePointEvent(t.getEvent()))this.removePoint(this.state,n);else if(n!=mxEvent.LABEL_HANDLE||this.graph.isLabelMovable(t.getCell()))n<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-n].node,100),this.start(t.getX(),t.getY(),n);t.consume()}},mxEdgeHandler.prototype.start=function(e,t,n){this.startX=e,this.startY=t,this.isSource=null==this.bends?!1:0==n,this.isTarget=null==this.bends?!1:n==this.bends.length-1,this.isLabel=n==mxEvent.LABEL_HANDLE;if(this.isSource||this.isTarget){if(e=this.state.cell,t=this.graph.model.getTerminal(e,this.isSource),null==t&&this.graph.isTerminalPointMovable(e,this.isSource)||null!=t&&this.graph.isCellDisconnectable(e,t,this.isSource))this.index=n}else this.index=n;if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(n=0;n<this.customHandles.length;n++)n!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[n].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(e,t){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return this.graph.gridSize*this.graph.view.scale/2},mxEdgeHandler.prototype.updateHint=function(e,t){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(e){return Math.round(e)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(e){return this.snapToTerminals&&!mxEvent.isAltDown(e.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(e){var t=this.graph.getView(),n=t.scale,r=new mxPoint(this.roundLength(e.getGraphX()/n)*n,this.roundLength(e.getGraphY()/n)*n),i=this.getSnapToTerminalTolerance(),s=!1,o=!1;if(0<i&&this.isSnapToTerminalsEvent(e)){var u=function(e){null!=e&&a.call(this,new mxPoint(t.getRoutingCenterX(e),t.getRoutingCenterY(e)))},a=function(e){if(null!=e){var t=e.x;Math.abs(r.x-t)<i&&(r.x=t,s=!0),e=e.y,Math.abs(r.y-e)<i&&(r.y=e,o=!0)}};u.call(this,this.state.getVisibleTerminalState(!0)),u.call(this,this.state.getVisibleTerminalState(!1));if(null!=this.state.absolutePoints)for(u=0;u<this.state.absolutePoints.length;u++)a.call(this,this.state.absolutePoints[u])}return this.graph.isGridEnabledEvent(e.getEvent())&&(e=t.translate,s||(r.x=(this.graph.snap(r.x/n-e.x)+e.x)*n),o||(r.y=(this.graph.snap(r.y/n-e.y)+e.y)*n)),r},mxEdgeHandler.prototype.getPreviewTerminalState=function(e){return this.constraintHandler.update(e,this.isSource,!0,e.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint?(null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),e=this.graph.getModel(),e=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(e.getTerminal(this.state.cell,!this.isSource)),!this.isSource),e=null!=e?e.cell:null,this.error=this.validateConnection(this.isSource?this.constraintHandler.currentFocus.cell:e,this.isSource?e:this.constraintHandler.currentFocus.cell),e=null,null==this.error?e=this.constraintHandler.currentFocus:this.constraintHandler.reset(),e):this.graph.isIgnoreTerminalEvent(e.getEvent())?(this.marker.reset(),null):(this.marker.process(e),e=this.marker.getValidState(),null!=e&&this.graph.isCellLocked(e.cell)&&this.marker.reset(),this.marker.getValidState())},mxEdgeHandler.prototype.getPreviewPoints=function(e,t){var n=this.graph.getCellGeometry(this.state.cell),n=null!=n.points?n.points.slice():null,r=new mxPoint(e.x,e.y),i=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(n=null);else if(this.convertPoint(r,!1),null==n)n=[r];else{this.index<=mxEvent.VIRTUAL_HANDLE&&n.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,r);if(!this.isSource&&!this.isTarget){for(var s=0;s<this.bends.length;s++)if(s!=this.index){var o=this.bends[s];null!=o&&mxUtils.contains(o.bounds,e.x,e.y)&&(this.index<=mxEvent.VIRTUAL_HANDLE?n.splice(mxEvent.VIRTUAL_HANDLE-this.index,1):n.splice(this.index-1,1),i=n)}if(null==i&&this.straightRemoveEnabled&&(null==t||!mxEvent.isAltDown(t.getEvent()))){s=this.graph.tolerance*this.graph.tolerance,o=this.state.absolutePoints.slice(),o[this.index]=e;var u=this.state.getVisibleTerminalState(!0);if(null!=u){var a=this.graph.getConnectionConstraint(this.state,u,!0);if(null==a||null==this.graph.getConnectionPoint(u,a))o[0]=new mxPoint(u.view.getRoutingCenterX(u),u.view.getRoutingCenterY(u))}u=this.state.getVisibleTerminalState(!1),null!=u&&(a=this.graph.getConnectionConstraint(this.state,u,!1),null==a||null==this.graph.getConnectionPoint(u,a))&&(o[o.length-1]=new mxPoint(u.view.getRoutingCenterX(u),u.view.getRoutingCenterY(u))),a=this.index,0<a&&a<o.length-1&&mxUtils.ptSegDistSq(o[a-1].x,o[a-1].y,o[a+1].x,o[a+1].y,e.x,e.y)<s&&(n.splice(a-1,1),i=n)}}null==i&&this.index>mxEvent.VIRTUAL_HANDLE&&(n[this.index-1]=r)}return null!=i?i:n},mxEdgeHandler.prototype.isOutlineConnectEvent=function(e){var t=mxUtils.getOffset(this.graph.container),n=e.getEvent(),r=mxEvent.getClientX(n),n=mxEvent.getClientY(n),i=document.documentElement,s=this.currentPoint.x-this.graph.container.scrollLeft+t.x-((window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)),t=this.currentPoint.y-this.graph.container.scrollTop+t.y-((window.pageYOffset||i.scrollTop)-(i.clientTop||0));return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(r,n)||(s!=r||t!=n)&&null==e.getState()&&this.marker.highlight.isHighlightAt(s,t))},mxEdgeHandler.prototype.updatePreviewState=function(e,t,n,r,i){var s=this.isSource?n:this.state.getVisibleTerminalState(!0),o=this.isTarget?n:this.state.getVisibleTerminalState(!1),u=this.graph.getConnectionConstraint(e,s,!0),a=this.graph.getConnectionConstraint(e,o,!1),f=this.constraintHandler.currentConstraint;null==f&&i&&(null!=n?(r.isSource(this.marker.highlight.shape)&&(t=new mxPoint(r.getGraphX(),r.getGraphY())),f=this.graph.getOutlineConstraint(t,n,r),this.constraintHandler.setFocus(r,n,this.isSource),this.constraintHandler.currentConstraint=f,this.constraintHandler.currentPoint=t):f=new mxConnectionConstraint);if(this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var l=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=i?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/l/l,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.marker.getValidState()==r.getState()?mxConstants.DEFAULT_VALID_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/l/l,this.marker.highlight.repaint())}this.isSource?u=f:this.isTarget&&(a=f);if(this.isSource||this.isTarget)null!=f&&null!=f.point?(e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=f.point.x,e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=f.point.y):(delete e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]);e.setVisibleTerminalState(s,!0),e.setVisibleTerminalState(o,!1),this.isSource&&null==s||e.view.updateFixedTerminalPoint(e,s,!0,u),this.isTarget&&null==o||e.view.updateFixedTerminalPoint(e,o,!1,a),(this.isSource||this.isTarget)&&null==n&&(e.setAbsoluteTerminalPoint(t,this.isSource),null==this.marker.getMarkedState()&&(this.error=this.graph.allowDanglingEdges?null:"")),e.view.updatePoints(e,this.points,s,o),e.view.updateFloatingTerminalPoints(e,s,o)},mxEdgeHandler.prototype.mouseMove=function(e,t){if(null!=this.index&&null!=this.marker){this.currentPoint=this.getPointForEvent(t),this.error=null,!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())&&null!=this.snapPoint&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y);if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE)null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(t);else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,t);var n=this.isSource||this.isTarget?this.getPreviewTerminalState(t):null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint)this.currentPoint=this.constraintHandler.currentPoint.clone();else if(this.outlineConnect){var r=this.isSource||this.isTarget?this.isOutlineConnectEvent(t):!1;r?n=this.marker.highlight.state:null!=n&&n!=t.getState()&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),n=null)}null!=n&&this.graph.isCellLocked(n.cell)&&(n=null,this.marker.reset());var i=this.clonePreviewState(this.currentPoint,null!=n?n.cell:null);this.updatePreviewState(i,this.currentPoint,n,t,r),this.setPreviewColor(null==this.error?this.marker.validColor:this.marker.invalidColor),this.abspoints=i.absolutePoints,this.active=!0}this.updateHint(t,this.currentPoint),this.drawPreview(),mxEvent.consume(t.getEvent()),t.consume()}else mxClient.IS_IE&&null!=this.getHandleForEvent(t)&&t.consume(!1)},mxEdgeHandler.prototype.mouseUp=function(e,t){if(null!=this.index&&null!=this.marker){var n=this.state.cell;if(t.getX()!=this.startX||t.getY()!=this.startY){var r=!this.graph.isIgnoreTerminalEvent(t.getEvent())&&this.graph.isCloneEvent(t.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(null!=this.error)0<this.error.length&&this.graph.validationAlert(this.error);else if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){var i=this.graph.getModel();i.beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].execute()}finally{i.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var s=null;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(s=this.constraintHandler.currentFocus.cell),null==s&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke&&(s=this.marker.validState.cell);if(null!=s){var i=this.graph.getModel(),o=i.getParent(n);i.beginUpdate();try{if(r){var u=i.getGeometry(n),r=this.graph.cloneCell(n);i.add(o,r,i.getChildCount(o)),null!=u&&(u=u.clone(),i.setGeometry(r,u));var a=i.getTerminal(n,!this.isSource);this.graph.connectCell(r,a,!this.isSource),n=r}n=this.connect(n,s,this.isSource,r,t)}finally{i.endUpdate()}}else this.graph.isAllowDanglingEdges()&&(i=this.abspoints[this.isSource?0:this.abspoints.length-1],i.x=this.roundLength(i.x/this.graph.view.scale-this.graph.view.translate.x),i.y=this.roundLength(i.y/this.graph.view.scale-this.graph.view.translate.y),s=this.graph.getView().getState(this.graph.getModel().getParent(n)),null!=s&&(i.x-=s.origin.x,i.y-=s.origin.y),i.x-=this.graph.panDx/this.graph.view.scale,i.y-=this.graph.panDy/this.graph.view.scale,n=this.changeTerminalPoint(n,i,this.isSource,r))}else this.active?n=this.changePoints(n,this.points,r):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}null!=this.marker&&(this.reset(),n!=this.state.cell&&this.graph.setSelectionCell(n)),t.consume()}},mxEdgeHandler.prototype.reset=function(){this.active&&this.refresh(),this.snapPoint=this.points=this.label=this.index=this.error=null,this.active=this.isTarget=this.isSource=this.isLabel=!1;if(this.livePreview&&null!=this.sizers)for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset();if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(e){null!=this.shape&&(this.shape.stroke=e)},mxEdgeHandler.prototype.convertPoint=function(e,t){var n=this.graph.getView().getScale(),r=this.graph.getView().getTranslate();return t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/n-r.x),e.y=Math.round(e.y/n-r.y),n=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell)),null!=n&&(e.x-=n.origin.x,e.y-=n.origin.y),e},mxEdgeHandler.prototype.moveLabel=function(e,t,n){var r=this.graph.getModel(),i=r.getGeometry(e.cell);if(null!=i){var s=this.graph.getView().scale,i=i.clone();if(i.relative){var o=this.graph.getView().getRelativePoint(e,t,n);i.x=Math.round(1e4*o.x)/1e4,i.y=Math.round(o.y),i.offset=new mxPoint(0,0),o=this.graph.view.getPoint(e,i),i.offset=new mxPoint(Math.round((t-o.x)/s),Math.round((n-o.y)/s))}else{var u=e.absolutePoints,o=u[0],u=u[u.length-1];null!=o&&null!=u&&(i.offset=new mxPoint(Math.round((t-(o.x+(u.x-o.x)/2))/s),Math.round((n-(o.y+(u.y-o.y)/2))/s)),i.x=0,i.y=0)}r.setGeometry(e.cell,i)}},mxEdgeHandler.prototype.connect=function(e,t,n,r,i){r=this.graph.getModel(),r.getParent(e),r.beginUpdate();try{var s=this.constraintHandler.currentConstraint;null==s&&(s=new mxConnectionConstraint),this.graph.connectCell(e,t,n,s)}finally{r.endUpdate()}return e},mxEdgeHandler.prototype.changeTerminalPoint=function(e,t,n,r){var i=this.graph.getModel();i.beginUpdate();try{if(r){var s=i.getParent(e),o=i.getTerminal(e,!n);e=this.graph.cloneCell(e),i.add(s,e,i.getChildCount(s)),i.setTerminal(e,o,!n)}var u=i.getGeometry(e);null!=u&&(u=u.clone(),u.setTerminalPoint(t,n),i.setGeometry(e,u),this.graph.connectCell(e,null,n,new mxConnectionConstraint))}finally{i.endUpdate()}return e},mxEdgeHandler.prototype.changePoints=function(e,t,n){var r=this.graph.getModel();r.beginUpdate();try{if(n){var i=r.getParent(e),s=r.getTerminal(e,!0),o=r.getTerminal(e,!1);e=this.graph.cloneCell(e),r.add(i,e,r.getChildCount(i)),r.setTerminal(e,s,!0),r.setTerminal(e,o,!1)}var u=r.getGeometry(e);null!=u&&(u=u.clone(),u.points=t,r.setGeometry(e,u))}finally{r.endUpdate()}return e},mxEdgeHandler.prototype.addPoint=function(e,t){var n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),r=this.graph.isGridEnabledEvent(t);this.convertPoint(n,r),this.addPointAt(e,n.x,n.y),mxEvent.consume(t)},mxEdgeHandler.prototype.addPointAt=function(e,t,n){var r=this.graph.getCellGeometry(e.cell);t=new mxPoint(t,n);if(null!=r){var r=r.clone(),i=this.graph.view.translate;n=this.graph.view.scale;var i=new mxPoint(i.x*n,i.y*n),s=this.graph.model.getParent(this.state.cell);this.graph.model.isVertex(s)&&(i=this.graph.view.getState(s),i=new mxPoint(i.x,i.y)),n=mxUtils.findNearestSegment(e,t.x*n+i.x,t.y*n+i.y),null==r.points?r.points=[t]:r.points.splice(n,0,t),this.graph.getModel().setGeometry(e.cell,r),this.refresh(),this.redraw()}},mxEdgeHandler.prototype.removePoint=function(e,t){if(0<t&&t<this.abspoints.length-1){var n=this.graph.getCellGeometry(this.state.cell);null!=n&&null!=n.points&&(n=n.clone(),n.points.splice(t-1,1),this.graph.getModel().setGeometry(e.cell,n),this.refresh(),this.redraw())}},mxEdgeHandler.prototype.getHandleFillColor=function(e){e=0==e;var t=this.state.cell,n=this.graph.getModel().getTerminal(t,e),r=mxConstants.HANDLE_FILLCOLOR;return null!=n&&!this.graph.isCellDisconnectable(t,n,e)||null==n&&!this.graph.isTerminalPointMovable(t,e)?r=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=n&&this.graph.isCellDisconnectable(t,n,e)&&(r=mxConstants.CONNECT_HANDLE_FILLCOLOR),r},mxEdgeHandler.prototype.redraw=function(){this.abspoints=this.state.absolutePoints.slice(),this.redrawHandles();var e=this.graph.getModel().getGeometry(this.state.cell).points;if(null!=this.bends&&0<this.bends.length&&null!=e){null==this.points&&(this.points=[]);for(var t=1;t<this.bends.length-1;t++)null!=this.bends[t]&&null!=this.abspoints[t]&&(this.points[t-1]=e[t-1])}this.drawPreview()},mxEdgeHandler.prototype.redrawHandles=function(){var e=this.state.cell,t=this.labelShape.bounds;this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height),t=this.graph.getLabel(e),this.labelShape.visible=null!=t&&0<t.length&&this.graph.isLabelMovable(e);if(null!=this.bends&&0<this.bends.length){var n=this.abspoints.length-1,e=this.abspoints[0],r=e.x,i=e.y,t=this.bends[0].bounds;this.bends[0].bounds=new mxRectangle(Math.floor(r-t.width/2),Math.floor(i-t.height/2),t.width,t.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);var n=this.abspoints[n],r=n.x,i=n.y,s=this.bends.length-1,t=this.bends[s].bounds;this.bends[s].bounds=new mxRectangle(Math.floor(r-t.width/2),Math.floor(i-t.height/2),t.width,t.height),this.bends[s].fill=this.getHandleFillColor(s),this.bends[s].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[s].bounds),this.redrawInnerBends(e,n)}if(null!=this.abspoints&&null!=this.virtualBends&&0<this.virtualBends.length)for(e=this.abspoints[0],n=0;n<this.virtualBends.length;n++)null!=this.virtualBends[n]&&null!=this.abspoints[n+1]&&(r=this.abspoints[n+1],t=this.virtualBends[n],t.bounds=new mxRectangle(Math.floor(e.x+(r.x-e.x)/2-t.bounds.width/2),Math.floor(e.y+(r.y-e.y)/2-t.bounds.height/2),t.bounds.width,t.bounds.height),t.redraw(),mxUtils.setOpacity(t.node,this.virtualBendOpacity),e=r,this.manageLabelHandle&&this.checkLabelHandle(t.bounds));null!=this.labelShape&&this.labelShape.redraw();if(null!=this.customHandles)for(n=0;n<this.customHandles.length;n++)this.customHandles[n].redraw()},mxEdgeHandler.prototype.setHandlesVisible=function(e){if(null!=this.bends)for(var t=0;t<this.bends.length;t++)this.bends[t].node.style.display=e?"":"none";if(null!=this.virtualBends)for(t=0;t<this.virtualBends.length;t++)this.virtualBends[t].node.style.display=e?"":"none";null!=this.labelShape&&(this.labelShape.node.style.display=e?"":"none");if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)},mxEdgeHandler.prototype.redrawInnerBends=function(e,t){for(var n=1;n<this.bends.length-1;n++)if(null!=this.bends[n])if(null!=this.abspoints[n]){var r=this.abspoints[n].x,i=this.abspoints[n].y,s=this.bends[n].bounds;this.bends[n].node.style.visibility="visible",this.bends[n].bounds=new mxRectangle(Math.round(r-s.width/2),Math.round(i-s.height/2),s.width,s.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[n].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[n].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[n].bounds=new mxRectangle(Math.round(r-w/2),Math.round(i-h/2),w,h)),this.bends[n].redraw()}else this.bends[n].destroy(),this.bends[n]=null},mxEdgeHandler.prototype.checkLabelHandle=function(e){if(null!=this.labelShape){var t=this.labelShape.bounds;mxUtils.intersects(e,t)&&(e.getCenterY()<t.getCenterY()?t.y=e.y+e.height:t.y=e.y-t.height)}},mxEdgeHandler.prototype.drawPreview=function(){if(this.isLabel){var e=this.labelShape.bounds,e=new mxRectangle(Math.round(this.label.x-e.width/2),Math.round(this.label.y-e.height/2),e.width,e.height);this.labelShape.bounds=e,this.labelShape.redraw()}else null!=this.shape&&(this.shape.apply(this.state),this.shape.points=this.abspoints,this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw());null!=this.parentHighlight&&this.parentHighlight.redraw()},mxEdgeHandler.prototype.refresh=function(){this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.shape&&(this.shape.points=this.abspoints),null!=this.bends&&(this.destroyBends(this.bends),this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),null!=this.labelShape&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)},mxEdgeHandler.prototype.destroyBends=function(e){if(null!=e)for(var t=0;t<e.length;t++)null!=e[t]&&e[t].destroy()},mxEdgeHandler.prototype.destroy=function(){null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.parentHighlight&&(this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var e=[],t=this.createHandleShape(0);return this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e.push(this.createVirtualBend(mxUtils.bind(this,function(e){!mxEvent.isConsumed(e)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,e),mxEvent.consume(e))}))),this.points.push(new mxPoint(0,0)),t=this.createHandleShape(2),this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e},mxElbowEdgeHandler.prototype.createVirtualBend=function(e){var t=this.createHandleShape();return this.initBend(t,e),t.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(t.node.style.display="none"),t},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(e){var t=null;return null==this.bends||null==this.bends[1]||e!=this.bends[1].node&&e.parentNode!=this.bends[1].node||(t=this.doubleClickOrientationResource,t=mxResources.get(t)||t),t},mxElbowEdgeHandler.prototype.convertPoint=function(e,t){var n=this.graph.getView().getScale(),r=this.graph.getView().getTranslate(),i=this.state.origin;return t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/n-r.x-i.x),e.y=Math.round(e.y/n-r.y-i.y),e},mxElbowEdgeHandler.prototype.redrawInnerBends=function(e,t){var n=this.graph.getModel().getGeometry(this.state.cell),r=this.state.absolutePoints,i=null;1<r.length?(e=r[1],t=r[r.length-2]):null!=n.points&&0<n.points.length&&(i=r[0]),i=null==i?new mxPoint(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2):new mxPoint(this.graph.getView().scale*(i.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(i.y+this.graph.getView().translate.y+this.state.origin.y)),r=this.bends[1].bounds,n=r.width,r=r.height,n=new mxRectangle(Math.round(i.x-n/2),Math.round(i.y-r/2),n,r),this.manageLabelHandle?this.checkLabelHandle(n):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(n,this.labelShape.bounds)&&(n=mxConstants.HANDLE_SIZE+3,r=mxConstants.HANDLE_SIZE+3,n=new mxRectangle(Math.floor(i.x-n/2),Math.floor(i.y-r/2),n,r)),this.bends[1].bounds=n,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var e=this.state.absolutePoints;if(null!=e){var t=Math.max(1,this.graph.view.scale);if(2==e.length||3==e.length&&(Math.abs(e[0].x-e[1].x)<t&&Math.abs(e[1].x-e[2].x)<t||Math.abs(e[0].y-e[1].y)<t&&Math.abs(e[1].y-e[2].y)<t))var t=e[0].x+(e[e.length-1].x-e[0].x)/2,n=e[0].y+(e[e.length-1].y-e[0].y)/2,e=[e[0],new mxPoint(t,n),new mxPoint(t,n),e[e.length-1]]}return e},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(e){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);var t=this.getCurrentPoints(),n=this.convertPoint(t[0].clone(),!1);e=this.convertPoint(e.clone(),!1);for(var r=[],i=1;i<t.length;i++){var s=this.convertPoint(t[i].clone(),!1);i==this.index&&(0==Math.round(n.x-s.x)&&(n.x=e.x,s.x=e.x),0==Math.round(n.y-s.y)&&(n.y=e.y,s.y=e.y)),i<t.length-1&&r.push(s),n=s}if(1==r.length){var t=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),s=this.state.view.getScale(),o=this.state.view.getTranslate(),i=r[0].x*s+o.x,s=r[0].y*s+o.y;if(null!=t&&mxUtils.contains(t,i,s)||null!=n&&mxUtils.contains(n,i,s))r=[e,e]}return r},mxEdgeSegmentHandler.prototype.updatePreviewState=function(e,t,n,r){mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments);if(!this.isSource&&!this.isTarget){t=this.convertPoint(t.clone(),!1);for(var i=e.absolutePoints,s=i[0],o=i[1],u=[],a=2;a<i.length;a++){var f=i[a];0==Math.round(s.x-o.x)&&0==Math.round(o.x-f.x)||0==Math.round(s.y-o.y)&&0==Math.round(o.y-f.y)||u.push(this.convertPoint(o.clone(),!1)),s=o,o=f}s=this.state.getVisibleTerminalState(!0),o=this.state.getVisibleTerminalState(!1),a=this.state.absolutePoints;if(0!=u.length||0!=Math.round(i[0].x-i[i.length-1].x)&&0!=Math.round(i[0].y-i[i.length-1].y)){if(5==i.length&&2==u.length&&null!=s&&null!=o&&null!=a&&0==Math.round(a[0].x-a[a.length-1].x)){var u=this.graph.getView(),a=u.getScale(),f=u.getTranslate(),i=u.getRoutingCenterY(s)/a-f.y,l=this.graph.getConnectionConstraint(e,s,!0);null!=l&&(l=this.graph.getConnectionPoint(s,l),null!=l&&(this.convertPoint(l,!1),i=l.y)),u=u.getRoutingCenterY(o)/a-f.y;if(a=this.graph.getConnectionConstraint(e,o,!1))l=this.graph.getConnectionPoint(o,a),null!=l&&(this.convertPoint(l,!1),u=l.y);u=[new mxPoint(t.x,i),new mxPoint(t.x,u)]}}else u=[t,t];this.points=u,e.view.updateFixedTerminalPoints(e,s,o),e.view.updatePoints(e,this.points,s,o),e.view.updateFloatingTerminalPoints(e,s,o)}},mxEdgeSegmentHandler.prototype.connect=function(e,t,n,r,i){var s=this.graph.getModel(),o=s.getGeometry(e),u=null;if(null!=o&&null!=o.points&&0<o.points.length)for(var a=this.abspoints,f=a[0],l=a[1],u=[],c=2;c<a.length;c++){var h=a[c];0==Math.round(f.x-l.x)&&0==Math.round(l.x-h.x)||0==Math.round(f.y-l.y)&&0==Math.round(l.y-h.y)||u.push(this.convertPoint(l.clone(),!1)),f=l,l=h}s.beginUpdate();try{null!=u&&(o=s.getGeometry(e),null!=o&&(o=o.clone(),o.points=u,s.setGeometry(e,o))),e=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{s.endUpdate()}return e},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(e){return null},mxEdgeSegmentHandler.prototype.start=function(e,t,n){mxEdgeHandler.prototype.start.apply(this,arguments),null==this.bends||null==this.bends[n]||this.isSource||this.isTarget||mxUtils.setOpacity(this.bends[n].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var e=[],t=this.createHandleShape(0);this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t);var n=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var r=0;r<n.length-1;r++){t=this.createVirtualBend(),e.push(t);var i=0==Math.round(n[r].x-n[r+1].x);0==Math.round(n[r].y-n[r+1].y)&&r<n.length-2&&(i=0==Math.round(n[r].x-n[r+2].x)),t.setCursor(i?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}return t=this.createHandleShape(n.length),this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e},mxEdgeSegmentHandler.prototype.redraw=function(){this.refresh(),mxEdgeHandler.prototype.redraw.apply(this,arguments)},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(e,t){if(this.graph.isCellBendable(this.state.cell)){var n=this.getCurrentPoints();if(null!=n&&1<n.length){var r=!1;if(4==n.length&&0==Math.round(n[1].x-n[2].x)&&0==Math.round(n[1].y-n[2].y))if(r=!0,0==Math.round(n[0].y-n[n.length-1].y)){var i=n[0].x+(n[n.length-1].x-n[0].x)/2;n[1]=new mxPoint(i,n[1].y),n[2]=new mxPoint(i,n[2].y)}else i=n[0].y+(n[n.length-1].y-n[0].y)/2,n[1]=new mxPoint(n[1].x,i),n[2]=new mxPoint(n[2].x,i);for(i=0;i<n.length-1;i++)if(null!=this.bends[i+1]){e=n[i],t=n[i+1];var s=new mxPoint(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2),o=this.bends[i+1].bounds;this.bends[i+1].bounds=new mxRectangle(Math.floor(s.x-o.width/2),Math.floor(s.y-o.height/2),o.width,o.height),this.bends[i+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[i+1].bounds)}r&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(e){this.enabled=e},mxKeyHandler.prototype.bindKey=function(e,t){this.normalKeys[e]=t},mxKeyHandler.prototype.bindShiftKey=function(e,t){this.shiftKeys[e]=t},mxKeyHandler.prototype.bindControlKey=function(e,t){this.controlKeys[e]=t},mxKeyHandler.prototype.bindControlShiftKey=function(e,t){this.controlShiftKeys[e]=t},mxKeyHandler.prototype.isControlDown=function(e){return mxEvent.isControlDown(e)},mxKeyHandler.prototype.getFunction=function(e){return null==e||mxEvent.isAltDown(e)?null:this.isControlDown(e)?mxEvent.isShiftDown(e)?this.controlShiftKeys[e.keyCode]:this.controlKeys[e.keyCode]:mxEvent.isShiftDown(e)?this.shiftKeys[e.keyCode]:this.normalKeys[e.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(e){var t=mxEvent.getSource(e);return t==this.target||t.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(e)?!0:mxUtils.isAncestorNode(this.graph.container,t)},mxKeyHandler.prototype.keyDown=function(e){if(this.isEnabledForEvent(e))if(27==e.keyCode)this.escape(e);else if(!this.isEventIgnored(e)){var t=this.getFunction(e);null!=t&&(t(e),mxEvent.consume(e))}},mxKeyHandler.prototype.isEnabledForEvent=function(e){return this.graph.isEnabled()&&!mxEvent.isConsumed(e)&&this.isGraphEvent(e)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(e){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(e){this.graph.isEscapeEnabled()&&this.graph.escape(e)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(e){this.enabled=e},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(e){this.hideOnHover=e},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){this.hideTooltip()})))},mxTooltipHandler.prototype.getStateForEvent=function(e){return e.getState()},mxTooltipHandler.prototype.mouseDown=function(e,t){this.reset(t,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(e,t){if(t.getX()!=this.lastX||t.getY()!=this.lastY){this.reset(t,!0);var n=this.getStateForEvent(t);(this.isHideOnHover()||n!=this.state||t.getSource()!=this.node&&(!this.stateSource||null!=n&&this.stateSource==(t.isSource(n.shape)||!t.isSource(n.text))))&&this.hideTooltip()}this.lastX=t.getX(),this.lastY=t.getY()},mxTooltipHandler.prototype.mouseUp=function(e,t){this.reset(t,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(e,t,n){if(!this.ignoreTouchEvents||mxEvent.isMouseEvent(e.getEvent()))if(this.resetTimer(),n=null!=n?n:this.getStateForEvent(e),t&&this.isEnabled()&&null!=n&&(null==this.div||"hidden"==this.div.style.visibility)){var r=e.getSource(),i=e.getX(),s=e.getY(),o=e.isSource(n.shape)||e.isSource(n.text);this.thread=window.setTimeout(mxUtils.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var e=this.graph.getTooltip(n,r,i,s);this.show(e,i,s),this.state=n,this.node=r,this.stateSource=o}}),this.delay)}},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerHTML="")},mxTooltipHandler.prototype.show=function(e,t,n){if(!this.destroyed&&null!=e&&0<e.length){null==this.div&&this.init();var r=mxUtils.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=t+r.x+"px",this.div.style.top=n+mxConstants.TOOLTIP_VERTICAL_OFFSET+r.y+"px",mxUtils.isNode(e)?(this.div.innerHTML="",this.div.appendChild(e)):this.div.innerHTML=e.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div)}},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(e,t){},mxCellTracker.prototype.mouseMove=function(e,t){this.isEnabled()&&this.process(t)},mxCellTracker.prototype.mouseUp=function(e,t){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=!0,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=2,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(e){this.highlightColor=e,null!=this.shape&&(this.shape.stroke=e)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),this.keepOnTop||this.shape.node.parentNode.firstChild==this.shape.node||this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var e=this.graph.cellRenderer.createShape(this.state);return e.svgStrokeTolerance=this.graph.tolerance,e.points=this.state.absolutePoints,e.apply(this.state),e.stroke=this.highlightColor,e.opacity=this.opacity,e.isDashed=this.dashed,e.isShadow=!1,e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?e.pointerEvents=!1:e.svgPointerEvents="stroke",e},mxCellHighlight.prototype.getStrokeWidth=function(e){return this.strokeWidth},mxCellHighlight.prototype.repaint=function(){if(null!=this.state&&null!=this.shape){this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor());if(mxClient.IS_QUIRKS||8==document.documentMode)"transparent"==this.shape.stroke?(this.shape.stroke="white",this.shape.opacity=1):this.shape.opacity=this.opacity;this.shape.redraw()}},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(e){this.state!=e&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=e,null!=this.state&&this.drawHighlight())},mxCellHighlight.prototype.isHighlightAt=function(e,t){var n=!1;if(null!=this.shape&&null!=document.elementFromPoint&&!mxClient.IS_QUIRKS)for(var r=document.elementFromPoint(e,t);null!=r;){if(r==this.shape.node){n=!0;break}r=r.parentNode}return n},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},mxDefaultKeyHandler.prototype.editor=null,mxDefaultKeyHandler.prototype.handler=null,mxDefaultKeyHandler.prototype.bindAction=function(e,t,n){var r=mxUtils.bind(this,function(){this.editor.execute(t)});n?this.handler.bindControlKey(e,r):this.handler.bindKey(e,r)},mxDefaultKeyHandler.prototype.destroy=function(){this.handler.destroy(),this.handler=null},mxDefaultPopupMenu.prototype.imageBasePath=null,mxDefaultPopupMenu.prototype.config=null,mxDefaultPopupMenu.prototype.createMenu=function(e,t,n,r){if(null!=this.config){var i=this.createConditions(e,n,r);this.addItems(e,t,n,r,i,this.config.firstChild,null)}},mxDefaultPopupMenu.prototype.addItems=function(e,t,n,r,i,s,o){for(var u=!1;null!=s;){if("add"==s.nodeName){var a=s.getAttribute("if");if(null==a||i[a]){var a=s.getAttribute("as"),a=mxResources.get(a)||a,f=mxUtils.eval(mxUtils.getTextContent(s)),l=s.getAttribute("action"),c=s.getAttribute("icon"),h=s.getAttribute("iconCls"),p=s.getAttribute("enabled-if"),p=null==p||i[p];u&&(t.addSeparator(o),u=!1),null!=c&&this.imageBasePath&&(c=this.imageBasePath+c),a=this.addAction(t,e,a,c,f,l,n,o,h,p),this.addItems(e,t,n,r,i,s.firstChild,a)}}else"separator"==s.nodeName&&(u=!0);s=s.nextSibling}},mxDefaultPopupMenu.prototype.addAction=function(e,t,n,r,i,s,o,u,a,f){return e.addItem(n,r,function(e){"function"==typeof i&&i.call(t,t,o,e),null!=s&&t.execute(s,o,e)},u,a,f)},mxDefaultPopupMenu.prototype.createConditions=function(e,t,n){var r=e.graph.getModel(),i=r.getChildCount(t),s=[];s.nocell=null==t,s.ncells=1<e.graph.getSelectionCount(),s.notRoot=r.getRoot()!=r.getParent(e.graph.getDefaultParent()),s.cell=null!=t,r=null!=t&&1==e.graph.getSelectionCount(),s.nonEmpty=r&&0<i,s.expandable=r&&e.graph.isCellFoldable(t,!1),s.collapsable=r&&e.graph.isCellFoldable(t,!0),s.validRoot=r&&e.graph.isValidRoot(t),s.emptyValidRoot=s.validRoot&&0==i,s.swimlane=r&&e.graph.isSwimlane(t),i=this.config.getElementsByTagName("condition");for(r=0;r<i.length;r++){var o=mxUtils.eval(mxUtils.getTextContent(i[r])),u=i[r].getAttribute("name");null!=u&&"function"==typeof o&&(s[u]=o(e,t,n))}return s},mxDefaultToolbar.prototype.editor=null,mxDefaultToolbar.prototype.toolbar=null,mxDefaultToolbar.prototype.resetHandler=null,mxDefaultToolbar.prototype.spacing=4,mxDefaultToolbar.prototype.connectOnDrop=!1,mxDefaultToolbar.prototype.init=function(e){null!=e&&(this.toolbar=new mxToolbar(e),this.toolbar.addListener(mxEvent.SELECT,mxUtils.bind(this,function(e,t){var n=t.getProperty("function");this.editor.insertFunction=null!=n?mxUtils.bind(this,function(){n.apply(this,arguments),this.toolbar.resetMode()}):null})),this.resetHandler=mxUtils.bind(this,function(){null!=this.toolbar&&this.toolbar.resetMode(!0)}),this.editor.graph.addListener(mxEvent.DOUBLE_CLICK,this.resetHandler),this.editor.addListener(mxEvent.ESCAPE,this.resetHandler))},mxDefaultToolbar.prototype.addItem=function(e,t,n,r){var i=mxUtils.bind(this,function(){null!=n&&0<n.length&&this.editor.execute(n)});return this.toolbar.addItem(e,t,i,r)},mxDefaultToolbar.prototype.addSeparator=function(e){e=e||mxClient.imageBasePath+"/separator.gif",this.toolbar.addSeparator(e)},mxDefaultToolbar.prototype.addCombo=function(){return this.toolbar.addCombo()},mxDefaultToolbar.prototype.addActionCombo=function(e){return this.toolbar.addActionCombo(e)},mxDefaultToolbar.prototype.addActionOption=function(e,t,n){var r=mxUtils.bind(this,function(){this.editor.execute(n)});this.addOption(e,t,r)},mxDefaultToolbar.prototype.addOption=function(e,t,n){return this.toolbar.addOption(e,t,n)},mxDefaultToolbar.prototype.addMode=function(e,t,n,r,i){var s=mxUtils.bind(this,function(){this.editor.setMode(n),null!=i&&i(this.editor)});return this.toolbar.addSwitchMode(e,t,s,r)},mxDefaultToolbar.prototype.addPrototype=function(e,t,n,r,i,s){var o=mxUtils.bind(this,function(){return"function"==typeof n?n():null!=n?this.editor.graph.cloneCell(n):null}),u=mxUtils.bind(this,function(e,t){"function"==typeof i?i(this.editor,o(),e,t):this.drop(o(),e,t),this.toolbar.resetMode(),mxEvent.consume(e)});return e=this.toolbar.addMode(e,t,u,r,null,s),this.installDropHandler(e,function(e,t,n){u(t,n)}),e},mxDefaultToolbar.prototype.drop=function(e,t,n){var r=this.editor.graph,i=r.getModel();if(null!=n&&!i.isEdge(n)&&this.connectOnDrop&&r.isCellConnectable(n))this.connect(e,t,n);else{for(;null!=n&&!r.isValidDropTarget(n,[e],t);)n=i.getParent(n);this.insert(e,t,n)}},mxDefaultToolbar.prototype.insert=function(e,t,n){var r=this.editor.graph;if(r.canImportCell(e)){var i=mxEvent.getClientX(t),s=mxEvent.getClientY(t),i=mxUtils.convertPoint(r.container,i,s);return r.isSplitEnabled()&&r.isSplitTarget(n,[e],t)?r.splitEdge(n,[e],null,i.x,i.y):this.editor.addVertex(n,e,i.x,i.y)}return null},mxDefaultToolbar.prototype.connect=function(e,t,n){t=this.editor.graph;var r=t.getModel();if(null!=n&&t.isCellConnectable(e)&&t.isEdgeValid(null,n,e)){var i=null;r.beginUpdate();try{var s=r.getGeometry(n),o=r.getGeometry(e).clone();o.x=s.x+(s.width-o.width)/2,o.y=s.y+(s.height-o.height)/2;var u=this.spacing*t.gridSize,a=20*r.getDirectedEdgeCount(n,!0);this.editor.horizontalFlow?o.x+=(o.width+s.width)/2+u+a:o.y+=(o.height+s.height)/2+u+a,e.setGeometry(o);var f=r.getParent(n);t.addCell(e,f),t.constrainChild(e),i=this.editor.createEdge(n,e);if(null==r.getGeometry(i)){var l=new mxGeometry;l.relative=!0,r.setGeometry(i,l)}t.addEdge(i,f,n,e)}finally{r.endUpdate()}t.setSelectionCells([e,i]),t.scrollCellToVisible(e)}},mxDefaultToolbar.prototype.installDropHandler=function(e,t){var n=document.createElement("img");n.setAttribute("src",e.getAttribute("src"));var r=mxUtils.bind(this,function(i){n.style.width=2*e.offsetWidth+"px",n.style.height=2*e.offsetHeight+"px",mxUtils.makeDraggable(e,this.editor.graph,t,n),mxEvent.removeListener(n,"load",r)});mxClient.IS_IE?r():mxEvent.addListener(n,"load",r)},mxDefaultToolbar.prototype.destroy=function(){null!=this.resetHandler&&(this.editor.graph.removeListener("dblclick",this.resetHandler),this.editor.removeListener("escape",this.resetHandler),this.resetHandler=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null)},mxLoadResources?mxResources.add(mxClient.basePath+"/resources/editor"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/editor"),mxEditor.prototype=new mxEventSource,mxEditor.prototype.constructor=mxEditor,mxEditor.prototype.askZoomResource="none"!=mxClient.language?"askZoom":"",mxEditor.prototype.lastSavedResource="none"!=mxClient.language?"lastSaved":"",mxEditor.prototype.currentFileResource="none"!=mxClient.language?"currentFile":"",mxEditor.prototype.propertiesResource="none"!=mxClient.language?"properties":"",mxEditor.prototype.tasksResource="none"!=mxClient.language?"tasks":"",mxEditor.prototype.helpResource="none"!=mxClient.language?"help":"",mxEditor.prototype.outlineResource="none"!=mxClient.language?"outline":"",mxEditor.prototype.outline=null,mxEditor.prototype.graph=null,mxEditor.prototype.graphRenderHint=null,mxEditor.prototype.toolbar=null,mxEditor.prototype.status=null,mxEditor.prototype.popupHandler=null,mxEditor.prototype.undoManager=null,mxEditor.prototype.keyHandler=null,mxEditor.prototype.actions=null,mxEditor.prototype.dblClickAction="edit",mxEditor.prototype.swimlaneRequired=!1,mxEditor.prototype.disableContextMenu=!0,mxEditor.prototype.insertFunction=null,mxEditor.prototype.forcedInserting=!1,mxEditor.prototype.templates=null,mxEditor.prototype.defaultEdge=null,mxEditor.prototype.defaultEdgeStyle=null,mxEditor.prototype.defaultGroup=null,mxEditor.prototype.groupBorderSize=null,mxEditor.prototype.filename=null,mxEditor.prototype.linefeed="&#xa;",mxEditor.prototype.postParameterName="xml",mxEditor.prototype.escapePostData=!0,mxEditor.prototype.urlPost=null,mxEditor.prototype.urlImage=null,mxEditor.prototype.horizontalFlow=!1,mxEditor.prototype.layoutDiagram=!1,mxEditor.prototype.swimlaneSpacing=0,mxEditor.prototype.maintainSwimlanes=!1,mxEditor.prototype.layoutSwimlanes=!1,mxEditor.prototype.cycleAttributeValues=null,mxEditor.prototype.cycleAttributeIndex=0,mxEditor.prototype.cycleAttributeName="fillColor",mxEditor.prototype.tasks=null,mxEditor.prototype.tasksWindowImage=null,mxEditor.prototype.tasksTop=20,mxEditor.prototype.help=null,mxEditor.prototype.helpWindowImage=null,mxEditor.prototype.urlHelp=null,mxEditor.prototype.helpWidth=300,mxEditor.prototype.helpHeight=260,mxEditor.prototype.propertiesWidth=240,mxEditor.prototype.propertiesHeight=null,mxEditor.prototype.movePropertiesDialog=!1,mxEditor.prototype.validating=!1,mxEditor.prototype.modified=!1,mxEditor.prototype.isModified=function(){return this.modified},mxEditor.prototype.setModified=function(e){this.modified=e},mxEditor.prototype.addActions=function(){this.addAction("save",function(e){e.save()}),this.addAction("print",function(e){(new mxPrintPreview(e.graph,1)).open()}),this.addAction("show",function(e){mxUtils.show(e.graph,null,10,10)}),this.addAction("exportImage",function(e){var t=e.getUrlImage();if(null==t||mxClient.IS_LOCAL)e.execute("show");else{var n=mxUtils.getViewXml(e.graph,1),n=mxUtils.getXml(n,"\n");mxUtils.submit(t,e.postParameterName+"="+encodeURIComponent(n),document,"_blank")}}),this.addAction("refresh",function(e){e.graph.refresh()}),this.addAction("cut",function(e){e.graph.isEnabled()&&mxClipboard.cut(e.graph)}),this.addAction("copy",function(e){e.graph.isEnabled()&&mxClipboard.copy(e.graph)}),this.addAction("paste",function(e){e.graph.isEnabled()&&mxClipboard.paste(e.graph)}),this.addAction("delete",function(e){e.graph.isEnabled()&&e.graph.removeCells()}),this.addAction("group",function(e){e.graph.isEnabled()&&e.graph.setSelectionCell(e.groupCells())}),this.addAction("ungroup",function(e){e.graph.isEnabled()&&e.graph.setSelectionCells(e.graph.ungroupCells())}),this.addAction("removeFromParent",function(e){e.graph.isEnabled()&&e.graph.removeCellsFromParent()}),this.addAction("undo",function(e){e.graph.isEnabled()&&e.undo()}),this.addAction("redo",function(e){e.graph.isEnabled()&&e.redo()}),this.addAction("zoomIn",function(e){e.graph.zoomIn()}),this.addAction("zoomOut",function(e){e.graph.zoomOut()}),this.addAction("actualSize",function(e){e.graph.zoomActual()}),this.addAction("fit",function(e){e.graph.fit()}),this.addAction("showProperties",function(e,t){e.showProperties(t)}),this.addAction("selectAll",function(e){e.graph.isEnabled()&&e.graph.selectAll()}),this.addAction("selectNone",function(e){e.graph.isEnabled()&&e.graph.clearSelection()}),this.addAction("selectVertices",function(e){e.graph.isEnabled()&&e.graph.selectVertices()}),this.addAction("selectEdges",function(e){e.graph.isEnabled()&&e.graph.selectEdges()}),this.addAction("edit",function(e,t){e.graph.isEnabled()&&e.graph.isCellEditable(t)&&e.graph.startEditingAtCell(t)}),this.addAction("toBack",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!0)}),this.addAction("toFront",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!1)}),this.addAction("enterGroup",function(e,t){e.graph.enterGroup(t)}),this.addAction("exitGroup",function(e){e.graph.exitGroup()}),this.addAction("home",function(e){e.graph.home()}),this.addAction("selectPrevious",function(e){e.graph.isEnabled()&&e.graph.selectPreviousCell()}),this.addAction("selectNext",function(e){e.graph.isEnabled()&&e.graph.selectNextCell()}),this.addAction("selectParent",function(e){e.graph.isEnabled()&&e.graph.selectParentCell()}),this.addAction("selectChild",function(e){e.graph.isEnabled()&&e.graph.selectChildCell()}),this.addAction("collapse",function(e){e.graph.isEnabled()&&e.graph.foldCells(!0)}),this.addAction("collapseAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!0,!1,t)}}),this.addAction("expand",function(e){e.graph.isEnabled()&&e.graph.foldCells(!1)}),this.addAction("expandAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!1,!1,t)}}),this.addAction("bold",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_BOLD)}),this.addAction("italic",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_ITALIC)}),this.addAction("underline",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_UNDERLINE)}),this.addAction("alignCellsLeft",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_LEFT)}),this.addAction("alignCellsCenter",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_CENTER)}),this.addAction("alignCellsRight",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_RIGHT)}),this.addAction("alignCellsTop",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_TOP)}),this.addAction("alignCellsMiddle",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_MIDDLE)}),this.addAction("alignCellsBottom",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_BOTTOM)}),this.addAction("alignFontLeft",function(e){e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT)}),this.addAction("alignFontCenter",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER)}),this.addAction("alignFontRight",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_RIGHT)}),this.addAction("alignFontTop",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_TOP)}),this.addAction("alignFontMiddle",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE)}),this.addAction("alignFontBottom",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_BOTTOM)}),this.addAction("zoom",function(e){var t=100*e.graph.getView().scale,t=parseFloat(mxUtils.prompt(mxResources.get(e.askZoomResource)||e.askZoomResource,t))/100;isNaN(t)||e.graph.getView().setScale(t)}),this.addAction("toggleTasks",function(e){null!=e.tasks?e.tasks.setVisible(!e.tasks.isVisible()):e.showTasks()}),this.addAction("toggleHelp",function(e){null!=e.help?e.help.setVisible(!e.help.isVisible()):e.showHelp()}),this.addAction("toggleOutline",function(e){null==e.outline?e.showOutline():e.outline.setVisible(!e.outline.isVisible())}),this.addAction("toggleConsole",function(e){mxLog.setVisible(!mxLog.isVisible())})},mxEditor.prototype.configure=function(e){null!=e&&((new mxCodec(e.ownerDocument)).decode(e,this),this.resetHistory())},mxEditor.prototype.resetFirstTime=function(){document.cookie="mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/"},mxEditor.prototype.resetHistory=function(){this.lastSnapshot=(new Date).getTime(),this.undoManager.clear(),this.ignoredChanges=0,this.setModified(!1)},mxEditor.prototype.addAction=function(e,t){this.actions[e]=t},mxEditor.prototype.execute=function(e,t,n){var r=this.actions[e];if(null!=r)try{var i=arguments;i[0]=this,r.apply(this,i)}catch(s){throw mxUtils.error("Cannot execute "+e+": "+s.message,280,!0),s}else mxUtils.error("Cannot find action "+e,280,!0)},mxEditor.prototype.addTemplate=function(e,t){this.templates[e]=t},mxEditor.prototype.getTemplate=function(e){return this.templates[e]},mxEditor.prototype.createGraph=function(){var e=new mxGraph(null,null,this.graphRenderHint);return e.setTooltips(!0),e.setPanning(!0),this.installDblClickHandler(e),this.installUndoHandler(e),this.installDrillHandler(e),this.installChangeHandler(e),this.installInsertHandler(e),e.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(e,t,n){return this.createPopupMenu(e,t,n)}),e.connectionHandler.factoryMethod=mxUtils.bind(this,function(e,t){return this.createEdge(e,t)}),this.createSwimlaneManager(e),this.createLayoutManager(e),e},mxEditor.prototype.createSwimlaneManager=function(e){return e=new mxSwimlaneManager(e,!1),e.isHorizontal=mxUtils.bind(this,function(){return this.horizontalFlow}),e.isEnabled=mxUtils.bind(this,function(){return this.maintainSwimlanes}),e},mxEditor.prototype.createLayoutManager=function(e){var t=new mxLayoutManager(e),n=this;return t.getLayout=function(t){var r=null,i=n.graph.getModel();return null!=i.getParent(t)&&(n.layoutSwimlanes&&e.isSwimlane(t)?(null==n.swimlaneLayout&&(n.swimlaneLayout=n.createSwimlaneLayout()),r=n.swimlaneLayout):n.layoutDiagram&&(e.isValidRoot(t)||null==i.getParent(i.getParent(t)))&&(null==n.diagramLayout&&(n.diagramLayout=n.createDiagramLayout()),r=n.diagramLayout)),r},t},mxEditor.prototype.setGraphContainer=function(e){null==this.graph.container&&(this.graph.init(e),this.rubberband=new mxRubberband(this.graph),this.disableContextMenu&&mxEvent.disableContextMenu(e),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.installDblClickHandler=function(e){e.addListener(mxEvent.DOUBLE_CLICK,mxUtils.bind(this,function(t,n){var r=n.getProperty("cell");null!=r&&e.isEnabled()&&null!=this.dblClickAction&&(this.execute(this.dblClickAction,r),n.consume())}))},mxEditor.prototype.installUndoHandler=function(e){var t=mxUtils.bind(this,function(e,t){var n=t.getProperty("edit");this.undoManager.undoableEditHappened(n)});e.getModel().addListener(mxEvent.UNDO,t),e.getView().addListener(mxEvent.UNDO,t),t=function(t,n){var r=n.getProperty("edit").changes;e.setSelectionCells(e.getSelectionCellsForChanges(r))},this.undoManager.addListener(mxEvent.UNDO,t),this.undoManager.addListener(mxEvent.REDO,t)},mxEditor.prototype.installDrillHandler=function(e){var t=mxUtils.bind(this,function(e){this.fireEvent(new mxEventObject(mxEvent.ROOT))});e.getView().addListener(mxEvent.DOWN,t),e.getView().addListener(mxEvent.UP,t)},mxEditor.prototype.installChangeHandler=function(e){var t=mxUtils.bind(this,function(t,n){this.setModified(!0),1==this.validating&&e.validateGraph();for(var r=n.getProperty("edit").changes,i=0;i<r.length;i++){var s=r[i];if(s instanceof mxRootChange||s instanceof mxValueChange&&s.cell==this.graph.model.root||s instanceof mxCellAttributeChange&&s.cell==this.graph.model.root){this.fireEvent(new mxEventObject(mxEvent.ROOT));break}}});e.getModel().addListener(mxEvent.CHANGE,t)},mxEditor.prototype.installInsertHandler=function(e){var t=this;e.addMouseListener({mouseDown:function(e,n){null==t.insertFunction||n.isPopupTrigger()||!t.forcedInserting&&null!=n.getState()||(t.graph.clearSelection(),t.insertFunction(n.getEvent(),n.getCell()),this.isActive=!0,n.consume())},mouseMove:function(e,t){this.isActive&&t.consume()},mouseUp:function(e,t){this.isActive&&(this.isActive=!1,t.consume())}})},mxEditor.prototype.createDiagramLayout=function(){var e=this.graph.gridSize,t=new mxStackLayout(this.graph,!this.horizontalFlow,this.swimlaneSpacing,2*e,2*e);return t.isVertexIgnored=function(e){return!t.graph.isSwimlane(e)},t},mxEditor.prototype.createSwimlaneLayout=function(){return new mxCompactTreeLayout(this.graph,this.horizontalFlow)},mxEditor.prototype.createToolbar=function(){return new mxDefaultToolbar(null,this)},mxEditor.prototype.setToolbarContainer=function(e){this.toolbar.init(e),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.setStatusContainer=function(e){null==this.status&&(this.status=e,this.addListener(mxEvent.SAVE,mxUtils.bind(this,function(){var e=(new Date).toLocaleString();this.setStatus((mxResources.get(this.lastSavedResource)||this.lastSavedResource)+": "+e)})),this.addListener(mxEvent.OPEN,mxUtils.bind(this,function(){this.setStatus((mxResources.get(this.currentFileResource)||this.currentFileResource)+": "+this.filename)})),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.setStatus=function(e){null!=this.status&&null!=e&&(this.status.innerHTML=e)},mxEditor.prototype.setTitleContainer=function(e){this.addListener(mxEvent.ROOT,mxUtils.bind(this,function(t){e.innerHTML=this.getTitle()})),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.treeLayout=function(e,t){null!=e&&(new mxCompactTreeLayout(this.graph,t)).execute(e)},mxEditor.prototype.getTitle=function(){for(var e="",t=this.graph,n=t.getCurrentRoot();null!=n&&null!=t.getModel().getParent(t.getModel().getParent(n));)t.isValidRoot(n)&&(e=" > "+t.convertValueToString(n)+e),n=t.getModel().getParent(n);return this.getRootTitle()+e},mxEditor.prototype.getRootTitle=function(){var e=this.graph.getModel().getRoot();return this.graph.convertValueToString(e)},mxEditor.prototype.undo=function(){this.undoManager.undo()},mxEditor.prototype.redo=function(){this.undoManager.redo()},mxEditor.prototype.groupCells=function(){var e=null!=this.groupBorderSize?this.groupBorderSize:this.graph.gridSize;return this.graph.groupCells(this.createGroup(),e)},mxEditor.prototype.createGroup=function(){return this.graph.getModel().cloneCell(this.defaultGroup)},mxEditor.prototype.open=function(e){if(null!=e){var t=mxUtils.load(e).getXml();this.readGraphModel(t.documentElement),this.filename=e,this.fireEvent(new mxEventObject(mxEvent.OPEN,"filename",e))}},mxEditor.prototype.readGraphModel=function(e){(new mxCodec(e.ownerDocument)).decode(e,this.graph.getModel()),this.resetHistory()},mxEditor.prototype.save=function(e,t){e=e||this.getUrlPost();if(null!=e&&0<e.length){var n=this.writeGraphModel(t);this.postDiagram(e,n),this.setModified(!1)}this.fireEvent(new mxEventObject(mxEvent.SAVE,"url",e))},mxEditor.prototype.postDiagram=function(e,t){this.escapePostData&&(t=encodeURIComponent(t)),mxUtils.post(e,this.postParameterName+"="+t,mxUtils.bind(this,function(n){this.fireEvent(new mxEventObject(mxEvent.POST,"request",n,"url",e,"data",t))}))},mxEditor.prototype.writeGraphModel=function(e){e=null!=e?e:this.linefeed;var t=(new mxCodec).encode(this.graph.getModel());return mxUtils.getXml(t,e)},mxEditor.prototype.getUrlPost=function(){return this.urlPost},mxEditor.prototype.getUrlImage=function(){return this.urlImage},mxEditor.prototype.swapStyles=function(e,t){var n=this.graph.getStylesheet().styles[t];this.graph.getView().getStylesheet().putCellStyle(t,this.graph.getStylesheet().styles[e]),this.graph.getStylesheet().putCellStyle(e,n),this.graph.refresh()},mxEditor.prototype.showProperties=function(e){e=e||this.graph.getSelectionCell(),null==e&&(e=this.graph.getCurrentRoot(),null==e&&(e=this.graph.getModel().getRoot()));if(null!=e){this.graph.stopEditing(!0);var t=mxUtils.getOffset(this.graph.container),n=t.x+10,t=t.y;if(null==this.properties||this.movePropertiesDialog){var r=this.graph.getCellBounds(e);null!=r&&(n+=r.x+Math.min(200,r.width),t+=r.y)}else n=this.properties.getX(),t=this.properties.getY();this.hideProperties(),e=this.createProperties(e),null!=e&&(this.properties=new mxWindow(mxResources.get(this.propertiesResource)||this.propertiesResource,e,n,t,this.propertiesWidth,this.propertiesHeight,!1),this.properties.setVisible(!0))}},mxEditor.prototype.isPropertiesVisible=function(){return null!=this.properties},mxEditor.prototype.createProperties=function(e){var t=this.graph.getModel(),n=t.getValue(e);if(mxUtils.isNode(n)){var r=new mxForm("properties");r.addText("ID",e.getId()).setAttribute("readonly","true");var i=null,s=null,o=null,u=null,a=null;t.isVertex(e)&&(i=t.getGeometry(e),null!=i&&(s=r.addText("top",i.y),o=r.addText("left",i.x),u=r.addText("width",i.width),a=r.addText("height",i.height)));for(var f=t.getStyle(e),l=r.addText("Style",f||""),c=n.attributes,h=[],n=0;n<c.length;n++)h[n]=r.addTextarea(c[n].nodeName,c[n].value,"label"==c[n].nodeName?4:2);return n=mxUtils.bind(this,function(){this.hideProperties(),t.beginUpdate();try{null!=i&&(i=i.clone(),i.x=parseFloat(o.value),i.y=parseFloat(s.value),i.width=parseFloat(u.value),i.height=parseFloat(a.value),t.setGeometry(e,i)),0<l.value.length?t.setStyle(e,l.value):t.setStyle(e,null);for(var n=0;n<c.length;n++){var r=new mxCellAttributeChange(e,c[n].nodeName,h[n].value);t.execute(r)}this.graph.isAutoSizeCell(e)&&this.graph.updateCellSize(e)}finally{t.endUpdate()}}),f=mxUtils.bind(this,function(){this.hideProperties()}),r.addButtons(n,f),r.table}return null},mxEditor.prototype.hideProperties=function(){null!=this.properties&&(this.properties.destroy(),this.properties=null)},mxEditor.prototype.showTasks=function(){if(null==this.tasks){var e=document.createElement("div");e.style.padding="4px",e.style.paddingLeft="20px";var t=document.body.clientWidth,t=new mxWindow(mxResources.get(this.tasksResource)||this.tasksResource,e,t-220,this.tasksTop,200);t.setClosable(!0),t.destroyOnClose=!1;var n=mxUtils.bind(this,function(t){mxEvent.release(e),e.innerHTML="",this.createTasks(e)});this.graph.getModel().addListener(mxEvent.CHANGE,n),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,n),this.graph.addListener(mxEvent.ROOT,n),null!=this.tasksWindowImage&&t.setImage(this.tasksWindowImage),this.tasks=t,this.createTasks(e)}this.tasks.setVisible(!0)},mxEditor.prototype.refreshTasks=function(e){null!=this.tasks&&(e=this.tasks.content,mxEvent.release(e),e.innerHTML="",this.createTasks(e))},mxEditor.prototype.createTasks=function(e){},mxEditor.prototype.showHelp=function(e){if(null==this.help){var t=document.createElement("iframe");t.setAttribute("src",mxResources.get("urlHelp")||this.urlHelp),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("frameBorder","0"),t.style.backgroundColor="white",e=document.body.clientWidth;var n=document.body.clientHeight||document.documentElement.clientHeight,r=new mxWindow(mxResources.get(this.helpResource)||this.helpResource,t,(e-this.helpWidth)/2,(n-this.helpHeight)/3,this.helpWidth,this.helpHeight);r.setMaximizable(!0),r.setClosable(!0),r.destroyOnClose=!1,r.setResizable(!0),null!=this.helpWindowImage&&r.setImage(this.helpWindowImage),mxClient.IS_NS&&(e=function(e){t.setAttribute("height",r.div.offsetHeight-26+"px")},r.addListener(mxEvent.RESIZE_END,e),r.addListener(mxEvent.MAXIMIZE,e),r.addListener(mxEvent.NORMALIZE,e),r.addListener(mxEvent.SHOW,e)),this.help=r}this.help.setVisible(!0)},mxEditor.prototype.showOutline=function(){if(null==this.outline){var e=document.createElement("div");e.style.overflow="hidden",e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.background="white",e.style.cursor="move",8==document.documentMode&&(e.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=100)");var t=new mxWindow(mxResources.get(this.outlineResource)||this.outlineResource,e,600,480,200,200,!1),n=new mxOutline(this.graph,e);t.setClosable(!0),t.setResizable(!0),t.destroyOnClose=!1,t.addListener(mxEvent.RESIZE_END,function(){n.update()}),this.outline=t,this.outline.outline=n}this.outline.setVisible(!0),this.outline.outline.update(!0)},mxEditor.prototype.setMode=function(e){"select"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!1)):"connect"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!0)):"pan"==e&&(this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.setConnectable(!1))},mxEditor.prototype.createPopupMenu=function(e,t,n){this.popupHandler.createMenu(this,e,t,n)},mxEditor.prototype.createEdge=function(e,t){var n;if(null!=this.defaultEdge)n=this.graph.getModel().cloneCell(this.defaultEdge);else{n=new mxCell(""),n.setEdge(!0);var r=new mxGeometry;r.relative=!0,n.setGeometry(r)}return r=this.getEdgeStyle(),null!=r&&n.setStyle(r),n},mxEditor.prototype.getEdgeStyle=function(){return this.defaultEdgeStyle},mxEditor.prototype.consumeCycleAttribute=function(e){return null!=this.cycleAttributeValues&&0<this.cycleAttributeValues.length&&this.graph.isSwimlane(e)?this.cycleAttributeValues[this.cycleAttributeIndex++%this.cycleAttributeValues.length]:null},mxEditor.prototype.cycleAttribute=function(e){if(null!=this.cycleAttributeName){var t=this.consumeCycleAttribute(e);null!=t&&e.setStyle(e.getStyle()+";"+this.cycleAttributeName+"="+t)}},mxEditor.prototype.addVertex=function(e,t,n,r){for(var i=this.graph.getModel();null!=e&&!this.graph.isValidDropTarget(e);)e=i.getParent(e);e=null!=e?e:this.graph.getSwimlaneAt(n,r);var s=this.graph.getView().scale,o=i.getGeometry(t),u=i.getGeometry(e);if(this.graph.isSwimlane(t)&&!this.graph.swimlaneNesting)e=null;else{if(null==e&&this.swimlaneRequired)return null;if(null!=e&&null!=u){var a=this.graph.getView().getState(e);if(null!=a){if(n-=a.origin.x*s,r-=a.origin.y*s,this.graph.isConstrainedMoving){var u=o.width,f=o.height,l=a.x+a.width;n+u>l&&(n-=n+u-l),l=a.y+a.height,r+f>l&&(r-=r+f-l)}}else null!=u&&(n-=u.x*s,r-=u.y*s)}}o=o.clone(),o.x=this.graph.snap(n/s-this.graph.getView().translate.x-this.graph.gridSize/2),o.y=this.graph.snap(r/s-this.graph.getView().translate.y-this.graph.gridSize/2),t.setGeometry(o),null==e&&(e=this.graph.getDefaultParent()),this.cycleAttribute(t),this.fireEvent(new mxEventObject(mxEvent.BEFORE_ADD_VERTEX,"vertex",t,"parent",e)),i.beginUpdate();try{t=this.graph.addCell(t,e),null!=t&&(this.graph.constrainChild(t),this.fireEvent(new mxEventObject(mxEvent.ADD_VERTEX,"vertex",t)))}finally{i.endUpdate()}return null!=t&&(this.graph.setSelectionCell(t),this.graph.scrollCellToVisible(t),this.fireEvent(new mxEventObject(mxEvent.AFTER_ADD_VERTEX,"vertex",t))),t},mxEditor.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tasks&&this.tasks.destroy(),null!=this.outline&&this.outline.destroy(),null!=this.properties&&this.properties.destroy(),null!=this.keyHandler&&this.keyHandler.destroy(),null!=this.rubberband&&this.rubberband.destroy(),null!=this.toolbar&&this.toolbar.destroy(),null!=this.graph&&this.graph.destroy(),this.templates=this.status=null)};var mxCodecRegistry={codecs:[],aliases:[],register:function(e){if(null!=e){var t=e.getName();mxCodecRegistry.codecs[t]=e;var n=mxUtils.getFunctionName(e.template.constructor);n!=t&&mxCodecRegistry.addAlias(n,t)}return e},addAlias:function(e,t){mxCodecRegistry.aliases[e]=t},getCodec:function(e){var t=null;if(null!=e){var t=mxUtils.getFunctionName(e),n=mxCodecRegistry.aliases[t];null!=n&&(t=n),t=mxCodecRegistry.codecs[t];if(null==t)try{t=new mxObjectCodec(new e),mxCodecRegistry.register(t)}catch(r){}}return t}};mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(e,t){return this.objects[e]=t},mxCodec.prototype.getObject=function(e){var t=null;return null!=e&&(t=this.objects[e],null==t&&(t=this.lookup(e),null==t&&(e=this.getElementById(e),null!=e&&(t=this.decode(e))))),t},mxCodec.prototype.lookup=function(e){return null},mxCodec.prototype.getElementById=function(e){return null==this.elements&&(this.elements={},null!=this.document.documentElement&&this.addElement(this.document.documentElement)),this.elements[e]},mxCodec.prototype.addElement=function(e){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var t=e.getAttribute("id");null!=t&&null==this.elements[t]&&(this.elements[t]=e)}for(e=e.firstChild;null!=e;)this.addElement(e),e=e.nextSibling},mxCodec.prototype.getId=function(e){var t=null;return null!=e&&(t=this.reference(e),null==t&&e instanceof mxCell&&(t=e.getId(),null==t&&(t=mxCellPath.create(e),0==t.length&&(t="root")))),t},mxCodec.prototype.reference=function(e){return null},mxCodec.prototype.encode=function(e){var t=null;if(null!=e&&null!=e.constructor){var n=mxCodecRegistry.getCodec(e.constructor);null!=n?t=n.encode(this,e):mxUtils.isNode(e)?t=mxUtils.importNode(this.document,e,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(e.constructor))}return t},mxCodec.prototype.decode=function(e,t){var n=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){n=null;try{n=window[e.nodeName]}catch(r){}n=mxCodecRegistry.getCodec(n),null!=n?n=n.decode(this,e,t):(n=e.cloneNode(!0),n.removeAttribute("as"))}return n},mxCodec.prototype.encodeCell=function(e,t,n){t.appendChild(this.encode(e));if(null==n||n){n=e.getChildCount();for(var r=0;r<n;r++)this.encodeCell(e.getChildAt(r),t)}},mxCodec.prototype.isCellCodec=function(e){return null!=e&&"function"==typeof e.isCellCodec?e.isCellCodec():!1},mxCodec.prototype.decodeCell=function(e,t){t=null!=t?t:!0;var n=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){n=mxCodecRegistry.getCodec(e.nodeName);if(!this.isCellCodec(n))for(var r=e.firstChild;null!=r&&!this.isCellCodec(n);)n=mxCodecRegistry.getCodec(r.nodeName),r=r.nextSibling;this.isCellCodec(n)||(n=mxCodecRegistry.getCodec(mxCell)),n=n.decode(this,e),t&&this.insertIntoGraph(n)}return n},mxCodec.prototype.insertIntoGraph=function(e){var t=e.parent,n=e.getTerminal(!0),r=e.getTerminal(!1);e.setTerminal(null,!1),e.setTerminal(null,!0),e.parent=null,null!=t&&t.insert(e),null!=n&&n.insertEdge(e,!0),null!=r&&r.insertEdge(e,!1)},mxCodec.prototype.setAttribute=function(e,t,n){null!=t&&null!=n&&e.setAttribute(t,n)},mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(e){if(null!=e){var t=this.reverse[e];null!=t&&(e=t)}return e},mxObjectCodec.prototype.getAttributeName=function(e){if(null!=e){var t=this.mapping[e];null!=t&&(e=t)}return e},mxObjectCodec.prototype.isExcluded=function(e,t,n,r){return t==mxObjectIdentity.FIELD_NAME||0<=mxUtils.indexOf(this.exclude,t)},mxObjectCodec.prototype.isReference=function(e,t,n,r){return 0<=mxUtils.indexOf(this.idrefs,t)},mxObjectCodec.prototype.encode=function(e,t){var n=e.document.createElement(this.getName());return t=this.beforeEncode(e,t,n),this.encodeObject(e,t,n),this.afterEncode(e,t,n)},mxObjectCodec.prototype.encodeObject=function(e,t,n){e.setAttribute(n,"id",e.getId(t));for(var r in t){var i=r,s=t[i];null==s||this.isExcluded(t,i,s,!0)||(mxUtils.isInteger(i)&&(i=null),this.encodeValue(e,t,i,s,n))}},mxObjectCodec.prototype.encodeValue=function(e,t,n,r,i){if(null!=r){if(this.isReference(t,n,r,!0)){var s=e.getId(r);if(null==s){mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+n+"="+r);return}r=s}s=this.template[n];if(null==n||e.encodeDefaults||s!=r)n=this.getAttributeName(n),this.writeAttribute(e,t,n,r,i)}},mxObjectCodec.prototype.writeAttribute=function(e,t,n,r,i){"object"!=typeof r?this.writePrimitiveAttribute(e,t,n,r,i):this.writeComplexAttribute(e,t,n,r,i)},mxObjectCodec.prototype.writePrimitiveAttribute=function(e,t,n,r,i){r=this.convertAttributeToXml(e,t,n,r,i),null==n?(t=e.document.createElement("add"),"function"==typeof r?t.appendChild(e.document.createTextNode(r)):e.setAttribute(t,"value",r),i.appendChild(t)):"function"!=typeof r&&e.setAttribute(i,n,r)},mxObjectCodec.prototype.writeComplexAttribute=function(e,t,n,r,i){e=e.encode(r),null!=e?(null!=n&&e.setAttribute("as",n),i.appendChild(e)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+n+": "+r)},mxObjectCodec.prototype.convertAttributeToXml=function(e,t,n,r){return this.isBooleanAttribute(e,t,n,r)&&(r=1==r?"1":"0"),r},mxObjectCodec.prototype.isBooleanAttribute=function(e,t,n,r){return"undefined"==typeof r.length&&(1==r||0==r)},mxObjectCodec.prototype.convertAttributeFromXml=function(e,t,n){var r=t.value;return this.isNumericAttribute(e,t,n)&&(r=parseFloat(r),isNaN(r)&&(r=0)),r},mxObjectCodec.prototype.isNumericAttribute=function(e,t,n){return n.constructor==mxGeometry&&("x"==t.name||"y"==t.name||"width"==t.name||"height"==t.name)||n.constructor==mxPoint&&("x"==t.name||"y"==t.name)||mxUtils.isNumeric(t.value)},mxObjectCodec.prototype.beforeEncode=function(e,t,n){return t},mxObjectCodec.prototype.afterEncode=function(e,t,n){return n},mxObjectCodec.prototype.decode=function(e,t,n){var r=t.getAttribute("id"),i=e.objects[r];return null==i&&(i=n||this.cloneTemplate(),null!=r&&e.putObject(r,i)),t=this.beforeDecode(e,t,i),this.decodeNode(e,t,i),this.afterDecode(e,t,i)},mxObjectCodec.prototype.decodeNode=function(e,t,n){null!=t&&(this.decodeAttributes(e,t,n),this.decodeChildren(e,t,n))},mxObjectCodec.prototype.decodeAttributes=function(e,t,n){t=t.attributes;if(null!=t)for(var r=0;r<t.length;r++)this.decodeAttribute(e,t[r],n)},mxObjectCodec.prototype.isIgnoredAttribute=function(e,t,n){return"as"==t.nodeName||"id"==t.nodeName},mxObjectCodec.prototype.decodeAttribute=function(e,t,n){if(!this.isIgnoredAttribute(e,t,n)){var r=t.nodeName;t=this.convertAttributeFromXml(e,t,n);var i=this.getFieldName(r);if(this.isReference(n,i,t,!1)){e=e.getObject(t);if(null==e){mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+r+"="+t);return}t=e}this.isExcluded(n,r,t,!1)||(n[r]=t)}},mxObjectCodec.prototype.decodeChildren=function(e,t,n){for(t=t.firstChild;null!=t;){var r=t.nextSibling;t.nodeType!=mxConstants.NODETYPE_ELEMENT||this.processInclude(e,t,n)||this.decodeChild(e,t,n),t=r}},mxObjectCodec.prototype.decodeChild=function(e,t,n){var r=this.getFieldName(t.getAttribute("as"));if(null==r||!this.isExcluded(n,r,t,!1)){var i=this.getFieldTemplate(n,r,t);"add"==t.nodeName?(e=t.getAttribute("value"),null==e&&mxObjectCodec.allowEval&&(e=mxUtils.eval(mxUtils.getTextContent(t)))):e=e.decode(t,i),this.addObjectValue(n,r,e,i)}},mxObjectCodec.prototype.getFieldTemplate=function(e,t,n){return e=e[t],e instanceof Array&&0<e.length&&(e=null),e},mxObjectCodec.prototype.addObjectValue=function(e,t,n,r){null!=n&&n!=r&&(null!=t&&0<t.length?e[t]=n:e.push(n))},mxObjectCodec.prototype.processInclude=function(e,t,n){if("include"==t.nodeName){t=t.getAttribute("name");if(null!=t)try{var r=mxUtils.load(t).getDocumentElement();null!=r&&e.decode(r,n)}catch(i){}return!0}return!1},mxObjectCodec.prototype.beforeDecode=function(e,t,n){return t},mxObjectCodec.prototype.afterDecode=function(e,t,n){return n},mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]);return e.isCellCodec=function(){return!0},e.isNumericAttribute=function(e,t,n){return"value"!==t.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},e.isExcluded=function(e,t,n,r){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||r&&"value"==t&&n.nodeType==mxConstants.NODETYPE_ELEMENT},e.afterEncode=function(e,t,n){if(null!=t.value&&t.value.nodeType==mxConstants.NODETYPE_ELEMENT){var r=n;n=mxUtils.importNode(e.document,t.value,!0),n.appendChild(r),e=r.getAttribute("id"),n.setAttribute("id",e),r.removeAttribute("id")}return n},e.beforeDecode=function(e,t,n){var r=t.cloneNode(!0),i=this.getName();t.nodeName!=i?(r=t.getElementsByTagName(i)[0],null!=r&&r.parentNode==t?(mxUtils.removeWhitespace(r,!0),mxUtils.removeWhitespace(r,!1),r.parentNode.removeChild(r)):r=null,n.value=t.cloneNode(!0),t=n.value.getAttribute("id"),null!=t&&(n.setId(t),n.value.removeAttribute("id"))):n.setId(t.getAttribute("id"));if(null!=r)for(t=0;t<this.idrefs.length;t++){var i=this.idrefs[t],s=r.getAttribute(i);if(null!=s){r.removeAttribute(i);var o=e.objects[s]||e.lookup(s);null==o&&(s=e.getElementById(s),null!=s&&(o=(mxCodecRegistry.codecs[s.nodeName]||this).decode(e,s))),n[i]=o}}return r},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphModel);return e.encodeObject=function(e,t,n){var r=e.document.createElement("root");e.encodeCell(t.getRoot(),r),n.appendChild(r)},e.decodeChild=function(e,t,n){"root"==t.nodeName?this.decodeRoot(e,t,n):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeRoot=function(e,t,n){var r=null;for(t=t.firstChild;null!=t;){var i=e.decodeCell(t);null!=i&&null==i.getParent()&&(r=i),t=t.nextSibling}null!=r&&n.setRoot(r)},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return e.afterEncode=function(e,t,n){return e.encodeCell(t.root,n),n},e.beforeDecode=function(e,t,n){if(null!=t.firstChild&&t.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){t=t.cloneNode(!0);var r=t.firstChild;n.root=e.decodeCell(r,!1),n=r.nextSibling,r.parentNode.removeChild(r);for(r=n;null!=r;)n=r.nextSibling,e.decodeCell(r),r.parentNode.removeChild(r),r=n}return t},e.afterDecode=function(e,t,n){return n.previous=n.root,n},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return e.isReference=function(e,t,n,r){return"child"!=t||r&&!e.model.contains(e.previous)?0<=mxUtils.indexOf(this.idrefs,t):!0},e.isExcluded=function(e,t,n,r){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||r&&null!=n&&("previous"==t||"parent"==t)&&!e.model.contains(n)},e.afterEncode=function(e,t,n){return this.isReference(t,"child",t.child,!0)?n.setAttribute("child",e.getId(t.child)):e.encodeCell(t.child,n),n},e.beforeDecode=function(e,t,n){if(null!=t.firstChild&&t.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){t=t.cloneNode(!0);var r=t.firstChild;n.child=e.decodeCell(r,!1),n=r.nextSibling,r.parentNode.removeChild(r);for(r=n;null!=r;){n=r.nextSibling;if(r.nodeType==mxConstants.NODETYPE_ELEMENT){var i=r.getAttribute("id");null==e.lookup(i)&&e.decodeCell(r)}r.parentNode.removeChild(r),r=n}}else r=t.getAttribute("child"),n.child=e.getObject(r);return t},e.afterDecode=function(e,t,n){return null!=n.child&&(null!=n.child.parent&&null!=n.previous&&n.child.parent!=n.previous&&(n.previous=n.child.parent),n.child.parent=n.previous,n.previous=n.parent,n.previousIndex=n.index),n},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return e.afterDecode=function(e,t,n){return n.previous=n.terminal,n},e}());var mxGenericChangeCodec=function(e,t){var n=new mxObjectCodec(e,["model","previous"],["cell"]);return n.afterDecode=function(e,n,r){return mxUtils.isNode(r.cell)&&(r.cell=e.decodeCell(r.cell,!1)),r.previous=r[t],r},n};mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),mxCodecRegistry.register(function(){return new mxObjectCodec(new mxGraph,"graphListeners eventListeners view container cellRenderer editor selection".split(" "))}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphView);return e.encode=function(e,t){return this.encodeCell(e,t,t.graph.getModel().getRoot())},e.encodeCell=function(e,t,n){var r=t.graph.getModel(),i=t.getState(n),s=r.getParent(n);if(null==s||null!=i){var o=r.getChildCount(n),u=t.graph.getCellGeometry(n),a=null;s==r.getRoot()?a="layer":null==s?a="graph":r.isEdge(n)?a="edge":0<o&&null!=u?a="group":r.isVertex(n)&&(a="vertex");if(null!=a){var f=e.document.createElement(a);null!=t.graph.getLabel(n)&&(f.setAttribute("label",t.graph.getLabel(n)),t.graph.isHtmlLabel(n)&&f.setAttribute("html",!0));if(null==s){var l=t.getGraphBounds();null!=l&&(f.setAttribute("x",Math.round(l.x)),f.setAttribute("y",Math.round(l.y)),f.setAttribute("width",Math.round(l.width)),f.setAttribute("height",Math.round(l.height))),f.setAttribute("scale",t.scale)}else if(null!=i&&null!=u){for(l in i.style)s=i.style[l],"function"==typeof s&&"object"==typeof s&&(s=mxStyleRegistry.getName(s)),null!=s&&"function"!=typeof s&&"object"!=typeof s&&f.setAttribute(l,s);s=i.absolutePoints;if(null!=s&&0<s.length){u=Math.round(s[0].x)+","+Math.round(s[0].y);for(l=1;l<s.length;l++)u+=" "+Math.round(s[l].x)+","+Math.round(s[l].y);f.setAttribute("points",u)}else f.setAttribute("x",Math.round(i.x)),f.setAttribute("y",Math.round(i.y)),f.setAttribute("width",Math.round(i.width)),f.setAttribute("height",Math.round(i.height));l=i.absoluteOffset,null!=l&&(0!=l.x&&f.setAttribute("dx",Math.round(l.x)),0!=l.y&&f.setAttribute("dy",Math.round(l.y)))}for(l=0;l<o;l++)i=this.encodeCell(e,t,r.getChildAt(n,l)),null!=i&&f.appendChild(i)}}return f},e}());var mxStylesheetCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxStylesheet);return e.encode=function(e,t){var n=e.document.createElement(this.getName()),r;for(r in t.styles){var i=t.styles[r],s=e.document.createElement("add");if(null!=r){s.setAttribute("as",r);for(var o in i){var u=this.getStringValue(o,i[o]);if(null!=u){var a=e.document.createElement("add");a.setAttribute("value",u),a.setAttribute("as",o),s.appendChild(a)}}0<s.childNodes.length&&n.appendChild(s)}}return n},e.getStringValue=function(e,t){var n=typeof t;return"function"==n?t=mxStyleRegistry.getName(style[j]):"object"==n&&(t=null),t},e.decode=function(e,t,n){n=n||new this.template.constructor;var r=t.getAttribute("id");null!=r&&(e.objects[r]=n);for(t=t.firstChild;null!=t;){if(!this.processInclude(e,t,n)&&"add"==t.nodeName&&(r=t.getAttribute("as"),null!=r)){var i=t.getAttribute("extend"),s=null!=i?mxUtils.clone(n.styles[i]):null;null==s&&(null!=i&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+i+" not found to extend"),s={});for(i=t.firstChild;null!=i;){if(i.nodeType==mxConstants.NODETYPE_ELEMENT){var o=i.getAttribute("as");if("add"==i.nodeName){var u=mxUtils.getTextContent(i);null!=u&&0<u.length&&mxStylesheetCodec.allowEval?u=mxUtils.eval(u):(u=i.getAttribute("value"),mxUtils.isNumeric(u)&&(u=parseFloat(u))),null!=u&&(s[o]=u)}else"remove"==i.nodeName&&delete s[o]}i=i.nextSibling}n.putCellStyle(r,s)}t=t.nextSibling}return n},e}());mxStylesheetCodec.allowEval=!0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultKeyHandler);return e.encode=function(e,t){return null},e.decode=function(e,t,n){if(null!=n)for(t=t.firstChild;null!=t;){if(!this.processInclude(e,t,n)&&"add"==t.nodeName){var r=t.getAttribute("as"),i=t.getAttribute("action"),s=t.getAttribute("control");n.bindAction(r,i,s)}t=t.nextSibling}return n},e}());var mxDefaultToolbarCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultToolbar);return e.encode=function(e,t){return null},e.decode=function(e,t,n){if(null!=n){var r=n.editor;for(t=t.firstChild;null!=t;){if(t.nodeType==mxConstants.NODETYPE_ELEMENT&&!this.processInclude(e,t,n))if("separator"==t.nodeName)n.addSeparator();else if("br"==t.nodeName)n.toolbar.addBreak();else if("hr"==t.nodeName)n.toolbar.addLine();else if("add"==t.nodeName){var i=t.getAttribute("as"),i=mxResources.get(i)||i,s=t.getAttribute("icon"),o=t.getAttribute("pressedIcon"),u=t.getAttribute("action"),a=t.getAttribute("mode"),f=t.getAttribute("template"),l="0"!=t.getAttribute("toggle"),c=mxUtils.getTextContent(t),h=null;if(null!=u)h=n.addItem(i,s,u,o);else if(null!=a)var p=mxDefaultToolbarCodec.allowEval?mxUtils.eval(c):null,h=n.addMode(i,s,a,o,p);else if(null!=f||null!=c&&0<c.length)h=r.templates[f],f=t.getAttribute("style"),null!=h&&null!=f&&(h=r.graph.cloneCell(h),h.setStyle(f)),f=null,null!=c&&0<c.length&&mxDefaultToolbarCodec.allowEval&&(f=mxUtils.eval(c)),h=n.addPrototype(i,s,h,o,f,l);else if(o=mxUtils.getChildNodes(t),0<o.length)if(null==s)for(f=n.addActionCombo(i),i=0;i<o.length;i++)l=o[i],"separator"==l.nodeName?n.addOption(f,"---"):"add"==l.nodeName&&(s=l.getAttribute("as"),l=l.getAttribute("action"),n.addActionOption(f,s,l));else{var d=null,v=n.addPrototype(i,s,function(){var e=r.templates[d.value];if(null!=e){var e=e.clone(),t=d.options[d.selectedIndex].cellStyle;return null!=t&&e.setStyle(t),e}return mxLog.warn("Template "+e+" not found"),null},null,null,l),d=n.addCombo();mxEvent.addListener(d,"change",function(){n.toolbar.selectMode(v,function(e){return e=mxUtils.convertPoint(r.graph.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),r.addVertex(null,p(),e.x,e.y)}),n.toolbar.noReset=!1});for(i=0;i<o.length;i++)l=o[i],"separator"==l.nodeName?n.addOption(d,"---"):"add"==l.nodeName&&(s=l.getAttribute("as"),c=l.getAttribute("template"),n.addOption(d,s,c||f).cellStyle=l.getAttribute("style"))}null!=h&&(f=t.getAttribute("id"),null!=f&&0<f.length&&h.setAttribute("id",f))}t=t.nextSibling}}return n},e}());mxDefaultToolbarCodec.allowEval=!0,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultPopupMenu);return e.encode=function(e,t){return null},e.decode=function(e,t,n){var r=t.getElementsByTagName("include")[0];return null!=r?this.processInclude(e,r,n):null!=n&&(n.config=t),n},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxEditor,"modified lastSnapshot ignoredChanges undoManager graphContainer toolbarContainer".split(" "));return e.afterDecode=function(e,t,n){return e=t.getAttribute("defaultEdge"),null!=e&&(t.removeAttribute("defaultEdge"),n.defaultEdge=n.templates[e]),e=t.getAttribute("defaultGroup"),null!=e&&(t.removeAttribute("defaultGroup"),n.defaultGroup=n.templates[e]),n},e.decodeChild=function(e,t,n){if("Array"==t.nodeName){if("templates"==t.getAttribute("as")){this.decodeTemplates(e,t,n);return}}else if("ui"==t.nodeName){this.decodeUi(e,t,n);return}mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeUi=function(e,t,n){for(e=t.firstChild;null!=e;){if("add"==e.nodeName){t=e.getAttribute("as");var r=e.getAttribute("element"),i=e.getAttribute("style");if(null!=r)r=document.getElementById(r),null!=r&&null!=i&&(r.style.cssText+=";"+i);else{var s=parseInt(e.getAttribute("x")),o=parseInt(e.getAttribute("y")),u=e.getAttribute("width"),a=e.getAttribute("height"),r=document.createElement("div");r.style.cssText=i,(new mxWindow(mxResources.get(t)||t,r,s,o,u,a,!1,!0)).setVisible(!0)}"graph"==t?n.setGraphContainer(r):"toolbar"==t?n.setToolbarContainer(r):"title"==t?n.setTitleContainer(r):"status"==t?n.setStatusContainer(r):"map"==t&&n.setMapContainer(r)}else"resource"==e.nodeName?mxResources.add(e.getAttribute("basename")):"stylesheet"==e.nodeName&&mxClient.link("stylesheet",e.getAttribute("name"));e=e.nextSibling}},e.decodeTemplates=function(e,t,n){null==n.templates&&(n.templates=[]),t=mxUtils.getChildNodes(t);for(var r=0;r<t.length;r++){for(var i=t[r].getAttribute("as"),s=t[r].firstChild;null!=s&&1!=s.nodeType;)s=s.nextSibling;null!=s&&(n.templates[i]=e.decodeCell(s))}},e}());var jscolor={bindClass:"color",binding:!0,preloading:!0,install:function(){},init:function(){jscolor.preloading&&jscolor.preload()},getDir:function(){return IMAGE_PATH+"/"},detectDir:function(){for(var e=location.href,t=document.getElementsByTagName("base"),n=0;n<t.length;n+=1)t[n].href&&(e=t[n].href);t=document.getElementsByTagName("script");for(n=0;n<t.length;n+=1)if(t[n].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[n].src))return e=(new jscolor.URI(t[n].src)).toAbsolute(e),e.path=e.path.replace(/[^\/]+$/,""),e.query=null,e.fragment=null,e.toString();return!1},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},fireEvent:function(e,t){if(e)if(document.createEvent){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}else document.createEventObject?(n=document.createEventObject(),e.fireEvent("on"+t,n)):e["on"+t]&&e["on"+t]()},getElementPos:function(e){var t=e,n=0,r=0;if(t.offsetParent)do n+=t.offsetLeft,r+=t.offsetTop;while(t=t.offsetParent);for(;(e=e.parentNode)&&"BODY"!==e.nodeName.toUpperCase();)n-=e.scrollLeft,r-=e.scrollTop;return[n,r]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,n=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,n=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,n=e.layerY),{x:t,y:n}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function t(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"");else if("."===e||".."===e)e="";else{var n=e.match(/^\/?[^\/]*/)[0];e=e.substr(n.length),t+=n}return t}this.authority=this.scheme=null,this.path="",this.fragment=this.query=null,this.parse=function(e){return e=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/),this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){e=new jscolor.URI(e);var n=new jscolor.URI;return null===e.scheme?!1:(null!==this.scheme&&this.scheme.toLowerCase()===e.scheme.toLowerCase()&&(this.scheme=null),null!==this.scheme?(n.scheme=this.scheme,n.authority=this.authority,n.path=t(this.path),n.query=this.query):(null!==this.authority?(n.authority=this.authority,n.path=t(this.path),n.query=this.query):(""===this.path?(n.path=e.path,n.query=null!==this.query?this.query:e.query):("/"===this.path.substr(0,1)?n.path=t(this.path):(n.path=null!==e.authority&&""===e.path?"/"+this.path:e.path.replace(/[^\/]+$/,"")+this.path,n.path=t(n.path)),n.query=this.query),n.authority=e.authority),n.scheme=e.scheme),n.fragment=this.fragment,n)},e&&this.parse(e)},color:function(a,b){function c(e,t,n){if(null===e)return[n,n,n];var r=Math.floor(e),i=n*(1-t);e=n*(1-t*(r%2?e-r:1-(e-r)));switch(r){case 6:case 0:return[n,e,i];case 1:return[e,n,i];case 2:return[i,n,e];case 3:return[i,e,n];case 4:return[e,i,n];case 5:return[n,i,e]}}function d(i,s){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(r.pickerCloseText)};for(var o=0;o<jscolor.images.sld[1];o+=4){var l=document.createElement("div");l.style.height="4px",l.style.fontSize="1px",l.style.lineHeight="0",jscolor.picker.sld.appendChild(l)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var c=jscolor.picker;c.box.onmouseup=c.box.onmouseout=function(){mxClient.IS_TOUCH||a.focus()},c.box.onmousedown=function(){},c.box.onmousemove=function(e){if(y||A)y&&m(e),A&&n(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),p()},c.padM.onmouseup=c.padM.onmouseout=function(){y&&(y=!1,jscolor.fireEvent(u,"change"))},c.padM.onmousedown=function(e){switch(t){case 0:0===r.hsv[2]&&r.fromHSV(null,null,1);break;case 1:0===r.hsv[1]&&r.fromHSV(null,1,null)}y=!0,m(e),p()},c.sldM.onmouseup=c.sldM.onmouseout=function(){A&&(A=!1,jscolor.fireEvent(u,"change"))},c.sldM.onmousedown=function(e){A=!0,n(e),p()},o=e(r),c.box.style.width=o[0]+"px",c.box.style.height=o[1]+"px",c.boxB.style.position="absolute",c.boxB.style.clear="both",c.boxB.style.left=i+"px",c.boxB.style.top=s+"px",c.boxB.style.zIndex=r.pickerZIndex,c.boxB.style.border=r.pickerBorder+"px solid",c.boxB.style.borderColor=r.pickerBorderColor,c.boxB.style.background=r.pickerFaceColor,c.pad.style.width=jscolor.images.pad[0]+"px",c.pad.style.height=jscolor.images.pad[1]+"px",c.padB.style.position="absolute",c.padB.style.left=r.pickerFace+"px",c.padB.style.top=r.pickerFace+"px",c.padB.style.border=r.pickerInset+"px solid",c.padB.style.borderColor=r.pickerInsetColor,c.padM.style.position="absolute",c.padM.style.left="0",c.padM.style.top="0",c.padM.style.width=r.pickerFace+2*r.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",c.padM.style.height=c.box.style.height,c.padM.style.cursor="crosshair",c.sld.style.overflow="hidden",c.sld.style.width=jscolor.images.sld[0]+"px",c.sld.style.height=jscolor.images.sld[1]+"px",c.sldB.style.display=r.slider?"block":"none",c.sldB.style.position="absolute",c.sldB.style.right=r.pickerFace+"px",c.sldB.style.top=r.pickerFace+"px",c.sldB.style.border=r.pickerInset+"px solid",c.sldB.style.borderColor=r.pickerInsetColor,c.sldM.style.display=r.slider?"block":"none",c.sldM.style.position="absolute",c.sldM.style.right="0",c.sldM.style.top="0",c.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+r.pickerFace+2*r.pickerInset+"px",c.sldM.style.height=c.box.style.height;try{c.sldM.style.cursor="pointer"}catch(h){c.sldM.style.cursor="hand"}c.btn.style.display=r.pickerClosable?"block":"none",c.btn.style.position="absolute",c.btn.style.left=r.pickerFace+"px",c.btn.style.bottom=r.pickerFace+"px",c.btn.style.padding="0 15px",c.btn.style.height="18px",c.btn.style.border=r.pickerInset+"px solid",function(){var e=r.pickerInsetColor.split(/\s+/);c.btn.style.borderColor=2>e.length?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1]}(),c.btn.style.color=r.pickerButtonColor,c.btn.style.font="12px sans-serif",c.btn.style.textAlign="center";try{c.btn.style.cursor="pointer"}catch(h){c.btn.style.cursor="hand"}c.btn.onmousedown=function(){r.hidePicker()},c.btnS.style.lineHeight=c.btn.style.height;switch(t){case 0:var d="hs.png";break;case 1:d="hv.png"}c.padM.style.backgroundImage="url(data:image/gif;base64,R0lGODlhDwAPAKEBAAAAAP///////////yH5BAEKAAIALAAAAAAPAA8AAAIklB8Qx53b4otSUWcvyiz4/4AeQJbmKY4p1HHapBlwPL/uVRsFADs=)",c.padM.style.backgroundRepeat="no-repeat",c.sldM.style.backgroundImage="url(data:image/gif;base64,R0lGODlhBwALAKECAAAAAP///6g8eKg8eCH5BAEKAAIALAAAAAAHAAsAAAITTIQYcLnsgGxvijrxqdQq6DRJAQA7)",c.sldM.style.backgroundRepeat="no-repeat",c.pad.style.backgroundImage="url('"+jscolor.getDir()+d+"')",c.pad.style.backgroundRepeat="no-repeat",c.pad.style.backgroundPosition="0 0",f(),g(),jscolor.picker.owner=r,document.getElementsByTagName("body")[0].appendChild(c.boxB)}function e(e){return[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]]}function f(){switch(t){case 0:var e=1;break;case 1:e=2}jscolor.picker.padM.style.backgroundPosition=r.pickerFace+r.pickerInset+Math.round(r.hsv[0]/6*(jscolor.images.pad[0]-1))-Math.floor(jscolor.images.cross[0]/2)+"px "+(r.pickerFace+r.pickerInset+Math.round((1-r.hsv[e])*(jscolor.images.pad[1]-1))-Math.floor(jscolor.images.cross[1]/2))+"px",e=jscolor.picker.sld.childNodes;switch(t){case 0:for(var n=c(r.hsv[0],r.hsv[1],1),i=0;i<e.length;i+=1)e[i].style.backgroundColor="rgb("+n[0]*(1-i/e.length)*100+"%,"+n[1]*(1-i/e.length)*100+"%,"+n[2]*(1-i/e.length)*100+"%)";break;case 1:var s,o=[r.hsv[2],0,0],i=Math.floor(r.hsv[0]),u=i%2?r.hsv[0]-i:1-(r.hsv[0]-i);switch(i){case 6:case 0:n=[0,1,2];break;case 1:n=[1,0,2];break;case 2:n=[2,0,1];break;case 3:n=[2,1,0];break;case 4:n=[1,2,0];break;case 5:n=[0,2,1]}for(i=0;i<e.length;i+=1)s=1-1/(e.length-1)*i,o[1]=o[0]*(1-s*u),o[2]=o[0]*(1-s),e[i].style.backgroundColor="rgb("+100*o[n[0]]+"%,"+100*o[n[1]]+"%,"+100*o[n[2]]+"%)"}}function g(){switch(t){case 0:var e=2;break;case 1:e=1}jscolor.picker.sldM.style.backgroundPosition="0 "+(r.pickerFace+r.pickerInset+Math.round((1-r.hsv[e])*(jscolor.images.sld[1]-1))-Math.floor(jscolor.images.arrow[1]/2))+"px"}function k(){return jscolor.picker&&jscolor.picker.owner===r}function l(){u!==a&&r.importColor()}function m(e){var n=jscolor.getRelMousePos(e);e=n.x-r.pickerFace-r.pickerInset,n=n.y-r.pickerFace-r.pickerInset;switch(t){case 0:r.fromHSV(6/(jscolor.images.pad[0]-1)*e,1-n/(jscolor.images.pad[1]-1),null,C);break;case 1:r.fromHSV(6/(jscolor.images.pad[0]-1)*e,null,1-n/(jscolor.images.pad[1]-1),C)}}function n(e){e=jscolor.getRelMousePos(e).y-r.pickerFace-r.pickerInset;switch(t){case 0:r.fromHSV(null,null,1-e/(jscolor.images.sld[1]-1),B);break;case 1:r.fromHSV(null,1-e/(jscolor.images.sld[1]-1),null,B)}}function p(){r.onImmediateChange&&("string"==typeof r.onImmediateChange?eval(r.onImmediateChange):r.onImmediateChange(r))}this.adjust=this.required=!0,this.hash=!1,this.slider=this.caps=!0,this.styleElement=this.valueElement=a,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=0,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var q in b)b.hasOwnProperty(q)&&(this[q]=b[q]);this.hidePicker=function(){k()&&(delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB))},this.showPicker=function(){k()||(jscolor.getElementPos(a),jscolor.getElementSize(a),jscolor.getViewPos(),jscolor.getViewSize(),e(this),this.pickerPosition.toLowerCase(),d(0,0))},this.importColor=function(){u?this.adjust?!this.required&&/^\s*$/.test(u.value)?(u.value="",x.style.backgroundImage=x.jscStyle.backgroundImage,x.style.backgroundColor=x.jscStyle.backgroundColor,x.style.color=x.jscStyle.color,this.exportColor(z|v)):this.fromString(u.value)||this.exportColor():this.fromString(u.value,z)||(x.style.backgroundImage=x.jscStyle.backgroundImage,x.style.backgroundColor=x.jscStyle.backgroundColor,x.style.color=x.jscStyle.color,this.exportColor(z|v)):this.exportColor()},this.exportColor=function(e){if(!(e&z)&&u){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),u.value=t}e&v||!x||(x.style.backgroundImage="none",x.style.backgroundColor="#"+this.toString(),x.style.color=.5>.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]?"#FFF":"#000"),e&B||!k()||f(),e&C||!k()||g()},this.fromHSV=function(e,t,n,r){0>e&&(e=0),6<e&&(e=6),0>t&&(t=0),1<t&&(t=1),0>n&&(n=0),1<n&&(n=1),this.rgb=c(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===n?this.hsv[2]:this.hsv[2]=n),this.exportColor(r)},this.fromRGB=function(e,t,n,r){0>e&&(e=0),1<e&&(e=1),0>t&&(t=0),1<t&&(t=1),0>n&&(n=0),1<n&&(n=1),e=null===e?this.rgb[0]:this.rgb[0]=e,t=null===t?this.rgb[1]:this.rgb[1]=t;var i=null===n?this.rgb[2]:this.rgb[2]=n,s=Math.min(Math.min(e,t),i);n=Math.max(Math.max(e,t),i);var o=n-s;0===o?e=[null,0,n]:(e=e===s?3+(i-t)/o:t===s?5+(e-i)/o:1+(t-e)/o,e=[6===e?0:e,o/n,n]),null!==e[0]&&(this.hsv[0]=e[0]),0!==e[2]&&(this.hsv[1]=e[1]),this.hsv[2]=e[2],this.exportColor(r)},this.fromString=function(e,t){var n=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return n?(6===n[1].length?this.fromRGB(parseInt(n[1].substr(0,2),16)/255,parseInt(n[1].substr(2,2),16)/255,parseInt(n[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(n[1].charAt(0)+n[1].charAt(0),16)/255,parseInt(n[1].charAt(1)+n[1].charAt(1),16)/255,parseInt(n[1].charAt(2)+n[1].charAt(2),16)/255,t),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var r=this,t="hvs"===this.pickerMode.toLowerCase()?1:0,u=jscolor.fetchElement(this.valueElement),x=jscolor.fetchElement(this.styleElement),y=!1,A=!1,z=1,v=2,B=4,C=8;u&&(q=function(){r.fromString(u.value,z),p()},jscolor.addEvent(u,"keyup",q),jscolor.addEvent(u,"input",q),jscolor.addEvent(u,"blur",l),u.setAttribute("autocomplete","off")),x&&(x.jscStyle={backgroundImage:x.style.backgroundImage,backgroundColor:x.style.backgroundColor,color:x.style.color});switch(t){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}this.importColor()}};jscolor.install(),Editor=function(e,t,n,r,i){mxEventSource.call(this),this.chromeless=null!=e?e:this.chromeless,this.initStencilRegistry(),this.graph=r||this.createGraph(t,n),this.editable=null!=i?i:!e,this.undoManager=this.createUndoManager(),this.status="",this.getOrCreateFilename=function(){return this.filename||mxResources.get("drawing",[Editor.pageCounter])+".xml"},this.getFilename=function(){return this.filename},this.setStatus=function(e){this.status=e,this.fireEvent(new mxEventObject("statusChanged"))},this.getStatus=function(){return this.status},this.graphChangeListener=function(e,t){var n=null!=t?t.getProperty("edit"):null;null!=n&&n.ignoreEdit||this.setModified(!0)},this.graph.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()},Editor.pageCounter=0,function(){try{for(var e=window;null!=e.opener&&"undefined"!=typeof e.opener.Editor&&!isNaN(e.opener.Editor.pageCounter)&&e.opener!=e;)e=e.opener;null!=e&&(e.Editor.pageCounter++,Editor.pageCounter=e.Editor.pageCounter)}catch(t){}}(),Editor.useLocalStorage="undefined"!=typeof Storage&&mxClient.IS_IOS,Editor.helpImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+":IMAGE_PATH+"/help.png",Editor.checkmarkImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=":IMAGE_PATH+"/checkmark.gif",Editor.maximizeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMA758vX1Pw3BoAAABJSURBVAjXY8AJQkODGBhUQ0MhbAUGBiYY24CBgRnGFmZgMISwgwwDGRhEhVVBbAVmEQYGRwMmBjIAQi/CTIRd6G5AuA3dzYQBAHj0EFdHkvV4AAAAAElFTkSuQmCC",Editor.zoomOutImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCxxcXEhISFgYGChjTUxAAAAAXRSTlMAQObYZgAAAEdJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITgLJZXFxgbIQ4Qj3CHIT5ggoIe5kgNkM1KSDYKBKqxPkDAPo5BAZBE54hAAAAAElFTkSuQmCC",Editor.zoomInImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCwhISFxcXFgYGBavKaoAAAAAXRSTlMAQObYZgAAAElJREFUCNdjIAMwCQrB2YKCggJQJqMIA4sglK3owMzgqABVwsDMwCgAZTMbG8PYCHGEeoQ5CPMFFRD2MkFshmpSQLBRJFSJ8wcAEqcEM2uhl2MAAAAASUVORK5CYII=",Editor.zoomFitImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAD1BMVEUAAAAAAAAwMDBwcHBgYGC1xl09AAAAAXRSTlMAQObYZgAAAEFJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITwMdGqEeYgzBfUAFhLxPEZqgmBQQbRUKFOH8AAK5OA3lA+FFOAAAAAElFTkSuQmCC",Editor.layersImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAaVBMVEUAAAAgICAICAgdHR0PDw8WFhYICAgLCwsXFxcvLy8ODg4uLi4iIiIqKiokJCQYGBgKCgonJycFBQUCAgIqKiocHBwcHBwODg4eHh4cHBwnJycJCQkUFBQqKiojIyMuLi4ZGRkgICAEBATOWYXAAAAAGnRSTlMAD7+fnz8/H7/ff18/77+vr5+fn39/b28fH2xSoKsAAACQSURBVBjTrYxJEsMgDARZZMAY73sgCcn/HxnhKtnk7j6oRq0psfuoyndZ/SuODkHPLzfVT6KeyPePnJ7KrnkRjWMXTn4SMnN8mXe2SSM3ts8L/ZUxxrbAULSYJJULE0Iw9pjpenoICcgcX61mGgTgtCv9Be99pzCoDhNQWQnchD1mup5++CYGcoQexajZbfwAj/0MD8ZOaUgAAAAASUVORK5CYII=",Editor.previousImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAh0lEQVQ4je3UsQnCUBCA4U8hpa1NsoEjpHQJS0dxADdwEMuMIJkgA1hYChbGQgMi+JC8q4L/AB/vDu7x74cWWEZhJU44RmA1zujR5GIbXF9YNrjD/Q0bDRY4fEBZ4P4LlgTnCbAf84pUM8/9hY08tMUtEoQ1LpEgrNBFglChFXR6Q6GfwwR6AGKJMF74Vtt3AAAAAElFTkSuQmCC",Editor.nextImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAi0lEQVQ4jeXUIQ7CUAwA0MeGxWI2yylwnALJUdBcgYvM7QYLmjOQIAkIPmJZghiIvypoUtX0tfnJL38X5ZfaEgUeUcManFBHgS0SLlhHggk3bCPBhCf2keCQR8wjwYTDp6YiZxJmOU1jGw7vGALescuBxsArNlOwd/CM1VSM/ut1qCIw+uOwiMJ+OF4CQzBCXm3hyAAAAABJRU5ErkJggg==",Editor.editImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCwALAIABAFdXV////yH5BAEAAAEALAAAAAALAAsAAAIZjB8AiKuc4jvLOGqzrjX6zmkWyChXaUJBAQA7":IMAGE_PATH+"/edit.gif",Editor.zoomOutLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABJklEQVQ4y4WT2XaDMAxEvWD2nSSUNEnTJN3r//+9Sj7ILAY6L0ijC4ONYVZRpo6cByrz2YKSUGorGTpz71lPVHvT+avoB5wIkU/mxk8veceSuNoLg44IzziXjvpih72wKQnm8yc2UoiP/LAd8jQfe2Xf4Pq+2EyYIvv9wbzHHCgwxDdlBtWZOdqDfTCVgqpygQpsZaojVAVc9UjQxnAJDIBhiQv84tq3gMQCAVTxVoSibXJf8tMuc7e1TB/DCmejBNg/w1Y3c+AM5vv4w7xM59/oXamrHaLVqPQ+OTCnmMZxgz0SdL5zji0/ld6j88qGa5KIiBB6WeJGKfUKwSMKLuXgvl1TW0tm5R9UQL/efSDYsnzxD8CinhBsTTdugJatKpJwf8v+ADb8QmvW7AeAAAAAAElFTkSuQmCC",Editor.zoomInLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABKElEQVQ4y4WT6WKCMBCENwkBwn2oFKvWqr3L+79es4EkQIDOH2d3Pxk2ABiJlB8JCXjqw4LikHVGLHTm3nM3UeVN5690GBBN0GwyV/3kkrUQR+WeKnREeKpzaXWd77CmJiXGfPIEI4V4yQ9TIW/ntlcMBe731Vts9w5TWG8F5j3mQI4hvrKpdGeYA7CX9qAcl650gVJartxRuhyHVghF8idQAIbFLvCLu28BsQEC6aKtCK6Pyb3JT7PmbmtNH8Ny56CotD/2qOs5cJbuffxgXmCib+xddVU5RNOhkvvkhTlFehzVWCOh3++MYElOhfdovaImnRYVmqDdsuhNp1QrBBE6uGC2+3ZNjGdg5B94oD+9uyVgWT79BwAxEBTWdOu3bWBVgsn/N/AHUD9IC01Oe40AAAAASUVORK5CYII=",Editor.actualSizeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABIUlEQVQ4y4WT2XqDIBCFBxDc9yTWNEnTJN3r+79eGT4BEbXnaubMr8dBBaM450dCQp4LWFAascGIRd48eB4cNYE7f6XjgGiCFs5c+dml6CFN6j1V6IQIlHPpdV/usKcmJcV88gQTRXjLD9Mhb+fWq8YG9/uCmTCFjeeDeY85UGKIUGUuqzN42kv7oCouq9oHamlzVR1lVfpAIu1QVRiW+sAv7r4FpAYIZZVsRXB9TP5Dfpo1d1trCgzz1iiptH/sUbdz4CzN9+mLeXHn3+hdddd4RDegsrvzwZwSs2GLPRJidAqCLTlVwaMPqpYMWjTWBB2WRW86pVkhSKyDK2bdt2tmagZG4sBD/evdLQHLEvQfAOKRoLCmG1FAB6uKmby+gz+REDn7O5+EwQAAAABJRU5ErkJggg==",Editor.printLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAXVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9RKvvlAAAAHnRSTlMAydnl77qbMLT093H7K4Nd4Ktn082+lYt5bkklEgP44nQSAAAApUlEQVQ4y73P2Q6DIBRF0cOgbRHHzhP//5m9mBAQKjG1cT0Yc7ITAMu1LNQgUZiQ2DYoNQ0sCQb6qgHAfRx48opq3J9AZ6xuF7uOew8Ik1OsCZRS2UAC9V+D9a+QZYxNA45YFQftPtSkATOhw7dAc0vPBwKWiIOjP0JZ0yMuQJ27g36DipOUsqRAM0dR8KD1/ILHaHSE/w8DIx09E3g/BTce6rHUB5sAPKvfF+JdAAAAAElFTkSuQmCC",Editor.layersLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v7///+bnZkkAAAAMnRSTlMABPr8ByiD88KsTi/rvJb272mjeUA1CuPe1M/KjVxYHxMP6KZ0S9nYzGRGGRaznpGIbzaGUf0AAAHESURBVDjLbZLZYoIwEEVDgLCjbKIgAlqXqt3m/z+uNwu1rcyDhjl3ktnYL7OY254C0VX3yWFZfzDrOClbbgKxi0YDHjwl4jbnRkXxJS/C1YP3DbBhD1n7Ex4uaAqdVDb3yJ/4J/3nJD2to/ngQz/DfUvzMp4JJ5sSCaF5oXmemgQDfDxzbi+Kq4sU+vNcuAmx94JtyOP2DD4Epz2asWSCz4Z/4fECxyNj9zC9xNLHcdPEO+awDKeSaUu0W4twZQiO2hYVisTR3RCtK/c1X6t4xMEpiGqXqVntEBLolkZZsKY4QtwH6jzq67dEHlJysB1aNOD3XT7n1UkasQN59L4yC2RELMDSeCRtz3yV22Ub3ozIUTknYx8JWqDdQxbUes98cR2kZtUSveF/bAhcedwEWmlxIkpZUy4XOCb6VBjjxHvbwo/1lBAHHi2JCr0NI570QhyHq/DhJoE2lLgyA4RVe6KmZ47O/3b86MCP0HWa73A8/C3SUc5Qc1ajt6fgpXJ+RGpMvDSchepZDOOQRcZVIKcK90x2D7etqtI+56+u6n3sPriO6nfphitR4+O2m3EbM7lh3me1FM1o+LMI887rN+s3/wZdTFlpNVJiOAAAAABJRU5ErkJggg==",Editor.closeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAuvAIg/dDM/QlOeuFhj0S5s4vKgzjxJRQNiLSey0AAADNSURBVDjLfZLbEoMgDEQjRRRs1XqX///QNmOHJSnjPkHOGR7IEmeoGtJZstnwjqbRfIsmgEdtPCqe9Ynz7ZSc07rE2QiSc+qv8TvjRXA2PDUm3dpe82iJhOEUfxJJo3aCv+jKmRmH4lcCjCjeh9GWOdL/GZZkXH3PYYDrHBnfc4D/RVZf5sjoC1was+Y6HQxwaUxFvq/a0Pv343VCTxfBSRiB+ab3M3eiQZXmMNBJ3Y8pGRZtYQ7DgHMXJEdPLTaN/qBjzJOBc3nmNcbsA16bMR0oLqf+AAAAAElFTkSuQmCC",Editor.editLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAKnRSTlMA+hzi3nRQWyXzkm0h2j3u54gzEgSXjlYoTBgJxL2loGpAOS3Jt7Wxm35Ga7gRAAAA6UlEQVQ4y63Q2XaCMBSF4Q0JBasoQ5DJqbXjfv8HbCK2BZNwo/8FXHx7rcMC7lQu0iX8qU/qtvAWCpoqH8dYzS0SwaV5eK/UAf8X9pd2CWKzuF5Jrftp1owXwnIGLUaL3PYndOHf4kNNXWrXK/m7CHunk7K8LE6YtBpcknwG9GKxnroY+ylBXcx4xKyx/u/EuXi509cP9V7OO1oyHnzrdFTcqLG/4ibBA5pIMr/4xvKzuQDkVy9wW8SgBFD6HDvuzMvrZcC9QlkfMzI7w64m+b4PqBMNHB05lH21PVxJo2/fBXxV4hB38PcD+5AkI4FuETsAAAAASUVORK5CYII=",Editor.previousLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFZJREFUOMvdkskRgDAMA4lDwg2B7b9XOlge/KKvdsa25KFb5XlRvxXC/DNBEv8IFNjBgGdDgXtFgTyhwDXiQAUHCvwa4Uv6mR6UR+1led2mVonvl+tML45qCQNQLIx7AAAAAElFTkSuQmCC",Editor.nextLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFRJREFUOMvd0skRgCAQBVEFwQ0V7fxzNQP6wI05v6pZ/kyj1b7FNgik2gQzzLcAwiUAigHOTwDHK4A1CmB5BJANJG1hQ9qafYcqFlZP3IFc9eVGrR+iIgkDQRUXIAAAAABJRU5ErkJggg==",Editor.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl",Editor.popupsAllowed=!0,mxUtils.extend(Editor,mxEventSource),Editor.prototype.originalNoForeignObject=mxClient.NO_FO,Editor.prototype.transparentImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif",Editor.prototype.extendCanvas=!0,Editor.prototype.chromeless=!1,Editor.prototype.cancelFirst=!0,Editor.prototype.enabled=!0,Editor.prototype.filename=null,Editor.prototype.modified=!1,Editor.prototype.autosave=!0,Editor.prototype.initialTopSpacing=0,Editor.prototype.appName=document.title,Editor.prototype.editBlankUrl=window.location.protocol+"//"+window.location.host+"/",Editor.prototype.init=function(){},Editor.prototype.isChromelessView=function(){return this.chromeless},Editor.prototype.setAutosave=function(e){this.autosave=e,this.fireEvent(new mxEventObject("autosaveChanged"))},Editor.prototype.getEditBlankUrl=function(e){return this.editBlankUrl+e},Editor.prototype.editAsNew=function(e,t){var n=null!=t?"?title="+encodeURIComponent(t):"";null!=urlParams.ui&&(n+=(0<n.length?"&":"?")+"ui="+urlParams.ui),null==this.editorWindow||this.editorWindow.closed?"undefined"!=typeof window.postMessage&&(null==document.documentMode||10<=document.documentMode)?(null==this.editorWindow&&mxEvent.addListener(window,"message",mxUtils.bind(this,function(t){"ready"==t.data&&t.source==this.editorWindow&&this.editorWindow.postMessage(e,"*")})),this.editorWindow=this.graph.openLink(this.getEditBlankUrl(n+(0<n.length?"&":"?")+"client=1"),null,!0)):this.editorWindow=this.graph.openLink(this.getEditBlankUrl(n)+"#R"+encodeURIComponent(e)):this.editorWindow.focus()},Editor.prototype.createGraph=function(e,t){var n=new Graph(null,t,null,null,e);return n.transparentBackground=!1,this.chromeless||(n.isBlankLink=function(e){return!this.isExternalProtocol(e)}),n},Editor.prototype.resetGraph=function(){this.graph.gridEnabled=!this.isChromelessView()||"1"==urlParams.grid,this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)},Editor.prototype.readGraphState=function(e){this.graph.gridEnabled="0"!=e.getAttribute("grid")&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.gridSize=parseFloat(e.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=e.getAttribute("guides"),this.graph.setTooltips("0"!=e.getAttribute("tooltips")),this.graph.setConnectable("0"!=e.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=e.getAttribute("arrows"),this.graph.foldingEnabled="0"!=e.getAttribute("fold"),this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled="1"==urlParams.nav,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled);var t=parseFloat(e.getAttribute("pageScale"));!isNaN(t)&&0<t?this.graph.pageScale=t:this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.isLightboxView()?this.graph.pageVisible=!1:(t=e.getAttribute("page"),this.graph.pageVisible=null!=t?"0"!=t:this.graph.defaultPageVisible),this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible;var t=parseFloat(e.getAttribute("pageWidth")),n=parseFloat(e.getAttribute("pageHeight"));isNaN(t)||isNaN(n)||(this.graph.pageFormat=new mxRectangle(0,0,t,n)),e=e.getAttribute("background"),this.graph.background=null!=e&&0<e.length?e:null},Editor.prototype.setGraphXml=function(e){if(null!=e){var t=new mxCodec(e.ownerDocument);if("mxGraphModel"==e.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(e),this.updateGraphComponents(),t.decode(e,this.graph.getModel())}finally{this.graph.model.endUpdate()}this.fireEvent(new mxEventObject("resetGraphView"))}else{if("root"!=e.nodeName)throw{message:mxResources.get("cannotOpenFile"),node:e,toString:function(){return this.message}};this.resetGraph();var n=t.document.createElement("mxGraphModel");n.appendChild(e),t.decode(n,this.graph.getModel()),this.updateGraphComponents(),this.fireEvent(new mxEventObject("resetGraphView"))}}else this.resetGraph(),this.graph.model.clear(),this.fireEvent(new mxEventObject("resetGraphView"))},Editor.prototype.getGraphXml=function(e){e=(null!=e?e:1)?(new mxCodec(mxUtils.createXmlDocument())).encode(this.graph.getModel()):this.graph.encodeCells(mxUtils.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells())));if(0!=this.graph.view.translate.x||0!=this.graph.view.translate.y)e.setAttribute("dx",Math.round(100*this.graph.view.translate.x)/100),e.setAttribute("dy",Math.round(100*this.graph.view.translate.y)/100);return e.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),e.setAttribute("gridSize",this.graph.gridSize),e.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),e.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),e.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),e.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),e.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),e.setAttribute("page",this.graph.pageVisible?"1":"0"),e.setAttribute("pageScale",this.graph.pageScale),e.setAttribute("pageWidth",this.graph.pageFormat.width),e.setAttribute("pageHeight",this.graph.pageFormat.height),null!=this.graph.background&&e.setAttribute("background",this.graph.background),e},Editor.prototype.updateGraphComponents=function(){var e=this.graph;null!=e.container&&(e.view.validateBackground(),e.container.style.overflow=e.scrollbars?"auto":"hidden",this.fireEvent(new mxEventObject("updateGraphComponents")))},Editor.prototype.setModified=function(e){this.modified=e},Editor.prototype.setFilename=function(e){this.filename=e},Editor.prototype.createUndoManager=function(){var e=this.graph,t=new mxUndoManager;this.undoListener=function(e,n){t.undoableEditHappened(n.getProperty("edit"))};var n=mxUtils.bind(this,function(e,t){this.undoListener.apply(this,arguments)});return e.getModel().addListener(mxEvent.UNDO,n),e.getView().addListener(mxEvent.UNDO,n),n=function(t,n){var r=e.getSelectionCellsForChanges(n.getProperty("edit").changes);e.getModel();for(var i=[],s=0;s<r.length;s++)null!=e.view.getState(r[s])&&i.push(r[s]);e.setSelectionCells(i)},t.addListener(mxEvent.UNDO,n),t.addListener(mxEvent.REDO,n),t},Editor.prototype.initStencilRegistry=function(){},Editor.prototype.destroy=function(){null!=this.graph&&(this.graph.destroy(),this.graph=null)},OpenFile=function(e){this.consumer=this.producer=null,this.done=e,this.args=null},OpenFile.prototype.setConsumer=function(e){this.consumer=e,this.execute()},OpenFile.prototype.setData=function(){this.args=arguments,this.execute()},OpenFile.prototype.error=function(e){this.cancel(!0),mxUtils.alert(e)},OpenFile.prototype.execute=function(){null!=this.consumer&&null!=this.args&&(this.cancel(!1),this.consumer.apply(this,this.args))},OpenFile.prototype.cancel=function(e){null!=this.done&&this.done(null!=e?e:!0)},Dialog.backdropColor="white",Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-1,Dialog.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png",Dialog.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png",Dialog.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif",Dialog.prototype.lockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCODExNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCODIxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3RjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI4MDE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvqMCFYAAAAVUExURZmZmb+/v7KysqysrMzMzLGxsf///4g8N1cAAAAHdFJOU////////wAaSwNGAAAAPElEQVR42lTMQQ4AIQgEwUa0//9kTQirOweYOgDqAMbZUr10AGlAwx4/BJ2QJ4U0L5brYjovvpv32xZgAHZaATFtMbu4AAAAAElFTkSuQmCC":IMAGE_PATH+"/locked.png",Dialog.prototype.unlockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCN0QxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCN0UxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3QjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI3QzE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkKMpVwAAAAYUExURZmZmbKysr+/v6ysrOXl5czMzLGxsf///zHN5lwAAAAIdFJOU/////////8A3oO9WQAAADxJREFUeNpUzFESACAEBNBVsfe/cZJU+8Mzs8CIABCidtfGOndnYsT40HDSiCcbPdoJo10o9aI677cpwACRoAF3dFNlswAAAABJRU5ErkJggg==":IMAGE_PATH+"/unlocked.png",Dialog.prototype.bgOpacity=80,Dialog.prototype.getPosition=function(e,t){return new mxPoint(e,t)},Dialog.prototype.close=function(e,t){if(null!=this.onDialogClose){if(0==this.onDialogClose(e,t))return!1;this.onDialogClose=null}null!=this.dialogImg&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),null!=this.bg&&null!=this.bg.parentNode&&this.bg.parentNode.removeChild(this.bg),mxEvent.removeListener(window,"resize",this.resizeListener),this.container.parentNode.removeChild(this.container)};var PrintDialog=function(e,t){this.create(e,t)};PrintDialog.prototype.create=function(e){function t(e){var t=u.checked||f.checked,r=parseInt(c.value)/100;isNaN(r)&&(r=1,c.value="100%");var r=.75*r,i=n.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT,s=1/n.pageScale;if(t){var o=u.checked?1:parseInt(l.value);isNaN(o)||(s=mxUtils.getScaleForPageCount(o,n,i))}n.getGraphBounds();var a=o=0,i=mxRectangle.fromRectangle(i);i.width=Math.ceil(i.width*r),i.height=Math.ceil(i.height*r),s*=r,!t&&n.pageVisible?(r=n.getPageLayout(),o-=r.x*i.width,a-=r.y*i.height):t=!0,t=PrintDialog.createPrintPreview(n,s,i,0,o,a,t),t.open(),e&&PrintDialog.printPreview(t)}var n=e.editor.graph,r,i,s=document.createElement("table");s.style.width="100%",s.style.height="100%";var o=document.createElement("tbody");r=document.createElement("tr");var u=document.createElement("input");u.setAttribute("type","checkbox"),i=document.createElement("td"),i.setAttribute("colspan","2"),i.style.fontSize="10pt",i.appendChild(u);var a=document.createElement("span");mxUtils.write(a," "+mxResources.get("fitPage")),i.appendChild(a),mxEvent.addListener(a,"click",function(e){u.checked=!u.checked,f.checked=!u.checked,mxEvent.consume(e)}),mxEvent.addListener(u,"change",function(){f.checked=!u.checked}),r.appendChild(i),o.appendChild(r),r=r.cloneNode(!1);var f=document.createElement("input");f.setAttribute("type","checkbox"),i=document.createElement("td"),i.style.fontSize="10pt",i.appendChild(f),a=document.createElement("span"),mxUtils.write(a," "+mxResources.get("posterPrint")+":"),i.appendChild(a),mxEvent.addListener(a,"click",function(e){f.checked=!f.checked,u.checked=!f.checked,mxEvent.consume(e)}),r.appendChild(i);var l=document.createElement("input");l.setAttribute("value","1"),l.setAttribute("type","number"),l.setAttribute("min","1"),l.setAttribute("size","4"),l.setAttribute("disabled","disabled"),l.style.width="50px",i=document.createElement("td"),i.style.fontSize="10pt",i.appendChild(l),mxUtils.write(i," "+mxResources.get("pages")+" (max)"),r.appendChild(i),o.appendChild(r),mxEvent.addListener(f,"change",function(){f.checked?l.removeAttribute("disabled"):l.setAttribute("disabled","disabled"),u.checked=!f.checked}),r=r.cloneNode(!1),i=document.createElement("td"),mxUtils.write(i,mxResources.get("pageScale")+":"),r.appendChild(i),i=document.createElement("td");var c=document.createElement("input");c.setAttribute("value","100 %"),c.setAttribute("size","5"),c.style.width="50px",i.appendChild(c),r.appendChild(i),o.appendChild(r),r=document.createElement("tr"),i=document.createElement("td"),i.colSpan=2,i.style.paddingTop="20px",i.setAttribute("align","right"),a=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()}),a.className="geBtn",e.editor.cancelFirst&&i.appendChild(a);if(PrintDialog.previewEnabled){var h=mxUtils.button(mxResources.get("preview"),function(){e.hideDialog(),t(!1)});h.className="geBtn",i.appendChild(h)}h=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){e.hideDialog(),t(!0)}),h.className="geBtn gePrimaryBtn",i.appendChild(h),e.editor.cancelFirst||i.appendChild(a),r.appendChild(i),o.appendChild(r),s.appendChild(o),this.container=s},PrintDialog.printPreview=function(e){if(null!=e.wnd){var t=function(){e.wnd.focus(),e.wnd.print(),e.wnd.close()};mxClient.IS_GC?window.setTimeout(t,500):t()}},PrintDialog.createPrintPreview=function(e,t,n,r,i,s,o){t=new mxPrintPreview(e,t,n,r,i,s),t.title=mxResources.get("preview"),t.printBackgroundImage=!0,t.autoOrigin=o,e=e.background;if(null==e||""==e||e==mxConstants.NONE)e="#ffffff";t.backgroundColor=e;var u=t.writeHead;return t.writeHead=function(e){u.apply(this,arguments),e.writeln('<style type="text/css">'),e.writeln("@media screen {"),e.writeln("  body > div { padding:30px;box-sizing:content-box; }"),e.writeln("}"),e.writeln("</style>")},t},PrintDialog.previewEnabled=!0;var PageSetupDialog=function(e){function t(){null==l||l==mxConstants.NONE?(f.style.backgroundColor="",f.style.backgroundImage="url('"+Dialog.prototype.noColorImage+"')"):(f.style.backgroundColor=l,f.style.backgroundImage="")}function n(){null==p?(h.removeAttribute("title"),h.style.fontSize="",h.innerHTML=mxResources.get("change")+"..."):(h.setAttribute("title",p.src),h.style.fontSize="11px",h.innerHTML=p.src.substring(0,42)+"...")}var r=e.editor.graph,i,s,o=document.createElement("table");o.style.width="100%",o.style.height="100%";var u=document.createElement("tbody");i=document.createElement("tr"),s=document.createElement("td"),s.style.verticalAlign="top",s.style.fontSize="10pt",mxUtils.write(s,mxResources.get("paperSize")+":"),i.appendChild(s),s=document.createElement("td"),s.style.verticalAlign="top",s.style.fontSize="10pt";var a=PageSetupDialog.addPageFormatPanel(s,"pagesetupdialog",r.pageFormat);i.appendChild(s),u.appendChild(i),i=document.createElement("tr"),s=document.createElement("td"),mxUtils.write(s,mxResources.get("background")+":"),i.appendChild(s),s=document.createElement("td"),s.style.whiteSpace="nowrap",document.createElement("input").setAttribute("type","text");var f=document.createElement("button");f.style.width="18px",f.style.height="18px",f.style.marginRight="20px",f.style.backgroundPosition="center center",f.style.backgroundRepeat="no-repeat";var l=r.background;t(),mxEvent.addListener(f,"click",function(n){e.pickColor(l||"none",function(e){l=e,t()}),mxEvent.consume(n)}),s.appendChild(f),mxUtils.write(s,mxResources.get("gridSize")+":");var c=document.createElement("input");c.setAttribute("type","number"),c.setAttribute("min","0"),c.style.width="40px",c.style.marginLeft="6px",c.value=r.getGridSize(),s.appendChild(c),mxEvent.addListener(c,"change",function(){var e=parseInt(c.value);c.value=Math.max(1,isNaN(e)?r.getGridSize():e)}),i.appendChild(s),u.appendChild(i),i=document.createElement("tr"),s=document.createElement("td"),mxUtils.write(s,mxResources.get("image")+":"),i.appendChild(s),s=document.createElement("td");var h=document.createElement("a");h.style.textDecoration="underline",h.style.cursor="pointer",h.style.color="#a0a0a0";var p=r.backgroundImage;mxEvent.addListener(h,"click",function(t){e.showBackgroundImageDialog(function(e){p=e,n()}),mxEvent.consume(t)}),n(),s.appendChild(h),i.appendChild(s),u.appendChild(i),i=document.createElement("tr"),s=document.createElement("td"),s.colSpan=2,s.style.paddingTop="16px",s.setAttribute("align","right");var d=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});d.className="geBtn",e.editor.cancelFirst&&s.appendChild(d);var v=mxUtils.button(mxResources.get("apply"),function(){e.hideDialog(),r.gridSize!==c.value&&r.setGridSize(parseInt(c.value));var t=new ChangePageSetup(e,l,p,a.get());t.ignoreColor=r.background==l,t.ignoreImage=(null!=r.backgroundImage?r.backgroundImage.src:null)===(null!=p?p.src:null),r.pageFormat.width==t.previousFormat.width&&r.pageFormat.height==t.previousFormat.height&&t.ignoreColor&&t.ignoreImage||r.model.execute(t)});v.className="geBtn gePrimaryBtn",s.appendChild(v),e.editor.cancelFirst||s.appendChild(d),i.appendChild(s),u.appendChild(i),o.appendChild(u),this.container=o};PageSetupDialog.addPageFormatPanel=function(e,t,n,r){function i(e,t,r){if(r||c!=document.activeElement&&h!=document.activeElement){e=!1;for(t=0;t<d.length;t++)r=d[t],y?"custom"==r.key&&(u.value=r.key,y=!1):null!=r.format&&("a4"==r.key?826==n.width?(n=mxRectangle.fromRectangle(n),n.width=827):826==n.height&&(n=mxRectangle.fromRectangle(n),n.height=827):"a5"==r.key&&(584==n.width?(n=mxRectangle.fromRectangle(n),n.width=583):584==n.height&&(n=mxRectangle.fromRectangle(n),n.height=583)),n.width==r.format.width&&n.height==r.format.height?(u.value=r.key,s.setAttribute("checked","checked"),s.defaultChecked=!0,s.checked=!0,o.removeAttribute("checked"),o.defaultChecked=!1,o.checked=!1,e=!0):n.width==r.format.height&&n.height==r.format.width&&(u.value=r.key,s.removeAttribute("checked"),s.defaultChecked=!1,s.checked=!1,o.setAttribute("checked","checked"),o.defaultChecked=!0,e=o.checked=!0));e?(a.style.display="",l.style.display="none"):(c.value=n.width/100,h.value=n.height/100,s.setAttribute("checked","checked"),u.value="custom",a.style.display="none",l.style.display="")}}t="format-"+t;var s=document.createElement("input");s.setAttribute("name",t),s.setAttribute("type","radio"),s.setAttribute("value","portrait");var o=document.createElement("input");o.setAttribute("name",t),o.setAttribute("type","radio"),o.setAttribute("value","landscape");var u=document.createElement("select");u.style.marginBottom="8px",u.style.width="202px";var a=document.createElement("div");a.style.marginLeft="4px",a.style.width="210px",a.style.height="24px",s.style.marginRight="6px",a.appendChild(s),t=document.createElement("span"),t.style.maxWidth="100px",mxUtils.write(t,mxResources.get("portrait")),a.appendChild(t),o.style.marginLeft="10px",o.style.marginRight="6px",a.appendChild(o);var f=document.createElement("span");f.style.width="100px",mxUtils.write(f,mxResources.get("landscape")),a.appendChild(f);var l=document.createElement("div");l.style.marginLeft="4px",l.style.width="210px",l.style.height="24px";var c=document.createElement("input");c.setAttribute("size","7"),c.style.textAlign="right",l.appendChild(c),mxUtils.write(l," in x ");var h=document.createElement("input");h.setAttribute("size","7"),h.style.textAlign="right",l.appendChild(h),mxUtils.write(l," in"),a.style.display="none",l.style.display="none";for(var p={},d=PageSetupDialog.getFormats(),v=0;v<d.length;v++){var m=d[v];p[m.key]=m;var g=document.createElement("option");g.setAttribute("value",m.key),mxUtils.write(g,m.title),u.appendChild(g)}var y=!1;i(),e.appendChild(u),mxUtils.br(e),e.appendChild(a),e.appendChild(l);var b=n,w=function(e,t){var i=p[u.value];null!=i.format?(c.value=i.format.width/100,h.value=i.format.height/100,l.style.display="none",a.style.display=""):(a.style.display="none",l.style.display=""),i=parseFloat(c.value);if(isNaN(i)||0>=i)c.value=n.width/100;i=parseFloat(h.value);if(isNaN(i)||0>=i)h.value=n.height/100;i=new mxRectangle(0,0,Math.floor(100*parseFloat(c.value)),Math.floor(100*parseFloat(h.value))),"custom"!=u.value&&o.checked&&(i=new mxRectangle(0,0,i.height,i.width)),t&&y||i.width==b.width&&i.height==b.height||(b=i,null!=r&&r(b))};return mxEvent.addListener(t,"click",function(e){s.checked=!0,w(e),mxEvent.consume(e)}),mxEvent.addListener(f,"click",function(e){o.checked=!0,w(e),mxEvent.consume(e)}),mxEvent.addListener(c,"blur",w),mxEvent.addListener(c,"click",w),mxEvent.addListener(h,"blur",w),mxEvent.addListener(h,"click",w),mxEvent.addListener(o,"change",w),mxEvent.addListener(s,"change",w),mxEvent.addListener(u,"change",function(e){y="custom"==u.value,w(e,!0)}),w(),{set:function(e){n=e,i(null,null,!0)},get:function(){return b},widthInput:c,heightInput:h}},PageSetupDialog.getFormats=function(){return[{key:"letter",title:'US-Letter (8,5" x 11")',format:mxConstants.PAGE_FORMAT_LETTER_PORTRAIT},{key:"legal",title:'US-Legal (8,5" x 14")',format:new mxRectangle(0,0,850,1400)},{key:"tabloid",title:"US-Tabloid (279 mm x 432 mm)",format:new mxRectangle(0,0,1100,1700)},{key:"a0",title:"A0 (841 mm x 1189 mm)",format:new mxRectangle(0,0,3300,4681)},{key:"a1",title:"A1 (594 mm x 841 mm)",format:new mxRectangle(0,0,2339,3300)},{key:"a2",title:"A2 (420 mm x 594 mm)",format:new mxRectangle(0,0,1654,2336)},{key:"a3",title:"A3 (297 mm x 420 mm)",format:new mxRectangle(0,0,1169,1654)},{key:"a4",title:"A4 (210 mm x 297 mm)",format:mxConstants.PAGE_FORMAT_A4_PORTRAIT},{key:"a5",title:"A5 (148 mm x 210 mm)",format:new mxRectangle(0,0,583,827)},{key:"a6",title:"A6 (105 mm x 148 mm)",format:new mxRectangle(0,0,413,583)},{key:"a7",title:"A7 (74 mm x 105 mm)",format:new mxRectangle(0,0,291,413)},{key:"custom",title:mxResources.get("custom"),format:null}]},function(){mxGraphView.prototype.validateBackgroundPage=function(){var e=this.graph;if(null!=e.container&&!e.transparentBackground){if(e.pageVisible){var t=this.getBackgroundPageBounds();if(null==this.backgroundPageShape){for(var n=e.container.firstChild;null!=n&&n.nodeType!=mxConstants.NODETYPE_ELEMENT;)n=n.nextSibling;null!=n&&(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!mxClient.IS_QUIRKS,this.backgroundPageShape.dialect=mxConstants.DIALECT_STRICTHTML,this.backgroundPageShape.init(e.container),n.style.position="absolute",e.container.insertBefore(this.backgroundPageShape.node,n),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){e.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),e.isMouseDown&&!mxEvent.isConsumed(t)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw()}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(){var e=this.graph,t=null==e.background||e.background==mxConstants.NONE?e.defaultPageBackgroundColor:e.background,n=null!=t&&this.gridColor!=t.toLowerCase()?this.gridColor:"#ffffff",r="none",i="";if(e.isGridEnabled()){i=10,mxClient.IS_SVG?(r=unescape(encodeURIComponent(this.createSvgGrid(n))),r=window.btoa?btoa(r):Base64.encode(r,!0),r="url(data:image/svg+xml;base64,"+r+")",i=e.gridSize*this.scale*this.gridSteps):r="url("+this.gridImage+")";var s=n=0;null!=e.view.backgroundPageShape&&(s=this.getBackgroundPageBounds(),n=1+s.x,s=1+s.y),i=-Math.round(i-mxUtils.mod(this.translate.x*this.scale-n,i))+"px "+ -Math.round(i-mxUtils.mod(this.translate.y*this.scale-s,i))+"px"}n=e.view.canvas,null!=n.ownerSVGElement&&(n=n.ownerSVGElement),null!=e.view.backgroundPageShape?(e.view.backgroundPageShape.node.style.backgroundPosition=i,e.view.backgroundPageShape.node.style.backgroundImage=r,e.view.backgroundPageShape.node.style.backgroundColor=t,e.container.className="geDiagramContainer geDiagramBackdrop",n.style.backgroundImage="none",n.style.backgroundColor=""):(e.container.className="geDiagramContainer",n.style.backgroundPosition=i,n.style.backgroundColor=t,n.style.backgroundImage=r)},mxGraphView.prototype.createSvgGrid=function(e){for(var t=this.graph.gridSize*this.scale;t<this.minGridSize;)t*=2;for(var n=this.gridSteps*t,r=[],i=1;i<this.gridSteps;i++){var s=i*t;r.push("M 0 "+s+" L "+n+" "+s+" M "+s+" 0 L "+s+" "+n)}return'<svg width="'+n+'" height="'+n+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+n+'" height="'+n+'" patternUnits="userSpaceOnUse"><path d="'+r.join(" ")+'" fill="none" stroke="'+e+'" opacity="0.2" stroke-width="1"/><path d="M '+n+" 0 L 0 0 0 "+n+'" fill="none" stroke="'+e+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>'};var e=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(t,n){e.apply(this,arguments);if(null!=this.shiftPreview1){var r=this.view.canvas;null!=r.ownerSVGElement&&(r=r.ownerSVGElement);var i=this.gridSize*this.view.scale*this.view.gridSteps,i=-Math.round(i-mxUtils.mod(this.view.translate.x*this.view.scale+t,i))+"px "+ -Math.round(i-mxUtils.mod(this.view.translate.y*this.view.scale+n,i))+"px";r.style.backgroundPosition=i}},mxGraph.prototype.updatePageBreaks=function(e,t,n){var r=this.view.scale,i=this.view.translate,s=this.pageFormat,o=r*this.pageScale,u=this.view.getBackgroundPageBounds();t=u.width,n=u.height;var a=new mxRectangle(r*i.x,r*i.y,s.width*o,s.height*o),f=(e=e&&Math.min(a.width,a.height)>this.minPageBreakDist)?Math.ceil(n/a.height)-1:0,l=e?Math.ceil(t/a.width)-1:0,c=u.x+t,h=u.y+n;null==this.horizontalPageBreaks&&0<f&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<l&&(this.verticalPageBreaks=[]),e=mxUtils.bind(this,function(e){if(null!=e){for(var t=e==this.horizontalPageBreaks?f:l,n=0;n<=t;n++){var r=e==this.horizontalPageBreaks?[new mxPoint(Math.round(u.x),Math.round(u.y+(n+1)*a.height)),new mxPoint(Math.round(c),Math.round(u.y+(n+1)*a.height))]:[new mxPoint(Math.round(u.x+(n+1)*a.width),Math.round(u.y)),new mxPoint(Math.round(u.x+(n+1)*a.width),Math.round(h))];null!=e[n]?(e[n].points=r,e[n].redraw()):(r=new mxPolyline(r,this.pageBreakColor),r.dialect=this.dialect,r.isDashed=this.pageBreakDashed,r.pointerEvents=!1,r.init(this.view.backgroundPane),r.redraw(),e[n]=r)}for(n=t;n<e.length;n++)e[n].destroy();e.splice(t,e.length-t)}}),e(this.horizontalPageBreaks),e(this.verticalPageBreaks)};var t=mxGraphHandler.prototype.shouldRemoveCellsFromParent;mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(e,n,r){for(var i=0;i<n.length;i++)if(this.graph.getModel().isVertex(n[i])){var s=this.graph.getCellGeometry(n[i]);if(null!=s&&s.relative)return!1}return t.apply(this,arguments)};var n=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var e=n.apply(this,arguments);return e.intersects=mxUtils.bind(this,function(t,n){return this.isConnecting()?!0:mxCellMarker.prototype.intersects.apply(e,arguments)}),e},mxGraphView.prototype.createBackgroundPageShape=function(e){return new mxRectangleShape(e,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.getGraphBounds(),t=0<e.width?e.x/this.scale-this.translate.x:0,n=0<e.height?e.y/this.scale-this.translate.y:0,r=this.graph.pageFormat,i=this.graph.pageScale,s=r.width*i,r=r.height*i,i=Math.floor(Math.min(0,t)/s),o=Math.floor(Math.min(0,n)/r);return new mxRectangle(this.scale*(this.translate.x+i*s),this.scale*(this.translate.y+o*r),this.scale*(Math.ceil(Math.max(1,t+e.width/this.scale)/s)-i)*s,this.scale*(Math.ceil(Math.max(1,n+e.height/this.scale)/r)-o)*r)};var r=mxGraph.prototype.panGraph;mxGraph.prototype.panGraph=function(e,t){r.apply(this,arguments),this.dialect==mxConstants.DIALECT_SVG||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=e+"px",this.view.backgroundPageShape.node.style.marginTop=t+"px")};var i=mxPopupMenu.prototype.addItem;mxPopupMenu.prototype.addItem=function(e,t,n,r,s,o){var u=i.apply(this,arguments);return null==o||o||mxEvent.addListener(u,"mousedown",function(e){mxEvent.consume(e)}),u};var s=mxGraphHandler.prototype.getInitialCellForEvent;mxGraphHandler.prototype.getInitialCellForEvent=function(e){var t=this.graph.getModel(),n=t.getParent(this.graph.getSelectionCell()),r=s.apply(this,arguments),i=t.getParent(r);if(null==n||n!=r&&n!=i)for(;!this.graph.isCellSelected(r)&&!this.graph.isCellSelected(i)&&t.isVertex(i)&&!this.graph.isContainer(i);)r=i,i=this.graph.getModel().getParent(r);return r};var o=mxGraphHandler.prototype.isDelayedSelection;mxGraphHandler.prototype.isDelayedSelection=function(e,t){var n=o.apply(this,arguments);if(!n)for(var r=this.graph.getModel(),i=r.getParent(e);null!=i;){if(this.graph.isCellSelected(i)&&r.isVertex(i)){n=!0;break}i=r.getParent(i)}return n},mxGraphHandler.prototype.selectDelayed=function(e){if(!this.graph.popupMenuHandler.isPopupTrigger(e)){var t=e.getCell();null==t&&(t=this.cell);var n=this.graph.view.getState(t);if(null==n||!e.isSource(n.control))for(var n=this.graph.getModel(),r=n.getParent(t);!this.graph.isCellSelected(r)&&n.isVertex(r);)t=r,r=n.getParent(t);this.graph.selectCellForEvent(t,e.getEvent())}},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(e){e=e.getCell();for(var t=this.graph.getModel(),n=t.getParent(e);t.isVertex(n)&&!this.graph.isContainer(n);)this.graph.isCellSelected(n)&&(e=n),n=t.getParent(n);return e}}(),EditorUi=function(e,t,n){mxEventSource.call(this),this.destroyFunctions=[],this.editor=e||new Editor,this.container=t||document.body;var r=this.editor.graph;r.lightbox=n,r.useCssTransforms&&(this.lazyZoomDelay=0),mxClient.IS_SVG?mxPopupMenu.prototype.submenuImage="data:image/gif;base64,R0lGODlhCQAJAIAAAP///zMzMyH5BAEAAAAALAAAAAAJAAkAAAIPhI8WebHsHopSOVgb26AAADs=":(new Image).src=mxPopupMenu.prototype.submenuImage,mxClient.IS_SVG||null==mxConnectionHandler.prototype.connectImage||((new Image).src=mxConnectionHandler.prototype.connectImage.src),this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,r.isEnabled=function(){return!1},r.panningHandler.isForcePanningEvent=function(e){return!mxEvent.isPopupTrigger(e.getEvent())}),this.actions=new Actions(this),this.menus=this.createMenus(),this.createDivs(),this.createUi(),this.refresh();var i=mxUtils.bind(this,function(e){return null==e&&(e=window.event),this.isSelectionAllowed(e)||r.isEditing()});this.container==document.body&&(this.menubarContainer.onselectstart=i,this.menubarContainer.onmousedown=i,this.toolbarContainer.onselectstart=i,this.toolbarContainer.onmousedown=i,this.diagramContainer.onselectstart=i,this.diagramContainer.onmousedown=i,this.sidebarContainer.onselectstart=i,this.sidebarContainer.onmousedown=i,this.formatContainer.onselectstart=i,this.formatContainer.onmousedown=i,this.footerContainer.onselectstart=i,this.footerContainer.onmousedown=i,null!=this.tabContainer&&(this.tabContainer.onselectstart=i)),!this.editor.chromeless||this.editor.editable?(t=function(e){var t=mxEvent.getSource(e);if("A"==t.nodeName)for(;null!=t;){if("geHint"==t.className)return!0;t=t.parentNode}return i(e)},mxClient.IS_IE&&("undefined"==typeof document.documentMode||9>document.documentMode)?mxEvent.addListener(this.diagramContainer,"contextmenu",t):this.diagramContainer.oncontextmenu=t):r.panningHandler.usePopupTrigger=!1,r.init(this.diagramContainer),mxClient.IS_SVG&&null!=r.view.getDrawPane()&&(t=r.view.getDrawPane().ownerSVGElement,null!=t&&(t.style.position="absolute")),this.hoverIcons=this.createHoverIcons(),mxEvent.addListener(this.diagramContainer,"mousemove",mxUtils.bind(this,function(e){var t=mxUtils.getOffset(this.diagramContainer);0<mxEvent.getClientX(e)-t.x-this.diagramContainer.clientWidth||0<mxEvent.getClientY(e)-t.y-this.diagramContainer.clientHeight?this.diagramContainer.setAttribute("title",mxResources.get("panTooltip")):this.diagramContainer.removeAttribute("title")}));var s=!1,o=this.hoverIcons.isResetEvent;this.hoverIcons.isResetEvent=function(e,t){return s||o.apply(this,arguments)},this.keydownHandler=mxUtils.bind(this,function(e){32==e.which?(s=!0,this.hoverIcons.reset(),r.container.style.cursor="move",r.isEditing()||mxEvent.getSource(e)!=r.container||mxEvent.consume(e)):mxEvent.isConsumed(e)||27!=e.keyCode||this.hideDialog(null,!0)}),mxEvent.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=mxUtils.bind(this,function(e){r.container.style.cursor="",s=!1}),mxEvent.addListener(document,"keyup",this.keyupHandler);var u=r.panningHandler.isForcePanningEvent;r.panningHandler.isForcePanningEvent=function(e){return u.apply(this,arguments)||s||mxEvent.isMouseEvent(e.getEvent())&&(this.usePopupTrigger||!mxEvent.isPopupTrigger(e.getEvent()))&&(!mxEvent.isControlDown(e.getEvent())&&mxEvent.isRightMouseButton(e.getEvent())||mxEvent.isMiddleMouseButton(e.getEvent()))};var a=r.cellEditor.isStopEditingEvent;r.cellEditor.isStopEditingEvent=function(e){return a.apply(this,arguments)||13==e.keyCode&&(!mxClient.IS_SF&&mxEvent.isControlDown(e)||mxClient.IS_MAC&&mxEvent.isMetaDown(e)||mxClient.IS_SF&&mxEvent.isShiftDown(e))};var f=!1,l=null,c=null,h=null,p=mxUtils.bind(this,function(){if(null!=this.toolbar&&f!=r.cellEditor.isContentEditing()){for(var e=this.toolbar.container.firstChild,t=[];null!=e;){var n=e.nextSibling;0>mxUtils.indexOf(this.toolbar.staticElements,e)&&(e.parentNode.removeChild(e),t.push(e)),e=n}e=this.toolbar.fontMenu,n=this.toolbar.sizeMenu;if(null==h)this.toolbar.createTextToolbar();else{for(var i=0;i<h.length;i++)this.toolbar.container.appendChild(h[i]);this.toolbar.fontMenu=l,this.toolbar.sizeMenu=c}f=r.cellEditor.isContentEditing(),l=e,c=n,h=t}}),d=this,v=r.cellEditor.startEditing;r.cellEditor.startEditing=function(){v.apply(this,arguments),p();if(r.cellEditor.isContentEditing()){var e=!1,t=function(){e||(e=!0,window.setTimeout(function(){for(var t=r.getSelectedElement();null!=t&&t.nodeType!=mxConstants.NODETYPE_ELEMENT;)t=t.parentNode;if(null!=t&&(t=mxUtils.getCurrentStyle(t),null!=t&&null!=d.toolbar)){var n=t.fontFamily;"'"==n.charAt(0)&&(n=n.substring(1)),"'"==n.charAt(n.length-1)&&(n=n.substring(0,n.length-1)),d.toolbar.setFontName(n),d.toolbar.setFontSize(parseInt(t.fontSize))}e=!1},0))};mxEvent.addListener(r.cellEditor.textarea,"input",t),mxEvent.addListener(r.cellEditor.textarea,"touchend",t),mxEvent.addListener(r.cellEditor.textarea,"mouseup",t),mxEvent.addListener(r.cellEditor.textarea,"keyup",t),t()}};var m=r.cellEditor.stopEditing;r.cellEditor.stopEditing=function(e,t){m.apply(this,arguments),p()},r.container.setAttribute("tabindex","0"),r.container.style.cursor="default";if(window.self===window.top&&null!=r.container.parentNode)try{r.container.focus()}catch(g){}var y=r.fireMouseEvent;r.fireMouseEvent=function(e,t,n){e==mxEvent.MOUSE_DOWN&&this.container.focus(),y.apply(this,arguments)},r.popupMenuHandler.autoExpand=!0,null!=this.menus&&(r.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(e,t,n){this.menus.createPopupMenu(e,t,n)})),mxEvent.addGestureListeners(document,mxUtils.bind(this,function(e){r.popupMenuHandler.hideMenu()})),this.keyHandler=this.createKeyHandler(e),this.getKeyHandler=function(){return keyHandler};var b="rounded shadow glass dashed dashPattern comic labelBackgroundColor".split(" "),w="shape edgeStyle curved rounded elbow comic jumpStyle jumpSize".split(" ");this.setDefaultStyle=function(e){var t=r.view.getState(e);if(null!=t){e=e.clone(),e.style="",e=r.getCellStyle(e);var n=[],i=[],s;for(s in t.style)e[s]!=t.style[s]&&(n.push(t.style[s]),i.push(s));s=r.getModel().getStyle(t.cell);for(var o=null!=s?s.split(";"):[],u=0;u<o.length;u++){var a=o[u],f=a.indexOf("=");0<=f&&(s=a.substring(0,f),a=a.substring(f+1),null!=e[s]&&"none"==a&&(n.push(a),i.push(s)))}r.getModel().isEdge(t.cell)?r.currentEdgeStyle={}:r.currentVertexStyle={},this.fireEvent(new mxEventObject("styleChanged","keys",i,"values",n,"cells",[t.cell]))}},this.clearDefaultStyle=function(){r.currentEdgeStyle=mxUtils.clone(r.defaultEdgeStyle),r.currentVertexStyle=mxUtils.clone(r.defaultVertexStyle),this.fireEvent(new mxEventObject("styleChanged","keys",[],"values",[],"cells",[]))};var E=["fontFamily","fontSize","fontColor"],S="edgeStyle startArrow startFill startSize endArrow endFill endSize jettySize orthogonalLoop".split(" "),x=["startArrow startFill startSize sourcePerimeterSpacing endArrow endFill endSize targetPerimeterSpacing jettySize orthogonalLoop".split(" "),["strokeColor","strokeWidth"],["fillColor","gradientColor"],E,["opacity"],["align"],["html"]];for(e=0;e<x.length;e++)for(t=0;t<x[e].length;t++)b.push(x[e][t]);for(e=0;e<w.length;e++)0>mxUtils.indexOf(b,w[e])&&b.push(w[e]);var T=function(e,t){var n=r.getModel();n.beginUpdate();try{if(t)for(var i=n.isEdge(a),s=i?r.currentEdgeStyle:r.currentVertexStyle,i=["fontSize","fontFamily","fontColor"],o=0;o<i.length;o++){var u=s[i[o]];null!=u&&r.setCellStyles(i[o],u,e)}else for(u=0;u<e.length;u++){for(var a=e[u],f=n.getStyle(a),l=null!=f?f.split(";"):[],c=b.slice(),o=0;o<l.length;o++){var h=l[o],p=h.indexOf("=");if(0<=p){var d=h.substring(0,p),v=mxUtils.indexOf(c,d);0<=v&&c.splice(v,1);for(var m=0;m<x.length;m++){var g=x[m];if(0<=mxUtils.indexOf(g,d))for(var y=0;y<g.length;y++){var E=mxUtils.indexOf(c,g[y]);0<=E&&c.splice(E,1)}}}}for(var s=(i=n.isEdge(a))?r.currentEdgeStyle:r.currentVertexStyle,S=n.getStyle(a),o=0;o<c.length;o++){var d=c[o],T=s[d];null==T||"shape"==d&&!i||i&&!(0>mxUtils.indexOf(w,d))||(S=mxUtils.setStyle(S,d,T))}n.setStyle(a,S)}}finally{n.endUpdate()}};r.addListener("cellsInserted",function(e,t){T(t.getProperty("cells"))}),r.addListener("textInserted",function(e,t){T(t.getProperty("cells"),!0)}),r.connectionHandler.addListener(mxEvent.CONNECT,function(e,t){var n=[t.getProperty("cell")];t.getProperty("terminalInserted")&&n.push(t.getProperty("terminal")),T(n)}),this.addListener("styleChanged",mxUtils.bind(this,function(e,t){var n=t.getProperty("cells"),i=!1,s=!1;if(0<n.length)for(var o=0;o<n.length&&(i=r.getModel().isVertex(n[o])||i,!(s=r.getModel().isEdge(n[o])||s)||!i);o++);else s=i=!0;for(var n=t.getProperty("keys"),u=t.getProperty("values"),o=0;o<n.length;o++){var a=0<=mxUtils.indexOf(E,n[o]);if("strokeColor"!=n[o]||null!=u[o]&&"none"!=u[o])if(0<=mxUtils.indexOf(w,n[o]))s||0<=mxUtils.indexOf(S,n[o])?null==u[o]?delete r.currentEdgeStyle[n[o]]:r.currentEdgeStyle[n[o]]=u[o]:i&&0<=mxUtils.indexOf(b,n[o])&&(null==u[o]?delete r.currentVertexStyle[n[o]]:r.currentVertexStyle[n[o]]=u[o]);else if(0<=mxUtils.indexOf(b,n[o])){if(i||a)null==u[o]?delete r.currentVertexStyle[n[o]]:r.currentVertexStyle[n[o]]=u[o];if(s||a||0<=mxUtils.indexOf(S,n[o]))null==u[o]?delete r.currentEdgeStyle[n[o]]:r.currentEdgeStyle[n[o]]=u[o]}}null!=this.toolbar&&(this.toolbar.setFontName(r.currentVertexStyle.fontFamily||Menus.prototype.defaultFont),this.toolbar.setFontSize(r.currentVertexStyle.fontSize||Menus.prototype.defaultFontSize),null!=this.toolbar.edgeStyleMenu&&(this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0].className="orthogonalEdgeStyle"==r.currentEdgeStyle.edgeStyle&&"1"==r.currentEdgeStyle.curved?"geSprite geSprite-curved":"straight"==r.currentEdgeStyle.edgeStyle||"none"==r.currentEdgeStyle.edgeStyle||null==r.currentEdgeStyle.edgeStyle?"geSprite geSprite-straight":"entityRelationEdgeStyle"==r.currentEdgeStyle.edgeStyle?"geSprite geSprite-entity":"elbowEdgeStyle"==r.currentEdgeStyle.edgeStyle?"geSprite geSprite-"+("vertical"==r.currentEdgeStyle.elbow?"verticalelbow":"horizontalelbow"):"isometricEdgeStyle"==r.currentEdgeStyle.edgeStyle?"geSprite geSprite-"+("vertical"==r.currentEdgeStyle.elbow?"verticalisometric":"horizontalisometric"):"geSprite geSprite-orthogonal"),null!=this.toolbar.edgeShapeMenu&&(this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0].className="link"==r.currentEdgeStyle.shape?"geSprite geSprite-linkedge":"flexArrow"==r.currentEdgeStyle.shape?"geSprite geSprite-arrow":"arrow"==r.currentEdgeStyle.shape?"geSprite geSprite-simplearrow":"geSprite geSprite-connection"),null!=this.toolbar.lineStartMenu&&(this.toolbar.lineStartMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("start",r.currentEdgeStyle.shape,r.currentEdgeStyle[mxConstants.STYLE_STARTARROW],mxUtils.getValue(r.currentEdgeStyle,"startFill","1"))),null!=this.toolbar.lineEndMenu&&(this.toolbar.lineEndMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("end",r.currentEdgeStyle.shape,r.currentEdgeStyle[mxConstants.STYLE_ENDARROW],mxUtils.getValue(r.currentEdgeStyle,"endFill","1"))))})),null!=this.toolbar&&(e=mxUtils.bind(this,function(){var e=r.currentVertexStyle.fontFamily||"Helvetica",t=String(r.currentVertexStyle.fontSize||"12"),n=r.getView().getState(r.getSelectionCell());null!=n&&(e=n.style[mxConstants.STYLE_FONTFAMILY]||e,t=n.style[mxConstants.STYLE_FONTSIZE]||t,10<e.length&&(e=e.substring(0,8)+"...")),this.toolbar.setFontName(e),this.toolbar.setFontSize(t)}),r.getSelectionModel().addListener(mxEvent.CHANGE,e),r.getModel().addListener(mxEvent.CHANGE,e)),r.addListener(mxEvent.CELLS_ADDED,function(e,t){var n=t.getProperty("cells"),i=t.getProperty("parent");r.getModel().isLayer(i)&&!r.isCellVisible(i)&&null!=n&&0<n.length&&r.getModel().setVisible(i,!0)}),this.gestureHandler=mxUtils.bind(this,function(e){null!=this.currentMenu&&mxEvent.getSource(e)!=this.currentMenu.div&&this.hideCurrentMenu()}),mxEvent.addGestureListeners(document,this.gestureHandler),this.resizeHandler=mxUtils.bind(this,function(){window.setTimeout(mxUtils.bind(this,function(){null!=this.editor.graph&&this.refresh()}),0)}),mxEvent.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=mxUtils.bind(this,function(){this.refresh()}),mxEvent.addListener(window,"orientationchange",this.orientationChangeHandler),mxClient.IS_IOS&&!window.navigator.standalone&&(this.scrollHandler=mxUtils.bind(this,function(){window.scrollTo(0,0)}),mxEvent.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.resetScrollbars()})),this.addListener("gridEnabledChanged",mxUtils.bind(this,function(){r.view.validateBackground()})),this.addListener("backgroundColorChanged",mxUtils.bind(this,function(){r.view.validateBackground()})),r.addListener("gridSizeChanged",mxUtils.bind(this,function(){r.isGridEnabled()&&r.view.validateBackground()})),this.editor.resetGraph(),this.init(),this.open()},mxUtils.extend(EditorUi,mxEventSource),EditorUi.compactUi=!0,EditorUi.prototype.splitSize=mxClient.IS_TOUCH||mxClient.IS_POINTER?12:8,EditorUi.prototype.menubarHeight=30,EditorUi.prototype.formatEnabled=!0,EditorUi.prototype.formatWidth=240,EditorUi.prototype.toolbarHeight=34,EditorUi.prototype.footerHeight=28,EditorUi.prototype.sidebarFooterHeight=34,EditorUi.prototype.hsplitPosition=640>=screen.width?118:208,EditorUi.prototype.allowAnimation=!0,EditorUi.prototype.lightboxMaxFitScale=2,EditorUi.prototype.lightboxVerticalDivider=4,EditorUi.prototype.hsplitClickEnabled=!1,EditorUi.prototype.init=function(){var e=this.editor.graph;mxEvent.addListener(e.container,"keydown",mxUtils.bind(this,function(e){this.onKeyDown(e)})),mxEvent.addListener(e.container,"keypress",mxUtils.bind(this,function(e){this.onKeyPress(e)})),this.addUndoListener(),this.addBeforeUnloadListener(),e.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()})),e.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()}));var t=e.setDefaultParent,n=this;this.editor.graph.setDefaultParent=function(){t.apply(this,arguments),n.updateActionStates()},e.editLink=n.actions.get("editLink").funct,this.updateActionStates(),this.initClipboard(),this.initCanvas(),null!=this.format&&this.format.init()},EditorUi.prototype.onKeyDown=function(e){var t=this.editor.graph;9==e.which&&t.isEnabled()&&!mxEvent.isAltDown(e)&&(t.isEditing()?t.stopEditing(!1):t.selectCell(!mxEvent.isShiftDown(e)),mxEvent.consume(e))},EditorUi.prototype.onKeyPress=function(e){var t=this.editor.graph;!this.isImmediateEditingEvent(e)||t.isEditing()||t.isSelectionEmpty()||0===e.which||mxEvent.isAltDown(e)||mxEvent.isControlDown(e)||mxEvent.isMetaDown(e)||(t.escape(),t.startEditing(),mxClient.IS_FF&&(t=t.cellEditor,t.textarea.innerHTML=String.fromCharCode(e.which),e=document.createRange(),e.selectNodeContents(t.textarea),e.collapse(!1),t=window.getSelection(),t.removeAllRanges(),t.addRange(e)))},EditorUi.prototype.isImmediateEditingEvent=function(e){return!0},EditorUi.prototype.getCssClassForMarker=function(e,t,n,r){return"flexArrow"==t?null!=n&&n!=mxConstants.NONE?"geSprite geSprite-"+e+"blocktrans":"geSprite geSprite-noarrow":n==mxConstants.ARROW_CLASSIC?"1"==r?"geSprite geSprite-"+e+"classic":"geSprite geSprite-"+e+"classictrans":n==mxConstants.ARROW_CLASSIC_THIN?"1"==r?"geSprite geSprite-"+e+"classicthin":"geSprite geSprite-"+e+"classicthintrans":n==mxConstants.ARROW_OPEN?"geSprite geSprite-"+e+"open":n==mxConstants.ARROW_OPEN_THIN?"geSprite geSprite-"+e+"openthin":n==mxConstants.ARROW_BLOCK?"1"==r?"geSprite geSprite-"+e+"block":"geSprite geSprite-"+e+"blocktrans":n==mxConstants.ARROW_BLOCK_THIN?"1"==r?"geSprite geSprite-"+e+"blockthin":"geSprite geSprite-"+e+"blockthintrans":n==mxConstants.ARROW_OVAL?"1"==r?"geSprite geSprite-"+e+"oval":"geSprite geSprite-"+e+"ovaltrans":n==mxConstants.ARROW_DIAMOND?"1"==r?"geSprite geSprite-"+e+"diamond":"geSprite geSprite-"+e+"diamondtrans":n==mxConstants.ARROW_DIAMOND_THIN?"1"==r?"geSprite geSprite-"+e+"thindiamond":"geSprite geSprite-"+e+"thindiamondtrans":"openAsync"==n?"geSprite geSprite-"+e+"openasync":"dash"==n?"geSprite geSprite-"+e+"dash":"cross"==n?"geSprite geSprite-"+e+"cross":"async"==n?"1"==r?"geSprite geSprite-"+e+"async":"geSprite geSprite-"+e+"asynctrans":"circle"==n||"circlePlus"==n?"1"==r||"circle"==n?"geSprite geSprite-"+e+"circle":"geSprite geSprite-"+e+"circleplus":"ERone"==n?"geSprite geSprite-"+e+"erone":"ERmandOne"==n?"geSprite geSprite-"+e+"eronetoone":"ERmany"==n?"geSprite geSprite-"+e+"ermany":"ERoneToMany"==n?"geSprite geSprite-"+e+"eronetomany":"ERzeroToOne"==n?"geSprite geSprite-"+e+"eroneopt":"ERzeroToMany"==n?"geSprite geSprite-"+e+"ermanyopt":"geSprite geSprite-noarrow"},EditorUi.prototype.createMenus=function(){return null},EditorUi.prototype.updatePasteActionStates=function(){var e=this.editor.graph,t=this.actions.get("paste"),n=this.actions.get("pasteHere");t.setEnabled(this.editor.graph.cellEditor.isContentEditing()||!mxClipboard.isEmpty()&&e.isEnabled()&&!e.isCellLocked(e.getDefaultParent())),n.setEnabled(t.isEnabled())},EditorUi.prototype.initClipboard=function(){var e=this,t=mxClipboard.cut;mxClipboard.cut=function(n){n.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):t.apply(this,arguments),e.updatePasteActionStates()};var n=mxClipboard.copy;mxClipboard.copy=function(t){t.cellEditor.isContentEditing()?document.execCommand("copy",!1,null):n.apply(this,arguments),e.updatePasteActionStates()};var r=mxClipboard.paste;mxClipboard.paste=function(t){var n=null;return t.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):n=r.apply(this,arguments),e.updatePasteActionStates(),n};var i=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){i.apply(this,arguments),e.updatePasteActionStates()};var s=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(t,n){s.apply(this,arguments),e.updatePasteActionStates()},this.updatePasteActionStates()},EditorUi.prototype.lazyZoomDelay=20,EditorUi.prototype.initCanvas=function(){var e=this.editor.graph;e.timerAutoScroll=!0,e.getPagePadding=function(){return new mxPoint(Math.max(0,Math.round((e.container.offsetWidth-34)/e.view.scale)),Math.max(0,Math.round((e.container.offsetHeight-34)/e.view.scale)))},e.view.getBackgroundPageBounds=function(){var e=this.graph.getPageLayout(),t=this.graph.getPageSize();return new mxRectangle(this.scale*(this.translate.x+e.x*t.width),this.scale*(this.translate.y+e.y*t.height),this.scale*e.width*t.width,this.scale*e.height*t.height)},e.getPreferredPageSize=function(e,t,n){return e=this.getPageLayout(),t=this.getPageSize(),new mxRectangle(0,0,e.width*t.width,e.height*t.height)};var t=null,n=this;if(this.editor.isChromelessView()){this.chromelessResize=t=mxUtils.bind(this,function(t,n,r,i){if(null!=e.container){r=null!=r?r:0,i=null!=i?i:0;var s=e.pageVisible?e.view.getBackgroundPageBounds():e.getGraphBounds(),o=mxUtils.hasScrollbars(e.container),u=e.view.translate,a=e.view.scale,f=mxRectangle.fromRectangle(s);f.x=f.x/a-u.x,f.y=f.y/a-u.y,f.width/=a,f.height/=a;var u=e.container.scrollTop,l=e.container.scrollLeft,c=mxClient.IS_QUIRKS||8<=document.documentMode?20:14;if(8==document.documentMode||9==document.documentMode)c+=3;var h=e.container.offsetWidth-c,c=e.container.offsetHeight-c;t=t?Math.max(.3,Math.min(n||1,h/f.width)):a,n=(h-t*f.width)/2/t;var p=0==this.lightboxVerticalDivider?0:(c-t*f.height)/this.lightboxVerticalDivider/t;o&&(n=Math.max(n,0),p=Math.max(p,0));if(o||s.width<h||s.height<c)e.view.scaleAndTranslate(t,Math.floor(n-f.x),Math.floor(p-f.y)),e.container.scrollTop=u*t/a,e.container.scrollLeft=l*t/a;else if(0!=r||0!=i)s=e.view.translate,e.view.setTranslate(Math.floor(s.x+r/a),Math.floor(s.y+i/a))}}),this.chromelessWindowResize=mxUtils.bind(this,function(){this.chromelessResize(!1)});var r=mxUtils.bind(this,function(){this.chromelessWindowResize(!1)});mxEvent.addListener(window,"resize",r),this.destroyFunctions.push(function(){mxEvent.removeListener(window,"resize",r)}),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.chromelessResize(!0)})),this.actions.get("zoomIn").funct=mxUtils.bind(this,function(t){e.zoomIn(),this.chromelessResize(!1)}),this.actions.get("zoomOut").funct=mxUtils.bind(this,function(t){e.zoomOut(),this.chromelessResize(!1)});if("0"!=urlParams.toolbar){this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.backgroundColor="#000000",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left="50%",mxClient.IS_VML||(mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","20px"),mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out"));var i=mxUtils.bind(this,function(){var t=mxUtils.getCurrentStyle(e.container);this.chromelessToolbar.style.bottom=(null!=t?parseInt(t["margin-bottom"]||0):0)+(null!=this.tabContainer?20+parseInt(this.tabContainer.style.height):20)+"px"});this.editor.addListener("resetGraphView",i),i();var s=0,i=mxUtils.bind(this,function(e,t,n){s++;var r=document.createElement("span");return r.style.paddingLeft="8px",r.style.paddingRight="8px",r.style.cursor="pointer",mxEvent.addListener(r,"click",e),null!=n&&r.setAttribute("title",n),e=document.createElement("img"),e.setAttribute("border","0"),e.setAttribute("src",t),r.appendChild(e),this.chromelessToolbar.appendChild(r),r}),o=i(mxUtils.bind(this,function(e){this.actions.get("previousPage").funct(),mxEvent.consume(e)}),Editor.previousLargeImage,mxResources.get("previousPage")),u=document.createElement("div");u.style.display="inline-block",u.style.verticalAlign="top",u.style.fontFamily="Helvetica,Arial",u.style.marginTop="8px",u.style.fontSize="14px",u.style.color="#ffffff",this.chromelessToolbar.appendChild(u);var a=i(mxUtils.bind(this,function(e){this.actions.get("nextPage").funct(),mxEvent.consume(e)}),Editor.nextLargeImage,mxResources.get("nextPage")),f=mxUtils.bind(this,function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage&&(u.innerHTML="",mxUtils.write(u,mxUtils.indexOf(this.pages,this.currentPage)+1+" / "+this.pages.length))});o.style.paddingLeft="0px",o.style.paddingRight="4px",a.style.paddingLeft="4px",a.style.paddingRight="0px";var l=mxUtils.bind(this,function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage?(a.style.display="",o.style.display="",u.style.display="inline-block"):(a.style.display="none",o.style.display="none",u.style.display="none"),f()});this.editor.addListener("resetGraphView",l),this.editor.addListener("pageSelected",f),i(mxUtils.bind(this,function(e){this.actions.get("zoomOut").funct(),mxEvent.consume(e)}),Editor.zoomOutLargeImage,mxResources.get("zoomOut")+" (Alt+Mousewheel)"),i(mxUtils.bind(this,function(e){this.actions.get("zoomIn").funct(),mxEvent.consume(e)}),Editor.zoomInLargeImage,mxResources.get("zoomIn")+" (Alt+Mousewheel)"),i(mxUtils.bind(this,function(t){e.isLightboxView()?(1==e.view.scale?this.lightboxFit():e.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),mxEvent.consume(t)}),Editor.actualSizeLargeImage,mxResources.get("fit"));var c=null,h=null,p=mxUtils.bind(this,function(e){null!=c&&(window.clearTimeout(c),fadeThead=null),null!=h&&(window.clearTimeout(h),fadeThead2=null),c=window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity(this.chromelessToolbar,0),c=null,h=window.setTimeout(mxUtils.bind(this,function(){this.chromelessToolbar.style.display="none",h=null}),600)}),e||200)}),d=mxUtils.bind(this,function(e){null!=c&&(window.clearTimeout(c),fadeThead=null),null!=h&&(window.clearTimeout(h),fadeThead2=null),this.chromelessToolbar.style.display="",mxUtils.setOpacity(this.chromelessToolbar,e||30)});if("1"==urlParams.layers){this.layersDialog=null;var v=i(mxUtils.bind(this,function(t){if(null!=this.layersDialog)this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null;else{this.layersDialog=e.createLayersDialog(),mxEvent.addListener(this.layersDialog,"mouseleave",mxUtils.bind(this,function(){this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null}));var n=v.getBoundingClientRect();mxUtils.setPrefixedStyle(this.layersDialog.style,"borderRadius","5px"),this.layersDialog.style.position="fixed",this.layersDialog.style.fontFamily="Helvetica,Arial",this.layersDialog.style.backgroundColor="#000000",this.layersDialog.style.width="160px",this.layersDialog.style.padding="4px 2px 4px 2px",this.layersDialog.style.color="#ffffff",mxUtils.setOpacity(this.layersDialog,70),this.layersDialog.style.left=n.left+"px",this.layersDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px",n=mxUtils.getCurrentStyle(this.editor.graph.container),this.layersDialog.style.zIndex=n.zIndex,document.body.appendChild(this.layersDialog)}mxEvent.consume(t)}),Editor.layersLargeImage,mxResources.get("layers")),m=e.getModel();m.addListener(mxEvent.CHANGE,function(){v.style.display=1<m.getChildCount(m.root)?"":"none"})}this.addChromelessToolbarItems(i),null==this.editor.editButtonLink&&null==this.editor.editButtonFunc||i(mxUtils.bind(this,function(t){null!=this.editor.editButtonFunc?this.editor.editButtonFunc():"_blank"==this.editor.editButtonLink?this.editor.editAsNew(this.getEditBlankXml()):e.openLink(this.editor.editButtonLink,"editWindow"),mxEvent.consume(t)}),Editor.editLargeImage,mxResources.get("edit"));if(null!=this.lightboxToolbarActions)for(l=0;l<this.lightboxToolbarActions.length;l++){var g=this.lightboxToolbarActions[l];i(g.fn,g.icon,g.tooltip)}!e.lightbox||"1"!=urlParams.close&&this.container==document.body||i(mxUtils.bind(this,function(e){"1"==urlParams.close?window.close():(this.destroy(),mxEvent.consume(e))}),Editor.closeLargeImage,mxResources.get("close")+" (Escape)"),this.chromelessToolbar.style.display="none",mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),e.container.appendChild(this.chromelessToolbar),mxEvent.addListener(e.container,mxClient.IS_POINTER?"pointermove":"mousemove",mxUtils.bind(this,function(e){mxEvent.isTouchEvent(e)||(mxEvent.isShiftDown(e)||d(30),p())})),mxEvent.addListener(this.chromelessToolbar,mxClient.IS_POINTER?"pointermove":"mousemove",function(e){mxEvent.consume(e)}),mxEvent.addListener(this.chromelessToolbar,"mouseenter",mxUtils.bind(this,function(e){mxEvent.isShiftDown(e)?p():d(100)})),mxEvent.addListener(this.chromelessToolbar,"mousemove",mxUtils.bind(this,function(e){mxEvent.isShiftDown(e)?p():d(100),mxEvent.consume(e)})),mxEvent.addListener(this.chromelessToolbar,"mouseleave",mxUtils.bind(this,function(e){mxEvent.isTouchEvent(e)||d(30)}));var y=e.getTolerance();e.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(t,n){this.startX=n.getGraphX(),this.startY=n.getGraphY(),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop},mouseMove:function(e,t){},mouseUp:function(t,r){mxEvent.isTouchEvent(r.getEvent())&&Math.abs(this.scrollLeft-e.container.scrollLeft)<y&&Math.abs(this.scrollTop-e.container.scrollTop)<y&&Math.abs(this.startX-r.getGraphX())<y&&Math.abs(this.startY-r.getGraphY())<y&&(0<parseFloat(n.chromelessToolbar.style.opacity||0)?p():d(30))}})}this.editor.editable||this.addChromelessClickHandler()}else if(this.editor.extendCanvas){var b=e.view.validate;e.view.validate=function(){if(null!=this.graph.container&&mxUtils.hasScrollbars(this.graph.container)){var e=this.graph.getPagePadding(),t=this.graph.getPageSize();this.translate.x=e.x-(this.x0||0)*t.width,this.translate.y=e.y-(this.y0||0)*t.height}b.apply(this,arguments)};var w=e.sizeDidChange;e.sizeDidChange=function(){if(null!=this.container&&mxUtils.hasScrollbars(this.container)){var t=this.getPageLayout(),n=this.getPagePadding(),r=this.getPageSize(),i=Math.ceil(2*n.x+t.width*r.width),s=Math.ceil(2*n.y+t.height*r.height),o=e.minimumGraphSize;if(null==o||o.width!=i||o.height!=s)e.minimumGraphSize=new mxRectangle(0,0,i,s);i=n.x-t.x*r.width,n=n.y-t.y*r.height,this.autoTranslate||this.view.translate.x==i&&this.view.translate.y==n?w.apply(this,arguments):(this.autoTranslate=!0,this.view.x0=t.x,this.view.y0=t.y,t=e.view.translate.x,r=e.view.translate.y,e.view.setTranslate(i,n),e.container.scrollLeft+=Math.round((i-t)*e.view.scale),e.container.scrollTop+=Math.round((n-r)*e.view.scale),this.autoTranslate=!1)}}}e.updateZoomTimeout=null,e.cumulativeZoomFactor=1;var E=null;e.lazyZoom=function(r){null!=this.updateZoomTimeout&&window.clearTimeout(this.updateZoomTimeout),r?.15>this.view.scale*this.cumulativeZoomFactor?this.cumulativeZoomFactor=(this.view.scale+.01)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):.15>=this.view.scale*this.cumulativeZoomFactor?this.cumulativeZoomFactor=(this.view.scale-.01)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.01,Math.min(this.view.scale*this.cumulativeZoomFactor,160)/this.view.scale),this.updateZoomTimeout=window.setTimeout(mxUtils.bind(this,function(){var r=mxUtils.getOffset(e.container),i=0,s=0;null!=E&&(i=e.container.offsetWidth/2-E.x+r.x,s=e.container.offsetHeight/2-E.y+r.y),r=this.view.scale,this.zoom(this.cumulativeZoomFactor),this.view.scale!=r&&(null!=t&&n.chromelessResize(!1,null,i*(this.cumulativeZoomFactor-1),s*(this.cumulativeZoomFactor-1)),!mxUtils.hasScrollbars(e.container)||0==i&&0==s||(e.container.scrollLeft-=i*(this.cumulativeZoomFactor-1),e.container.scrollTop-=s*(this.cumulativeZoomFactor-1))),this.cumulativeZoomFactor=1,this.updateZoomTimeout=null}),this.lazyZoomDelay)},mxEvent.addMouseWheelListener(mxUtils.bind(this,function(t,n){if((null==this.dialogs||0==this.dialogs.length)&&e.isZoomWheelEvent(t))for(var r=mxEvent.getSource(t);null!=r;){if(r==e.container){E=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),e.lazyZoom(n),mxEvent.consume(t);break}r=r.parentNode}}))},EditorUi.prototype.addChromelessToolbarItems=function(e){e(mxUtils.bind(this,function(e){this.actions.get("print").funct(),mxEvent.consume(e)}),Editor.printLargeImage,mxResources.get("print"))},EditorUi.prototype.createTemporaryGraph=function(e){return e=new Graph(document.createElement("div"),null,null,e),e.resetViewOnRootChange=!1,e.setConnectable(!1),e.gridEnabled=!1,e.autoScroll=!1,e.setTooltips(!1),e.setEnabled(!1),e.container.style.visibility="hidden",e.container.style.position="absolute",e.container.style.overflow="hidden",e.container.style.height="1px",e.container.style.width="1px",e},EditorUi.prototype.addChromelessClickHandler=function(){var e=urlParams.highlight;null!=e&&0<e.length&&(e="#"+e),this.editor.graph.addClickHandler(e)},EditorUi.prototype.toggleFormatPanel=function(e){this.formatWidth=e||0<this.formatWidth?0:240,this.formatContainer.style.display=e||0<this.formatWidth?"":"none",this.refresh(),this.format.refresh(),this.fireEvent(new mxEventObject("formatWidthChanged"))},EditorUi.prototype.lightboxFit=function(e){if(this.isDiagramEmpty())this.editor.graph.view.setScale(1);else{var t=urlParams.border,n=60;null!=t&&(n=parseInt(t)),this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(n,null,null,null,null,null,e),this.editor.graph.maxFitScale=null}},EditorUi.prototype.isDiagramEmpty=function(){var e=this.editor.graph.getModel();return 1==e.getChildCount(e.root)&&0==e.getChildCount(e.getChildAt(e.root,0))},EditorUi.prototype.isSelectionAllowed=function(e){return"SELECT"==mxEvent.getSource(e).nodeName||"INPUT"==mxEvent.getSource(e).nodeName&&mxUtils.isAncestorNode(this.formatContainer,mxEvent.getSource(e))},EditorUi.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=mxUtils.bind(this,function(){if(!this.editor.isChromelessView())return this.onBeforeUnload()})},EditorUi.prototype.onBeforeUnload=function(){if(this.editor.modified)return mxResources.get("allChangesLost")},EditorUi.prototype.open=function(){try{null!=window.opener&&null!=window.opener.openFile&&window.opener.openFile.setConsumer(mxUtils.bind(this,function(e,t){try{var n=mxUtils.parseXml(e);this.editor.setGraphXml(n.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),null!=t&&(this.editor.setFilename(t),this.updateDocumentTitle())}catch(r){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+r.message)}}))}catch(e){}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new mxEventObject("resetGraphView"))},EditorUi.prototype.setCurrentMenu=function(e,t){this.currentMenuElt=t,this.currentMenu=e},EditorUi.prototype.resetCurrentMenu=function(){this.currentMenu=this.currentMenuElt=null},EditorUi.prototype.hideCurrentMenu=function(){null!=this.currentMenu&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())},EditorUi.prototype.updateDocumentTitle=function(){var e=this.editor.getOrCreateFilename();null!=this.editor.appName&&(e+=" - "+this.editor.appName),document.title=e},EditorUi.prototype.createHoverIcons=function(){return new HoverIcons(this.editor.graph)},EditorUi.prototype.redo=function(){try{this.editor.graph.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch(e){}},EditorUi.prototype.undo=function(){try{var e=this.editor.graph;if(e.isEditing()){var t=e.cellEditor.textarea.innerHTML;document.execCommand("undo",!1,null),t==e.cellEditor.textarea.innerHTML&&(e.stopEditing(!0),this.editor.undoManager.undo())}else this.editor.undoManager.undo()}catch(n){}},EditorUi.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()},EditorUi.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()},EditorUi.prototype.getEditBlankXml=function(){return mxUtils.getXml(this.editor.getGraphXml())},EditorUi.prototype.getUrl=function(e){e=null!=e?e:window.location.pathname;var t=0<e.indexOf("?")?1:0,n;for(n in urlParams)e=0==t?e+"?":e+"&",e+=n+"="+urlParams[n],t++;return e},EditorUi.prototype.setScrollbars=function(e){var t=this.editor.graph,n=t.container.style.overflow;t.scrollbars=e,this.editor.updateGraphComponents(),n!=t.container.style.overflow&&("hidden"==t.container.style.overflow?(e=t.view.translate,t.view.setTranslate(e.x-t.container.scrollLeft/t.view.scale,e.y-t.container.scrollTop/t.view.scale),t.container.scrollLeft=0,t.container.scrollTop=0,t.minimumGraphSize=null,t.sizeDidChange()):(e=t.view.translate.x,n=t.view.translate.y,t.view.translate.x=0,t.view.translate.y=0,t.sizeDidChange(),t.container.scrollLeft-=Math.round(e*t.view.scale),t.container.scrollTop-=Math.round(n*t.view.scale))),this.fireEvent(new mxEventObject("scrollbarsChanged"))},EditorUi.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars},EditorUi.prototype.resetScrollbars=function(){var e=this.editor.graph;if(!this.editor.extendCanvas)e.container.scrollTop=0,e.container.scrollLeft=0,mxUtils.hasScrollbars(e.container)||e.view.setTranslate(0,0);else if(!this.editor.isChromelessView())if(mxUtils.hasScrollbars(e.container))if(e.pageVisible){var t=e.getPagePadding();e.container.scrollTop=Math.floor(t.y-this.editor.initialTopSpacing)-1,e.container.scrollLeft=Math.floor(Math.min(t.x,(e.container.scrollWidth-e.container.clientWidth)/2))-1,t=e.getGraphBounds(),0<t.width&&0<t.height&&(t.x>e.container.scrollLeft+.9*e.container.clientWidth&&(e.container.scrollLeft=Math.min(t.x+t.width-e.container.clientWidth,t.x-10)),t.y>e.container.scrollTop+.9*e.container.clientHeight&&(e.container.scrollTop=Math.min(t.y+t.height-e.container.clientHeight,t.y-10)))}else{var t=e.getGraphBounds(),n=Math.max(t.width,e.scrollTileSize.width*e.view.scale);e.container.scrollTop=Math.floor(Math.max(0,t.y-Math.max(20,(e.container.clientHeight-Math.max(t.height,e.scrollTileSize.height*e.view.scale))/4))),e.container.scrollLeft=Math.floor(Math.max(0,t.x-Math.max(0,(e.container.clientWidth-n)/2)))}else e.pageVisible?(t=e.view.getBackgroundPageBounds(),e.view.setTranslate(Math.floor(Math.max(0,(e.container.clientWidth-t.width)/2)-t.x),Math.floor(Math.max(0,(e.container.clientHeight-t.height)/2)-t.y))):(t=e.getGraphBounds(),e.view.setTranslate(Math.floor(Math.max(0,Math.max(0,(e.container.clientWidth-t.width)/2)-t.x)),Math.floor(Math.max(0,Math.max(20,(e.container.clientHeight-t.height)/4))-t.y)))},EditorUi.prototype.setPageVisible=function(e){var t=this.editor.graph,n=mxUtils.hasScrollbars(t.container),r=0,i=0;n&&(r=t.view.translate.x*t.view.scale-t.container.scrollLeft,i=t.view.translate.y*t.view.scale-t.container.scrollTop),t.pageVisible=e,t.pageBreaksVisible=e,t.preferPageSize=e,t.view.validateBackground(),n&&(e=t.getSelectionCells(),t.clearSelection(),t.setSelectionCells(e)),t.sizeDidChange(),n&&(t.container.scrollLeft=t.view.translate.x*t.view.scale-r,t.container.scrollTop=t.view.translate.y*t.view.scale-i),this.fireEvent(new mxEventObject("pageViewChanged"))},ChangePageSetup.prototype.execute=function(){var e=this.ui.editor.graph;if(!this.ignoreColor){this.color=this.previousColor;var t=e.background;this.ui.setBackgroundColor(this.previousColor),this.previousColor=t}this.ignoreImage||(this.image=this.previousImage,t=e.backgroundImage,this.ui.setBackgroundImage(this.previousImage),this.previousImage=t),null!=this.previousFormat&&(this.format=this.previousFormat,t=e.pageFormat,this.previousFormat.width!=t.width||this.previousFormat.height!=t.height)&&(this.ui.setPageFormat(this.previousFormat),this.previousFormat=t),null!=this.foldingEnabled&&this.foldingEnabled!=this.ui.editor.graph.foldingEnabled&&(this.ui.setFoldingEnabled(this.foldingEnabled),this.foldingEnabled=!this.foldingEnabled)},function(){var e=new mxObjectCodec(new ChangePageSetup,["ui","previousColor","previousImage","previousFormat"]);e.afterDecode=function(e,t,n){return n.previousColor=n.color,n.previousImage=n.image,n.previousFormat=n.format,null!=n.foldingEnabled&&(n.foldingEnabled=!n.foldingEnabled),n},mxCodecRegistry.register(e)}(),EditorUi.prototype.setBackgroundColor=function(e){this.editor.graph.background=e,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("backgroundColorChanged"))},EditorUi.prototype.setFoldingEnabled=function(e){this.editor.graph.foldingEnabled=e,this.editor.graph.view.revalidate(),this.fireEvent(new mxEventObject("foldingEnabledChanged"))},EditorUi.prototype.setPageFormat=function(e){this.editor.graph.pageFormat=e,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject("pageFormatChanged"))},EditorUi.prototype.setPageScale=function(e){this.editor.graph.pageScale=e,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject("pageScaleChanged"))},EditorUi.prototype.setGridColor=function(e){this.editor.graph.view.gridColor=e,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("gridColorChanged"))},EditorUi.prototype.addUndoListener=function(){var e=this.actions.get("undo"),t=this.actions.get("redo"),n=this.editor.undoManager,r=mxUtils.bind(this,function(){e.setEnabled(this.canUndo()),t.setEnabled(this.canRedo())});n.addListener(mxEvent.ADD,r),n.addListener(mxEvent.UNDO,r),n.addListener(mxEvent.REDO,r),n.addListener(mxEvent.CLEAR,r);var i=this.editor.graph.cellEditor.startEditing;this.editor.graph.cellEditor.startEditing=function(){i.apply(this,arguments),r()};var s=this.editor.graph.cellEditor.stopEditing;this.editor.graph.cellEditor.stopEditing=function(e,t){s.apply(this,arguments),r()},r()},EditorUi.prototype.updateActionStates=function(){var e=this.editor.graph,t=!e.isSelectionEmpty(),n=!1,r=!1,i=e.getSelectionCells();if(null!=i)for(var s=0;s<i.length;s++){var o=i[s];e.getModel().isEdge(o)&&(r=!0),e.getModel().isVertex(o)&&(n=!0);if(r&&n)break}i="cut copy bold italic underline delete duplicate editStyle editTooltip editLink backgroundColor borderColor edit toFront toBack lockUnlock solid dashed pasteSize dotted fillColor gradientColor shadow fontColor formattedText rounded toggleRounded sharp strokeColor".split(" ");for(s=0;s<i.length;s++)this.actions.get(i[s]).setEnabled(t);this.actions.get("setAsDefaultStyle").setEnabled(1==e.getSelectionCount()),this.actions.get("clearWaypoints").setEnabled(!e.isSelectionEmpty()),this.actions.get("copySize").setEnabled(1==e.getSelectionCount()),this.actions.get("turn").setEnabled(!e.isSelectionEmpty()),this.actions.get("curved").setEnabled(r),this.actions.get("rotation").setEnabled(n),this.actions.get("wordWrap").setEnabled(n),this.actions.get("autosize").setEnabled(n),r=n&&1==e.getSelectionCount(),this.actions.get("group").setEnabled(1<e.getSelectionCount()||r&&!e.isContainer(e.getSelectionCell())),this.actions.get("ungroup").setEnabled(1==e.getSelectionCount()&&(0<e.getModel().getChildCount(e.getSelectionCell())||r&&e.isContainer(e.getSelectionCell()))),this.actions.get("removeFromGroup").setEnabled(r&&e.getModel().isVertex(e.getModel().getParent(e.getSelectionCell()))),e.view.getState(e.getSelectionCell()),this.menus.get("navigation").setEnabled(t||null!=e.view.currentRoot),this.actions.get("collapsible").setEnabled(n&&(e.isContainer(e.getSelectionCell())||0<e.model.getChildCount(e.getSelectionCell()))),this.actions.get("home").setEnabled(null!=e.view.currentRoot),this.actions.get("exitGroup").setEnabled(null!=e.view.currentRoot),this.actions.get("enterGroup").setEnabled(1==e.getSelectionCount()&&e.isValidRoot(e.getSelectionCell())),t=1==e.getSelectionCount()&&e.isCellFoldable(e.getSelectionCell()),this.actions.get("expand").setEnabled(t),this.actions.get("collapse").setEnabled(t),this.actions.get("editLink").setEnabled(1==e.getSelectionCount()),this.actions.get("openLink").setEnabled(1==e.getSelectionCount()&&null!=e.getLinkForCell(e.getSelectionCell())),this.actions.get("guides").setEnabled(e.isEnabled()),this.actions.get("grid").setEnabled(!this.editor.chromeless||this.editor.editable),t=e.isEnabled()&&!e.isCellLocked(e.getDefaultParent()),this.menus.get("layout").setEnabled(t),this.menus.get("insert").setEnabled(t),this.menus.get("direction").setEnabled(t&&n),this.menus.get("align").setEnabled(t&&n&&1<e.getSelectionCount()),this.menus.get("distribute").setEnabled(t&&n&&1<e.getSelectionCount()),this.actions.get("selectVertices").setEnabled(t),this.actions.get("selectEdges").setEnabled(t),this.actions.get("selectAll").setEnabled(t),this.actions.get("selectNone").setEnabled(t),this.updatePasteActionStates()},EditorUi.prototype.refresh=function(e){e=null!=e?e:!0;var t=mxClient.IS_IE&&(null==document.documentMode||5==document.documentMode),n=this.container.clientWidth,r=this.container.clientHeight;this.container==document.body&&(n=document.body.clientWidth||document.documentElement.clientWidth,r=t?document.body.clientHeight||document.documentElement.clientHeight:document.documentElement.clientHeight);var i=0;mxClient.IS_IOS&&!window.navigator.standalone&&window.innerHeight!=document.documentElement.clientHeight&&(i=document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0));var s=Math.max(0,Math.min(this.hsplitPosition,n-this.splitSize-20)),o=0;null!=this.menubar&&(this.menubarContainer.style.height=this.menubarHeight+"px",o+=this.menubarHeight),null!=this.toolbar&&(this.toolbarContainer.style.top=this.menubarHeight+"px",this.toolbarContainer.style.height=this.toolbarHeight+"px",o+=this.toolbarHeight),0<o&&!mxClient.IS_QUIRKS&&(o+=1);var u=0;if(null!=this.sidebarFooterContainer){var a=this.footerHeight+i,u=Math.max(0,Math.min(r-o-a,this.sidebarFooterHeight));this.sidebarFooterContainer.style.width=s+"px",this.sidebarFooterContainer.style.height=u+"px",this.sidebarFooterContainer.style.bottom=a+"px"}a=null!=this.format?this.formatWidth:0,this.sidebarContainer.style.top=o+"px",this.sidebarContainer.style.width=s+"px",this.formatContainer.style.top=o+"px",this.formatContainer.style.width=a+"px",this.formatContainer.style.display=null!=this.format?"":"none",this.diagramContainer.style.left=null!=this.hsplit.parentNode?s+this.splitSize+"px":"0px",this.diagramContainer.style.top=this.sidebarContainer.style.top,this.footerContainer.style.height=this.footerHeight+"px",this.hsplit.style.top=this.sidebarContainer.style.top,this.hsplit.style.bottom=this.footerHeight+i+"px",this.hsplit.style.left=s+"px",this.footerContainer.style.display=0==this.footerHeight?"none":"",null!=this.tabContainer&&(this.tabContainer.style.left=this.diagramContainer.style.left),t?(this.menubarContainer.style.width=n+"px",this.toolbarContainer.style.width=this.menubarContainer.style.width,t=Math.max(0,r-this.footerHeight-this.menubarHeight-this.toolbarHeight),this.sidebarContainer.style.height=t-u+"px",this.formatContainer.style.height=t+"px",this.diagramContainer.style.width=null!=this.hsplit.parentNode?Math.max(0,n-s-this.splitSize-a)+"px":n+"px",this.footerContainer.style.width=this.menubarContainer.style.width,u=Math.max(0,r-this.footerHeight-this.menubarHeight-this.toolbarHeight),null!=this.tabContainer&&(this.tabContainer.style.width=this.diagramContainer.style.width,this.tabContainer.style.bottom=this.footerHeight+i+"px",u-=this.tabContainer.clientHeight),this.diagramContainer.style.height=u+"px",this.hsplit.style.height=u+"px"):(0<this.footerHeight&&(this.footerContainer.style.bottom=i+"px"),this.diagramContainer.style.right=a+"px",n=0,null!=this.tabContainer&&(this.tabContainer.style.bottom=this.footerHeight+i+"px",this.tabContainer.style.right=this.diagramContainer.style.right,n=this.tabContainer.clientHeight),this.sidebarContainer.style.bottom=this.footerHeight+u+i+"px",this.formatContainer.style.bottom=this.footerHeight+i+"px",this.diagramContainer.style.bottom=this.footerHeight+i+n+"px"),e&&this.editor.graph.sizeDidChange()},EditorUi.prototype.createTabContainer=function(){return null},EditorUi.prototype.createDivs=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.hsplit.setAttribute("title",mxResources.get("collapseExpand")),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(null!=this.format?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=mxPopupMenu.prototype.zIndex-2,this.hsplit.style.width=this.splitSize+"px";if(this.sidebarFooterContainer=this.createSidebarFooterContainer())this.sidebarFooterContainer.style.left="0px";this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()},EditorUi.prototype.createSidebarFooterContainer=function(){return null},EditorUi.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),null!=this.menubar&&this.menubarContainer.appendChild(this.menubar.container),null!=this.menubar&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",mxUtils.bind(this,function(){this.setStatusText(this.editor.getStatus())})),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),null!=this.sidebar&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),null!=this.format&&this.container.appendChild(this.formatContainer);var e=this.editor.chromeless?null:this.createFooter();null!=e&&(this.footerContainer.appendChild(e),this.container.appendChild(this.footerContainer)),null!=this.sidebar&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer),this.container.appendChild(this.diagramContainer),null!=this.container&&null!=this.tabContainer&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),null!=this.toolbar&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),null!=this.sidebar&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,mxUtils.bind(this,function(e){this.hsplitPosition=e,this.refresh()})))},EditorUi.prototype.createStatusContainer=function(){var e=document.createElement("a");return e.className="geItem geStatus",420>screen.width&&(e.style.maxWidth=Math.max(20,screen.width-320)+"px",e.style.overflow="hidden"),e},EditorUi.prototype.setStatusText=function(e){this.statusContainer.innerHTML=e},EditorUi.prototype.createToolbar=function(e){return new Toolbar(this,e)},EditorUi.prototype.createSidebar=function(e){return new Sidebar(this,e)},EditorUi.prototype.createFormat=function(e){return new Format(this,e)},EditorUi.prototype.createFooter=function(){return this.createDiv("geFooter")},EditorUi.prototype.createDiv=function(e){var t=document.createElement("div");return t.className=e,t},EditorUi.prototype.addSplitHandler=function(e,t,n,r){function i(e){if(null!=o){var i=new mxPoint(mxEvent.getClientX(e),mxEvent.getClientY(e));r(Math.max(0,u+(t?i.x-o.x:o.y-i.y)-n)),mxEvent.consume(e),u!=l()&&(a=!0,f=null)}}function s(e){i(e),o=u=null}var o=null,u=null,a=!0,f=null;mxClient.IS_POINTER&&(e.style.touchAction="none");var l=mxUtils.bind(this,function(){var r=parseInt(t?e.style.left:e.style.bottom);return t||(r=r+n-this.footerHeight),r});mxEvent.addGestureListeners(e,function(e){o=new mxPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)),u=l(),a=!1,mxEvent.consume(e)}),mxEvent.addListener(e,"click",mxUtils.bind(this,function(e){if(!a&&this.hsplitClickEnabled){var t=null!=f?f-n:0;f=l(),r(t),mxEvent.consume(e)}})),mxEvent.addGestureListeners(document,null,i,s),this.destroyFunctions.push(function(){mxEvent.removeGestureListeners(document,null,i,s)})},EditorUi.prototype.showDialog=function(e,t,n,r,i,s,o,u,a){this.editor.graph.tooltipHandler.hideTooltip(),null==this.dialogs&&(this.dialogs=[]),this.dialog=new Dialog(this,e,t,n,r,i,s,o,u,a),this.dialogs.push(this.dialog)},EditorUi.prototype.hideDialog=function(e,t){if(null!=this.dialogs&&0<this.dialogs.length){var n=this.dialogs.pop();0==n.close(e,t)?this.dialogs.push(n):(this.dialog=0<this.dialogs.length?this.dialogs[this.dialogs.length-1]:null,null==this.dialog&&"hidden"!=this.editor.graph.container.style.visibility&&this.editor.graph.container.focus(),mxUtils.clearSelection(),this.editor.fireEvent(new mxEventObject("hideDialog")))}},EditorUi.prototype.pickColor=function(e,t){var n=this.editor.graph,r=n.cellEditor.saveSelection(),i=226+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12)),s=new ColorDialog(this,e||"none",function(e){n.cellEditor.restoreSelection(r),t(e)},function(){n.cellEditor.restoreSelection(r)});this.showDialog(s.container,230,i,!0,!1),s.init()},EditorUi.prototype.openFile=function(){window.openFile=new OpenFile(mxUtils.bind(this,function(e){this.hideDialog(e)})),this.showDialog((new OpenDialog(this)).container,Editor.useLocalStorage?640:320,Editor.useLocalStorage?480:220,!0,!0,function(){window.openFile=null})},EditorUi.prototype.extractGraphModelFromHtml=function(e){var t=null;try{var n=e.indexOf("&lt;mxGraphModel ");if(0<=n){var r=e.lastIndexOf("&lt;/mxGraphModel&gt;");r>n&&(t=e.substring(n,r+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}}catch(i){}return t},EditorUi.prototype.extractGraphModelFromEvent=function(e){var t=null,n=null;return null!=e&&(e=null!=e.dataTransfer?e.dataTransfer:e.clipboardData,null!=e&&(10==document.documentMode||11==document.documentMode?n=e.getData("Text"):(n=0<=mxUtils.indexOf(e.types,"text/html")?e.getData("text/html"):null,mxUtils.indexOf(e.types,null==n||0==n.length)&&(n=e.getData("text/plain"))),null!=n&&(n=this.editor.graph.zapGremlins(mxUtils.trim(n)),e=this.extractGraphModelFromHtml(n),null!=e&&(n=e)))),null!=n&&this.isCompatibleString(n)&&(t=n),t},EditorUi.prototype.isCompatibleString=function(e){return!1},EditorUi.prototype.saveFile=function(e){e||null==this.editor.filename?(e=new FilenameDialog(this,this.editor.getOrCreateFilename(),mxResources.get("save"),mxUtils.bind(this,function(e){this.save(e)}),null,mxUtils.bind(this,function(e){return null!=e&&0<e.length?!0:(mxUtils.confirm(mxResources.get("invalidName")),!1)})),this.showDialog(e.container,300,100,!0,!0),e.init()):this.save(this.editor.getOrCreateFilename())},EditorUi.prototype.save=function(e){if(null!=e){this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var t=mxUtils.getXml(this.editor.getGraphXml());try{if(Editor.useLocalStorage){if(null!=localStorage.getItem(e)&&!mxUtils.confirm(mxResources.get("replaceIt",[e])))return;localStorage.setItem(e,t),this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("saved"))+" "+new Date)}else{if(!(t.length<MAX_REQUEST_SIZE)){mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(t);return}(new mxXmlRequest(SAVE_URL,"filename="+encodeURIComponent(e)+"&xml="+encodeURIComponent(t))).simulate(document,"_blank")}this.editor.setModified(!1),this.editor.setFilename(e),this.updateDocumentTitle()}catch(n){this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("errorSavingFile")))}}},EditorUi.prototype.executeLayout=function(e,t,n){var r=this.editor.graph;if(r.isEnabled()){r.getModel().beginUpdate();try{e()}catch(i){throw i}finally{this.allowAnimation&&t&&0>navigator.userAgent.indexOf("Camino")?(e=new mxMorphing(r),e.addListener(mxEvent.DONE,mxUtils.bind(this,function(){r.getModel().endUpdate(),null!=n&&n()})),e.startAnimation()):(r.getModel().endUpdate(),null!=n&&n())}}},EditorUi.prototype.showImageDialog=function(e,t,n,r){r=this.editor.graph.cellEditor;var i=r.saveSelection(),s=mxUtils.prompt(e,t);r.restoreSelection(i);if(null!=s&&0<s.length){var o=new Image;o.onload=function(){n(s,o.width,o.height)},o.onerror=function(){n(null),mxUtils.alert(mxResources.get("fileNotFound"))},o.src=s}else n(null)},EditorUi.prototype.showLinkDialog=function(e,t,n){e=new LinkDialog(this,e,t,n),this.showDialog(e.container,420,90,!0,!0),e.init()},EditorUi.prototype.showDataDialog=function(e){null!=e&&(e=new EditDataDialog(this,e),this.showDialog(e.container,340,340,!0,!1,null,!1),e.init())},EditorUi.prototype.showBackgroundImageDialog=function(e){e=null!=e?e:mxUtils.bind(this,function(e){e=new ChangePageSetup(this,null,e),e.ignoreColor=!0,this.editor.graph.model.execute(e)});var t=mxUtils.prompt(mxResources.get("backgroundImage"),"");if(null!=t&&0<t.length){var n=new Image;n.onload=function(){e(new mxImage(t,n.width,n.height))},n.onerror=function(){e(null),mxUtils.alert(mxResources.get("fileNotFound"))},n.src=t}else e(null)},EditorUi.prototype.setBackgroundImage=function(e){this.editor.graph.setBackgroundImage(e),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new mxEventObject("backgroundImageChanged"))},EditorUi.prototype.confirm=function(e,t,n){mxUtils.confirm(e)?null!=t&&t():null!=n&&n()},EditorUi.prototype.createOutline=function(e){var t=new mxOutline(this.editor.graph);return t.border=20,mxEvent.addListener(window,"resize",function(){t.update()}),this.addListener("pageFormatChanged",function(){t.update()}),t},EditorUi.prototype.altShiftActions={67:"clearWaypoints",65:"connectionArrows",76:"editLink",80:"connectionPoints",84:"editTooltip",86:"pasteSize",88:"copySize"},EditorUi.prototype.createKeyHandler=function(e){function t(e,t,n){o.push(function(){if(!r.isSelectionEmpty()&&r.isEnabled())if(t=null!=t?t:1,n){r.getModel().beginUpdate();try{for(var i=r.getSelectionCells(),s=0;s<i.length;s++)if(r.getModel().isVertex(i[s])&&r.isCellResizable(i[s])){var o=r.getCellGeometry(i[s]);null!=o&&(o=o.clone(),37==e?o.width=Math.max(0,o.width-t):38==e?o.height=Math.max(0,o.height-t):39==e?o.width+=t:40==e&&(o.height+=t),r.getModel().setGeometry(i[s],o))}}finally{r.getModel().endUpdate()}}else i=r.getSelectionCell(),s=r.model.getParent(i),o=null,1==r.getSelectionCount()&&r.model.isVertex(i)&&null!=r.layoutManager&&!r.isCellLocked(i)&&(o=r.layoutManager.getLayout(s)),null!=o&&o.constructor==mxStackLayout?(o=s.getIndex(i),37==e||38==e?r.model.add(s,i,Math.max(0,o-1)):39!=e&&40!=e||r.model.add(s,i,Math.min(r.model.getChildCount(s),o+1))):(s=i=0,37==e?i=-t:38==e?s=-t:39==e?i=t:40==e&&(s=t),r.moveCells(r.getMovableCells(r.getSelectionCells()),i,s))}),null!=u&&window.clearTimeout(u),u=window.setTimeout(function(){if(0<o.length){r.getModel().beginUpdate();try{for(var e=0;e<o.length;e++)o[e]();o=[]}finally{r.getModel().endUpdate()}r.scrollCellToVisible(r.getSelectionCell())}},200)}var n=this,r=this.editor.graph,i=new mxKeyHandler(r),s=i.isEventIgnored;i.isEventIgnored=function(e){return(!this.isControlDown(e)||mxEvent.isShiftDown(e)||90!=e.keyCode&&89!=e.keyCode&&188!=e.keyCode&&190!=e.keyCode&&85!=e.keyCode)&&(66!=e.keyCode&&73!=e.keyCode||!this.isControlDown(e)||this.graph.cellEditor.isContentEditing()&&!mxClient.IS_FF&&!mxClient.IS_SF)&&s.apply(this,arguments)},i.isEnabledForEvent=function(e){return!mxEvent.isConsumed(e)&&this.isGraphEvent(e)&&this.isEnabled()&&(null==n.dialogs||0==n.dialogs.length)},i.isControlDown=function(e){return mxEvent.isControlDown(e)||mxClient.IS_MAC&&e.metaKey};var o=[],u=null,a={37:mxConstants.DIRECTION_WEST,38:mxConstants.DIRECTION_NORTH,39:mxConstants.DIRECTION_EAST,40:mxConstants.DIRECTION_SOUTH},f=i.getFunction;mxKeyHandler.prototype.getFunction=function(e){if(r.isEnabled()){if(mxEvent.isShiftDown(e)&&mxEvent.isAltDown(e)){var i=n.actions.get(n.altShiftActions[e.keyCode]);if(null!=i)return i.funct}if(9==e.keyCode&&mxEvent.isAltDown(e))return mxEvent.isShiftDown(e)?function(){r.selectParentCell()}:function(){r.selectChildCell()};if(null!=a[e.keyCode]&&!r.isSelectionEmpty()){if(!mxEvent.isShiftDown(e)||!mxEvent.isAltDown(e))return this.isControlDown(e)?function(){t(e.keyCode,mxEvent.isShiftDown(e)?r.gridSize:null,!0)}:function(){t(e.keyCode,mxEvent.isShiftDown(e)?r.gridSize:null)};if(r.model.isVertex(r.getSelectionCell()))return function(){var t=r.connectVertex(r.getSelectionCell(),a[e.keyCode],r.defaultEdgeLength,e,!0);null!=t&&0<t.length&&(1==t.length&&r.model.isEdge(t[0])?r.setSelectionCell(r.model.getTerminal(t[0],!1)):r.setSelectionCell(t[t.length-1]),r.scrollCellToVisible(r.getSelectionCell()),null!=n.hoverIcons&&n.hoverIcons.update(r.view.getState(r.getSelectionCell())))}}}return f.apply(this,arguments)},i.bindAction=mxUtils.bind(this,function(e,t,n,r){var s=this.actions.get(n);null!=s&&(n=function(){s.isEnabled()&&s.funct()},t?r?i.bindControlShiftKey(e,n):i.bindControlKey(e,n):r?i.bindShiftKey(e,n):i.bindKey(e,n))});var l=i.escape;i.escape=function(e){l.apply(this,arguments)},i.enter=function(){},i.bindControlShiftKey(36,function(){r.exitGroup()}),i.bindControlShiftKey(35,function(){r.enterGroup()}),i.bindKey(36,function(){r.home()}),i.bindKey(35,function(){r.refresh()}),i.bindAction(107,!0,"zoomIn"),i.bindAction(109,!0,"zoomOut"),i.bindAction(80,!0,"print"),i.bindAction(79,!0,"outline",!0),i.bindAction(112,!1,"about");if(!this.editor.chromeless||this.editor.editable)i.bindControlKey(36,function(){r.isEnabled()&&r.foldCells(!0)}),i.bindControlKey(35,function(){r.isEnabled()&&r.foldCells(!1)}),i.bindControlKey(13,function(){r.isEnabled()&&r.setSelectionCells(r.duplicateCells(r.getSelectionCells(),!1))}),i.bindAction(8,!1,"delete"),i.bindAction(8,!0,"deleteAll"),i.bindAction(46,!1,"delete"),i.bindAction(46,!0,"deleteAll"),i.bindAction(72,!0,"resetView"),i.bindAction(72,!0,"fitWindow",!0),i.bindAction(74,!0,"fitPage"),i.bindAction(74,!0,"fitTwoPages",!0),i.bindAction(48,!0,"customZoom"),i.bindAction(82,!0,"turn"),i.bindAction(82,!0,"clearDefaultStyle",!0),i.bindAction(83,!0,"save"),i.bindAction(83,!0,"saveAs",!0),i.bindAction(65,!0,"selectAll"),i.bindAction(65,!0,"selectNone",!0),i.bindAction(73,!0,"selectVertices",!0),i.bindAction(69,!0,"selectEdges",!0),i.bindAction(69,!0,"editStyle"),i.bindAction(66,!0,"bold"),i.bindAction(66,!0,"toBack",!0),i.bindAction(70,!0,"toFront",!0),i.bindAction(68,!0,"duplicate"),i.bindAction(68,!0,"setAsDefaultStyle",!0),i.bindAction(90,!0,"undo"),i.bindAction(89,!0,"autosize",!0),i.bindAction(88,!0,"cut"),i.bindAction(67,!0,"copy"),i.bindAction(86,!0,"paste"),i.bindAction(71,!0,"group"),i.bindAction(77,!0,"editData"),i.bindAction(71,!0,"grid",!0),i.bindAction(73,!0,"italic"),i.bindAction(76,!0,"lockUnlock"),i.bindAction(76,!0,"layers",!0),i.bindAction(80,!0,"formatPanel",!0),i.bindAction(85,!0,"underline"),i.bindAction(85,!0,"ungroup",!0),i.bindAction(190,!0,"superscript"),i.bindAction(188,!0,"subscript"),i.bindKey(13,function(){r.isEnabled()&&r.startEditingAtCell()}),i.bindKey(113,function(){r.isEnabled()&&r.startEditingAtCell()});return mxClient.IS_WIN?i.bindAction(89,!0,"redo"):i.bindAction(90,!0,"redo",!0),i},EditorUi.prototype.destroy=function(){null!=this.editor&&(this.editor.destroy(),this.editor=null),null!=this.menubar&&(this.menubar.destroy(),this.menubar=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null),null!=this.sidebar&&(this.sidebar.destroy(),this.sidebar=null),null!=this.keyHandler&&(this.keyHandler.destroy(),this.keyHandler=null),null!=this.keydownHandler&&(mxEvent.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),null!=this.keyupHandler&&(mxEvent.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),null!=this.resizeHandler&&(mxEvent.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),null!=this.gestureHandler&&(mxEvent.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),null!=this.orientationChangeHandler&&(mxEvent.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),null!=this.scrollHandler&&(mxEvent.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null);if(null!=this.destroyFunctions){for(var e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions=null}for(var t=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.sidebarFooterContainer,this.layersDialog],e=0;e<t.length;e++)null!=t[e]&&null!=t[e].parentNode&&t[e].parentNode.removeChild(t[e])},"undefined"!=typeof html4&&(html4.ATTRIBS["a::target"]=0,html4.ATTRIBS["source::src"]=0,html4.ATTRIBS["video::src"]=0),mxConstants.SHADOW_OPACITY=.25,mxConstants.SHADOWCOLOR="#000000",mxConstants.VML_SHADOWCOLOR="#d0d0d0",mxGraph.prototype.pageBreakColor="#c0c0c0",mxGraph.prototype.pageScale=1,function(){try{if(null!=navigator&&null!=navigator.language){var e=navigator.language.toLowerCase();mxGraph.prototype.pageFormat="en-us"===e||"en-ca"===e||"es-mx"===e?mxConstants.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants.PAGE_FORMAT_A4_PORTRAIT}}catch(t){}}(),mxText.prototype.baseSpacingTop=5,mxText.prototype.baseSpacingBottom=1,mxGraphModel.prototype.ignoreRelativeEdgeParent=!1,mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif",mxGraphView.prototype.gridSteps=4,mxGraphView.prototype.minGridSize=4,mxGraphView.prototype.gridColor="#e0e0e0",mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]",mxShape.prototype.getConstraints=function(e,t,n){return null},Graph=function(e,t,n,r,i){mxGraph.call(this,e,t,n,r),this.themes=i||this.defaultThemes,this.currentEdgeStyle=mxUtils.clone(this.defaultEdgeStyle),this.currentVertexStyle=mxUtils.clone(this.defaultVertexStyle),e=this.baseUrl,t=e.indexOf("//"),this.domainPathUrl=this.domainUrl="",0<t&&(t=e.indexOf("/",t+2),0<t&&(this.domainUrl=e.substring(0,t)),t=e.lastIndexOf("/"),0<t&&(this.domainPathUrl=e.substring(0,t+1))),this.isHtmlLabel=function(e){var t=this.view.getState(e);return e=null!=t?t.style:this.getCellStyle(e),"1"==e.html||"wrap"==e[mxConstants.STYLE_WHITE_SPACE]};if(this.edgeMode){var s=null,o=null,u=null,a=null,f=!1;this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(e,t){if("mouseDown"==t.getProperty("eventName")&&this.isEnabled()){var n=t.getProperty("event");if(!mxEvent.isControlDown(n.getEvent())&&!mxEvent.isShiftDown(n.getEvent())){var r=n.getState();null!=r&&this.model.isEdge(r.cell)&&(s=new mxPoint(n.getGraphX(),n.getGraphY()),f=this.isCellSelected(r.cell),u=r,o=n,null!=r.text&&null!=r.text.boundingBox&&mxUtils.contains(r.text.boundingBox,n.getGraphX(),n.getGraphY())?a=mxEvent.LABEL_HANDLE:(r=this.selectionCellsHandler.getHandler(r.cell),null!=r&&null!=r.bends&&0<r.bends.length&&(a=r.getHandleForEvent(n))))}}})),this.addMouseListener({mouseDown:function(e,t){},mouseMove:mxUtils.bind(this,function(e,t){var n=this.selectionCellsHandler.handlers.map,r;for(r in n)if(null!=n[r].index)return;if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent.isControlDown(t.getEvent())&&!mxEvent.isShiftDown(t.getEvent())&&!mxEvent.isAltDown(t.getEvent()))if(r=this.tolerance,null!=s&&null!=u&&null!=o){if(n=u,Math.abs(s.x-t.getGraphX())>r||Math.abs(s.y-t.getGraphY())>r){this.isCellSelected(n.cell)||this.setSelectionCell(n.cell);var i=this.selectionCellsHandler.getHandler(n.cell);if(null!=i&&null!=i.bends&&0<i.bends.length){var l=i.getHandleForEvent(o),c=this.view.getEdgeStyle(n);r=c==mxEdgeStyle.EntityRelation,f||a!=mxEvent.LABEL_HANDLE||(l=a);if(r&&0!=l&&l!=i.bends.length-1&&l!=mxEvent.LABEL_HANDLE)!r||null==n.visibleSourceState&&null==n.visibleTargetState||(this.graphHandler.reset(),t.consume());else if(l==mxEvent.LABEL_HANDLE||0==l||null!=n.visibleSourceState||l==i.bends.length-1||null!=n.visibleTargetState)r||l==mxEvent.LABEL_HANDLE||(r=n.absolutePoints,null!=r&&(null==c&&null==l||c==mxEdgeStyle.OrthConnector)&&(l=a,null==l&&(l=new mxRectangle(s.x,s.y),l.grow(mxEdgeHandler.prototype.handleImage.width/2),mxUtils.contains(l,r[0].x,r[0].y)?l=0:mxUtils.contains(l,r[r.length-1].x,r[r.length-1].y)?l=i.bends.length-1:null!=c&&(2==r.length||3==r.length&&(0==Math.round(r[0].x-r[1].x)&&0==Math.round(r[1].x-r[2].x)||0==Math.round(r[0].y-r[1].y)&&0==Math.round(r[1].y-r[2].y)))?l=2:(l=mxUtils.findNearestSegment(n,s.x,s.y),l=null==c?mxEvent.VIRTUAL_HANDLE-l:l+1))),null==l&&(l=mxEvent.VIRTUAL_HANDLE)),i.start(t.getGraphX(),t.getGraphX(),l),a=s=o=u=null,f=!1,t.consume(),this.graphHandler.reset()}}}else if(n=t.getState(),null!=n&&this.model.isEdge(n.cell)){i=null,r=n.absolutePoints;if(null!=r)if(l=new mxRectangle(t.getGraphX(),t.getGraphY()),l.grow(mxEdgeHandler.prototype.handleImage.width/2),null!=n.text&&null!=n.text.boundingBox&&mxUtils.contains(n.text.boundingBox,t.getGraphX(),t.getGraphY()))i="move";else if(mxUtils.contains(l,r[0].x,r[0].y)||mxUtils.contains(l,r[r.length-1].x,r[r.length-1].y))i="pointer";else if(null!=n.visibleSourceState||null!=n.visibleTargetState)c=this.view.getEdgeStyle(n),i="crosshair",c!=mxEdgeStyle.EntityRelation&&this.isOrthogonal(n)&&(c=mxUtils.findNearestSegment(n,t.getGraphX(),t.getGraphY()),c<r.length-1&&0<=c&&(i=0==Math.round(r[c].x-r[c+1].x)?"col-resize":"row-resize"));null!=i&&n.setCursor(i)}}),mouseUp:mxUtils.bind(this,function(e,t){a=s=o=u=null})})}this.cellRenderer.getLabelValue=function(e){var t=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return e.view.graph.isHtmlLabel(e.cell)&&(t=1!=e.style.html?mxUtils.htmlEntities(t,!1):e.view.graph.sanitizeHtml(t)),t};if("undefined"!=typeof mxVertexHandler){this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.constrainChildren=this.resetEdgesOnConnect=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(e,t){return!1},this.alternateEdgeStyle="vertical",null==r&&this.loadStylesheet();var l=this.graphHandler.getGuideStates;this.graphHandler.getGuideStates=function(){var e=l.apply(this,arguments);if(this.graph.pageVisible){for(var t=[],n=this.graph.pageFormat,r=this.graph.pageScale,i=n.width*r,n=n.height*r,r=this.graph.view.translate,s=this.graph.view.scale,o=this.graph.getPageLayout(),u=0;u<o.width;u++)t.push(new mxRectangle(((o.x+u)*i+r.x)*s,(o.y*n+r.y)*s,i*s,n*s));for(u=0;u<o.height;u++)t.push(new mxRectangle((o.x*i+r.x)*s,((o.y+u)*n+r.y)*s,i*s,n*s));e=t.concat(e)}return e},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(e,t){return null==e.cell?"#ffa500":mxConstants.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(e){return this.previewColor="#000000"==this.graph.background?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)},this.graphHandler.getCells=function(e){for(var t=mxGraphHandler.prototype.getCells.apply(this,arguments),n=[],r=0;r<t.length;r++){var i=this.graph.view.getState(t[r]),i=null!=i?i.style:this.graph.getCellStyle(t[r]);"1"==mxUtils.getValue(i,"part","0")?(i=this.graph.model.getParent(t[r]),this.graph.model.isVertex(i)&&0>mxUtils.indexOf(t,i)&&n.push(i)):n.push(t[r])}return n},this.connectionHandler.createTargetVertex=function(e,t){var n=this.graph.view.getState(t),n=null!=n?n.style:this.graph.getCellStyle(t);return mxUtils.getValue(n,"part",!1)&&(n=this.graph.model.getParent(t),this.graph.model.isVertex(n)&&(t=n)),mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)};var c=new mxRubberband(this);this.getRubberband=function(){return c};var h=(new Date).getTime(),p=0,d=this.connectionHandler.mouseMove;this.connectionHandler.mouseMove=function(){var e=this.currentState;d.apply(this,arguments),e!=this.currentState?(h=(new Date).getTime(),p=0):p=(new Date).getTime()-h};var v=this.connectionHandler.isOutlineConnectEvent;this.connectionHandler.isOutlineConnectEvent=function(e){return null!=this.currentState&&e.getState()==this.currentState&&2e3<p||(null==this.currentState||"0"!=mxUtils.getValue(this.currentState.style,"outlineConnect","1"))&&v.apply(this,arguments)};var m=this.isToggleEvent;this.isToggleEvent=function(e){return m.apply(this,arguments)||mxEvent.isShiftDown(e)};var g=c.isForceRubberbandEvent;c.isForceRubberbandEvent=function(e){return g.apply(this,arguments)||mxUtils.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&null==e.getState()&&mxEvent.isTouchEvent(e.getEvent())};var y=null;this.panningHandler.addListener(mxEvent.PAN_START,mxUtils.bind(this,function(){this.isEnabled()&&(y=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent.PAN_END,mxUtils.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=y)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(e){return mxEvent.isMouseEvent(e.getEvent())};var b=this.click;this.click=function(e){var t=null==e.state&&null!=e.sourceState&&this.isCellLocked(e.sourceState.cell);if(this.isEnabled()&&!t||e.isConsumed())return b.apply(this,arguments);t=t?e.sourceState.cell:e.getCell(),null!=t&&(t=this.getLinkForCell(t),null!=t&&(this.isCustomLink(t)?this.customLinkClicked(t):this.openLink(t)))},this.tooltipHandler.getStateForEvent=function(e){return e.sourceState},this.getCursorForMouseEvent=function(e){var t=null==e.state&&null!=e.sourceState&&this.isCellLocked(e.sourceState.cell);return this.getCursorForCell(t?e.sourceState.cell:e.getCell())};var w=this.getCursorForCell;this.getCursorForCell=function(e){if(!this.isEnabled()||this.isCellLocked(e)){if(null!=this.getLinkForCell(e))return"pointer";if(this.isCellLocked(e))return"default"}return w.apply(this,arguments)},this.selectRegion=function(e,t){var n=this.getAllCells(e.x,e.y,e.width,e.height);return this.selectCellsForEvent(n,t),n},this.getAllCells=function(e,t,n,r,i,s){s=null!=s?s:[];if(0<n||0<r){var o=this.getModel(),u=e+n,a=t+r;null==i&&(i=this.getCurrentRoot(),null==i&&(i=o.getRoot()));if(null!=i)for(var f=o.getChildCount(i),l=0;l<f;l++){var c=o.getChildAt(i,l),h=this.view.getState(c);if(null!=h&&this.isCellVisible(c)&&"1"!=mxUtils.getValue(h.style,"locked","0")){var p=mxUtils.getValue(h.style,mxConstants.STYLE_ROTATION)||0;0!=p&&(h=mxUtils.getBoundingBox(h,p)),(o.isEdge(c)||o.isVertex(c))&&h.x>=e&&h.y+h.height<=a&&h.y>=t&&h.x+h.width<=u&&s.push(c),this.getAllCells(e,t,n,r,c,s)}}}return s};var E=this.graphHandler.shouldRemoveCellsFromParent;this.graphHandler.shouldRemoveCellsFromParent=function(e,t,n){return this.graph.isCellSelected(e)?!1:E.apply(this,arguments)},this.isCellLocked=function(e){for(e=this.view.getState(e);null!=e;){if("1"==mxUtils.getValue(e.style,"locked","0"))return!0;e=this.view.getState(this.model.getParent(e.cell))}return!1};var S=null;this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(e,t){if("mouseDown"==t.getProperty("eventName")){var n=t.getProperty("event").getState();S=null==n||this.isSelectionEmpty()||this.isCellSelected(n.cell)?null:this.getSelectionCells()}})),this.addListener(mxEvent.TAP_AND_HOLD,mxUtils.bind(this,function(e,t){if(!mxEvent.isMultiTouchEvent(t)){var n=t.getProperty("event"),r=t.getProperty("cell");null==r?(n=mxUtils.convertPoint(this.container,mxEvent.getClientX(n),mxEvent.getClientY(n)),c.start(n.x,n.y)):null!=S?this.addSelectionCells(S):1<this.getSelectionCount()&&this.isCellSelected(r)&&this.removeSelectionCell(r),S=null,t.consume()}})),this.connectionHandler.selectCells=function(e,t){this.graph.setSelectionCell(t||e)},this.connectionHandler.constraintHandler.isStateIgnored=function(e,t){return t&&e.view.graph.isCellSelected(e.cell)},this.selectionModel.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){var e=this.connectionHandler.constraintHandler;null!=e.currentFocus&&e.isStateIgnored(e.currentFocus,!0)&&(e.currentFocus=null,e.constraints=null,e.destroyIcons()),e.destroyFocusHighlight()})),Graph.touchStyle&&this.initTouch();var x=this.updateMouseEvent;this.updateMouseEvent=function(e){return e=x.apply(this,arguments),null!=e.state&&this.isCellLocked(e.getCell())&&(e.state=null),e}}this.currentTranslate=new mxPoint(0,0)},Graph.touchStyle=mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||null==window.urlParams||"1"==urlParams.touch,Graph.fileSupport=null!=window.File&&null!=window.FileReader&&null!=window.FileList&&(null==window.urlParams||"0"!=urlParams.filesupport),Graph.lineJumpsEnabled=!0,Graph.defaultJumpSize=6,Graph.createSvgImage=function(e,t,n){return n=unescape(encodeURIComponent('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+e+'px" height="'+t+'px" version="1.1">'+n+"</svg>")),new mxImage("data:image/svg+xml;base64,"+(window.btoa?btoa(n):Base64.encode(n,!0)),e,t)},mxUtils.extend(Graph,mxGraph),Graph.prototype.minFitScale=null,Graph.prototype.maxFitScale=null,Graph.prototype.linkPolicy="frame"==urlParams.target?"blank":urlParams.target||"auto",Graph.prototype.linkTarget="frame"==urlParams.target?"_self":"_blank",Graph.prototype.linkRelation="nofollow noopener noreferrer",Graph.prototype.defaultScrollbars=!mxClient.IS_IOS,Graph.prototype.defaultPageVisible=!0,Graph.prototype.lightbox=!1,Graph.prototype.defaultPageBackgroundColor="#ffffff",Graph.prototype.defaultPageBorderColor="#ffffff",Graph.prototype.scrollTileSize=new mxRectangle(0,0,400,400),Graph.prototype.transparentBackground=!0,Graph.prototype.defaultEdgeLength=80,Graph.prototype.edgeMode=!1,Graph.prototype.connectionArrowsEnabled=!0,Graph.prototype.placeholderPattern=RegExp("%(date{.*}|[^%^{^}]+)%","g"),Graph.prototype.absoluteUrlPattern=/^(?:[a-z]+:)?\/\//i,Graph.prototype.defaultThemeName="default",Graph.prototype.defaultThemes={},Graph.prototype.baseUrl=null!=urlParams.base?decodeURIComponent(urlParams.base):(window!=window.top?document.referrer:document.location.toString()).split("#")[0],Graph.prototype.editAfterInsert=!1,Graph.prototype.builtInProperties=["label","tooltip","placeholders","placeholder"],Graph.prototype.init=function(e){mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(e,t){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);var n=e.view.graph.tolerance,r=!0,i=null,s=mxUtils.bind(this,function(e){r=!0,i=new mxPoint(mxEvent.getClientX(e),mxEvent.getClientY(e))}),o=mxUtils.bind(this,function(e){r=r&&null!=i&&Math.abs(i.x-mxEvent.getClientX(e))<n&&Math.abs(i.y-mxEvent.getClientY(e))<n}),u=mxUtils.bind(this,function(n){if(r)for(var i=mxEvent.getSource(n);null!=i&&i!=t.node;){if("a"==i.nodeName.toLowerCase()){e.view.graph.labelLinkClicked(e,i,n);break}i=i.parentNode}});mxEvent.addGestureListeners(t.node,s,o,u),mxEvent.addListener(t.node,"click",function(e){mxEvent.consume(e)})},this.initLayoutManager()},function(){Graph.prototype.useCssTransforms=!1,Graph.prototype.currentScale=1,Graph.prototype.currentTranslate=new mxPoint(0,0),Graph.prototype.isCssTransformsSupported=function(){return this.dialect==mxConstants.DIALECT_SVG&&!mxClient.NO_FO},Graph.prototype.getCellAt=function(e,t,n,r,i,s){return this.useCssTransforms&&(e=e/this.currentScale-this.currentTranslate.x,t=t/this.currentScale-this.currentTranslate.y),this.getScaledCellAt.apply(this,arguments)},Graph.prototype.getScaledCellAt=function(e,t,n,r,i,s){r=null!=r?r:!0,i=null!=i?i:!0,null==n&&(n=this.getCurrentRoot(),null==n&&(n=this.getModel().getRoot()));if(null!=n)for(var o=this.model.getChildCount(n)-1;0<=o;o--){var u=this.model.getChildAt(n,o),a=this.getScaledCellAt(e,t,u,r,i,s);if(null!=a)return a;if(this.isCellVisible(u)&&(i&&this.model.isEdge(u)||r&&this.model.isVertex(u))&&(a=this.view.getState(u),null!=a&&(null==s||!s(a,e,t))&&this.intersects(a,e,t)))return u}return null},mxCellHighlight.prototype.getStrokeWidth=function(e){return e=this.strokeWidth,this.graph.useCssTransforms&&(e/=this.graph.currentScale),e},mxGraphView.prototype.getGraphBounds=function(){var e=this.graphBounds;if(this.graph.useCssTransforms)var t=this.graph.currentTranslate,n=this.graph.currentScale,e=new mxRectangle((e.x+t.x)*n,(e.y+t.y)*n,e.width*n,e.height*n);return e},mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?this.validate():this.revalidate(),this.graph.sizeDidChange()};var e=mxGraphView.prototype.validate;mxGraphView.prototype.validate=function(t){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0),e.apply(this,arguments),this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)},Graph.prototype.updateCssTransform=function(){var e=this.view.getDrawPane();if(null!=e)if(e=e.parentNode,this.useCssTransforms){var t=e.getAttribute("transform");e.setAttribute("transformOrigin","0 0"),e.setAttribute("transform","scale("+this.currentScale+","+this.currentScale+")translate("+this.currentTranslate.x+","+this.currentTranslate.y+")");if(t!=e.getAttribute("transform"))try{if(mxClient.IS_EDGE){var n=e.style.display;e.style.display="none",e.getBBox(),e.style.display=n}}catch(r){}}else e.removeAttribute("transformOrigin"),e.removeAttribute("transform")};var t=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function(){var e=this.graph.useCssTransforms,n=this.scale,r=this.translate;e&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate),t.apply(this,arguments),e&&(this.scale=n,this.translate=r)};var n=mxGraph.prototype.updatePageBreaks;mxGraph.prototype.updatePageBreaks=function(e,t,r){var i=this.useCssTransforms,s=this.view.scale,o=this.view.translate;i&&(this.view.scale=1,this.view.translate=new mxPoint(0,0),this.useCssTransforms=!1),n.apply(this,arguments),i&&(this.view.scale=s,this.view.translate=o,this.useCssTransforms=!0)}}(),Graph.prototype.isLightboxView=function(){return this.lightbox},Graph.prototype.labelLinkClicked=function(e,t,n){t=t.getAttribute("href");if(null!=t&&!this.isCustomLink(t)&&mxEvent.isLeftMouseButton(n)&&!mxEvent.isPopupTrigger(n)||mxEvent.isTouchEvent(n)){if(!this.isEnabled()||this.isCellLocked(e.cell))e=this.isBlankLink(t)?this.linkTarget:"_top",this.openLink(this.getAbsoluteUrl(t),e);mxEvent.consume(n)}},Graph.prototype.openLink=function(e,t,n){var r=window;return"_self"==t&&window!=window.top?window.location.href=e:e.substring(0,this.baseUrl.length)==this.baseUrl&&"#"==e.charAt(this.baseUrl.length)&&"_top"==t&&window==window.top?(e=e.split("#")[1],window.location.hash=="#"+e&&(window.location.hash=""),window.location.hash=e):(r=window.open(e,t),null==r||n||(r.opener=null)),r},Graph.prototype.getLinkTitle=function(e){return e.substring(e.lastIndexOf("/")+1)},Graph.prototype.isCustomLink=function(e){return"data:"==e.substring(0,5)},Graph.prototype.customLinkClicked=function(e){return!1},Graph.prototype.isExternalProtocol=function(e){return"mailto:"===e.substring(0,7)},Graph.prototype.isBlankLink=function(e){return!this.isExternalProtocol(e)&&("blank"===this.linkPolicy||"self"!==this.linkPolicy&&!this.isRelativeUrl(e)&&e.substring(0,this.domainUrl.length)!==this.domainUrl)},Graph.prototype.isRelativeUrl=function(e){return null!=e&&!this.absoluteUrlPattern.test(e)&&"data:"!==e.substring(0,5)&&!this.isExternalProtocol(e)},Graph.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.getLayout=function(e){var t=this.graph.view.getState(e);e=null!=t?t.style:this.graph.getCellStyle(e);if(null!=e){if("stackLayout"==e.childLayout)return t=new mxStackLayout(this.graph,!0),t.resizeParentMax="1"==mxUtils.getValue(e,"resizeParentMax","1"),t.horizontal="1"==mxUtils.getValue(e,"horizontalStack","1"),t.resizeParent="1"==mxUtils.getValue(e,"resizeParent","1"),t.resizeLast="1"==mxUtils.getValue(e,"resizeLast","0"),t.spacing=e.stackSpacing||t.spacing,t.border=e.stackBorder||t.border,t.marginLeft=e.marginLeft||0,t.marginRight=e.marginRight||0,t.marginTop=e.marginTop||0,t.marginBottom=e.marginBottom||0,t.fill=!0,t;if("treeLayout"==e.childLayout)return t=new mxCompactTreeLayout(this.graph),t.horizontal="1"==mxUtils.getValue(e,"horizontalTree","1"),t.resizeParent="1"==mxUtils.getValue(e,"resizeParent","1"),t.groupPadding=mxUtils.getValue(e,"parentPadding",20),t.levelDistance=mxUtils.getValue(e,"treeLevelDistance",30),t.maintainParentLocation=!0,t.edgeRouting=!1,t.resetEdges=!1,t;if("flowLayout"==e.childLayout)return t=new mxHierarchicalLayout(this.graph,mxUtils.getValue(e,"flowOrientation",mxConstants.DIRECTION_EAST)),t.resizeParent="1"==mxUtils.getValue(e,"resizeParent","1"),t.parentBorder=mxUtils.getValue(e,"parentPadding",20),t.maintainParentLocation=!0,t.intraCellSpacing=mxUtils.getValue(e,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),t.interRankCellSpacing=mxUtils.getValue(e,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),t.interHierarchySpacing=mxUtils.getValue(e,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),t.parallelEdgeSpacing=mxUtils.getValue(e,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),t}return null}},Graph.prototype.getPageSize=function(){return this.pageVisible?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize},Graph.prototype.getPageLayout=function(){var e=this.getPageSize(),t=this.getGraphBounds();if(0==t.width||0==t.height)return new mxRectangle(0,0,1,1);var n=Math.ceil(t.x/this.view.scale-this.view.translate.x),r=Math.ceil(t.y/this.view.scale-this.view.translate.y),i=Math.floor(n/e.width),s=Math.floor(r/e.height);return new mxRectangle(i,s,Math.ceil((n+Math.floor(t.width/this.view.scale))/e.width)-i,Math.ceil((r+Math.floor(t.height/this.view.scale))/e.height)-s)},Graph.prototype.sanitizeHtml=function(e,t){return html_sanitize(e,function(e){return null!=e&&"javascript:"!==e.toString().toLowerCase().substring(0,11)?e:null},function(e){return e})},Graph.prototype.updatePlaceholders=function(){var e=!1,t;for(t in this.model.cells){var n=this.model.cells[t];this.isReplacePlaceholders(n)&&(this.view.invalidate(n,!1,!1),e=!0)}e&&this.view.validate()},Graph.prototype.isReplacePlaceholders=function(e){return null!=e.value&&"object"==typeof e.value&&"1"==e.value.getAttribute("placeholders")},Graph.prototype.isZoomWheelEvent=function(e){return mxEvent.isAltDown(e)||mxEvent.isMetaDown(e)&&mxClient.IS_MAC||mxEvent.isControlDown(e)&&!mxClient.IS_MAC},Graph.prototype.isTransparentClickEvent=function(e){return mxEvent.isAltDown(e)},Graph.prototype.isIgnoreTerminalEvent=function(e){return mxEvent.isShiftDown(e)&&mxEvent.isControlDown(e)},Graph.prototype.isSplitTarget=function(e,t,n){return!this.model.isEdge(t[0])&&!mxEvent.isAltDown(n)&&!mxEvent.isShiftDown(n)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)},Graph.prototype.getLabel=function(e){var t=mxGraph.prototype.getLabel.apply(this,arguments);return null!=t&&this.isReplacePlaceholders(e)&&null==e.getAttribute("placeholder")&&(t=this.replacePlaceholders(e,t)),t},Graph.prototype.isLabelMovable=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return!this.isCellLocked(e)&&(this.model.isEdge(e)&&this.edgeLabelsMovable||this.model.isVertex(e)&&(this.vertexLabelsMovable||"1"==mxUtils.getValue(t,"labelMovable","0")))},Graph.prototype.setGridSize=function(e){this.gridSize=e,this.fireEvent(new mxEventObject("gridSizeChanged"))},Graph.prototype.getGlobalVariable=function(e){var t=null;return"date"==e?t=(new Date).toLocaleDateString():"time"==e?t=(new Date).toLocaleTimeString():"timestamp"==e?t=(new Date).toLocaleString():"date{"==e.substring(0,5)&&(e=e.substring(5,e.length-1),t=this.formatDate(new Date,e)),t},Graph.prototype.formatDate=function(e,t,n){null==this.dateFormatCache&&(this.dateFormatCache={i18n:{dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")},masks:{"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});var r=this.dateFormatCache,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g,o=function(e,t){e=String(e);for(t=t||2;e.length<t;)e="0"+e;return e};1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(t=e,e=void 0),e=e?new Date(e):new Date;if(isNaN(e))throw SyntaxError("invalid date");t=String(r.masks[t]||t||r.masks["default"]),"UTC:"==t.slice(0,4)&&(t=t.slice(4),n=!0);var u=n?"getUTC":"get",a=e[u+"Date"](),f=e[u+"Day"](),l=e[u+"Month"](),c=e[u+"FullYear"](),h=e[u+"Hours"](),p=e[u+"Minutes"](),d=e[u+"Seconds"](),u=e[u+"Milliseconds"](),v=n?0:e.getTimezoneOffset(),m={d:a,dd:o(a),ddd:r.i18n.dayNames[f],dddd:r.i18n.dayNames[f+7],m:l+1,mm:o(l+1),mmm:r.i18n.monthNames[l],mmmm:r.i18n.monthNames[l+12],yy:String(c).slice(2),yyyy:c,h:h%12||12,hh:o(h%12||12),H:h,HH:o(h),M:p,MM:o(p),s:d,ss:o(d),l:o(u,3),L:o(99<u?Math.round(u/10):u),t:12>h?"a":"p",tt:12>h?"am":"pm",T:12>h?"A":"P",TT:12>h?"AM":"PM",Z:n?"UTC":(String(e).match(i)||[""]).pop().replace(s,""),o:(0<v?"-":"+")+o(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][3<a%10?0:(10!=a%100-a%10)*a%10]};return t.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,function(e){return e in m?m[e]:e.slice(1,e.length-1)})},Graph.prototype.createLayersDialog=function(){var e=document.createElement("div");e.style.position="absolute";for(var t=this.getModel(),n=t.getChildCount(t.root),r=0;r<n;r++)mxUtils.bind(this,function(n){var r=document.createElement("div");r.style.overflow="hidden",r.style.textOverflow="ellipsis",r.style.padding="2px",r.style.whiteSpace="nowrap";var i=document.createElement("input");i.style.display="inline-block",i.setAttribute("type","checkbox"),t.isVisible(n)&&(i.setAttribute("checked","checked"),i.defaultChecked=!0),r.appendChild(i);var s=this.convertValueToString(n)||mxResources.get("background")||"Background";r.setAttribute("title",s),mxUtils.write(r,s),e.appendChild(r),mxEvent.addListener(i,"click",function(){null!=i.getAttribute("checked")?i.removeAttribute("checked"):i.setAttribute("checked","checked"),t.setVisible(n,i.checked)})})(t.getChildAt(t.root,r));return e},Graph.prototype.replacePlaceholders=function(e,t){var n=[];if(null!=t){for(var r=0;match=this.placeholderPattern.exec(t);){var i=match[0];if(2<i.length&&"%label%"!=i&&"%tooltip%"!=i){var s=null;if(match.index>r&&"%"==t.charAt(match.index-1))s=i.substring(1);else{var o=i.substring(1,i.length-1);if(0>o.indexOf("{"))for(var u=e;null==s&&null!=u;)null!=u.value&&"object"==typeof u.value&&(s=u.hasAttribute(o)?null!=u.getAttribute(o)?u.getAttribute(o):"":null),u=this.model.getParent(u);null==s&&(s=this.getGlobalVariable(o))}n.push(t.substring(r,match.index)+(null!=s?s:i)),r=match.index+i.length}}n.push(t.substring(r))}return n.join("")},Graph.prototype.restoreSelection=function(e){if(null!=e&&0<e.length){for(var t=[],n=0;n<e.length;n++){var r=this.model.getCell(e[n].id);null!=r&&t.push(r)}this.setSelectionCells(t)}else this.clearSelection()},Graph.prototype.selectCellsForConnectVertex=function(e,t,n){2==e.length&&this.model.isVertex(e[1])?(this.setSelectionCell(e[1]),null!=n&&(mxEvent.isTouchEvent(t)?n.update(n.getState(this.view.getState(e[1]))):n.reset()),this.scrollCellToVisible(e[1])):this.setSelectionCells(e)},Graph.prototype.connectVertex=function(e,t,n,r,i,s){s=s?s:!1;var o=e.geometry.relative&&null!=e.parent.geometry?new mxPoint(e.parent.geometry.width*e.geometry.x,e.parent.geometry.height*e.geometry.y):new mxPoint(e.geometry.x,e.geometry.y);t==mxConstants.DIRECTION_NORTH?(o.x+=e.geometry.width/2,o.y-=n):t==mxConstants.DIRECTION_SOUTH?(o.x+=e.geometry.width/2,o.y+=e.geometry.height+n):(o.x=t==mxConstants.DIRECTION_WEST?o.x-n:o.x+(e.geometry.width+n),o.y+=e.geometry.height/2),n=this.view.getState(this.model.getParent(e));var u=this.view.scale,a=this.view.translate,f=a.x*u,a=a.y*u;this.model.isVertex(n.cell)&&(f=n.x,a=n.y),this.model.isVertex(e.parent)&&e.geometry.relative&&(o.x+=e.parent.geometry.x,o.y+=e.parent.geometry.y),s=s||mxEvent.isControlDown(r)&&!i?null:this.getCellAt(f+o.x*u,a+o.y*u),this.model.isAncestor(s,e)&&(s=null);for(n=s;null!=n;){if(this.isCellLocked(n)){s=null;break}n=this.model.getParent(n)}null!=s&&(n=this.view.getState(e),u=this.view.getState(s),null!=n&&null!=u&&mxUtils.intersects(n,u)&&(s=null));if(i=!mxEvent.isShiftDown(r)||i)t==mxConstants.DIRECTION_NORTH?o.y-=e.geometry.height/2:t==mxConstants.DIRECTION_SOUTH?o.y+=e.geometry.height/2:o.x=t==mxConstants.DIRECTION_WEST?o.x-e.geometry.width/2:o.x+e.geometry.width/2;null==s||this.isCellConnectable(s)||(n=this.getModel().getParent(s),this.getModel().isVertex(n)&&this.isCellConnectable(n)&&(s=n));if(s==e||this.model.isEdge(s)||!this.isCellConnectable(s))s=null;n=[],this.model.beginUpdate();try{u=s;if(null==u&&i){for(var f=e,l=this.getCellGeometry(e);null!=l&&l.relative;)f=this.getModel().getParent(f),l=this.getCellGeometry(f);var c=this.view.getState(f),h=null!=c?c.style:this.getCellStyle(f);if(mxUtils.getValue(h,"part",!1)){var p=this.model.getParent(f);this.model.isVertex(p)&&(f=p)}u=this.duplicateCells([f],!1)[0],l=this.getCellGeometry(u),null!=l&&(l.x=o.x-l.width/2,l.y=o.y-l.height/2)}l=null,null!=this.layoutManager&&(l=this.layoutManager.getLayout(this.model.getParent(e)));var d=mxEvent.isControlDown(r)&&i||null==s&&null!=l&&l.constructor==mxStackLayout?null:this.insertEdge(this.model.getParent(e),null,"",e,u,this.createCurrentEdgeStyle());if(null!=d&&this.connectionHandler.insertBeforeSource){var v=null;for(r=e;null!=r.parent&&null!=r.geometry&&r.geometry.relative&&r.parent!=d.parent;)r=this.model.getParent(r);null!=r&&null!=r.parent&&r.parent==d.parent&&(v=r.parent.getIndex(r),this.model.add(r.parent,d,v))}null==s&&null!=u&&null!=l&&null!=e.parent&&l.constructor==mxStackLayout&&t==mxConstants.DIRECTION_WEST&&(v=e.parent.getIndex(e),this.model.add(e.parent,u,v)),null!=d&&n.push(d),null==s&&null!=u&&n.push(u),null==u&&null!=d&&d.geometry.setTerminalPoint(o,!1),null!=d&&this.fireEvent(new mxEventObject("cellsInserted","cells",[d]))}finally{this.model.endUpdate()}return n},Graph.prototype.getIndexableText=function(){var e=document.createElement("div"),t=[],n,r;for(r in this.model.cells)if(n=this.model.cells[r],this.model.isVertex(n)||this.model.isEdge(n))this.isHtmlLabel(n)?(e.innerHTML=this.getLabel(n),n=mxUtils.extractTextWithWhitespace([e])):n=this.getLabel(n),n=mxUtils.trim(n.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," ")),0<n.length&&t.push(n);return t.join(" ")},Graph.prototype.convertValueToString=function(e){if(null!=e.value&&"object"==typeof e.value){if(this.isReplacePlaceholders(e)&&null!=e.getAttribute("placeholder")){for(var t=e.getAttribute("placeholder"),n=e,r=null;null==r&&null!=n;)null!=n.value&&"object"==typeof n.value&&(r=n.hasAttribute(t)?null!=n.getAttribute(t)?n.getAttribute(t):"":null),n=this.model.getParent(n);return r||""}return e.value.getAttribute("label")||""}return mxGraph.prototype.convertValueToString.apply(this,arguments)},Graph.prototype.getLinksForState=function(e){return null!=e&&null!=e.text&&null!=e.text.node?e.text.node.getElementsByTagName("a"):null},Graph.prototype.getLinkForCell=function(e){return null!=e.value&&"object"==typeof e.value?(e=e.value.getAttribute("link"),null!=e&&"javascript:"===e.toLowerCase().substring(0,11)&&(e=e.substring(11)),e):null},Graph.prototype.getCellStyle=function(e){var t=mxGraph.prototype.getCellStyle.apply(this,arguments);if(null!=e&&null!=this.layoutManager){var n=this.model.getParent(e);this.model.isVertex(n)&&this.isCellCollapsed(e)&&(n=this.layoutManager.getLayout(n),null!=n&&n.constructor==mxStackLayout&&(t[mxConstants.STYLE_HORIZONTAL]=!n.horizontal))}return t},Graph.prototype.updateAlternateBounds=function(e,t,n){if(null!=e&&null!=t&&null!=this.layoutManager&&null!=t.alternateBounds){var r=this.layoutManager.getLayout(this.model.getParent(e));null!=r&&r.constructor==mxStackLayout&&(r.horizontal?t.alternateBounds.height=0:t.alternateBounds.width=0)}mxGraph.prototype.updateAlternateBounds.apply(this,arguments)},Graph.prototype.isMoveCellsEvent=function(e){return mxEvent.isShiftDown(e)},Graph.prototype.foldCells=function(e,t,n,r,i){t=null!=t?t:!1,null==n&&(n=this.getFoldableCells(this.getSelectionCells(),e));if(null!=n){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),null!=this.layoutManager)for(var s=0;s<n.length;s++){var o=this.view.getState(n[s]),u=this.getCellGeometry(n[s]);if(null!=o&&null!=u){var a=Math.round(u.width-o.width/this.view.scale),f=Math.round(u.height-o.height/this.view.scale);if(0!=f||0!=a){var l=this.model.getParent(n[s]),c=this.layoutManager.getLayout(l);null==c?null!=i&&this.isMoveCellsEvent(i)&&this.moveSiblings(o,l,a,f):null!=i&&mxEvent.isAltDown(i)||c.constructor!=mxStackLayout||c.resizeLast||this.resizeParentStacks(l,c,a,f)}}}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(n)}},Graph.prototype.moveSiblings=function(e,t,n,r){this.model.beginUpdate();try{var i=this.getCellsBeyond(e.x,e.y,t,!0,!0);for(t=0;t<i.length;t++)if(i[t]!=e.cell){var s=this.view.getState(i[t]),o=this.getCellGeometry(i[t]);null!=s&&null!=o&&(o=o.clone(),o.translate(Math.round(n*Math.max(0,Math.min(1,(s.x-e.x)/e.width))),Math.round(r*Math.max(0,Math.min(1,(s.y-e.y)/e.height)))),this.model.setGeometry(i[t],o))}}finally{this.model.endUpdate()}},Graph.prototype.resizeParentStacks=function(e,t,n,r){if(null!=this.layoutManager&&null!=t&&t.constructor==mxStackLayout&&!t.resizeLast){this.model.beginUpdate();try{for(var i=t.horizontal;null!=e&&null!=t&&t.constructor==mxStackLayout&&t.horizontal==i&&!t.resizeLast;){var s=this.getCellGeometry(e),o=this.view.getState(e);null!=o&&null!=s&&(s=s.clone(),t.horizontal?s.width+=n+Math.min(0,o.width/this.view.scale-s.width):s.height+=r+Math.min(0,o.height/this.view.scale-s.height),this.model.setGeometry(e,s)),e=this.model.getParent(e),t=this.layoutManager.getLayout(e)}}finally{this.model.endUpdate()}}},Graph.prototype.isContainer=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return this.isSwimlane(e)?"0"!=t.container:"1"==t.container},Graph.prototype.isCellConnectable=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return null!=t.connectable?"0"!=t.connectable:mxGraph.prototype.isCellConnectable.apply(this,arguments)},Graph.prototype.selectAll=function(e){e=e||this.getDefaultParent(),this.isCellLocked(e)||mxGraph.prototype.selectAll.apply(this,arguments)},Graph.prototype.selectCells=function(e,t,n){n=n||this.getDefaultParent(),this.isCellLocked(n)||mxGraph.prototype.selectCells.apply(this,arguments)},Graph.prototype.getSwimlaneAt=function(e,t,n){return n=n||this.getDefaultParent(),this.isCellLocked(n)?null:mxGraph.prototype.getSwimlaneAt.apply(this,arguments)},Graph.prototype.isCellFoldable=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return this.foldingEnabled&&!this.isCellLocked(e)&&(this.isContainer(e)&&"0"!=t.collapsible||!this.isContainer(e)&&"1"==t.collapsible)},Graph.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()},Graph.prototype.zoom=function(e,t){e=Math.max(.01,Math.min(this.view.scale*e,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)},Graph.prototype.zoomIn=function(){.15>this.view.scale?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)},Graph.prototype.zoomOut=function(){.15>=this.view.scale?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(1/this.zoomFactor*this.view.scale*20)/20/this.view.scale)},Graph.prototype.getTooltipForCell=function(e){var t="";if(mxUtils.isNode(e.value)){var n=e.value.getAttribute("tooltip");if(null!=n)null!=n&&this.isReplacePlaceholders(e)&&(n=this.replacePlaceholders(e,n)),t=this.sanitizeHtml(n);else{n=this.builtInProperties,e=e.value.attributes;var r=[];this.isEnabled()&&n.push("link");for(var i=0;i<e.length;i++)0>mxUtils.indexOf(n,e[i].nodeName)&&0<e[i].nodeValue.length&&r.push({name:e[i].nodeName,value:e[i].nodeValue});r.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});for(i=0;i<r.length;i++)"link"==r[i].name&&this.isCustomLink(r[i].value)||(t+=("link"!=r[i].name?"<b>"+r[i].name+":</b> ":"")+mxUtils.htmlEntities(r[i].value)+"\n");0<t.length&&(t=t.substring(0,t.length-1),mxClient.IS_SVG&&(t='<div style="max-width:360px;">'+t+"</div>"))}}return t},Graph.prototype.stringToBytes=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},Graph.prototype.bytesToString=function(e){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(e[n]);return t.join("")},Graph.prototype.compressNode=function(e){return this.compress(this.zapGremlins(mxUtils.getXml(e)))},Graph.prototype.compress=function(e){return null==e||0==e.length||"undefined"==typeof pako?e:(e=this.bytesToString(pako.deflateRaw(encodeURIComponent(e))),window.btoa?btoa(e):Base64.encode(e,!0))},Graph.prototype.decompress=function(e){return null==e||0==e.length||"undefined"==typeof pako?e:(e=window.atob?atob(e):Base64.decode(e,!0),this.zapGremlins(decodeURIComponent(this.bytesToString(pako.inflateRaw(e)))))},Graph.prototype.zapGremlins=function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);(32<=r||9==r||10==r||13==r)&&t.push(e.charAt(n))}return t.join("")},HoverIcons=function(e){this.graph=e,this.init()},HoverIcons.prototype.arrowSpacing=2,HoverIcons.prototype.updateDelay=500,HoverIcons.prototype.activationDelay=140,HoverIcons.prototype.currentState=null,HoverIcons.prototype.activeArrow=null,HoverIcons.prototype.inactiveOpacity=15,HoverIcons.prototype.cssCursor="copy",HoverIcons.prototype.checkCollisions=!0,HoverIcons.prototype.arrowFill="#29b6f2",HoverIcons.prototype.triangleUp=mxClient.IS_SVG?Graph.createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14),HoverIcons.prototype.triangleRight=mxClient.IS_SVG?Graph.createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26),HoverIcons.prototype.triangleDown=mxClient.IS_SVG?Graph.createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14),HoverIcons.prototype.triangleLeft=mxClient.IS_SVG?Graph.createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26),HoverIcons.prototype.roundDrop=mxClient.IS_SVG?Graph.createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26),HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDQxNERDRTU1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDQxNERDRTY1QjY1MTFFNDkzNTRFQTVEMTdGMTdBQjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NDE0RENFMzVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NDE0RENFNDVCNjUxMUU0OTM1NEVBNUQxN0YxN0FCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsvuX50AAANaSURBVHja7FjRZ1tRGD9ZJ1NCyIQSwrivI4Q8hCpjlFDyFEoYfSp9Ko1QWnmo0If+BSXkIfo0QirTMUpeGo2EPfWllFYjZMLKLDJn53d3biU337m5J223bPbxk5t7v+/c3/2+73znO8fDOWezKM/YjMpz68Lj8ejY+QTeCCwLxOS9qPxtyN+6wAeBTwJ31CCO0cJDjXBGBN4LfIepSwykTUT1bgpuib0SONIgo8KRHOtRiCFcvUcgZeGrHPNBxLIyFPyRgTGz0xLbegJCdmzpElue5KlAIMDX19d5uVzm5+fnfDAYmMA17uEZdOx2Yvb/sHlu2S0xwymn5ufneTab5b1ej08S6EAXNrDd2dnhiUTim21MvMtwQ6yiIrWwsMDPzs64rsBmf3/fvM7n89TYlUnEllSkQqEQv7q64g+Vk5MTVXosORErU0Zer5f0FEIlw2N6MxwO82QyaXql2+2SxDqdjopYWUUsqEp45IldqtWq6UWVh/1+P7+8vCTJ4QMUJSRIEXuneoH96w8PDyeWAnhSJfCqwm6NIlaklFdXV0cGhRcQ2mlJQXK5nMq2YPEZbnteU1U2lUqN/D84OGD9fl+5fgnSrFarsUwmw0qlEru4uBjTicViTk3Cr27HSnxR+Doyz0ZE1CAWiUTusbu7y9rttlZv5fP5WDQavYfIMba4uEipfhF8XtqJoZXx/uH+sC/4vPg7OljZZQbsCmLtYzc3N6zRaJhotVrmfx0xDINtbm6athYUeXpHdbBNaqZUKpWxWXV7e2vex+xaWVnhc3NzjrPUXgexyCt0m67LBV7uJMITjqRE4o8tZeg8FPpFitgapYxiOC0poFgsji1jKNo6BZZckrAGUtJsNk1vqAihCBcKhTE7hNWhqw2qFnGy5UFOUYJVIJ1OjzSE+BCEilon0URavRmBqnbbQ00AXbm+vnZc9O1tj72OnQoc2+cwygRkb2+P1et17ZoEm3g87lRmjgWZ00kbXkNuse6/Bu2wlegIxfb2tuvWGroO4bO2c4bbzUh60mxDXm1sbJhhxkQYnhS4h2fUZoRAWnf7lv8N27f8P7Xhnekjgpk+VKGOoQbsiY+hhhtF3YO7twIJ+ULvUGv+GQ2fQEvWxI/THNx5/p/BaspPAQYAqStgiSQwCDoAAAAASUVORK5CYII=":IMAGE_PATH+"/refresh.png",38,38),HoverIcons.prototype.tolerance=mxClient.IS_TOUCH?6:0,HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip")),this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip")),this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip")),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip")),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.repaintHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent.UP,this.repaintHandler),this.graph.addListener(mxEvent.ROOT,this.repaintHandler),this.graph.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){this.mouseDownPoint=null})),mxEvent.addListener(this.graph.container,"mouseleave",mxUtils.bind(this,function(e){null!=e.relatedTarget&&mxEvent.getSource(e)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent.START_EDITING,mxUtils.bind(this,function(e){this.reset()}));var e=this.graph.click;this.graph.click=mxUtils.bind(this,function(t){e.apply(this.graph,arguments),null==this.currentState||this.graph.isCellSelected(this.currentState.cell)||!mxEvent.isTouchEvent(t.getEvent())||this.graph.model.isVertex(t.getCell())||this.reset()});var t=!1;this.graph.addMouseListener({mouseDown:mxUtils.bind(this,function(e,n){t=!1;var r=n.getEvent();if(this.isResetEvent(r))this.reset();else if(!this.isActive()){var i=this.getState(n.getState());null==i&&mxEvent.isTouchEvent(r)||this.update(i)}this.setDisplay("none")}),mouseMove:mxUtils.bind(this,function(e,n){var r=n.getEvent();this.isResetEvent(r)?this.reset():this.graph.isMouseDown||mxEvent.isTouchEvent(r)||this.update(this.getState(n.getState()),n.getGraphX(),n.getGraphY()),null!=this.graph.connectionHandler&&null!=this.graph.connectionHandler.shape&&(t=!0)}),mouseUp:mxUtils.bind(this,function(e,n){var r=n.getEvent();mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(r),mxEvent.getClientY(r)),this.isResetEvent(r)?this.reset():this.isActive()&&!t&&null!=this.mouseDownPoint?this.click(this.currentState,this.getDirection(),n):this.isActive()?1==this.graph.getSelectionCount()&&this.graph.model.isEdge(this.graph.getSelectionCell())?this.reset():this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(n.getGraphX(),n.getGraphY())))):mxEvent.isTouchEvent(r)||null!=this.bbox&&mxUtils.contains(this.bbox,n.getGraphX(),n.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent.isTouchEvent(r)||this.reset(),t=!1,this.resetActiveArrow()})})},HoverIcons.prototype.isResetEvent=function(e,t){return mxEvent.isAltDown(e)||null==this.activeArrow&&mxEvent.isShiftDown(e)||mxEvent.isMetaDown(e)||mxEvent.isPopupTrigger(e)&&!mxEvent.isControlDown(e)},HoverIcons.prototype.createArrow=function(e,t){var n=null;return mxClient.IS_IE&&!mxClient.IS_SVG?(mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?(n=document.createElement(mxClient.VML_PREFIX+":image"),n.setAttribute("src",e.src),n.style.borderStyle="none"):(n=document.createElement("div"),n.style.backgroundImage="url("+e.src+")",n.style.backgroundPosition="center",n.style.backgroundRepeat="no-repeat"),n.style.width=e.width+4+"px",n.style.height=e.height+4+"px",n.style.display=mxClient.IS_QUIRKS?"inline":"inline-block"):(n=mxUtils.createImage(e.src),n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.padding=this.tolerance+"px"),null!=t&&n.setAttribute("title",t),n.style.position="absolute",n.style.cursor=this.cssCursor,mxEvent.addGestureListeners(n,mxUtils.bind(this,function(e){null==this.currentState||this.isResetEvent(e)||(this.mouseDownPoint=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),this.drag(e,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=n,this.setDisplay("none"),mxEvent.consume(e))})),mxEvent.redirectMouseEvents(n,this.graph,this.currentState),mxEvent.addListener(n,"mouseenter",mxUtils.bind(this,function(e){mxEvent.isMouseEvent(e)&&(null!=this.activeArrow&&this.activeArrow!=n&&mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils.setOpacity(n,100),this.activeArrow=n)})),mxEvent.addListener(n,"mouseleave",mxUtils.bind(this,function(e){this.graph.isMouseDown||this.resetActiveArrow()})),n},HoverIcons.prototype.resetActiveArrow=function(){null!=this.activeArrow&&(mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)},HoverIcons.prototype.getDirection=function(){var e=mxConstants.DIRECTION_EAST;return this.activeArrow==this.arrowUp?e=mxConstants.DIRECTION_NORTH:this.activeArrow==this.arrowDown?e=mxConstants.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(e=mxConstants.DIRECTION_WEST),e},HoverIcons.prototype.visitNodes=function(e){for(var t=0;t<this.elts.length;t++)null!=this.elts[t]&&e(this.elts[t])},HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(e){null!=e.parentNode&&e.parentNode.removeChild(e)})},HoverIcons.prototype.setDisplay=function(e){this.visitNodes(function(t){t.style.display=e})},HoverIcons.prototype.isActive=function(){return null!=this.activeArrow&&null!=this.currentState},HoverIcons.prototype.drag=function(e,t,n){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),null!=this.currentState&&(this.graph.connectionHandler.start(this.currentState,t,n),this.graph.isMouseTrigger=mxEvent.isMouseEvent(e),this.graph.isMouseDown=!0,t=this.graph.selectionCellsHandler.getHandler(this.currentState.cell),null!=t&&t.setHandlesVisible(!1),t=this.graph.connectionHandler.edgeState,null!=e&&mxEvent.isShiftDown(e)&&mxEvent.isControlDown(e)&&null!=t&&"orthogonalEdgeStyle"===mxUtils.getValue(t.style,mxConstants.STYLE_EDGE,null)&&(e=this.getDirection(),t.cell.style=mxUtils.setStyle(t.cell.style,"sourcePortConstraint",e),t.style.sourcePortConstraint=e))},HoverIcons.prototype.getStateAt=function(e,t,n){return this.graph.view.getState(this.graph.getCellAt(t,n))},HoverIcons.prototype.click=function(e,t,n){var r=n.getEvent(),i=n.getGraphX(),s=n.getGraphY(),i=this.getStateAt(e,i,s);null==i||!this.graph.model.isEdge(i.cell)||mxEvent.isControlDown(r)||i.getVisibleTerminalState(!0)!=e&&i.getVisibleTerminalState(!1)!=e?null!=e&&(e=this.graph.connectVertex(e.cell,t,this.graph.defaultEdgeLength,r),this.graph.selectCellsForConnectVertex(e,r,this),2==e.length&&this.graph.model.isVertex(e[1])?(this.graph.setSelectionCell(e[1]),mxEvent.isTouchEvent(r)?this.update(this.getState(this.graph.view.getState(e[1]))):this.reset(),this.graph.scrollCellToVisible(e[1])):this.graph.setSelectionCells(e)):(this.graph.setSelectionCell(i.cell),this.reset()),n.consume()},HoverIcons.prototype.reset=function(e){null!=e&&!e||null==this.updateThread||window.clearTimeout(this.updateThread),this.activeArrow=this.currentState=this.mouseDownPoint=null,this.removeNodes(),this.bbox=null},HoverIcons.prototype.repaint=function(){this.bbox=null;if(null!=this.currentState){this.currentState=this.getState(this.currentState);if(null!=this.currentState&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)){var e=mxRectangle.fromRectangle(this.currentState);null!=this.currentState.shape&&null!=this.currentState.shape.boundingBox&&(e=mxRectangle.fromRectangle(this.currentState.shape.boundingBox)),e.grow(this.graph.tolerance),e.grow(this.arrowSpacing);var t=this.graph.selectionCellsHandler.getHandler(this.currentState.cell);null!=t&&(e.x-=t.horizontalOffset/2,e.y-=t.verticalOffset/2,e.width+=t.horizontalOffset,e.height+=t.verticalOffset,null!=t.rotationShape&&null!=t.rotationShape.node&&"hidden"!=t.rotationShape.node.style.visibility&&"none"!=t.rotationShape.node.style.display&&null!=t.rotationShape.boundingBox&&e.add(t.rotationShape.boundingBox)),this.arrowUp.style.left=Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance)+"px",this.arrowUp.style.top=Math.round(e.y-this.triangleUp.height-this.tolerance)+"px",mxUtils.setOpacity(this.arrowUp,this.inactiveOpacity),this.arrowRight.style.left=Math.round(e.x+e.width-this.tolerance)+"px",this.arrowRight.style.top=Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)+"px",mxUtils.setOpacity(this.arrowRight,this.inactiveOpacity),this.arrowDown.style.left=this.arrowUp.style.left,this.arrowDown.style.top=Math.round(e.y+e.height-this.tolerance)+"px",mxUtils.setOpacity(this.arrowDown,this.inactiveOpacity),this.arrowLeft.style.left=Math.round(e.x-this.triangleLeft.width-this.tolerance)+"px",this.arrowLeft.style.top=this.arrowRight.style.top,mxUtils.setOpacity(this.arrowLeft,this.inactiveOpacity);if(this.checkCollisions){var t=this.graph.getCellAt(e.x+e.width+this.triangleRight.width/2,this.currentState.getCenterY()),n=this.graph.getCellAt(e.x-this.triangleLeft.width/2,this.currentState.getCenterY()),r=this.graph.getCellAt(this.currentState.getCenterX(),e.y-this.triangleUp.height/2),e=this.graph.getCellAt(this.currentState.getCenterX(),e.y+e.height+this.triangleDown.height/2);null!=t&&t==n&&n==r&&r==e&&(e=r=n=t=null);var i=this.graph.getCellGeometry(this.currentState.cell),s=mxUtils.bind(this,function(e,t){var n=this.graph.model.isVertex(e)&&this.graph.getCellGeometry(e);null!=e&&!this.graph.model.isAncestor(e,this.currentState.cell)&&(null==n||null==i||n.height<6*i.height&&n.width<6*i.width)?t.style.visibility="hidden":t.style.visibility="visible"});s(t,this.arrowRight),s(n,this.arrowLeft),s(r,this.arrowUp),s(e,this.arrowDown)}else this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible";this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))}else this.reset();null!=this.currentState&&(this.bbox=this.computeBoundingBox(),null!=this.bbox&&this.bbox.grow(10))}},HoverIcons.prototype.computeBoundingBox=function(){var e=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(t){null!=t.parentNode&&(t=new mxRectangle(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight),null==e?e=t:e.add(t))}),e},HoverIcons.prototype.getState=function(e){if(null!=e){e=e.cell;if(this.graph.getModel().isVertex(e)&&!this.graph.isCellConnectable(e)){var t=this.graph.getModel().getParent(e);this.graph.getModel().isVertex(t)&&this.graph.isCellConnectable(t)&&(e=t)}if(this.graph.isCellLocked(e)||this.graph.model.isEdge(e))e=null;e=this.graph.view.getState(e)}return e},HoverIcons.prototype.update=function(e,t,n){if(this.graph.connectionArrowsEnabled){var r=null;this.prev!=e||this.isActive()?(this.startTime=(new Date).getTime(),this.prev=e,r=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=e&&(this.updateThread=window.setTimeout(mxUtils.bind(this,function(){this.isActive()||this.graph.isMouseDown||this.graph.panningHandler.isActive()||(this.prev=e,this.update(e,t,n))}),this.updateDelay+10))):null!=this.startTime&&(r=(new Date).getTime()-this.startTime),this.setDisplay(""),null!=this.currentState&&this.currentState!=e&&r<this.activationDelay&&null!=this.bbox&&!mxUtils.contains(this.bbox,t,n)?this.reset(!1):(null!=this.currentState||r>this.activationDelay)&&this.currentState!=e&&(r>this.updateDelay&&null!=e||null==this.bbox||null==t||null==n||!mxUtils.contains(this.bbox,t,n))&&(null!=e&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(e),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=e&&this.graph.connectionHandler.constraintHandler.reset()):this.reset())}else this.reset()},HoverIcons.prototype.setCurrentState=function(e){"eastwest"!=e.style.portConstraint&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=e},function(){var e=mxGraphView.prototype.resetValidationState;mxGraphView.prototype.resetValidationState=function(){e.apply(this,arguments),this.validEdges=[]};var t=mxGraphView.prototype.validateCellState;mxGraphView.prototype.validateCellState=function(e,n){var r=this.getState(e);return null!=r&&this.graph.model.isEdge(r.cell)&&null!=r.style&&1!=r.style[mxConstants.STYLE_CURVED]&&!r.invalid&&this.updateLineJumps(r)&&this.graph.cellRenderer.redraw(r,!1,this.isRendering()),r=t.apply(this,arguments),null!=r&&this.graph.model.isEdge(r.cell)&&1!=r.style[mxConstants.STYLE_CURVED]&&this.validEdges.push(r),r};var n=mxCellRenderer.prototype.isShapeInvalid;mxCellRenderer.prototype.isShapeInvalid=function(e,t){return n.apply(this,arguments)||null!=e.routedPoints&&null!=t.routedPoints&&!mxUtils.equalPoints(t.routedPoints,e.routedPoints)};var r=mxGraphView.prototype.updateCellState;mxGraphView.prototype.updateCellState=function(e){r.apply(this,arguments),this.graph.model.isEdge(e.cell)&&1!=e.style[mxConstants.STYLE_CURVED]&&this.updateLineJumps(e)},mxGraphView.prototype.updateLineJumps=function(e){var t=e.absolutePoints;if(Graph.lineJumpsEnabled){var n=null!=e.routedPoints,r=null;if(null!=t&&null!=this.validEdges&&"none"!==mxUtils.getValue(e.style,"jumpStyle","none")){for(var i=function(t,n,i){var s=new mxPoint(n,i);return s.type=t,r.push(s),s=null!=e.routedPoints?e.routedPoints[r.length-1]:null,null==s||s.type!=t||s.x!=n||s.y!=i},s=.5*this.scale,n=!1,r=[],o=0;o<t.length-1;o++){for(var u=t[o+1],a=t[o],f=[],l=t[o+2];o<t.length-2&&mxUtils.ptSegDistSq(a.x,a.y,l.x,l.y,u.x,u.y)<1*this.scale*this.scale;)u=l,o++,l=t[o+2];for(var n=i(0,a.x,a.y)||n,c=0;c<this.validEdges.length;c++){var h=this.validEdges[c],p=h.absolutePoints;if(null!=p&&mxUtils.intersects(e,h)&&"1"!=h.style.noJump)for(h=0;h<p.length-1;h++){for(var d=p[h+1],v=p[h],l=p[h+2];h<p.length-2&&mxUtils.ptSegDistSq(v.x,v.y,l.x,l.y,d.x,d.y)<1*this.scale*this.scale;)d=l,h++,l=p[h+2];l=mxUtils.intersection(a.x,a.y,u.x,u.y,v.x,v.y,d.x,d.y);if(null!=l&&(Math.abs(l.x-v.x)>s||Math.abs(l.y-v.y)>s)&&(Math.abs(l.x-d.x)>s||Math.abs(l.y-d.y)>s)){d=l.x-a.x,v=l.y-a.y,l={distSq:d*d+v*v,x:l.x,y:l.y};for(d=0;d<f.length;d++)if(f[d].distSq>l.distSq){f.splice(d,0,l),l=null;break}null==l||0!=f.length&&f[f.length-1].x===l.x&&f[f.length-1].y===l.y||f.push(l)}}}for(h=0;h<f.length;h++)n=i(1,f[h].x,f[h].y)||n}l=t[t.length-1],n=i(0,l.x,l.y)||n}return e.routedPoints=r,n}return!1};var i=mxConnector.prototype.paintLine;mxConnector.prototype.paintLine=function(e,t,n){this.routedPoints=null!=this.state?this.state.routedPoints:null;if(this.outline||null==this.state||null==this.style||null==this.state.routedPoints||0==this.state.routedPoints.length)i.apply(this,arguments);else{var r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,s=(parseInt(mxUtils.getValue(this.style,"jumpSize",Graph.defaultJumpSize))-2)/2+this.strokewidth,o=mxUtils.getValue(this.style,"jumpStyle","none"),u,a=!0,f=null,c=null;u=[];var h=null;e.begin();for(var p=0;p<this.state.routedPoints.length;p++){var d=this.state.routedPoints[p],v=new mxPoint(d.x/this.scale,d.y/this.scale);0==p?v=t[0]:p==this.state.routedPoints.length-1&&(v=t[t.length-1]);var m=!1;if(null!=f&&1==d.type){var g=this.state.routedPoints[p+1],d=g.x/this.scale-v.x,g=g.y/this.scale-v.y,d=d*d+g*g;null==h&&(h=new mxPoint(v.x-f.x,v.y-f.y),c=Math.sqrt(h.x*h.x+h.y*h.y),h.x=h.x*s/c,h.y=h.y*s/c),d>s*s&&0<c&&(d=f.x-v.x,g=f.y-v.y,d=d*d+g*g,d>s*s&&(m=new mxPoint(v.x-h.x,v.y-h.y),d=new mxPoint(v.x+h.x,v.y+h.y),u.push(m),this.addPoints(e,u,n,r,!1,null,a),u=0>Math.round(h.x)||0==Math.round(h.x)&&0>=Math.round(h.y)?1:-1,a=!1,"sharp"==o?(e.lineTo(m.x-h.y*u,m.y+h.x*u),e.lineTo(d.x-h.y*u,d.y+h.x*u),e.lineTo(d.x,d.y)):"arc"==o?(u*=1.3,e.curveTo(m.x-h.y*u,m.y+h.x*u,d.x-h.y*u,d.y+h.x*u,d.x,d.y)):(e.moveTo(d.x,d.y),a=!0),u=[d],m=!0))}else h=null;m||(u.push(v),f=v)}this.addPoints(e,u,n,r,!1,null,a),e.stroke()}};var s=mxGraphView.prototype.updateFloatingTerminalPoint;mxGraphView.prototype.updateFloatingTerminalPoint=function(e,t,n,r){if(null==t||null==e||"1"!=t.style.snapToPoint&&"1"!=e.style.snapToPoint)s.apply(this,arguments);else{t=this.getTerminalPort(e,t,r);var i=this.getNextPoint(e,n,r),o=this.graph.isOrthogonal(e),u=mxUtils.toRadians(Number(t.style[mxConstants.STYLE_ROTATION]||"0")),a=new mxPoint(t.getCenterX(),t.getCenterY());if(0!=u)var f=Math.cos(-u),l=Math.sin(-u),i=mxUtils.getRotatedPoint(i,f,l,a);f=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0),f+=parseFloat(e.style[r?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),i=this.getPerimeterPoint(t,i,0==u&&o,f),0!=u&&(f=Math.cos(u),l=Math.sin(u),i=mxUtils.getRotatedPoint(i,f,l,a)),e.setAbsoluteTerminalPoint(this.snapToAnchorPoint(e,t,n,r,i),r)}},mxGraphView.prototype.snapToAnchorPoint=function(e,t,n,r,i){if(null!=t&&null!=e){e=this.graph.getAllConnectionConstraints(t),r=n=null;if(null!=e)for(var s=0;s<e.length;s++){var o=this.graph.getConnectionPoint(t,e[s]);if(null!=o){var u=(o.x-i.x)*(o.x-i.x)+(o.y-i.y)*(o.y-i.y);if(null==r||u<r)n=o,r=u}}null!=n&&(i=n)}return i};var o=mxStencil.prototype.evaluateTextAttribute;mxStencil.prototype.evaluateTextAttribute=function(e,t,n){var r=o.apply(this,arguments);return"1"==e.getAttribute("placeholders")&&null!=n.state&&(r=n.state.view.graph.replacePlaceholders(n.state.cell,r)),r};var u=mxCellRenderer.prototype.createShape;mxCellRenderer.prototype.createShape=function(e){if(null!=e.style&&"undefined"!=typeof pako){var t=mxUtils.getValue(e.style,mxConstants.STYLE_SHAPE,null);if(null!=t&&"stencil("==t.substring(0,8))try{var n=t.substring(8,t.length-1),r=mxUtils.parseXml(e.view.graph.decompress(n));return new mxShape(new mxStencil(r.documentElement))}catch(i){null!=window.console&&console.log("Error in shape: "+i)}}return u.apply(this,arguments)}}(),mxStencilRegistry.libraries={},mxStencilRegistry.dynamicLoading=!0,mxStencilRegistry.allowEval=!0,mxStencilRegistry.packages=[],mxStencilRegistry.getStencil=function(a){var b=mxStencilRegistry.stencils[a];if(null==b&&null==mxCellRenderer.defaultShapes[a]&&mxStencilRegistry.dynamicLoading){var f=mxStencilRegistry.getBasenameForStencil(a);if(null!=f){b=mxStencilRegistry.libraries[f];if(null!=b){if(null==mxStencilRegistry.packages[f]){for(var d=0;d<b.length;d++){var l=b[d];if(".xml"==l.toLowerCase().substring(l.length-4,l.length))mxStencilRegistry.loadStencilSet(l,null);else if(".js"==l.toLowerCase().substring(l.length-3,l.length))try{if(mxStencilRegistry.allowEval){var m=mxUtils.load(l);null!=m&&200<=m.getStatus()&&299>=m.getStatus()&&eval.call(window,m.getText())}}catch(p){null!=window.console&&console.log("error in getStencil:",l,p)}}mxStencilRegistry.packages[f]=1}}else f=f.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+f+".xml",null);b=mxStencilRegistry.stencils[a]}}return b},mxStencilRegistry.getBasenameForStencil=function(e){var t=null;if(null!=e&&(e=e.split("."),0<e.length&&"mxgraph"==e[0]))for(var t=e[1],n=2;n<e.length-1;n++)t+="/"+e[n];return t},mxStencilRegistry.loadStencilSet=function(e,t,n,r){var i=mxStencilRegistry.packages[e];if(null!=n&&n||null==i){var s=!1;if(null==i)try{if(r){mxStencilRegistry.loadStencil(e,mxUtils.bind(this,function(n){null!=n&&null!=n.documentElement&&(mxStencilRegistry.packages[e]=n,s=!0,mxStencilRegistry.parseStencilSet(n.documentElement,t,s))}));return}i=mxStencilRegistry.loadStencil(e),mxStencilRegistry.packages[e]=i,s=!0}catch(o){null!=window.console&&console.log("error in loadStencilSet:",e,o)}null!=i&&null!=i.documentElement&&mxStencilRegistry.parseStencilSet(i.documentElement,t,s)}},mxStencilRegistry.loadStencil=function(e,t){if(null==t)return mxUtils.load(e).getXml();mxUtils.get(e,mxUtils.bind(this,function(e){t(200<=e.getStatus()&&299>=e.getStatus()?e.getXml():null)}))},mxStencilRegistry.parseStencilSets=function(e){for(var t=0;t<e.length;t++)mxStencilRegistry.parseStencilSet(mxUtils.parseXml(e[t]).documentElement)},mxStencilRegistry.parseStencilSet=function(e,t,n){if("stencils"==e.nodeName)for(var r=e.firstChild;null!=r;)"shapes"==r.nodeName&&mxStencilRegistry.parseStencilSet(r,t,n),r=r.nextSibling;else{n=null!=n?n:!0;var r=e.firstChild,i="";e=e.getAttribute("name");for(null!=e&&(i=e+".");null!=r;){if(r.nodeType==mxConstants.NODETYPE_ELEMENT&&(e=r.getAttribute("name"),null!=e)){var i=i.toLowerCase(),s=e.replace(/ /g,"_");n&&mxStencilRegistry.addStencil(i+s.toLowerCase(),new mxStencil(r));if(null!=t){var o=r.getAttribute("w"),u=r.getAttribute("h"),o=null==o?80:parseInt(o,10),u=null==u?80:parseInt(u,10);t(i,s,e,o,u)}}r=r.nextSibling}}},"undefined"!=typeof mxVertexHandler&&function(){function e(){var e=document.createElement("div");return e.className="geHint",e.style.whiteSpace="nowrap",e.style.position="absolute",e}mxConstants.HANDLE_FILLCOLOR="#29b6f2",mxConstants.HANDLE_STROKECOLOR="#0088cf",mxConstants.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants.OUTLINE_COLOR="#00a8ff",mxConstants.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants.EDGE_SELECTION_COLOR="#00a8ff",mxConstants.DEFAULT_VALID_COLOR="#00a8ff",mxConstants.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants.GUIDE_COLOR="#0088cf",mxConstants.HIGHLIGHT_OPACITY=30,mxConstants.HIGHLIGHT_SIZE=5,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxRubberband.prototype.fadeOut=!0,mxGuide.prototype.isEnabledForEvent=function(e){return!mxEvent.isAltDown(e)};var t=mxConnectionHandler.prototype.isCreateTarget;mxConnectionHandler.prototype.isCreateTarget=function(e){return mxEvent.isControlDown(e)||t.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var e=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return e.opacity=mxConstants.HIGHLIGHT_OPACITY,e},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(e){e=this.graph.createCurrentEdgeStyle(),e=this.graph.createEdge(null,null,null,null,null,e),e=new mxCellState(this.graph.view,e,this.graph.getCellStyle(e));for(var t in this.graph.currentEdgeStyle)e.style[t]=this.graph.currentEdgeStyle[t];return e};var n=mxConnectionHandler.prototype.createShape;mxConnectionHandler.prototype.createShape=function(){var e=n.apply(this,arguments);return e.isDashed="1"==this.graph.currentEdgeStyle[mxConstants.STYLE_DASHED],e},mxConnectionHandler.prototype.updatePreview=function(e){};var r=mxConnectionHandler.prototype.createMarker;mxConnectionHandler.prototype.createMarker=function(){var e=r.apply(this,arguments),t=e.getCell;return e.getCell=mxUtils.bind(this,function(e){var n=t.apply(this,arguments);return this.error=null,n}),e},mxConnectionHandler.prototype.isCellEnabled=function(e){return!this.graph.isCellLocked(e)},Graph.prototype.defaultVertexStyle={},Graph.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",jettySize:"auto",orthogonalLoop:"1"},Graph.prototype.createCurrentEdgeStyle=function(){var e="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";";return null!=this.currentEdgeStyle.shape&&(e+="shape="+this.currentEdgeStyle.shape+";"),null!=this.currentEdgeStyle.curved&&(e+="curved="+this.currentEdgeStyle.curved+";"),null!=this.currentEdgeStyle.rounded&&(e+="rounded="+this.currentEdgeStyle.rounded+";"),null!=this.currentEdgeStyle.comic&&(e+="comic="+this.currentEdgeStyle.comic+";"),null!=this.currentEdgeStyle.jumpStyle&&(e+="jumpStyle="+this.currentEdgeStyle.jumpStyle+";"),null!=this.currentEdgeStyle.jumpSize&&(e+="jumpSize="+this.currentEdgeStyle.jumpSize+";"),"elbowEdgeStyle"==this.currentEdgeStyle.edgeStyle&&null!=this.currentEdgeStyle.elbow&&(e+="elbow="+this.currentEdgeStyle.elbow+";"),e=null!=this.currentEdgeStyle.html?e+("html="+this.currentEdgeStyle.html+";"):e+"html=1;"},Graph.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph.prototype.loadStylesheet=function(){var e=null!=this.themes?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils.load(STYLE_PATH+"/default.xml").getDocumentElement():null;null!=e&&(new mxCodec(e.ownerDocument)).decode(e,this.getStylesheet())},Graph.prototype.importGraphModel=function(e,t,n,r){t=null!=t?t:0,n=null!=n?n:0;var i=new mxCodec(e.ownerDocument),s=new mxGraphModel;i.decode(e,s),e=[],i=s.getChildren(this.cloneCell(s.root,this.isCloneInvalidEdges()));if(null!=i){i=i.slice(),this.model.beginUpdate();try{if(1!=i.length||this.isCellLocked(this.getDefaultParent()))for(s=0;s<i.length;s++)e=e.concat(this.model.getChildren(this.moveCells([i[s]],t,n,!1,this.model.getRoot())[0]));else e=this.moveCells(s.getChildren(i[0]),t,n,!1,this.getDefaultParent());if(r){this.isGridEnabled()&&(t=this.snap(t),n=this.snap(n));var o=this.getBoundingBoxFromGeometry(e,!0);null!=o&&this.moveCells(e,t-o.x,n-o.y)}}finally{this.model.endUpdate()}}return e},Graph.prototype.getAllConnectionConstraints=function(e,t){if(null!=e){var n=null;if(null!=e.shape){var r=e.shape.direction,i=e.shape.bounds,s=e.shape.scale,n=i.width/s,i=i.height/s;if(r==mxConstants.DIRECTION_NORTH||r==mxConstants.DIRECTION_SOUTH)var o=n,n=i,i=o;n=e.shape.getConstraints(e.style,n,i)}if(null!=n)return n;n=mxUtils.getValue(e.style,"points",null);if(null!=n){r=[];try{for(var u=JSON.parse(n),n=0;n<u.length;n++)o=u[n],r.push(new mxConnectionConstraint(new mxPoint(o[0],o[1]),2<o.length?"0"!=o[2]:!0,null,3<o.length?o[3]:0,4<o.length?o[4]:0))}catch(a){}return r}if(null!=e.shape)if(null!=e.shape.stencil){if(null!=e.shape.stencil)return e.shape.stencil.constraints}else if(null!=e.shape.constraints)return e.shape.constraints}return null},Graph.prototype.flipEdge=function(e){if(null!=e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);null!=t&&(t=mxUtils.getValue(t,mxConstants.STYLE_ELBOW,mxConstants.ELBOW_HORIZONTAL)==mxConstants.ELBOW_HORIZONTAL?mxConstants.ELBOW_VERTICAL:mxConstants.ELBOW_HORIZONTAL,this.setCellStyles(mxConstants.STYLE_ELBOW,t,[e]))}},Graph.prototype.isValidRoot=function(e){for(var t=this.model.getChildCount(e),n=0,r=0;r<t;r++){var i=this.model.getChildAt(e,r);this.model.isVertex(i)&&(i=this.getCellGeometry(i),null==i||i.relative||n++)}return 0<n||this.isContainer(e)},Graph.prototype.isValidDropTarget=function(e){var t=this.view.getState(e),t=null!=t?t.style:this.getCellStyle(e);return"1"!=mxUtils.getValue(t,"part","0")&&(this.isContainer(e)||mxGraph.prototype.isValidDropTarget.apply(this,arguments)&&"0"!=mxUtils.getValue(t,"dropTarget","1"))},Graph.prototype.createGroupCell=function(){var e=mxGraph.prototype.createGroupCell.apply(this,arguments);return e.setStyle("group"),e},Graph.prototype.isExtendParentsOnAdd=function(e){var t=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);if(t&&null!=e&&null!=this.layoutManager){var n=this.model.getParent(e);null!=n&&(n=this.layoutManager.getLayout(n),null!=n&&n.constructor==mxStackLayout&&(t=!1))}return t},Graph.prototype.getPreferredSizeForCell=function(e){var t=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return null!=t&&(t.width+=10,t.height+=4,this.gridEnabled&&(t.width=this.snap(t.width),t.height=this.snap(t.height))),t},Graph.prototype.turnShapes=function(e){var t=this.getModel(),n=[];t.beginUpdate();try{for(var r=0;r<e.length;r++){var i=e[r];if(t.isEdge(i)){var s=t.getTerminal(i,!0),o=t.getTerminal(i,!1);t.setTerminal(i,o,!0),t.setTerminal(i,s,!1);var u=t.getGeometry(i);if(null!=u){u=u.clone(),null!=u.points&&u.points.reverse();var a=u.getTerminalPoint(!0),f=u.getTerminalPoint(!1);u.setTerminalPoint(a,!1),u.setTerminalPoint(f,!0),t.setGeometry(i,u);var l=this.view.getState(i),c=this.view.getState(s),h=this.view.getState(o);if(null!=l){var p=null!=c?this.getConnectionConstraint(l,c,!0):null,d=null!=h?this.getConnectionConstraint(l,h,!1):null;this.setConnectionConstraint(i,s,!0,d),this.setConnectionConstraint(i,o,!1,p)}n.push(i)}}else if(t.isVertex(i)&&(u=this.getCellGeometry(i),null!=u)){u=u.clone(),u.x+=u.width/2-u.height/2,u.y+=u.height/2-u.width/2;var v=u.width;u.width=u.height,u.height=v,t.setGeometry(i,u);var m=this.view.getState(i);if(null!=m){var g=m.style[mxConstants.STYLE_DIRECTION]||"east";"east"==g?g="south":"south"==g?g="west":"west"==g?g="north":"north"==g&&(g="east"),this.setCellStyles(mxConstants.STYLE_DIRECTION,g,[i])}n.push(i)}}}finally{t.endUpdate()}return n},Graph.prototype.stencilHasPlaceholders=function(e){if(null!=e&&null!=e.fgNode)for(e=e.fgNode.firstChild;null!=e;){if("text"==e.nodeName&&"1"==e.getAttribute("placeholders"))return!0;e=e.nextSibling}return!1},Graph.prototype.processChange=function(e){mxGraph.prototype.processChange.apply(this,arguments);if(e instanceof mxValueChange&&null!=e.cell&&null!=e.cell.value&&"object"==typeof e.cell.value){var t=this.model.getDescendants(e.cell);if(0<t.length)for(var n=0;n<t.length;n++){var r=this.view.getState(t[n]);null!=r&&null!=r.shape&&null!=r.shape.stencil&&this.stencilHasPlaceholders(r.shape.stencil)?this.removeStateForCell(t[n]):this.isReplacePlaceholders(t[n])&&this.view.invalidate(t[n],!1,!1)}}},Graph.prototype.replaceElement=function(e,t){for(var n=e.ownerDocument.createElement(null!=t?t:"span"),r=Array.prototype.slice.call(e.attributes);attr=r.pop();)n.setAttribute(attr.nodeName,attr.nodeValue);n.innerHTML=e.innerHTML,e.parentNode.replaceChild(n,e)},Graph.prototype.updateLabelElements=function(e,t,n){e=null!=e?e:this.getSelectionCells();for(var r=document.createElement("div"),i=0;i<e.length;i++)if(this.isHtmlLabel(e[i])){var s=this.convertValueToString(e[i]);if(null!=s&&0<s.length){r.innerHTML=s;for(var o=r.getElementsByTagName(null!=n?n:"*"),u=0;u<o.length;u++)t(o[u]);r.innerHTML!=s&&this.cellLabelChanged(e[i],r.innerHTML)}}},Graph.prototype.cellLabelChanged=function(e,t,n){t=this.zapGremlins(t),this.model.beginUpdate();try{if(null!=e.value&&"object"==typeof e.value){if(this.isReplacePlaceholders(e)&&null!=e.getAttribute("placeholder"))for(var r=e.getAttribute("placeholder"),i=e;null!=i;){if(i==this.model.getRoot()||null!=i.value&&"object"==typeof i.value&&i.hasAttribute(r)){this.setAttributeForCell(i,r,t);break}i=this.model.getParent(i)}var s=e.value.cloneNode(!0);s.setAttribute("label",t),t=s}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph.prototype.cellsRemoved=function(e){if(null!=e){for(var t=new mxDictionary,n=0;n<e.length;n++)t.put(e[n],!0);for(var r=[],n=0;n<e.length;n++){var i=this.model.getParent(e[n]);null==i||t.get(i)||(t.put(i,!0),r.push(i))}for(n=0;n<r.length;n++)if(i=this.view.getState(r[n]),null!=i&&(this.model.isEdge(i.cell)||this.model.isVertex(i.cell))&&this.isCellDeletable(i.cell)){var s=mxUtils.getValue(i.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),o=mxUtils.getValue(i.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);if(s==mxConstants.NONE&&o==mxConstants.NONE){s=!0;for(o=0;o<this.model.getChildCount(i.cell)&&s;o++)t.get(this.model.getChildAt(i.cell,o))||(s=!1);s&&e.push(i.cell)}}}mxGraph.prototype.cellsRemoved.apply(this,arguments)},Graph.prototype.removeCellsAfterUngroup=function(e){for(var t=[],n=0;n<e.length;n++)if(this.isCellDeletable(e[n])){var r=this.view.getState(e[n]);if(null!=r){var i=mxUtils.getValue(r.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),r=mxUtils.getValue(r.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);i==mxConstants.NONE&&r==mxConstants.NONE&&t.push(e[n])}}e=t,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph.prototype.setLinkForCell=function(e,t){this.setAttributeForCell(e,"link",t)},Graph.prototype.setTooltipForCell=function(e,t){this.setAttributeForCell(e,"tooltip",t)},Graph.prototype.setAttributeForCell=function(e,t,n){var r;null!=e.value&&"object"==typeof e.value?r=e.value.cloneNode(!0):(r=mxUtils.createXmlDocument().createElement("UserObject"),r.setAttribute("label",e.value||"")),null!=n&&0<n.length?r.setAttribute(t,n):r.removeAttribute(t),this.model.setValue(e,r)},Graph.prototype.getDropTarget=function(e,t,n,r){this.getModel();if(mxEvent.isAltDown(t))return null;for(var i=0;i<e.length;i++)if(this.model.isEdge(this.model.getParent(e[i])))return null;return mxGraph.prototype.getDropTarget.apply(this,arguments)},Graph.prototype.click=function(e){mxGraph.prototype.click.call(this,e),this.firstClickState=e.getState(),this.firstClickSource=e.getSource()},Graph.prototype.dblClick=function(e,t){if(this.isEnabled()){var n=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e));if(null!=e&&!this.model.isVertex(t)){var r=this.model.isEdge(t)?this.view.getState(t):null,i=mxEvent.getSource(e);this.firstClickState!=r||this.firstClickSource!=i||null!=r&&null!=r.text&&null!=r.text.node&&(mxUtils.contains(r.text.boundingBox,n.x,n.y)||mxUtils.isAncestorNode(r.text.node,mxEvent.getSource(e)))||(null!=r||this.isCellLocked(this.getDefaultParent()))&&(null==r||this.isCellLocked(r.cell))||!(null!=r||mxClient.IS_VML&&i==this.view.getCanvas()||mxClient.IS_SVG&&i==this.view.getCanvas().ownerSVGElement)||(t=this.addText(n.x,n.y,r))}mxGraph.prototype.dblClick.call(this,e,t)}},Graph.prototype.getInsertPoint=function(){var e=this.getGridSize(),t=this.container.scrollLeft/this.view.scale-this.view.translate.x,n=this.container.scrollTop/this.view.scale-this.view.translate.y;if(this.pageVisible)var r=this.getPageLayout(),i=this.getPageSize(),t=Math.max(t,r.x*i.width),n=Math.max(n,r.y*i.height);return new mxPoint(this.snap(t+e),this.snap(n+e))},Graph.prototype.getFreeInsertPoint=function(){var e=this.view,t=this.getGraphBounds(),n=this.getInsertPoint(),r=this.snap(Math.round(Math.max(n.x,t.x/e.scale-e.translate.x+(0==t.width?2*this.gridSize:0)))),e=this.snap(Math.round(Math.max(n.y,(t.y+t.height)/e.scale-e.translate.y+2*this.gridSize)));return new mxPoint(r,e)},Graph.prototype.isMouseInsertPoint=function(){return!1},Graph.prototype.addText=function(e,t,n){var r=new mxCell;r.value="Text",r.style="text;html=1;resizable=0;points=[];",r.geometry=new mxGeometry(0,0,0,0),r.vertex=!0;if(null!=n){r.style+="align=center;verticalAlign=middle;labelBackgroundColor=#ffffff;",r.geometry.relative=!0,r.connectable=!1;var i=this.view.getRelativePoint(n,e,t);r.geometry.x=Math.round(1e4*i.x)/1e4,r.geometry.y=Math.round(i.y),r.geometry.offset=new mxPoint(0,0);var i=this.view.getPoint(n,r.geometry),s=this.view.scale;r.geometry.offset=new mxPoint(Math.round((e-i.x)/s),Math.round((t-i.y)/s))}else r.style+="autosize=1;align=left;verticalAlign=top;spacingTop=-4;",i=this.view.translate,r.geometry.width=40,r.geometry.height=20,r.geometry.x=Math.round(e/this.view.scale)-i.x,r.geometry.y=Math.round(t/this.view.scale)-i.y;this.getModel().beginUpdate();try{this.addCells([r],null!=n?n.cell:null),this.fireEvent(new mxEventObject("textInserted","cells",[r])),this.autoSizeCell(r)}finally{this.getModel().endUpdate()}return r},Graph.prototype.getAbsoluteUrl=function(e){return null!=e&&this.isRelativeUrl(e)&&(e="#"==e.charAt(0)?this.baseUrl+e:"/"==e.charAt(0)?this.domainUrl+e:this.domainPathUrl+e),e},Graph.prototype.addClickHandler=function(e,t,n){var r=mxUtils.bind(this,function(){var e=this.container.getElementsByTagName("a");if(null!=e)for(var n=0;n<e.length;n++){var r=this.getAbsoluteUrl(e[n].getAttribute("href"));null!=r&&(e[n].setAttribute("rel",this.linkRelation),e[n].setAttribute("href",r),null!=t&&mxEvent.addGestureListeners(e[n],null,null,t))}});this.model.addListener(mxEvent.CHANGE,r),r();var i=this.container.style.cursor,s=this.getTolerance(),o=this,u={currentState:null,currentLink:null,highlight:null!=e&&""!=e&&e!=mxConstants.NONE?new mxCellHighlight(o,e,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(e){var t=e.sourceState;if(null==t||null==o.getLinkForCell(t.cell))e=o.getCellAt(e.getGraphX(),e.getGraphY(),null,null,null,function(e,t,n){return null==o.getLinkForCell(e.cell)}),t=o.view.getState(e);t!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=t,null!=this.currentState&&this.activate(this.currentState))},mouseDown:function(e,t){this.startX=t.getGraphX(),this.startY=t.getGraphY(),this.scrollLeft=o.container.scrollLeft,this.scrollTop=o.container.scrollTop,null==this.currentLink&&"auto"==o.container.style.overflow&&(o.container.style.cursor="move"),this.updateCurrentState(t)},mouseMove:function(e,t){if(o.isMouseDown){if(null!=this.currentLink){var n=Math.abs(this.startX-t.getGraphX()),r=Math.abs(this.startY-t.getGraphY());(n>s||r>s)&&this.clear()}}else{for(n=t.getSource();null!=n&&"a"!=n.nodeName.toLowerCase();)n=n.parentNode;null!=n?this.clear():(null!=o.tooltipHandler&&null!=this.currentLink&&null!=this.currentState&&o.tooltipHandler.reset(t,!0,this.currentState),(null==this.currentState||t.getState()!=this.currentState&&null!=t.sourceState||!o.intersects(this.currentState,t.getGraphX(),t.getGraphY()))&&this.updateCurrentState(t))}},mouseUp:function(e,r){for(var i=r.getSource(),u=r.getEvent();null!=i&&"a"!=i.nodeName.toLowerCase();)i=i.parentNode;null==i&&Math.abs(this.scrollLeft-o.container.scrollLeft)<s&&Math.abs(this.scrollTop-o.container.scrollTop)<s&&(null==r.sourceState||!r.isSource(r.sourceState.control))&&((mxEvent.isLeftMouseButton(u)||mxEvent.isMiddleMouseButton(u))&&!mxEvent.isPopupTrigger(u)||mxEvent.isTouchEvent(u))&&(null!=this.currentLink?(i=o.isBlankLink(this.currentLink),"data:"!==this.currentLink.substring(0,5)&&i||null==t||t(u,this.currentLink),mxEvent.isConsumed(u)||(u=mxEvent.isMiddleMouseButton(u)?"_blank":i?o.linkTarget:"_top",o.openLink(this.currentLink,u),r.consume())):null!=n&&!r.isConsumed()&&Math.abs(this.scrollLeft-o.container.scrollLeft)<s&&Math.abs(this.scrollTop-o.container.scrollTop)<s&&Math.abs(this.startX-r.getGraphX())<s&&Math.abs(this.startY-r.getGraphY())<s&&n(r.getEvent())),this.clear()},activate:function(e){this.currentLink=o.getAbsoluteUrl(o.getLinkForCell(e.cell)),null!=this.currentLink&&(o.container.style.cursor="pointer",null!=this.highlight&&this.highlight.highlight(e))},clear:function(){null!=o.container&&(o.container.style.cursor=i),this.currentLink=this.currentState=null,null!=this.highlight&&this.highlight.hide(),null!=o.tooltipHandler&&o.tooltipHandler.hide()}};o.click=function(e){},o.addMouseListener(u),mxEvent.addListener(document,"mouseleave",function(e){u.clear()})},Graph.prototype.duplicateCells=function(e,t){e=null!=e?e:this.getSelectionCells(),t=null!=t?t:!0,e=this.model.getTopmostCells(e);var n=this.getModel(),r=this.gridSize,i=[];n.beginUpdate();try{for(var s=this.cloneCells(e,!1,null,!0),o=0;o<e.length;o++){var u=n.getParent(e[o]),a=this.moveCells([s[o]],r,r,!1)[0];i.push(a);if(t)n.add(u,s[o]);else{var f=u.getIndex(e[o]);n.add(u,s[o],f+1)}}}finally{n.endUpdate()}return i},Graph.prototype.insertImage=function(e,t,n){if(null!=e){for(var r=this.cellEditor.textarea.getElementsByTagName("img"),i=[],s=0;s<r.length;s++)i.push(r[s]);document.execCommand("insertimage",!1,e),e=this.cellEditor.textarea.getElementsByTagName("img");if(e.length==i.length+1)for(s=e.length-1;0<=s;s--)if(0==s||e[s]!=i[s-1]){e[s].setAttribute("width",t),e[s].setAttribute("height",n);break}}},Graph.prototype.insertLink=function(e){if(0==e.length)document.execCommand("unlink",!1);else if(mxClient.IS_FF){for(var t=this.cellEditor.textarea.getElementsByTagName("a"),n=[],r=0;r<t.length;r++)n.push(t[r]);document.execCommand("createlink",!1,mxUtils.trim(e)),t=this.cellEditor.textarea.getElementsByTagName("a");if(t.length==n.length+1)for(r=t.length-1;0<=r;r--)if(t[r]!=n[r-1]){for(t=t[r].getElementsByTagName("a");0<t.length;){for(n=t[0].parentNode;null!=t[0].firstChild;)n.insertBefore(t[0].firstChild,t[0]);n.removeChild(t[0])}break}}else document.execCommand("createlink",!1,mxUtils.trim(e))},Graph.prototype.isCellResizable=function(e){var t=mxGraph.prototype.isCellResizable.apply(this,arguments),n=this.view.getState(e),n=null!=n?n.style:this.getCellStyle(e);return t||"0"!=mxUtils.getValue(n,mxConstants.STYLE_RESIZABLE,"1")&&"wrap"==n[mxConstants.STYLE_WHITE_SPACE]},Graph.prototype.distributeCells=function(e,t){null==t&&(t=this.getSelectionCells());if(null!=t&&1<t.length){for(var n=[],r=null,i=null,s=0;s<t.length;s++)if(this.getModel().isVertex(t[s])){var o=this.view.getState(t[s]);if(null!=o){var u=e?o.getCenterX():o.getCenterY(),r=null!=r?Math.max(r,u):u,i=null!=i?Math.min(i,u):u;n.push(o)}}if(2<n.length){n.sort(function(t,n){return e?t.x-n.x:t.y-n.y}),o=this.view.translate,u=this.view.scale,i=i/u-(e?o.x:o.y),r=r/u-(e?o.x:o.y),this.getModel().beginUpdate();try{for(var a=(r-i)/(n.length-1),r=i,s=1;s<n.length-1;s++){var f=this.view.getState(this.model.getParent(n[s].cell)),l=this.getCellGeometry(n[s].cell),r=r+a;null!=l&&null!=f&&(l=l.clone(),e?l.x=Math.round(r-l.width/2)-f.origin.x:l.y=Math.round(r-l.height/2)-f.origin.y,this.getModel().setGeometry(n[s].cell,l))}}finally{this.getModel().endUpdate()}}}return t},Graph.prototype.isCloneEvent=function(e){return mxClient.IS_MAC&&mxEvent.isMetaDown(e)||mxEvent.isControlDown(e)},Graph.prototype.encodeCells=function(e){for(var t=this.cloneCells(e),n=new mxDictionary,r=0;r<e.length;r++)n.put(e[r],!0);for(r=0;r<t.length;r++){var i=this.view.getState(e[r]);if(null!=i){var s=this.getCellGeometry(t[r]);null==s||!s.relative||this.model.isEdge(e[r])||n.get(this.model.getParent(e[r]))||(s.relative=!1,s.x=i.x/i.view.scale-i.view.translate.x,s.y=i.y/i.view.scale-i.view.translate.y)}}n=new mxCodec,i=new mxGraphModel,s=i.getChildAt(i.getRoot(),0);for(r=0;r<e.length;r++)i.add(s,t[r]);return n.encode(i)},Graph.prototype.createSvgImageExport=function(){var e=new mxImageExport;return e.getLinkForCellState=mxUtils.bind(this,function(e,t){return this.getLinkForCell(e.cell)}),e},Graph.prototype.getSvg=function(e,t,n,r,i,s,o,u,a,f){var l=this.useCssTransforms;l&&(this.useCssTransforms=!1,this.view.revalidate(),this.sizeDidChange());try{t=null!=t?t:1,n=null!=n?n:0,i=null!=i?i:!0,s=null!=s?s:!0,o=null!=o?o:!0;var c=s||r?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(null==c)throw Error(mxResources.get("drawingEmpty"));var h=this.view.scale,p=mxUtils.createXmlDocument(),d=null!=p.createElementNS?p.createElementNS(mxConstants.NS_SVG,"svg"):p.createElement("svg");null!=e&&(null!=d.style?d.style.backgroundColor=e:d.setAttribute("style","background-color:"+e)),null==p.createElementNS?(d.setAttribute("xmlns",mxConstants.NS_SVG),d.setAttribute("xmlns:xlink",mxConstants.NS_XLINK)):d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants.NS_XLINK),e=t/h;var v=Math.max(1,Math.ceil(c.width*e)+2*n)+(f?5:0),m=Math.max(1,Math.ceil(c.height*e)+2*n)+(f?5:0);d.setAttribute("version","1.1"),d.setAttribute("width",v+"px"),d.setAttribute("height",m+"px"),d.setAttribute("viewBox",(i?"-0.5 -0.5":"0 0")+" "+v+" "+m),p.appendChild(d);var g=this.createSvgCanvas(d);g.foOffset=i?-0.5:0,g.textOffset=i?-0.5:0,g.imageOffset=i?-0.5:0,g.translate(Math.floor((n/t-c.x)/h),Math.floor((n/t-c.y)/h));var y=document.createElement("textarea"),b=g.createAlternateContent;g.createAlternateContent=function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=this.state;if(null==this.foAltText||!(0==r||0!=p.fontSize&&s.length<5*r/p.fontSize))return b.apply(this,arguments);var d=this.createElement("text");d.setAttribute("x",Math.round(r/2)),d.setAttribute("y",Math.round((i+p.fontSize)/2)),d.setAttribute("fill",p.fontColor||"black"),d.setAttribute("text-anchor","middle"),d.setAttribute("font-size",Math.round(p.fontSize)+"px"),d.setAttribute("font-family",p.fontFamily),(p.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&d.setAttribute("font-weight","bold"),(p.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&d.setAttribute("font-style","italic"),(p.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&d.setAttribute("text-decoration","underline");try{return y.innerHTML=s,d.textContent=y.value,d}catch(v){return b.apply(this,arguments)}};var w=this.backgroundImage;if(null!=w){t=h/t;var E=this.view.translate,S=new mxRectangle(E.x*t,E.y*t,w.width*t,w.height*t);mxUtils.intersects(c,S)&&g.image(E.x,E.y,w.width,w.height,w.src,!0)}g.scale(e),g.textEnabled=o,u=null!=u?u:this.createSvgImageExport();var x=u.drawCellState;return u.drawCellState=function(e,t){for(var n=e.view.graph,r=n.isCellSelected(e.cell),i=n.model.getParent(e.cell);!s&&!r&&null!=i;)r=n.isCellSelected(i),i=n.model.getParent(i);(s||r)&&x.apply(this,arguments)},u.drawState(this.getView().getState(this.model.root),g),this.updateSvgLinks(d,a,!0),d}finally{l&&(this.useCssTransforms=!0,this.view.revalidate(),this.sizeDidChange())}},Graph.prototype.updateSvgLinks=function(e,t,n){e=e.getElementsByTagName("a");for(var r=0;r<e.length;r++){var i=e[r].getAttribute("href");null==i&&(i=e[r].getAttribute("xlink:href")),null!=i&&(null!=t&&/^https?:\/\//.test(i)?e[r].setAttribute("target",t):n&&this.isCustomLink(i)&&e[r].setAttribute("href","javascript:void(0);"))}},Graph.prototype.createSvgCanvas=function(e){return new mxSvgCanvas2D(e)},Graph.prototype.getSelectedElement=function(){var e=null;if(window.getSelection){var t=window.getSelection();t.getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0).commonAncestorContainer)}else document.selection&&(e=document.selection.createRange().parentElement());return e},Graph.prototype.getParentByName=function(e,t,n){for(;null!=e&&e.nodeName!=t;){if(e==n)return null;e=e.parentNode}return e},Graph.prototype.selectNode=function(e){var t=null;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){var n=document.createRange();n.selectNode(e),t.removeAllRanges(),t.addRange(n)}}else(t=document.selection)&&"Control"!=t.type&&(e=t.createRange(),e.collapse(!0),n=t.createRange(),n.setEndPoint("StartToStart",e),n.select())},Graph.prototype.insertRow=function(e,t){for(var n=e.tBodies[0],r=n.rows[0].cells,i=0,s=0;s<r.length;s++)var o=r[s].getAttribute("colspan"),i=i+(null!=o?parseInt(o):1);n=n.insertRow(t);for(s=0;s<i;s++)mxUtils.br(n.insertCell(-1));return n.cells[0]},Graph.prototype.deleteRow=function(e,t){e.tBodies[0].deleteRow(t)},Graph.prototype.insertColumn=function(e,t){var n=e.tHead;if(null!=n)for(var r=0;r<n.rows.length;r++){var i=document.createElement("th");n.rows[r].appendChild(i),mxUtils.br(i)}n=e.tBodies[0];for(r=0;r<n.rows.length;r++)i=n.rows[r].insertCell(t),mxUtils.br(i);return n.rows[0].cells[0<=t?t:n.rows[0].cells.length-1]},Graph.prototype.deleteColumn=function(e,t){if(0<=t)for(var n=e.tBodies[0].rows,r=0;r<n.length;r++)n[r].cells.length>t&&n[r].deleteCell(t)},Graph.prototype.pasteHtmlAtCaret=function(e){var t;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){t=t.getRangeAt(0),t.deleteContents();var n=document.createElement("div");n.innerHTML=e,e=document.createDocumentFragment();for(var r;r=n.firstChild;)lastNode=e.appendChild(r);t.insertNode(e)}}else(t=document.selection)&&"Control"!=t.type&&t.createRange().pasteHTML(e)},Graph.prototype.createLinkForHint=function(e,t){function n(e,t){return e.length>t&&(e=e.substring(0,Math.round(t/2))+"..."+e.substring(e.length-Math.round(t/4))),e}e=null!=e?e:"javascript:void(0);";if(null==t||0==t.length)t=this.isCustomLink(e)?this.getLinkTitle(e):e;var r=document.createElement("a");return r.setAttribute("rel",this.linkRelation),r.setAttribute("href",this.getAbsoluteUrl(e)),r.setAttribute("title",n(this.isCustomLink(e)?this.getLinkTitle(e):e,80)),null!=this.linkTarget&&r.setAttribute("target",this.linkTarget),mxUtils.write(r,n(t,40)),this.isCustomLink(e)&&mxEvent.addListener(r,"click",mxUtils.bind(this,function(t){this.customLinkClicked(e),mxEvent.consume(t)})),r},Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return null!=this.graph.connectionHandler.first},this.addListener(mxEvent.START_EDITING,function(e,t){this.popupMenuHandler.hideMenu()});var e=this.updateMouseEvent;this.updateMouseEvent=function(t){t=e.apply(this,arguments);if(mxEvent.isTouchEvent(t.getEvent())&&null==t.getState()){var n=this.getCellAt(t.graphX,t.graphY);null!=n&&this.isSwimlane(n)&&this.hitsSwimlaneContent(n,t.graphX,t.graphY)||(t.state=this.view.getState(n),null!=t.state&&null!=t.state.shape&&(this.container.style.cursor=t.state.shape.node.style.cursor))}return null==t.getState()&&this.isEnabled()&&(this.container.style.cursor="default"),t};var t=!1,n=!1,r=!1,i=this.fireMouseEvent;this.fireMouseEvent=function(e,s,o){e==mxEvent.MOUSE_DOWN&&(s=this.updateMouseEvent(s),t=this.isCellSelected(s.getCell()),n=this.isSelectionEmpty(),r=this.popupMenuHandler.isMenuShowing()),i.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(e,i){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(null==i.getState()||!i.isSource(i.getState().control))&&(this.popupMenuHandler.popupTrigger||!r&&!mxEvent.isMouseEvent(i.getEvent())&&(n&&null==i.getCell()&&this.isSelectionEmpty()||t&&this.isCellSelected(i.getCell()))),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})},mxCellEditor.prototype.isContentEditing=function(){var e=this.graph.view.getState(this.editingCell);return null!=e&&1==e.style.html},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount){for(var t=[],n=0,r=e.rangeCount;n<r;++n)t.push(e.getRangeAt(n));return t}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(e){try{if(e)if(window.getSelection){sel=window.getSelection(),sel.removeAllRanges();for(var t=0,n=e.length;t<n;++t)sel.addRange(e[t])}else document.selection&&e.select&&e.select()}catch(r){}};var i=mxCellRenderer.prototype.initializeLabel;mxCellRenderer.prototype.initializeLabel=function(e){null!=e.text&&(e.text.replaceLinefeeds="0"!=mxUtils.getValue(e.style,"nl2Br","1")),i.apply(this,arguments)};var s=mxConstraintHandler.prototype.update;mxConstraintHandler.prototype.update=function(e,t){this.isKeepFocusEvent(e)||!mxEvent.isAltDown(e.getEvent())?s.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(e){return new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH)},mxCellEditor.prototype.escapeCancelsEditing=!1;var o=mxCellEditor.prototype.startEditing;mxCellEditor.prototype.startEditing=function(e,t){o.apply(this,arguments);var n=this.graph.view.getState(e);this.textarea.className=null!=n&&1==n.style.html?"mxCellEditor geContentEditable":"mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(e);var n=this.graph.getModel().getParent(e),r=this.graph.getCellGeometry(e);this.graph.getModel().isEdge(n)&&null!=r&&r.relative||this.graph.getModel().isEdge(e)?mxClient.IS_QUIRKS?this.textarea.style.border="gray dotted 1px":this.textarea.style.outline=mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_FF&&mxClient.IS_WIN?"gray dotted 1px":"":mxClient.IS_QUIRKS&&(this.textarea.style.outline="none",this.textarea.style.border="")};var u=mxCellEditor.prototype.installListeners;mxCellEditor.prototype.installListeners=function(e){function t(e,n){n.originalNode=e,e=e.firstChild;for(var r=n.firstChild;null!=e&&null!=r;)t(e,r),e=e.nextSibling,r=r.nextSibling;return n}function n(e,t){if(null!=e)if(t.originalNode!=e)r(e);else for(e=e.firstChild,t=t.firstChild;null!=e;){var i=e.nextSibling;null==t?r(e):(n(e,t),t=t.nextSibling),e=i}}function r(e){for(var t=e.firstChild;null!=t;){var n=t.nextSibling;r(t),t=n}1==e.nodeType&&("BR"===e.nodeName||null!=e.firstChild)||3==e.nodeType&&0!=mxUtils.trim(mxUtils.getTextContent(e)).length?(3==e.nodeType&&mxUtils.setTextContent(e,mxUtils.getTextContent(e).replace(/\n|\r/g,"")),1==e.nodeType&&(e.removeAttribute("style"),e.removeAttribute("class"),e.removeAttribute("width"),e.removeAttribute("cellpadding"),e.removeAttribute("cellspacing"),e.removeAttribute("border"))):e.parentNode.removeChild(e)}u.apply(this,arguments),mxClient.IS_QUIRKS||7===document.documentMode||8===document.documentMode||mxEvent.addListener(this.textarea,"paste",mxUtils.bind(this,function(e){var r=t(this.textarea,this.textarea.cloneNode(!0));window.setTimeout(mxUtils.bind(this,function(){n(this.textarea,r)}),0)}))},mxCellEditor.prototype.toggleViewMode=function(){var e=this.graph.view.getState(this.editingCell),t=null!=e&&"0"!=mxUtils.getValue(e.style,"nl2Br","1"),n=this.saveSelection();if(this.codeViewMode){u=mxUtils.extractTextWithWhitespace(this.textarea.childNodes),0<u.length&&"\n"==u.charAt(u.length-1)&&(u=u.substring(0,u.length-1)),u=this.graph.sanitizeHtml(t?u.replace(/\n/g,"<br/>"):u,!0),this.textarea.className="mxCellEditor geContentEditable";var r=mxUtils.getValue(e.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),t=mxUtils.getValue(e.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),i=mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),s=(mxUtils.getValue(e.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,o=(mxUtils.getValue(e.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,e=(mxUtils.getValue(e.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(r*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(r)+"px",this.textarea.style.textDecoration=e?"underline":"",this.textarea.style.fontWeight=s?"bold":"normal",this.textarea.style.fontStyle=o?"italic":"",this.textarea.style.fontFamily=t,this.textarea.style.textAlign=i,this.textarea.style.padding="0px",this.textarea.innerHTML!=u&&(this.textarea.innerHTML=u,0==this.textarea.innerHTML.length&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length)),this.codeViewMode=!1}else{this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerHTML="");var u=mxUtils.htmlEntities(this.textarea.innerHTML);mxClient.IS_QUIRKS||8==document.documentMode||(u=mxUtils.replaceTrailingNewlines(u,"<div><br></div>")),u=this.graph.sanitizeHtml(t?u.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):u,!0),this.textarea.className="mxCellEditor mxPlainTextEditor";var r=mxConstants.DEFAULT_FONTSIZE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(r*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(r)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.padding="2px",this.textarea.innerHTML!=u&&(this.textarea.innerHTML=u),this.codeViewMode=!0}this.textarea.focus(),null!=this.switchSelectionState&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=n,this.resize()};var a=mxCellEditor.prototype.resize;mxCellEditor.prototype.resize=function(e,t){if(null!=this.textarea)if(e=this.graph.getView().getState(this.editingCell),this.codeViewMode&&null!=e){var n=e.view.scale;this.bounds=mxRectangle.fromRectangle(e);if(0==this.bounds.width&&0==this.bounds.height){this.bounds.width=160*n,this.bounds.height=60*n;var r=null!=e.text?e.text.margin:null;null==r&&(r=mxUtils.getAlignmentAsPoint(mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),this.bounds.x+=r.x*this.bounds.width,this.bounds.y+=r.y*this.bounds.height}this.textarea.style.width=Math.round((this.bounds.width-4)/n)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/n)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/n)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*n),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/n)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*n),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",mxClient.IS_VML?this.textarea.style.zoom=n:mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+n+","+n+")")}else this.textarea.style.height="",this.textarea.style.overflow="",a.apply(this,arguments)},mxCellEditorGetInitialValue=mxCellEditor.prototype.getInitialValue,mxCellEditor.prototype.getInitialValue=function(e,t){if("0"==mxUtils.getValue(e.style,"html","0"))return mxCellEditorGetInitialValue.apply(this,arguments);var n=this.graph.getEditingValue(e.cell,t);return"1"==mxUtils.getValue(e.style,"nl2Br","1")&&(n=n.replace(/\n/g,"<br/>")),n=this.graph.sanitizeHtml(n,!0)},mxCellEditorGetCurrentValue=mxCellEditor.prototype.getCurrentValue,mxCellEditor.prototype.getCurrentValue=function(e){if("0"==mxUtils.getValue(e.style,"html","0"))return mxCellEditorGetCurrentValue.apply(this,arguments);var t=this.graph.sanitizeHtml(this.textarea.innerHTML,!0);return t="1"==mxUtils.getValue(e.style,"nl2Br","1")?t.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"):t.replace(/\r\n/g,"").replace(/\n/g,"")};var f=mxCellEditor.prototype.stopEditing;mxCellEditor.prototype.stopEditing=function(e){this.codeViewMode&&this.toggleViewMode(),f.apply(this,arguments),this.focusContainer()},mxCellEditor.prototype.focusContainer=function(){try{this.graph.container.focus()}catch(e){}};var l=mxCellEditor.prototype.applyValue;mxCellEditor.prototype.applyValue=function(e,t){this.graph.getModel().beginUpdate();try{if(l.apply(this,arguments),this.graph.isCellDeletable(e.cell)&&0==this.graph.model.getChildCount(e.cell)){var n=mxUtils.getValue(e.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),r=mxUtils.getValue(e.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);""==t&&n==mxConstants.NONE&&r==mxConstants.NONE&&this.graph.removeCells([e.cell],!1)}}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(e){var t=null;if(this.graph.getModel().isEdge(e.cell)||this.graph.getModel().isEdge(this.graph.getModel().getParent(e.cell)))t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null),t==mxConstants.NONE&&(t=null);return t},mxCellEditor.prototype.getMinimumSize=function(e){var t=this.graph.getView().scale;return new mxRectangle(0,0,null==e.text?30:e.text.size*t+20,30)};var c=mxGraphHandler.prototype.moveCells;mxGraphHandler.prototype.moveCells=function(e,t,n,r,i,s){mxEvent.isAltDown(s)&&(i=null),c.apply(this,arguments)},mxGraphHandler.prototype.updateHint=function(t){if(null!=this.shape){null==this.hint&&(this.hint=e(),this.graph.container.appendChild(this.hint));var n=this.graph.view.translate,r=this.graph.view.scale;t=this.roundLength((this.bounds.x+this.currentDx)/r-n.x),n=this.roundLength((this.bounds.y+this.currentDy)/r-n.y),this.hint.innerHTML=t+", "+n,this.hint.style.left=this.shape.bounds.x+Math.round((this.shape.bounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.shape.bounds.y+this.shape.bounds.height+12+"px"}},mxGraphHandler.prototype.removeHint=function(){null!=this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)},mxVertexHandler.prototype.isRecursiveResize=function(e,t){return!this.graph.isSwimlane(e.cell)&&0<this.graph.model.getChildCount(e.cell)&&!mxEvent.isControlDown(t.getEvent())&&!this.graph.isCellCollapsed(e.cell)&&"1"==mxUtils.getValue(e.style,"recursiveResize","1")&&null==mxUtils.getValue(e.style,"childLayout",null)},mxVertexHandler.prototype.isCenteredEvent=function(e,t){return!(!this.graph.isSwimlane(e.cell)&&0<this.graph.model.getChildCount(e.cell)&&!this.graph.isCellCollapsed(e.cell)&&"1"==mxUtils.getValue(e.style,"recursiveResize","1")&&null==mxUtils.getValue(e.style,"childLayout",null))&&mxEvent.isControlDown(t.getEvent())||mxEvent.isMetaDown(t.getEvent())};var h=mxVertexHandler.prototype.getHandlePadding;mxVertexHandler.prototype.getHandlePadding=function(){var e=new mxPoint(0,0),t=this.tolerance;return this.graph.cellEditor.getEditingCell()==this.state.cell&&null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]?(t/=2,e.x=this.sizers[0].bounds.width+t,e.y=this.sizers[0].bounds.height+t):e=h.apply(this,arguments),e},mxVertexHandler.prototype.updateHint=function(t){this.index!=mxEvent.LABEL_HANDLE&&(null==this.hint&&(this.hint=e(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent.ROTATION_HANDLE?this.hint.innerHTML=this.currentAlpha+"&deg;":(t=this.state.view.scale,this.hint.innerHTML=this.roundLength(this.bounds.width/t)+" x "+this.roundLength(this.bounds.height/t)),t=mxUtils.getBoundingBox(this.bounds,null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),null==t&&(t=this.bounds),this.hint.style.left=t.x+Math.round((t.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=t.y+t.height+12+"px",null!=this.linkHint&&(this.linkHint.style.display="none"))},mxVertexHandler.prototype.removeHint=function(){mxGraphHandler.prototype.removeHint.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.updateHint=function(t,n){null==this.hint&&(this.hint=e(),this.state.view.graph.container.appendChild(this.hint));var r=this.graph.view.translate,i=this.graph.view.scale,s=this.roundLength(n.x/i-r.x),r=this.roundLength(n.y/i-r.y);this.hint.innerHTML=s+", "+r,this.hint.style.visibility="visible";if(this.isSource||this.isTarget)null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(s=this.constraintHandler.currentConstraint.point,this.hint.innerHTML="["+Math.round(100*s.x)+"%, "+Math.round(100*s.y)+"%]"):this.marker.hasValidState()&&(this.hint.style.visibility="hidden");this.hint.style.left=Math.round(t.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(t.getGraphY(),n.y)+this.state.view.graph.gridSize+"px",null!=this.linkHint&&(this.linkHint.style.display="none")},mxEdgeHandler.prototype.removeHint=mxVertexHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/>'):new mxImage(IMAGE_PATH+"/handle-main.png",17,17),HoverIcons.prototype.secondaryHandle=mxClient.IS_SVG?Graph.createSvgImage(16,16,'<path d="m 8 3 L 13 8 L 8 13 L 3 8 z" stroke="#fff" fill="#fca000"/>'):new mxImage(IMAGE_PATH+"/handle-secondary.png",17,17),HoverIcons.prototype.fixedHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><path d="m 7 7 L 11 11 M 7 11 L 11 7" stroke="#fff"/>'):new mxImage(IMAGE_PATH+"/handle-fixed.png",17,17),HoverIcons.prototype.terminalHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><circle cx="9" cy="9" r="2" stroke="#fff" fill="transparent"/>'):new mxImage(IMAGE_PATH+"/handle-terminal.png",17,17),HoverIcons.prototype.rotationHandle=new mxImage(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAVCAYAAACkCdXRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA6ZJREFUeNqM001IY1cUB/D/fYmm2sbR2lC1zYlgoRG6MpEyBlpxM9iFIGKFIm3s0lCKjOByhCLZCFqLBF1YFVJdSRbdFHRhBbULtRuFVBTzYRpJgo2mY5OX5N9Fo2TG+eiFA/dd3vvd8+65ByTxshARTdf1JySp6/oTEdFe9T5eg5lIcnBwkCSZyWS+exX40oyur68/KxaLf5Okw+H4X+A9JBaLfUySZ2dnnJqaosPhIAACeC34DJRKpb7IZrMcHx+nwWCgUopGo/EOKwf9fn/1CzERUevr6+9ls1mOjIwQAH0+H4PBIKPR6D2ofAQCgToRUeVYJUkuLy8TANfW1kiS8/PzCy84Mw4MDBAAZ2dnmc/nub+/X0MSEBF1cHDwMJVKsaGhgV6vl+l0mqOjo1+KyKfl1dze3l4NBoM/PZ+diFSLiIKIGBOJxA9bW1sEwNXVVSaTyQMRaRaRxrOzs+9J8ujoaE5EPhQRq67rcZ/PRwD0+/3Udf03EdEgIqZisZibnJykwWDg4eEhd3Z2xkXELCJvPpdBrYjUiEhL+Xo4HH4sIhUaAKNSqiIcDsNkMqG+vh6RSOQQQM7tdhsAQCkFAHC73UUATxcWFqypVApmsxnDw8OwWq2TADQNgAYAFosF+XweyWQSdru9BUBxcXFRB/4rEgDcPouIIx6P4+bmBi0tLSCpAzBqAIqnp6c/dnZ2IpfLYXNzE62traMADACKNputpr+/v8lms9UAKAAwiMjXe3t7KBQKqKurQy6Xi6K0i2l6evpROp1mbW0t29vbGY/Hb8/IVIqq2zlJXl1dsaOjg2azmefn5wwEAl+JSBVExCgi75PkzMwMlVJsbGxkIpFgPp8PX15ePopEIs3JZPITXdf/iEajbGpqolKKExMT1HWdHo/nIxGpgIgoEXnQ3d39kCTHxsYIgC6Xi3NzcwyHw8xkMozFYlxaWmJbWxuVUuzt7WUul6PX6/1cRN4WEe2uA0SkaWVl5XGpRVhdXU0A1DSNlZWVdz3qdDrZ09PDWCzG4+Pjn0XEWvp9KJKw2WwKwBsA3gHQHAqFfr24uMDGxgZ2d3cRiUQAAHa7HU6nE319fTg5Ofmlq6vrGwB/AngaCoWK6rbsNptNA1AJoA7Aux6Pp3NoaMhjsVg+QNmIRqO/u1yubwFEASRKUAEA7rASqABUAKgC8KAUb5XWCOAfAFcA/gJwDSB7C93DylCtdM8qABhLc5TumV6KQigUeubjfwcAHkQJ94ndWeYAAAAASUVORK5CYII=":IMAGE_PATH+"/handle-rotate.png",19,21),mxClient.IS_SVG&&(mxConstraintHandler.prototype.pointImage=Graph.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="'+HoverIcons.prototype.arrowFill+'"/>')),mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,null!=window.Sidebar&&(Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop),mxClient.IS_SVG||((new Image).src=HoverIcons.prototype.mainHandle.src,(new Image).src=HoverIcons.prototype.fixedHandle.src,(new Image).src=HoverIcons.prototype.terminalHandle.src,(new Image).src=HoverIcons.prototype.secondaryHandle.src,(new Image).src=HoverIcons.prototype.rotationHandle.src,(new Image).src=HoverIcons.prototype.triangleUp.src,(new Image).src=HoverIcons.prototype.triangleRight.src,(new Image).src=HoverIcons.prototype.triangleDown.src,(new Image).src=HoverIcons.prototype.triangleLeft.src,(new Image).src=HoverIcons.prototype.refreshTarget.src,(new Image).src=HoverIcons.prototype.roundDrop.src),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxVertexHandler.prototype.rotationHandleVSpacing=-20,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(e){return!mxEvent.isShiftDown(e.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(e){return!mxEvent.isShiftDown(e.getEvent())};if(Graph.touchStyle){if(mxClient.IS_TOUCH||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-24,mxConstraintHandler.prototype.getTolerance=function(e){return mxEvent.isMouseEvent(e.getEvent())?4:this.graph.getTolerance()};mxPanningHandler.prototype.isPanningTrigger=function(e){var t=e.getEvent();return null==e.getState()&&!mxEvent.isMouseEvent(t)||mxEvent.isPopupTrigger(t)&&(null==e.getState()||mxEvent.isControlDown(t)||mxEvent.isShiftDown(t))};var p=mxGraphHandler.prototype.mouseDown;mxGraphHandler.prototype.mouseDown=function(e,t){p.apply(this,arguments),mxEvent.isTouchEvent(t.getEvent())&&this.graph.isCellSelected(t.getCell())&&1<this.graph.getSelectionCount()&&(this.delayedSelection=!1)}}else mxPanningHandler.prototype.isPanningTrigger=function(e){var t=e.getEvent();return mxEvent.isLeftMouseButton(t)&&(this.useLeftButtonForPanning&&null==e.getState()||mxEvent.isControlDown(t)&&!mxEvent.isShiftDown(t))||this.usePopupTrigger&&mxEvent.isPopupTrigger(t)};mxRubberband.prototype.isSpaceEvent=function(e){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent.isControlDown(e.getEvent())&&mxEvent.isShiftDown(e.getEvent())},mxRubberband.prototype.mouseUp=function(e,t){var n=null!=this.div&&"none"!=this.div.style.display,r=null,i=null,s=null,o=null;null!=this.first&&null!=this.currentX&&null!=this.currentY&&(r=this.first.x,i=this.first.y,s=(this.currentX-r)/this.graph.view.scale,o=(this.currentY-i)/this.graph.view.scale,mxEvent.isAltDown(t.getEvent())||(s=this.graph.snap(s),o=this.graph.snap(o),this.graph.isGridEnabled()||(Math.abs(s)<this.graph.tolerance&&(s=0),Math.abs(o)<this.graph.tolerance&&(o=0)))),this.reset();if(n){if(mxEvent.isAltDown(t.getEvent())&&this.graph.isToggleEvent(t.getEvent())){var s=new mxRectangle(this.x,this.y,this.width,this.height),u=this.graph.getCells(s.x,s.y,s.width,s.height);this.graph.removeSelectionCells(u)}else if(this.isSpaceEvent(t)){this.graph.model.beginUpdate();try{for(u=this.graph.getCellsBeyond(r,i,this.graph.getDefaultParent(),!0,!0),n=0;n<u.length;n++)if(this.graph.isCellMovable(u[n])){var a=this.graph.view.getState(u[n]),f=this.graph.getCellGeometry(u[n]);null!=a&&null!=f&&(f=f.clone(),f.translate(s,o),this.graph.model.setGeometry(u[n],f))}}finally{this.graph.model.endUpdate()}}else s=new mxRectangle(this.x,this.y,this.width,this.height),this.graph.selectRegion(s,t.getEvent());t.consume()}},mxRubberband.prototype.mouseMove=function(e,t){if(!t.isConsumed()&&null!=this.first){var n=mxUtils.getScrollOrigin(this.graph.container),r=mxUtils.getOffset(this.graph.container);n.x-=r.x,n.y-=r.y;var r=t.getX()+n.x,n=t.getY()+n.y,i=this.first.x-r,s=this.first.y-n,o=this.graph.tolerance;if(null!=this.div||Math.abs(i)>o||Math.abs(s)>o)null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(r,n),this.isSpaceEvent(t)?(r=this.x+this.width,n=this.y+this.height,i=this.graph.view.scale,mxEvent.isAltDown(t.getEvent())||(this.width=this.graph.snap(this.width/i)*i,this.height=this.graph.snap(this.height/i)*i,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=r-this.width),this.y<this.first.y&&(this.y=n-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=0>=this.width?"0px 1px 0px 0px":"0px 1px 0px 1px",null==this.secondDiv&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=0>=this.height?"1px 0px 0px 0px":"1px 0px 1px 0px"):(this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null)),t.consume()}};var d=mxRubberband.prototype.reset;mxRubberband.prototype.reset=function(){null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),d.apply(this,arguments)};var v=(new Date).getTime(),m=0,g=mxEdgeHandler.prototype.updatePreviewState;mxEdgeHandler.prototype.updatePreviewState=function(e,t,n,r){g.apply(this,arguments),n!=this.currentTerminalState?(v=(new Date).getTime(),m=0):m=(new Date).getTime()-v,this.currentTerminalState=n};var y=mxEdgeHandler.prototype.isOutlineConnectEvent;mxEdgeHandler.prototype.isOutlineConnectEvent=function(e){return null!=this.currentTerminalState&&e.getState()==this.currentTerminalState&&2e3<m||(null==this.currentTerminalState||"0"!=mxUtils.getValue(this.currentTerminalState.style,"outlineConnect","1"))&&y.apply(this,arguments)},mxVertexHandler.prototype.isCustomHandleEvent=function(e){return!mxEvent.isShiftDown(e.getEvent())},mxEdgeHandler.prototype.createHandleShape=function(e,t){var n=null!=e&&0==e,r=this.state.getVisibleTerminalState(n),i=null!=e&&(0==e||e>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler&&2==e)?this.graph.getConnectionConstraint(this.state,r,n):null,n=null!=(null!=i?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(n),i):null)?this.fixedHandleImage:null!=i&&null!=r?this.terminalHandleImage:this.handleImage;return null!=n?(n=new mxImageShape(new mxRectangle(0,0,n.width,n.height),n.src),n.preserveImageAspect=!1,n):(n=mxConstants.HANDLE_SIZE,this.preferHtml&&--n,new mxRectangleShape(new mxRectangle(0,0,n,n),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))};var b=mxVertexHandler.prototype.createSizerShape;mxVertexHandler.prototype.createSizerShape=function(e,t,n){return this.handleImage=t==mxEvent.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:t==mxEvent.LABEL_HANDLE?this.secondaryHandleImage:this.handleImage,b.apply(this,arguments)};var w=mxGraphHandler.prototype.getBoundingBox;mxGraphHandler.prototype.getBoundingBox=function(e){if(null!=e&&1==e.length){var t=this.graph.getModel(),n=t.getParent(e[0]),r=this.graph.getCellGeometry(e[0]);if(t.isEdge(n)&&null!=r&&r.relative&&(t=this.graph.view.getState(e[0]),null!=t&&2>t.width&&2>t.height&&null!=t.text&&null!=t.text.boundingBox))return mxRectangle.fromRectangle(t.text.boundingBox)}return w.apply(this,arguments)};var E=mxVertexHandler.prototype.getSelectionBounds;mxVertexHandler.prototype.getSelectionBounds=function(e){var t=this.graph.getModel(),n=t.getParent(e.cell),r=this.graph.getCellGeometry(e.cell);return t.isEdge(n)&&null!=r&&r.relative&&2>e.width&&2>e.height&&null!=e.text&&null!=e.text.boundingBox?(t=e.text.unrotatedBoundingBox||e.text.boundingBox,new mxRectangle(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height))):E.apply(this,arguments)};var S=mxVertexHandler.prototype.mouseDown;mxVertexHandler.prototype.mouseDown=function(e,t){var n=this.graph.getModel(),r=n.getParent(this.state.cell),i=this.graph.getCellGeometry(this.state.cell);(this.getHandleForEvent(t)==mxEvent.ROTATION_HANDLE||!n.isEdge(r)||null==i||!i.relative||null==this.state||2<=this.state.width||2<=this.state.height)&&S.apply(this,arguments)},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(0>=mxGraphHandler.prototype.maxCells||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.rotateClick=function(){this.state.view.graph.turnShapes([this.state.cell])};var x=mxVertexHandler.prototype.mouseMove;mxVertexHandler.prototype.mouseMove=function(e,t){x.apply(this,arguments),null!=this.graph.graphHandler.first&&null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display="none")};var T=mxVertexHandler.prototype.mouseUp;mxVertexHandler.prototype.mouseUp=function(e,t){T.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none")};var N=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){N.apply(this,arguments);var e=!1;null!=this.rotationShape&&this.rotationShape.node.setAttribute("title",mxResources.get("rotateTooltip"));var t=mxUtils.bind(this,function(){null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.specialHandle&&(this.specialHandle.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none"),this.redrawHandles()});this.selectionHandler=mxUtils.bind(this,function(e,n){t()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler),this.changeHandler=mxUtils.bind(this,function(e,n){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),t()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.editingHandler=mxUtils.bind(this,function(e,t){this.redrawHandles()}),this.graph.addListener(mxEvent.EDITING_STOPPED,this.editingHandler);var n=this.graph.getLinkForCell(this.state.cell),r=this.graph.getLinksForState(this.state);this.updateLinkHint(n,r);if(null!=n||null!=r&&0<r.length)e=!0;e&&this.redrawHandles()},mxVertexHandler.prototype.updateLinkHint=function(t,n){if(null==t&&(null==n||0==n.length)||1<this.graph.getSelectionCount())null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(null!=t||null!=n&&0<n.length){null==this.linkHint&&(this.linkHint=e(),this.linkHint.style.padding="6px 8px 6px 8px",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.graph.container.appendChild(this.linkHint)),this.linkHint.innerHTML="";if(null!=t&&(this.linkHint.appendChild(this.graph.createLinkForHint(t)),this.graph.isEnabled()&&"function"==typeof this.graph.editLink)){var r=document.createElement("img");r.setAttribute("src",Editor.editImage),r.setAttribute("title",mxResources.get("editLink")),r.setAttribute("width","11"),r.setAttribute("height","11"),r.style.marginLeft="10px",r.style.marginBottom="-1px",r.style.cursor="pointer",this.linkHint.appendChild(r),mxEvent.addListener(r,"click",mxUtils.bind(this,function(e){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent.consume(e)})),r=document.createElement("img"),r.setAttribute("src",Dialog.prototype.clearImage),r.setAttribute("title",mxResources.get("removeIt",[mxResources.get("link")])),r.setAttribute("width","13"),r.setAttribute("height","10"),r.style.marginLeft="4px",r.style.marginBottom="-1px",r.style.cursor="pointer",this.linkHint.appendChild(r),mxEvent.addListener(r,"click",mxUtils.bind(this,function(e){this.graph.setLinkForCell(this.state.cell,null),mxEvent.consume(e)}))}if(null!=n)for(r=0;r<n.length;r++){var i=document.createElement("div");i.style.marginTop=null!=t||0<r?"6px":"0px",i.appendChild(this.graph.createLinkForHint(n[r].getAttribute("href"),mxUtils.getTextContent(n[r]))),this.linkHint.appendChild(i)}}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint;var C=mxEdgeHandler.prototype.init;mxEdgeHandler.prototype.init=function(){C.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var e=mxUtils.bind(this,function(){null!=this.linkHint&&(this.linkHint.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.labelShape&&(this.labelShape.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none")});this.selectionHandler=mxUtils.bind(this,function(t,n){e()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.selectionHandler),this.changeHandler=mxUtils.bind(this,function(t,n){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),e(),this.redrawHandles()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler);var t=this.graph.getLinkForCell(this.state.cell),n=this.graph.getLinksForState(this.state);if(null!=t||null!=n&&0<n.length)this.updateLinkHint(t,n),this.redrawHandles()};var k=mxConnectionHandler.prototype.init;mxConnectionHandler.prototype.init=function(){k.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.graph.connectionHandler.isEnabled()})};var L=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){L.apply(this);if(null!=this.state&&null!=this.linkHint){var e=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),t=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),n=mxUtils.getBoundingBox(t,this.state.style[mxConstants.STYLE_ROTATION]||"0",e),e=null!=n?mxUtils.getBoundingBox(this.state,this.state.style[mxConstants.STYLE_ROTATION]||"0"):this.state,t=null!=this.state.text?this.state.text.boundingBox:null;null==n&&(n=this.state),n=n.y+n.height,null!=t&&(n=Math.max(n,t.y+t.height)),this.linkHint.style.left=Math.max(0,Math.round(e.x+(e.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(n+this.verticalOffset/2+6+this.state.view.graph.tolerance)+"px"}};var A=mxVertexHandler.prototype.reset;mxVertexHandler.prototype.reset=function(){A.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none")};var O=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(){O.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.selectionHandler&&(this.graph.getSelectionModel().removeListener(this.selectionHandler),this.selectionHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),null!=this.editingHandler&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)};var M=mxEdgeHandler.prototype.redrawHandles;mxEdgeHandler.prototype.redrawHandles=function(){if(null!=this.marker&&(M.apply(this),null!=this.state&&null!=this.linkHint)){var e=this.state;null!=this.state.text&&null!=this.state.text.bounds&&(e=new mxRectangle(e.x,e.y,e.width,e.height),e.add(this.state.text.bounds)),this.linkHint.style.left=Math.max(0,Math.round(e.x+(e.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(e.y+e.height+6+this.state.view.graph.tolerance)+"px"}};var _=mxEdgeHandler.prototype.reset;mxEdgeHandler.prototype.reset=function(){_.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.visibility="")};var D=mxEdgeHandler.prototype.destroy;mxEdgeHandler.prototype.destroy=function(){D.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.selectionHandler&&(this.graph.getSelectionModel().removeListener(this.selectionHandler),this.selectionHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null)}}(),function(){function e(){mxCylinder.call(this)}function t(){mxActor.call(this)}function n(){mxCylinder.call(this)}function r(){mxCylinder.call(this)}function i(){mxCylinder.call(this)}function s(){mxActor.call(this)}function o(){mxCylinder.call(this)}function u(){mxActor.call(this)}function a(){mxActor.call(this)}function f(){mxActor.call(this)}function l(){mxActor.call(this)}function c(){mxActor.call(this)}function h(){mxActor.call(this)}function p(){mxActor.call(this)}function d(e,t){this.canvas=e,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.defaultVariation=t,this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils.bind(this,d.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils.bind(this,d.prototype.moveTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils.bind(this,d.prototype.close),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils.bind(this,d.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils.bind(this,d.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils.bind(this,d.prototype.arcTo)}function v(){mxRectangleShape.call(this)}function m(){mxRectangleShape.call(this)}function g(){mxActor.call(this)}function y(){mxActor.call(this)}function b(){mxActor.call(this)}function w(){mxRectangleShape.call(this)}function E(){mxRectangleShape.call(this)}function S(){mxCylinder.call(this)}function x(){mxShape.call(this)}function T(){mxShape.call(this)}function N(){mxEllipse.call(this)}function C(){mxShape.call(this)}function k(){mxShape.call(this)}function L(){mxRectangleShape.call(this)}function A(){mxShape.call(this)}function O(){mxShape.call(this)}function M(){mxShape.call(this)}function _(){mxShape.call(this)}function D(){mxShape.call(this)}function P(){mxCylinder.call(this)}function H(){mxDoubleEllipse.call(this)}function B(){mxDoubleEllipse.call(this)}function j(){mxArrowConnector.call(this),this.spacing=0}function F(){mxArrowConnector.call(this),this.spacing=0}function I(){mxActor.call(this)}function q(){mxRectangleShape.call(this)}function R(){mxActor.call(this)}function U(){mxActor.call(this)}function z(){mxActor.call(this)}function W(){mxActor.call(this)}function X(){mxActor.call(this)}function V(){mxActor.call(this)}function $(){mxActor.call(this)}function J(){mxActor.call(this)}function K(){mxActor.call(this)}function Q(){mxActor.call(this)}function G(){mxEllipse.call(this)}function Y(){mxEllipse.call(this)}function Z(){mxEllipse.call(this)}function et(){mxRhombus.call(this)}function tt(){mxEllipse.call(this)}function nt(){mxEllipse.call(this)}function rt(){mxEllipse.call(this)}function it(){mxEllipse.call(this)}function st(){mxActor.call(this)}function ot(){mxActor.call(this)}function ut(){mxActor.call(this)}function at(){mxConnector.call(this)}function ft(e,t,n,r,i,s,o,u,a,f){o+=a;var l=r.clone();return r.x-=i*(2*o+a),r.y-=s*(2*o+a),i*=o+a,s*=o+a,function(){e.ellipse(l.x-i-o,l.y-s-o,2*o,2*o),f?e.fillAndStroke():e.stroke()}}mxUtils.extend(e,mxCylinder),e.prototype.size=20,e.prototype.darkOpacity=0,e.prototype.darkOpacity2=0,e.prototype.paintVertexShape=function(e,t,n,r,i){var s=Math.max(0,Math.min(r,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity)))),u=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity2",this.darkOpacity2))));e.translate(t,n),e.begin(),e.moveTo(0,0),e.lineTo(r-s,0),e.lineTo(r,s),e.lineTo(r,i),e.lineTo(s,i),e.lineTo(0,i-s),e.lineTo(0,0),e.close(),e.end(),e.fillAndStroke(),this.outline||(e.setShadow(!1),0!=o&&(e.setFillAlpha(Math.abs(o)),e.setFillColor(0>o?"#FFFFFF":"#000000"),e.begin(),e.moveTo(0,0),e.lineTo(r-s,0),e.lineTo(r,s),e.lineTo(s,s),e.close(),e.fill()),0!=u&&(e.setFillAlpha(Math.abs(u)),e.setFillColor(0>u?"#FFFFFF":"#000000"),e.begin(),e.moveTo(0,0),e.lineTo(s,s),e.lineTo(s,i),e.lineTo(0,i-s),e.close(),e.fill()),e.begin(),e.moveTo(s,i),e.lineTo(s,s),e.lineTo(0,0),e.moveTo(s,s),e.lineTo(r,s),e.end(),e.stroke())},e.prototype.getLabelMargins=function(e){return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale,new mxRectangle(e,e,0,0)):null},mxCellRenderer.registerShape("cube",e);var lt=Math.tan(mxUtils.toRadians(30)),ct=(.5-lt)/2;mxUtils.extend(t,mxActor),t.prototype.size=20,t.prototype.redrawPath=function(e,t,n,r,i){t=Math.min(r,i/lt),e.translate((r-t)/2,(i-t)/2+t/4),e.moveTo(0,.25*t),e.lineTo(.5*t,t*ct),e.lineTo(t,.25*t),e.lineTo(.5*t,(.5-ct)*t),e.lineTo(0,.25*t),e.close(),e.end()},mxCellRenderer.registerShape("isoRectangle",t),mxUtils.extend(n,mxCylinder),n.prototype.size=20,n.prototype.redrawPath=function(e,t,n,r,i,s){t=Math.min(r,i/(.5+lt)),s?(e.moveTo(0,.25*t),e.lineTo(.5*t,(.5-ct)*t),e.lineTo(t,.25*t),e.moveTo(.5*t,(.5-ct)*t),e.lineTo(.5*t,(1-ct)*t)):(e.translate((r-t)/2,(i-t)/2),e.moveTo(0,.25*t),e.lineTo(.5*t,t*ct),e.lineTo(t,.25*t),e.lineTo(t,.75*t),e.lineTo(.5*t,(1-ct)*t),e.lineTo(0,.75*t),e.close()),e.end()},mxCellRenderer.registerShape("isoCube",n),mxUtils.extend(r,mxCylinder),r.prototype.redrawPath=function(e,t,n,r,i,s){t=Math.min(i/2,Math.round(i/8)+this.strokewidth-1);if(s&&null!=this.fill||!s&&null==this.fill)e.moveTo(0,t),e.curveTo(0,2*t,r,2*t,r,t),s||(e.stroke(),e.begin()),e.translate(0,t/2),e.moveTo(0,t),e.curveTo(0,2*t,r,2*t,r,t),s||(e.stroke(),e.begin()),e.translate(0,t/2),e.moveTo(0,t),e.curveTo(0,2*t,r,2*t,r,t),s||(e.stroke(),e.begin()),e.translate(0,-t);s||(e.moveTo(0,t),e.curveTo(0,-t/3,r,-t/3,r,t),e.lineTo(r,i-t),e.curveTo(r,i+t/3,0,i+t/3,0,i-t),e.close())},r.prototype.getLabelMargins=function(e){return new mxRectangle(0,2.5*Math.min(e.height/2,Math.round(e.height/8)+this.strokewidth-1)*this.scale,0,0)},mxCellRenderer.registerShape("datastore",r),mxUtils.extend(i,mxCylinder),i.prototype.size=30,i.prototype.darkOpacity=0,i.prototype.paintVertexShape=function(e,t,n,r,i){var s=Math.max(0,Math.min(r,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity))));e.translate(t,n),e.begin(),e.moveTo(0,0),e.lineTo(r-s,0),e.lineTo(r,s),e.lineTo(r,i),e.lineTo(0,i),e.lineTo(0,0),e.close(),e.end(),e.fillAndStroke(),this.outline||(e.setShadow(!1),0!=o&&(e.setFillAlpha(Math.abs(o)),e.setFillColor(0>o?"#FFFFFF":"#000000"),e.begin(),e.moveTo(r-s,0),e.lineTo(r-s,s),e.lineTo(r,s),e.close(),e.fill()),e.begin(),e.moveTo(r-s,0),e.lineTo(r-s,s),e.lineTo(r,s),e.end(),e.stroke())},mxCellRenderer.registerShape("note",i),mxUtils.extend(s,mxActor),s.prototype.redrawPath=function(e,t,n,r,i){e.moveTo(0,0),e.quadTo(r/2,.5*i,r,0),e.quadTo(.5*r,i/2,r,i),e.quadTo(r/2,.5*i,0,i),e.quadTo(.5*r,i/2,0,0),e.end()},mxCellRenderer.registerShape("switch",s),mxUtils.extend(o,mxCylinder),o.prototype.tabWidth=60,o.prototype.tabHeight=20,o.prototype.tabPosition="right",o.prototype.redrawPath=function(e,t,n,r,i,s){t=Math.max(0,Math.min(r,parseFloat(mxUtils.getValue(this.style,"tabWidth",this.tabWidth)))),n=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"tabHeight",this.tabHeight))));var o=mxUtils.getValue(this.style,"tabPosition",this.tabPosition);s?"left"==o?(e.moveTo(0,n),e.lineTo(t,n)):(e.moveTo(r-t,n),e.lineTo(r,n)):("left"==o?(e.moveTo(0,0),e.lineTo(t,0),e.lineTo(t,n),e.lineTo(r,n)):(e.moveTo(0,n),e.lineTo(r-t,n),e.lineTo(r-t,0),e.lineTo(r,0)),e.lineTo(r,i),e.lineTo(0,i),e.lineTo(0,n),e.close()),e.end()},mxCellRenderer.registerShape("folder",o),mxUtils.extend(u,mxActor),u.prototype.size=30,u.prototype.isRoundable=function(){return!0},u.prototype.redrawPath=function(e,t,n,r,i){t=Math.max(0,Math.min(r,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(t,0),new mxPoint(r,0),new mxPoint(r,i),new mxPoint(0,i),new mxPoint(0,t)],this.isRounded,n,!0),e.end()},mxCellRenderer.registerShape("card",u),mxUtils.extend(a,mxActor),a.prototype.size=.4,a.prototype.redrawPath=function(e,t,n,r,i){t=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),e.moveTo(0,t/2),e.quadTo(r/4,1.4*t,r/2,t/2),e.quadTo(3*r/4,t*(1-1.4),r,t/2),e.lineTo(r,i-t/2),e.quadTo(3*r/4,i-1.4*t,r/2,i-t/2),e.quadTo(r/4,i-t*(1-1.4),0,i-t/2),e.lineTo(0,t/2),e.close(),e.end()},a.prototype.getLabelBounds=function(e){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var t=mxUtils.getValue(this.style,"size",this.size),n=e.width,r=e.height;return null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST?(t*=r,new mxRectangle(e.x,e.y+t,n,r-2*t)):(t*=n,new mxRectangle(e.x+t,e.y,n-2*t,r))}return e},mxCellRenderer.registerShape("tape",a),mxUtils.extend(f,mxActor),f.prototype.size=.3,f.prototype.getLabelMargins=function(e){return mxUtils.getValue(this.style,"boundedLbl",!1)?new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*e.height):null},f.prototype.redrawPath=function(e,t,n,r,i){t=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,i-t/2),e.quadTo(3*r/4,i-1.4*t,r/2,i-t/2),e.quadTo(r/4,i-t*(1-1.4),0,i-t/2),e.lineTo(0,t/2),e.close(),e.end()},mxCellRenderer.registerShape("document",f);var ht=mxCylinder.prototype.getCylinderSize;mxCylinder.prototype.getCylinderSize=function(e,t,n,r){var i=mxUtils.getValue(this.style,"size");return null!=i?r*Math.max(0,Math.min(1,i)):ht.apply(this,arguments)},mxCylinder.prototype.getLabelMargins=function(e){if(mxUtils.getValue(this.style,"boundedLbl",!1)){var t=2*mxUtils.getValue(this.style,"size",.15);return new mxRectangle(0,Math.min(this.maxHeight*this.scale,e.height*t),0,0)}return null},mxUtils.extend(l,mxActor),l.prototype.size=.2,l.prototype.isRoundable=function(){return!0},l.prototype.redrawPath=function(e,t,n,r,i){t=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(0,i),new mxPoint(t,0),new mxPoint(r,0),new mxPoint(r-t,i)],this.isRounded,n,!0),e.end()},mxCellRenderer.registerShape("parallelogram",l),mxUtils.extend(c,mxActor),c.prototype.size=.2,c.prototype.isRoundable=function(){return!0},c.prototype.redrawPath=function(e,t,n,r,i){t=r*Math.max(0,Math.min(.5,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(0,i),new mxPoint(t,0),new mxPoint(r-t,0),new mxPoint(r,i)],this.isRounded,n,!0)},mxCellRenderer.registerShape("trapezoid",c),mxUtils.extend(h,mxActor),h.prototype.size=.5,h.prototype.redrawPath=function(e,t,n,r,i){e.setFillColor(null),t=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(r,0),new mxPoint(t,0),new mxPoint(t,i/2),new mxPoint(0,i/2),new mxPoint(t,i/2),new mxPoint(t,i),new mxPoint(r,i)],this.isRounded,n,!1),e.end()},mxCellRenderer.registerShape("curlyBracket",h),mxUtils.extend(p,mxActor),p.prototype.redrawPath=function(e,t,n,r,i){e.setStrokeWidth(1),e.setFillColor(this.stroke),t=r/5,e.rect(0,0,t,i),e.fillAndStroke(),e.rect(2*t,0,t,i),e.fillAndStroke(),e.rect(4*t,0,t,i),e.fillAndStroke()},mxCellRenderer.registerShape("parallelMarker",p),d.prototype.moveTo=function(e,t){this.originalMoveTo.apply(this.canvas,arguments),this.lastX=e,this.lastY=t,this.firstX=e,this.firstY=t},d.prototype.close=function(){null!=this.firstX&&null!=this.firstY&&(this.lineTo(this.firstX,this.firstY),this.originalClose.apply(this.canvas,arguments)),this.originalClose.apply(this.canvas,arguments)},d.prototype.quadTo=function(e,t,n,r){this.originalQuadTo.apply(this.canvas,arguments),this.lastX=n,this.lastY=r},d.prototype.curveTo=function(e,t,n,r,i,s){this.originalCurveTo.apply(this.canvas,arguments),this.lastX=i,this.lastY=s},d.prototype.arcTo=function(e,t,n,r,i,s,o){this.originalArcTo.apply(this.canvas,arguments),this.lastX=s,this.lastY=o},d.prototype.lineTo=function(e,t){if(null!=this.lastX&&null!=this.lastY){var n=function(e){return"number"==typeof e?e?0>e?-1:1:e===e?0:NaN:NaN},r=Math.abs(e-this.lastX),i=Math.abs(t-this.lastY),s=Math.sqrt(r*r+i*i);if(2>s){this.originalLineTo.apply(this.canvas,arguments),this.lastX=e,this.lastY=t;return}var o=Math.round(s/10),u=this.defaultVariation;5>o&&(o=5,u/=3);for(var a=n(e-this.lastX)*r/o,n=n(t-this.lastY)*i/o,r=r/s,i=i/s,s=0;s<o;s++){var f=(Math.random()-.5)*u;this.originalLineTo.call(this.canvas,a*s+this.lastX-f*i,n*s+this.lastY-f*r)}this.originalLineTo.call(this.canvas,e,t)}else this.originalLineTo.apply(this.canvas,arguments);this.lastX=e,this.lastY=t},d.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo};var pt=mxShape.prototype.paint;mxShape.prototype.defaultJiggle=1.5,mxShape.prototype.paint=function(e){null!=this.style&&"0"!=mxUtils.getValue(this.style,"comic","0")&&null==e.handHiggle&&(e.handJiggle=new d(e,mxUtils.getValue(this.style,"jiggle",this.defaultJiggle))),pt.apply(this,arguments),null!=e.handJiggle&&(e.handJiggle.destroy(),delete e.handJiggle)},mxRhombus.prototype.defaultJiggle=2;var dt=mxRectangleShape.prototype.isHtmlAllowed;mxRectangleShape.prototype.isHtmlAllowed=function(){return(null==this.style||"0"==mxUtils.getValue(this.style,"comic","0"))&&dt.apply(this,arguments)};var vt=mxRectangleShape.prototype.paintBackground;mxRectangleShape.prototype.paintBackground=function(e,t,n,r,i){if(null==e.handJiggle)vt.apply(this,arguments);else{var s=!0;null!=this.style&&(s="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"));if(s||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE)s||null!=this.fill&&this.fill!=mxConstants.NONE||(e.pointerEvents=!1),e.begin(),this.isRounded?("1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?s=Math.min(r/2,Math.min(i/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.min(r*s,i*s)),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadTo(t,n,t+s,n)):(e.moveTo(t,n),e.lineTo(t+r,n),e.lineTo(t+r,n+i),e.lineTo(t,n+i),e.lineTo(t,n)),e.close(),e.end(),e.fillAndStroke()}};var mt=mxRectangleShape.prototype.paintForeground;mxRectangleShape.prototype.paintForeground=function(e,t,n,r,i){null==e.handJiggle&&mt.apply(this,arguments)},mxUtils.extend(v,mxRectangleShape),v.prototype.size=.1,v.prototype.isHtmlAllowed=function(){return!1},v.prototype.getLabelBounds=function(e){if(mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,!0)==(null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST)){var t=e.width,n=e.height;e=new mxRectangle(e.x,e.y,t,n);var r=t*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));if(this.isRounded)var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,r=Math.max(r,Math.min(t*i,n*i));e.x+=Math.round(r),e.width-=Math.round(2*r)}return e},v.prototype.paintForeground=function(e,t,n,r,i){var s=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));if(this.isRounded)var o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.max(s,Math.min(r*o,i*o));s=Math.round(s),e.begin(),e.moveTo(t+s,n),e.lineTo(t+s,n+i),e.moveTo(t+r-s,n),e.lineTo(t+r-s,n+i),e.end(),e.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("process",v),mxUtils.extend(m,mxRectangleShape),m.prototype.paintBackground=function(e,t,n,r,i){e.setFillColor(mxConstants.NONE),e.rect(t,n,r,i),e.fill()},m.prototype.paintForeground=function(e,t,n,r,i){},mxCellRenderer.registerShape("transparent",m),mxUtils.extend(g,mxHexagon),g.prototype.size=30,g.prototype.position=.5,g.prototype.position2=.5,g.prototype.base=20,g.prototype.getLabelMargins=function(){return new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale)},g.prototype.isRoundable=function(){return!0},g.prototype.redrawPath=function(e,t,n,r,i){t=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,n=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size))));var s=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position",this.position)))),o=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position2",this.position2)))),u=Math.max(0,Math.min(r,parseFloat(mxUtils.getValue(this.style,"base",this.base))));this.addPoints(e,[new mxPoint(0,0),new mxPoint(r,0),new mxPoint(r,i-n),new mxPoint(Math.min(r,s+u),i-n),new mxPoint(o,i),new mxPoint(Math.max(0,s),i-n),new mxPoint(0,i-n)],this.isRounded,t,!0,[4])},mxCellRenderer.registerShape("callout",g),mxUtils.extend(y,mxActor),y.prototype.size=.2,y.prototype.fixedSize=20,y.prototype.isRoundable=function(){return!0},y.prototype.redrawPath=function(e,t,n,r,i){t="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(r,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(0,0),new mxPoint(r-t,0),new mxPoint(r,i/2),new mxPoint(r-t,i),new mxPoint(0,i),new mxPoint(t,i/2)],this.isRounded,n,!0),e.end()},mxCellRenderer.registerShape("step",y),mxUtils.extend(b,mxHexagon),b.prototype.size=.25,b.prototype.isRoundable=function(){return!0},b.prototype.redrawPath=function(e,t,n,r,i){t=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(t,0),new mxPoint(r-t,0),new mxPoint(r,.5*i),new mxPoint(r-t,i),new mxPoint(t,i),new mxPoint(0,.5*i)],this.isRounded,n,!0)},mxCellRenderer.registerShape("hexagon",b),mxUtils.extend(w,mxRectangleShape),w.prototype.isHtmlAllowed=function(){return!1},w.prototype.paintForeground=function(e,t,n,r,i){var s=Math.min(r/5,i/5)+1;e.begin(),e.moveTo(t+r/2,n+s),e.lineTo(t+r/2,n+i-s),e.moveTo(t+s,n+i/2),e.lineTo(t+r-s,n+i/2),e.end(),e.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("plus",w);var gt=mxRhombus.prototype.paintVertexShape;mxRhombus.prototype.getLabelBounds=function(e){if(1==this.style["double"]){var t=(2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(e.x+t,e.y+t,e.width-2*t,e.height-2*t)}return e},mxRhombus.prototype.paintVertexShape=function(e,t,n,r,i){gt.apply(this,arguments);if(!this.outline&&1==this.style["double"]){var s=2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0);t+=s,n+=s,r-=2*s,i-=2*s,0<r&&0<i&&(e.setShadow(!1),gt.apply(this,[e,t,n,r,i]))}},mxUtils.extend(E,mxRectangleShape),E.prototype.isHtmlAllowed=function(){return!1},E.prototype.getLabelBounds=function(e){if(1==this.style["double"]){var t=(Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale;return new mxRectangle(e.x+t,e.y+t,e.width-2*t,e.height-2*t)}return e},E.prototype.paintForeground=function(e,t,n,r,i){if(null!=this.style){if(!this.outline&&1==this.style["double"]){var s=Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0);t+=s,n+=s,r-=2*s,i-=2*s,0<r&&0<i&&mxRectangleShape.prototype.paintBackground.apply(this,arguments)}e.setDashed(!1);var s=0,o;do{o=mxCellRenderer.defaultShapes[this.style["symbol"+s]];if(null!=o){var u=this.style["symbol"+s+"Align"],a=this.style["symbol"+s+"VerticalAlign"],f=this.style["symbol"+s+"Width"],l=this.style["symbol"+s+"Height"],c=this.style["symbol"+s+"Spacing"]||0,h=this.style["symbol"+s+"VSpacing"]||c,p=this.style["symbol"+s+"ArcSpacing"];null!=p&&(p*=this.getArcSize(r+this.strokewidth,i+this.strokewidth),c+=p,h+=p);var p=t,d=n,p=u==mxConstants.ALIGN_CENTER?p+(r-f)/2:u==mxConstants.ALIGN_RIGHT?p+(r-f-c):p+c,d=a==mxConstants.ALIGN_MIDDLE?d+(i-l)/2:a==mxConstants.ALIGN_BOTTOM?d+(i-l-h):d+h;e.save(),u=new o,u.style=this.style,o.prototype.paintVertexShape.call(u,e,p,d,f,l),e.restore()}s++}while(null!=o)}mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("ext",E),mxUtils.extend(S,mxCylinder),S.prototype.redrawPath=function(e,t,n,r,i,s){s?(e.moveTo(0,0),e.lineTo(r/2,i/2),e.lineTo(r,0),e.end()):(e.moveTo(0,0),e.lineTo(r,0),e.lineTo(r,i),e.lineTo(0,i),e.close())},mxCellRenderer.registerShape("message",S),mxUtils.extend(x,mxShape),x.prototype.paintBackground=function(e,t,n,r,i){e.translate(t,n),e.ellipse(r/4,0,r/2,i/4),e.fillAndStroke(),e.begin(),e.moveTo(r/2,i/4),e.lineTo(r/2,2*i/3),e.moveTo(r/2,i/3),e.lineTo(0,i/3),e.moveTo(r/2,i/3),e.lineTo(r,i/3),e.moveTo(r/2,2*i/3),e.lineTo(0,i),e.moveTo(r/2,2*i/3),e.lineTo(r,i),e.end(),e.stroke()},mxCellRenderer.registerShape("umlActor",x),mxUtils.extend(T,mxShape),T.prototype.getLabelMargins=function(e){return new mxRectangle(e.width/6,0,0,0)},T.prototype.paintBackground=function(e,t,n,r,i){e.translate(t,n),e.begin(),e.moveTo(0,i/4),e.lineTo(0,3*i/4),e.end(),e.stroke(),e.begin(),e.moveTo(0,i/2),e.lineTo(r/6,i/2),e.end(),e.stroke(),e.ellipse(r/6,0,5*r/6,i),e.fillAndStroke()},mxCellRenderer.registerShape("umlBoundary",T),mxUtils.extend(N,mxEllipse),N.prototype.paintVertexShape=function(e,t,n,r,i){mxEllipse.prototype.paintVertexShape.apply(this,arguments),e.begin(),e.moveTo(t+r/8,n+i),e.lineTo(t+7*r/8,n+i),e.end(),e.stroke()},mxCellRenderer.registerShape("umlEntity",N),mxUtils.extend(C,mxShape),C.prototype.paintVertexShape=function(e,t,n,r,i){e.translate(t,n),e.begin(),e.moveTo(r,0),e.lineTo(0,i),e.moveTo(0,0),e.lineTo(r,i),e.end(),e.stroke()},mxCellRenderer.registerShape("umlDestroy",C),mxUtils.extend(k,mxShape),k.prototype.getLabelBounds=function(e){return new mxRectangle(e.x,e.y+e.height/8,e.width,7*e.height/8)},k.prototype.paintBackground=function(e,t,n,r,i){e.translate(t,n),e.begin(),e.moveTo(3*r/8,i/8*1.1),e.lineTo(5*r/8,0),e.end(),e.stroke(),e.ellipse(0,i/8,r,7*i/8),e.fillAndStroke()},k.prototype.paintForeground=function(e,t,n,r,i){e.begin(),e.moveTo(3*r/8,i/8*1.1),e.lineTo(5*r/8,i/4),e.end(),e.stroke()},mxCellRenderer.registerShape("umlControl",k),mxUtils.extend(L,mxRectangleShape),L.prototype.size=40,L.prototype.isHtmlAllowed=function(){return!1},L.prototype.getLabelBounds=function(e){var t=Math.max(0,Math.min(e.height,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale));return new mxRectangle(e.x,e.y,e.width,t)},L.prototype.paintBackground=function(e,t,n,r,i){var s=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,"participant");null==o||null==this.state?mxRectangleShape.prototype.paintBackground.call(this,e,t,n,r,s):(o=this.state.view.graph.cellRenderer.getShape(o),null!=o&&o!=L&&(o=new o,o.apply(this.state),e.save(),o.paintVertexShape(e,t,n,r,s),e.restore())),s<i&&(e.setDashed(!0),e.begin(),e.moveTo(t+r/2,n+s),e.lineTo(t+r/2,n+i),e.end(),e.stroke())},L.prototype.paintForeground=function(e,t,n,r,i){var s=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size))));mxRectangleShape.prototype.paintForeground.call(this,e,t,n,r,Math.min(i,s))},mxCellRenderer.registerShape("umlLifeline",L),mxUtils.extend(A,mxShape),A.prototype.width=60,A.prototype.height=30,A.prototype.corner=10,A.prototype.getLabelMargins=function(e){return new mxRectangle(0,0,e.width-parseFloat(mxUtils.getValue(this.style,"width",this.width)*this.scale),e.height-parseFloat(mxUtils.getValue(this.style,"height",this.height)*this.scale))},A.prototype.paintBackground=function(e,t,n,r,i){var s=this.corner,o=Math.min(r,Math.max(s,parseFloat(mxUtils.getValue(this.style,"width",this.width)))),u=Math.min(i,Math.max(1.5*s,parseFloat(mxUtils.getValue(this.style,"height",this.height)))),a=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE);a!=mxConstants.NONE&&(e.setFillColor(a),e.rect(t,n,r,i),e.fill()),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(this.getGradientBounds(e,t,n,r,i),e.setGradient(this.fill,this.gradient,t,n,r,i,this.gradientDirection)):e.setFillColor(this.fill),e.begin(),e.moveTo(t,n),e.lineTo(t+o,n),e.lineTo(t+o,n+Math.max(0,u-1.5*s)),e.lineTo(t+Math.max(0,o-s),n+u),e.lineTo(t,n+u),e.close(),e.fillAndStroke(),e.begin(),e.moveTo(t+o,n),e.lineTo(t+r,n),e.lineTo(t+r,n+i),e.lineTo(t,n+i),e.lineTo(t,n+u),e.stroke()},mxCellRenderer.registerShape("umlFrame",A),mxPerimeter.LifelinePerimeter=function(e,t,n,r){return r=L.prototype.size,null!=t&&(r=mxUtils.getValue(t.style,"size",r)*t.view.scale),t=parseFloat(t.style[mxConstants.STYLE_STROKEWIDTH]||1)*t.view.scale/2-1,n.x<e.getCenterX()&&(t=-1*(t+1)),new mxPoint(e.getCenterX()+t,Math.min(e.y+e.height,Math.max(e.y+r,n.y)))},mxStyleRegistry.putValue("lifelinePerimeter",mxPerimeter.LifelinePerimeter),mxPerimeter.OrthogonalPerimeter=function(e,t,n,r){return r=!0,mxPerimeter.RectanglePerimeter.apply(this,arguments)},mxStyleRegistry.putValue("orthogonalPerimeter",mxPerimeter.OrthogonalPerimeter),mxPerimeter.BackbonePerimeter=function(e,t,n,r){return r=parseFloat(t.style[mxConstants.STYLE_STROKEWIDTH]||1)*t.view.scale/2-1,null!=t.style.backboneSize&&(r+=parseFloat(t.style.backboneSize)*t.view.scale/2-1),"south"==t.style[mxConstants.STYLE_DIRECTION]||"north"==t.style[mxConstants.STYLE_DIRECTION]?(n.x<e.getCenterX()&&(r=-1*(r+1)),new mxPoint(e.getCenterX()+r,Math.min(e.y+e.height,Math.max(e.y,n.y)))):(n.y<e.getCenterY()&&(r=-1*(r+1)),new mxPoint(Math.min(e.x+e.width,Math.max(e.x,n.x)),e.getCenterY()+r))},mxStyleRegistry.putValue("backbonePerimeter",mxPerimeter.BackbonePerimeter),mxPerimeter.CalloutPerimeter=function(e,t,n,r){return mxPerimeter.RectanglePerimeter(mxUtils.getDirectedBounds(e,new mxRectangle(0,0,0,Math.max(0,Math.min(e.height,parseFloat(mxUtils.getValue(t.style,"size",g.prototype.size))*t.view.scale))),t.style),t,n,r)},mxStyleRegistry.putValue("calloutPerimeter",mxPerimeter.CalloutPerimeter),mxPerimeter.ParallelogramPerimeter=function(e,t,n,r){var i=l.prototype.size;null!=t&&(i=mxUtils.getValue(t.style,"size",i));var s=e.x,o=e.y,u=e.width,a=e.height;return t=null!=t?mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,t==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_SOUTH?(i=a*Math.max(0,Math.min(1,i)),o=[new mxPoint(s,o),new mxPoint(s+u,o+i),new mxPoint(s+u,o+a),new mxPoint(s,o+a-i),new mxPoint(s,o)]):(i=u*Math.max(0,Math.min(1,i)),o=[new mxPoint(s+i,o),new mxPoint(s+u,o),new mxPoint(s+u-i,o+a),new mxPoint(s,o+a),new mxPoint(s+i,o)]),a=e.getCenterX(),e=e.getCenterY(),e=new mxPoint(a,e),r&&(n.x<s||n.x>s+u?e.y=n.y:e.x=n.x),mxUtils.getPerimeterPoint(o,e,n)},mxStyleRegistry.putValue("parallelogramPerimeter",mxPerimeter.ParallelogramPerimeter),mxPerimeter.TrapezoidPerimeter=function(e,t,n,r){var i=c.prototype.size;null!=t&&(i=mxUtils.getValue(t.style,"size",i));var s=e.x,o=e.y,u=e.width,a=e.height;return t=null!=t?mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,t==mxConstants.DIRECTION_EAST?(i=u*Math.max(0,Math.min(1,i)),o=[new mxPoint(s+i,o),new mxPoint(s+u-i,o),new mxPoint(s+u,o+a),new mxPoint(s,o+a),new mxPoint(s+i,o)]):t==mxConstants.DIRECTION_WEST?(i=u*Math.max(0,Math.min(1,i)),o=[new mxPoint(s,o),new mxPoint(s+u,o),new mxPoint(s+u-i,o+a),new mxPoint(s+i,o+a),new mxPoint(s,o)]):t==mxConstants.DIRECTION_NORTH?(i=a*Math.max(0,Math.min(1,i)),o=[new mxPoint(s,o+i),new mxPoint(s+u,o),new mxPoint(s+u,o+a),new mxPoint(s,o+a-i),new mxPoint(s,o+i)]):(i=a*Math.max(0,Math.min(1,i)),o=[new mxPoint(s,o),new mxPoint(s+u,o+i),new mxPoint(s+u,o+a-i),new mxPoint(s,o+a),new mxPoint(s,o)]),a=e.getCenterX(),e=e.getCenterY(),e=new mxPoint(a,e),r&&(n.x<s||n.x>s+u?e.y=n.y:e.x=n.x),mxUtils.getPerimeterPoint(o,e,n)},mxStyleRegistry.putValue("trapezoidPerimeter",mxPerimeter.TrapezoidPerimeter),mxPerimeter.StepPerimeter=function(e,t,n,r){var i="0"!=mxUtils.getValue(t.style,"fixedSize","0"),s=i?y.prototype.fixedSize:y.prototype.size;null!=t&&(s=mxUtils.getValue(t.style,"size",s));var o=e.x,u=e.y,a=e.width,f=e.height,l=e.getCenterX();return e=e.getCenterY(),t=null!=t?mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,t==mxConstants.DIRECTION_EAST?(i=i?Math.max(0,Math.min(a,s)):a*Math.max(0,Math.min(1,s)),u=[new mxPoint(o,u),new mxPoint(o+a-i,u),new mxPoint(o+a,e),new mxPoint(o+a-i,u+f),new mxPoint(o,u+f),new mxPoint(o+i,e),new mxPoint(o,u)]):t==mxConstants.DIRECTION_WEST?(i=i?Math.max(0,Math.min(a,s)):a*Math.max(0,Math.min(1,s)),u=[new mxPoint(o+i,u),new mxPoint(o+a,u),new mxPoint(o+a-i,e),new mxPoint(o+a,u+f),new mxPoint(o+i,u+f),new mxPoint(o,e),new mxPoint(o+i,u)]):t==mxConstants.DIRECTION_NORTH?(i=i?Math.max(0,Math.min(f,s)):f*Math.max(0,Math.min(1,s)),u=[new mxPoint(o,u+i),new mxPoint(l,u),new mxPoint(o+a,u+i),new mxPoint(o+a,u+f),new mxPoint(l,u+f-i),new mxPoint(o,u+f),new mxPoint(o,u+i)]):(i=i?Math.max(0,Math.min(f,s)):f*Math.max(0,Math.min(1,s)),u=[new mxPoint(o,u),new mxPoint(l,u+i),new mxPoint(o+a,u),new mxPoint(o+a,u+f-i),new mxPoint(l,u+f),new mxPoint(o,u+f-i),new mxPoint(o,u)]),l=new mxPoint(l,e),r&&(n.x<o||n.x>o+a?l.y=n.y:l.x=n.x),mxUtils.getPerimeterPoint(u,l,n)},mxStyleRegistry.putValue("stepPerimeter",mxPerimeter.StepPerimeter),mxPerimeter.HexagonPerimeter2=function(e,t,n,r){var i=b.prototype.size;null!=t&&(i=mxUtils.getValue(t.style,"size",i));var s=e.x,o=e.y,u=e.width,a=e.height,f=e.getCenterX();return e=e.getCenterY(),t=null!=t?mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,t==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_SOUTH?(i=a*Math.max(0,Math.min(1,i)),o=[new mxPoint(f,o),new mxPoint(s+u,o+i),new mxPoint(s+u,o+a-i),new mxPoint(f,o+a),new mxPoint(s,o+a-i),new mxPoint(s,o+i),new mxPoint(f,o)]):(i=u*Math.max(0,Math.min(1,i)),o=[new mxPoint(s+i,o),new mxPoint(s+u-i,o),new mxPoint(s+u,e),new mxPoint(s+u-i,o+a),new mxPoint(s+i,o+a),new mxPoint(s,e),new mxPoint(s+i,o)]),f=new mxPoint(f,e),r&&(n.x<s||n.x>s+u?f.y=n.y:f.x=n.x),mxUtils.getPerimeterPoint(o,f,n)},mxStyleRegistry.putValue("hexagonPerimeter2",mxPerimeter.HexagonPerimeter2),mxUtils.extend(O,mxShape),O.prototype.size=10,O.prototype.paintBackground=function(e,t,n,r,i){var s=parseFloat(mxUtils.getValue(this.style,"size",this.size));e.translate(t,n),e.ellipse((r-s)/2,0,s,s),e.fillAndStroke(),e.begin(),e.moveTo(r/2,s),e.lineTo(r/2,i),e.end(),e.stroke()},mxCellRenderer.registerShape("lollipop",O),mxUtils.extend(M,mxShape),M.prototype.size=10,M.prototype.inset=2,M.prototype.paintBackground=function(e,t,n,r,i){var s=parseFloat(mxUtils.getValue(this.style,"size",this.size)),o=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;e.translate(t,n),e.begin(),e.moveTo(r/2,s+o),e.lineTo(r/2,i),e.end(),e.stroke(),e.begin(),e.moveTo((r-s)/2-o,s/2),e.quadTo((r-s)/2-o,s+o,r/2,s+o),e.quadTo((r+s)/2+o,s+o,(r+s)/2+o,s/2),e.end(),e.stroke()},mxCellRenderer.registerShape("requires",M),mxUtils.extend(_,mxShape),_.prototype.paintBackground=function(e,t,n,r,i){e.translate(t,n),e.begin(),e.moveTo(0,0),e.quadTo(r,0,r,i/2),e.quadTo(r,i,0,i),e.end(),e.stroke()},mxCellRenderer.registerShape("requiredInterface",_),mxUtils.extend(D,mxShape),D.prototype.inset=2,D.prototype.paintBackground=function(e,t,n,r,i){var s=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;e.translate(t,n),e.ellipse(0,s,r-2*s,i-2*s),e.fillAndStroke(),e.begin(),e.moveTo(r/2,0),e.quadTo(r,0,r,i/2),e.quadTo(r,i,r/2,i),e.end(),e.stroke()},mxCellRenderer.registerShape("providedRequiredInterface",D),mxUtils.extend(P,mxCylinder),P.prototype.jettyWidth=32,P.prototype.jettyHeight=12,P.prototype.redrawPath=function(e,t,n,r,i,s){var o=parseFloat(mxUtils.getValue(this.style,"jettyWidth",this.jettyWidth));t=parseFloat(mxUtils.getValue(this.style,"jettyHeight",this.jettyHeight)),n=o/2;var o=n+o/2,u=.3*i-t/2,a=.7*i-t/2;s?(e.moveTo(n,u),e.lineTo(o,u),e.lineTo(o,u+t),e.lineTo(n,u+t),e.moveTo(n,a),e.lineTo(o,a),e.lineTo(o,a+t),e.lineTo(n,a+t)):(e.moveTo(n,0),e.lineTo(r,0),e.lineTo(r,i),e.lineTo(n,i),e.lineTo(n,a+t),e.lineTo(0,a+t),e.lineTo(0,a),e.lineTo(n,a),e.lineTo(n,u+t),e.lineTo(0,u+t),e.lineTo(0,u),e.lineTo(n,u),e.close()),e.end()},mxCellRenderer.registerShape("component",P),mxUtils.extend(H,mxDoubleEllipse),H.prototype.outerStroke=!0,H.prototype.paintVertexShape=function(e,t,n,r,i){var s=Math.min(4,Math.min(r/5,i/5));0<r&&0<i&&(e.ellipse(t+s,n+s,r-2*s,i-2*s),e.fillAndStroke()),e.setShadow(!1),this.outerStroke&&(e.ellipse(t,n,r,i),e.stroke())},mxCellRenderer.registerShape("endState",H),mxUtils.extend(B,H),B.prototype.outerStroke=!1,mxCellRenderer.registerShape("startState",B),mxUtils.extend(j,mxArrowConnector),j.prototype.defaultWidth=4,j.prototype.isOpenEnded=function(){return!0},j.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},j.prototype.isArrowRounded=function(){return this.isRounded},mxCellRenderer.registerShape("link",j),mxUtils.extend(F,mxArrowConnector),F.prototype.defaultWidth=10,F.prototype.defaultArrowWidth=20,F.prototype.getStartArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"startWidth",this.defaultArrowWidth)},F.prototype.getEndArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"endWidth",this.defaultArrowWidth)},F.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},mxCellRenderer.registerShape("flexArrow",F),mxUtils.extend(I,mxActor),I.prototype.size=30,I.prototype.isRoundable=function(){return!0},I.prototype.redrawPath=function(e,t,n,r,i){t=Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(0,i),new mxPoint(0,t),new mxPoint(r,0),new mxPoint(r,i)],this.isRounded,n,!0),e.end()},mxCellRenderer.registerShape("manualInput",I),mxUtils.extend(q,mxRectangleShape),q.prototype.dx=20,q.prototype.dy=20,q.prototype.isHtmlAllowed=function(){return!1},q.prototype.paintForeground=function(e,t,n,r,i){mxRectangleShape.prototype.paintForeground.apply(this,arguments);var s=0;if(this.isRounded)var o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.max(s,Math.min(r*o,i*o));o=Math.max(s,Math.min(r,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),s=Math.max(s,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),e.begin(),e.moveTo(t,n+s),e.lineTo(t+r,n+s),e.end(),e.stroke(),e.begin(),e.moveTo(t+o,n),e.lineTo(t+o,n+i),e.end(),e.stroke()},mxCellRenderer.registerShape("internalStorage",q),mxUtils.extend(R,mxActor),R.prototype.dx=20,R.prototype.dy=20,R.prototype.redrawPath=function(e,t,n,r,i){t=Math.max(0,Math.min(r,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),n=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),parseFloat(mxUtils.getValue(this.style,"size",this.size));var s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,0),new mxPoint(r,0),new mxPoint(r,n),new mxPoint(t,n),new mxPoint(t,i),new mxPoint(0,i)],this.isRounded,s,!0),e.end()},mxCellRenderer.registerShape("corner",R),mxUtils.extend(U,mxActor),U.prototype.redrawPath=function(e,t,n,r,i){e.moveTo(0,0),e.lineTo(0,i),e.end(),e.moveTo(r,0),e.lineTo(r,i),e.end(),e.moveTo(0,i/2),e.lineTo(r,i/2),e.end()},mxCellRenderer.registerShape("crossbar",U),mxUtils.extend(z,mxActor),z.prototype.dx=20,z.prototype.dy=20,z.prototype.redrawPath=function(e,t,n,r,i){t=Math.max(0,Math.min(r,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),n=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),parseFloat(mxUtils.getValue(this.style,"size",this.size));var s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,0),new mxPoint(r,0),new mxPoint(r,n),new mxPoint((r+t)/2,n),new mxPoint((r+t)/2,i),new mxPoint((r-t)/2,i),new mxPoint((r-t)/2,n),new mxPoint(0,n)],this.isRounded,s,!0),e.end()},mxCellRenderer.registerShape("tee",z),mxUtils.extend(W,mxActor),W.prototype.arrowWidth=.3,W.prototype.arrowSize=.2,W.prototype.redrawPath=function(e,t,n,r,i){var s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",this.arrowWidth))));t=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",this.arrowSize)))),n=(i-s)/2;var s=n+s,o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,n),new mxPoint(r-t,n),new mxPoint(r-t,0),new mxPoint(r,i/2),new mxPoint(r-t,i),new mxPoint(r-t,s),new mxPoint(0,s)],this.isRounded,o,!0),e.end()},mxCellRenderer.registerShape("singleArrow",W),mxUtils.extend(X,mxActor),X.prototype.redrawPath=function(e,t,n,r,i){var s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",W.prototype.arrowWidth))));t=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",W.prototype.arrowSize)))),n=(i-s)/2;var s=n+s,o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,i/2),new mxPoint(t,0),new mxPoint(t,n),new mxPoint(r-t,n),new mxPoint(r-t,0),new mxPoint(r,i/2),new mxPoint(r-t,i),new mxPoint(r-t,s),new mxPoint(t,s),new mxPoint(t,i)],this.isRounded,o,!0),e.end()},mxCellRenderer.registerShape("doubleArrow",X),mxUtils.extend(V,mxActor),V.prototype.size=.1,V.prototype.redrawPath=function(e,t,n,r,i){t=r*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),e.moveTo(t,0),e.lineTo(r,0),e.quadTo(r-2*t,i/2,r,i),e.lineTo(t,i),e.quadTo(t-2*t,i/2,t,0),e.close(),e.end()},mxCellRenderer.registerShape("dataStorage",V),mxUtils.extend($,mxActor),$.prototype.redrawPath=function(e,t,n,r,i){e.moveTo(0,0),e.quadTo(r,0,r,i/2),e.quadTo(r,i,0,i),e.close(),e.end()},mxCellRenderer.registerShape("or",$),mxUtils.extend(J,mxActor),J.prototype.redrawPath=function(e,t,n,r,i){e.moveTo(0,0),e.quadTo(r,0,r,i/2),e.quadTo(r,i,0,i),e.quadTo(r/2,i/2,0,0),e.close(),e.end()},mxCellRenderer.registerShape("xor",J),mxUtils.extend(K,mxActor),K.prototype.size=20,K.prototype.isRoundable=function(){return!0},K.prototype.redrawPath=function(e,t,n,r,i){t=Math.min(r/2,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(t,0),new mxPoint(r-t,0),new mxPoint(r,.8*t),new mxPoint(r,i),new mxPoint(0,i),new mxPoint(0,.8*t)],this.isRounded,n,!0),e.end()},mxCellRenderer.registerShape("loopLimit",K),mxUtils.extend(Q,mxActor),Q.prototype.size=.375,Q.prototype.isRoundable=function(){return!0},Q.prototype.redrawPath=function(e,t,n,r,i){t=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(e,[new mxPoint(0,0),new mxPoint(r,0),new mxPoint(r,i-t),new mxPoint(r/2,i),new mxPoint(0,i-t)],this.isRounded,n,!0),e.end()},mxCellRenderer.registerShape("offPageConnector",Q),mxUtils.extend(G,mxEllipse),G.prototype.paintVertexShape=function(e,t,n,r,i){mxEllipse.prototype.paintVertexShape.apply(this,arguments),e.begin(),e.moveTo(t+r/2,n+i),e.lineTo(t+r,n+i),e.end(),e.stroke()},mxCellRenderer.registerShape("tapeData",G),mxUtils.extend(Y,mxEllipse),Y.prototype.paintVertexShape=function(e,t,n,r,i){mxEllipse.prototype.paintVertexShape.apply(this,arguments),e.setShadow(!1),e.begin(),e.moveTo(t,n+i/2),e.lineTo(t+r,n+i/2),e.end(),e.stroke(),e.begin(),e.moveTo(t+r/2,n),e.lineTo(t+r/2,n+i),e.end(),e.stroke()},mxCellRenderer.registerShape("orEllipse",Y),mxUtils.extend(Z,mxEllipse),Z.prototype.paintVertexShape=function(e,t,n,r,i){mxEllipse.prototype.paintVertexShape.apply(this,arguments),e.setShadow(!1),e.begin(),e.moveTo(t+.145*r,n+.145*i),e.lineTo(t+.855*r,n+.855*i),e.end(),e.stroke(),e.begin(),e.moveTo(t+.855*r,n+.145*i),e.lineTo(t+.145*r,n+.855*i),e.end(),e.stroke()},mxCellRenderer.registerShape("sumEllipse",Z),mxUtils.extend(et,mxRhombus),et.prototype.paintVertexShape=function(e,t,n,r,i){mxRhombus.prototype.paintVertexShape.apply(this,arguments),e.setShadow(!1),e.begin(),e.moveTo(t,n+i/2),e.lineTo(t+r,n+i/2),e.end(),e.stroke()},mxCellRenderer.registerShape("sortShape",et),mxUtils.extend(tt,mxEllipse),tt.prototype.paintVertexShape=function(e,t,n,r,i){e.begin(),e.moveTo(t,n),e.lineTo(t+r,n),e.lineTo(t+r/2,n+i/2),e.close(),e.fillAndStroke(),e.begin(),e.moveTo(t,n+i),e.lineTo(t+r,n+i),e.lineTo(t+r/2,n+i/2),e.close(),e.fillAndStroke()},mxCellRenderer.registerShape("collate",tt),mxUtils.extend(nt,mxEllipse),nt.prototype.paintVertexShape=function(e,t,n,r,i){var s=n+i-5;e.begin(),e.moveTo(t,n),e.lineTo(t,n+i),e.moveTo(t,s),e.lineTo(t+10,s-5),e.moveTo(t,s),e.lineTo(t+10,s+5),e.moveTo(t,s),e.lineTo(t+r,s),e.moveTo(t+r,n),e.lineTo(t+r,n+i),e.moveTo(t+r,s),e.lineTo(t+r-10,s-5),e.moveTo(t+r,s),e.lineTo(t+r-10,s+5),e.end(),e.stroke()},mxCellRenderer.registerShape("dimension",nt),mxUtils.extend(rt,mxEllipse),rt.prototype.paintVertexShape=function(e,t,n,r,i){this.outline||e.setStrokeColor(null),mxRectangleShape.prototype.paintBackground.apply(this,arguments),null!=this.style&&(e.setStrokeColor(this.stroke),e.rect(t,n,r,i),e.fill(),e.begin(),e.moveTo(t,n),"1"==mxUtils.getValue(this.style,"top","1")?e.lineTo(t+r,n):e.moveTo(t+r,n),"1"==mxUtils.getValue(this.style,"right","1")?e.lineTo(t+r,n+i):e.moveTo(t+r,n+i),"1"==mxUtils.getValue(this.style,"bottom","1")?e.lineTo(t,n+i):e.moveTo(t,n+i),"1"==mxUtils.getValue(this.style,"left","1")&&e.lineTo(t,n-this.strokewidth/2),e.end(),e.stroke())},mxCellRenderer.registerShape("partialRectangle",rt),mxUtils.extend(it,mxEllipse),it.prototype.paintVertexShape=function(e,t,n,r,i){mxEllipse.prototype.paintVertexShape.apply(this,arguments),e.setShadow(!1),e.begin(),"vertical"==mxUtils.getValue(this.style,"line")?(e.moveTo(t+r/2,n),e.lineTo(t+r/2,n+i)):(e.moveTo(t,n+i/2),e.lineTo(t+r,n+i/2)),e.end(),e.stroke()},mxCellRenderer.registerShape("lineEllipse",it),mxUtils.extend(st,mxActor),st.prototype.redrawPath=function(e,t,n,r,i){t=Math.min(r,i/2),e.moveTo(0,0),e.lineTo(r-t,0),e.quadTo(r,0,r,i/2),e.quadTo(r,i,r-t,i),e.lineTo(0,i),e.close(),e.end()},mxCellRenderer.registerShape("delay",st),mxUtils.extend(ot,mxActor),ot.prototype.size=.2,ot.prototype.redrawPath=function(e,t,n,r,i){t=Math.min(i,r);var s=Math.max(0,Math.min(t,t*parseFloat(mxUtils.getValue(this.style,"size",this.size))));t=(i-s)/2,n=t+s;var o=(r-s)/2,s=o+s;e.moveTo(0,t),e.lineTo(o,t),e.lineTo(o,0),e.lineTo(s,0),e.lineTo(s,t),e.lineTo(r,t),e.lineTo(r,n),e.lineTo(s,n),e.lineTo(s,i),e.lineTo(o,i),e.lineTo(o,n),e.lineTo(0,n),e.close(),e.end()},mxCellRenderer.registerShape("cross",ot),mxUtils.extend(ut,mxActor),ut.prototype.size=.25,ut.prototype.redrawPath=function(e,t,n,r,i){t=Math.min(r,i/2),n=Math.min(r-t,Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size)))*r),e.moveTo(0,i/2),e.lineTo(n,0),e.lineTo(r-t,0),e.quadTo(r,0,r,i/2),e.quadTo(r,i,r-t,i),e.lineTo(n,i),e.close(),e.end()},mxCellRenderer.registerShape("display",ut),mxUtils.extend(at,mxConnector),at.prototype.origPaintEdgeShape=at.prototype.paintEdgeShape,at.prototype.paintEdgeShape=function(e,t,n){for(var r=[],i=0;i<t.length;i++)r.push(mxUtils.clone(t[i]));var i=e.state.dashed,s=e.state.fixDash;at.prototype.origPaintEdgeShape.apply(this,[e,r,n]),3<=e.state.strokeWidth&&(r=mxUtils.getValue(this.style,"fillColor",null),null!=r&&(e.setStrokeColor(r),e.setStrokeWidth(e.state.strokeWidth-2),e.setDashed(i,s),at.prototype.origPaintEdgeShape.apply(this,[e,t,n])))},mxCellRenderer.registerShape("filledEdge",at),"undefined"!=typeof StyleFormatPanel&&function(){var e=StyleFormatPanel.prototype.getCustomColors;StyleFormatPanel.prototype.getCustomColors=function(){var t=this.format.getSelectionState(),n=e.apply(this,arguments);return"umlFrame"==t.style.shape&&n.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),n}}(),mxMarker.addMarker("dash",function(e,t,n,r,i,s,o,u,a,f){var l=i*(o+a+1),c=s*(o+a+1);return function(){e.begin(),e.moveTo(r.x-l/2-c/2,r.y-c/2+l/2),e.lineTo(r.x+c/2-3*l/2,r.y-3*c/2-l/2),e.stroke()}}),mxMarker.addMarker("cross",function(e,t,n,r,i,s,o,u,a,f){var l=i*(o+a+1),c=s*(o+a+1);return function(){e.begin(),e.moveTo(r.x-l/2-c/2,r.y-c/2+l/2),e.lineTo(r.x+c/2-3*l/2,r.y-3*c/2-l/2),e.moveTo(r.x-l/2+c/2,r.y-c/2-l/2),e.lineTo(r.x-c/2-3*l/2,r.y-3*c/2+l/2),e.stroke()}}),mxMarker.addMarker("circle",ft),mxMarker.addMarker("circlePlus",function(e,t,n,r,i,s,o,u,a,f){var l=r.clone(),c=ft.apply(this,arguments),h=i*(o+2*a),p=s*(o+2*a);return function(){c.apply(this,arguments),e.begin(),e.moveTo(l.x-i*a,l.y-s*a),e.lineTo(l.x-2*h+i*a,l.y-2*p+s*a),e.moveTo(l.x-h-p+s*a,l.y-p+h-i*a),e.lineTo(l.x+p-h-s*a,l.y-p-h+i*a),e.stroke()}}),mxMarker.addMarker("async",function(e,t,n,r,i,s,o,u,a,f){t=i*a*1.118,n=s*a*1.118,i*=o+a,s*=o+a;var l=r.clone();return l.x-=t,l.y-=n,r.x+=1*-i-t,r.y+=1*-s-n,function(){e.begin(),e.moveTo(l.x,l.y),u?e.lineTo(l.x-i-s/2,l.y-s+i/2):e.lineTo(l.x+s/2-i,l.y-s-i/2),e.lineTo(l.x-i,l.y-s),e.close(),f?e.fillAndStroke():e.stroke()}}),mxMarker.addMarker("openAsync",function(e){return e=null!=e?e:2,function(t,n,r,i,s,o,u,a,f,l){s*=u+f,o*=u+f;var c=i.clone();return function(){t.begin(),t.moveTo(c.x,c.y),a?t.lineTo(c.x-s-o/e,c.y-o+s/e):t.lineTo(c.x+o/e-s,c.y-o-s/e),t.stroke()}}}(2));if("undefined"!=typeof mxVertexHandler){var yt=function(e,t,n){return bt(e,["width"],t,function(t,r,i,s,o){return o=e.shape.getEdgeWidth()*e.view.scale+n,new mxPoint(s.x+r*t/4+i*o/2,s.y+i*t/4-r*o/2)},function(t,r,i,s,o,u){t=Math.sqrt(mxUtils.ptSegDistSq(s.x,s.y,o.x,o.y,u.x,u.y)),e.style.width=Math.round(2*t)/e.view.scale-n})},bt=function(e,t,n,r,i){return Ct(e,t,function(t){var i=e.absolutePoints,s=i.length-1;t=e.view.translate;var o=e.view.scale,u=n?i[0]:i[s],i=n?i[1]:i[s-1],s=i.x-u.x,a=i.y-u.y,f=Math.sqrt(s*s+a*a),u=r.call(this,f,s/f,a/f,u,i);return new mxPoint(u.x/o-t.x,u.y/o-t.y)},function(t,r,s){var o=e.absolutePoints,u=o.length-1;t=e.view.translate;var a=e.view.scale,f=n?o[0]:o[u],o=n?o[1]:o[u-1],u=o.x-f.x,l=o.y-f.y,c=Math.sqrt(u*u+l*l);r.x=(r.x+t.x)*a,r.y=(r.y+t.y)*a,i.call(this,c,u/c,l/c,f,o,r,s)})},wt=function(e){return function(t){return[Ct(t,["arrowWidth","arrowSize"],function(t){var n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"arrowWidth",W.prototype.arrowWidth))),r=Math.max(0,Math.min(e,mxUtils.getValue(this.state.style,"arrowSize",W.prototype.arrowSize)));return new mxPoint(t.x+(1-r)*t.width,t.y+(1-n)*t.height/2)},function(t,n){this.state.style.arrowWidth=Math.max(0,Math.min(1,Math.abs(t.y+t.height/2-n.y)/t.height*2)),this.state.style.arrowSize=Math.max(0,Math.min(e,(t.x+t.width-n.x)/t.width))})]}},Et=function(e,t,n){return function(r){var i=[Ct(r,["size"],function(n){var r=Math.max(0,Math.min(n.width,Math.min(n.height,parseFloat(mxUtils.getValue(this.state.style,"size",t)))))*e;return new mxPoint(n.x+r,n.y+r)},function(t,n){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,n.x-t.x),Math.min(t.height,n.y-t.y)))/e)})];return n&&mxUtils.getValue(r.style,mxConstants.STYLE_ROUNDED,!1)&&i.push(Nt(r)),i}},St=function(e,t,n,r,i){return n=null!=n?n:1,function(s){var o=[Ct(s,["size"],function(t){var n=null!=i?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null,r=parseFloat(mxUtils.getValue(this.state.style,"size",n?i:e));return new mxPoint(t.x+Math.max(0,Math.min(t.width,r*(n?1:t.width))),t.getCenterY())},function(e,t,r){var o=null!=i?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null;e=o?t.x-e.x:Math.max(0,Math.min(n,(t.x-e.x)/e.width)),o&&!mxEvent.isAltDown(r.getEvent())&&(e=s.view.graph.snap(e)),this.state.style.size=e},null,r)];return t&&mxUtils.getValue(s.style,mxConstants.STYLE_ROUNDED,!1)&&o.push(Nt(s)),o}},xt=function(e){return function(t){var n=[Ct(t,["size"],function(t){var n=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.state.style,"size",c.prototype.size))));return new mxPoint(t.x+n*t.width*.75,t.y+t.height/4)},function(t,n){this.state.style.size=Math.max(0,Math.min(e,(n.x-t.x)/(.75*t.width)))},null,!0)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&n.push(Nt(t)),n}},Tt=function(){return function(e){var t=[];return mxUtils.getValue(e.style,mxConstants.STYLE_ROUNDED,!1)&&t.push(Nt(e)),t}},Nt=function(e,t){return Ct(e,[mxConstants.STYLE_ARCSIZE],function(n){var r=null!=t?t:n.height/8;if("1"==mxUtils.getValue(e.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)){var i=mxUtils.getValue(e.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;return new mxPoint(n.x+n.width-Math.min(n.width/2,i),n.y+r)}return i=Math.max(0,parseFloat(mxUtils.getValue(e.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)))/100,new mxPoint(n.x+n.width-Math.min(Math.max(n.width/2,n.height/2),Math.min(n.width,n.height)*i),n.y+r)},function(t,n,r){"1"==mxUtils.getValue(e.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(Math.max(0,Math.min(t.width,2*(t.x+t.width-n.x)))):this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(Math.min(50,Math.max(0,100*(t.width-n.x+t.x)/Math.min(t.width,t.height))))})},Ct=function(e,t,n,r,i,s){var o=new mxHandle(e,null,mxVertexHandler.prototype.secondaryHandleImage);o.execute=function(){for(var e=0;e<t.length;e++)this.copyStyle(t[e])},o.getPosition=n,o.setPosition=r,o.ignoreGrid=null!=i?i:!0;if(s){var u=o.positionChanged;o.positionChanged=function(){u.apply(this,arguments),e.view.invalidate(this.state.cell),e.view.validate()}}return o},kt={link:function(e){return[yt(e,!0,10),yt(e,!1,10)]},flexArrow:function(e){var t=e.view.graph.gridSize/e.view.scale,n=[];return mxUtils.getValue(e.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(n.push(bt(e,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(t,n,r,i,s){return t=(e.shape.getEdgeWidth()-e.shape.strokewidth)*e.view.scale,s=3*mxUtils.getNumber(e.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*e.view.scale,new mxPoint(i.x+n*(s+e.shape.strokewidth*e.view.scale)+r*t/2,i.y+r*(s+e.shape.strokewidth*e.view.scale)-n*t/2)},function(n,r,i,s,o,u,a){n=Math.sqrt(mxUtils.ptSegDistSq(s.x,s.y,o.x,o.y,u.x,u.y)),r=mxUtils.ptLineDist(s.x,s.y,s.x+i,s.y-r,u.x,u.y),e.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(r-e.shape.strokewidth)/3)/100/e.view.scale,e.style.width=Math.round(2*n)/e.view.scale,mxEvent.isControlDown(a.getEvent())&&(e.style[mxConstants.STYLE_ENDSIZE]=e.style[mxConstants.STYLE_STARTSIZE]),mxEvent.isAltDown(a.getEvent())||Math.abs(parseFloat(e.style[mxConstants.STYLE_STARTSIZE])-parseFloat(e.style[mxConstants.STYLE_ENDSIZE]))<t/6&&(e.style[mxConstants.STYLE_STARTSIZE]=e.style[mxConstants.STYLE_ENDSIZE])})),n.push(bt(e,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(t,n,r,i,s){return t=(e.shape.getStartArrowWidth()-e.shape.strokewidth)*e.view.scale,s=3*mxUtils.getNumber(e.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*e.view.scale,new mxPoint(i.x+n*(s+e.shape.strokewidth*e.view.scale)+r*t/2,i.y+r*(s+e.shape.strokewidth*e.view.scale)-n*t/2)},function(n,r,i,s,o,u,a){n=Math.sqrt(mxUtils.ptSegDistSq(s.x,s.y,o.x,o.y,u.x,u.y)),r=mxUtils.ptLineDist(s.x,s.y,s.x+i,s.y-r,u.x,u.y),e.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(r-e.shape.strokewidth)/3)/100/e.view.scale,e.style.startWidth=Math.max(0,Math.round(2*n)-e.shape.getEdgeWidth())/e.view.scale,mxEvent.isControlDown(a.getEvent())&&(e.style[mxConstants.STYLE_ENDSIZE]=e.style[mxConstants.STYLE_STARTSIZE],e.style.endWidth=e.style.startWidth),mxEvent.isAltDown(a.getEvent())||(Math.abs(parseFloat(e.style[mxConstants.STYLE_STARTSIZE])-parseFloat(e.style[mxConstants.STYLE_ENDSIZE]))<t/6&&(e.style[mxConstants.STYLE_STARTSIZE]=e.style[mxConstants.STYLE_ENDSIZE]),Math.abs(parseFloat(e.style.startWidth)-parseFloat(e.style.endWidth))<t&&(e.style.startWidth=e.style.endWidth))}))),mxUtils.getValue(e.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(n.push(bt(e,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(t,n,r,i,s){return t=(e.shape.getEdgeWidth()-e.shape.strokewidth)*e.view.scale,s=3*mxUtils.getNumber(e.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*e.view.scale,new mxPoint(i.x+n*(s+e.shape.strokewidth*e.view.scale)-r*t/2,i.y+r*(s+e.shape.strokewidth*e.view.scale)+n*t/2)},function(n,r,i,s,o,u,a){n=Math.sqrt(mxUtils.ptSegDistSq(s.x,s.y,o.x,o.y,u.x,u.y)),r=mxUtils.ptLineDist(s.x,s.y,s.x+i,s.y-r,u.x,u.y),e.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(r-e.shape.strokewidth)/3)/100/e.view.scale,e.style.width=Math.round(2*n)/e.view.scale,mxEvent.isControlDown(a.getEvent())&&(e.style[mxConstants.STYLE_STARTSIZE]=e.style[mxConstants.STYLE_ENDSIZE]),mxEvent.isAltDown(a.getEvent())||Math.abs(parseFloat(e.style[mxConstants.STYLE_ENDSIZE])-parseFloat(e.style[mxConstants.STYLE_STARTSIZE]))<t/6&&(e.style[mxConstants.STYLE_ENDSIZE]=e.style[mxConstants.STYLE_STARTSIZE])})),n.push(bt(e,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(t,n,r,i,s){return t=(e.shape.getEndArrowWidth()-e.shape.strokewidth)*e.view.scale,s=3*mxUtils.getNumber(e.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*e.view.scale,new mxPoint(i.x+n*(s+e.shape.strokewidth*e.view.scale)-r*t/2,i.y+r*(s+e.shape.strokewidth*e.view.scale)+n*t/2)},function(n,r,i,s,o,u,a){n=Math.sqrt(mxUtils.ptSegDistSq(s.x,s.y,o.x,o.y,u.x,u.y)),r=mxUtils.ptLineDist(s.x,s.y,s.x+i,s.y-r,u.x,u.y),e.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(r-e.shape.strokewidth)/3)/100/e.view.scale,e.style.endWidth=Math.max(0,Math.round(2*n)-e.shape.getEdgeWidth())/e.view.scale,mxEvent.isControlDown(a.getEvent())&&(e.style[mxConstants.STYLE_STARTSIZE]=e.style[mxConstants.STYLE_ENDSIZE],e.style.startWidth=e.style.endWidth),mxEvent.isAltDown(a.getEvent())||(Math.abs(parseFloat(e.style[mxConstants.STYLE_ENDSIZE])-parseFloat(e.style[mxConstants.STYLE_STARTSIZE]))<t/6&&(e.style[mxConstants.STYLE_ENDSIZE]=e.style[mxConstants.STYLE_STARTSIZE]),Math.abs(parseFloat(e.style.endWidth)-parseFloat(e.style.startWidth))<t&&(e.style.endWidth=e.style.startWidth))}))),n},swimlane:function(e){var t=[Ct(e,[mxConstants.STYLE_STARTSIZE],function(t){var n=parseFloat(mxUtils.getValue(e.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return 1==mxUtils.getValue(e.style,mxConstants.STYLE_HORIZONTAL,1)?new mxPoint(t.getCenterX(),t.y+Math.max(0,Math.min(t.height,n))):new mxPoint(t.x+Math.max(0,Math.min(t.width,n)),t.getCenterY())},function(t,n){e.style[mxConstants.STYLE_STARTSIZE]=1==mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,1)?Math.round(Math.max(0,Math.min(t.height,n.y-t.y))):Math.round(Math.max(0,Math.min(t.width,n.x-t.x)))})];if(mxUtils.getValue(e.style,mxConstants.STYLE_ROUNDED)){var n=parseFloat(mxUtils.getValue(e.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));t.push(Nt(e,n/2))}return t},label:Tt(),ext:Tt(),rectangle:Tt(),triangle:Tt(),rhombus:Tt(),umlLifeline:function(e){return[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(e.height,parseFloat(mxUtils.getValue(this.state.style,"size",L.prototype.size))));return new mxPoint(e.getCenterX(),e.y+t)},function(e,t){this.state.style.size=Math.round(Math.max(0,Math.min(e.height,t.y-e.y)))},!1)]},umlFrame:function(e){return[Ct(e,["width","height"],function(e){var t=Math.max(A.prototype.corner,Math.min(e.width,mxUtils.getValue(this.state.style,"width",A.prototype.width))),n=Math.max(1.5*A.prototype.corner,Math.min(e.height,mxUtils.getValue(this.state.style,"height",A.prototype.height)));return new mxPoint(e.x+t,e.y+n)},function(e,t){this.state.style.width=Math.round(Math.max(A.prototype.corner,Math.min(e.width,t.x-e.x))),this.state.style.height=Math.round(Math.max(1.5*A.prototype.corner,Math.min(e.height,t.y-e.y)))},!1)]},process:function(e){var t=[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(.5,parseFloat(mxUtils.getValue(this.state.style,"size",v.prototype.size))));return new mxPoint(e.x+e.width*t,e.y+e.height/4)},function(e,t){this.state.style.size=Math.max(0,Math.min(.5,(t.x-e.x)/e.width))})];return mxUtils.getValue(e.style,mxConstants.STYLE_ROUNDED,!1)&&t.push(Nt(e)),t},cross:function(e){return[Ct(e,["size"],function(e){var t=Math.min(e.width,e.height),t=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"size",ot.prototype.size)))*t/2;return new mxPoint(e.getCenterX()-t,e.getCenterY()-t)},function(e,t){var n=Math.min(e.width,e.height);this.state.style.size=Math.max(0,Math.min(1,Math.min(Math.max(0,e.getCenterY()-t.y)/n*2,Math.max(0,e.getCenterX()-t.x)/n*2)))})]},note:function(e){return[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(e.width,Math.min(e.height,parseFloat(mxUtils.getValue(this.state.style,"size",i.prototype.size)))));return new mxPoint(e.x+e.width-t,e.y+t)},function(e,t){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(e.width,e.x+e.width-t.x),Math.min(e.height,t.y-e.y))))})]},manualInput:function(e){var t=[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(e.height,mxUtils.getValue(this.state.style,"size",I.prototype.size)));return new mxPoint(e.x+e.width/4,e.y+3*t/4)},function(e,t){this.state.style.size=Math.round(Math.max(0,Math.min(e.height,4*(t.y-e.y)/3)))})];return mxUtils.getValue(e.style,mxConstants.STYLE_ROUNDED,!1)&&t.push(Nt(e)),t},dataStorage:function(e){return[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",V.prototype.size))));return new mxPoint(e.x+(1-t)*e.width,e.getCenterY())},function(e,t){this.state.style.size=Math.max(0,Math.min(1,(e.x+e.width-t.x)/e.width))})]},callout:function(e){var t=[Ct(e,["size","position"],function(e){var t=Math.max(0,Math.min(e.height,mxUtils.getValue(this.state.style,"size",g.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",g.prototype.position)));return mxUtils.getValue(this.state.style,"base",g.prototype.base),new mxPoint(e.x+n*e.width,e.y+e.height-t)},function(e,t){mxUtils.getValue(this.state.style,"base",g.prototype.base),this.state.style.size=Math.round(Math.max(0,Math.min(e.height,e.y+e.height-t.y))),this.state.style.position=Math.round(100*Math.max(0,Math.min(1,(t.x-e.x)/e.width)))/100}),Ct(e,["position2"],function(e){var t=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position2",g.prototype.position2)));return new mxPoint(e.x+t*e.width,e.y+e.height)},function(e,t){this.state.style.position2=Math.round(100*Math.max(0,Math.min(1,(t.x-e.x)/e.width)))/100}),Ct(e,["base"],function(e){var t=Math.max(0,Math.min(e.height,mxUtils.getValue(this.state.style,"size",g.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",g.prototype.position))),r=Math.max(0,Math.min(e.width,mxUtils.getValue(this.state.style,"base",g.prototype.base)));return new mxPoint(e.x+Math.min(e.width,n*e.width+r),e.y+e.height-t)},function(e,t){var n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",g.prototype.position)));this.state.style.base=Math.round(Math.max(0,Math.min(e.width,t.x-e.x-n*e.width)))})];return mxUtils.getValue(e.style,mxConstants.STYLE_ROUNDED,!1)&&t.push(Nt(e)),t},internalStorage:function(e){var t=[Ct(e,["dx","dy"],function(e){var t=Math.max(0,Math.min(e.width,mxUtils.getValue(this.state.style,"dx",q.prototype.dx))),n=Math.max(0,Math.min(e.height,mxUtils.getValue(this.state.style,"dy",q.prototype.dy)));return new mxPoint(e.x+t,e.y+n)},function(e,t){this.state.style.dx=Math.round(Math.max(0,Math.min(e.width,t.x-e.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(e.height,t.y-e.y)))})];return mxUtils.getValue(e.style,mxConstants.STYLE_ROUNDED,!1)&&t.push(Nt(e)),t},corner:function(e){return[Ct(e,["dx","dy"],function(e){var t=Math.max(0,Math.min(e.width,mxUtils.getValue(this.state.style,"dx",R.prototype.dx))),n=Math.max(0,Math.min(e.height,mxUtils.getValue(this.state.style,"dy",R.prototype.dy)));return new mxPoint(e.x+t,e.y+n)},function(e,t){this.state.style.dx=Math.round(Math.max(0,Math.min(e.width,t.x-e.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(e.height,t.y-e.y)))})]},tee:function(e){return[Ct(e,["dx","dy"],function(e){var t=Math.max(0,Math.min(e.width,mxUtils.getValue(this.state.style,"dx",z.prototype.dx))),n=Math.max(0,Math.min(e.height,mxUtils.getValue(this.state.style,"dy",z.prototype.dy)));return new mxPoint(e.x+(e.width+t)/2,e.y+n)},function(e,t){this.state.style.dx=Math.round(Math.max(0,2*Math.min(e.width/2,t.x-e.x-e.width/2))),this.state.style.dy=Math.round(Math.max(0,Math.min(e.height,t.y-e.y)))})]},singleArrow:wt(1),doubleArrow:wt(.5),folder:function(e){return[Ct(e,["tabWidth","tabHeight"],function(e){var t=Math.max(0,Math.min(e.width,mxUtils.getValue(this.state.style,"tabWidth",o.prototype.tabWidth))),n=Math.max(0,Math.min(e.height,mxUtils.getValue(this.state.style,"tabHeight",o.prototype.tabHeight)));return mxUtils.getValue(this.state.style,"tabPosition",o.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(t=e.width-t),new mxPoint(e.x+t,e.y+n)},function(e,t){var n=Math.max(0,Math.min(e.width,t.x-e.x));mxUtils.getValue(this.state.style,"tabPosition",o.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(n=e.width-n),this.state.style.tabWidth=Math.round(n),this.state.style.tabHeight=Math.round(Math.max(0,Math.min(e.height,t.y-e.y)))})]},document:function(e){return[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",f.prototype.size))));return new mxPoint(e.x+3*e.width/4,e.y+(1-t)*e.height)},function(e,t){this.state.style.size=Math.max(0,Math.min(1,(e.y+e.height-t.y)/e.height))})]},tape:function(e){return[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",a.prototype.size))));return new mxPoint(e.getCenterX(),e.y+t*e.height/2)},function(e,t){this.state.style.size=Math.max(0,Math.min(1,(t.y-e.y)/e.height*2))})]},offPageConnector:function(e){return[Ct(e,["size"],function(e){var t=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",Q.prototype.size))));return new mxPoint(e.getCenterX(),e.y+(1-t)*e.height)},function(e,t){this.state.style.size=Math.max(0,Math.min(1,(e.y+e.height-t.y)/e.height))})]},step:St(y.prototype.size,!0,null,!0,y.prototype.fixedSize),hexagon:St(b.prototype.size,!0,.5,!0),curlyBracket:St(h.prototype.size,!1),display:St(ut.prototype.size,!1),cube:Et(1,e.prototype.size,!1),card:Et(.5,u.prototype.size,!0),loopLimit:Et(.5,K.prototype.size,!0),trapezoid:xt(.5),parallelogram:xt(1)};Graph.createHandle=Ct,Graph.handleFactory=kt,mxVertexHandler.prototype.createCustomHandles=function(){if(1==this.state.view.graph.getSelectionCount()&&this.graph.isCellRotatable(this.state.cell)){var e=this.state.style.shape;null==mxCellRenderer.defaultShapes[e]&&null==mxStencilRegistry.getStencil(e)&&(e=mxConstants.SHAPE_RECTANGLE),e=kt[e],null==e&&null!=this.state.shape&&this.state.shape.isRoundable()&&(e=kt[mxConstants.SHAPE_RECTANGLE]);if(null!=e)return e(this.state)}return null},mxEdgeHandler.prototype.createCustomHandles=function(){if(1==this.state.view.graph.getSelectionCount()){var e=this.state.style.shape;null==mxCellRenderer.defaultShapes[e]&&null==mxStencilRegistry.getStencil(e)&&(e=mxConstants.SHAPE_CONNECTOR),e=kt[e];if(null!=e)return e(this.state)}return null}}else Graph.createHandle=function(){},Graph.handleFactory={};var Lt=new mxPoint(1,0),At=new mxPoint(1,0),wt=mxUtils.toRadians(-30),Lt=mxUtils.getRotatedPoint(Lt,Math.cos(wt),Math.sin(wt)),wt=mxUtils.toRadians(-150),At=mxUtils.getRotatedPoint(At,Math.cos(wt),Math.sin(wt));mxEdgeStyle.IsometricConnector=function(e,t,n,r,i){var s=e.view;r=null!=r&&0<r.length?r[0]:null;var o=e.absolutePoints,u=o[0],o=o[o.length-1];null!=r&&(r=s.transformControlPoint(e,r)),null==u&&null!=t&&(u=new mxPoint(t.getCenterX(),t.getCenterY())),null==o&&null!=n&&(o=new mxPoint(n.getCenterX(),n.getCenterY()));var a=Lt.x,f=Lt.y,l=At.x,c=At.y,h="horizontal"==mxUtils.getValue(e.style,"elbow","horizontal");if(null!=o&&null!=u){e=function(e,t,n){e-=p.x;var r=t-p.y;t=(c*e-l*r)/(a*c-f*l),e=(f*e-a*r)/(f*l-a*c),h?(n&&(p=new mxPoint(p.x+a*t,p.y+f*t),i.push(p)),p=new mxPoint(p.x+l*e,p.y+c*e)):(n&&(p=new mxPoint(p.x+l*e,p.y+c*e),i.push(p)),p=new mxPoint(p.x+a*t,p.y+f*t)),i.push(p)};var p=u;null==r&&(r=new mxPoint(u.x+(o.x-u.x)/2,u.y+(o.y-u.y)/2)),e(r.x,r.y,!0),e(o.x,o.y,!1)}},mxStyleRegistry.putValue("isometricEdgeStyle",mxEdgeStyle.IsometricConnector);var Ot=Graph.prototype.createEdgeHandler;Graph.prototype.createEdgeHandler=function(e,t){if(t==mxEdgeStyle.IsometricConnector){var n=new mxElbowEdgeHandler(e);return n.snapToTerminals=!1,n}return Ot.apply(this,arguments)},t.prototype.constraints=[],n.prototype.constraints=[],g.prototype.constraints=[],mxRectangleShape.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],mxEllipse.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5))],mxLabel.prototype.constraints=mxRectangleShape.prototype.constraints,mxImageShape.prototype.constraints=mxRectangleShape.prototype.constraints,mxSwimlane.prototype.constraints=mxRectangleShape.prototype.constraints,w.prototype.constraints=mxRectangleShape.prototype.constraints,i.prototype.constraints=mxRectangleShape.prototype.constraints,u.prototype.constraints=mxRectangleShape.prototype.constraints,e.prototype.constraints=mxRectangleShape.prototype.constraints,o.prototype.constraints=mxRectangleShape.prototype.constraints,q.prototype.constraints=mxRectangleShape.prototype.constraints,V.prototype.constraints=mxRectangleShape.prototype.constraints,G.prototype.constraints=mxEllipse.prototype.constraints,Y.prototype.constraints=mxEllipse.prototype.constraints,Z.prototype.constraints=mxEllipse.prototype.constraints,it.prototype.constraints=mxEllipse.prototype.constraints,I.prototype.constraints=mxRectangleShape.prototype.constraints,st.prototype.constraints=mxRectangleShape.prototype.constraints,ut.prototype.constraints=mxRectangleShape.prototype.constraints,K.prototype.constraints=mxRectangleShape.prototype.constraints,Q.prototype.constraints=mxRectangleShape.prototype.constraints,mxCylinder.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.15,.05),!1),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.85,.05),!1),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.3),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.7),!0),new mxConnectionConstraint(new mxPoint(.15,.95),!1),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.85,.95),!1)],x.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.1),!1),new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.75,.1),!1),new mxConnectionConstraint(new mxPoint(0,1/3),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(1,1/3),!1),new mxConnectionConstraint(new mxPoint(1,1),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1)],P.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],mxActor.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.25,.2),!1),new mxConnectionConstraint(new mxPoint(.1,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.75,.25),!1),new mxConnectionConstraint(new mxPoint(.9,.5),!1),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],s.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(.5,.25),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.5,.75),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],a.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.35),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.65),!1),new mxConnectionConstraint(new mxPoint(1,.35),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,.65),!1),new mxConnectionConstraint(new mxPoint(.25,1),!1),new mxConnectionConstraint(new mxPoint(.75,0),!1)],y.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxLine.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],O.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.5,1),!1)],mxDoubleEllipse.prototype.constraints=mxEllipse.prototype.constraints,mxRhombus.prototype.constraints=mxEllipse.prototype.constraints,mxTriangle.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxHexagon.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.375,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.625,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.375,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.625,1),!0)],mxCloud.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.25),!1),new mxConnectionConstraint(new mxPoint(.4,.1),!1),new mxConnectionConstraint(new mxPoint(.16,.55),!1),new mxConnectionConstraint(new mxPoint(.07,.4),!1),new mxConnectionConstraint(new mxPoint(.31,.8),!1),new mxConnectionConstraint(new mxPoint(.13,.77),!1),new mxConnectionConstraint(new mxPoint(.8,.8),!1),new mxConnectionConstraint(new mxPoint(.55,.95),!1),new mxConnectionConstraint(new mxPoint(.875,.5),!1),new mxConnectionConstraint(new mxPoint(.96,.7),!1),new mxConnectionConstraint(new mxPoint(.625,.2),!1),new mxConnectionConstraint(new mxPoint(.88,.25),!1)],l.prototype.constraints=mxRectangleShape.prototype.constraints,c.prototype.constraints=mxRectangleShape.prototype.constraints,f.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxArrow.prototype.constraints=null,z.prototype.constraints=null,R.prototype.constraints=null,U.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],W.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],X.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],ot.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.5,1),!1)],L.prototype.constraints=null,$.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],J.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.175,.25),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.175,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],_.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],D.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)]}(),Actions.prototype.init=function(){function e(e){r.escape();var t=r.getDeletableCells(r.getSelectionCells());if(null!=t&&0<t.length){var n=r.model.getParents(t);r.removeCells(t,e);if(null!=n){e=[];for(t=0;t<n.length;t++)r.model.contains(n[t])&&(r.model.isVertex(n[t])||r.model.isEdge(n[t]))&&e.push(n[t]);r.setSelectionCells(e)}}}var t=this.editorUi,n=t.editor,r=n.graph,i=function(){return Action.prototype.isEnabled.apply(this,arguments)&&r.isEnabled()};this.addAction("new...",function(){r.openLink(t.getUrl())}),this.addAction("open...",function(){window.openNew=!0,window.openKey="open",t.openFile()}),this.addAction("import...",function(){window.openNew=!1,window.openKey="import",window.openFile=new OpenFile(mxUtils.bind(this,function(){t.hideDialog()})),window.openFile.setConsumer(mxUtils.bind(this,function(e,t){try{var r=mxUtils.parseXml(e);n.graph.setSelectionCells(n.graph.importGraphModel(r.documentElement))}catch(i){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+i.message)}})),t.showDialog((new OpenDialog(this)).container,320,220,!0,!0,function(){window.openFile=null})}).isEnabled=i,this.addAction("save",function(){t.saveFile(!1)},null,null,Editor.ctrlKey+"+S").isEnabled=i,this.addAction("saveAs...",function(){t.saveFile(!0)},null,null,Editor.ctrlKey+"+Shift+S").isEnabled=i,this.addAction("export...",function(){t.showDialog((new ExportDialog(t)).container,300,230,!0,!0)}),this.addAction("editDiagram...",function(){var e=new EditDiagramDialog(t);t.showDialog(e.container,620,420,!0,!1),e.init()}),this.addAction("pageSetup...",function(){t.showDialog((new PageSetupDialog(t)).container,320,220,!0,!0)}).isEnabled=i,this.addAction("print...",function(){t.showDialog((new PrintDialog(t)).container,300,180,!0,!0)},null,"sprite-print",Editor.ctrlKey+"+P"),this.addAction("preview",function(){mxUtils.show(r,null,10,10)}),this.addAction("undo",function(){t.undo()},null,"sprite-undo",Editor.ctrlKey+"+Z"),this.addAction("redo",function(){t.redo()},null,"sprite-redo",mxClient.IS_WIN?Editor.ctrlKey+"+Y":Editor.ctrlKey+"+Shift+Z"),this.addAction("cut",function(){mxClipboard.cut(r)},null,"sprite-cut",Editor.ctrlKey+"+X"),this.addAction("copy",function(){mxClipboard.copy(r)},null,"sprite-copy",Editor.ctrlKey+"+C"),this.addAction("paste",function(){r.isEnabled()&&!r.isCellLocked(r.getDefaultParent())&&mxClipboard.paste(r)},!1,"sprite-paste",Editor.ctrlKey+"+V"),this.addAction("pasteHere",function(e){if(r.isEnabled()&&!r.isCellLocked(r.getDefaultParent())){r.getModel().beginUpdate();try{var t=mxClipboard.paste(r);if(null!=t){e=!0;for(var n=0;n<t.length&&e;n++)e=e&&r.model.isEdge(t[n]);var i=r.view.translate,s=r.view.scale,o=i.x,u=i.y,i=null;if(1==t.length&&e){var a=r.getCellGeometry(t[0]);null!=a&&(i=a.getTerminalPoint(!0))}i=null!=i?i:r.getBoundingBoxFromGeometry(t,e);if(null!=i){var f=Math.round(r.snap(r.popupMenuHandler.triggerX/s-o)),l=Math.round(r.snap(r.popupMenuHandler.triggerY/s-u));r.cellsMoved(t,f-i.x,l-i.y)}}}finally{r.getModel().endUpdate()}}}),this.addAction("copySize",function(e){e=r.getSelectionCell(),r.isEnabled()&&null!=e&&r.getModel().isVertex(e)&&(e=r.getCellGeometry(e),null!=e&&(t.copiedSize=new mxRectangle(e.x,e.y,e.width,e.height)))},null,null,"Alt+Shit+X"),this.addAction("pasteSize",function(e){if(r.isEnabled()&&!r.isSelectionEmpty()&&null!=t.copiedSize){r.getModel().beginUpdate();try{var n=r.getSelectionCells();for(e=0;e<n.length;e++)if(r.getModel().isVertex(n[e])){var i=r.getCellGeometry(n[e]);null!=i&&(i=i.clone(),i.width=t.copiedSize.width,i.height=t.copiedSize.height,r.getModel().setGeometry(n[e],i))}}finally{r.getModel().endUpdate()}}},null,null,"Alt+Shit+V"),this.addAction("delete",function(t){e(null!=t&&mxEvent.isShiftDown(t))},null,null,"Delete"),this.addAction("deleteAll",function(){e(!0)},null,null,Editor.ctrlKey+"+Delete"),this.addAction("duplicate",function(){r.setSelectionCells(r.duplicateCells())},null,null,Editor.ctrlKey+"+D"),this.put("turn",new Action(mxResources.get("turn")+" / "+mxResources.get("reverse"),function(){r.turnShapes(r.getSelectionCells())},null,null,Editor.ctrlKey+"+R")),this.addAction("selectVertices",function(){r.selectVertices()},null,null,Editor.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){r.selectEdges()},null,null,Editor.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){r.selectAll(null,!0)},null,null,Editor.ctrlKey+"+A"),this.addAction("selectNone",function(){r.clearSelection()},null,null,Editor.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!r.isSelectionEmpty()){r.getModel().beginUpdate();try{var e=r.isCellMovable(r.getSelectionCell())?1:0;r.toggleCellStyles(mxConstants.STYLE_MOVABLE,e),r.toggleCellStyles(mxConstants.STYLE_RESIZABLE,e),r.toggleCellStyles(mxConstants.STYLE_ROTATABLE,e),r.toggleCellStyles(mxConstants.STYLE_DELETABLE,e),r.toggleCellStyles(mxConstants.STYLE_EDITABLE,e),r.toggleCellStyles("connectable",e)}finally{r.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+L"),this.addAction("home",function(){r.home()},null,null,"Home"),this.addAction("exitGroup",function(){r.exitGroup()},null,null,Editor.ctrlKey+"+Shift+Home"),this.addAction("enterGroup",function(){r.enterGroup()},null,null,Editor.ctrlKey+"+Shift+End"),this.addAction("collapse",function(){r.foldCells(!0)},null,null,Editor.ctrlKey+"+Home"),this.addAction("expand",function(){r.foldCells(!1)},null,null,Editor.ctrlKey+"+End"),this.addAction("toFront",function(){r.orderCells(!1)},null,null,Editor.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){r.orderCells(!0)},null,null,Editor.ctrlKey+"+Shift+B"),this.addAction("group",function(){1==r.getSelectionCount()?r.setCellStyles("container","1"):r.setSelectionCell(r.groupCells(null,0))},null,null,Editor.ctrlKey+"+G"),this.addAction("ungroup",function(){1==r.getSelectionCount()&&0==r.getModel().getChildCount(r.getSelectionCell())?r.setCellStyles("container","0"):r.setSelectionCells(r.ungroupCells())},null,null,Editor.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){r.removeCellsFromParent()}),this.addAction("edit",function(){r.isEnabled()&&r.startEditingAtCell()},null,null,"F2/Enter"),this.addAction("editData...",function(){var e=r.getSelectionCell()||r.getModel().getRoot();t.showDataDialog(e)},null,null,Editor.ctrlKey+"+M"),this.addAction("editTooltip...",function(){var e=t.editor.graph;if(e.isEnabled()&&!e.isSelectionEmpty()){var n=e.getSelectionCell(),r="";if(mxUtils.isNode(n.value)){var i=n.value.getAttribute("tooltip");null!=i&&(r=i)}r=new TextareaDialog(t,mxResources.get("editTooltip")+":",r,function(t){e.setTooltipForCell(n,t)}),t.showDialog(r.container,320,200,!0,!0),r.init()}},null,null,"Alt+Shift+T"),this.addAction("openLink",function(){var e=r.getLinkForCell(r.getSelectionCell());null!=e&&r.openLink(e)}),this.addAction("editLink...",function(){var e=t.editor.graph;if(e.isEnabled()&&!e.isSelectionEmpty()){var n=e.getSelectionCell(),r=e.getLinkForCell(n)||"";t.showLinkDialog(r,mxResources.get("apply"),function(t){t=mxUtils.trim(t),e.setLinkForCell(n,0<t.length?t:null)})}},null,null,"Alt+Shift+L"),this.put("insertImage",new Action(mxResources.get("image")+"...",function(){r.isEnabled()&&!r.isCellLocked(r.getDefaultParent())&&(r.clearSelection(),t.actions.get("image").funct())})).isEnabled=i,this.put("insertLink",new Action(mxResources.get("link")+"...",function(){r.isEnabled()&&!r.isCellLocked(r.getDefaultParent())&&t.showLinkDialog("",mxResources.get("insert"),function(e,t){e=mxUtils.trim(e);if(0<e.length){var n=null,i=r.getLinkTitle(e);null!=t&&0<t.length&&(n=t[0].iconUrl,i=t[0].name||t[0].type,i=i.charAt(0).toUpperCase()+i.substring(1),30<i.length&&(i=i.substring(0,30)+"..."));var s=r.getFreeInsertPoint(),n=new mxCell(i,new mxGeometry(s.x,s.y,100,40),"fontColor=#0000EE;fontStyle=4;rounded=1;overflow=hidden;"+(null!=n?"shape=label;imageWidth=16;imageHeight=16;spacingLeft=26;align=left;image="+n:"spacing=10;"));n.vertex=!0,r.setLinkForCell(n,e),r.cellSizeUpdated(n,!0),r.getModel().beginUpdate();try{n=r.addCell(n),r.fireEvent(new mxEventObject("cellsInserted","cells",[n]))}finally{r.getModel().endUpdate()}r.setSelectionCell(n),r.scrollCellToVisible(r.getSelectionCell())}})})).isEnabled=i,this.addAction("link...",mxUtils.bind(this,function(){var e=t.editor.graph;if(e.isEnabled())if(e.cellEditor.isContentEditing()){var n=e.getSelectedElement(),r=e.getParentByName(n,"A",e.cellEditor.textarea),i="";if(null==r&&null!=n&&null!=n.getElementsByTagName)for(var s=n.getElementsByTagName("a"),o=0;o<s.length&&null==r;o++)s[o].textContent==n.textContent&&(e.selectNode(s[o]),r=s[o]);null!=r&&"A"==r.nodeName&&(i=r.getAttribute("href")||"");var u=e.cellEditor.saveSelection();t.showLinkDialog(i,mxResources.get("apply"),mxUtils.bind(this,function(t){e.cellEditor.restoreSelection(u),null!=t&&e.insertLink(t)}))}else e.isSelectionEmpty()?this.get("insertLink").funct():this.get("editLink").funct()})).isEnabled=i,this.addAction("autosize",function(){var e=r.getSelectionCells();if(null!=e){r.getModel().beginUpdate();try{for(var t=0;t<e.length;t++){var n=e[t];if(r.getModel().getChildCount(n))r.updateGroupBounds([n],20);else{var i=r.view.getState(n),s=r.getCellGeometry(n);r.getModel().isVertex(n)&&null!=i&&null!=i.text&&null!=s&&r.isWrapping(n)?(s=s.clone(),s.height=i.text.boundingBox.height/r.view.scale,r.getModel().setGeometry(n,s)):r.updateCellSize(n)}}}finally{r.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+Shift+Y"),this.addAction("formattedText",function(){var e=r.getView().getState(r.getSelectionCell());if(null!=e){var n="1";r.stopEditing(),r.getModel().beginUpdate();try{if("1"==e.style.html){var n=null,i=r.convertValueToString(e.cell);"0"!=mxUtils.getValue(e.style,"nl2Br","1")&&(i=i.replace(/\n/g,"").replace(/<br\s*.?>/g,"\n"));var s=document.createElement("div");s.innerHTML=i,i=mxUtils.extractTextWithWhitespace(s.childNodes),r.cellLabelChanged(e.cell,i)}else i=mxUtils.htmlEntities(r.convertValueToString(e.cell),!1),"0"!=mxUtils.getValue(e.style,"nl2Br","1")&&(i=i.replace(/\n/g,"<br/>")),r.cellLabelChanged(e.cell,r.sanitizeHtml(i));r.setCellStyles("html",n),t.fireEvent(new mxEventObject("styleChanged","keys",["html"],"values",[null!=n?n:"0"],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}}),this.addAction("wordWrap",function(){var e=r.getView().getState(r.getSelectionCell()),t="wrap";r.stopEditing(),null!=e&&"wrap"==e.style[mxConstants.STYLE_WHITE_SPACE]&&(t=null),r.setCellStyles(mxConstants.STYLE_WHITE_SPACE,t)}),this.addAction("rotation",function(){var e="0",n=r.getView().getState(r.getSelectionCell());null!=n&&(e=n.style[mxConstants.STYLE_ROTATION]||e),e=new FilenameDialog(t,e,mxResources.get("apply"),function(e){null!=e&&0<e.length&&r.setCellStyles(mxConstants.STYLE_ROTATION,e)},mxResources.get("enterValue")+" ("+mxResources.get("rotation")+" 0-360)"),t.showDialog(e.container,375,80,!0,!0),e.init()}),this.addAction("resetView",function(){r.zoomTo(1),t.resetScrollbars()},null,null,Editor.ctrlKey+"+H"),this.addAction("zoomIn",function(e){r.zoomIn()},null,null,Editor.ctrlKey+" + (Numpad) / Alt+Mousewheel"),this.addAction("zoomOut",function(e){r.zoomOut()},null,null,Editor.ctrlKey+" - (Numpad) / Alt+Mousewheel"),this.addAction("fitWindow",function(){r.fit()},null,null,Editor.ctrlKey+"+Shift+H"),this.addAction("fitPage",mxUtils.bind(this,function(){r.pageVisible||this.get("pageView").funct();var e=r.pageFormat,t=r.pageScale;r.zoomTo(Math.floor(20*Math.min((r.container.clientWidth-10)/e.width/t,(r.container.clientHeight-10)/e.height/t))/20),mxUtils.hasScrollbars(r.container)&&(e=r.getPagePadding(),r.container.scrollTop=e.y*r.view.scale-1,r.container.scrollLeft=Math.min(e.x*r.view.scale,(r.container.scrollWidth-r.container.clientWidth)/2)-1)}),null,null,Editor.ctrlKey+"+J"),this.addAction("fitTwoPages",mxUtils.bind(this,function(){r.pageVisible||this.get("pageView").funct();var e=r.pageFormat,t=r.pageScale;r.zoomTo(Math.floor(20*Math.min((r.container.clientWidth-10)/(2*e.width)/t,(r.container.clientHeight-10)/e.height/t))/20),mxUtils.hasScrollbars(r.container)&&(e=r.getPagePadding(),r.container.scrollTop=Math.min(e.y,(r.container.scrollHeight-r.container.clientHeight)/2),r.container.scrollLeft=Math.min(e.x,(r.container.scrollWidth-r.container.clientWidth)/2))}),null,null,Editor.ctrlKey+"+Shift+J"),this.addAction("fitPageWidth",mxUtils.bind(this,function(){r.pageVisible||this.get("pageView").funct(),r.zoomTo(Math.floor(20*(r.container.clientWidth-10)/r.pageFormat.width/r.pageScale)/20);if(mxUtils.hasScrollbars(r.container)){var e=r.getPagePadding();r.container.scrollLeft=Math.min(e.x*r.view.scale,(r.container.scrollWidth-r.container.clientWidth)/2)}})),this.put("customZoom",new Action(mxResources.get("custom")+"...",mxUtils.bind(this,function(){var e=new FilenameDialog(this.editorUi,parseInt(100*r.getView().getScale()),mxResources.get("apply"),mxUtils.bind(this,function(e){e=parseInt(e),!isNaN(e)&&0<e&&r.zoomTo(e/100)}),mxResources.get("zoom")+" (%)");this.editorUi.showDialog(e.container,300,80,!0,!0),e.init()}),null,null,Editor.ctrlKey+"+0")),this.addAction("pageScale...",mxUtils.bind(this,function(){var e=new FilenameDialog(this.editorUi,parseInt(100*r.pageScale),mxResources.get("apply"),mxUtils.bind(this,function(e){e=parseInt(e),!isNaN(e)&&0<e&&t.setPageScale(e/100)}),mxResources.get("pageScale")+" (%)");this.editorUi.showDialog(e.container,300,80,!0,!0),e.init()}));var s=null,s=this.addAction("grid",function(){r.setGridEnabled(!r.isGridEnabled()),t.fireEvent(new mxEventObject("gridEnabledChanged"))},null,null,Editor.ctrlKey+"+Shift+G");s.setToggleAction(!0),s.setSelectedCallback(function(){return r.isGridEnabled()}),s.setEnabled(!1),s=this.addAction("guides",function(){r.graphHandler.guidesEnabled=!r.graphHandler.guidesEnabled,t.fireEvent(new mxEventObject("guidesEnabledChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.graphHandler.guidesEnabled}),s.setEnabled(!1),s=this.addAction("tooltips",function(){r.tooltipHandler.setEnabled(!r.tooltipHandler.isEnabled())}),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.tooltipHandler.isEnabled()}),s=this.addAction("collapseExpand",function(){var e=new ChangePageSetup(t);e.ignoreColor=!0,e.ignoreImage=!0,e.foldingEnabled=!r.foldingEnabled,r.model.execute(e)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.foldingEnabled}),s.isEnabled=i,s=this.addAction("scrollbars",function(){t.setScrollbars(!t.hasScrollbars())}),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.scrollbars}),s=this.addAction("pageView",mxUtils.bind(this,function(){t.setPageVisible(!r.pageVisible)})),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.pageVisible}),s=this.addAction("connectionArrows",function(){r.connectionArrowsEnabled=!r.connectionArrowsEnabled,t.fireEvent(new mxEventObject("connectionArrowsChanged"))},null,null,"Alt+Shift+A"),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.connectionArrowsEnabled}),s=this.addAction("connectionPoints",function(){r.setConnectable(!r.connectionHandler.isEnabled()),t.fireEvent(new mxEventObject("connectionPointsChanged"))},null,null,"Alt+Shift+P"),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.connectionHandler.isEnabled()}),s=this.addAction("copyConnect",function(){r.connectionHandler.setCreateTarget(!r.connectionHandler.isCreateTarget()),t.fireEvent(new mxEventObject("copyConnectChanged"))}),s.setToggleAction(!0),s.setSelectedCallback(function(){return r.connectionHandler.isCreateTarget()}),s.isEnabled=i,s=this.addAction("autosave",function(){t.editor.setAutosave(!t.editor.autosave)}),s.setToggleAction(!0),s.setSelectedCallback(function(){return t.editor.autosave}),s.isEnabled=i,s.visible=!1,this.addAction("help",function(){var e="";mxResources.isLanguageSupported(mxClient.language)&&(e="_"+mxClient.language),r.openLink(RESOURCES_PATH+"/help"+e+".html")});var o=!1;this.put("about",new Action(mxResources.get("about")+" Graph Editor...",function(){o||(t.showDialog((new AboutDialog(t)).container,320,280,!0,!0,function(){o=!1}),o=!0)},null,null,"F1")),s=mxUtils.bind(this,function(e,t,n,i){return this.addAction(e,function(){if(null!=n&&r.cellEditor.isContentEditing())n();else{r.stopEditing(!1),r.getModel().beginUpdate();try{r.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,t),(t&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?r.updateLabelElements(r.getSelectionCells(),function(e){e.style.fontWeight=null,"B"==e.nodeName&&r.replaceElement(e)}):(t&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?r.updateLabelElements(r.getSelectionCells(),function(e){e.style.fontStyle=null,"I"==e.nodeName&&r.replaceElement(e)}):(t&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&r.updateLabelElements(r.getSelectionCells(),function(e){e.style.textDecoration=null,"U"==e.nodeName&&r.replaceElement(e)})}finally{r.getModel().endUpdate()}}},null,null,i)}),s("bold",mxConstants.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor.ctrlKey+"+B"),s("italic",mxConstants.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor.ctrlKey+"+I"),s("underline",mxConstants.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor.ctrlKey+"+U"),this.addAction("fontColor...",function(){t.menus.pickColor(mxConstants.STYLE_FONTCOLOR,"forecolor","000000")}),this.addAction("strokeColor...",function(){t.menus.pickColor(mxConstants.STYLE_STROKECOLOR)}),this.addAction("fillColor...",function(){t.menus.pickColor(mxConstants.STYLE_FILLCOLOR)}),this.addAction("gradientColor...",function(){t.menus.pickColor(mxConstants.STYLE_GRADIENTCOLOR)}),this.addAction("backgroundColor...",function(){t.menus.pickColor(mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")}),this.addAction("borderColor...",function(){t.menus.pickColor(mxConstants.STYLE_LABEL_BORDERCOLOR)}),this.addAction("vertical",function(){t.menus.toggleStyle(mxConstants.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){t.menus.toggleStyle(mxConstants.STYLE_SHADOW)}),this.addAction("solid",function(){r.getModel().beginUpdate();try{r.setCellStyles(mxConstants.STYLE_DASHED,null),r.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),t.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",[null,null],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}),this.addAction("dashed",function(){r.getModel().beginUpdate();try{r.setCellStyles(mxConstants.STYLE_DASHED,"1"),r.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),t.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1",null],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}),this.addAction("dotted",function(){r.getModel().beginUpdate();try{r.setCellStyles(mxConstants.STYLE_DASHED,"1"),r.setCellStyles(mxConstants.STYLE_DASH_PATTERN,"1 4"),t.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}),this.addAction("sharp",function(){r.getModel().beginUpdate();try{r.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),r.setCellStyles(mxConstants.STYLE_CURVED,"0"),t.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","0"],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}),this.addAction("rounded",function(){r.getModel().beginUpdate();try{r.setCellStyles(mxConstants.STYLE_ROUNDED,"1"),r.setCellStyles(mxConstants.STYLE_CURVED,"0"),t.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["1","0"],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!r.isSelectionEmpty()&&r.isEnabled()){r.getModel().beginUpdate();try{var e=r.getSelectionCells(),n=r.view.getState(e[0]),i=null!=n?n.style:r.getCellStyle(e[0]),s="1"==mxUtils.getValue(i,mxConstants.STYLE_ROUNDED,"0")?"0":"1";r.setCellStyles(mxConstants.STYLE_ROUNDED,s),r.setCellStyles(mxConstants.STYLE_CURVED,null),t.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",[s,"0"],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}}),this.addAction("curved",function(){r.getModel().beginUpdate();try{r.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),r.setCellStyles(mxConstants.STYLE_CURVED,"1"),t.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","1"],"cells",r.getSelectionCells()))}finally{r.getModel().endUpdate()}}),this.addAction("collapsible",function(){var e=r.view.getState(r.getSelectionCell()),n="1";null!=e&&null!=r.getFoldingImage(e)&&(n="0"),r.setCellStyles("collapsible",n),t.fireEvent(new mxEventObject("styleChanged","keys",["collapsible"],"values",[n],"cells",r.getSelectionCells()))}),this.addAction("editStyle...",mxUtils.bind(this,function(){var e=r.getSelectionCells();if(null!=e&&0<e.length){var t=r.getModel(),t=new TextareaDialog(this.editorUi,mxResources.get("editStyle")+":",t.getStyle(e[0])||"",function(t){null!=t&&r.setCellStyle(mxUtils.trim(t),e)},null,null,400,220);this.editorUi.showDialog(t.container,420,300,!0,!0),t.init()}}),null,null,Editor.ctrlKey+"+E"),this.addAction("setAsDefaultStyle",function(){r.isEnabled()&&!r.isSelectionEmpty()&&t.setDefaultStyle(r.getSelectionCell())},null,null,Editor.ctrlKey+"+Shift+D"),this.addAction("clearDefaultStyle",function(){r.isEnabled()&&t.clearDefaultStyle()},null,null,Editor.ctrlKey+"+Shift+R"),this.addAction("addWaypoint",function(){var e=r.getSelectionCell();if(null!=e&&r.getModel().isEdge(e)){var t=n.graph.selectionCellsHandler.getHandler(e);if(t instanceof mxEdgeHandler){for(var i=r.view.translate,s=r.view.scale,o=i.x,i=i.y,e=r.getModel().getParent(e),u=r.getCellGeometry(e);r.getModel().isVertex(e)&&null!=u;)o+=u.x,i+=u.y,e=r.getModel().getParent(e),u=r.getCellGeometry(e);o=Math.round(r.snap(r.popupMenuHandler.triggerX/s-o)),s=Math.round(r.snap(r.popupMenuHandler.triggerY/s-i)),t.addPointAt(t.state,o,s)}}}),this.addAction("removeWaypoint",function(){var e=t.actions.get("removeWaypoint");null!=e.handler&&e.handler.removePoint(e.handler.state,e.index)}),this.addAction("clearWaypoints",function(){var e=r.getSelectionCells();if(null!=e){e=r.addAllEdges(e),r.getModel().beginUpdate();try{for(var t=0;t<e.length;t++){var n=e[t];if(r.getModel().isEdge(n)){var i=r.getCellGeometry(n);null!=i&&(i=i.clone(),i.points=null,r.getModel().setGeometry(n,i))}}}finally{r.getModel().endUpdate()}}},null,null,"Alt+Shift+C"),s=this.addAction("subscript",mxUtils.bind(this,function(){r.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)}),null,null,Editor.ctrlKey+"+,"),s=this.addAction("superscript",mxUtils.bind(this,function(){r.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)}),null,null,Editor.ctrlKey+"+."),this.addAction("image...",function(){if(r.isEnabled()&&!r.isCellLocked(r.getDefaultParent())){var e=mxResources.get("image")+" ("+mxResources.get("url")+"):",n=r.getView().getState(r.getSelectionCell()),i="";null!=n&&(i=n.style[mxConstants.STYLE_IMAGE]||i);var s=r.cellEditor.saveSelection();t.showImageDialog(e,i,function(e,t,n){if(r.cellEditor.isContentEditing())r.cellEditor.restoreSelection(s),r.insertImage(e,t,n);else{var i=r.getSelectionCells();if(null!=e&&(0<e.length||0<i.length)){var o=null;r.getModel().beginUpdate();try{if(0==i.length){var u=r.getFreeInsertPoint(),o=i=[r.insertVertex(r.getDefaultParent(),null,"",u.x,u.y,t,n,"shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;")];r.fireEvent(new mxEventObject("cellsInserted","cells",o))}r.setCellStyles(mxConstants.STYLE_IMAGE,0<e.length?e:null,i);var a=r.view.getState(i[0]),f=null!=a?a.style:r.getCellStyle(i[0]);"image"!=f[mxConstants.STYLE_SHAPE]&&"label"!=f[mxConstants.STYLE_SHAPE]?r.setCellStyles(mxConstants.STYLE_SHAPE,"image",i):0==e.length&&r.setCellStyles(mxConstants.STYLE_SHAPE,null,i);if(1==r.getSelectionCount()&&null!=t&&null!=n){var l=i[0],c=r.getModel().getGeometry(l);null!=c&&(c=c.clone(),c.width=t,c.height=n,r.getModel().setGeometry(l,c))}}finally{r.getModel().endUpdate()}null!=o&&(r.setSelectionCells(o),r.scrollCellToVisible(o[0]))}}},r.cellEditor.isContentEditing(),!r.cellEditor.isContentEditing())}}).isEnabled=i,s=this.addAction("layers",mxUtils.bind(this,function(){null==this.layersWindow?(this.layersWindow=new LayersWindow(t,document.body.offsetWidth-280,120,220,180),this.layersWindow.window.addListener("show",function(){t.fireEvent(new mxEventObject("layers"))}),this.layersWindow.window.addListener("hide",function(){t.fireEvent(new mxEventObject("layers"))}),this.layersWindow.window.setVisible(!0),t.fireEvent(new mxEventObject("layers"))):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+L"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.layersWindow&&this.layersWindow.window.isVisible()})),s=this.addAction("formatPanel",mxUtils.bind(this,function(){t.toggleFormatPanel()}),null,null,Editor.ctrlKey+"+Shift+P"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils.bind(this,function(){return 0<t.formatWidth})),s=this.addAction("outline",mxUtils.bind(this,function(){null==this.outlineWindow?(this.outlineWindow=new OutlineWindow(t,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",function(){t.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.addListener("hide",function(){t.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.setVisible(!0),t.fireEvent(new mxEventObject("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+O"),s.setToggleAction(!0),s.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.outlineWindow&&this.outlineWindow.window.isVisible()}))},Actions.prototype.addAction=function(e,t,n,r,i){var s;return"..."==e.substring(e.length-3)?(e=e.substring(0,e.length-3),s=mxResources.get(e)+"..."):s=mxResources.get(e),this.put(e,new Action(s,t,n,r,i))},Actions.prototype.put=function(e,t){return this.actions[e]=t},Actions.prototype.get=function(e){return this.actions[e]},mxUtils.extend(Action,mxEventSource),Action.prototype.createFunction=function(e){return e},Action.prototype.setEnabled=function(e){this.enabled!=e&&(this.enabled=e,this.fireEvent(new mxEventObject("stateChanged")))},Action.prototype.isEnabled=function(){return this.enabled},Action.prototype.setToggleAction=function(e){this.toggleAction=e},Action.prototype.setSelectedCallback=function(e){this.selectedCallback=e},Action.prototype.isSelected=function(){return this.selectedCallback()},DrawioFile=function(e,t){mxEventSource.call(this),this.ui=e,this.shadowData=this.data=t||"",this.stats={joined:0,merged:0,opened:0,closed:0,destroyed:0,fileMerged:0,fileSaved:0,reload:0,checksumErrors:0,bytesSent:0,bytesReceived:0,msgSent:0,msgReceived:0,cacheHits:0,cacheMiss:0,cacheFail:0,conflicts:0,timeouts:0}},DrawioFile.SYNC=urlParams.sync||"auto",DrawioFile.LAST_WRITE_WINS=!0,mxUtils.extend(DrawioFile,mxEventSource),DrawioFile.prototype.allChangesSavedKey="allChangesSaved",DrawioFile.prototype.autosaveDelay=1500,DrawioFile.prototype.maxAutosaveDelay=3e4,DrawioFile.prototype.autosaveThread=null,DrawioFile.prototype.lastAutosave=null,DrawioFile.prototype.modified=!1,DrawioFile.prototype.data=null,DrawioFile.prototype.shadowData=null,DrawioFile.prototype.shadowPages=null,DrawioFile.prototype.changeListenerEnabled=!0,DrawioFile.prototype.lastAutosaveRevision=null,DrawioFile.prototype.maxAutosaveRevisionDelay=18e5,DrawioFile.prototype.inConflictState=!1,DrawioFile.prototype.invalidChecksum=!1,DrawioFile.prototype.reportEnabled=!0,DrawioFile.prototype.getSize=function(){return null!=this.data?this.data.length:0},DrawioFile.prototype.synchronizeFile=function(e,t){this.savingFile?null!=t&&t({message:mxResources.get("busy")}):null!=this.sync?this.sync.fileChanged(e,t):this.updateFile(e,t)},DrawioFile.prototype.updateFile=function(t,n,r,i){try{this.ui.getCurrentFile()!=this&&this.sendErrorReport("Assertion failed","File not current in updateFile: "+(null!=this.ui.getCurrentFile()?"other file":"no file"))}catch(s){}this.ui.getCurrentFile()!=this?null!=n&&n(e):null!=r&&r()||this.getLatestVersion(mxUtils.bind(this,function(s){try{this.ui.getCurrentFile()!=this?null!=n&&n(e):null!=r&&r()||(this.ui.getCurrentFile()==this?null!=s?this.mergeFile(s,t,n,i):this.reloadFile(t,n):null!=n&&n(e))}catch(o){null!=n&&n(o)}}),n)},DrawioFile.prototype.mergeFile=function(e,t,n,r){try{try{this.ui.getCurrentFile()!=this&&this.sendErrorReport("Assertion failed","File not current in mergeFile: "+(null!=this.ui.getCurrentFile()?"other file":"no file"))}catch(i){}this.stats.fileMerged++;var s=null!=this.shadowPages?this.shadowPages:this.ui.getPagesForNode(mxUtils.parseXml(this.shadowData).documentElement);this.checkShadow(s),this.shadowPages=this.ui.getPagesForNode(mxUtils.parseXml(e.data).documentElement),this.backupPatch=this.isModified()?this.ui.diffPages(s,this.ui.pages):null;var o=[this.ui.diffPages(null!=r?r:s,this.shadowPages)];if(!this.ignorePatches(o)){var u=this.ui.getHashValueForPages(s),a=this.ui.patchPages(s,o[0]);r={};var f=this.ui.getHashValueForPages(a,r),s={},l=this.ui.getHashValueForPages(this.shadowPages,s);"1"==urlParams.test&&EditorUi.debug("File.mergeFile",[this],"backup",this.backupPatch,"patches",o,"checksum",l==f,f);if(null!=f&&f!=l){var c=this.compressReportData(this.getAnonymizedXmlForPages(a));this.checksumError(n,o,"Last Checksum: "+u+(null!=r?"\nDetails: "+JSON.stringify(r):"")+"\nChecksum: "+f+"\nCurrent: "+l+(null!=s?"\nCurrent Details: "+JSON.stringify(s):"")+"\nPatched:\n"+c);return}this.patch(o,DrawioFile.LAST_WRITE_WINS?this.backupPatch:null),this.checkPages()}this.inConflictState=this.invalidChecksum=!1,this.setDescriptor(e.getDescriptor()),this.descriptorChanged(),this.backupPatch=null,null!=t&&t()}catch(i){this.invalidChecksum=this.inConflictState=!0,null!=n&&n(i);try{this.sendErrorReport("Error in mergeFile",null,i)}catch(h){}}},DrawioFile.prototype.getAnonymizedXmlForPages=function(e){var t=new mxCodec(mxUtils.createXmlDocument()),n=t.document.createElement("mxfile");if(null!=e)for(var r=0;r<e.length;r++){var i=t.encode(new mxGraphModel(e[r].root));"1"!=urlParams.dev&&(i=this.ui.anonymizeNode(i)),i.setAttribute("id",e[r].getId()),e[r].viewState&&this.ui.editor.graph.saveViewState(e[r].viewState,i,!0),n.appendChild(i)}return mxUtils.getPrettyXml(n)},DrawioFile.prototype.checkPages=function(){this.ui.getCurrentFile()!=this||null!=this.ui.pages&&0!=this.ui.pages.length||this.sendErrorReport("Pages is null or empty","ShadowPages: "+(null!=this.shadowPages)+"\nShadowData: "+(null!=this.shadowData))},DrawioFile.prototype.checkShadow=function(e){if(null==e||0==e.length){var t=null==this.shadowData?"null":this.compressReportData(this.ui.anonymizeString(this.shadowData),null,5e3);this.sendErrorReport("Shadow is null or empty","Shadow: "+(null!=e?e.length:"null")+"\nShadowPages: "+(null!=this.shadowPages?this.shadowPages.length:"null")+"\nShadowData: "+t)}},DrawioFile.prototype.compressReportData=function(e,t,n){return null!=e&&e.length>(null!=t?t:1e4)&&(e=this.ui.editor.graph.compress(e)+"\n"),null!=n&&null!=e&&e.length>n&&(e=e.substring(0,n)+"[...]"),e},DrawioFile.prototype.checksumError=function(e,t,n,r){this.stats.checksumErrors++,this.invalidChecksum=this.inConflictState=!0,this.descriptorChanged(),null!=this.sync&&this.sync.updateOnlineState(),null!=e&&e();try{if(null!=t)for(e=0;e<t.length;e++)this.ui.anonymizePatch(t[e]);var i=Error(),s=mxUtils.bind(this,function(e){var r=this.compressReportData(JSON.stringify(t,null,2));e=null!=e?this.compressReportData(this.getAnonymizedXmlForPages(this.ui.getPagesForNode(mxUtils.parseXml(e.data).documentElement)),25e3):"n/a",this.sendErrorReport("Checksum Error",(null!=n?n:"")+"\n\nPatches:\n"+r+(null!=e?"\n\nRemote:\n"+e:""),i,7e4)});null==r?s(null):this.getLatestVersion(mxUtils.bind(this,function(e){null!=e&&e.getCurrentEtag()==r?s(e):s(null)}),function(){})}catch(o){}},DrawioFile.prototype.sendErrorReport=function(e,t,n,r){try{var i=this.compressReportData(this.getAnonymizedXmlForPages(this.shadowPages),25e3),s=this.getCurrentUser(),o=null!=s?this.ui.hashValue(s.id):"unknown",u=null!=this.sync?this.sync.clientId:"no sync";null!=this.stats.start&&(this.stats.uptime=Math.round(((new Date).getTime()-(new Date(this.stats.start)).getTime())/1e3));var a=this.getTitle(),f=a.lastIndexOf("."),s="xml";0<f&&(s=a.substring(f));var l=null!=n?n.stack:Error().stack;EditorUi.sendReport(e+" "+(new Date).toISOString()+":\n\nBrowser="+navigator.userAgent+"\nFile="+this.ui.hashValue(this.getId())+" ("+this.getMode()+")"+(this.isModified()?" modified":"")+"\nSize/Type="+this.getSize()+" ("+s+")\nUser="+o+" ("+u+")\nPlugins="+(null!=mxSettings.settings?mxSettings.getPlugins():"null")+"\nSync="+DrawioFile.SYNC+"\n\nStats:\n"+JSON.stringify(this.stats,null,2)+(null!=t?"\n\n"+t:"")+"\n\nLocal:\n"+i+"\n\nStack:\n"+l,r)}catch(c){}},DrawioFile.prototype.reloadFile=function(e,t){try{this.ui.spinner.stop();var n=mxUtils.bind(this,function(){this.stats.reload++,this.reportEnabled=!1;var t=this.ui.editor.graph.getViewState(),n=this.ui.editor.graph.getSelectionCells(),r=this.ui.currentPage;this.ui.loadFile(this.getHash(),!0,null,mxUtils.bind(this,function(){if(null==this.ui.fileLoadedError){this.ui.restoreViewState(r,t,n),null!=this.backupPatch&&this.patch([this.backupPatch]);var i=this.ui.getCurrentFile();null!=i&&(i.stats=this.stats),null!=e&&e()}}),!0)});this.isModified()&&null==this.backupPatch?this.ui.confirm(mxResources.get("allChangesLost"),mxUtils.bind(this,function(){this.handleFileSuccess("manual"==DrawioFile.SYNC)}),n,mxResources.get("cancel"),mxResources.get("discardChanges")):n()}catch(r){null!=t&&t(r)}},DrawioFile.prototype.copyFile=function(e,t){this.ui.editor.editAsNew(this.ui.getFileData(!0),this.ui.getCopyFilename(this))},DrawioFile.prototype.ignorePatches=function(e){for(var t=!0,n=0;n<e.length&&t;n++)t=t&&0==Object.keys(e[n]).length;return t},DrawioFile.prototype.patch=function(e,t){var n=this.ui.editor.undoManager,r=n.history.slice(),i=n.indexOfNextAdd,s=this.ui.editor.graph;s.container.style.visibility="hidden";var o=this.changeListenerEnabled;this.changeListenerEnabled=!1;var u=s.foldingEnabled,a=s.mathEnabled,f=s.cellRenderer.redraw;s.cellRenderer.redraw=function(e){e.view.graph.isEditing(e.cell)&&(e.view.graph.scrollCellToVisible(e.cell),e.view.graph.cellEditor.resize()),f.apply(this,arguments)},s.model.beginUpdate();try{for(var l=0;l<e.length;l++)this.ui.pages=this.ui.patchPages(this.ui.pages,e[l],!0,t,this.isModified());0==this.ui.pages.length&&this.ui.pages.push(this.ui.createPage()),0>mxUtils.indexOf(this.ui.pages,this.ui.currentPage)&&this.ui.selectPage(this.ui.pages[0],!0)}finally{s.model.endUpdate(),s.container.style.visibility="",s.cellRenderer.redraw=f,this.changeListenerEnabled=o,n.history=r,n.indexOfNextAdd=i,n.fireEvent(new mxEventObject(mxEvent.CLEAR));if(null==this.ui.currentPage||this.ui.currentPage.needsUpdate)a!=s.mathEnabled?(this.ui.editor.updateGraphComponents(),s.refresh()):(u!=s.foldingEnabled?s.view.revalidate():s.view.validate(),s.sizeDidChange()),null!=this.ui.format&&s.isSelectionEmpty()&&this.ui.format.refresh();this.ui.updateTabContainer()}},DrawioFile.prototype.save=function(e,t,n,r,i,s){if(this.isEditable())if(!i&&this.invalidChecksum){if(null==n)throw Error(mxResources.get("checksum"));n({message:mxResources.get("checksum")})}else this.updateFileData(),this.clearAutosave();else{if(null==n)throw Error(mxResources.get("readOnly"));n({message:mxResources.get("readOnly")})}},DrawioFile.prototype.updateFileData=function(){this.setData(this.ui.getFileData(null,null,null,null,null,null,null,null,this))},DrawioFile.prototype.saveAs=function(e,t,n){},DrawioFile.prototype.saveFile=function(e,t,n,r){},DrawioFile.prototype.getPublicUrl=function(e){e(null)},DrawioFile.prototype.isRestricted=function(){return!1},DrawioFile.prototype.isModified=function(){return this.modified},DrawioFile.prototype.setModified=function(e){this.modified=e},DrawioFile.prototype.isAutosaveOptional=function(){return!1},DrawioFile.prototype.isAutosave=function(){return!this.inConflictState&&this.ui.editor.autosave},DrawioFile.prototype.isRenamable=function(){return!1},DrawioFile.prototype.rename=function(e,t,n){},DrawioFile.prototype.isMovable=function(){return!1},DrawioFile.prototype.move=function(e,t,n){},DrawioFile.prototype.getHash=function(){return""},DrawioFile.prototype.getId=function(){return""},DrawioFile.prototype.isEditable=function(){return!this.ui.editor.isChromelessView()||this.ui.editor.editable},DrawioFile.prototype.getUi=function(){return this.ui},DrawioFile.prototype.getTitle=function(){return""},DrawioFile.prototype.setData=function(e){this.data=e},DrawioFile.prototype.getData=function(){return this.data},DrawioFile.prototype.open=function(){this.stats.opened++;var e=this.getData();null!=e&&(this.ui.setFileData(e),this.isModified()||(this.shadowData=mxUtils.getXml(this.ui.getXmlFileData()),this.shadowPages=null)),this.installListeners(),this.isSyncSupported()&&this.startSync()},DrawioFile.prototype.isSyncSupported=function(){return!1},DrawioFile.prototype.isRevisionHistorySupported=function(){return!1},DrawioFile.prototype.getRevisions=function(e,t){e(null)},DrawioFile.prototype.loadDescriptor=function(e,t){e(null)},DrawioFile.prototype.loadPatchDescriptor=function(e,t){this.loadDescriptor(mxUtils.bind(this,function(t){e(t)}),t)},DrawioFile.prototype.startSync=function(){"auto"!=DrawioFile.SYNC||"1"==urlParams.stealth||"1"!=urlParams.rt&&this.ui.editor.chromeless&&!this.ui.editor.editable||(null==this.sync&&(this.sync=new DrawioFileSync(this)),this.sync.start())},DrawioFile.prototype.isConflict=function(){return!1},DrawioFile.prototype.getChannelId=function(){return this.ui.editor.graph.compress(this.getHash()).replace(/[\/ +]/g,"_")},DrawioFile.prototype.getChannelKey=function(e){return null},DrawioFile.prototype.getCurrentUser=function(){return null},DrawioFile.prototype.getLatestVersion=function(e,t){e(null)},DrawioFile.prototype.getLastModifiedDate=function(){return new Date},DrawioFile.prototype.setCurrentEtag=function(e){this.setDescriptorEtag(this.getDescriptor(),e)},DrawioFile.prototype.getCurrentEtag=function(){return this.getDescriptorEtag(this.getDescriptor())},DrawioFile.prototype.getDescriptor=function(){return null},DrawioFile.prototype.setDescriptor=function(){},DrawioFile.prototype.setDescriptorEtag=function(e,t){},DrawioFile.prototype.getDescriptorEtag=function(e){return null},DrawioFile.prototype.getDescriptorSecret=function(e){return null},DrawioFile.prototype.installListeners=function(){null==this.changeListener&&(this.changeListener=mxUtils.bind(this,function(e,t){var n=null!=t?t.getProperty("edit"):null;!this.changeListenerEnabled||!this.isEditable()||null!=n&&n.ignoreEdit||this.fileChanged()}),this.ui.editor.graph.model.addListener(mxEvent.CHANGE,this.changeListener),this.ui.editor.graph.addListener("gridSizeChanged",this.changeListener),this.ui.editor.graph.addListener("shadowVisibleChanged",this.changeListener),this.ui.addListener("pageFormatChanged",this.changeListener),this.ui.addListener("pageScaleChanged",this.changeListener),this.ui.addListener("backgroundColorChanged",this.changeListener),this.ui.addListener("backgroundImageChanged",this.changeListener),this.ui.addListener("foldingEnabledChanged",this.changeListener),this.ui.addListener("mathEnabledChanged",this.changeListener),this.ui.addListener("gridEnabledChanged",this.changeListener),this.ui.addListener("guidesEnabledChanged",this.changeListener),this.ui.addListener("pageViewChanged",this.changeListener))},DrawioFile.prototype.addAllSavedStatus=function(e){null!=this.ui.statusContainer&&(e=null!=e?e:mxUtils.htmlEntities(mxResources.get(this.allChangesSavedKey)),this.isRevisionHistorySupported()?(this.ui.editor.setStatus('<div title="'+mxUtils.htmlEntities(mxResources.get("revisionHistory"))+'" style="text-decoration:underline;cursor:pointer;">'+e+"</div>"),e=this.ui.statusContainer.getElementsByTagName("div"),0<e.length&&mxEvent.addListener(e[0],"click",mxUtils.bind(this,function(){this.ui.actions.get("revisionHistory").funct()}))):this.ui.editor.setStatus(e))},DrawioFile.prototype.addUnsavedStatus=function(e){this.inConflictState||null==this.ui.statusContainer||(e instanceof Error&&null!=e.message&&""!=e.message?this.ui.editor.setStatus('<div class="geStatusAlert" style="overflow:hidden;">'+mxUtils.htmlEntities(mxResources.get("unsavedChanges"))+" ("+mxUtils.htmlEntities(e.message)+")</div>"):(e=this.getErrorMessage(e),null!=e&&60<e.length&&(e=e.substring(0,60)+"..."),this.ui.editor.setStatus('<div class="geStatusAlert" style="cursor:pointer;overflow:hidden;">'+mxUtils.htmlEntities(mxResources.get("unsavedChangesClickHereToSave"))+(null!=e&&""!=e?" ("+mxUtils.htmlEntities(e)+")":"")+"</div>"),e=this.ui.statusContainer.getElementsByTagName("div"),null!=e&&0<e.length?mxEvent.addListener(e[0],"click",mxUtils.bind(this,function(){this.ui.actions.get(null!=this.ui.mode&&this.isEditable()?"save":"saveAs").funct()})):this.ui.editor.setStatus('<div class="geStatusAlert" style="overflow:hidden;">'+mxUtils.htmlEntities(mxResources.get("unsavedChanges"))+"</div>")))},DrawioFile.prototype.addConflictStatus=function(e,t){this.invalidChecksum&&(t=mxResources.get("checksum")),this.setConflictStatus(mxUtils.htmlEntities(mxResources.get("fileChangedSync"))+(null!=t&&""!=t?" ("+mxUtils.htmlEntities(t)+")":"")),this.ui.spinner.stop(),this.clearAutosave();var n=null!=this.ui.statusContainer?this.ui.statusContainer.getElementsByTagName("div"):null;null!=n&&0<n.length?mxEvent.addListener(n[0],"click",mxUtils.bind(this,function(t){"IMG"!=mxEvent.getSource(t).nodeName&&e()})):this.ui.alert(mxUtils.htmlEntities(mxResources.get("fileChangedSync")),e)},DrawioFile.prototype.setConflictStatus=function(e){this.ui.editor.setStatus('<div class="geStatusAlert geBlink" style="cursor:pointer;overflow:hidden;">'+e+' <a href="https://desk.draw.io/support/solutions/articles/16000087947" target="_blank"><img border="0" title="'+mxUtils.htmlEntities(mxResources.get("help"))+'" style="margin-left:2px;cursor:help;opacity:0.5;width:16px;height:16px;" valign="bottom" src="'+Editor.helpImage+'" style=""/></a></div>')},DrawioFile.prototype.showRefreshDialog=function(e,t){this.ui.editor.isChromelessView()&&!this.ui.editor.editable?this.ui.alert(mxResources.get("fileChangedSync"),mxUtils.bind(this,function(){this.reloadFile(e,t)})):(this.addConflictStatus(mxUtils.bind(this,function(){this.showRefreshDialog(e,t)})),this.ui.showError(mxResources.get("error")+" ("+mxResources.get("checksum")+")",mxResources.get("fileChangedSyncDialog"),mxResources.get("makeCopy"),mxUtils.bind(this,function(){this.copyFile(e,t)}),null,mxResources.get("synchronize"),mxUtils.bind(this,function(){this.reloadFile(e,t)}),mxResources.get("cancel"),mxUtils.bind(this,function(){this.ui.hideDialog()}),360,150))},DrawioFile.prototype.showCopyDialog=function(e,t,n){this.invalidChecksum=this.inConflictState=!1,this.addUnsavedStatus(),this.ui.showError(mxResources.get("externalChanges"),mxResources.get("fileChangedOverwriteDialog"),mxResources.get("makeCopy"),mxUtils.bind(this,function(){this.copyFile(e,t)}),null,mxResources.get("overwrite"),n,mxResources.get("cancel"),mxUtils.bind(this,function(){this.ui.hideDialog()}),360,150)},DrawioFile.prototype.showConflictDialog=function(e,t){this.ui.showError(mxResources.get("externalChanges"),mxResources.get("fileChangedSyncDialog"),mxResources.get("overwrite"),e,null,mxResources.get("synchronize"),t,mxResources.get("cancel"),mxUtils.bind(this,function(){this.ui.hideDialog(),this.handleFileError(null,!1)}),340,150)},DrawioFile.prototype.redirectToNewApp=function(e){this.ui.spinner.stop();if(!this.redirectDialogShowing){this.redirectDialogShowing=!0;var t=window.location.protocol+"//"+window.location.host+"/"+this.ui.getSearch("create title mode url drive splash state".split(" "))+"#"+this.getHash(),n=mxUtils.bind(this,function(){var n=mxUtils.bind(this,function(){this.redirectDialogShowing=!1,window.location.href==t?window.location.reload():window.location.href=t});null==e&&this.isModified()?this.ui.confirm(mxResources.get("allChangesLost"),mxUtils.bind(this,function(){this.redirectDialogShowing=!1}),n,mxResources.get("cancel"),mxResources.get("discardChanges")):n()});null!=e?this.isModified()?this.ui.confirm(mxResources.get("redirectToNewApp"),mxUtils.bind(this,function(){this.redirectDialogShowing=!1,e()}),n,mxResources.get("cancel"),mxResources.get("discardChanges")):this.ui.confirm(mxResources.get("redirectToNewApp"),n,mxUtils.bind(this,function(){this.redirectDialogShowing=!1,e()})):this.ui.alert(mxResources.get("redirectToNewApp"),n)}},DrawioFile.prototype.handleFileSuccess=function(e){this.ui.spinner.stop(),this.ui.getCurrentFile()==this&&(this.isModified()?this.fileChanged():e?(this.addAllSavedStatus(),null!=this.sync&&(this.sync.resetUpdateStatusThread(),this.sync.remoteFileChanged&&(this.sync.remoteFileChanged=!1,this.sync.fileChangedNotify()))):this.ui.editor.setStatus(""))},DrawioFile.prototype.handleFileError=function(e,t){this.ui.spinner.stop();if(this.ui.getCurrentFile()==this)if(this.inConflictState)this.handleConflictError(e,t);else if(this.isModified()&&this.addUnsavedStatus(e),t)this.ui.handleError(e,null!=e?mxResources.get("errorSavingFile"):null);else if(!this.isModified()){var n=null!=e?null!=e.error?e.error.message:e.message:null;null!=n&&60<n.length&&(n=n.substring(0,60)+"..."),this.ui.editor.setStatus('<div class="geStatusAlert" style="cursor:pointer;overflow:hidden;">'+mxUtils.htmlEntities(mxResources.get("error"))+(null!=n?" ("+mxUtils.htmlEntities(n)+")":"")+"</div>")}},DrawioFile.prototype.handleConflictError=function(e,t){var n=mxUtils.bind(this,function(){this.handleFileSuccess(!0)}),r=mxUtils.bind(this,function(e){this.handleFileError(e,!0)}),i=mxUtils.bind(this,function(){this.ui.spinner.spin(document.body,mxResources.get("saving"))&&(this.ui.editor.setStatus(""),this.save(!0,n,r,null,!0,this.constructor==GitHubFile&&null!=e?e.commitMessage:null))}),s=mxUtils.bind(this,function(){this.ui.spinner.spin(document.body,mxResources.get("updatingDocument"))&&this.synchronizeFile(mxUtils.bind(this,function(){this.ui.spinner.stop(),this.ui.spinner.spin(document.body,mxResources.get("saving"))&&this.save(!0,n,r,null,null,this.constructor==GitHubFile&&null!=e?e.commitMessage:null)}),r)});"none"==DrawioFile.SYNC?this.showCopyDialog(n,r,i):this.invalidChecksum?this.showRefreshDialog(n,r):t?this.showConflictDialog(i,s):this.addConflictStatus(mxUtils.bind(this,function(){this.ui.editor.setStatus(mxUtils.htmlEntities(mxResources.get("updatingDocument"))),this.synchronizeFile(n,r)}),this.getErrorMessage(e))},DrawioFile.prototype.getErrorMessage=function(e){return null!=e?null!=e.error?e.error.message:e.message:null},DrawioFile.prototype.fileChanged=function(){this.setModified(!0),this.isAutosave()?(this.addAllSavedStatus(mxUtils.htmlEntities(mxResources.get("saving"))+"..."),this.autosave(this.autosaveDelay,this.maxAutosaveDelay,mxUtils.bind(this,function(e){null==this.autosaveThread&&this.handleFileSuccess(!0)}),mxUtils.bind(this,function(e){this.handleFileError(e)}))):this.isAutosaveOptional()&&this.ui.editor.autosave||this.inConflictState||this.addUnsavedStatus()},DrawioFile.prototype.fileSaved=function(e,t,n,r){try{this.stats.fileSaved++,this.invalidChecksum=this.inConflictState=!1,this.checkPages(),null==this.sync?(this.shadowData=e,this.shadowPages=null,null!=n&&n()):this.sync.fileSaved(this.ui.getPagesForNode(mxUtils.parseXml(e).documentElement),t,n,r)}catch(i){this.invalidChecksum=this.inConflictState=!0,null!=r&&r(i);try{this.sendErrorReport("Error in fileSaved","SavedData:\n"+this.compressReportData(e,25e3),i)}catch(s){}}},DrawioFile.prototype.autosave=function(e,t,n,r){null==this.lastAutosave&&(this.lastAutosave=(new Date).getTime()),e=(new Date).getTime()-this.lastAutosave<t?e:0,this.clearAutosave();var i=window.setTimeout(mxUtils.bind(this,function(){this.lastAutosave=null,this.autosaveThread==i&&(this.autosaveThread=null);if(this.isModified()&&this.isAutosaveNow()){var e=this.isAutosaveRevision();e&&(this.lastAutosaveRevision=(new Date).getTime()),this.save(e,mxUtils.bind(this,function(e){this.autosaveCompleted(),null!=n&&n(e)}),mxUtils.bind(this,function(e){null!=r&&r(e)}))}else this.isModified()||this.ui.editor.setStatus(""),null!=n&&n(null)}),e);this.autosaveThread=i},DrawioFile.prototype.isAutosaveNow=function(){return!0},DrawioFile.prototype.autosaveCompleted=function(){},DrawioFile.prototype.clearAutosave=function(){null!=this.autosaveThread&&(window.clearTimeout(this.autosaveThread),this.autosaveThread=null)},DrawioFile.prototype.isAutosaveRevision=function(){var e=(new Date).getTime();return null==this.lastAutosaveRevision||e-this.lastAutosaveRevision>this.maxAutosaveRevisionDelay},DrawioFile.prototype.descriptorChanged=function(){this.fireEvent(new mxEventObject("descriptorChanged"))},DrawioFile.prototype.contentChanged=function(){this.fireEvent(new mxEventObject("contentChanged"))},DrawioFile.prototype.close=function(e){this.updateFileData(),this.stats.closed++,this.isAutosave()&&this.isModified()&&this.save(this.isAutosaveRevision(),null,null,e),this.destroy()},DrawioFile.prototype.hasSameExtension=function(e,t){if(null!=e&&null!=t){var n=e.lastIndexOf("."),r=0<n?e.substring(n):"",n=t.lastIndexOf(".");return r===(0<n?t.substring(n):"")}return e==t},DrawioFile.prototype.removeListeners=function(){null!=this.changeListener&&(this.ui.editor.graph.model.removeListener(this.changeListener),this.ui.editor.graph.removeListener(this.changeListener),this.ui.removeListener(this.changeListener),this.changeListener=null)},DrawioFile.prototype.destroy=function(){this.stats.destroyed++;try{if(!this.ui.isOffline()&&this.reportEnabled&&("auto"==DrawioFile.SYNC||"manual"==DrawioFile.SYNC)){var e=this.getCurrentUser(),t=null!=e?this.ui.hashValue(e.id):"unknown";this.stats.end=(new Date).toISOString(),null!=this.stats.start&&(this.stats.uptime=Math.round(((new Date).getTime()-(new Date(this.stats.start)).getTime())/1e3)),EditorUi.logEvent({category:"RT-END-"+DrawioFile.SYNC,action:"file-"+this.getId()+"-mode-"+this.getMode()+"-size-"+this.getSize()+"-user-"+t+(null!=this.sync?"-client-"+this.sync.clientId:""),label:this.stats})}}catch(n){}this.clearAutosave(),this.removeListeners(),null!=this.sync&&(this.sync.destroy(),this.sync=null)},LocalFile=function(e,t,n,r){DrawioFile.call(this,e,t),this.title=n,this.mode=r?null:App.MODE_DEVICE},mxUtils.extend(LocalFile,DrawioFile),LocalFile.prototype.isAutosave=function(){return!1},LocalFile.prototype.getMode=function(){return this.mode},LocalFile.prototype.getTitle=function(){return this.title},LocalFile.prototype.isRenamable=function(){return!0},LocalFile.prototype.save=function(e,t,n){this.saveAs(this.title,t,n)},LocalFile.prototype.saveAs=function(e,t,n){this.saveFile(e,!1,t,n)},LocalFile.prototype.saveFile=function(e,t,n,r){this.title=e,this.updateFileData(),t=this.getData();var i=this.ui.useCanvasForExport&&/(\.png)$/i.test(this.getTitle()),s=mxUtils.bind(this,function(t){if(this.ui.isOfflineApp()||this.ui.isLocalFileSave())this.ui.doSaveLocalFile(t,e,i?"image/png":"text/xml",i);else if(t.length<MAX_REQUEST_SIZE){var r=e.lastIndexOf("."),r=0<r?e.substring(r+1):"xml";(new mxXmlRequest(SAVE_URL,"format="+r+"&xml="+encodeURIComponent(t)+"&filename="+encodeURIComponent(e)+(i?"&binary=1":""))).simulate(document,"_blank")}else this.ui.handleError({message:mxResources.get("drawingTooLarge")},mxResources.get("error"),mxUtils.bind(this,function(){mxUtils.popup(t)}));this.setModified(!1),this.contentChanged(),null!=n&&n()});i?this.ui.getEmbeddedPng(mxUtils.bind(this,function(e){s(e)}),r,this.ui.getCurrentFile()!=this?this.getData():null):s(t)},LocalFile.prototype.rename=function(e,t,n){this.title=e,this.descriptorChanged(),null!=t&&t()},LocalFile.prototype.open=function(){this.ui.setFileData(this.getData()),this.installListeners()},function(){Editor.prototype.appName="draw.io",Editor.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAApVBMVEUAAAD////k5OT///8AAAB1dXXMzMz9/f39/f37+/v5+fn+/v7///9iYmJaWlqFhYWnp6ejo6OHh4f////////////////7+/v5+fnx8fH///8AAAD///8bGxv7+/v5+fkoKCghISFDQ0MYGBjh4eHY2Njb29tQUFBvb29HR0c/Pz82NjYrKyu/v78SEhLu7u7s7OzV1dVVVVU7OzsVFRXAv78QEBBzqehMAAAAG3RSTlMAA/7p/vz5xZlrTiPL/v78+/v7+OXd2TYQDs8L70ZbAAABKUlEQVQoz3VS13LCMBBUXHChd8iukDslQChJ/v/TchaG4cXS+OSb1c7trU7V60OpdRz2ZtNZL4zXNlcN8BEtSG6+NxIXkeRPoBuQ1cjvZ31/VJFB10ISli6diYfH8iYO3WUNCcNlB0gTrXOtkxTo0O1aKKiBBMhhv2MNBQKoiA5wxlZo0JDzD3AYKbWacyj3fs01wxey0pyEP+R8pWKWXoqtIZ0DDg5pbki9krEKOa6LVDQsdoXEsi46Zqh69KFz7B1u7Hb2yDV8firXDKBlZ4UFiswKGRhXTS93/ECK7yxnJ3+S3y/ThpO+cfSD017nqa18aasabU0/t7d+tk0/1oMEJ1NaD67iwdF68OabFSLn+eHb0+vjy+uk8br9fdrftH0O2menfd7+AQfYM/lNjoDHAAAAAElFTkSuQmCC":IMAGE_PATH+"/delete.png",Editor.plusImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDdCMTdENjVCOEM4MTFFNDlCRjVBNDdCODU5NjNBNUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDdCMTdENjZCOEM4MTFFNDlCRjVBNDdCODU5NjNBNUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowN0IxN0Q2M0I4QzgxMUU0OUJGNUE0N0I4NTk2M0E1QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowN0IxN0Q2NEI4QzgxMUU0OUJGNUE0N0I4NTk2M0E1QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtjrjmgAAAAtSURBVHjaYvz//z8DMigvLwcLdHZ2MiKLMzEQCaivkLGsrOw/dU0cAr4GCDAARQsQbTFrv10AAAAASUVORK5CYII=":IMAGE_PATH+"/plus.png",Editor.spinImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDAAMAPUxAEVriVp7lmCAmmGBm2OCnGmHn3OPpneSqYKbr4OcsIScsI2kto6kt46lt5KnuZmtvpquvpuvv56ywaCzwqK1xKu7yay9yq+/zLHAzbfF0bjG0bzJ1LzK1MDN18jT28nT3M3X3tHa4dTc49Xd5Njf5dng5t3k6d/l6uDm6uru8e7x8/Dz9fT29/b4+Pj5+fj5+vr6+v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkKADEAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAADAAMAAAGR8CYcEgsOgYAIax4CCQuQldrCBEsiK8VS2hoFGOrlJDA+cZQwkLnqyoJFZKviSS0ICrE0ec0jDAwIiUeGyBFGhMPFBkhZo1BACH5BAkKAC4ALAAAAAAMAAwAhVB0kFR3k1V4k2CAmmWEnW6Lo3KOpXeSqH2XrIOcsISdsImhtIqhtJCmuJGnuZuwv52wwJ+ywZ+ywqm6yLHBzbLCzrXEz7fF0LnH0rrI0r7L1b/M1sXR2cfT28rV3czW3s/Z4Nfe5Nvi6ODm6uLn6+Ln7OLo7OXq7efs7+zw8u/y9PDy9PX3+Pr7+////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZDQJdwSCxGDAIAoVFkFBwYSyIwGE4OkCJxIdG6WkJEx8sSKj7elfBB0a5SQg1EQ0SVVMPKhDM6iUIkRR4ZFxsgJl6JQQAh+QQJCgAxACwAAAAADAAMAIVGa4lcfZdjgpxkg51nhp5ui6N3kqh5lKqFnbGHn7KIoLOQp7iRp7mSqLmTqbqarr6br7+fssGitcOitcSuvsuuv8uwwMyzw861xNC5x9K6x9K/zNbDztjE0NnG0drJ1NzQ2eDS2+LT2+LV3ePZ4Oba4ebb4ufc4+jm6+7t8PLt8PPt8fPx8/Xx9PX09vf19/j3+Pn///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQ8CYcEgsUhQFggFSjCQmnE1jcBhqGBXiIuAQSi7FGEIgfIzCFoCXFCZiPO0hKBMiwl7ET6eUYqlWLkUnISImKC1xbUEAIfkECQoAMgAsAAAAAAwADACFTnKPT3KPVHaTYoKcb4yjcY6leZSpf5mtgZuvh5+yiqG0i6K1jqW3kae5nrHBnrLBn7LCoLPCobTDqbrIqrvIs8LOtMPPtcPPtcTPuMbRucfSvcrUvsvVwMzWxdHaydTcytXdzNbezdff0drh2ODl2+Ln3eTp4Obq4ujs5Ont5uvu6O3w6u7w6u7x7/L09vj5+vr7+vv7////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkdAmXBILHIcicOCUqxELKKPxKAYgiYd4oMAEWo8RVmjIMScwhmBcJMKXwLCECmMGAhPI1QRwBiaSixCMDFhLSorLi8wYYxCQQAh+QQJCgAxACwAAAAADAAMAIVZepVggJphgZtnhp5vjKN2kah3kqmBmq+KobSLorWNpLaRp7mWq7ybr7+gs8KitcSktsWnuManucexwM2ywc63xtG6yNO9ytS+ytW/zNbDz9jH0tvL1d3N197S2+LU3OPU3ePV3eTX3+Xa4efb4ufd5Onl6u7r7vHs7/Lt8PLw8/Xy9Pby9fb09ff2+Pn3+Pn6+vr///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGSMCYcEgseiwSR+RS7GA4JFGF8RiWNiEiJTERgkjFGAQh/KTCGoJwpApnBkITKrwoCFWnFlEhaAxXLC9CBwAGRS4wQgELYY1CQQAh+QQJCgAzACwAAAAADAAMAIVMcI5SdZFhgZtti6JwjaR4k6mAma6Cm6+KobSLorWLo7WNo7aPpredsMCescGitMOitcSmuMaqu8ixwc2zws63xdC4xtG5x9K9ytXAzdfCztjF0NnF0drK1d3M1t7P2N/P2eDT2+LX3+Xe5Onh5+vi5+vj6Ozk6e3n7O/o7O/q7vHs7/Lt8PPu8fPx8/X3+Pn6+vv7+/v8/Pz///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRcCZcEgsmkIbTOZTLIlGqZNnchm2SCgiJ6IRqljFmQUiXIVnoITQde4chC9Y+LEQxmTFRkFSNFAqDAMIRQoCAAEEDmeLQQAh+QQJCgAwACwAAAAADAAMAIVXeZRefplff5lhgZtph59yjqV2kaeAmq6FnbGFnrGLorWNpLaQp7mRqLmYrb2essGgs8Klt8apusitvcquv8u2xNC7yNO8ydS8ytTAzdfBzdfM1t7N197Q2eDU3OPX3+XZ4ObZ4ebc4+jf5erg5erg5uvp7fDu8fPv8vTz9fb09vf19/j3+Pn4+fn5+vr6+/v///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRUCYcEgspkwjEKhUVJ1QsBNp0xm2VixiSOMRvlxFGAcTJook5eEHIhQcwpWIkAFQECkNy9AQWFwyEAkPRQ4FAwQIE2llQQAh+QQJCgAvACwAAAAADAAMAIVNcY5SdZFigptph6BvjKN0kKd8lquAmq+EnbGGn7KHn7ONpLaOpbearr+csMCdscCescGhtMOnuMauvsuzws60w862xdC9ytW/y9a/zNbCztjG0drH0tvK1N3M1t7N19/U3ePb4uff5urj6Ozk6e3l6u7m6u7o7PDq7vDt8PPv8vTw8vTw8/X19vf6+vv///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGQ8CXcEgsvlytVUplJLJIpSEDUESFTELBwSgCCQEV42kjDFiMo4uQsDB2MkLHoEHUTD7DRAHC8VAiZ0QSCgYIDxhNiUEAOw==":IMAGE_PATH+"/spin.gif",Editor.globeImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTEuOTkgMkM2LjQ3IDIgMiA2LjQ4IDIgMTJzNC40NyAxMCA5Ljk5IDEwQzE3LjUyIDIyIDIyIDE3LjUyIDIyIDEyUzE3LjUyIDIgMTEuOTkgMnptNi45MyA2aC0yLjk1Yy0uMzItMS4yNS0uNzgtMi40NS0xLjM4LTMuNTYgMS44NC42MyAzLjM3IDEuOTEgNC4zMyAzLjU2ek0xMiA0LjA0Yy44MyAxLjIgMS40OCAyLjUzIDEuOTEgMy45NmgtMy44MmMuNDMtMS40MyAxLjA4LTIuNzYgMS45MS0zLjk2ek00LjI2IDE0QzQuMSAxMy4zNiA0IDEyLjY5IDQgMTJzLjEtMS4zNi4yNi0yaDMuMzhjLS4wOC42Ni0uMTQgMS4zMi0uMTQgMiAwIC42OC4wNiAxLjM0LjE0IDJINC4yNnptLjgyIDJoMi45NWMuMzIgMS4yNS43OCAyLjQ1IDEuMzggMy41Ni0xLjg0LS42My0zLjM3LTEuOS00LjMzLTMuNTZ6bTIuOTUtOEg1LjA4Yy45Ni0xLjY2IDIuNDktMi45MyA0LjMzLTMuNTZDOC44MSA1LjU1IDguMzUgNi43NSA4LjAzIDh6TTEyIDE5Ljk2Yy0uODMtMS4yLTEuNDgtMi41My0xLjkxLTMuOTZoMy44MmMtLjQzIDEuNDMtMS4wOCAyLjc2LTEuOTEgMy45NnpNMTQuMzQgMTRIOS42NmMtLjA5LS42Ni0uMTYtMS4zMi0uMTYtMiAwLS42OC4wNy0xLjM1LjE2LTJoNC42OGMuMDkuNjUuMTYgMS4zMi4xNiAyIDAgLjY4LS4wNyAxLjM0LS4xNiAyem0uMjUgNS41NmMuNi0xLjExIDEuMDYtMi4zMSAxLjM4LTMuNTZoMi45NWMtLjk2IDEuNjUtMi40OSAyLjkzLTQuMzMgMy41NnpNMTYuMzYgMTRjLjA4LS42Ni4xNC0xLjMyLjE0LTIgMC0uNjgtLjA2LTEuMzQtLjE0LTJoMy4zOGMuMTYuNjQuMjYgMS4zMS4yNiAycy0uMSAxLjM2LS4yNiAyaC0zLjM4eiIvPjwvc3ZnPg==",Editor.userImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgMTJjMi4yMSAwIDQtMS43OSA0LTRzLTEuNzktNC00LTQtNCAxLjc5LTQgNCAxLjc5IDQgNCA0em0wIDJjLTIuNjcgMC04IDEuMzQtOCA0djJoMTZ2LTJjMC0yLjY2LTUuMzMtNC04LTR6Ii8+PC9zdmc+",Editor.shareImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTggMTYuMDhjLS43NiAwLTEuNDQuMy0xLjk2Ljc3TDguOTEgMTIuN2MuMDUtLjIzLjA5LS40Ni4wOS0uN3MtLjA0LS40Ny0uMDktLjdsNy4wNS00LjExYy41NC41IDEuMjUuODEgMi4wNC44MSAxLjY2IDAgMy0xLjM0IDMtM3MtMS4zNC0zLTMtMy0zIDEuMzQtMyAzYzAgLjI0LjA0LjQ3LjA5LjdMOC4wNCA5LjgxQzcuNSA5LjMxIDYuNzkgOSA2IDljLTEuNjYgMC0zIDEuMzQtMyAzczEuMzQgMyAzIDNjLjc5IDAgMS41LS4zMSAyLjA0LS44MWw3LjEyIDQuMTZjLS4wNS4yMS0uMDguNDMtLjA4LjY1IDAgMS42MSAxLjMxIDIuOTIgMi45MiAyLjkyIDEuNjEgMCAyLjkyLTEuMzEgMi45Mi0yLjkycy0xLjMxLTIuOTItMi45Mi0yLjkyeiIvPjwvc3ZnPg==",Editor.syncImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgNFYxTDggNWw0IDRWNmMzLjMxIDAgNiAyLjY5IDYgNiAwIDEuMDEtLjI1IDEuOTctLjcgMi44bDEuNDYgMS40NkMxOS41NCAxNS4wMyAyMCAxMy41NyAyMCAxMmMwLTQuNDItMy41OC04LTgtOHptMCAxNGMtMy4zMSAwLTYtMi42OS02LTYgMC0xLjAxLjI1LTEuOTcuNy0yLjhMNS4yNCA3Ljc0QzQuNDYgOC45NyA0IDEwLjQzIDQgMTJjMCA0LjQyIDMuNTggOCA4IDh2M2w0LTQtNC00djN6Ii8+PC9zdmc+",Editor.syncDisabledImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTAgNi4zNVY0LjI2Yy0uOC4yMS0xLjU1LjU0LTIuMjMuOTZsMS40NiAxLjQ2Yy4yNS0uMTIuNS0uMjQuNzctLjMzem0tNy4xNC0uOTRsMi4zNiAyLjM2QzQuNDUgOC45OSA0IDEwLjQ0IDQgMTJjMCAyLjIxLjkxIDQuMiAyLjM2IDUuNjRMNCAyMGg2di02bC0yLjI0IDIuMjRDNi42OCAxNS4xNSA2IDEzLjY2IDYgMTJjMC0xIC4yNS0xLjk0LjY4LTIuNzdsOC4wOCA4LjA4Yy0uMjUuMTMtLjUuMjUtLjc3LjM0djIuMDljLjgtLjIxIDEuNTUtLjU0IDIuMjMtLjk2bDIuMzYgMi4zNiAxLjI3LTEuMjdMNC4xNCA0LjE0IDIuODYgNS40MXpNMjAgNGgtNnY2bDIuMjQtMi4yNEMxNy4zMiA4Ljg1IDE4IDEwLjM0IDE4IDEyYzAgMS0uMjUgMS45NC0uNjggMi43N2wxLjQ2IDEuNDZDMTkuNTUgMTUuMDEgMjAgMTMuNTYgMjAgMTJjMC0yLjIxLS45MS00LjItMi4zNi01LjY0TDIwIDR6Ii8+PC9zdmc+",Editor.syncProblemImage="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyAxMmMwIDIuMjEuOTEgNC4yIDIuMzYgNS42NEwzIDIwaDZ2LTZsLTIuMjQgMi4yNEM1LjY4IDE1LjE1IDUgMTMuNjYgNSAxMmMwLTIuNjEgMS42Ny00LjgzIDQtNS42NVY0LjI2QzUuNTUgNS4xNSAzIDguMjcgMyAxMnptOCA1aDJ2LTJoLTJ2MnpNMjEgNGgtNnY2bDIuMjQtMi4yNEMxOC4zMiA4Ljg1IDE5IDEwLjM0IDE5IDEyYzAgMi42MS0xLjY3IDQuODMtNCA1LjY1djIuMDljMy40NS0uODkgNi00LjAxIDYtNy43NCAwLTIuMjEtLjkxLTQuMi0yLjM2LTUuNjRMMjEgNHptLTEwIDloMlY3aC0ydjZ6Ii8+PC9zdmc+",Editor.tweetImage=IMAGE_PATH+"/tweet.png",Editor.facebookImage=IMAGE_PATH+"/facebook.png",Editor.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",Editor.hiResImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAA+CAMAAACLMWy1AAAAh1BMVEUAAABMTExERERBQUFBQUFFRUVAQEBCQkJAQEA6OjpDQ0NKSkpBQUFBQUFERERERERBQUFCQkJCQkJCQkJJSUlBQUFCQkJDQ0NDQ0NCQkJDQ0NBQUFBQUFCQkJBQUFCQkJCQkJDQ0NCQkJHR0dBQUFCQkJCQkJAQEBCQkJDQ0NAQEBERERCQkIk1hS2AAAAKnRSTlMAAjj96BL7PgQFRwfu3TYazKuVjRXl1V1DPCn1uLGjnWNVIgy9hU40eGqPkM38AAACG0lEQVRYw+2X63KbMBCFzwZblgGDceN74muatpLe//m6MHV3gHGFAv2RjM94MAbxzdnVsQbBDKwH8AH8MDAyafzjqYeyOG04XE7RS8nIRDXg6BlT+rA0nmtAPh+NQRDxIASIMG44rAMrGunBgHwy3uUldxggIStGKp2f+DQc2O4h4eQsX3O2IFB/oEbsjOKbStnjAEA+zJ0ylZTbgvoDn8xNyn6Dbj5Kd4GsNpABa6duQPfSdEj88TgMAhKuCWjAkgmFXPLnsD0pWd3OFGdrMugQII/eOMPEiGOzqPMIeWrcSoMCg71W1pXBPvCP+gS/OdXqQ3uW23+93XGWLl/OaBb805bNcBPoEIcVJsnHzcxpZH86u5KZ9gDby5dQCcnKqdbke4ItI4Tzd7IW9hZQt4EO6GG9b9sYuuK9Wwn8TIr2xKbF2+3Nhr+qxChJ/AI6pIfCu4z4Zowp4ZUNihz79vewzctnHDwTvQO/hCdFBzrUGDOPn2Y/F8YKT4oOATLvlhOznzmBSdFBJWtc58y7r+UVFOCQczy3wpN6pegDqHtsCPTGvH9JuTO0Dyg8icldYPk+RB6g8Aofj4m2EKBvtTmUPD9xDd1pPcSReV2U5iD/ik2yrngtvvqBfPzOvKiDTKTsCdoHZJ7pLLffgTwlJ5vJdtJV2/jiAYaLvLGhMAEDO5QcDg2M/jOw/8Zn+K3ZwJvHT7ZffgC/NvA3zcybTeIfE4EAAAAASUVORK5CYII=":IMAGE_PATH+"/img-hi-res.png",Editor.loResImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAA+CAMAAACLMWy1AAAAS1BMVEVAQEAAAAA1NTVBQUFDQ0NDQ0NFRUVERERBQUFBQUFBQUFAQEBBQUFBQUFCQkJCQkJCQkJBQUFCQkJDQ0NDQ0NCQkJCQkJCQkJGRkb5/XqTAAAAGXRSTlP+AAWODlASCsesX+Lc2LyWe3pwa1tCPjohjSJfoAAAAI1JREFUWMPt1MkKhTAMRuG0anvneXr/J71nUypKcdqI/N8yhLMKMZE1CahnClDQzMPB44ED3EgeCubgDWnWQMHpwTtKwTe+UHD4sJ94wbUEHHFGhILlYDeSnsQeabeCgsPBgB0MOZZ9oGA5GJFiJSfUULAfjLjARrhCwX7wh2YCDwVbwZkUBKqFFJRN+wOcwSgR2sREcgAAAABJRU5ErkJggg==":IMAGE_PATH+"/img-lo-res.png",Editor.cameraLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAA/BJREFUWAnFl0uIjWEYx885buPSuGwmSYwtwsY1ikKSNYNclmQnadgrZSPlsnBLSlaGBdNYKY0Vdi4L4zYzIqxGxmXG//d+7//0+uY7nWMiT/2/53mf+3v7vnNKpf9M5UbrDw8Pj4m+wzmeT1FBUS6Xf+YNox6reMONukijMXUTM3NmI75PyXcJPwRWg5kS7xysDLNmfEUxpx2rceNE50IlYjyRklcLf0prY+x4BTqfmx3ZUHQaO9ISGngYq38V/1EH+ECPa+QaK1u1kVBQirDMChiS3CTeIkwWvghtwhKBpZ8g1CO2B99FynVU/KowSRgQ3mlrBsVZ1awmQlS0SGbfXglfBPbdRGMm5O8RXg2P835pDCvzWjghTHETcLpZLHwS8kTCtBEK1SN83Egam8YxyVZqc+Do5qkwS+gT9grNwkUBG6cbsG/gs3BTuC/0ChCxq4QtwgzBMdwUZBPyN4Ftfi4sYPZHktbOSRlIuutRP5jYj0ueZp88xyYcS/zZoiLyQT1IA/cTj7eSlwnrhI+JnkQbCwo2Sx/2M7VJt17wdhVtgxvrpoFnAuSAbJQ97biZAlKxBfD9wgOhV+BgIR/AZtJ4kwD5PGSj7OmmekjWEy0oAQHAS3+KpBpzXqYK3UItopHpSRMno2N+cm7gDYnfRCcr3QBqriMHLJDkeyhFfiG5aVbK+8rhtP9M6QcIEJHX5Fp9NMAyQlYiu+OOJNlODCIXyka/P23bncTdiC7OydC1+v1Bsb+5r84DK8S3Rdmf5cRUFW3bXtWUSt1Rdk6G4SyJV2o1YId+vNUxr+x5yCJiapFtcxQzLjrxboGcMxvFJwEOKnLwjIbkx/sdSmeSaUY++SwTAxV+4DJT7RVwkbk46gNCsifIItuy0e9PF33Cb4homhN5YRyzL5q5V2VNkv98kqgoGTo3YF9CnMM5Y5rItFfvBSi9JulVXOgI+VwIntkt+SaZ6weQfcovJf7zpTfl86P/wAF7Fz18NeKwmvAWCaX0Z/uMHQr42ZxvR/Rxcw5xM+9J/CJq8w2gduDhmDgso/QrBH47dEXQ1IqczyHpIOfIRtnTtV7SwO1oKXKkU3fbToFGSDHtMWcaH1WBuVYnDbRFi99iqSMySdzxXckrazUh23KBVYGIcfNBkTxca0e4ATJ0KukGYVBgr/MnlhPOtQq/ksUfCbzh+EFCjtnCUoHfjhA/OsiTv2HcEvJMELp0VakZDliTmriTdPivxU4VmEhtPrGV+KJhO7ZKt0doFZh1fgZSBWIW2AGEHwg3BUWOnKtH+suqdw07tYMfglCrWPD5mw9qVYuniaXkT0OtWaSuo5LJTY1RBf+roF9X5+y/5qU+DAAAAABJRU5ErkJggg==",Editor.defaultCustomLibraries=[],Editor.enableCustomLibraries=!0,Editor.enableCustomProperties=!0,Editor.commonEdgeProperties=[{type:"separator"},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"targetPortConstraint",dispName:"Target Port Constraint",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"None"},{val:"east",dispName:"East"},{val:"north",dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"sourcePortConstraint",dispName:"Source Port Constraint",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"None"},{val:"east",dispName:"East"},{val:"north",dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"fillOpacity",dispName:"Fill Opacity",type:"int",min:0,max:100,defVal:100},{name:"strokeOpacity",dispName:"Stroke Opacity",type:"int",min:0,max:100,defVal:100},{name:"startFill",dispName:"Start Fill",type:"bool",defVal:!0},{name:"endFill",dispName:"End Fill",type:"bool",defVal:!0},{name:"sourcePerimeterSpacing",dispName:"Source Perimeter Spacing",type:"float",defVal:0},{name:"targetPerimeterSpacing",dispName:"Target Perimeter Spacing",type:"float",defVal:0},{name:"perimeterSpacing",dispName:"Perimeter Spacing",type:"float",defVal:0},{name:"anchorPointDirection",dispName:"Anchor Point Direction",type:"bool",defVal:!0},{name:"snapToPoint",dispName:"Snap to Point",type:"bool",defVal:!1},{name:"fixDash",dispName:"Fixed Dash",type:"bool",defVal:!1},{name:"jiggle",dispName:"Jiggle",type:"float",min:0,defVal:1.5,isVisible:function(e){return"1"==mxUtils.getValue(e.style,"comic","0")}},{name:"editable",dispName:"Editable",type:"bool",defVal:!0},{name:"backgroundOutline",dispName:"Background Outline",type:"bool",defVal:!1},{name:"bendable",dispName:"Bendable",type:"bool",defVal:!0},{name:"movable",dispName:"Movable",type:"bool",defVal:!0},{name:"cloneable",dispName:"Cloneable",type:"bool",defVal:!0},{name:"deletable",dispName:"Deletable",type:"bool",defVal:!0},{name:"loopStyle",dispName:"Loop Style",type:"bool",defVal:!0}],Editor.commonVertexProperties=[{type:"separator"},{name:"fillOpacity",dispName:"Fill Opacity",type:"int",min:0,max:100,defVal:100},{name:"strokeOpacity",dispName:"Stroke Opacity",type:"int",min:0,max:100,defVal:100},{name:"overflow",dispName:"Text Overflow",defVal:"visible",type:"enum",enumList:[{val:"visible",dispName:"Visible"},{val:"hidden",dispName:"Hidden"},{val:"fill",dispName:"Fill"},{val:"width",dispName:"Width"}]},{name:"noLabel",dispName:"Hide Label",type:"bool",defVal:!1},{name:"labelPadding",dispName:"Label Padding",type:"float",defVal:0},{name:"direction",dispName:"Direction",type:"enum",defVal:"east",enumList:[{val:"east",dispName:"East"},{val:"north",dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"portConstraint",dispName:"Port Constraint",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"None"},{val:"east",dispName:"East"},{val:"north",dispName:"North"},{val:"south",dispName:"South"},{val:"west",dispName:"West"}]},{name:"portConstraintRotation",dispName:"Port Const. Rot.",type:"bool",defVal:!1},{name:"snapToPoint",dispName:"Snap to Point",type:"bool",defVal:!1},{name:"perimeter",dispName:"Perimeter",defVal:"none",type:"enum",enumList:[{val:"none",dispName:"None"},{val:"rectanglePerimeter",dispName:"Rectangle"},{val:"ellipsePerimeter",dispName:"Ellipse"},{val:"rhombusPerimeter",dispName:"Rhombus"},{val:"trianglePerimeter",dispName:"Triangle"},{val:"hexagonPerimeter2",dispName:"Hexagon"},{val:"lifelinePerimeter",dispName:"Lifeline"},{val:"orthogonalPerimeter",dispName:"Orthogonal"},{val:"backbonePerimeter",dispName:"Backbone"},{val:"calloutPerimeter",dispName:"Callout"},{val:"parallelogramPerimeter",dispName:"Parallelogram"},{val:"trapezoidPerimeter",dispName:"Trapezoid"},{val:"stepPerimeter",dispName:"Step"}]},{name:"fixDash",dispName:"Fixed Dash",type:"bool",defVal:!1},{name:"jiggle",dispName:"Jiggle",type:"float",min:0,defVal:1.5,isVisible:function(e){return"1"==mxUtils.getValue(e.style,"comic","0")}},{name:"autosize",dispName:"Autosize",type:"bool",defVal:!1},{name:"collapsible",dispName:"Collapsible",type:"bool",defVal:!1},{name:"container",dispName:"Container",type:"bool",defVal:!1},{name:"recursiveResize",dispName:"Resize Children",type:"bool",defVal:!0},{name:"part",dispName:"Part",type:"bool",defVal:!1},{name:"editable",dispName:"Editable",type:"bool",defVal:!0},{name:"backgroundOutline",dispName:"Background Outline",type:"bool",defVal:!1},{name:"movable",dispName:"Movable",type:"bool",defVal:!0},{name:"resizable",dispName:"Resizable",type:"bool",defVal:!0},{name:"resizeWidth",dispName:"Resize Width",type:"bool",defVal:!1},{name:"resizeHeight",dispName:"Resize Height",type:"bool",defVal:!1},{name:"rotatable",dispName:"Rotatable",type:"bool",defVal:!0},{name:"cloneable",dispName:"Cloneable",type:"bool",defVal:!0},{name:"deletable",dispName:"Deletable",type:"bool",defVal:!0}],Editor.defaultCsvValue='##\n## Example CSV import. Use ## for comments and # for configuration. Paste CSV below.\n## The following names are reserved and should not be used (or ignored):\n## id, tooltip, placeholder(s), link and label (see below)\n##\n#\n## Node label with placeholders and HTML.\n## Default is \'%name_of_first_column%\'.\n#\n# label: %name%<br><i style="color:gray;">%position%</i><br><a href="mailto:%email%">Email</a>\n#\n## Node style (placeholders are replaced once).\n## Default is the current style for nodes.\n#\n# style: label;image=%image%;whiteSpace=wrap;html=1;rounded=1;fillColor=%fill%;strokeColor=%stroke%;\n#\n## Parent style for nodes with child nodes (placeholders are replaced once).\n#\n# parentstyle: swimlane;whiteSpace=wrap;html=1;childLayout=stackLayout;horizontal=1;horizontalStack=0;resizeParent=1;resizeLast=0;collapsible=1;\n#\n## Uses the given column name as the identity for cells (updates existing cells).\n## Default is no identity (empty value or -).\n#\n# identity: -\n#\n## Uses the given column name as the parent reference for cells. Default is no parent (empty or -).\n## The identity above is used for resolving the reference so it must be specified.\n#\n# parent: -\n#\n## Adds a prefix to the identity of cells to make sure they do not collide with existing cells (whose\n## IDs are numbers from 0..n, sometimes with a GUID prefix in the context of realtime collaboration).\n## Default is csvimport-.\n#\n# namespace: csvimport-\n#\n## Connections between rows ("from": source colum, "to": target column).\n## Label, style and invert are optional. Defaults are \'\', current style and false.\n## In addition to label, an optional fromlabel and tolabel can be used to name the column\n## that contains the text for the label in the edges source or target (invert ignored).\n## The label is concatenated in the form fromlabel + label + tolabel if all are defined.\n## The target column may contain a comma-separated list of values.\n## Multiple connect entries are allowed.\n#\n# connect: {"from": "manager", "to": "name", "invert": true, "label": "manages", \\\n#          "style": "curved=1;endArrow=blockThin;endFill=1;fontSize=11;"}\n# connect: {"from": "refs", "to": "id", "style": "curved=1;fontSize=11;"}\n#\n## Node x-coordinate. Possible value is a column name. Default is empty. Layouts will\n## override this value.\n#\n# left: \n#\n## Node y-coordinate. Possible value is a column name. Default is empty. Layouts will\n## override this value.\n#\n# top: \n#\n## Node width. Possible value is a number (in px), auto or an @ sign followed by a column\n## name that contains the value for the width. Default is auto.\n#\n# width: auto\n#\n## Node height. Possible value is a number (in px), auto or an @ sign followed by a column\n## name that contains the value for the height. Default is auto.\n#\n# height: auto\n#\n## Padding for autosize. Default is 0.\n#\n# padding: -12\n#\n## Comma-separated list of ignored columns for metadata. (These can be\n## used for connections and styles but will not be added as metadata.)\n#\n# ignore: id,image,fill,stroke\n#\n## Column to be renamed to link attribute (used as link).\n#\n# link: url\n#\n## Spacing between nodes. Default is 40.\n#\n# nodespacing: 40\n#\n## Spacing between levels of hierarchical layouts. Default is 100.\n#\n# levelspacing: 100\n#\n## Spacing between parallel edges. Default is 40.\n#\n# edgespacing: 40\n#\n## Name of layout. Possible values are auto, none, verticaltree, horizontaltree,\n## verticalflow, horizontalflow, organic, circle. Default is auto.\n#\n# layout: auto\n#\n## ---- CSV below this line. First line are column names. ----\nname,position,id,location,manager,email,fill,stroke,refs,url,image\nEvan Miller,CFO,emi,Office 1,,me@example.com,#dae8fc,#6c8ebf,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-9-2-128.png\nEdward Morrison,Brand Manager,emo,Office 2,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-10-3-128.png\nRon Donovan,System Admin,rdo,Office 3,Evan Miller,me@example.com,#d5e8d4,#82b366,"emo,tva",https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-2-128.png\nTessa Valet,HR Director,tva,Office 4,Evan Miller,me@example.com,#d5e8d4,#82b366,,https://www.draw.io,https://cdn3.iconfinder.com/data/icons/user-avatars-1/512/users-3-128.png\n',Editor.shadowOptionEnabled=!0,Editor.config=null,Editor.configVersion=null,Editor.configure=function(e,t){if(null!=e){Editor.config=e,Editor.configVersion=e.version,Menus.prototype.defaultFonts=e.defaultFonts||Menus.prototype.defaultFonts,ColorDialog.prototype.presetColors=e.presetColors||ColorDialog.prototype.presetColors,ColorDialog.prototype.defaultColors=e.defaultColors||ColorDialog.prototype.defaultColors,StyleFormatPanel.prototype.defaultColorSchemes=e.defaultColorSchemes||StyleFormatPanel.prototype.defaultColorSchemes,Graph.prototype.defaultEdgeLength=e.defaultEdgeLength||Graph.prototype.defaultEdgeLength,null!=e.templateFile&&(EditorUi.templateFile=e.templateFile),e.customFonts&&(Menus.prototype.defaultFonts=e.customFonts.concat(Menus.prototype.defaultFonts)),e.customPresetColors&&(ColorDialog.prototype.presetColors=e.customPresetColors.concat(ColorDialog.prototype.presetColors)),null!=e.customColorSchemes&&(StyleFormatPanel.prototype.defaultColorSchemes=e.customColorSchemes.concat(StyleFormatPanel.prototype.defaultColorSchemes));if(null!=e.css){var n=document.createElement("style");n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(e.css));var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}null!=e.libraries&&(Sidebar.prototype.customEntries=e.libraries),null!=e.enabledLibraries&&(Sidebar.prototype.enabledLibraries=e.enabledLibraries),null!=e.defaultLibraries&&(Sidebar.prototype.defaultEntries=e.defaultLibraries),null!=e.defaultCustomLibraries&&(Editor.defaultCustomLibraries=e.defaultCustomLibraries),null!=e.enableCustomLibraries&&(Editor.enableCustomLibraries=e.enableCustomLibraries),null!=e.defaultVertexStyle&&(Graph.prototype.defaultVertexStyle=e.defaultVertexStyle),null!=e.defaultEdgeStyle&&(Graph.prototype.defaultEdgeStyle=e.defaultEdgeStyle),e.emptyDiagramXml&&(EditorUi.prototype.emptyDiagramXml=e.emptyDiagramXml),e.thumbWidth&&(Sidebar.prototype.thumbWidth=e.thumbWidth),e.thumbHeight&&(Sidebar.prototype.thumbHeight=e.thumbHeight),e.emptyLibraryXml&&(EditorUi.prototype.emptyLibraryXml=e.emptyLibraryXml),e.sidebarWidth&&(EditorUi.prototype.hsplitPosition=e.sidebarWidth),e.fontCss&&(n=document.createElement("style"),n.setAttribute("type","text/css"),n.appendChild(document.createTextNode(e.fontCss)),r=document.getElementsByTagName("script")[0],r.parentNode.insertBefore(n,r),Editor.prototype.fontCss=e.fontCss);if(null!=e.plugins&&!t)for(App.initPluginCallback(),n=0;n<e.plugins.length;n++)mxscript(e.plugins[n])}},Editor.GUID_ALPHABET="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",Editor.GUID_LENGTH=20,Editor.guid=function(e){e=null!=e?e:Editor.GUID_LENGTH;for(var t=[],n=0;n<e;n++)t.push(Editor.GUID_ALPHABET.charAt(Math.floor(Math.random()*Editor.GUID_ALPHABET.length)));return t.join("")},Editor.prototype.useForeignObjectForMath=!1,Editor.prototype.editButtonLink=null!=urlParams.edit?decodeURIComponent(urlParams.edit):null;var e=Editor.prototype.setGraphXml;Editor.prototype.setGraphXml=function(t){t=null!=t&&"mxlibrary"!=t.nodeName?this.extractGraphModel(t):null;if(null==t)throw{message:mxResources.get("notADiagramFile")||"Invalid data",toString:function(){return this.message}};var n=t.getElementsByTagName("parsererror");if(null!=n&&0<n.length){var n=n[0],r=n.getElementsByTagName("div");throw null!=r&&0<r.length&&(n=r[0]),{message:mxUtils.getTextContent(n)}}if("mxGraphModel"==t.nodeName){n=t.getAttribute("style")||"default-style2";if("1"==urlParams.embed||null!=n&&""!=n)n!=this.graph.currentStyle&&(r=null!=this.graph.themes?this.graph.themes[n]:mxUtils.load(STYLE_PATH+"/"+n+".xml").getDocumentElement(),null!=r&&(i=new mxCodec(r.ownerDocument),i.decode(r,this.graph.getStylesheet())));else if(r=null!=this.graph.themes?this.graph.themes["default-old"]:mxUtils.load(STYLE_PATH+"/default-old.xml").getDocumentElement(),null!=r){var i=new mxCodec(r.ownerDocument);i.decode(r,this.graph.getStylesheet())}this.graph.currentStyle=n,this.graph.mathEnabled="1"==urlParams.math||"1"==t.getAttribute("math"),n=t.getAttribute("backgroundImage"),null!=n?(n=JSON.parse(n),this.graph.setBackgroundImage(new mxImage(n.src,n.width,n.height))):this.graph.setBackgroundImage(null),mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath?!0:this.originalNoForeignObject,this.graph.useCssTransforms=!mxClient.NO_FO&&this.isChromelessView()&&this.graph.isCssTransformsSupported(),this.graph.updateCssTransform(),this.graph.setShadowVisible("1"==t.getAttribute("shadow"),!1)}e.apply(this,arguments)};var t=Editor.prototype.getGraphXml;Editor.prototype.getGraphXml=function(e){e=null!=e?e:!0;var n=t.apply(this,arguments);return null!=this.graph.currentStyle&&"default-style2"!=this.graph.currentStyle&&n.setAttribute("style",this.graph.currentStyle),null!=this.graph.backgroundImage&&n.setAttribute("backgroundImage",JSON.stringify(this.graph.backgroundImage)),n.setAttribute("math",this.graph.mathEnabled?"1":"0"),n.setAttribute("shadow",this.graph.shadowVisible?"1":"0"),n},Editor.prototype.isDataSvg=function(e){try{var t=mxUtils.parseXml(e).documentElement.getAttribute("content");if(null!=t&&(null!=t&&"<"!=t.charAt(0)&&"%"!=t.charAt(0)&&(t=unescape(window.atob?atob(t):Base64.decode(cont,t))),null!=t&&"%"==t.charAt(0)&&(t=decodeURIComponent(t)),null!=t&&0<t.length)){var n=mxUtils.parseXml(t).documentElement;return"mxfile"==n.nodeName||"mxGraphModel"==n.nodeName}}catch(r){}return!1},Editor.prototype.extractGraphModel=function(e,t){if(null!=e&&"undefined"!=typeof pako){var n=e.ownerDocument.getElementsByTagName("div"),r=[];if(null!=n&&0<n.length)for(var i=0;i<n.length;i++)if("mxgraph"==n[i].getAttribute("class")){r.push(n[i]);break}0<r.length&&(n=r[0].getAttribute("data-mxgraph"),null!=n?(r=JSON.parse(n),null!=r&&null!=r.xml&&(r=mxUtils.parseXml(r.xml),e=r.documentElement)):(r=r[0].getElementsByTagName("div"),0<r.length&&(n=mxUtils.getTextContent(r[0]),n=this.graph.decompress(n),0<n.length&&(r=mxUtils.parseXml(n),e=r.documentElement))))}if(null!=e&&"svg"==e.nodeName){if(n=e.getAttribute("content"),null!=n&&"<"!=n.charAt(0)&&"%"!=n.charAt(0)&&(n=unescape(window.atob?atob(n):Base64.decode(cont,n))),null!=n&&"%"==n.charAt(0)&&(n=decodeURIComponent(n)),!(null!=n&&0<n.length))throw{message:mxResources.get("notADiagramFile")};e=mxUtils.parseXml(n).documentElement}return null==e||t||(r=null,"diagram"==e.nodeName?r=e:"mxfile"==e.nodeName&&(n=e.getElementsByTagName("diagram"),0<n.length&&(r=n[Math.max(0,Math.min(n.length-1,urlParams.page||0))])),null!=r&&(n=this.graph.decompress(mxUtils.getTextContent(r)),null!=n&&0<n.length&&(e=mxUtils.parseXml(n).documentElement))),null==e||"mxGraphModel"==e.nodeName||t&&"mxfile"==e.nodeName||(e=null),e};var n=Editor.prototype.resetGraph;Editor.prototype.resetGraph=function(){this.graph.mathEnabled="1"==urlParams.math,this.graph.view.x0=null,this.graph.view.y0=null,mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath?!0:this.originalNoForeignObject,this.graph.useCssTransforms=!mxClient.NO_FO&&this.isChromelessView()&&this.graph.isCssTransformsSupported(),this.graph.updateCssTransform(),n.apply(this,arguments)};var r=Editor.prototype.updateGraphComponents;Editor.prototype.updateGraphComponents=function(){r.apply(this,arguments),mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath&&null!=Editor.MathJaxRender?!0:this.originalNoForeignObject,this.graph.useCssTransforms=!mxClient.NO_FO&&this.isChromelessView()&&this.graph.isCssTransformsSupported(),this.graph.updateCssTransform()},Editor.initMath=function(e,t){e=null!=e?e:"https://math.draw.io/current/MathJax.js?config=TeX-MML-AM_HTMLorMML",Editor.mathJaxQueue=[],Editor.doMathJaxRender=function(e){window.setTimeout(function(){"hidden"!=e.style.visibility&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])},0)},window.MathJax={skipStartupTypeset:!0,showMathMenu:!1,messageStyle:"none",AuthorInit:function(){MathJax.Hub.Config(t||{jax:["input/TeX","input/MathML","input/AsciiMath","output/HTML-CSS"],extensions:["tex2jax.js","mml2jax.js","asciimath2jax.js"],"HTML-CSS":{imageFont:null},TeX:{extensions:["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]},tex2jax:{ignoreClass:"mxCellEditor"},asciimath2jax:{ignoreClass:"mxCellEditor"}}),MathJax.Hub.Register.StartupHook("Begin",function(){for(var e=0;e<Editor.mathJaxQueue.length;e++)Editor.doMathJaxRender(Editor.mathJaxQueue[e])})}},Editor.MathJaxRender=function(e){"undefined"!=typeof MathJax&&"undefined"!=typeof MathJax.Hub?Editor.doMathJaxRender(e):Editor.mathJaxQueue.push(e)},Editor.MathJaxClear=function(){Editor.mathJaxQueue=[]};var n=Editor.prototype.init;Editor.prototype.init=function(){n.apply(this,arguments),this.graph.addListener(mxEvent.SIZE,mxUtils.bind(this,function(e,t){null!=this.graph.container&&this.graph.mathEnabled&&Editor.MathJaxRender(this.graph.container)}))};var r=document.getElementsByTagName("script");if(null!=r&&0<r.length){var i=document.createElement("script");i.type="text/javascript",i.src=e,r[0].parentNode.appendChild(i)}},Editor.prototype.csvToArray=function(e){if(!/^\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*(?:,\s*(?:'[^'\\]*(?:\\[\S\s][^'\\]*)*'|"[^"\\]*(?:\\[\S\s][^"\\]*)*"|[^,'"\s\\]*(?:\s+[^,'"\s\\]+)*)\s*)*$/.test(e))return null;var t=[];return e.replace(/(?!\s*$)\s*(?:'([^'\\]*(?:\\[\S\s][^'\\]*)*)'|"([^"\\]*(?:\\[\S\s][^"\\]*)*)"|([^,'"\s\\]*(?:\s+[^,'"\s\\]+)*))\s*(?:,|$)/g,function(e,n,r,i){return void 0!==n?t.push(n.replace(/\\'/g,"'")):void 0!==r?t.push(r.replace(/\\"/g,'"')):void 0!==i&&t.push(i),""}),/,\s*$/.test(e)&&t.push(""),t};if(window.ColorDialog){var i=ColorDialog.addRecentColor;ColorDialog.addRecentColor=function(e,t){i.apply(this,arguments),mxSettings.setRecentColors(ColorDialog.recentColors),mxSettings.save()};var s=ColorDialog.resetRecentColors;ColorDialog.resetRecentColors=function(){s.apply(this,arguments),mxSettings.setRecentColors(ColorDialog.recentColors),mxSettings.save()}}window.EditDataDialog&&(EditDataDialog.getDisplayIdForCell=function(e,t){var n=null;return null!=e.editor.graph.getModel().getParent(t)?n=t.getId():null!=e.currentPage&&(n=e.currentPage.getId()),n});if(null!=window.StyleFormatPanel){var o=Format.prototype.init;Format.prototype.init=function(){o.apply(this,arguments),this.editorUi.editor.addListener("fileLoaded",this.update)};var u=Format.prototype.refresh;Format.prototype.refresh=function(){null!=this.editorUi.getCurrentFile()||"1"==urlParams.embed||this.editorUi.editor.chromeless?u.apply(this,arguments):this.clear()},DiagramFormatPanel.prototype.isShadowOptionVisible=function(){var e=this.editorUi.getCurrentFile();return"1"==urlParams.embed||null!=e&&e.isEditable()},DiagramFormatPanel.prototype.isMathOptionVisible=function(e){return!1};var a=DiagramFormatPanel.prototype.addView;DiagramFormatPanel.prototype.addView=function(e){e=a.apply(this,arguments),this.editorUi.getCurrentFile();if(mxClient.IS_SVG&&this.isShadowOptionVisible()){var t=this.editorUi,n=t.editor.graph,r=this.createOption(mxResources.get("shadow"),function(){return n.shadowVisible},function(e){var r=new ChangePageSetup(t);r.ignoreColor=!0,r.ignoreImage=!0,r.shadowVisible=e,n.model.execute(r)},{install:function(e){this.listener=function(){e(n.shadowVisible)},t.addListener("shadowVisibleChanged",this.listener)},destroy:function(){t.removeListener(this.listener)}});Editor.shadowOptionEnabled||(r.getElementsByTagName("input")[0].setAttribute("disabled","disabled"),mxUtils.setOpacity(r,60)),e.appendChild(r)}return e};var f=DiagramFormatPanel.prototype.addOptions;DiagramFormatPanel.prototype.addOptions=function(e){e=f.apply(this,arguments);var t=this.editorUi,n=t.editor.graph;if(n.isEnabled()){var r=t.getCurrentFile();null!=r&&r.isAutosaveOptional()&&(r=this.createOption(mxResources.get("autosave"),function(){return t.editor.autosave},function(e){t.editor.setAutosave(e)},{install:function(e){this.listener=function(){e(t.editor.autosave)},t.editor.addListener("autosaveChanged",this.listener)},destroy:function(){t.editor.removeListener(this.listener)}}),e.appendChild(r))}if(this.isMathOptionVisible()&&n.isEnabled()&&"undefined"!=typeof MathJax){r=this.createOption(mxResources.get("mathematicalTypesetting"),function(){return n.mathEnabled},function(e){t.actions.get("mathematicalTypesetting").funct()},{install:function(e){this.listener=function(){e(n.mathEnabled)},t.addListener("mathEnabledChanged",this.listener)},destroy:function(){t.removeListener(this.listener)}}),r.style.paddingTop="5px",e.appendChild(r);var i=t.menus.createHelpLink("https://desk.draw.io/support/solutions/articles/16000032875");i.style.position="relative",i.style.marginLeft="6px",i.style.top="2px",r.appendChild(i)}return e},mxCellRenderer.prototype.defaultVertexShape.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"absoluteArcSize",dispName:"Abs. Arc Size",type:"bool",defVal:!1}],mxCellRenderer.defaultShapes.link.prototype.customProperties=[{name:"width",dispName:"Width",type:"float",min:0,defVal:4}],mxCellRenderer.defaultShapes.flexArrow.prototype.customProperties=[{name:"width",dispName:"Width",type:"float",min:0,defVal:10},{name:"startWidth",dispName:"Start Width",type:"float",min:0,defVal:20},{name:"endWidth",dispName:"End Width",type:"float",min:0,defVal:20}],mxCellRenderer.defaultShapes.process.prototype.customProperties=[{name:"size",dispName:"Indent",type:"float",min:0,max:.5,defVal:.1}],mxCellRenderer.defaultShapes.rhombus.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,max:50,defVal:mxConstants.LINE_ARCSIZE},{name:"double",dispName:"Double",type:"bool",defVal:!1}],mxCellRenderer.defaultShapes.partialRectangle.prototype.customProperties=[{name:"top",dispName:"Top Line",type:"bool",defVal:!0},{name:"bottom",dispName:"Bottom Line",type:"bool",defVal:!0},{name:"left",dispName:"Left Line",type:"bool",defVal:!0},{name:"right",dispName:"Right Line",type:"bool",defVal:!0}],mxCellRenderer.defaultShapes.parallelogram.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Slope Angle",type:"float",min:0,max:1,defVal:.2}],mxCellRenderer.defaultShapes.hexagon.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Slope Angle",type:"float",min:0,max:1,defVal:.25}],mxCellRenderer.defaultShapes.triangle.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE}],mxCellRenderer.defaultShapes.document.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",defVal:.3,min:0,max:1}],mxCellRenderer.defaultShapes.internalStorage.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"dx",dispName:"Left Line",type:"float",min:0,defVal:20},{name:"dy",dispName:"Top Line",type:"float",min:0,defVal:20}],mxCellRenderer.defaultShapes.cube.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,defVal:20},{name:"darkOpacity",dispName:"Dark Opacity",type:"float",min:-1,max:1,defVal:0},{name:"darkOpacity2",dispName:"Dark Opacity 2",type:"float",min:-1,max:1,defVal:0}],mxCellRenderer.defaultShapes.step.prototype.customProperties=[{name:"size",dispName:"Notch Size",type:"float",min:0,defVal:20},{name:"fixedSize",dispName:"Fixed Size",type:"bool",defVal:!0}],mxCellRenderer.defaultShapes.trapezoid.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Slope Angle",type:"float",min:0,max:1,defVal:.2}],mxCellRenderer.defaultShapes.tape.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.4}],mxCellRenderer.defaultShapes.note.prototype.customProperties=[{name:"size",dispName:"Fold Size",type:"float",min:0,defVal:30},{name:"darkOpacity",dispName:"Dark Opacity",type:"float",min:-1,max:1,defVal:0}],mxCellRenderer.defaultShapes.card.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"size",dispName:"Cutoff Size",type:"float",min:0,defVal:30}],mxCellRenderer.defaultShapes.callout.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:mxConstants.LINE_ARCSIZE},{name:"base",dispName:"Callout Width",type:"float",min:0,defVal:20},{name:"size",dispName:"Callout Length",type:"float",min:0,defVal:30},{name:"position",dispName:"Callout Position",type:"float",min:0,max:1,defVal:.5},{name:"position2",dispName:"Callout Tip Position",type:"float",min:0,max:1,defVal:.5}],mxCellRenderer.defaultShapes.folder.prototype.customProperties=[{name:"tabWidth",dispName:"Tab Width",type:"float"},{name:"tabHeight",dispName:"Tab Height",type:"float"},{name:"tabPosition",dispName:"Tap Position",type:"enum",enumList:[{val:"left",dispName:"Left"},{val:"right",dispName:"Right"}]}],mxCellRenderer.defaultShapes.swimlane.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:15},{name:"startSize",dispName:"Header Size",type:"float"},{name:"horizontal",dispName:"Horizontal",type:"bool",defVal:!0}],mxCellRenderer.defaultShapes.doubleEllipse.prototype.customProperties=[{name:"margin",dispName:"Indent",type:"float",min:0,defVal:4}],mxCellRenderer.defaultShapes.ext.prototype.customProperties=[{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:15},{name:"double",dispName:"Double",type:"bool",defVal:!1},{name:"margin",dispName:"Indent",type:"float",min:0,defVal:0}],mxCellRenderer.defaultShapes.curlyBracket.prototype.customProperties=[{name:"rounded",dispName:"Rounded",type:"bool",defVal:!0},{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.5}],mxCellRenderer.defaultShapes.image.prototype.customProperties=[{name:"imageAspect",dispName:"Fixed Image Aspect",type:"bool",defVal:!0}],mxCellRenderer.defaultShapes.label.prototype.customProperties=[{name:"imageAspect",dispName:"Fixed Image Aspect",type:"bool",defVal:!0},{name:"imageAlign",dispName:"Image Align",type:"enum",enumList:[{val:"left",dispName:"Left"},{val:"center",dispName:"Center"},{val:"right",dispName:"Right"}],defVal:"left"},{name:"imageVerticalAlign",dispName:"Image Vertical Align",type:"enum",enumList:[{val:"top",dispName:"Top"},{val:"middle",dispName:"Middle"},{val:"bottom",dispName:"Bottom"}],defVal:"middle"},{name:"imageWidth",dispName:"Image Width",type:"float",min:0,defVal:24},{name:"imageHeight",dispName:"Image Height",type:"float",min:0,defVal:24},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:12},{name:"absoluteArcSize",dispName:"Abs. Arc Size",type:"bool",defVal:!1}],mxCellRenderer.defaultShapes.dataStorage.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.1}],mxCellRenderer.defaultShapes.manualInput.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,defVal:30},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:20}],mxCellRenderer.defaultShapes.loopLimit.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,defVal:20},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:20}],mxCellRenderer.defaultShapes.offPageConnector.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,defVal:38},{name:"arcSize",dispName:"Arc Size",type:"float",min:0,defVal:20}],mxCellRenderer.defaultShapes.display.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.25}],mxCellRenderer.defaultShapes.singleArrow.prototype.customProperties=[{name:"arrowWidth",dispName:"Arrow Width",type:"float",min:0,max:1,defVal:.3},{name:"arrowSize",dispName:"Arrowhead Length",type:"float",min:0,max:1,defVal:.2}],mxCellRenderer.defaultShapes.doubleArrow.prototype.customProperties=[{name:"arrowWidth",dispName:"Arrow Width",type:"float",min:0,max:1,defVal:.3},{name:"arrowSize",dispName:"Arrowhead Length",type:"float",min:0,max:1,defVal:.2}],mxCellRenderer.defaultShapes.cross.prototype.customProperties=[{name:"size",dispName:"Size",type:"float",min:0,max:1,defVal:.2}],mxCellRenderer.defaultShapes.corner.prototype.customProperties=[{name:"dx",dispName:"Width1",type:"float",min:0,defVal:20},{name:"dy",dispName:"Width2",type:"float",min:0,defVal:20}],mxCellRenderer.defaultShapes.tee.prototype.customProperties=[{name:"dx",dispName:"Width1",type:"float",min:0,defVal:20},{name:"dy",dispName:"Width2",type:"float",min:0,defVal:20}],mxCellRenderer.defaultShapes.umlLifeline.prototype.customProperties=[{name:"participant",dispName:"Participant",type:"enum",defVal:"none",enumList:[{val:"none",dispName:"Default"},{val:"umlActor",dispName:"Actor"},{val:"umlBoundary",dispName:"Boundary"},{val:"umlEntity",dispName:"Entity"},{val:"umlControl",dispName:"Control"}]},{name:"size",dispName:"Height",type:"float",defVal:40,min:0}],mxCellRenderer.defaultShapes.umlFrame.prototype.customProperties=[{name:"width",dispName:"Title Width",type:"float",defVal:60,min:0},{name:"height",dispName:"Title Height",type:"float",defVal:30,min:0}],StyleFormatPanel.prototype.defaultColorSchemes=[[null,{fill:"#f5f5f5",stroke:"#666666",font:"#333333"},{fill:"#dae8fc",stroke:"#6c8ebf"},{fill:"#d5e8d4",stroke:"#82b366"},{fill:"#ffe6cc",stroke:"#d79b00"},{fill:"#fff2cc",stroke:"#d6b656"},{fill:"#f8cecc",stroke:"#b85450"},{fill:"#e1d5e7",stroke:"#9673a6"}],[{fill:"#60a917",stroke:"#2D7600",font:"#ffffff"},{fill:"#008a00",stroke:"#005700",font:"#ffffff"},{fill:"#1ba1e2",stroke:"#006EAF",font:"#ffffff"},{fill:"#0050ef",stroke:"#001DBC",font:"#ffffff"},{fill:"#6a00ff",stroke:"#3700CC",font:"#ffffff"},{fill:"#aa00ff",stroke:"#7700CC",font:"#ffffff"},{fill:"#d80073",stroke:"#A50040",font:"#ffffff"},{fill:"#a20025",stroke:"#6F0000",font:"#ffffff"}],[{fill:"#e51400",stroke:"#B20000",font:"#ffffff"},{fill:"#fa6800",stroke:"#C73500",font:"#ffffff"},{fill:"#f0a30a",stroke:"#BD7000",font:"#ffffff"},{fill:"#e3c800",stroke:"#B09500",font:"#ffffff"},{fill:"#6d8764",stroke:"#3A5431",font:"#ffffff"},{fill:"#647687",stroke:"#314354",font:"#ffffff"},{fill:"#76608a",stroke:"#432D57",font:"#ffffff"},{fill:"#a0522d",stroke:"#6D1F00",font:"#ffffff"}],[null,{fill:mxConstants.NONE,stroke:"#36393d"},{fill:"#fad7ac",stroke:"#b46504"},{fill:"#fad9d5",stroke:"#ae4132"},{fill:"#b0e3e6",stroke:"#0e8088"},{fill:"#b1ddf0",stroke:"#10739e"},{fill:"#d0cee2",stroke:"#56517e"},{fill:"#bac8d3",stroke:"#23445d"}],[null,{fill:"#f5f5f5",stroke:"#666666",gradient:"#b3b3b3"},{fill:"#dae8fc",stroke:"#6c8ebf",gradient:"#7ea6e0"},{fill:"#d5e8d4",stroke:"#82b366",gradient:"#97d077"},{fill:"#ffcd28",stroke:"#d79b00",gradient:"#ffa500"},{fill:"#fff2cc",stroke:"#d6b656",gradient:"#ffd966"},{fill:"#f8cecc",stroke:"#b85450",gradient:"#ea6b66"},{fill:"#e6d0de",stroke:"#996185",gradient:"#d5739d"}],[null,{fill:"#eeeeee",stroke:"#36393d"},{fill:"#f9f7ed",stroke:"#36393d"},{fill:"#ffcc99",stroke:"#36393d"},{fill:"#cce5ff",stroke:"#36393d"},{fill:"#ffff88",stroke:"#36393d"},{fill:"#cdeb8b",stroke:"#36393d"},{fill:"#ffcccc",stroke:"#36393d"}]],StyleFormatPanel.prototype.customColorSchemes=null,StyleFormatPanel.prototype.findCommonProperties=function(e,t,n){if(null!=t){var r=function(e){if(null!=e)if(n)for(var r=0;r<e.length;r++)t[e[r].name]=e[r];else for(var i in t){for(var s=!1,r=0;r<e.length;r++)if(e[r].name==i&&e[r].type==t[i].type){s=!0;break}s||delete t[i]}},i=this.editorUi.editor.graph.view.getState(e);null!=i&&null!=i.shape&&(i.shape.commonCustomPropAdded||(i.shape.commonCustomPropAdded=!0,i.shape.customProperties=i.shape.customProperties||[],i.cell.vertex?Array.prototype.push.apply(i.shape.customProperties,Editor.commonVertexProperties):Array.prototype.push.apply(i.shape.customProperties,Editor.commonEdgeProperties)),r(i.shape.customProperties)),e=e.getAttribute("customProperties");if(null!=e)try{r(JSON.parse(e))}catch(s){}}};var l=StyleFormatPanel.prototype.init;StyleFormatPanel.prototype.init=function(){var e=this.format.createSelectionState();"image"!=e.style.shape&&this.container.appendChild(this.addStyles(this.createPanel())),l.apply(this,arguments);if(Editor.enableCustomProperties){for(var t={},n=e.vertices,r=e.edges,i=0;i<n.length;i++)this.findCommonProperties(n[i],t,0==i);for(i=0;i<r.length;i++)this.findCommonProperties(r[i],t,0==n.length&&0==i);0<Object.getOwnPropertyNames(t).length&&this.container.appendChild(this.addProperties(this.createPanel(),t,e))}};var c=StyleFormatPanel.prototype.addStyleOps;StyleFormatPanel.prototype.addStyleOps=function(e){var t=mxUtils.button(mxResources.get("copyStyle"),mxUtils.bind(this,function(e){this.editorUi.actions.get("copyStyle").funct()}));return t.setAttribute("title",mxResources.get("copyStyle")+" ("+this.editorUi.actions.get("copyStyle").shortcut+")"),t.style.marginBottom="2px",t.style.width="100px",t.style.marginRight="2px",e.appendChild(t),t=mxUtils.button(mxResources.get("pasteStyle"),mxUtils.bind(this,function(e){this.editorUi.actions.get("pasteStyle").funct()})),t.setAttribute("title",mxResources.get("pasteStyle")+" ("+this.editorUi.actions.get("pasteStyle").shortcut+")"),t.style.marginBottom="2px",t.style.width="100px",e.appendChild(t),mxUtils.br(e),c.apply(this,arguments)},EditorUi.prototype.propertiesCollapsed=!0,StyleFormatPanel.prototype.addProperties=function(e,t,n){function r(e,t,n,r){c.getModel().beginUpdate();try{var i=[],s=[];if(null!=n.index){for(var o=[],u=n.parentRow.nextSibling;u&&u.getAttribute("data-pName")==e;)o.push(u.getAttribute("data-pValue")),u=u.nextSibling;n.index<o.length?null!=r?o.splice(r,1):o[n.index]=t:o.push(t),null!=n.size&&o.length>n.size&&(o=o.slice(0,n.size)),t=o.join(","),null!=n.countProperty&&(c.setCellStyles(n.countProperty,o.length,c.getSelectionCells()),i.push(n.countProperty),s.push(o.length))}c.setCellStyles(e,t,c.getSelectionCells()),i.push(e),s.push(t);if(null!=n.dependentProps)for(e=0;e<n.dependentProps.length;e++){var a=n.dependentPropsDefVal[e],f=n.dependentPropsVals[e];if(f.length>t)f=f.slice(0,t);else for(var h=f.length;h<t;h++)f.push(a);f=f.join(","),c.setCellStyles(n.dependentProps[e],f,c.getSelectionCells()),i.push(n.dependentProps[e]),s.push(f)}l.editorUi.fireEvent(new mxEventObject("styleChanged","keys",i,"values",s,"cells",c.getSelectionCells()))}finally{c.getModel().endUpdate()}}function i(t,n,r){var i=mxUtils.getOffset(e,!0),s=mxUtils.getOffset(t,!0);n.style.position="absolute",n.style.left=s.x-i.x+"px",n.style.top=s.y-i.y+"px",n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight-(r?4:0)+"px",n.style.zIndex=5}function s(e,t,n){var i=document.createElement("div");return i.style.width="32px",i.style.height="4px",i.style.margin="2px",i.style.border="1px solid black",i.style.background=t&&"none"!=t?t:"url('"+Dialog.prototype.noColorImage+"')",btn=mxUtils.button("",mxUtils.bind(l,function(s){this.editorUi.pickColor(t,function(t){i.style.background="none"==t?"url('"+Dialog.prototype.noColorImage+"')":t,r(e,t,n)}),mxEvent.consume(s)})),btn.style.height="12px",btn.style.width="40px",btn.className="geColorBtn",btn.appendChild(i),btn}function o(e,t,n,i,s,o,u){return null!=t&&(t=t.split(","),h.push({name:e,values:t,type:n,defVal:i,countProperty:s,parentRow:o,isDeletable:!0,flipBkg:u})),btn=mxUtils.button("+",mxUtils.bind(l,function(t){for(var a=o,l=0;null!=a.nextSibling;){if(a.nextSibling.getAttribute("data-pName")!=e)break;a=a.nextSibling,l++}var c={type:n,parentRow:o,index:l,isDeletable:!0,defVal:i,countProperty:s},l=f(e,"",c,0==l%2,u);r(e,i,c),a.parentNode.insertBefore(l,a.nextSibling),mxEvent.consume(t)})),btn.style.height="16px",btn.style.width="25px",btn.className="geColorBtn",btn}function u(e,t,n,r,i,s,o){if(0<i){var u=Array(i);t=null!=t?t.split(","):[];for(var a=0;a<i;a++)u[a]=null!=t[a]?t[a]:null!=r?r:"";h.push({name:e,values:u,type:n,defVal:r,parentRow:s,flipBkg:o,size:i})}return document.createElement("div")}function a(e,t,n){var i=document.createElement("input");return i.type="checkbox",i.checked="1"==t,mxEvent.addListener(i,"change",function(){r(e,i.checked?"1":"0",n)}),i}function f(t,n,f,c,h){var p=f.dispName,d=f.type,v=document.createElement("tr");v.className="gePropRow"+(h?"Dark":"")+(c?"Alt":"")+" gePropNonHeaderRow",v.setAttribute("data-pName",t),v.setAttribute("data-pValue",n),c=!1,null!=f.index&&(v.setAttribute("data-index",f.index),p=(null!=p?p:"")+"["+f.index+"]",c=!0);var m=document.createElement("td");m.className="gePropRowCell",m.innerHTML=mxUtils.htmlEntities(mxResources.get(p,null,p)),c&&(m.style.textAlign="right"),v.appendChild(m),m=document.createElement("td"),m.className="gePropRowCell";if("color"==d)m.appendChild(s(t,n,f));else if("bool"==d||"boolean"==d)m.appendChild(a(t,n,f));else if("enum"==d){var g=f.enumList;for(h=0;h<g.length;h++)if(p=g[h],p.val==n){m.innerHTML=mxUtils.htmlEntities(mxResources.get(p.dispName,null,p.dispName));break}mxEvent.addListener(m,"click",mxUtils.bind(l,function(){var s=document.createElement("select");i(m,s);for(var o=0;o<g.length;o++){var u=g[o],a=document.createElement("option");a.value=mxUtils.htmlEntities(u.val),a.innerHTML=mxUtils.htmlEntities(mxResources.get(u.dispName,null,u.dispName)),s.appendChild(a)}s.value=n,e.appendChild(s),mxEvent.addListener(s,"change",function(){var e=mxUtils.htmlEntities(s.value);r(t,e,f)}),s.focus(),mxEvent.addListener(s,"blur",function(){e.removeChild(s)})}))}else"dynamicArr"==d?m.appendChild(o(t,n,f.subType,f.subDefVal,f.countProperty,v,h)):"staticArr"==d?m.appendChild(u(t,n,f.subType,f.subDefVal,f.size,v,h)):(m.innerHTML=n,mxEvent.addListener(m,"click",mxUtils.bind(l,function(){function s(){var e=o.value,e=0==e.length&&"string"!=d?0:e;f.allowAuto&&("auto"==e.trim().toLowerCase()?(e="auto",d="string"):(e=parseFloat(e),e=isNaN(e)?0:e)),null!=f.min&&e<f.min?e=f.min:null!=f.max&&e>f.max&&(e=f.max),e=mxUtils.htmlEntities(("int"==d?parseInt(e):e)+""),r(t,e,f)}var o=document.createElement("input");i(m,o,!0),o.value=n,o.className="gePropEditor","int"!=d&&"float"!=d||f.allowAuto||(o.type="number",o.step="int"==d?"1":"any",null!=f.min&&(o.min=parseFloat(f.min)),null!=f.max&&(o.max=parseFloat(f.max))),e.appendChild(o),mxEvent.addListener(o,"keypress",function(e){13==e.keyCode&&s()}),o.focus(),mxEvent.addListener(o,"blur",function(){s()})})));return f.isDeletable&&(h=mxUtils.button("-",mxUtils.bind(l,function(e){r(t,"",f,f.index),mxEvent.consume(e)})),h.style.height="16px",h.style.width="25px",h.style["float"]="right",h.className="geColorBtn",m.appendChild(h)),v.appendChild(m),v}var l=this,c=this.editorUi.editor.graph,h=[];e.style.position="relative",e.style.padding="0";var p=document.createElement("table");p.style.whiteSpace="nowrap",p.style.width="100%";var d=document.createElement("tr");d.className="gePropHeader";var v=document.createElement("th");v.className="gePropHeaderCell";var m=document.createElement("img");m.src=Sidebar.prototype.expandedImage,v.appendChild(m),mxUtils.write(v,mxResources.get("property")),d.style.cursor="pointer";var g=function(){var t=p.querySelectorAll(".gePropNonHeaderRow"),n;if(l.editorUi.propertiesCollapsed){m.src=Sidebar.prototype.collapsedImage,n="none";for(var r=e.childNodes.length-1;0<=r;r--)try{var i=e.childNodes[r],s=i.nodeName.toUpperCase();"INPUT"!=s&&"SELECT"!=s||e.removeChild(i)}catch(o){}}else m.src=Sidebar.prototype.expandedImage,n="";for(r=0;r<t.length;r++)t[r].style.display=n};mxEvent.addListener(d,"click",function(){l.editorUi.propertiesCollapsed=!l.editorUi.propertiesCollapsed,g()}),d.appendChild(v),v=document.createElement("th"),v.className="gePropHeaderCell",v.innerHTML=mxResources.get("value"),d.appendChild(v),p.appendChild(d);var y=!1,b=!1,w;for(w in t)if(d=t[w],"function"!=typeof d.isVisible||d.isVisible(n)){var E=null!=n.style[w]?mxUtils.htmlEntities(n.style[w]+""):d.defVal;if("separator"==d.type)b=!b;else{if("staticArr"==d.type)d.size=parseInt(n.style[d.sizeProperty]||t[d.sizeProperty].defVal)||0;else if(null!=d.dependentProps){for(var S=d.dependentProps,x=[],T=[],v=0;v<S.length;v++){var N=n.style[S[v]];T.push(t[S[v]].subDefVal),x.push(null!=N?N.split(","):[])}d.dependentPropsDefVal=T,d.dependentPropsVals=x}p.appendChild(f(w,E,d,y,b)),y=!y}}for(v=0;v<h.length;v++)for(d=h[v],t=d.parentRow,n=0;n<d.values.length;n++)w=f(d.name,d.values[n],{type:d.type,parentRow:d.parentRow,isDeletable:d.isDeletable,index:n,defVal:d.defVal,countProperty:d.countProperty,size:d.size},0==n%2,d.flipBkg),t.parentNode.insertBefore(w,t.nextSibling),t=w;return e.appendChild(p),g(),e},StyleFormatPanel.prototype.addStyles=function(e){function t(e){function t(e){var t=mxUtils.button("",function(t){r.getModel().beginUpdate();try{var n=r.getSelectionCells();for(t=0;t<n.length;t++){for(var i=r.getModel().getStyle(n[t]),o=0;o<s.length;o++)i=mxUtils.removeStylename(i,s[o]);var u=r.getModel().isVertex(n[t])?r.defaultVertexStyle:r.defaultEdgeStyle;null!=e?(i=mxUtils.setStyle(i,mxConstants.STYLE_FILLCOLOR,e.fill||mxUtils.getValue(u,mxConstants.STYLE_FILLCOLOR,null)),i=mxUtils.setStyle(i,mxConstants.STYLE_STROKECOLOR,e.stroke||mxUtils.getValue(u,mxConstants.STYLE_STROKECOLOR,null)),i=mxUtils.setStyle(i,mxConstants.STYLE_GRADIENTCOLOR,e.gradient||mxUtils.getValue(u,mxConstants.STYLE_GRADIENTCOLOR,null)),r.getModel().isVertex(n[t])&&(i=mxUtils.setStyle(i,mxConstants.STYLE_FONTCOLOR,e.font||mxUtils.getValue(u,mxConstants.STYLE_FONTCOLOR,null)))):(i=mxUtils.setStyle(i,mxConstants.STYLE_FILLCOLOR,mxUtils.getValue(u,mxConstants.STYLE_FILLCOLOR,"#ffffff")),i=mxUtils.setStyle(i,mxConstants.STYLE_STROKECOLOR,mxUtils.getValue(u,mxConstants.STYLE_STROKECOLOR,"#000000")),i=mxUtils.setStyle(i,mxConstants.STYLE_GRADIENTCOLOR,mxUtils.getValue(u,mxConstants.STYLE_GRADIENTCOLOR,null)),r.getModel().isVertex(n[t])&&(i=mxUtils.setStyle(i,mxConstants.STYLE_FONTCOLOR,mxUtils.getValue(u,mxConstants.STYLE_FONTCOLOR,null)))),r.getModel().setStyle(n[t],i)}}finally{r.getModel().endUpdate()}});t.className="geStyleButton",t.style.width="36px",t.style.height="30px",t.style.margin="0px 6px 6px 0px";if(null!=e)null!=e.gradient?mxClient.IS_IE&&(mxClient.IS_QUIRKS||10>document.documentMode)?t.style.filter="progid:DXImageTransform.Microsoft.Gradient(StartColorStr='"+e.fill+"', EndColorStr='"+e.gradient+"', GradientType=0)":t.style.backgroundImage="linear-gradient("+e.fill+" 0px,"+e.gradient+" 100%)":e.fill==mxConstants.NONE?t.style.background="url('"+Dialog.prototype.noColorImage+"')":t.style.backgroundColor=e.fill||mxUtils.getValue(r.defaultVertexStyle,mxConstants.STYLE_FILLCOLOR,"#ffffff"),t.style.border="1px solid "+(e.stroke||mxUtils.getValue(r.defaultVertexStyle,mxConstants.STYLE_STROKECOLOR,"#000000"));else{var n=mxUtils.getValue(r.defaultVertexStyle,mxConstants.STYLE_FILLCOLOR,"#ffffff"),o=mxUtils.getValue(r.defaultVertexStyle,mxConstants.STYLE_STROKECOLOR,"#000000");t.style.backgroundColor=n,t.style.border="1px solid "+o}i.appendChild(t)}i.innerHTML="";for(var n=0;n<e.length;n++)0<n&&0==mxUtils.mod(n,4)&&mxUtils.br(i),t(e[n])}function n(e){mxEvent.addListener(e,"mouseenter",function(){e.style.opacity="1"}),mxEvent.addListener(e,"mouseleave",function(){e.style.opacity="0.5"})}var r=this.editorUi.editor.graph,i=document.createElement("div");i.style.whiteSpace="nowrap",i.style.paddingLeft="24px",i.style.paddingRight="20px",e.style.paddingLeft="16px",e.style.paddingBottom="6px",e.style.position="relative",e.appendChild(i);var s="plain-gray plain-blue plain-green plain-turquoise plain-orange plain-yellow plain-red plain-pink plain-purple gray blue green turquoise orange yellow red pink purple".split(" ");null==this.editorUi.currentScheme&&(this.editorUi.currentScheme=0);var o=document.createElement("div");o.style.cssText="position:absolute;left:10px;top:8px;bottom:8px;width:20px;margin:4px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ4eHh3d3d1dXVxcXF2dnZ2dnZ2dnZxcXF2dnYmb3w1AAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADRJREFUCNdjwACMAmBKaiGYs2oJmLPKAZ3DabU8AMRTXpUKopislqFyVzCAuUZgikkBZjoAcMYLnp53P/UAAAAASUVORK5CYII=);",mxEvent.addListener(o,"click",mxUtils.bind(this,function(){this.editorUi.currentScheme=mxUtils.mod(this.editorUi.currentScheme-1,this.defaultColorSchemes.length),t(this.defaultColorSchemes[this.editorUi.currentScheme])}));var u=document.createElement("div");return u.style.cssText="position:absolute;left:202px;top:8px;bottom:8px;width:20px;margin:4px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYBuwCcAAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADZJREFUCNdjQAOMAmBKaiGY8loF5rKswsZlrVo8AUiFrTICcbIWK8A5DF1gDoMymMPApIAwHwCS0Qx/U7qCBQAAAABJRU5ErkJggg==);",1<this.defaultColorSchemes.length&&(e.appendChild(o),e.appendChild(u)),mxEvent.addListener(u,"click",mxUtils.bind(this,function(){this.editorUi.currentScheme=mxUtils.mod(this.editorUi.currentScheme+1,this.defaultColorSchemes.length),t(this.defaultColorSchemes[this.editorUi.currentScheme])})),n(o),n(u),t(this.defaultColorSchemes[this.editorUi.currentScheme]),e},StyleFormatPanel.prototype.addEditOps=function(e){var t=this.format.getSelectionState(),n=null;1==this.editorUi.editor.graph.getSelectionCount()&&(n=mxUtils.button(mxResources.get("editStyle"),mxUtils.bind(this,function(e){this.editorUi.actions.get("editStyle").funct()})),n.setAttribute("title",mxResources.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")"),n.style.width="202px",n.style.marginBottom="2px",e.appendChild(n));var r=this.editorUi.editor.graph,i=r.view.getState(r.getSelectionCell());return 1==r.getSelectionCount()&&null!=i&&null!=i.shape&&null!=i.shape.stencil?(t=mxUtils.button(mxResources.get("editShape"),mxUtils.bind(this,function(e){this.editorUi.actions.get("editShape").funct()})),t.setAttribute("title",mxResources.get("editShape")),t.style.marginBottom="2px",null==n?t.style.width="202px":(n.style.width="100px",t.style.width="100px",t.style.marginLeft="2px"),e.appendChild(t)):t.image&&(t=mxUtils.button(mxResources.get("editImage"),mxUtils.bind(this,function(e){this.editorUi.actions.get("image").funct()})),t.setAttribute("title",mxResources.get("editImage")),t.style.marginBottom="2px",null==n?t.style.width="202px":(n.style.width="100px",t.style.width="100px",t.style.marginLeft="2px"),e.appendChild(t)),e}}Graph.prototype.defaultThemeName="default-style2",Graph.prototype.lastPasteXml=null,Graph.prototype.pasteCounter=0,Graph.prototype.defaultScrollbars="0"!=urlParams.sb,Graph.prototype.defaultPageVisible="0"!=urlParams.pv,Graph.prototype.shadowId="dropShadow",Graph.prototype.svgShadowColor="#3D4574",Graph.prototype.svgShadowOpacity="0.4",Graph.prototype.svgShadowBlur="1.7",Graph.prototype.svgShadowSize="3",Graph.prototype.edgeMode="move"!=urlParams.edge;var h=Graph.prototype.init;Graph.prototype.init=function(){function e(e){t=e;if(mxClient.IS_QUIRKS||7==document.documentMode||8==document.documentMode)t=mxUtils.clone(e)}h.apply(this,arguments);var t=null;mxEvent.addListener(this.container,"mouseenter",e),mxEvent.addListener(this.container,"mousemove",e),mxEvent.addListener(this.container,"mouseleave",function(e){t=null}),this.isMouseInsertPoint=function(){return null!=t};var n=this.getInsertPoint;this.getInsertPoint=function(){return null!=t?this.getPointForEvent(t):n.apply(this,arguments)};var r=this.layoutManager.getLayout;this.layoutManager.getLayout=function(e){var t=this.graph.view.getState(e),t=null!=t?t.style:this.graph.getCellStyle(e);if(null!=t){if("undefined"!=typeof mxRackContainer&&"rack"==t.childLayout){var n=new mxStackLayout(this.graph,!1);return n.setChildGeometry=function(e,t){t.height=Math.max(t.height,20);if(1<t.height/20){var n=t.height%20;t.height+=10<n?20-n:-n}this.graph.getModel().setGeometry(e,t)},n.fill=!0,n.unitSize=mxRackContainer.unitSize|20,n.marginLeft=t.marginLeft||0,n.marginRight=t.marginRight||0,n.marginTop=t.marginTop||0,n.marginBottom=t.marginBottom||0,n.resizeParent=!1,n}if("undefined"!=typeof mxTableLayout&&"tableLayout"==t.childLayout)return n=new mxTableLayout(this.graph),n.rows=t.tableRows||2,n.columns=t.tableColumns||2,n.colPercentages=t.colPercentages,n.rowPercentages=t.rowPercentages,n.equalColumns="1"==mxUtils.getValue(t,"equalColumns",n.colPercentages?"0":"1"),n.equalRows="1"==mxUtils.getValue(t,"equalRows",n.rowPercentages?"0":"1"),n.resizeParent="1"==mxUtils.getValue(t,"resizeParent","1"),n.border=t.tableBorder||n.border,n.marginLeft=t.marginLeft||0,n.marginRight=t.marginRight||0,n.marginTop=t.marginTop||0,n.marginBottom=t.marginBottom||0,n.autoAddCol="1"==mxUtils.getValue(t,"autoAddCol","0"),n.autoAddRow="1"==mxUtils.getValue(t,"autoAddRow",n.autoAddCol?"0":"1"),n.colWidths=t.colWidths||"100",n.rowHeights=t.rowHeights||"50",n}return r.apply(this,arguments)}};var p=Graph.prototype.isCssTransformsSupported;Graph.prototype.isCssTransformsSupported=function(){return p.apply(this,arguments)&&!mxClient.IS_SF};var d=Graph.prototype.getGlobalVariable;Graph.prototype.getGlobalVariable=function(e){var t=d.apply(this,arguments);if(null==t){if(null==this.globalUrlVars&&null!=urlParams.vars)try{this.globalUrlVars=JSON.parse(decodeURIComponent(urlParams.vars))}catch(n){null!=window.console&&console.log("Error in vars URL parameter: "+n)}null!=this.globalUrlVars&&(t=this.globalUrlVars[e])}return t};var v=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function(){v.apply(this,arguments);if(mxClient.IS_GC&&null!=this.getDrawPane()){var e=this.getDrawPane().parentNode;!this.graph.mathEnabled||mxClient.NO_FO||null!=this.webKitForceRepaintNode&&null!=this.webKitForceRepaintNode.parentNode||"svg"!=this.graph.container.firstChild.nodeName?null==this.webKitForceRepaintNode||this.graph.mathEnabled&&("svg"==this.graph.container.firstChild.nodeName||this.graph.container.firstChild==this.webKitForceRepaintNode)||(null!=this.webKitForceRepaintNode.parentNode&&this.webKitForceRepaintNode.parentNode.removeChild(this.webKitForceRepaintNode),this.webKitForceRepaintNode=null):(this.webKitForceRepaintNode=document.createElement("div"),this.webKitForceRepaintNode.style.cssText="position:absolute;",e.ownerSVGElement.parentNode.insertBefore(this.webKitForceRepaintNode,e.ownerSVGElement))}};var m=Graph.prototype.loadStylesheet;Graph.prototype.loadStylesheet=function(){m.apply(this,arguments),this.currentStyle="default-style2"},Graph.prototype.handleCustomLink=function(e){if("data:action/json,"==e.substring(0,17)&&(e=JSON.parse(e.substring(17)),null!=e.actions)){for(var t=0;t<e.actions.length;t++)if(null!=e.actions[t].open)if(this.isCustomLink(e.actions[t].open)){if(!this.customLinkClicked(e.actions[t].open))return}else this.openLink(e.actions[t].open);this.model.beginUpdate();try{for(t=0;t<e.actions.length;t++)this.handleLinkAction(e.actions[t])}finally{this.model.endUpdate()}}},Graph.prototype.handleLinkAction=function(e){var t=[];null!=e.select&&this.isEnabled()&&(t=this.getCellsForAction(e.select),this.setSelectionCells(t)),null!=e.highlight&&(t=this.getCellsForAction(e.highlight),this.highlightCells(t,e.highlight.color,e.highlight.duration,e.highlight.opacity)),null!=e.toggle&&this.toggleCells(this.getCellsForAction(e.toggle)),null!=e.show&&this.setCellsVisible(this.getCellsForAction(e.show),!0),null!=e.hide&&this.setCellsVisible(this.getCellsForAction(e.hide),!1),null!=e.scroll&&(t=this.getCellsForAction(e.scroll)),0<t.length&&this.scrollCellToVisible(t[0])},Graph.prototype.getCellsForAction=function(e){return this.getCellsById(e.cells).concat(this.getCellsForTags(e.tags))},Graph.prototype.getCellsById=function(e){var t=[];if(null!=e)for(var n=0;n<e.length;n++)if("*"==e[n])var r=this.getDefaultParent(),t=t.concat(this.model.filterDescendants(function(e){return e!=r},r));else{var i=this.model.getCell(e[n]);null!=i&&t.push(i)}return t},Graph.prototype.getCellsForTags=function(e,t,n){var r=[];if(null!=e){t=null!=t?t:this.model.getDescendants(this.model.getRoot()),n=null!=n?n:"tags";for(var i=0;i<t.length;i++)if(this.model.isVertex(t[i])||this.model.isEdge(t[i])){var s=null!=t[i].value&&"object"==typeof t[i].value?mxUtils.trim(t[i].value.getAttribute(n)||""):"",o=!0;if(0<s.length)for(var s=s.toLowerCase().split(" "),u=0;u<e.length&&o;u++)var a=mxUtils.trim(e[u]).toLowerCase(),o=o&&(0==a.length||0<=mxUtils.indexOf(s,a));else o=0==e.length;o&&r.push(t[i])}}return r},Graph.prototype.toggleCells=function(e){this.model.beginUpdate();try{for(var t=0;t<e.length;t++)this.model.setVisible(e[t],!this.model.isVisible(e[t]))}finally{this.model.endUpdate()}},Graph.prototype.setCellsVisible=function(e,t){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)this.model.setVisible(e[n],t)}finally{this.model.endUpdate()}},Graph.prototype.highlightCells=function(e,t,n,r){for(var i=0;i<e.length;i++)this.highlightCell(e[i],t,n,r)},Graph.prototype.highlightCell=function(e,t,n,r){t=null!=t?t:mxConstants.DEFAULT_VALID_COLOR,n=null!=n?n:1e3,e=this.view.getState(e);if(null!=e){var i=Math.max(5,mxUtils.getValue(e.style,mxConstants.STYLE_STROKEWIDTH,1)+4),s=new mxCellHighlight(this,t,i,!1);null!=r&&(s.opacity=r),s.highlight(e),window.setTimeout(function(){null!=s.shape&&(mxUtils.setPrefixedStyle(s.shape.node.style,"transition","all 1200ms ease-in-out"),s.shape.node.style.opacity=0),window.setTimeout(function(){s.destroy()},1200)},n)}},Graph.prototype.addSvgShadow=function(e,t,n){n=null!=n?n:!1;var r=e.ownerDocument,i=null!=r.createElementNS?r.createElementNS(mxConstants.NS_SVG,"filter"):r.createElement("filter");i.setAttribute("id",this.shadowId);var s=null!=r.createElementNS?r.createElementNS(mxConstants.NS_SVG,"feGaussianBlur"):r.createElement("feGaussianBlur");return s.setAttribute("in","SourceAlpha"),s.setAttribute("stdDeviation",this.svgShadowBlur),s.setAttribute("result","blur"),i.appendChild(s),s=null!=r.createElementNS?r.createElementNS(mxConstants.NS_SVG,"feOffset"):r.createElement("feOffset"),s.setAttribute("in","blur"),s.setAttribute("dx",this.svgShadowSize),s.setAttribute("dy",this.svgShadowSize),s.setAttribute("result","offsetBlur"),i.appendChild(s),s=null!=r.createElementNS?r.createElementNS(mxConstants.NS_SVG,"feFlood"):r.createElement("feFlood"),s.setAttribute("flood-color",this.svgShadowColor),s.setAttribute("flood-opacity",this.svgShadowOpacity),s.setAttribute("result","offsetColor"),i.appendChild(s),s=null!=r.createElementNS?r.createElementNS(mxConstants.NS_SVG,"feComposite"):r.createElement("feComposite"),s.setAttribute("in","offsetColor"),s.setAttribute("in2","offsetBlur"),s.setAttribute("operator","in"),s.setAttribute("result","offsetBlur"),i.appendChild(s),s=null!=r.createElementNS?r.createElementNS(mxConstants.NS_SVG,"feBlend"):r.createElement("feBlend"),s.setAttribute("in","SourceGraphic"),s.setAttribute("in2","offsetBlur"),i.appendChild(s),s=e.getElementsByTagName("defs"),0==s.length?(r=null!=r.createElementNS?r.createElementNS(mxConstants.NS_SVG,"defs"):r.createElement("defs"),null!=e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)):r=s[0],r.appendChild(i),n||((t||e.getElementsByTagName("g")[0]).setAttribute("filter","url(#"+this.shadowId+")"),isNaN(parseInt(e.getAttribute("width")))||(e.setAttribute("width",parseInt(e.getAttribute("width"))+6),e.setAttribute("height",parseInt(e.getAttribute("height"))+6))),i},Graph.prototype.setShadowVisible=function(e,t){mxClient.IS_SVG&&(t=null!=t?t:!0,(this.shadowVisible=e)?this.view.getDrawPane().setAttribute("filter","url(#"+this.shadowId+")"):this.view.getDrawPane().removeAttribute("filter"),t&&this.fireEvent(new mxEventObject("shadowVisibleChanged")))},Graph.prototype.selectUnlockedLayer=function(){if(null==this.defaultParent){var e=this.model.getChildCount(this.model.root),t,n=0;do t=this.model.getChildAt(this.model.root,n);while(n++<e&&"1"==mxUtils.getValue(this.getCellStyle(t),"locked","0"));null!=t&&this.setDefaultParent(t)}},mxStencilRegistry.libraries.mockup=[SHAPES_PATH+"/mockup/mxMockupButtons.js"],mxStencilRegistry.libraries.arrows2=[SHAPES_PATH+"/mxArrows.js"],mxStencilRegistry.libraries.atlassian=[STENCIL_PATH+"/atlassian.xml",SHAPES_PATH+"/mxAtlassian.js"],mxStencilRegistry.libraries.bpmn=[SHAPES_PATH+"/bpmn/mxBpmnShape2.js",STENCIL_PATH+"/bpmn.xml"],mxStencilRegistry.libraries.dfd=[SHAPES_PATH+"/mxDFD.js"],mxStencilRegistry.libraries.er=[SHAPES_PATH+"/er/mxER.js"],mxStencilRegistry.libraries.flowchart=[SHAPES_PATH+"/mxFlowchart.js",STENCIL_PATH+"/flowchart.xml"],mxStencilRegistry.libraries.ios=[SHAPES_PATH+"/mockup/mxMockupiOS.js"],mxStencilRegistry.libraries.rackGeneral=[SHAPES_PATH+"/rack/mxRack.js",STENCIL_PATH+"/rack/general.xml"],mxStencilRegistry.libraries.rackF5=[STENCIL_PATH+"/rack/f5.xml"],mxStencilRegistry.libraries.lean_mapping=[SHAPES_PATH+"/mxLeanMap.js",STENCIL_PATH+"/lean_mapping.xml"],mxStencilRegistry.libraries.basic=[SHAPES_PATH+"/mxBasic.js",STENCIL_PATH+"/basic.xml"],mxStencilRegistry.libraries.ios7icons=[STENCIL_PATH+"/ios7/icons.xml"],mxStencilRegistry.libraries.ios7ui=[SHAPES_PATH+"/ios7/mxIOS7Ui.js",STENCIL_PATH+"/ios7/misc.xml"],mxStencilRegistry.libraries.android=[SHAPES_PATH+"/mxAndroid.js",STENCIL_PATH+"/android/android.xml"],mxStencilRegistry.libraries["electrical/transmission"]=[SHAPES_PATH+"/mxElectrical.js",STENCIL_PATH+"/electrical/transmission.xml"],mxStencilRegistry.libraries.infographic=[SHAPES_PATH+"/mxInfographic.js"],mxStencilRegistry.libraries["mockup/buttons"]=[SHAPES_PATH+"/mockup/mxMockupButtons.js"],mxStencilRegistry.libraries["mockup/containers"]=[SHAPES_PATH+"/mockup/mxMockupContainers.js"],mxStencilRegistry.libraries["mockup/forms"]=[SHAPES_PATH+"/mockup/mxMockupForms.js"],mxStencilRegistry.libraries["mockup/graphics"]=[SHAPES_PATH+"/mockup/mxMockupGraphics.js",STENCIL_PATH+"/mockup/misc.xml"],mxStencilRegistry.libraries["mockup/markup"]=[SHAPES_PATH+"/mockup/mxMockupMarkup.js"],mxStencilRegistry.libraries["mockup/misc"]=[SHAPES_PATH+"/mockup/mxMockupMisc.js",STENCIL_PATH+"/mockup/misc.xml"],mxStencilRegistry.libraries["mockup/navigation"]=[SHAPES_PATH+"/mockup/mxMockupNavigation.js",STENCIL_PATH+"/mockup/misc.xml"],mxStencilRegistry.libraries["mockup/text"]=[SHAPES_PATH+"/mockup/mxMockupText.js"],mxStencilRegistry.libraries.floorplan=[SHAPES_PATH+"/mxFloorplan.js",STENCIL_PATH+"/floorplan.xml"],mxStencilRegistry.libraries.bootstrap=[SHAPES_PATH+"/mxBootstrap.js",STENCIL_PATH+"/bootstrap.xml"],mxStencilRegistry.libraries.gmdl=[SHAPES_PATH+"/mxGmdl.js",STENCIL_PATH+"/gmdl.xml"],mxStencilRegistry.libraries.gcp2=[SHAPES_PATH+"/mxGCP2.js",STENCIL_PATH+"/gcp2.xml"],mxStencilRegistry.libraries.cabinets=[SHAPES_PATH+"/mxCabinets.js",STENCIL_PATH+"/cabinets.xml"],mxStencilRegistry.libraries.archimate=[SHAPES_PATH+"/mxArchiMate.js"],mxStencilRegistry.libraries.archimate3=[SHAPES_PATH+"/mxArchiMate3.js"],mxStencilRegistry.libraries.sysml=[SHAPES_PATH+"/mxSysML.js"],mxStencilRegistry.libraries.eip=[SHAPES_PATH+"/mxEip.js",STENCIL_PATH+"/eip.xml"],mxStencilRegistry.libraries.networks=[SHAPES_PATH+"/mxNetworks.js",STENCIL_PATH+"/networks.xml"],mxStencilRegistry.libraries.aws3d=[SHAPES_PATH+"/mxAWS3D.js",STENCIL_PATH+"/aws3d.xml"],mxStencilRegistry.libraries.aws4=[SHAPES_PATH+"/mxAWS4.js",STENCIL_PATH+"/aws4.xml"],mxStencilRegistry.libraries.veeam=[STENCIL_PATH+"/veeam/2d.xml",STENCIL_PATH+"/veeam/3d.xml",STENCIL_PATH+"/veeam/veeam.xml"],mxStencilRegistry.libraries.pid2inst=[SHAPES_PATH+"/pid2/mxPidInstruments.js"],mxStencilRegistry.libraries.pid2misc=[SHAPES_PATH+"/pid2/mxPidMisc.js",STENCIL_PATH+"/pid/misc.xml"],mxStencilRegistry.libraries.pid2valves=[SHAPES_PATH+"/pid2/mxPidValves.js"],mxStencilRegistry.libraries.pidFlowSensors=[STENCIL_PATH+"/pid/flow_sensors.xml"],mxMarker.getPackageForType=function(e){var t=null;return null!=e&&0<e.length&&("ER"==e.substring(0,2)?t="mxgraph.er":"sysML"==e.substring(0,5)&&(t="mxgraph.sysml")),t};var g=mxMarker.createMarker;mxMarker.createMarker=function(e,t,n,r,i,s,o,u,a,f){if(null!=n&&null==mxMarker.markers[n]){var l=this.getPackageForType(n);null!=l&&mxStencilRegistry.getStencil(l)}return g.apply(this,arguments)},PrintDialog.prototype.create=function(e,t){function n(){p.value=Math.max(1,Math.min(u,Math.max(parseInt(p.value),parseInt(h.value)))),h.value=Math.max(1,Math.min(u,Math.min(parseInt(p.value),parseInt(h.value))))}function r(t){function n(t,n,i){var s=t.getGraphBounds(),o=0,u=0,a=A.get(),f=1/t.pageScale,l=g.checked;if(l)var f=parseInt(k.value),c=parseInt(L.value),f=Math.min(a.height*c/(s.height/t.view.scale),a.width*f/(s.width/t.view.scale));else f=parseInt(m.value)/(100*t.pageScale),isNaN(f)&&(r=1/t.pageScale,m.value="100 %");a=mxRectangle.fromRectangle(a),a.width=Math.ceil(a.width*r),a.height=Math.ceil(a.height*r),f*=r,!l&&t.pageVisible?(s=t.getPageLayout(),o-=s.x*a.width,u-=s.y*a.height):l=!0;if(null==n){n=PrintDialog.createPrintPreview(t,f,a,0,o,u,l),n.pageSelector=!1,n.mathEnabled=!1,t=e.getCurrentFile(),null!=t&&(n.title=t.getTitle());var h=n.writeHead;n.writeHead=function(t){h.apply(this,arguments),null!=e.editor.fontCss&&(t.writeln('<style type="text/css">'),t.writeln(e.editor.fontCss),t.writeln("</style>"))};if("undefined"!=typeof MathJax){var p=n.renderPage;n.renderPage=function(e,t,n,r,i,s){var o=mxClient.NO_FO;mxClient.NO_FO=this.graph.mathEnabled&&!this.useForeignObjectForMath?!0:this.originalNoForeignObject;var u=p.apply(this,arguments);return mxClient.NO_FO=o,this.graph.mathEnabled?this.mathEnabled=this.mathEnabled||!0:u.className="geDisableMathJax",u}}n.open(null,null,i,!0)}else{a=t.background;if(null==a||""==a||a==mxConstants.NONE)a="#ffffff";n.backgroundColor=a,n.autoOrigin=l,n.appendGraph(t,f,o,u,i,!0)}return n}var r=parseInt(O.value)/100;isNaN(r)&&(r=1,O.value="100 %");var r=.75*r,s=h.value,o=p.value,u=!l.checked,f=null;u&&(u=s==a&&o==a);if(!u&&null!=e.pages&&e.pages.length){var c=0,u=e.pages.length-1;l.checked||(c=parseInt(s)-1,u=parseInt(o)-1);for(var d=c;d<=u;d++){var v=e.pages[d],s=v==e.currentPage?i:null;if(null==s){var s=e.createTemporaryGraph(i.getStylesheet()),o=!0,c=!1,y=null,b=null;null==v.viewState&&null==v.root&&e.updatePageRoot(v),null!=v.viewState&&(o=v.viewState.pageVisible,c=v.viewState.mathEnabled,y=v.viewState.background,b=v.viewState.backgroundImage),s.background=y,s.backgroundImage=null!=b?new mxImage(b.src,b.width,b.height):null,s.pageVisible=o,s.mathEnabled=c;var w=s.getGlobalVariable;s.getGlobalVariable=function(e){return"page"==e?v.getName():"pagenumber"==e?d+1:w.apply(this,arguments)},document.body.appendChild(s.container),e.updatePageRoot(v),s.model.setRoot(v.root)}f=n(s,f,d!=u),s!=i&&s.container.parentNode.removeChild(s.container)}}else f=n(i);f.mathEnabled&&(u=f.wnd.document,u.writeln('<script type="text/x-mathjax-config">'),u.writeln("MathJax.Hub.Config({"),u.writeln("showMathMenu: false,"),u.writeln('messageStyle: "none",'),u.writeln('jax: ["input/TeX", "input/MathML", "input/AsciiMath", "output/HTML-CSS"],'),u.writeln('extensions: ["tex2jax.js", "mml2jax.js", "asciimath2jax.js"],'),u.writeln('"HTML-CSS": {'),u.writeln("imageFont: null"),u.writeln("},"),u.writeln("TeX: {"),u.writeln('extensions: ["AMSmath.js", "AMSsymbols.js", "noErrors.js", "noUndefined.js"]'),u.writeln("},"),u.writeln("tex2jax: {"),u.writeln('	ignoreClass: "geDisableMathJax"'),u.writeln("},"),u.writeln("asciimath2jax: {"),u.writeln('	ignoreClass: "geDisableMathJax"'),u.writeln("}"),u.writeln("});"),t&&(u.writeln("MathJax.Hub.Queue(function () {"),u.writeln("window.print();"),u.writeln("});")),u.writeln("</script>"),u.writeln('<script type="text/javascript" src="https://math.draw.io/current/MathJax.js"></script>')),f.closeDocument(),!f.mathEnabled&&t&&PrintDialog.printPreview(f)}var i=e.editor.graph,s=document.createElement("div"),o=document.createElement("h3");o.style.width="100%",o.style.textAlign="center",o.style.marginTop="0px",mxUtils.write(o,t||mxResources.get("print")),s.appendChild(o);var u=1,a=1,f=document.createElement("div");f.style.cssText="border-bottom:1px solid lightGray;padding-bottom:12px;margin-bottom:12px;";var l=document.createElement("input");l.style.cssText="margin-right:8px;margin-bottom:8px;",l.setAttribute("value","all"),l.setAttribute("type","radio"),l.setAttribute("name","pages-printdialog"),f.appendChild(l),o=document.createElement("span"),mxUtils.write(o,mxResources.get("printAllPages")),f.appendChild(o),mxUtils.br(f);var c=l.cloneNode(!0);l.setAttribute("checked","checked"),c.setAttribute("value","range"),f.appendChild(c),o=document.createElement("span"),mxUtils.write(o,mxResources.get("pages")+":"),f.appendChild(o);var h=document.createElement("input");h.style.cssText="margin:0 8px 0 8px;",h.setAttribute("value","1"),h.setAttribute("type","number"),h.setAttribute("min","1"),h.style.width="50px",f.appendChild(h),o=document.createElement("span"),mxUtils.write(o,mxResources.get("to")),f.appendChild(o);var p=h.cloneNode(!0);f.appendChild(p),mxEvent.addListener(h,"focus",function(){c.checked=!0}),mxEvent.addListener(p,"focus",function(){c.checked=!0}),mxEvent.addListener(h,"change",n),mxEvent.addListener(p,"change",n);if(null!=e.pages&&(u=e.pages.length,null!=e.currentPage))for(o=0;o<e.pages.length;o++)if(e.currentPage==e.pages[o]){a=o+1,h.value=a,p.value=a;break}h.setAttribute("max",u),p.setAttribute("max",u),1<u&&s.appendChild(f);var d=document.createElement("div");d.style.marginBottom="10px";var v=document.createElement("input");v.style.marginRight="8px",v.setAttribute("value","adjust"),v.setAttribute("type","radio"),v.setAttribute("name","printZoom"),d.appendChild(v),o=document.createElement("span"),mxUtils.write(o,mxResources.get("adjustTo")),d.appendChild(o);var m=document.createElement("input");m.style.cssText="margin:0 8px 0 8px;",m.setAttribute("value","100 %"),m.style.width="50px",d.appendChild(m),mxEvent.addListener(m,"focus",function(){v.checked=!0}),s.appendChild(d);var f=f.cloneNode(!1),g=v.cloneNode(!0);g.setAttribute("value","fit"),v.setAttribute("checked","checked"),o=document.createElement("div"),o.style.cssText="display:inline-block;height:100%;vertical-align:top;padding-top:2px;",o.appendChild(g),f.appendChild(o),d=document.createElement("table"),d.style.display="inline-block";var y=document.createElement("tbody"),b=document.createElement("tr"),w=b.cloneNode(!0),E=document.createElement("td"),S=E.cloneNode(!0),x=E.cloneNode(!0),T=E.cloneNode(!0),N=E.cloneNode(!0),C=E.cloneNode(!0);E.style.textAlign="right",T.style.textAlign="right",mxUtils.write(E,mxResources.get("fitTo"));var k=document.createElement("input");k.style.cssText="margin:0 8px 0 8px;",k.setAttribute("value","1"),k.setAttribute("min","1"),k.setAttribute("type","number"),k.style.width="40px",S.appendChild(k),o=document.createElement("span"),mxUtils.write(o,mxResources.get("fitToSheetsAcross")),x.appendChild(o),mxUtils.write(T,mxResources.get("fitToBy"));var L=k.cloneNode(!0);N.appendChild(L),mxEvent.addListener(k,"focus",function(){g.checked=!0}),mxEvent.addListener(L,"focus",function(){g.checked=!0}),o=document.createElement("span"),mxUtils.write(o,mxResources.get("fitToSheetsDown")),C.appendChild(o),b.appendChild(E),b.appendChild(S),b.appendChild(x),w.appendChild(T),w.appendChild(N),w.appendChild(C),y.appendChild(b),y.appendChild(w),d.appendChild(y),f.appendChild(d),s.appendChild(f),f=document.createElement("div"),o=document.createElement("div"),o.style.fontWeight="bold",o.style.marginBottom="12px",mxUtils.write(o,mxResources.get("paperSize")),f.appendChild(o),o=document.createElement("div"),o.style.marginBottom="12px";var A=PageSetupDialog.addPageFormatPanel(o,"printdialog",e.editor.graph.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT);f.appendChild(o),o=document.createElement("span"),mxUtils.write(o,mxResources.get("pageScale")),f.appendChild(o);var O=document.createElement("input");O.style.cssText="margin:0 8px 0 8px;",O.setAttribute("value","100 %"),O.style.width="60px",f.appendChild(O),s.appendChild(f),o=document.createElement("div"),o.style.cssText="text-align:right;margin:48px 0 0 0;",f=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()}),f.className="geBtn",e.editor.cancelFirst&&o.appendChild(f),e.isOffline()||(d=mxUtils.button(mxResources.get("help"),function(){i.openLink("https://desk.draw.io/support/solutions/articles/16000048947")}),d.className="geBtn",o.appendChild(d)),PrintDialog.previewEnabled&&(d=mxUtils.button(mxResources.get("preview"),function(){e.hideDialog(),r(!1)}),d.className="geBtn",o.appendChild(d)),d=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){e.hideDialog(),r(!0)}),d.className="geBtn gePrimaryBtn",o.appendChild(d),e.editor.cancelFirst||o.appendChild(f),s.appendChild(o),this.container=s};var y=ChangePageSetup.prototype.execute;ChangePageSetup.prototype.execute=function(){null==this.page&&(this.page=this.ui.currentPage),this.page!=this.ui.currentPage?null!=this.page.viewState&&(this.ignoreColor||(this.page.viewState.background=this.color),this.ignoreImage||(this.page.viewState.backgroundImage=this.image),null!=this.format&&(this.page.viewState.pageFormat=this.format),null!=this.mathEnabled&&(this.page.viewState.mathEnabled=this.mathEnabled),null!=this.shadowVisible&&(this.page.viewState.shadowVisible=this.shadowVisible)):(y.apply(this,arguments),null!=this.mathEnabled&&this.mathEnabled!=this.ui.isMathEnabled()&&(this.ui.setMathEnabled(this.mathEnabled),this.mathEnabled=!this.mathEnabled),null!=this.shadowVisible&&this.shadowVisible!=this.ui.editor.graph.shadowVisible&&(this.ui.editor.graph.setShadowVisible(this.shadowVisible),this.shadowVisible=!this.shadowVisible))}}();var ErrorDialog=function(e,t,n,r,i,s,o,u,a,f,l){a=null!=a?a:!0;var c=document.createElement("div");c.style.textAlign="center";if(null!=t){var h=document.createElement("div");h.style.padding="0px",h.style.margin="0px",h.style.fontSize="18px",h.style.paddingBottom="16px",h.style.marginBottom="16px",h.style.borderBottom="1px solid #c0c0c0",h.style.color="gray",mxUtils.write(h,t),c.appendChild(h)}t=document.createElement("div"),t.style.padding="6px",t.innerHTML=n,c.appendChild(t),n=document.createElement("div"),n.style.marginTop="16px",n.style.textAlign="center",null!=s&&(t=mxUtils.button(mxResources.get("tryAgain"),function(){e.hideDialog(),s()}),t.className="geBtn",n.appendChild(t),n.style.textAlign="center"),null!=f&&(f=mxUtils.button(f,function(){null!=l&&l()}),f.className="geBtn",n.appendChild(f));var p=mxUtils.button(r,function(){a&&e.hideDialog(),null!=i&&i()});p.className="geBtn",n.appendChild(p),null!=o&&(r=mxUtils.button(o,function(){a&&e.hideDialog(),null!=u&&u()}),r.className="geBtn gePrimaryBtn",n.appendChild(r)),this.init=function(){p.focus()},c.appendChild(n),this.container=c};(function(){var e=new mxObjectCodec(new ChangePageSetup,["ui","previousColor","previousImage","previousFormat"]);e.beforeDecode=function(e,t,n){return n.ui=e.ui,t},e.afterDecode=function(e,t,n){return n.previousColor=n.color,n.previousImage=n.image,n.previousFormat=n.format,null!=n.foldingEnabled&&(n.foldingEnabled=!n.foldingEnabled),null!=n.mathEnabled&&(n.mathEnabled=!n.mathEnabled),null!=n.shadowVisible&&(n.shadowVisible=!n.shadowVisible),n},mxCodecRegistry.register(e)})(),function(){EditorUi.VERSION="@DRAWIO-VERSION@",EditorUi.compactUi="atlas"!=uiTheme,EditorUi.enableLogging="1"!=urlParams.stealth&&/.*\.draw\.io$/.test(window.location.hostname)&&"support.draw.io"!=window.location.hostname,EditorUi.lastErrorMessage=null,EditorUi.ignoredAnonymizedChars="\n	`~!@#$%^&*()_+{}|:\"<>?-=[];'./,\n	",EditorUi.logError=function(e,t,n,r,i){if("1"==urlParams.dev)EditorUi.debug("logError",e,t,n,r,i);else if(EditorUi.enableLogging)try{if(e!=EditorUi.lastErrorMessage&&(null==e||null==t||-1==e.indexOf("Script error")&&-1==e.indexOf("extension"))&&null!=e&&0>e.indexOf("DocumentClosedError")){EditorUi.lastErrorMessage=e;var s=0<=e.indexOf("NetworkError")||0<=e.indexOf("SecurityError")||0<=e.indexOf("NS_ERROR_FAILURE")||0<=e.indexOf("out of memory")?"CONFIG":"SEVERE",o=null!=window.DRAWIO_LOG_URL?window.DRAWIO_LOG_URL:"";(new Image).src=o+"/log?severity="+s+"&v="+encodeURIComponent(EditorUi.VERSION)+"&msg=clientError:"+encodeURIComponent(e)+":url:"+encodeURIComponent(window.location.href)+":lnum:"+encodeURIComponent(n)+(null!=r?":colno:"+encodeURIComponent(r):"")+(null!=i&&null!=i.stack?"&stack="+encodeURIComponent(i.stack):"")}}catch(u){}},EditorUi.logEvent=function(e){if("1"==urlParams.dev)EditorUi.debug("logEvent",e);else if(EditorUi.enableLogging)try{var t=null!=window.DRAWIO_LOG_URL?window.DRAWIO_LOG_URL:"";(new Image).src=t+"/images/1x1.png?v="+encodeURIComponent(EditorUi.VERSION)+(null!=e?"&data="+encodeURIComponent(JSON.stringify(e)):"")}catch(n){}},EditorUi.sendReport=function(e,t){if("1"==urlParams.dev)EditorUi.debug("sendReport",e);else if(EditorUi.enableLogging)try{t=null!=t?t:5e4,e.length>t&&(e=e.substring(0,t)+"\n...[SHORTENED]"),mxUtils.post("/email","version="+encodeURIComponent(EditorUi.VERSION)+"&url="+encodeURIComponent(window.location.href)+"&data="+encodeURIComponent(e))}catch(n){}},EditorUi.debug=function(){if(null!=window.console&&"1"==urlParams.test){for(var e=[(new Date).toISOString()],t=0;t<arguments.length;t++)e.push(arguments[t]);console.log.apply(console,e)}},EditorUi.templateFile=TEMPLATE_PATH+"/index.xml",EditorUi.enablePlantUml=EditorUi.enableLogging,EditorUi.isElectronApp=null!=window&&null!=window.process&&null!=window.process.versions&&null!=window.process.versions.electron,EditorUi.scratchpadHelpLink="https://desk.draw.io/support/solutions/articles/16000042367",EditorUi.prototype.emptyDiagramXml='<mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/></root></mxGraphModel>',EditorUi.prototype.emptyLibraryXml="<mxlibrary>[]</mxlibrary>",EditorUi.prototype.mode=null,EditorUi.prototype.sidebarFooterHeight=36,EditorUi.prototype.defaultCustomShapeStyle="shape=stencil(tZRtTsQgEEBPw1+DJR7AoN6DbWftpAgE0Ortd/jYRGq72R+YNE2YgTePloEJGWblgA18ZuKFDcMj5/Sm8boZq+BgjCX4pTyqk6ZlKROitwusOMXKQDODx5iy4pXxZ5qTHiFHawxB0JrQZH7lCabQ0Fr+XWC1/E8zcsT/gAi+Subo2/3Mh6d/oJb5nU1b5tW7r2knautaa3T+U32o7f7vZwpJkaNDLORJjcu7t59m2jXxqX9un+tt022acsfmoKaQZ+vhhswZtS6Ne/ThQGt0IV0N3Yyv6P3CeT9/tHO0XFI5cAE=);whiteSpace=wrap;html=1;",EditorUi.prototype.svgBrokenImage=Graph.createSvgImage(10,10,'<rect x="0" y="0" width="10" height="10" stroke="#000" fill="transparent"/><path d="m 0 0 L 10 10 L 0 10 L 10 0" stroke="#000" fill="transparent"/>'),EditorUi.prototype.crossOriginImages=!mxClient.IS_IE,EditorUi.prototype.maxBackgroundSize=1600,EditorUi.prototype.maxImageSize=520,EditorUi.prototype.resampleThreshold=1e5,EditorUi.prototype.maxImageBytes=1e6,EditorUi.prototype.maxBackgroundBytes=25e5,EditorUi.prototype.currentFile=null,EditorUi.prototype.printPdfExport=!1,EditorUi.prototype.pdfPageExport=!0,EditorUi.prototype.formatEnabled="0"!=urlParams.format,EditorUi.prototype.insertTemplateEnabled=!0,EditorUi.prototype.closableScratchpad=!0,function(){EditorUi.prototype.useCanvasForExport=!1,EditorUi.prototype.jpgSupported=!1;try{var e=document.createElement("canvas");EditorUi.prototype.canvasSupported=!!e.getContext&&!!e.getContext("2d")}catch(t){}try{var n=document.createElement("canvas"),r=new Image;r.onload=function(){try{n.getContext("2d").drawImage(r,0,0);var e=n.toDataURL("image/png");EditorUi.prototype.useCanvasForExport=null!=e&&6<e.length}catch(t){}},r.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1px" height="1px" version="1.1"><foreignObject pointer-events="all" width="1" height="1"><div xmlns="http://www.w3.org/1999/xhtml"></div></foreignObject></svg>')))}catch(t){}try{n=document.createElement("canvas"),n.width=n.height=1;var i=n.toDataURL("image/jpeg");EditorUi.prototype.jpgSupported=null!==i.match("image/jpeg")}catch(t){}}(),EditorUi.prototype.openLink=function(e,t,n){return this.editor.graph.openLink(e,t,n)},EditorUi.prototype.showSplash=function(e){},EditorUi.prototype.getLocalData=function(e,t){t(localStorage.getItem(e))},EditorUi.prototype.setLocalData=function(e,t,n){localStorage.setItem(e,t),null!=n&&n()},EditorUi.prototype.removeLocalData=function(e,t){localStorage.removeItem(e),t()},EditorUi.prototype.setMathEnabled=function(e){this.editor.graph.mathEnabled=e,this.editor.updateGraphComponents(),this.editor.graph.refresh(),this.fireEvent(new mxEventObject("mathEnabledChanged"))},EditorUi.prototype.isMathEnabled=function(e){return this.editor.graph.mathEnabled},EditorUi.prototype.isAppCache=function(){return"1"==urlParams.appcache||this.isOfflineApp()},EditorUi.prototype.isOfflineApp=function(){return"1"==urlParams.offline},EditorUi.prototype.isOffline=function(){return this.isOfflineApp()||!navigator.onLine||"1"==urlParams.stealth},EditorUi.prototype.createSpinner=function(e,t,n){n=null!=n?n:24;var r=new Spinner({lines:12,length:n,width:Math.round(n/3),radius:Math.round(n/2),rotate:0,color:"dark"==uiTheme?"#c0c0c0":"#000",speed:1.5,trail:60,shadow:!1,hwaccel:!1,zIndex:2e9}),i=r.spin;r.spin=function(n,s){var o=!1;return this.active||(i.call(this,n),this.active=!0,null!=s&&(o=document.createElement("div"),o.style.position="absolute",o.style.whiteSpace="nowrap",o.style.background="#4B4243",o.style.color="white",o.style.fontFamily="Helvetica, Arial",o.style.fontSize="9pt",o.style.padding="6px",o.style.paddingLeft="10px",o.style.paddingRight="10px",o.style.zIndex=2e9,o.style.left=Math.max(0,e)+"px",o.style.top=Math.max(0,t+70)+"px",mxUtils.setPrefixedStyle(o.style,"borderRadius","6px"),mxUtils.setPrefixedStyle(o.style,"transform","translate(-50%,-50%)"),"dark"!=uiTheme&&mxUtils.setPrefixedStyle(o.style,"boxShadow","2px 2px 3px 0px #ddd"),"..."!=s.substring(s.length-3,s.length)&&(s+="..."),o.innerHTML=s,n.appendChild(o),r.status=o,mxClient.IS_VML&&(null==document.documentMode||8>=document.documentMode)&&(o.style.left=Math.round(Math.max(0,e-o.offsetWidth/2))+"px",o.style.top=Math.round(Math.max(0,t+70-o.offsetHeight/2))+"px")),this.pause=mxUtils.bind(this,function(){var e=function(){};return this.active&&(e=mxUtils.bind(this,function(){this.spin(n,s)})),this.stop(),e}),o=!0),o};var s=r.stop;return r.stop=function(){s.call(this),this.active=!1,null!=r.status&&(r.status.parentNode.removeChild(r.status),r.status=null)},r.pause=function(){return function(){}},r},EditorUi.parsePng=function(e,t,n){function r(e,t){var n=s;return s+=t,e.substring(n,s)}function i(e){return e=r(e,4),e.charCodeAt(3)+(e.charCodeAt(2)<<8)+(e.charCodeAt(1)<<16)+(e.charCodeAt(0)<<24)}var s=0;if(r(e,8)!=String.fromCharCode(137)+"PNG"+String.fromCharCode(13,10,26,10))null!=n&&n();else if(r(e,4),"IHDR"!=r(e,4))null!=n&&n();else{r(e,17);do{n=i(e);var o=r(e,4);if(null!=t&&t(s-8,o,n))break;value=r(e,n),r(e,4);if("IEND"==o)break}while(n)}},EditorUi.prototype.isCompatibleString=function(e){try{var t=mxUtils.parseXml(e),n=this.editor.extractGraphModel(t.documentElement,!0);return null!=n&&0==n.getElementsByTagName("parsererror").length}catch(r){}return!1};var e=EditorUi.prototype.extractGraphModelFromHtml;EditorUi.prototype.extractGraphModelFromHtml=function(t){var n=e.apply(this,arguments);if(null==n)try{var r=t.indexOf("&lt;mxfile ");if(0<=r){var i=t.lastIndexOf("&lt;/mxfile&gt;");i>r&&(n=t.substring(r,i+15).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}else var s=mxUtils.parseXml(t),o=this.editor.extractGraphModel(s.documentElement,null!=this.pages||"hidden"==this.diagramContainer.style.visibility),n=null!=o?mxUtils.getXml(o):""}catch(u){}return n},EditorUi.prototype.validateFileData=function(e){if(null!=e&&0<e.length){var t=e.indexOf('<meta charset="utf-8">');0<=t&&(e=e.slice(0,t)+'<meta charset="utf-8"/>'+e.slice(t+23-1,e.length)),e=this.editor.graph.zapGremlins(e)}return e},EditorUi.prototype.replaceFileData=function(e){e=this.validateFileData(e),e=null!=e&&0<e.length?mxUtils.parseXml(e).documentElement:null;var t=null!=e?this.editor.extractGraphModel(e,!0):null;null!=t&&(e=t);if(null!=e){t=this.editor.graph,t.model.beginUpdate();try{var n=null!=this.pages?this.pages.slice():null,r=e.getElementsByTagName("diagram");if("0"!=urlParams.pages||1<r.length||1==r.length&&r[0].hasAttribute("name")){this.fileNode=e,this.pages=null!=this.pages?this.pages:[];for(var i=r.length-1;0<=i;i--){var s=this.updatePageRoot(new DiagramPage(r[i]));null==s.getName()&&s.setName(mxResources.get("pageWithNumber",[i+1])),t.model.execute(new ChangePage(this,s,0==i?s:null,0))}}else"0"!=urlParams.pages&&null==this.fileNode&&(this.fileNode=e.ownerDocument.createElement("mxfile"),this.currentPage=new DiagramPage(e.ownerDocument.createElement("diagram")),this.currentPage.setName(mxResources.get("pageWithNumber",[1])),t.model.execute(new ChangePage(this,this.currentPage,this.currentPage,0))),this.editor.setGraphXml(e),null!=this.currentPage&&(this.currentPage.root=this.editor.graph.model.root);if(null!=n)for(i=0;i<n.length;i++)t.model.execute(new ChangePage(this,n[i],null))}finally{t.model.endUpdate()}}},EditorUi.prototype.createFileData=function(e,t,n,r,i,s,o,u,a,f){t=null!=t?t:this.editor.graph,i=null!=i?i:!1,a=null!=a?a:!0;var l,c=null;null==n||n.getMode()==App.MODE_DEVICE||n.getMode()==App.MODE_BROWSER?l="_blank":c=l=r;if(null==e)return"";var h=e;if("mxfile"!=h.nodeName.toLowerCase()){var p=t.zapGremlins(mxUtils.getXml(e)),h=t.compress(p);if(t.decompress(h)!=p)return p;p=e.ownerDocument.createElement("diagram"),p.setAttribute("id",Editor.guid()),mxUtils.setTextContent(p,h),h=e.ownerDocument.createElement("mxfile"),h.appendChild(p)}f?(h=h.cloneNode(!0),h.removeAttribute("userAgent"),h.removeAttribute("version"),h.removeAttribute("editor"),h.removeAttribute("type")):(h.removeAttribute("userAgent"),h.removeAttribute("version"),h.removeAttribute("editor"),h.removeAttribute("type"),h.setAttribute("modified",(new Date).toISOString()),h.setAttribute("host",window.location.hostname),h.setAttribute("agent",navigator.userAgent),h.setAttribute("version",EditorUi.VERSION),h.setAttribute("etag",Editor.guid()),e=null!=n?n.getMode():this.mode,null!=e&&h.setAttribute("type",e)),e=mxUtils.getXml(h);if(!s&&!i&&(o||null!=n&&/(\.html)$/i.test(n.getTitle())))e=this.getHtml2(mxUtils.getXml(h),t,null!=n?n.getTitle():null,l,c);else if(s||!i&&null!=n&&/(\.svg)$/i.test(n.getTitle()))null==n||n.getMode()!=App.MODE_DEVICE&&n.getMode()!=App.MODE_BROWSER||(r=null),e=this.getEmbeddedSvg(e,t,r,null,u,a,c);return e},EditorUi.prototype.getXmlFileData=function(e,t){e=null!=e?e:!0,t=null!=t?t:!1;var n=this.editor.getGraphXml(e);if(e&&null!=this.fileNode&&null!=this.currentPage)if(n=this.editor.graph.compress(this.editor.graph.zapGremlins(mxUtils.getXml(n))),mxUtils.setTextContent(this.currentPage.node,n),n=this.fileNode.cloneNode(!1),t)n.appendChild(this.currentPage.node);else for(var r=0;r<this.pages.length;r++){if(this.currentPage!=this.pages[r]&&this.pages[r].needsUpdate){var i=(new mxCodec(mxUtils.createXmlDocument())).encode(new mxGraphModel(this.pages[r].root));this.editor.graph.saveViewState(this.pages[r].viewState,i),mxUtils.setTextContent(this.pages[r].node,this.editor.graph.compressNode(i)),delete this.pages[r].needsUpdate}n.appendChild(this.pages[r].node)}return n},EditorUi.prototype.anonymizeString=function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charAt(n);0<=EditorUi.ignoredAnonymizedChars.indexOf(r)?t.push(r):isNaN(parseInt(r))?r.toLowerCase()!=r?t.push(String.fromCharCode(65+Math.round(25*Math.random()))):r.toUpperCase()!=r?t.push(String.fromCharCode(97+Math.round(25*Math.random()))):/\s/.test(r)?t.push(" "):t.push("?"):t.push(Math.round(9*Math.random()))}return t.join("")},EditorUi.prototype.anonymizePatch=function(e){if(null!=e[EditorUi.DIFF_INSERT])for(var t=0;t<e[EditorUi.DIFF_INSERT].length;t++)try{var n=mxUtils.parseXml(e[EditorUi.DIFF_INSERT][t].data).documentElement.cloneNode(!1);null!=n.getAttribute("name")&&n.setAttribute("name",this.anonymizeString(n.getAttribute("name"))),e[EditorUi.DIFF_INSERT][t].data=mxUtils.getXml(n)}catch(r){e[EditorUi.DIFF_INSERT][t].data=r.message}if(null!=e[EditorUi.DIFF_UPDATE]){for(var i in e[EditorUi.DIFF_UPDATE]){var s=e[EditorUi.DIFF_UPDATE][i];null!=s.name&&(s.name=this.anonymizeString(s.name)),null!=s.cells&&(t=mxUtils.bind(this,function(e){var t=s.cells[e];if(null!=t){for(var n in t)null!=t[n].value&&(t[n].value="["+t[n].value.length+"]"),null!=t[n].style&&(t[n].style="["+t[n].style.length+"]"),null!=t[n].geometry&&(t[n].geometry="["+t[n].geometry.length+"]"),0==Object.keys(t[n]).length&&delete t[n];0==Object.keys(t).length&&delete s.cells[e]}}),t(EditorUi.DIFF_INSERT),t(EditorUi.DIFF_UPDATE),0==Object.keys(s.cells).length&&delete s.cells),0==Object.keys(s).length&&delete e[EditorUi.DIFF_UPDATE][i]}0==Object.keys(e[EditorUi.DIFF_UPDATE]).length&&delete e[EditorUi.DIFF_UPDATE]}return e},EditorUi.prototype.anonymizeAttributes=function(e){if(null!=e.attributes)for(var t=0;t<e.attributes.length;t++)"as"!=e.attributes[t].name&&e.setAttribute(e.attributes[t].name,this.anonymizeString(e.attributes[t].value));if(null!=e.childNodes)for(t=0;t<e.childNodes.length;t++)this.anonymizeAttributes(e.childNodes[t])},EditorUi.prototype.anonymizeNode=function(e){for(var t=e.getElementsByTagName("mxCell"),n=0;n<t.length;n++)null!=t[n].getAttribute("value")&&t[n].setAttribute("value","["+t[n].getAttribute("value").length+"]"),null!=t[n].getAttribute("style")&&t[n].setAttribute("style","["+t[n].getAttribute("style").length+"]"),null!=t[n].parentNode&&"root"!=t[n].parentNode.nodeName&&null!=t[n].parentNode.parentNode&&(t[n].setAttribute("id",t[n].parentNode.getAttribute("id")),t[n].parentNode.parentNode.replaceChild(t[n],t[n].parentNode));t=e.getElementsByTagName("mxGeometry");for(n=0;n<t.length;n++)this.anonymizeAttributes(t[n]);return e},EditorUi.prototype.synchronizeCurrentFile=function(e){var t=this.getCurrentFile();null!=t&&(t.savingFile?this.handleError({message:mxResources.get("busy")}):!e&&t.invalidChecksum?t.handleFileError(null,!0):this.spinner.spin(document.body,mxResources.get("updatingDocument"))&&(t.clearAutosave(),this.editor.setStatus(""),e?t.reloadFile(mxUtils.bind(this,function(){t.handleFileSuccess("manual"==DrawioFile.SYNC)}),mxUtils.bind(this,function(e){t.handleFileError(e,!0)})):t.synchronizeFile(mxUtils.bind(this,function(){t.handleFileSuccess("manual"==DrawioFile.SYNC)}),mxUtils.bind(this,function(e){t.handleFileError(e,!0)}))))},EditorUi.prototype.getFileData=function(e,t,n,r,i,s,o,u,a){i=null!=i?i:!0,o=null!=o?o:this.getXmlFileData(i,null!=s?s:!1),a=null!=a?a:this.getCurrentFile(),s=this.editor.graph;if(null!=this.pages&&this.currentPage!=this.pages[0]&&(t||!e&&null!=a&&/(\.svg)$/i.test(a.getTitle()))){s=this.createTemporaryGraph(s.getStylesheet());var f=s.getGlobalVariable,l=this.pages[0];s.getGlobalVariable=function(e){return"page"==e?l.getName():"pagenumber"==e?1:f.apply(this,arguments)},document.body.appendChild(s.container),s.model.setRoot(l.root)}return e=this.createFileData(o,s,a,window.location.href,e,t,n,r,i,u),s!=this.editor.graph&&s.container.parentNode.removeChild(s.container),e},EditorUi.prototype.getHtml=function(e,t,n,r,i,s){s=null!=s?s:!0;var o=null,u="https://www.draw.io/js/embed-static.min.js";if(null!=t){var o=s?t.getGraphBounds():t.getBoundingBox(t.getSelectionCells()),a=t.view.scale;s=Math.floor(o.x/a-t.view.translate.x),a=Math.floor(o.y/a-t.view.translate.y),o=t.background,null==i&&(t=this.getBasenames().join(";"),0<t.length&&(u="https://www.draw.io/embed.js?s="+t)),e.setAttribute("x0",s),e.setAttribute("y0",a)}return null!=e&&(e.setAttribute("pan","1"),e.setAttribute("zoom","1"),e.setAttribute("resize","0"),e.setAttribute("fit","0"),e.setAttribute("border","20"),e.setAttribute("links","1"),null!=r&&e.setAttribute("edit",r)),null!=i&&(i=i.replace(/&/g,"&amp;")),e=null!=e?this.editor.graph.zapGremlins(mxUtils.getXml(e)):"",r=this.editor.graph.compress(e),this.editor.graph.decompress(r)!=e&&(r=encodeURIComponent(e)),(null==i?'<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]-->\n':"")+"<!DOCTYPE html>\n<html"+(null!=i?' xmlns="http://www.w3.org/1999/xhtml">':">")+"\n<head>\n"+(null==i?null!=n?"<title>"+mxUtils.htmlEntities(n)+"</title>\n":"":"<title>Draw.io Diagram</title>\n")+(null!=i?'<meta http-equiv="refresh" content="0;URL=\''+i+"'\"/>\n":"")+"</head>\n<body"+(null==i&&null!=o&&o!=mxConstants.NONE?' style="background-color:'+o+';">':">")+'\n<div class="mxgraph" style="position:relative;overflow:auto;width:100%;">\n<div style="width:1px;height:1px;overflow:hidden;">'+r+"</div>\n</div>\n"+(null==i?'<script type="text/javascript" src="'+u+'"></script>':'<a style="position:absolute;top:50%;left:50%;margin-top:-128px;margin-left:-64px;" href="'+i+'" target="_blank"><img border="0" src="https://www.draw.io/images/drawlogo128.png"/></a>')+"\n</body>\n</html>\n"},EditorUi.prototype.getHtml2=function(e,t,n,r,i){return null!=i&&(i=i.replace(/&/g,"&amp;")),e={highlight:"#0000ff",nav:this.editor.graph.foldingEnabled,resize:!0,xml:this.editor.graph.zapGremlins(e),toolbar:"pages zoom layers lightbox"},null!=this.pages&&null!=this.currentPage&&(e.page=mxUtils.indexOf(this.pages,this.currentPage)),(null==i?'<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=5,IE=9" ><![endif]-->\n':"")+"<!DOCTYPE html>\n<html"+(null!=i?' xmlns="http://www.w3.org/1999/xhtml">':">")+"\n<head>\n"+(null==i?null!=n?"<title>"+mxUtils.htmlEntities(n)+"</title>\n":"":"<title>Draw.io Diagram</title>\n")+(null!=i?'<meta http-equiv="refresh" content="0;URL=\''+i+"'\"/>\n":"")+'<meta charset="utf-8"/>\n</head>\n<body>\n<div class="mxgraph" style="max-width:100%;border:1px solid transparent;" data-mxgraph="'+mxUtils.htmlEntities(JSON.stringify(e))+'"></div>\n'+(null==i?'<script type="text/javascript" src="https://www.draw.io/js/viewer.min.js"></script>':'<a style="position:absolute;top:50%;left:50%;margin-top:-128px;margin-left:-64px;" href="'+i+'" target="_blank"><img border="0" src="https://www.draw.io/images/drawlogo128.png"/></a>')+"\n</body>\n</html>\n"},EditorUi.prototype.setFileData=function(e){e=this.validateFileData(e),this.pages=this.fileNode=this.currentPage=null,e=null!=e&&0<e.length?mxUtils.parseXml(e).documentElement:null;var t=null!=e?e.getElementsByTagName("parsererror"):null;if(null!=t&&0<t.length)throw e=mxResources.get("invalidOrMissingFile"),t=t[0].getElementsByTagName("div"),0<t.length&&(e=mxUtils.getTextContent(t[0])),Error(e);t=null!=e?this.editor.extractGraphModel(e,!0):null,null!=t&&(e=t);if(null!=e&&"mxfile"==e.nodeName&&(t=e.getElementsByTagName("diagram"),"0"!=urlParams.pages||1<t.length||1==t.length&&t[0].hasAttribute("name"))){this.fileNode=e,this.pages=[];for(e=0;e<t.length;e++){null==t[e].getAttribute("id")&&t[e].setAttribute("id",e);var n=new DiagramPage(t[e]);null==n.getName()&&n.setName(mxResources.get("pageWithNumber",[e+1])),this.pages.push(n)}this.currentPage=this.pages[Math.max(0,Math.min(this.pages.length-1,urlParams.page||0))],e=this.currentPage.node}"0"!=urlParams.pages&&null==this.fileNode&&null!=e&&(this.fileNode=e.ownerDocument.createElement("mxfile"),this.currentPage=new DiagramPage(e.ownerDocument.createElement("diagram")),this.currentPage.setName(mxResources.get("pageWithNumber",[1])),this.pages=[this.currentPage]),this.editor.setGraphXml(e),null!=this.currentPage&&(this.currentPage.root=this.editor.graph.model.root)},EditorUi.prototype.getBaseFilename=function(e){var t=this.getCurrentFile(),t=null!=t&&null!=t.getTitle()?t.getTitle():this.defaultFilename;if(/(\.xml)$/i.test(t)||/(\.html)$/i.test(t)||/(\.svg)$/i.test(t)||/(\.png)$/i.test(t))t=t.substring(0,t.lastIndexOf("."));return!e&&null!=this.pages&&1<this.pages.length&&null!=this.currentPage&&null!=this.currentPage.node.getAttribute("name")&&0<this.currentPage.getName().length&&(t=t+"-"+this.currentPage.getName()),t},EditorUi.prototype.downloadFile=function(e,t,n,r,i,s,o){try{r=null!=r?r:this.editor.graph.isSelectionEmpty();var u=this.getBaseFilename(!i),a=u+"."+e;if("xml"==e){var f='<?xml version="1.0" encoding="UTF-8"?>\n'+(t?mxUtils.getXml(this.editor.getGraphXml(r)):this.getFileData(!0,null,null,null,r,i));this.saveData(a,e,f,"text/xml")}else if("html"==e)f=this.getHtml2(this.getFileData(!0),this.editor.graph,u),this.saveData(a,e,f,"text/html");else if("svg"!=e&&"xmlsvg"!=e||!this.spinner.spin(document.body,mxResources.get("export")))"xmlpng"==e?a=u+".png":"jpeg"==e&&(a=u+".jpg"),this.saveRequest(a,e,mxUtils.bind(this,function(t,n){try{var u=this.editor.graph.pageVisible;null!=s&&(this.editor.graph.pageVisible=s);var a=this.createDownloadRequest(t,e,r,n,o,i);return this.editor.graph.pageVisible=u,a}catch(f){this.handleError(f)}}));else{var l=null,c=mxUtils.bind(this,function(e){e.length<=MAX_REQUEST_SIZE?this.saveData(a,"svg",e,"image/svg+xml"):this.handleError({message:mxResources.get("drawingTooLarge")},mxResources.get("error"),mxUtils.bind(this,function(){mxUtils.popup(l)}))});if("svg"==e){var h=this.editor.graph.background;if(o||h==mxConstants.NONE)h=null;var p=this.editor.graph.getSvg(h,null,null,null,null,r);n&&this.editor.graph.addSvgShadow(p),this.convertImages(p,mxUtils.bind(this,mxUtils.bind(this,function(e){this.spinner.stop(),c('<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+mxUtils.getXml(e))})))}else a=u+".svg",l=this.getFileData(!1,!0,null,mxUtils.bind(this,function(e){this.spinner.stop(),c(e)}),r)}}catch(d){this.handleError(d)}},EditorUi.prototype.createDownloadRequest=function(e,t,n,r,i,s){var o=this.editor.graph.getGraphBounds();n=this.getFileData(!0,null,null,null,n,0==s?!1:"xmlpng"!=t);var u="",a="";if(o.width*o.height>MAX_AREA||n.length>MAX_REQUEST_SIZE)throw{message:mxResources.get("drawingTooLarge")};o="0","pdf"==t&&0==s&&(a="&allPages=1");if("xmlpng"==t&&(o="1",t="png",null!=this.pages&&null!=this.currentPage))for(s=0;s<this.pages.length;s++)if(this.pages[s]==this.currentPage){u="&from="+s;break}return s=this.editor.graph.background,"png"==t&&i&&(s=mxConstants.NONE),new mxXmlRequest(EXPORT_URL,"format="+t+u+a+"&bg="+(null!=s?s:mxConstants.NONE)+"&base64="+r+"&embedXml="+o+"&xml="+encodeURIComponent(n)+(null!=e?"&filename="+encodeURIComponent(e):""))},EditorUi.prototype.setMode=function(e,t){this.mode=e},EditorUi.prototype.loadDescriptor=function(e,t,n){var r=window.location.hash,i=mxUtils.bind(this,function(n){var i=null!=e.data?e.data:"";null!=n&&0<n.length&&(0<i.length&&(i+="\n"),i+=n),n=new LocalFile(this,"csv"!=e.format&&0<i.length?i:this.emptyDiagramXml,null!=urlParams.title?decodeURIComponent(urlParams.title):this.defaultFilename,!0),n.getHash=function(){return r},this.fileLoaded(n),"csv"==e.format&&this.importCsv(i,mxUtils.bind(this,function(e){this.editor.undoManager.clear(),this.editor.setModified(!1),this.editor.setStatus("")}));if(null!=e.update){var s=null!=e.interval?parseInt(e.interval):6e4,o=null,u=mxUtils.bind(this,function(){var t=this.currentPage;mxUtils.post(e.update,"xml="+encodeURIComponent(mxUtils.getXml(this.editor.getGraphXml())),mxUtils.bind(this,function(e){t===this.currentPage&&(200<=e.getStatus()&&300>=e.getStatus()?(this.updateDiagram(e.getText()),a()):this.handleError({message:mxResources.get("error")+" "+e.getStatus()}))}),mxUtils.bind(this,function(e){this.handleError(e)}))}),a=mxUtils.bind(this,function(){window.clearTimeout(o),o=window.setTimeout(u,s)});this.editor.addListener("pageSelected",mxUtils.bind(this,function(){a(),u()})),a(),u()}null!=t&&t()});if(null!=e.url&&0<e.url.length){var s=e.url;/^https?:\/\//.test(s)&&!this.isCorsEnabledForUrl(s)&&(s=PROXY_URL+"?url="+encodeURIComponent(s)),this.loadUrl(s,mxUtils.bind(this,function(e){i(e)}),mxUtils.bind(this,function(e){null!=n&&n(e)}))}else i("")},EditorUi.prototype.updateDiagram=function(e){function t(e){var t=new mxCellOverlay(e.image||i.warningImage,e.tooltip,e.align,e.valign,e.offset);return t.addListener(mxEvent.CLICK,function(t,n){r.alert(e.tooltip)}),t}var n=null,r=this;if(null!=e&&0<e.length&&(n=mxUtils.parseXml(e),e=null!=n?n.documentElement:null,null!=e&&"updates"==e.nodeName)){var i=this.editor.graph,s=i.getModel();s.beginUpdate();var o=null;try{for(e=e.firstChild;null!=e;){if("update"==e.nodeName){var u=s.getCell(e.getAttribute("id"));if(null!=u){try{var a=e.getAttribute("value");if(null!=a){var f=mxUtils.parseXml(a).documentElement;if(null!=f)if("1"==f.getAttribute("replace-value"))s.setValue(u,f);else for(var l=f.attributes,c=0;c<l.length;c++)i.setAttributeForCell(u,l[c].nodeName,0<l[c].nodeValue.length?l[c].nodeValue:null)}}catch(h){null!=window.console&&console.log("Error in value for "+u.id+": "+h)}try{var p=e.getAttribute("style");null!=p&&i.model.setStyle(u,p)}catch(h){null!=window.console&&console.log("Error in style for "+u.id+": "+h)}try{var d=e.getAttribute("icon");if(null!=d){var v=0<d.length?JSON.parse(d):null;null!=v&&v.append||i.removeCellOverlays(u),null!=v&&i.addCellOverlay(u,t(v))}}catch(h){null!=window.console&&console.log("Error in icon for "+u.id+": "+h)}try{var m=e.getAttribute("geometry");if(null!=m){var m=JSON.parse(m),g=i.getCellGeometry(u);if(null!=g){g=g.clone();for(key in m){var y=parseFloat(m[key]);"dx"==key?g.x+=y:"dy"==key?g.y+=y:"dw"==key?g.width+=y:"dh"==key?g.height+=y:g[key]=parseFloat(m[key])}i.model.setGeometry(u,g)}}}catch(h){null!=window.console&&console.log("Error in icon for "+u.id+": "+h)}}}else if("model"==e.nodeName){for(var b=e.firstChild;null!=b&&b.nodeType!=mxConstants.NODETYPE_ELEMENT;)b=b.nextSibling;null!=b&&(new mxCodec(e.firstChild)).decode(b,s)}else if("view"==e.nodeName){if(e.hasAttribute("scale")&&(i.view.scale=parseFloat(e.getAttribute("scale"))),e.hasAttribute("dx")||e.hasAttribute("dy"))i.view.translate=new mxPoint(parseFloat(e.getAttribute("dx")||0),parseFloat(e.getAttribute("dy")||0))}else"fit"==e.nodeName&&(o=e.hasAttribute("max-scale")?parseFloat(e.getAttribute("max-scale")):1);e=e.nextSibling}}finally{s.endUpdate()}null!=o&&this.chromelessResize&&this.chromelessResize(!0,o)}return n},EditorUi.prototype.getCopyFilename=function(e,t){var n=null!=e&&null!=e.getTitle()?e.getTitle():this.defaultFilename,r="",i=n.lastIndexOf(".");0<=i&&(r=n.substring(i),n=n.substring(0,i));if(t)var s=new Date,i=s.getFullYear(),o=s.getMonth()+1,u=s.getDate(),a=s.getHours(),f=s.getMinutes(),s=s.getSeconds(),n=n+(" "+(i+"-"+o+"-"+u+"-"+a+"-"+f+"-"+s));return n=mxResources.get("copyOf",[n])+r},EditorUi.prototype.fileLoaded=function(e){var t=this.getCurrentFile();this.fileLoadedError=null,this.setCurrentFile(null);var n=!1;this.hideDialog(),null!=t&&(t.removeListener(this.descriptorChangedListener),t.close()),this.editor.graph.model.clear(),this.editor.undoManager.clear();var r=mxUtils.bind(this,function(){this.setGraphEnabled(!1),this.setCurrentFile(null),null!=t&&this.updateDocumentTitle(),this.editor.graph.model.clear(),this.editor.undoManager.clear(),this.setBackgroundImage(null),null!=window.location.hash&&0<window.location.hash.length&&(window.location.hash=""),null!=this.fname&&(this.fnameWrapper.style.display="none",this.fname.innerHTML="",this.fname.setAttribute("title",mxResources.get("rename"))),this.editor.setStatus(""),this.updateUi(),this.showSplash()});if(null!=e)try{mxClient.IS_SF&&"min"==uiTheme&&(this.diagramContainer.style.visibility=""),this.setCurrentFile(e),e.addListener("descriptorChanged",this.descriptorChangedListener),e.addListener("contentChanged",this.descriptorChangedListener),e.open(),this.setGraphEnabled(!0),this.setMode(e.getMode()),this.editor.graph.model.prefix=Editor.guid()+"-",this.editor.undoManager.clear(),this.descriptorChanged(),this.updateUi(),e.isEditable()?e.isModified()?(e.addUnsavedStatus(),null!=e.backupPatch&&e.patch([e.backupPatch])):this.editor.setStatus(""):this.editor.setStatus('<span class="geStatusAlert" style="margin-left:8px;">'+mxUtils.htmlEntities(mxResources.get("readOnly"))+"</span>"),!this.editor.isChromelessView()||this.editor.editable?(this.editor.graph.selectUnlockedLayer(),this.showLayersDialog(),this.restoreLibraries(),window.self!==window.top&&window.focus()):this.editor.graph.isLightboxView()&&this.lightboxFit(),this.chromelessResize&&this.chromelessResize(),this.editor.fireEvent(new mxEventObject("fileLoaded")),n=!0,this.isOffline()||null==e.getMode()||EditorUi.logEvent({category:"File",action:"open",label:e.getMode()+"."+e.getSize()});if(this.editor.editable&&this.mode==e.getMode()&&e.getMode()!=App.MODE_DEVICE&&null!=e.getMode())try{this.addRecent({id:e.getHash(),title:e.getTitle(),mode:e.getMode()})}catch(i){}try{mxSettings.setOpenCounter(mxSettings.getOpenCounter()+1),mxSettings.save()}catch(i){}}catch(i){this.fileLoadedError=i,null!=window.console&&console.log("error in fileLoaded:",e,i);if(EditorUi.enableLogging&&!this.isOffline())try{(new Image).src=(null!=window.DRAWIO_LOG_URL?window.DRAWIO_LOG_URL:"")+"/log?v="+encodeURIComponent(EditorUi.VERSION)+"&msg=errorInFileLoaded:url:"+encodeURIComponent(window.location.href)+(null!=i&&null!=i.message?":err:"+encodeURIComponent(i.message):"")+(null!=i&&null!=i.stack?"&stack="+encodeURIComponent(i.stack):"")}catch(s){}this.handleError(i,mxResources.get("errorLoadingFile"),mxUtils.bind(this,function(){null!=urlParams.url&&this.spinner.spin(document.body,mxResources.get("reconnecting"))?window.location.search=this.getSearch(["url"]):null!=t?this.fileLoaded(t):r()}),!0)}else r();return n},EditorUi.prototype.isActive=function(){return this.editor.graph.isEditing()||this.editor.graph.isMouseDown||null!=this.dialog},EditorUi.prototype.runWhenIdle=function(e){if(this.isActive()){var t=mxUtils.bind(this,function(){this.isActive()||(this.editor.graph.removeMouseListener(n),this.editor.removeListener("hideDialog",t),this.editor.graph.removeListener(t),null!=window.requestAnimationFrame?window.requestAnimationFrame(e):e())}),n={mouseDown:function(){},mouseMove:function(){},mouseUp:t};this.editor.graph.addListener(mxEvent.EDITING_STOPPED,t),this.editor.graph.addListener(mxEvent.ESCAPE,t),this.editor.graph.addMouseListener(n),this.editor.addListener("hideDialog",t)}else null!=window.requestAnimationFrame?window.requestAnimationFrame(e):e()},EditorUi.prototype.getHashValueForPages=function(e,t){var n=0,r=new mxGraphModel,i=new mxCodec;null!=t&&(t.byteCount=0,t.attrCount=0,t.eltCount=0,t.nodeCount=0);for(var s=0;s<e.length;s++){this.updatePageRoot(e[s]);var o=e[s].node.cloneNode(!1);o.removeAttribute("name"),o.removeAttribute("pageWidth"),o.removeAttribute("pageHeight"),r.root=e[s].root;var u=i.encode(r);this.editor.graph.saveViewState(e[s].viewState,u,!0),o.appendChild(u),null!=t&&(t.eltCount+=o.getElementsByTagName("*").length,t.nodeCount+=o.getElementsByTagName("mxCell").length),n=(n<<5)-n+this.hashValue(o,function(e,t,n,r){return!r||"mxGeometry"!=e.nodeName&&"mxPoint"!=e.nodeName||"x"!=t&&"y"!=t&&"width"!=t&&"height"!=t?r&&"mxCell"==e.nodeName&&"previous"==t?null:n:Math.round(n)},t)<<0}return n},EditorUi.prototype.hashValue=function(e,t,n){var r=0;if("object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName&&"function"==typeof e.getAttribute){null!=e.nodeName&&(r^=this.hashValue(e.nodeName,t,n));if(null!=e.attributes){null!=n&&(n.attrCount+=e.attributes.length);for(var i=0;i<e.attributes.length;i++){var s=e.attributes[i].name,o=null!=t?t(e,s,e.attributes[i].value,!0):e.attributes[i].value;null!=o&&(r^=this.hashValue(s,t,n)+this.hashValue(o,t,n))}}if(null!=e.childNodes)for(i=0;i<e.childNodes.length;i++)r=(r<<5)-r+this.hashValue(e.childNodes[i],t,n)<<0}else if(null!=e&&"function"!=typeof e){e=String(e),t=0,null!=n&&(n.byteCount+=e.length);for(i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i)<<0;r^=t}return r},EditorUi.prototype.descriptorChanged=function(){},EditorUi.prototype.restoreLibraries=function(){},EditorUi.prototype.saveLibrary=function(e,t,n,r,i,s,o){},EditorUi.prototype.isScratchpadEnabled=function(){return isLocalStorage||mxClient.IS_CHROMEAPP},EditorUi.prototype.toggleScratchpad=function(){this.isScratchpadEnabled()&&(null==this.scratchpad?this.getLocalData(".scratchpad",mxUtils.bind(this,function(e){null==e&&(e=this.emptyLibraryXml),this.loadLibrary(new StorageLibrary(this,e,".scratchpad"))})):this.closeLibrary(this.scratchpad))},EditorUi.prototype.createLibraryDataFromImages=function(e){var t=mxUtils.createXmlDocument(),n=t.createElement("mxlibrary");return mxUtils.setTextContent(n,JSON.stringify(e)),t.appendChild(n),mxUtils.getXml(t)},EditorUi.prototype.closeLibrary=function(e){null!=e&&(this.removeLibrarySidebar(e.getHash()),e.constructor!=LocalLibrary&&mxSettings.removeCustomLibrary(e.getHash()),".scratchpad"==e.title&&(this.scratchpad=null))},EditorUi.prototype.removeLibrarySidebar=function(e){var t=this.sidebar.palettes[e];if(null!=t){for(var n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);delete this.sidebar.palettes[e]}},EditorUi.prototype.repositionLibrary=function(e){var t=this.sidebar.container;if(null==e){var n=this.sidebar.palettes["L.scratchpad"];null==n&&(n=this.sidebar.palettes.search),null!=n&&(e=n[n.length-1].nextSibling)}e=null!=e?e:t.firstChild.nextSibling.nextSibling;var n=t.lastChild,r=n.previousSibling;t.insertBefore(n,e),t.insertBefore(r,n)},EditorUi.prototype.loadLibrary=function(e){var t=mxUtils.parseXml(e.getData());if("mxlibrary"!=t.documentElement.nodeName)throw{message:mxResources.get("notALibraryFile")};var n=JSON.parse(mxUtils.getTextContent(t.documentElement));this.libraryLoaded(e,n,t.documentElement.getAttribute("title"))},EditorUi.prototype.getLibraryStorageHint=function(e){return""},EditorUi.prototype.libraryLoaded=function(e,t,n){if(null!=this.sidebar){e.constructor!=LocalLibrary&&mxSettings.addCustomLibrary(e.getHash()),".scratchpad"==e.title&&(this.scratchpad=e);var r=this.sidebar.palettes[e.getHash()],r=null!=r?r[r.length-1].nextSibling:null;this.removeLibrarySidebar(e.getHash());var i=null,s=mxUtils.bind(this,function(t,n){0==t.length&&e.isEditable()?(null==i&&(i=document.createElement("div"),mxUtils.setPrefixedStyle(i.style,"borderRadius","6px"),i.style.border="3px dotted lightGray",i.style.textAlign="center",i.style.padding="8px",i.style.color="#B3B3B3",mxUtils.write(i,mxResources.get("dragElementsHere"))),n.appendChild(i)):this.addLibraryEntries(t,n)});if(null!=this.sidebar&&null!=t)for(var o=0;o<t.length;o++)mxUtils.bind(this,function(e){var t=e.data;null!=t&&null!=e.title?this.sidebar.addEntry(e.title,mxUtils.bind(this,function(){t=this.convertDataUri(t);var n="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return"fixed"==e.aspect&&(n+="aspect=fixed;"),this.sidebar.createVertexTemplate(n+"image="+t,e.w,e.h,"",e.title||"",!1,!1,!0)})):null!=e.xml&&null!=e.title&&this.sidebar.addEntry(e.title,mxUtils.bind(this,function(){var t=this.stringToCells(this.editor.graph.decompress(e.xml));return this.sidebar.createVertexTemplateFromCells(t,e.w,e.h,e.title||"",!0,!1,!0)}))})(t[o]);n=null!=n&&0<n.length?n:e.getTitle();var u=this.sidebar.addPalette(e.getHash(),n,!0,mxUtils.bind(this,function(e){s(t,e)}));this.repositionLibrary(r);var a=u.parentNode.previousSibling;n=a.getAttribute("title"),null!=n&&0<n.length&&".scratchpad"!=e.title&&a.setAttribute("title",this.getLibraryStorageHint(e)+"\n"+n);var f=document.createElement("div");f.style.position="absolute",f.style.right="0px",f.style.top="0px",f.style.padding="8px",mxClient.IS_QUIRKS||8==document.documentMode||(f.style.backgroundColor="inherit"),a.style.position="relative";var l=document.createElement("img");l.setAttribute("src",Dialog.prototype.closeImage),l.setAttribute("title",mxResources.get("close")),l.setAttribute("valign","absmiddle"),l.setAttribute("border","0"),l.style.margin="0 3px";var c=null;if(".scratchpad"!=e.title||this.closableScratchpad)f.appendChild(l),mxEvent.addListener(l,"click",mxUtils.bind(this,function(t){if(!mxEvent.isConsumed(t)){var n=mxUtils.bind(this,function(){this.closeLibrary(e)});null!=c?this.confirm(mxResources.get("allChangesLost"),null,n,mxResources.get("cancel"),mxResources.get("discardChanges")):n(),mxEvent.consume(t)}}));if(e.isEditable()){var h=this.editor.graph,p=null,d=mxUtils.bind(this,function(n){this.showLibraryDialog(e.getTitle(),u,t,e,e.getMode()),mxEvent.consume(n)}),v=mxUtils.bind(this,function(n){e.setModified(!0),e.isAutosave()?(null!=p&&null!=p.parentNode&&p.parentNode.removeChild(p),p=l.cloneNode(!1),p.setAttribute("src",Editor.spinImage),p.setAttribute("title",mxResources.get("saving")),p.style.cursor="default",p.style.marginRight="2px",p.style.marginTop="-2px",f.insertBefore(p,f.firstChild),a.style.paddingRight=18*f.childNodes.length+"px",this.saveLibrary(e.getTitle(),t,e,e.getMode(),!0,!0,function(){null!=p&&null!=p.parentNode&&(p.parentNode.removeChild(p),a.style.paddingRight=18*f.childNodes.length+"px")})):null==c&&(c=l.cloneNode(!1),c.setAttribute("src",IMAGE_PATH+"/download.png"),c.setAttribute("title",mxResources.get("save")),f.insertBefore(c,f.firstChild),mxEvent.addListener(c,"click",mxUtils.bind(this,function(n){this.saveLibrary(e.getTitle(),t,e,e.getMode(),e.constructor==LocalLibrary,!0,function(){null==c||e.isModified()||(a.style.paddingRight=18*f.childNodes.length+"px",c.parentNode.removeChild(c),c=null)}),mxEvent.consume(n)})),a.style.paddingRight=18*f.childNodes.length+"px")}),m=mxUtils.bind(this,function(e,n,r,s){e=h.cloneCells(mxUtils.sortCells(h.model.getTopmostCells(e)));for(var o=0;o<e.length;o++){var a=h.getCellGeometry(e[o]);null!=a&&a.translate(-n.x,-n.y)}u.appendChild(this.sidebar.createVertexTemplateFromCells(e,n.width,n.height,s||"",!0,!1,!1)),e={xml:this.editor.graph.compress(mxUtils.getXml(this.editor.graph.encodeCells(e))),w:n.width,h:n.height},null!=s&&(e.title=s),t.push(e),v(r),null!=i&&null!=i.parentNode&&0<t.length&&(i.parentNode.removeChild(i),i=null)}),g=mxUtils.bind(this,function(e){if(h.isSelectionEmpty())h.getRubberband().isActive()?(h.getRubberband().execute(e),h.getRubberband().reset()):this.showError(mxResources.get("error"),mxResources.get("nothingIsSelected"),mxResources.get("ok"));else{var t=h.getSelectionCells(),n=h.view.getBounds(t),r=h.view.scale;n.x/=r,n.y/=r,n.width/=r,n.height/=r,n.x-=h.view.translate.x,n.y-=h.view.translate.y,m(t,n)}mxEvent.consume(e)});u.style.border="3px solid transparent",mxEvent.addGestureListeners(u,function(){},mxUtils.bind(this,function(e){h.isMouseDown&&null!=h.panningManager&&null!=h.graphHandler.shape&&(h.graphHandler.shape.node.style.visibility="hidden",null!=i?i.style.border="3px dotted rgb(254, 137, 12)":u.style.border="3px dotted rgb(254, 137, 12)",u.style.cursor="copy",h.panningManager.stop(),h.autoScroll=!1,null!=h.graphHandler.guide&&h.graphHandler.guide.setVisible(!1),null!=h.graphHandler.hint&&(h.graphHandler.hint.style.visibility="hidden"),mxEvent.consume(e))}),mxUtils.bind(this,function(e){h.isMouseDown&&null!=h.panningManager&&null!=h.graphHandler&&(u.style.border="3px solid transparent",null!=i&&(i.style.border="3px dotted lightGray"),u.style.cursor="default",this.sidebar.showTooltips=!0,h.panningManager.stop(),h.graphHandler.reset(),h.isMouseDown=!1,h.autoScroll=!0,g(e),mxEvent.consume(e))})),mxEvent.addListener(u,"mouseleave",mxUtils.bind(this,function(e){h.isMouseDown&&null!=h.graphHandler.shape&&(h.graphHandler.shape.node.style.visibility="visible",u.style.border="3px solid transparent",u.style.cursor="",h.autoScroll=!0,null!=h.graphHandler.guide&&h.graphHandler.guide.setVisible(!0),null!=h.graphHandler.hint&&(h.graphHandler.hint.style.visibility="visible"),null!=i&&(i.style.border="3px dotted lightGray"))})),Graph.fileSupport&&(mxEvent.addListener(u,"dragover",mxUtils.bind(this,function(e){null!=i?i.style.border="3px dotted rgb(254, 137, 12)":u.style.border="3px dotted rgb(254, 137, 12)",e.dataTransfer.dropEffect="copy",u.style.cursor="copy",this.sidebar.hideTooltip(),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(u,"drop",mxUtils.bind(this,function(e){u.style.border="3px solid transparent",u.style.cursor="",null!=i&&(i.style.border="3px dotted lightGray"),0<e.dataTransfer.files.length&&this.importFiles(e.dataTransfer.files,0,0,this.maxImageSize,mxUtils.bind(this,function(n,r,o,a,f,l,c,h,p){if(null!=n&&"image/"==r.substring(0,6))n="shape=image;verticalLabelPosition=bottom;verticalAlign=top;aspect=fixed;image="+this.convertDataUri(n),n=[new mxCell("",new mxGeometry(0,0,f,l),n)],n[0].vertex=!0,m(n,new mxRectangle(0,0,f,l),e,mxEvent.isAltDown(e)?null:c.substring(0,c.lastIndexOf(".")).replace(/_/g," ")),null!=i&&null!=i.parentNode&&0<t.length&&(i.parentNode.removeChild(i),i=null);else{var d=!1,g=mxUtils.bind(this,function(n,r){if(null!=n&&"text/xml"==r){var o=mxUtils.parseXml(n);if("mxlibrary"==o.documentElement.nodeName)try{var a=JSON.parse(mxUtils.getTextContent(o.documentElement));s(a,u),t=t.concat(a),v(e),this.spinner.stop(),d=!0}catch(f){}else if("mxfile"==o.documentElement.nodeName)try{for(var l=o.documentElement.getElementsByTagName("diagram"),o=0;o<l.length;o++){var a=mxUtils.getTextContent(l[o]),c=this.stringToCells(this.editor.graph.decompress(a)),h=this.editor.graph.getBoundingBoxFromGeometry(c);m(c,new mxRectangle(0,0,h.width,h.height),e)}d=!0}catch(f){null!=window.console&&console.log("error in drop handler:",f)}}d||(this.spinner.stop(),this.handleError({message:mxResources.get("errorLoadingFile")})),null!=i&&null!=i.parentNode&&0<t.length&&(i.parentNode.removeChild(i),i=null)});null!=p&&null!=c&&(/(\.v(dx|sdx?))($|\?)/i.test(c)||/(\.vs(x|sx?))($|\?)/i.test(c))?this.importVisio(p,function(e){g(e,"text/xml")},null,c):!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat(n,c)&&null!=p?this.parseFile(p,mxUtils.bind(this,function(e){4==e.readyState&&(this.spinner.stop(),200<=e.status&&299>=e.status?g(e.responseText,"text/xml"):this.handleError({message:mxResources.get(413==e.status?"drawingTooLarge":"invalidOrMissingFile")},mxResources.get("errorLoadingFile")))})):g(n,r)}})),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(u,"dragleave",function(e){null!=i?i.style.border="3px dotted lightGray":(u.style.border="3px solid transparent",u.style.cursor=""),e.stopPropagation(),e.preventDefault()})),l=l.cloneNode(!1),l.setAttribute("src",Editor.editImage),l.setAttribute("title",mxResources.get("edit")),f.insertBefore(l,f.firstChild),mxEvent.addListener(l,"click",d),mxEvent.addListener(u,"dblclick",function(e){mxEvent.getSource(e)==u&&d(e)}),n=l.cloneNode(!1),n.setAttribute("src",Editor.plusImage),n.setAttribute("title",mxResources.get("add")),f.insertBefore(n,f.firstChild),mxEvent.addListener(n,"click",g),this.isOffline()||".scratchpad"!=e.title||null==EditorUi.scratchpadHelpLink||(n=document.createElement("span"),n.setAttribute("title",mxResources.get("help")),n.style.cssText="color:#a3a3a3;text-decoration:none;margin-right:2px;",mxUtils.write(n,"?"),mxEvent.addGestureListeners(n,mxUtils.bind(this,function(e){this.openLink(EditorUi.scratchpadHelpLink),mxEvent.consume(e)})),f.insertBefore(n,f.firstChild))}a.appendChild(f),a.style.paddingRight=18*f.childNodes.length+"px"}},EditorUi.prototype.addLibraryEntries=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=r.data;if(null!=i){var i=this.convertDataUri(i),s="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";"fixed"==r.aspect&&(s+="aspect=fixed;"),t.appendChild(this.sidebar.createVertexTemplate(s+"image="+i,r.w,r.h,"",r.title||"",!1,!1,!0))}else null!=r.xml&&(i=this.stringToCells(this.editor.graph.decompress(r.xml)),0<i.length&&t.appendChild(this.sidebar.createVertexTemplateFromCells(i,r.w,r.h,r.title||"",!0,!1,!0)))}},EditorUi.prototype.getResource=function(e){return null!=e?e[mxLanguage]||e.main:null},EditorUi.prototype.footerHeight=0,"1"==urlParams.offline||EditorUi.isElectronApp||("1"==urlParams.savesidebar&&(Sidebar.prototype.thumbWidth=64,Sidebar.prototype.thumbHeight=64),EditorUi.prototype.createFooter=function(){return document.getElementById("geFooter")}),EditorUi.initTheme=function(){"atlas"==uiTheme?(mxClient.link("stylesheet",STYLE_PATH+"/atlas.css"),"undefined"!=typeof Toolbar&&(Toolbar.prototype.unselectedBackground=mxClient.IS_QUIRKS?"none":"linear-gradient(rgb(255, 255, 255) 0px, rgb(242, 242, 242) 100%)",Toolbar.prototype.selectedBackground="rgb(242, 242, 242)"),Editor.prototype.initialTopSpacing=3,EditorUi.prototype.menubarHeight=41,EditorUi.prototype.toolbarHeight=38,EditorUi.prototype.hsplitPosition=188,Sidebar.prototype.thumbWidth=46,Sidebar.prototype.thumbHeight=46,Sidebar.prototype.thumbPadding=5<=document.documentMode?0:1,Sidebar.prototype.thumbBorder=2):"dark"==uiTheme&&(mxClient.link("stylesheet",STYLE_PATH+"/dark.css"),Dialog.backdropColor="#2a2a2a",Graph.prototype.defaultThemeName="darkTheme",Graph.prototype.defaultPageBackgroundColor="#2a2a2a",Graph.prototype.defaultPageBorderColor="#505759",Graph.prototype.svgShadowColor="#e0e0e0",Graph.prototype.svgShadowOpacity="0.6",Graph.prototype.svgShadowSize="0.8",Graph.prototype.svgShadowBlur="1.4",Format.prototype.inactiveTabBackgroundColor="black",BaseFormatPanel.prototype.buttonBackgroundColor="#2a2a2a",Sidebar.prototype.dragPreviewBorder="1px dashed #cccccc",mxGraphHandler.prototype.previewColor="#cccccc",StyleFormatPanel.prototype.defaultStrokeColor="#cccccc",mxClient.IS_SVG&&(Editor.helpImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAP1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////9Du/pqAAAAFXRSTlMAT30qCJRBboyDZyCgRzUUdF46MJlgXETgAAAAeklEQVQY022O2w4DIQhEQUURda/9/28tUO2+7CQS5sgQ4F1RapX78YUwRqQjTU8ILqQfKerTKTvACJ4nLX3krt+8aS82oI8aQC4KavRgtvEW/mDvsICgA03PSGRr79MqX1YPNIxzjyqtw8ZnnRo4t5a5undtJYRywau+ds4Cyza3E6YAAAAASUVORK5CYII=",Editor.checkmarkImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAARVBMVEUAAACZmZkICAgEBASNjY2Dg4MYGBiTk5N5eXl1dXVmZmZQUFBCQkI3NzceHh4MDAykpKSJiYl+fn5sbGxaWlo/Pz8SEhK96uPlAAAAAXRSTlMAQObYZgAAAE5JREFUGNPFzTcSgDAQQ1HJGUfy/Y9K7V1qeOUfzQifCQZai1XHaz11LFysbDbzgDSSWMZiETz3+b8yNUc/MMsktxuC8XQBSncdLwz+8gCCggGXzBcozAAAAABJRU5ErkJggg=="))},EditorUi.initTheme(),EditorUi.prototype.hideFooter=function(){var e=document.getElementById("geFooter");null!=e&&(this.footerHeight=0,e.style.display="none",this.refresh())},EditorUi.prototype.showFooter=function(e){var t=document.getElementById("geFooter");null!=t&&(this.footerHeight=e,t.style.display="inline",this.refresh())},EditorUi.prototype.showImageDialog=function(e,t,n,r,i){e=new ImageDialog(this,e,t,n,r,i),this.showDialog(e.container,Graph.fileSupport?440:360,Graph.fileSupport?200:90,!0,!0),e.init()},EditorUi.prototype.showBackgroundImageDialog=function(e){e=null!=e?e:mxUtils.bind(this,function(e){e=new ChangePageSetup(this,null,e),e.ignoreColor=!0,this.editor.graph.model.execute(e)});var t=new BackgroundImageDialog(this,mxUtils.bind(this,function(t){e(t)}));this.showDialog(t.container,360,200,!0,!0),t.init()},EditorUi.prototype.showLibraryDialog=function(e,t,n,r,i){e=new LibraryDialog(this,e,t,n,r,i),this.showDialog(e.container,620,440,!0,!1,mxUtils.bind(this,function(e){e&&null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.showSplash()})),e.init()},EditorUi.prototype.createSidebarFooterContainer=function(){var e=this.createDiv("geSidebarContainer");e.style.position="absolute",e.style.overflow="hidden",e.style.borderWidth="3px";var t=document.createElement("a");return t.className="geTitle",t.style.height="100%",t.style.paddingTop="9px",t.innerHTML='<span style="font-size:18px;margin-right:5px;">+</span>',mxUtils.write(t,mxResources.get("moreShapes")+"..."),mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(e){e.preventDefault()})),mxEvent.addListener(t,"click",mxUtils.bind(this,function(e){this.actions.get("shapes").funct(),mxEvent.consume(e)})),e.appendChild(t),e},EditorUi.prototype.handleError=function(e,t,n,r){var i=null!=this.spinner&&null!=this.spinner.pause?this.spinner.pause():function(){},s=null!=e&&null!=e.error?e.error:e;if(null!=s||null!=t){e=mxUtils.htmlEntities(mxResources.get("unknownError"));var o=mxResources.get("ok"),u=null;t=null!=t?t:mxResources.get("error");if(null!=s)if(null!=s.retry&&(o=mxResources.get("cancel"),u=function(){i(),s.retry()}),404==s.code||404==s.status||403==s.code){e=403==s.code?null!=s.message?mxUtils.htmlEntities(s.message):mxUtils.htmlEntities(mxResources.get("accessDenied")):mxUtils.htmlEntities(mxResources.get("fileNotFoundOrDenied"));var a=window.location.hash;null!=a&&"#G"==a.substring(0,2)&&(a=a.substring(2),e+='<br><a href="https://drive.google.com/open?id='+a+'" target="_blank">'+mxUtils.htmlEntities(mxResources.get("tryOpeningViaThisPage"))+"</a>")}else null!=s.message?e=mxUtils.htmlEntities(s.message):null!=s.response&&null!=s.response.error?e=mxUtils.htmlEntities(s.response.error):"undefined"!==window.App&&(s.code==App.ERROR_TIMEOUT?e=mxUtils.htmlEntities(mxResources.get("timeout")):s.code==App.ERROR_BUSY&&(e=mxUtils.htmlEntities(mxResources.get("busy"))));this.showError(t,e,o,n,u,null,null,null,null,null,null,null,r?n:null)}else null!=n&&n()},EditorUi.prototype.showError=function(e,t,n,r,i,s,o,u,a,f,l,c,h){e=new ErrorDialog(this,e,t,n||mxResources.get("ok"),r,i,s,o,c,u,a),this.showDialog(e.container,f||340,l||(null!=t&&120<t.length?180:150),!0,!1,h),e.init()},EditorUi.prototype.alert=function(e,t){var n=new ErrorDialog(this,null,e,mxResources.get("ok"),t);this.showDialog(n.container,340,100,!0,!1),n.init()},EditorUi.prototype.confirm=function(e,t,n,r,i,s){var o=null!=this.spinner&&null!=this.spinner.pause?this.spinner.pause():function(){};e=new ConfirmDialog(this,e,function(){o(),null!=t&&t()},function(){o(),null!=n&&n()},r,i),this.showDialog(e.container,340,90,!0,s),e.init()},EditorUi.prototype.setCurrentFile=function(e){this.currentFile=e},EditorUi.prototype.getCurrentFile=function(){return this.currentFile},EditorUi.prototype.isExportToCanvas=function(){return mxClient.IS_CHROMEAPP||!this.editor.graph.mathEnabled&&this.useCanvasForExport},EditorUi.prototype.createSvgDataUri=function(e){return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e)))},EditorUi.prototype.createImageDataUri=function(e,t,n){var r=e.toDataURL("image/"+n);if(6>=r.length||r==e.cloneNode(!1).toDataURL("image/"+n))throw{message:"Invalid image"};return null!=t&&(r=this.writeGraphModelToPng(r,"zTXt","mxGraphModel",atob(this.editor.graph.compress(t)))),r},EditorUi.prototype.saveCanvas=function(e,t,n){var r="jpeg"==n?"jpg":n,i=this.getBaseFilename()+"."+r;e=this.createImageDataUri(e,t,n),this.saveData(i,r,e.substring(e.lastIndexOf(",")+1),"image/"+n,!0)},EditorUi.prototype.isLocalFileSave=function(){return"remote"!=urlParams.save&&(mxClient.IS_IE||"undefined"!=typeof window.Blob&&"undefined"!=typeof window.URL)&&9!=document.documentMode&&8!=document.documentMode&&7!=document.documentMode&&!mxClient.IS_QUIRKS||this.isOfflineApp()||mxClient.IS_IOS},EditorUi.prototype.showTextDialog=function(e,t){var n=new TextareaDialog(this,e,t,null,null,mxResources.get("close"));n.textarea.style.width="600px",n.textarea.style.height="380px",this.showDialog(n.container,620,460,!0,!0),n.init(),document.execCommand("selectall",!1,null)},EditorUi.prototype.doSaveLocalFile=function(e,t,n,r,i){if(window.Blob&&navigator.msSaveOrOpenBlob)e=r?this.base64ToBlob(e,n):new Blob([e],{type:n}),navigator.msSaveOrOpenBlob(e,t);else if(mxClient.IS_IE)n=window.open("about:blank","_blank"),null==n?mxUtils.popup(e,!0):(n.document.write(e),n.document.close(),n.document.execCommand("SaveAs",!0,t),n.close());else{var s=document.createElement("a"),o=!mxClient.IS_SF&&0>navigator.userAgent.indexOf("PaleMoon/")&&"undefined"!=typeof s.download;if(mxClient.IS_GC)var u=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),o=65==(u?parseInt(u[2],10):!1)?!1:o;if(o||this.isOffline()){s.href=URL.createObjectURL(r?this.base64ToBlob(e,n):new Blob([e],{type:n})),o?s.download=t:s.setAttribute("target","_blank"),document.body.appendChild(s);try{window.setTimeout(function(){URL.revokeObjectURL(s.href)},0),s.click(),s.parentNode.removeChild(s)}catch(a){}}else this.createEchoRequest(e,t,n,r,i).simulate(document,"_blank")}},EditorUi.prototype.createEchoRequest=function(e,t,n,r,i,s){return e="xml="+encodeURIComponent(e),new mxXmlRequest(SAVE_URL,e+(null!=n?"&mime="+n:"")+(null!=i?"&format="+i:"")+(null!=s?"&base64="+s:"")+(null!=t?"&filename="+encodeURIComponent(t):"")+(r?"&binary=1":""))},EditorUi.prototype.base64ToBlob=function(e,t){t=t||"";for(var n=atob(e),r=n.length,i=Math.ceil(r/1024),s=Array(i),o=0;o<i;++o){for(var u=1024*o,a=Math.min(u+1024,r),f=Array(a-u),l=0;u<a;++l,++u)f[l]=n[u].charCodeAt(0);s[o]=new Uint8Array(f)}return new Blob(s,{type:t})},EditorUi.prototype.saveLocalFile=function(e,t,n,r,i,s,o){s=null!=s?s:!1,o=null!=o?o:"vsdx"!=i&&(!mxClient.IS_IOS||!navigator.standalone),i=this.getServiceCount(s),t=new CreateDialog(this,t,mxUtils.bind(this,function(t,i){try{if("_blank"==i)if(null==n||"image/"!=n.substring(0,6)||"image/svg"==n.substring(0,9)&&!mxClient.IS_SVG){var s=window.open("about:blank");null==s?mxUtils.popup(e,!0):(s.document.write(mxUtils.htmlEntities(e,!1)),s.document.close())}else this.openInNewWindow(e,n,r);else i==App.MODE_DEVICE||"download"==i?this.doSaveLocalFile(e,t,n,r):null!=t&&0<t.length&&this.pickFolder(i,mxUtils.bind(this,function(s){try{this.exportFile(e,t,n,r,i,s)}catch(o){this.handleError(o)}}))}catch(o){this.handleError(o)}}),mxUtils.bind(this,function(){this.hideDialog()}),mxResources.get("saveAs"),mxResources.get("download"),!1,s,o,null,1<i,4<i&&(!s||6>i)?3:4,e,n,r),this.showDialog(t.container,420,1==i?160:4<i?390:270,!0,!0),t.init()},EditorUi.prototype.openInNewWindow=function(e,t,n){if(mxClient.IS_GC||mxClient.IS_EDGE||11==document.documentMode||10==document.documentMode){var r=window.open("about:blank");null==r?mxUtils.popup(e,!0):("image/svg+xml"==t?r.document.write("<html>"+e+"</html>"):r.document.write('<html><img src="data:'+t+(n?";base64,"+e:";charset=utf8,"+encodeURIComponent(e))+'"/></html>'),r.document.close())}else r=window.open("data:"+t+(n?";base64,"+e:";charset=utf8,"+encodeURIComponent(e))),null==r&&mxUtils.popup(e,!0)};var t=EditorUi.prototype.addChromelessToolbarItems;EditorUi.prototype.addChromelessToolbarItems=function(e){if(this.isExportToCanvas()){this.exportDialog=null;var n=e(mxUtils.bind(this,function(e){var t=mxUtils.bind(this,function(){mxEvent.removeListener(this.editor.graph.container,"click",t),null!=this.exportDialog&&(this.exportDialog.parentNode.removeChild(this.exportDialog),this.exportDialog=null)});if(null!=this.exportDialog)t.apply(this);else{this.exportDialog=document.createElement("div");var r=n.getBoundingClientRect();mxUtils.setPrefixedStyle(this.exportDialog.style,"borderRadius","5px"),this.exportDialog.style.position="fixed",this.exportDialog.style.textAlign="center",this.exportDialog.style.fontFamily="Helvetica,Arial",this.exportDialog.style.backgroundColor="#000000",this.exportDialog.style.width="50px",this.exportDialog.style.height="50px",this.exportDialog.style.padding="4px 2px 4px 2px",this.exportDialog.style.color="#ffffff",mxUtils.setOpacity(this.exportDialog,70),this.exportDialog.style.left=r.left+"px",this.exportDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px",r=mxUtils.getCurrentStyle(this.editor.graph.container),this.exportDialog.style.zIndex=r.zIndex;var i=new Spinner({lines:8,length:6,width:5,radius:6,rotate:0,color:"#fff",speed:1.5,trail:60,shadow:!1,hwaccel:!1,top:"28px",zIndex:2e9});i.spin(this.exportDialog),this.exportToCanvas(mxUtils.bind(this,function(e){i.stop(),this.exportDialog.style.width="auto",this.exportDialog.style.height="auto",this.exportDialog.style.padding="10px";var n=this.createImageDataUri(e,null,"png");e=document.createElement("img"),e.style.maxWidth="140px",e.style.maxHeight="140px",e.style.cursor="pointer",e.style.backgroundColor="white",e.setAttribute("title",mxResources.get("openInNewWindow")),e.setAttribute("border","0"),e.setAttribute("src",n),this.exportDialog.appendChild(e),mxEvent.addListener(e,"click",mxUtils.bind(this,function(){this.openInNewWindow(n.substring(n.indexOf(",")+1),"image/png",!0),t.apply(this,arguments)}))}),null,this.thumbImageCache,null,mxUtils.bind(this,function(e){this.spinner.stop(),this.handleError(e)})),mxEvent.addListener(this.editor.graph.container,"click",t),document.body.appendChild(this.exportDialog)}mxEvent.consume(e)}),Editor.cameraLargeImage,mxResources.get("export"))}t.apply(this,arguments)},EditorUi.prototype.saveData=function(e,t,n,r,i){this.isLocalFileSave()?this.saveLocalFile(n,e,r,i,t):this.saveRequest(e,t,mxUtils.bind(this,function(e,s){return this.createEchoRequest(n,e,r,i,t,s)}),n,i,r)},EditorUi.prototype.saveRequest=function(e,t,n,r,i,s,o){o=null!=o?o:!mxClient.IS_IOS||!navigator.standalone;var u=this.getServiceCount(!1);e=new CreateDialog(this,e,mxUtils.bind(this,function(e,i){if("_blank"==i||null!=e&&0<e.length){var o=n("_blank"==i?null:e,i==App.MODE_DEVICE||"download"==i||null==i||"_blank"==i?"0":"1");null!=o&&(i==App.MODE_DEVICE||"download"==i||"_blank"==i?o.simulate(document,"_blank"):this.pickFolder(i,mxUtils.bind(this,function(n){s=null!=s?s:"pdf"==t?"application/pdf":"image/"+t;if(null!=r)try{this.exportFile(r,e,s,!0,i,n)}catch(u){this.handleError(u)}else this.spinner.spin(document.body,mxResources.get("saving"))&&o.send(mxUtils.bind(this,function(){this.spinner.stop();if(200<=o.getStatus()&&299>=o.getStatus())try{this.exportFile(o.getText(),e,s,!0,i,n)}catch(t){this.handleError(t)}else this.handleError({message:mxResources.get("errorSavingFile")})}),function(e){this.spinner.stop(),this.handleError(e)})})))}}),mxUtils.bind(this,function(){this.hideDialog()}),mxResources.get("saveAs"),mxResources.get("download"),!1,!1,o,null,1<u,4<u?3:4,r,s,i),this.showDialog(e.container,380,1==u?160:4<u?390:270,!0,!0),e.init()},EditorUi.prototype.getEditBlankXml=function(){return this.getFileData(!0)},EditorUi.prototype.exportFile=function(e,t,n,r,i,s){},EditorUi.prototype.pickFolder=function(e,t,n){t(null)},EditorUi.prototype.exportSvg=function(e,t,n,r,i,s,o,u,a,f){if(this.spinner.spin(document.body,mxResources.get("export"))){var l=this.editor.graph.isSelectionEmpty();n=null!=n?n:l,l=t?null:this.editor.graph.background,l==mxConstants.NONE&&(l=null),null==l&&0==t&&(l="#ffffff");var c=this.editor.graph.getSvg(l,e,o,u,null,n,null,null,"blank"==f?"_blank":"self"==f?"_top":null);r&&this.editor.graph.addSvgShadow(c,c);var h=this.getBaseFilename()+".svg",p=mxUtils.bind(this,function(e){this.spinner.stop(),i&&e.setAttribute("content",this.getFileData(!0,null,null,null,n,a));if(null!=this.editor.fontCss){var t=e.ownerDocument,t=null!=t.createElementNS?t.createElementNS(mxConstants.NS_SVG,"style"):t.createElement("style");t.setAttribute("type","text/css"),mxUtils.setTextContent(t,this.editor.fontCss),e.getElementsByTagName("defs")[0].appendChild(t)}var r='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+mxUtils.getXml(e);this.isLocalFileSave()||r.length<=MAX_REQUEST_SIZE?this.saveData(h,"svg",r,"image/svg+xml"):this.handleError({message:mxResources.get("drawingTooLarge")},mxResources.get("error"),mxUtils.bind(this,function(){mxUtils.popup(r)}))});this.convertMath(this.editor.graph,c,!1,mxUtils.bind(this,function(){s?(null==this.thumbImageCache&&(this.thumbImageCache={}),this.convertImages(c,p,this.thumbImageCache)):p(c)}))}},EditorUi.prototype.addRadiobox=function(e,t,n,r,i,s,o){return this.addCheckbox(e,n,r,i,s,o,!0,t)},EditorUi.prototype.addCheckbox=function(e,t,n,r,i,s,o,u){s=null!=s?s:!0;var a=document.createElement("input");return a.style.marginRight="8px",a.style.marginTop="16px",a.setAttribute("type",o?"radio":"checkbox"),o="geCheckbox-"+Editor.guid(),a.id=o,null!=u&&a.setAttribute("name",u),n&&(a.setAttribute("checked","checked"),a.defaultChecked=!0),r&&a.setAttribute("disabled","disabled"),s&&(e.appendChild(a),n=document.createElement("label"),mxUtils.write(n,t),n.setAttribute("for",o),e.appendChild(n),i||mxUtils.br(e)),a},EditorUi.prototype.addEditButton=function(e,t){var n=this.addCheckbox(e,mxResources.get("edit")+":",!0,null,!0);n.style.marginLeft="24px";var r=this.getCurrentFile(),i="";null!=r&&r.getMode()!=App.MODE_DEVICE&&r.getMode()!=App.MODE_BROWSER&&(i=window.location.href);var s=document.createElement("select");return s.style.width="120px",s.style.marginLeft="8px",s.style.marginRight="10px",s.className="geBtn",r=document.createElement("option"),r.setAttribute("value","blank"),mxUtils.write(r,mxResources.get("makeCopy")),s.appendChild(r),r=document.createElement("option"),r.setAttribute("value","custom"),mxUtils.write(r,mxResources.get("custom")+"..."),s.appendChild(r),e.appendChild(s),mxEvent.addListener(s,"change",mxUtils.bind(this,function(){if("custom"==s.value){var e=new FilenameDialog(this,i,mxResources.get("ok"),function(e){null!=e?i=e:s.value="blank"},mxResources.get("url"),null,null,null,null,function(){s.value="blank"});this.showDialog(e.container,300,80,!0,!1),e.init()}})),mxEvent.addListener(n,"change",mxUtils.bind(this,function(){n.checked&&(null==t||t.checked)?s.removeAttribute("disabled"):s.setAttribute("disabled","disabled")})),mxUtils.br(e),{getLink:function(){return n.checked?"blank"===s.value?"_blank":i:null},getEditInput:function(){return n},getEditSelect:function(){return s}}},EditorUi.prototype.addLinkSection=function(e,t){function n(){o.innerHTML='<div style="width:100%;height:100%;box-sizing:border-box;'+(null!=s&&s!=mxConstants.NONE?"border:1px solid black;background-color:"+s:"background-position:center center;background-repeat:no-repeat;background-image:url('"+Dialog.prototype.closeImage+"')")+';"></div>'}mxUtils.write(e,mxResources.get("links")+":");var r=document.createElement("select");r.style.width="100px",r.style.marginLeft="8px",r.style.marginRight="10px",r.className="geBtn";var i=document.createElement("option");i.setAttribute("value","auto"),mxUtils.write(i,mxResources.get("automatic")),r.appendChild(i),i=document.createElement("option"),i.setAttribute("value","blank"),mxUtils.write(i,mxResources.get("openInNewWindow")),r.appendChild(i),i=document.createElement("option"),i.setAttribute("value","self"),mxUtils.write(i,mxResources.get("openInThisWindow")),r.appendChild(i),t&&(i=document.createElement("option"),i.setAttribute("value","frame"),mxUtils.write(i,mxResources.get("openInThisWindow")+" ("+mxResources.get("iframe")+")"),r.appendChild(i)),e.appendChild(r),mxUtils.write(e,mxResources.get("borderColor")+":");var s="#0000ff",o=null,o=mxUtils.button("",mxUtils.bind(this,function(e){this.pickColor(s||"none",function(e){s=e,n()}),mxEvent.consume(e)}));return n(),o.style.padding=mxClient.IS_FF?"4px 2px 4px 2px":"4px",o.style.marginLeft="4px",o.style.height="22px",o.style.width="22px",o.style.position="relative",o.style.top=mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE?"6px":"1px",o.className="geColorBtn",e.appendChild(o),mxUtils.br(e),{getColor:function(){return s},getTarget:function(){return r.value},focus:function(){r.focus()}}},EditorUi.prototype.createLink=function(e,t,n,r,i,s,o,u){var a=this.getCurrentFile(),f=[];return r&&(f.push("lightbox=1"),"auto"!=e&&f.push("target="+e),null!=t&&t!=mxConstants.NONE&&f.push("highlight="+("#"==t.charAt(0)?t.substring(1):t)),null!=i&&0<i.length&&f.push("edit="+encodeURIComponent(i)),s&&f.push("layers=1"),this.editor.graph.foldingEnabled&&f.push("nav=1")),n&&(e=this.getSelectedPageIndex(),0<e&&f.push("page="+e)),e=!0,null!=o?n="#U"+encodeURIComponent(o):(a=this.getCurrentFile(),u||null==a||a.constructor!=window.DriveFile?n="#R"+encodeURIComponent(n?this.getFileData(!0,null,null,null,null,null,null,!0):this.editor.graph.compress(mxUtils.getXml(this.editor.getGraphXml()))):(n="#"+a.getHash(),e=!1)),e&&null!=a&&null!=a.getTitle()&&a.getTitle()!=this.defaultFilename&&f.push("title="+encodeURIComponent(a.getTitle())),(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||!/.*\.draw\.io$/.test(window.location.hostname)?"https://www.draw.io/":"https://"+window.location.host+"/")+(0<f.length?"?"+f.join("&"):"")+n},EditorUi.prototype.createHtml=function(e,t,n,r,i,s,o,u,a,f,l){this.getBasenames();var c={};""!=i&&i!=mxConstants.NONE&&(c.highlight=i),"auto"!==r&&(c.target=r),a||(c.lightbox=!1),c.nav=this.editor.graph.foldingEnabled,n=parseInt(n),isNaN(n)||100==n||(c.zoom=n/100),n=[],o&&(n.push("pages"),c.resize=!0,null!=this.pages&&null!=this.currentPage&&(c.page=mxUtils.indexOf(this.pages,this.currentPage))),t&&(n.push("zoom"),c.resize=!0),u&&n.push("layers"),0<n.length&&(a&&n.push("lightbox"),c.toolbar=n.join(" ")),null!=f&&0<f.length&&(c.edit=f),null!=e?c.url=e:c.xml=this.getFileData(!0,null,null,null,null,!o),t='<div class="mxgraph" style="'+(s?"max-width:100%;":"")+(""!=n?"border:1px solid transparent;":"")+'" data-mxgraph="'+mxUtils.htmlEntities(JSON.stringify(c))+'"></div>',e=null!=e?"&fetch="+encodeURIComponent(e):"",l(t,'<script type="text/javascript" src="'+(0<e.length?("1"==urlParams.dev?"https://test.draw.io/embed2.js?dev=1":"https://www.draw.io/embed2.js?")+e:"1"==urlParams.dev?"https://test.draw.io/js/viewer.min.js":"https://www.draw.io/js/viewer.min.js")+'"></script>')},EditorUi.prototype.showHtmlDialog=function(e,t,n,r){var i=document.createElement("div");i.style.whiteSpace="nowrap";var s=document.createElement("h3");mxUtils.write(s,mxResources.get("html")),s.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:12px",i.appendChild(s);var o=document.createElement("div");o.style.cssText="border-bottom:1px solid lightGray;padding-bottom:8px;margin-bottom:12px;";var u=document.createElement("input");u.style.cssText="margin-right:8px;margin-top:8px;margin-bottom:8px;",u.setAttribute("value","url"),u.setAttribute("type","radio"),u.setAttribute("name","type-embedhtmldialog"),s=u.cloneNode(!0),s.setAttribute("value","copy"),o.appendChild(s);var a=document.createElement("span");mxUtils.write(a,mxResources.get("includeCopyOfMyDiagram")),o.appendChild(a),mxUtils.br(o),o.appendChild(u),a=document.createElement("span"),mxUtils.write(a,mxResources.get("publicDiagramUrl")),o.appendChild(a);var f=this.getCurrentFile();null==n&&null!=f&&f.constructor==window.DriveFile&&(a=document.createElement("a"),a.style.paddingLeft="12px",a.style.color="gray",a.setAttribute("href","javascript:void(0);"),mxUtils.write(a,mxResources.get("share")),o.appendChild(a),mxEvent.addListener(a,"click",mxUtils.bind(this,function(){this.hideDialog(),this.drive.showPermissions(f.getId())}))),s.setAttribute("checked","checked"),null==n&&u.setAttribute("disabled","disabled"),i.appendChild(o);var l=this.addLinkSection(i),c=this.addCheckbox(i,mxResources.get("zoom"),!0,null,!0);mxUtils.write(i,":");var h=document.createElement("input");h.setAttribute("type","text"),h.style.marginRight="16px",h.style.width="60px",h.style.marginLeft="4px",h.style.marginRight="12px",h.value="100%",i.appendChild(h);var p=this.addCheckbox(i,mxResources.get("fit"),!0),o=null!=this.pages&&1<this.pages.length,d=d=this.addCheckbox(i,mxResources.get("allPages"),o,!o),v=this.addCheckbox(i,mxResources.get("layers"),!0),m=this.addCheckbox(i,mxResources.get("lightbox"),!0),g=this.addEditButton(i,m),y=g.getEditInput();y.style.marginBottom="16px",mxEvent.addListener(m,"change",function(){m.checked?y.removeAttribute("disabled"):y.setAttribute("disabled","disabled"),y.checked&&m.checked?g.getEditSelect().removeAttribute("disabled"):g.getEditSelect().setAttribute("disabled","disabled")}),e=new CustomDialog(this,i,mxUtils.bind(this,function(){r(u.checked?n:null,c.checked,h.value,l.getTarget(),l.getColor(),p.checked,d.checked,v.checked,m.checked,g.getLink())}),null,e,t),this.showDialog(e.container,340,384,!0,!0),s.focus()},EditorUi.prototype.showPublishLinkDialog=function(e,t,n,r,i,s){var o=document.createElement("div");o.style.whiteSpace="nowrap";var u=document.createElement("h3");mxUtils.write(u,e||mxResources.get("link")),u.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:12px",o.appendChild(u);var a=this.getCurrentFile(),u="https://desk.draw.io/support/solutions/articles/16000051941";e=0;if(null!=a&&a.constructor==window.DriveFile&&!t){e=80;var u="https://desk.draw.io/support/solutions/articles/16000039384",f=document.createElement("div");f.style.cssText="border-bottom:1px solid lightGray;padding-bottom:14px;padding-top:6px;margin-bottom:14px;text-align:center;";var l=document.createElement("div");l.style.whiteSpace="normal",mxUtils.write(l,mxResources.get("linkAccountRequired")),f.appendChild(l),l=mxUtils.button(mxResources.get("share"),mxUtils.bind(this,function(){this.drive.showPermissions(a.getId())})),l.style.marginTop="12px",l.className="geBtn",f.appendChild(l),o.appendChild(f),l=document.createElement("a"),l.style.paddingLeft="12px",l.style.color="gray",l.style.fontSize="11px",l.setAttribute("href","javascript:void(0);"),mxUtils.write(l,mxResources.get("check")),f.appendChild(l),mxEvent.addListener(l,"click",mxUtils.bind(this,function(){this.spinner.spin(document.body,mxResources.get("loading"))&&this.getPublicUrl(this.getCurrentFile(),mxUtils.bind(this,function(e){this.spinner.stop(),e=new ErrorDialog(this,null,mxResources.get(null!=e?"diagramIsPublic":"diagramIsNotPublic"),mxResources.get("ok")),this.showDialog(e.container,300,80,!0,!1),e.init()}))}))}var c=null,h=null;if(null!=n||null!=r)e+=30,mxUtils.write(o,mxResources.get("width")+":"),c=document.createElement("input"),c.setAttribute("type","text"),c.style.marginRight="16px",c.style.width="50px",c.style.marginLeft="6px",c.style.marginRight="16px",c.style.marginBottom="10px",c.value="100%",o.appendChild(c),mxUtils.write(o,mxResources.get("height")+":"),h=document.createElement("input"),h.setAttribute("type","text"),h.style.width="50px",h.style.marginLeft="6px",h.style.marginBottom="10px",h.value=r+"px",o.appendChild(h),mxUtils.br(o);var p=this.addLinkSection(o,s);n=null!=this.pages&&1<this.pages.length;var d=null;if(null==a||a.constructor!=window.DriveFile||t)d=this.addCheckbox(o,mxResources.get("allPages"),n,!n);var v=this.addCheckbox(o,mxResources.get("lightbox"),!0),m=this.addEditButton(o,v),g=m.getEditInput(),y=this.addCheckbox(o,mxResources.get("layers"),!0);y.style.marginLeft=g.style.marginLeft,y.style.marginBottom="16px",y.style.marginTop="8px",mxEvent.addListener(v,"change",function(){v.checked?(y.removeAttribute("disabled"),g.removeAttribute("disabled")):(y.setAttribute("disabled","disabled"),g.setAttribute("disabled","disabled")),g.checked&&v.checked?m.getEditSelect().removeAttribute("disabled"):m.getEditSelect().setAttribute("disabled","disabled")}),t=new CustomDialog(this,o,mxUtils.bind(this,function(){i(p.getTarget(),p.getColor(),null==d?!0:d.checked,v.checked,m.getLink(),y.checked,null!=c?c.value:null,null!=h?h.value:null)}),null,mxResources.get("create"),u),this.showDialog(t.container,340,254+e,!0,!0),null!=c?(c.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?c.select():document.execCommand("selectAll",!1,null)):p.focus()},EditorUi.prototype.showRemoteExportDialog=function(e,t,n,r){var i=document.createElement("div");i.style.whiteSpace="nowrap";var s=document.createElement("h3");mxUtils.write(s,mxResources.get("image")),s.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:4px",i.appendChild(s);var o=this.addCheckbox(i,mxResources.get("selectionOnly"),!1,this.editor.graph.isSelectionEmpty()),u=r?null:this.addCheckbox(i,mxResources.get("includeCopyOfMyDiagram"),!0),s=this.editor.graph,a=r?null:this.addCheckbox(i,mxResources.get("transparentBackground"),s.background==mxConstants.NONE||null==s.background);null!=a&&(a.style.marginBottom="16px"),e=new CustomDialog(this,i,mxUtils.bind(this,function(){n(!o.checked,null!=u?u.checked:!1,null!=a?a.checked:!1)}),null,e,t),this.showDialog(e.container,300,r?100:186,!0,!0)},EditorUi.prototype.showExportDialog=function(e,t,n,r,i,s,o,u){o=null!=o?o:!0;var a=document.createElement("div");a.style.whiteSpace="nowrap";var f=this.editor.graph,l="jpeg"==u?196:300,c=document.createElement("h3");mxUtils.write(c,e),c.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:10px",a.appendChild(c),mxUtils.write(a,mxResources.get("zoom")+":");var h=document.createElement("input");h.setAttribute("type","text"),h.style.marginRight="16px",h.style.width="60px",h.style.marginLeft="4px",h.style.marginRight="12px",h.value=this.lastExportZoom||"100%",a.appendChild(h),mxUtils.write(a,mxResources.get("borderWidth")+":");var p=document.createElement("input");p.setAttribute("type","text"),p.style.marginRight="16px",p.style.width="60px",p.style.marginLeft="4px",p.value=this.lastExportBorder||"0",a.appendChild(p),mxUtils.br(a);var d=this.addCheckbox(a,mxResources.get("transparentBackground"),!1,null,null,"jpeg"!=u),v=this.addCheckbox(a,mxResources.get("selectionOnly"),!1,f.isSelectionEmpty()),m=document.createElement("input");m.style.marginTop="16px",m.style.marginRight="8px",m.style.marginLeft="24px",m.setAttribute("disabled","disabled"),m.setAttribute("type","checkbox"),s&&(a.appendChild(m),mxUtils.write(a,mxResources.get("crop")),mxUtils.br(a),l+=26,mxEvent.addListener(v,"change",function(){v.checked?m.removeAttribute("disabled"):m.setAttribute("disabled","disabled")})),f.isSelectionEmpty()||(m.setAttribute("checked","checked"),m.defaultChecked=!0);var g=this.addCheckbox(a,mxResources.get("shadow"),f.shadowVisible),y=document.createElement("input");y.style.marginTop="16px",y.style.marginRight="8px",y.setAttribute("type","checkbox"),!this.isOffline()&&this.canvasSupported||y.setAttribute("disabled","disabled"),t&&(a.appendChild(y),mxUtils.write(a,mxResources.get("embedImages")),mxUtils.br(a),l+=26);var b=this.addCheckbox(a,mxResources.get("includeCopyOfMyDiagram"),o,null,null,"jpeg"!=u),w=null!=this.pages&&1<this.pages.length,E=this.addCheckbox(a,w?mxResources.get("allPages"):"",w,!w,null,"jpeg"!=u);E.style.marginLeft="24px",E.style.marginBottom="16px",w||(E.style.display="none"),mxEvent.addListener(b,"change",function(){b.checked&&w?E.removeAttribute("disabled"):E.setAttribute("disabled","disabled")}),o&&w||E.setAttribute("disabled","disabled");var S=document.createElement("select");S.style.maxWidth="260px",S.style.marginLeft="8px",S.style.marginRight="10px",S.className="geBtn",e=document.createElement("option"),e.setAttribute("value","auto"),mxUtils.write(e,mxResources.get("automatic")),S.appendChild(e),e=document.createElement("option"),e.setAttribute("value","blank"),mxUtils.write(e,mxResources.get("openInNewWindow")),S.appendChild(e),e=document.createElement("option"),e.setAttribute("value","self"),mxUtils.write(e,mxResources.get("openInThisWindow")),S.appendChild(e),"svg"==u&&(mxUtils.write(a,mxResources.get("links")+":"),a.appendChild(S),mxUtils.br(a),mxUtils.br(a),l+=26),n=new CustomDialog(this,a,mxUtils.bind(this,function(){this.lastExportBorder=p.value,this.lastExportZoom=h.value,i(h.value,d.checked,!v.checked,g.checked,b.checked,y.checked,p.value,m.checked,!E.checked,S.value)}),null,n,r),this.showDialog(n.container,340,l,!0,!0),h.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode||mxClient.IS_QUIRKS?h.select():document.execCommand("selectAll",!1,null)},EditorUi.prototype.showEmbedImageDialog=function(e,t,n,r,i){var s=document.createElement("div");s.style.whiteSpace="nowrap";var o=this.editor.graph;if(null!=t){var u=document.createElement("h3");mxUtils.write(u,t),u.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:4px",s.appendChild(u)}var a=this.addCheckbox(s,mxResources.get("fit"),!0),f=this.addCheckbox(s,mxResources.get("shadow"),o.shadowVisible&&r,!r),l=this.addCheckbox(s,n),c=this.addCheckbox(s,mxResources.get("lightbox"),!0),h=this.addEditButton(s,c),p=h.getEditInput(),d=1<o.model.getChildCount(o.model.getRoot()),v=this.addCheckbox(s,mxResources.get("layers"),d,!d);v.style.marginLeft=p.style.marginLeft,v.style.marginBottom="12px",v.style.marginTop="8px",mxEvent.addListener(c,"change",function(){c.checked?(d&&v.removeAttribute("disabled"),p.removeAttribute("disabled")):(v.setAttribute("disabled","disabled"),p.setAttribute("disabled","disabled")),p.checked&&c.checked?h.getEditSelect().removeAttribute("disabled"):h.getEditSelect().setAttribute("disabled","disabled")}),t=new CustomDialog(this,s,mxUtils.bind(this,function(){e(a.checked,f.checked,l.checked,c.checked,h.getLink(),v.checked)}),null,mxResources.get("embed"),i),this.showDialog(t.container,280,280,!0,!0)},EditorUi.prototype.createEmbedImage=function(e,t,n,r,i,s,o,u){function a(t){var u=" ",a="";r&&(u=" onclick=\"(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('https://www.draw.io/?client=1&lightbox=1"+(i?"&edit=_blank":"")+(s?"&layers=1":"")+"');}})(this);\"",a+="cursor:pointer;"),e&&(a+="max-width:100%;");var l="";n&&(l=' width="'+Math.round(f.width)+'" height="'+Math.round(f.height)+'"'),o('<img src="'+t+'"'+l+(""!=a?' style="'+a+'"':"")+u+"/>")}var f=this.editor.graph.getGraphBounds();if(this.isExportToCanvas())this.exportToCanvas(mxUtils.bind(this,function(e){var t=r?this.getFileData(!0):null;e=this.createImageDataUri(e,t,"png"),a(e)}),null,null,null,mxUtils.bind(this,function(e){u({message:mxResources.get("unknownError")})}),null,!0,n?2:1,null,t);else if(t=this.getFileData(!0),f.width*f.height<=MAX_AREA&&t.length<=MAX_REQUEST_SIZE){var l="";n&&(l="&w="+Math.round(2*f.width)+"&h="+Math.round(2*f.height));var c=new mxXmlRequest(EXPORT_URL,"format=png&base64=1&embedXml="+(r?"1":"0")+l+"&xml="+encodeURIComponent(t));c.send(mxUtils.bind(this,function(){200<=c.getStatus()&&299>=c.getStatus()?a("data:image/png;base64,"+c.getText()):u({message:mxResources.get("unknownError")})}))}else u({message:mxResources.get("drawingTooLarge")})},EditorUi.prototype.createEmbedSvg=function(e,t,n,r,i,s,o){var u=this.editor.graph.getSvg(),a=u.getElementsByTagName("a");if(null!=a)for(var f=0;f<a.length;f++){var l=a[f].getAttribute("href");null!=l&&"#"==l.charAt(0)&&"_blank"==a[f].getAttribute("target")&&a[f].removeAttribute("target")}r&&u.setAttribute("content",this.getFileData(!0)),t&&this.editor.graph.addSvgShadow(u);if(n){var c=" ",h="";r&&(c="onclick=\"(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('https://www.draw.io/?client=1&lightbox=1"+(i?"&edit=_blank":"")+(s?"&layers=1":"")+"');}})(this);\"",h+="cursor:pointer;"),e&&(h+="max-width:100%;"),this.convertImages(u,mxUtils.bind(this,function(e){o('<img src="'+this.createSvgDataUri(mxUtils.getXml(e))+'"'+(""!=h?' style="'+h+'"':"")+c+"/>")}))}else h="",r&&(u.setAttribute("onclick","(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&&src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&&!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://www.draw.io/?client=1&lightbox=1"+(i?"&edit=_blank":"")+(s?"&layers=1":"")+"');}}})(this);"),h+="cursor:pointer;"),e&&(e=parseInt(u.getAttribute("width")),t=parseInt(u.getAttribute("height")),u.setAttribute("viewBox","0 0 "+e+" "+t),h+="max-width:100%;max-height:"+t+"px;",u.removeAttribute("height")),""!=h&&u.setAttribute("style",h),o(mxUtils.getXml(u))},EditorUi.prototype.timeSince=function(e){e=Math.floor((new Date-e)/1e3);var t=Math.floor(e/31536e3);return 1<t?t+" "+mxResources.get("years"):(t=Math.floor(e/2592e3),1<t?t+" "+mxResources.get("months"):(t=Math.floor(e/86400),1<t?t+" "+mxResources.get("days"):(t=Math.floor(e/3600),1<t?t+" "+mxResources.get("hours"):(t=Math.floor(e/60),1<t?t+" "+mxResources.get("minutes"):1==t?t+" "+mxResources.get("minute"):null))))},EditorUi.prototype.convertMath=function(e,t,n,r){e.mathEnabled&&"undefined"!=typeof MathJax&&"undefined"!=typeof MathJax.Hub?(Editor.MathJaxRender(t),window.setTimeout(mxUtils.bind(this,function(){MathJax.Hub.Queue(mxUtils.bind(this,function(){r()}))}),0)):r()},EditorUi.prototype.decodeNodeIntoGraph=function(e,t){if(null!=e){var n=null;if("diagram"==e.nodeName)n=e;else if("mxfile"==e.nodeName){var r=e.getElementsByTagName("diagram");if(0<r.length){var n=r[0],i=t.getGlobalVariable;t.getGlobalVariable=function(e){return"page"==e?n.getAttribute("name")||mxResources.get("pageWithNumber",[1]):"pagenumber"==e?1:i.apply(this,arguments)}}}null!=n&&(r=t.decompress(mxUtils.getTextContent(n)),null!=r&&0<r.length&&(e=mxUtils.parseXml(r).documentElement))}r=this.editor.graph;try{this.editor.graph=t,this.editor.setGraphXml(e)}catch(s){}finally{this.editor.graph=r}return e},EditorUi.prototype.getEmbeddedPng=function(e,t,n){var r=this.editor.graph,i=null;if(null!=n&&0<n.length)r=this.createTemporaryGraph(this.editor.graph.getStylesheet()),document.body.appendChild(r.container),this.decodeNodeIntoGraph(this.editor.extractGraphModel(mxUtils.parseXml(n).documentElement,!0),r),i=n;else if(null!=this.pages&&this.currentPage!=this.pages[0]){var r=this.createTemporaryGraph(r.getStylesheet()),s=r.getGlobalVariable,o=this.pages[0];r.getGlobalVariable=function(e){return"page"==e?o.getName():"pagenumber"==e?1:s.apply(this,arguments)},document.body.appendChild(r.container),r.model.setRoot(o.root)}this.exportToCanvas(mxUtils.bind(this,function(n){try{null==i&&(i=this.getFileData(!0));var s=n.toDataURL("image/png"),s=this.writeGraphModelToPng(s,"zTXt","mxGraphModel",atob(this.editor.graph.compress(i)));e(s.substring(s.lastIndexOf(",")+1)),r!=this.editor.graph&&r.container.parentNode.removeChild(r.container)}catch(o){null!=t&&t(o)}}),null,null,null,mxUtils.bind(this,function(e){null!=t&&t(e)}),null,null,null,null,r.shadowVisible,null,r)},EditorUi.prototype.getEmbeddedSvg=function(e,t,n,r,i,s,o){o=t.background,o==mxConstants.NONE&&(o=null),t=t.getSvg(o,null,null,null,null,s),null!=e&&t.setAttribute("content",e),null!=n&&t.setAttribute("resource",n);if(null==i)return(r?"":'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')+mxUtils.getXml(t);this.convertImages(t,mxUtils.bind(this,function(e){i((r?"":'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')+mxUtils.getXml(e))}))},EditorUi.prototype.exportImage=function(e,t,n,r,i,s,o,u,a){a=null!=a?a:"png";if(this.spinner.spin(document.body,mxResources.get("exporting"))){var f=this.editor.graph.isSelectionEmpty();n=null!=n?n:f,null==this.thumbImageCache&&(this.thumbImageCache={});try{this.exportToCanvas(mxUtils.bind(this,function(e){this.spinner.stop();try{this.saveCanvas(e,i?this.getFileData(!0,null,null,null,n,u):null,a)}catch(t){"Invalid image"==t.message?this.downloadFile(a):this.handleError(t)}}),null,this.thumbImageCache,null,mxUtils.bind(this,function(e){this.spinner.stop(),this.handleError(e)}),null,n,e||1,t,r,null,null,s,o)}catch(l){this.spinner.stop(),this.handleError(l)}}},EditorUi.prototype.loadFonts=function(e){if(null!=this.editor.fontCss&&null==this.editor.resolvedFontCss){var t=function(e){return e.replace(RegExp("^[\\s\"']+","g"),"").replace(RegExp("[\\s\"']+$","g"),"")},n=this.editor.fontCss.split("url("),r=0,i={},s=mxUtils.bind(this,function(){if(0==r){for(var s=[n[0]],o=1;o<n.length;o++){var u=n[o].indexOf(")");s.push('url("'),s.push(i[t(n[o].substring(0,u))]),s.push('"'+n[o].substring(u))}this.editor.resolvedFontCss=s.join(""),e()}});if(0<n.length)for(var o=1;o<n.length;o++){var u=n[o].indexOf(")"),a=null,f=n[o].indexOf("format(",u);0<f&&(a=t(n[o].substring(f+7,n[o].indexOf(")",f)))),mxUtils.bind(this,function(e){if(null==i[e]){i[e]=e,r++;var t="application/x-font-ttf";if("svg"==a||/(\.svg)($|\?)/i.test(e))t="image/svg+xml";else if("otf"==a||"embedded-opentype"==a||/(\.otf)($|\?)/i.test(e))t="application/x-font-opentype";else if("woff"==a||/(\.woff)($|\?)/i.test(e))t="application/font-woff";else if("woff2"==a||/(\.woff2)($|\?)/i.test(e))t="application/font-woff2";else if("eot"==a||/(\.eot)($|\?)/i.test(e))t="application/vnd.ms-fontobject";else if("sfnt"==a||/(\.sfnt)($|\?)/i.test(e))t="application/font-sfnt";var n=e;/^https?:\/\//.test(n)&&!this.isCorsEnabledForUrl(n)&&(n=PROXY_URL+"?url="+encodeURIComponent(e)),this.loadUrl(n,mxUtils.bind(this,function(t){i[e]=t,r--,s()}),mxUtils.bind(this,function(e){r--,s()}),!0,null,"data:"+t+";charset=utf-8;base64,")}})(t(n[o].substring(0,u)),a)}}else e()},EditorUi.prototype.exportToCanvas=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){s=null!=s?s:!0,c=null!=c?c:this.editor.graph,h=null!=h?h:0;var d=a?null:c.background;d==mxConstants.NONE&&(d=null),null==d&&(d=r),null==d&&0==a&&(d=this.editor.graph.defaultPageBackgroundColor),this.convertImages(c.getSvg(d,null,null,p,null,null!=o?o:!0,null,null,null,f),mxUtils.bind(this,function(n){var r=new Image;r.onload=mxUtils.bind(this,function(){try{var o=document.createElement("canvas"),a=parseInt(n.getAttribute("width")),f=parseInt(n.getAttribute("height"));u=null!=u?u:1,null!=t&&(u=s?Math.min(1,Math.min(3*t/(4*f),t/a)):t/a),a=Math.ceil(u*a)+2*h,f=Math.ceil(u*f)+2*h,o.setAttribute("width",a),o.setAttribute("height",f);var l=o.getContext("2d");null!=d&&(l.beginPath(),l.rect(0,0,a,f),l.fillStyle=d,l.fill()),l.scale(u,u),mxClient.IS_SF?window.setTimeout(function(){l.drawImage(r,h/u,h/u),e(o)},0):(l.drawImage(r,h/u,h/u),e(o))}catch(c){null!=i&&i(c)}}),r.onerror=function(e){null!=i&&i(e)};try{f&&this.editor.graph.addSvgShadow(n,n);var o=mxUtils.bind(this,function(){if(null!=this.editor.resolvedFontCss){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=this.editor.resolvedFontCss,n.getElementsByTagName("defs")[0].appendChild(e)}this.convertMath(c,n,!0,mxUtils.bind(this,function(){r.src=this.createSvgDataUri(mxUtils.getXml(n))}))});this.loadFonts(o)}catch(a){null!=i&&i(a)}}),n,l)},EditorUi.prototype.createImageUrlConverter=function(){var e=new mxUrlConverter;e.updateBaseUrl();var t=e.convert,n=this;return e.convert=function(r){if(null!=r){var i="http://"==r.substring(0,7)||"https://"==r.substring(0,8);i&&!navigator.onLine?r=n.svgBrokenImage.src:!i||r.substring(0,e.baseUrl.length)==e.baseUrl||n.crossOriginImages&&n.isCorsEnabledForUrl(r)?"chrome-extension://"!=r.substring(0,19)&&(r=t.apply(this,arguments)):r=PROXY_URL+"?url="+encodeURIComponent(r)}return r},e},EditorUi.prototype.convertImages=function(e,t,n,r){null==r&&(r=this.createImageUrlConverter());var i=0,s=n||{};n=mxUtils.bind(this,function(n,o){for(var u=e.getElementsByTagName(n),a=0;a<u.length;a++)mxUtils.bind(this,function(n){var u=r.convert(n.getAttribute(o));if(null!=u&&"data:"!=u.substring(0,5)){var a=s[u];null==a?(i++,this.convertImageToDataUri(u,function(r){null!=r&&(s[u]=r,n.setAttribute(o,r)),i--,0==i&&t(e)})):n.setAttribute(o,a)}else null!=u&&n.setAttribute(o,u)})(u[a])}),n("image","xlink:href"),n("img","src"),0==i&&t(e)},EditorUi.prototype.loadUrl=function(e,t,n,r,i,s){try{var o=r||/(\.png)($|\?)/i.test(e)||/(\.jpe?g)($|\?)/i.test(e)||/(\.gif)($|\?)/i.test(e);i=null!=i?i:!0;var u=mxUtils.bind(this,function(){mxUtils.get(e,mxUtils.bind(this,function(e){if(200<=e.getStatus()&&299>=e.getStatus()){if(null!=t){var r=e.getText();if(o){if((9==document.documentMode||10==document.documentMode)&&"undefined"!=typeof window.mxUtilsBinaryToArray){e=mxUtilsBinaryToArray(e.request.responseBody).toArray();for(var r=Array(e.length),i=0;i<e.length;i++)r[i]=String.fromCharCode(e[i]);r=r.join("")}s=null!=s?s:"data:image/png;base64,",r=s+this.base64Encode(r)}t(r)}}else null!=n&&n({code:App.ERROR_UNKNOWN},e)}),function(){null!=n&&n({code:App.ERROR_UNKNOWN})},o,this.timeout,function(){i&&null!=n&&n({code:App.ERROR_TIMEOUT,retry:u})})});u()}catch(a){null!=n&&n(a)}},EditorUi.prototype.isCorsEnabledForUrl=function(e){return null!=urlParams.cors&&null==this.corsRegExp&&(this.corsRegExp=new RegExp(decodeURIComponent(urlParams.cors))),null!=this.corsRegExp&&this.corsRegExp.test(e)||"https://raw.githubusercontent.com/"===e.substring(0,34)||"https://cdn.rawgit.com/"===e.substring(0,23)||"https://rawgit.com/"===e.substring(0,19)||/^https?:\/\/[^\/]*\.iconfinder.com\//.test(e)||/^https?:\/\/[^\/]*\.draw\.io\/proxy/.test(e)||/^https?:\/\/[^\/]*\.github\.io\//.test(e)},EditorUi.prototype.convertImageToDataUri=function(e,t){if(/(\.svg)$/i.test(e))mxUtils.get(e,mxUtils.bind(this,function(e){t(this.createSvgDataUri(e.getText()))}),function(){t(this.svgBrokenImage.src)});else{var n=new Image,r=this;this.crossOriginImages&&(n.crossOrigin="anonymous"),n.onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.height=n.height,e.width=n.width,i.drawImage(n,0,0);try{t(e.toDataURL())}catch(s){t(r.svgBrokenImage.src)}},n.onerror=function(){t(r.svgBrokenImage.src)},n.src=e}},EditorUi.prototype.importXml=function(e,t,n,r,i){t=null!=t?t:0,n=null!=n?n:0;var s=[];try{var o=this.editor.graph;if(null!=e&&0<e.length){var u=mxUtils.parseXml(e),a=this.editor.extractGraphModel(u.documentElement,null!=this.pages);if(null!=a&&"mxfile"==a.nodeName&&null!=this.pages){var f=a.getElementsByTagName("diagram");if(1==f.length)a=mxUtils.parseXml(o.decompress(mxUtils.getTextContent(f[0]))).documentElement;else if(1<f.length){o.model.beginUpdate();try{for(e=0;e<f.length;e++){f[e].removeAttribute("id");var l=this.updatePageRoot(new DiagramPage(f[e])),c=this.pages.length;null==l.getName()&&l.setName(mxResources.get("pageWithNumber",[c+1])),o.model.execute(new ChangePage(this,l,l,c))}}finally{o.model.endUpdate()}}}null!=a&&"mxGraphModel"===a.nodeName&&(s=o.importGraphModel(a,t,n,r))}}catch(h){throw i||this.handleError(h,mxResources.get("invalidOrMissingFile")),h}return s},EditorUi.prototype.isRemoteVisioFormat=function(e){return/(\.v(sd|dx))($|\?)/i.test(e)||/(\.vs(s|x))($|\?)/i.test(e)},EditorUi.prototype.importVisio=function(e,t,n,r){r=null!=r?r:e.name,n=null!=n?n:mxUtils.bind(this,function(e){this.handleError(e)});var i=mxUtils.bind(this,function(){this.loadingExtensions=!1;if(this.doImportVisio)if(this.isRemoteVisioFormat(r)&&null!=VSD_CONVERT_URL){var i=new FormData;i.append("file1",e,r);var s=new XMLHttpRequest;s.open("POST",VSD_CONVERT_URL),s.responseType="blob",s.onreadystatechange=mxUtils.bind(this,function(){if(4==s.readyState)if(200<=s.status&&299>=s.status)try{s.response.name=r,this.doImportVisio(s.response,t,n)}catch(e){n(e)}else n({})}),s.send(i)}else try{this.doImportVisio(e,t,n)}catch(o){n(o)}});this.doImportVisio||this.loadingExtensions||this.isOffline()?i():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",i))},EditorUi.prototype.importGraphML=function(e,t,n){n=null!=n?n:mxUtils.bind(this,function(e){this.handleError(e)});var r=mxUtils.bind(this,function(){this.loadingExtensions=!1;if(this.doImportGraphML)try{this.doImportGraphML(e,t,n)}catch(r){n(r)}});this.doImportGraphML||this.loadingExtensions||this.isOffline()?r():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",r))},EditorUi.prototype.exportVisio=function(){var e=mxUtils.bind(this,function(){this.loadingExtensions=!1;if("undefined"!=typeof VsdxExport)try{(new VsdxExport(this)).exportCurrentDiagrams()}catch(e){this.handleError(e)}});"undefined"!=typeof VsdxExport||this.loadingExtensions||this.isOffline()?e():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",e))},EditorUi.prototype.convertLucidChart=function(e,t,n){var r=mxUtils.bind(this,function(){this.loadingExtensions=!1;if("undefined"!=typeof window.LucidImporter)try{t(LucidImporter.importState(JSON.parse(e)))}catch(r){n(r)}else n({message:mxResources.get("serviceUnavailableOrBlocked")})});"undefined"!=typeof window.LucidImporter||this.loadingExtensions||this.isOffline()?window.setTimeout(r,0):(this.loadingExtensions=!0,"1"==urlParams.dev?mxscript("js/diagramly/Extensions.js",r):mxscript("js/extensions.min.js",r))},EditorUi.prototype.insertAsPreText=function(e,t,n){var r=this.editor.graph,i=null;r.getModel().beginUpdate();try{i=r.insertVertex(null,null,"<pre>"+e+"</pre>",t,n,1,1,"text;html=1;align=center;verticalAlign=middle;"),r.updateCellSize(i,!0)}finally{r.getModel().endUpdate()}return i},EditorUi.prototype.insertTextAt=function(e,t,n,r,i,s,o){s=null!=s?s:!0,o=null!=o?o:!0;if(null!=e)if(Graph.fileSupport&&!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat(e))this.parseFile(new Blob([e.replace(/\s+/g," ")],{type:"application/octet-stream"}),mxUtils.bind(this,function(e){4==e.readyState&&200<=e.status&&299>=e.status&&this.editor.graph.setSelectionCells(this.insertTextAt(e.responseText,t,n,!0))}));else if("data:"==e.substring(0,5)||!this.isOffline()&&(i||/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(e))){var u=this.editor.graph;if("data:image/png;base64,"==e.substring(0,22)){var a=this.extractGraphModelFromPng(e),f=this.importXml(a,t,n,s,!0);if(0<f.length)return f}if("data:image/svg+xml;"==e.substring(0,19))try{if(a=null,"data:image/svg+xml;base64,"==e.substring(0,26)?(a=e.substring(e.indexOf(",")+1),a=window.atob&&!mxClient.IS_SF?atob(a):Base64.decode(a,!0)):a=decodeURIComponent(e.substring(e.indexOf(",")+1)),f=this.importXml(a,t,n,s,!0),0<f.length)return f}catch(l){}this.loadImage(e,mxUtils.bind(this,function(r){if("data:"==e.substring(0,5))this.resizeImage(r,e,mxUtils.bind(this,function(e,r,i){u.setSelectionCell(u.insertVertex(null,null,"",u.snap(t),u.snap(n),r,i,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+this.convertDataUri(e)+";"))}),o,this.maxImageSize);else{var i=Math.min(1,Math.min(this.maxImageSize/r.width,this.maxImageSize/r.height)),s=Math.round(r.width*i);r=Math.round(r.height*i),u.setSelectionCell(u.insertVertex(null,null,"",u.snap(t),u.snap(n),s,r,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+e+";"))}}),mxUtils.bind(this,function(){var i=null;u.getModel().beginUpdate();try{i=u.insertVertex(u.getDefaultParent(),null,e,u.snap(t),u.snap(n),1,1,"text;"+(r?"html=1;":"")),u.updateCellSize(i),u.fireEvent(new mxEventObject("textInserted","cells",[i]))}finally{u.getModel().endUpdate()}u.setSelectionCell(i)}))}else{e=this.editor.graph.zapGremlins(mxUtils.trim(e));if(this.isCompatibleString(e))return this.importXml(e,t,n,s);if(0<e.length){if(!this.isLucidChartData(e)){u=this.editor.graph,i=null,u.getModel().beginUpdate();try{i=u.insertVertex(u.getDefaultParent(),null,"",u.snap(t),u.snap(n),1,1,"text;"+(r?"html=1;":"")),u.fireEvent(new mxEventObject("textInserted","cells",[i])),"<"==e.charAt(0)&&e.indexOf(">")==e.length-1&&(e=mxUtils.htmlEntities(e)),i.value=e,u.updateCellSize(i),/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/i.test(i.value)&&u.setLinkForCell(i,i.value),i.geometry.width+=u.gridSize,i.geometry.height+=u.gridSize}finally{u.getModel().endUpdate()}return[i]}this.convertLucidChart(e,mxUtils.bind(this,function(e){this.editor.graph.setSelectionCells(this.importXml(e,t,n,s))}),mxUtils.bind(this,function(e){this.handleError(e)}))}}return[]},EditorUi.prototype.formatFileSize=function(e){var t=-1;do e/=1024,t++;while(1024<e);return Math.max(e,.1).toFixed(1)+" kB; MB; GB; TB;PB;EB;ZB;YB".split(";")[t]},EditorUi.prototype.convertDataUri=function(e){if("data:"==e.substring(0,5)){var t=e.indexOf(";");0<t&&(e=e.substring(0,t)+e.substring(e.indexOf(",",t+1)))}return e},EditorUi.prototype.isRemoteFileFormat=function(e,t){return/(\"contentType\":\s*\"application\/gliffy\+json\")/.test(e)},EditorUi.prototype.isLucidChartData=function(e){return null!=e&&'{"state":"{\\"Properties\\":'==e.substring(0,26)},EditorUi.prototype.importLocalFile=function(e,t){if(e&&Graph.fileSupport&&(!mxClient.IS_IE&&!mxClient.IS_IE11||0>navigator.appVersion.indexOf("Windows NT 6.1"))){var n=document.createElement("input");n.setAttribute("type","file"),mxEvent.addListener(n,"change",mxUtils.bind(this,function(){null!=n.files&&this.importFiles(n.files,null,null,this.maxImageSize)})),n.click()}else{window.openNew=!1,window.openKey="import";if(!t){var r=Editor.useLocalStorage;Editor.useLocalStorage=!e}window.openFile=new OpenFile(mxUtils.bind(this,function(e){this.hideDialog(e)})),window.openFile.setConsumer(mxUtils.bind(this,function(e,t){if(null!=t&&Graph.fileSupport&&/(\.v(dx|sdx?))($|\?)/i.test(t)){var n=new Blob([e],{type:"application/octet-stream"});this.importVisio(n,mxUtils.bind(this,function(e){this.importXml(e)}),null,t)}else this.editor.graph.setSelectionCells(this.importXml(e))})),this.showDialog((new OpenDialog(this)).container,360,220,!0,!0,function(){window.openFile=null});if(!t){var i=this.dialog,s=i.close;this.dialog.close=mxUtils.bind(this,function(e){Editor.useLocalStorage=r,s.apply(i,arguments),e&&null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.showSplash()})}}},EditorUi.prototype.importFile=function(e,t,n,r,i,s,o,u,a,f,l){f=null!=f?f:!0;var c=!1,h=null,p=mxUtils.bind(this,function(e){var t=null;null!=e&&"<mxlibrary"==e.substring(0,10)?this.loadLibrary(new LocalLibrary(this,e,o)):t=this.importXml(e,n,r,f),null!=u&&u(t)});return"image"==t.substring(0,5)?(a=!1,"image/png"==t.substring(0,9)&&(t=l?null:this.extractGraphModelFromPng(e),null!=t&&0<t.length&&(h=this.importXml(t,n,r,f),a=!0)),a||(h=this.editor.graph,t=e.indexOf(";"),0<t&&(e=e.substring(0,t)+e.substring(e.indexOf(",",t+1))),f&&h.isGridEnabled()&&(n=h.snap(n),r=h.snap(r)),h=[h.insertVertex(null,null,"",n,r,i,s,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+e+";")])):/(\.*<graphml )/.test(e)?(c=!0,this.importGraphML(e,p)):null!=a&&null!=o&&(/(\.v(dx|sdx?))($|\?)/i.test(o)||/(\.vs(x|sx?))($|\?)/i.test(o))?(c=!0,this.importVisio(a,p)):!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat(e,o)?(c=!0,this.parseFile(null!=a?a:new Blob([e],{type:"application/octet-stream"}),mxUtils.bind(this,function(e){4==e.readyState&&(200<=e.status&&299>=e.status?p(e.responseText):null!=u&&u(null))}),o)):/(\.v(sd|dx))($|\?)/i.test(o)||/(\.vs(s|x))($|\?)/i.test(o)||(h=this.insertTextAt(this.validateFileData(e),n,r,!0,null,f)),c||null==u||u(h),h},EditorUi.prototype.base64Encode=function(e){for(var t="",n=0,r=e.length,i,s,o;n<r;){i=e.charCodeAt(n++)&255;if(n==r){t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((i&3)<<4),t+="==";break}s=e.charCodeAt(n++);if(n==r){t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((i&3)<<4|(s&240)>>4),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((s&15)<<2),t+="=";break}o=e.charCodeAt(n++),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((i&3)<<4|(s&240)>>4),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((s&15)<<2|(o&192)>>6),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o&63)}return t},EditorUi.prototype.importFiles=function(e,t,n,r,i,s,o,u,a,f,l,c){t=null!=t?t:0,n=null!=n?n:0,r=null!=r?r:this.maxImageSize,f=null!=f?f:this.maxImageBytes;var h=null!=t&&null!=n,p=!0,d=!1;if(!mxClient.IS_CHROMEAPP&&null!=e)for(var v=l||this.resampleThreshold,m=0;m<e.length;m++)if("image/"==e[m].type.substring(0,6)&&e[m].size>v){d=!0;break}var g=mxUtils.bind(this,function(){var a=this.editor.graph,d=a.gridSize;i=null!=i?i:mxUtils.bind(this,function(e,t,n,r,i,s,o,u,a){return null!=e&&"<mxlibrary"==e.substring(0,10)?(this.spinner.stop(),this.loadLibrary(new LocalLibrary(this,e,o)),null):this.importFile(e,t,n,r,i,s,o,u,a,h,c)}),s=null!=s?s:mxUtils.bind(this,function(e){a.setSelectionCells(e)});if(this.spinner.spin(document.body,mxResources.get("loading")))for(var v=e.length,m=v,g=[],y=mxUtils.bind(this,function(e,t){g[e]=t;if(0==--m){this.spinner.stop();if(null!=u)u(g);else{var n=[];a.getModel().beginUpdate();try{for(var r=0;r<g.length;r++){var i=g[r]();null!=i&&(n=n.concat(i))}}finally{a.getModel().endUpdate()}}s(n)}}),w=0;w<v;w++)mxUtils.bind(this,function(s){var u=e[s],h=new FileReader;h.onload=mxUtils.bind(this,function(e){if(null==o||o(u))if("image/"==u.type.substring(0,6))if("image/svg"==u.type.substring(0,9)){var h=e.target.result,v=h.indexOf(","),m=decodeURIComponent(escape(atob(h.substring(v+1)))),g=mxUtils.parseXml(m),m=g.getElementsByTagName("svg");if(0<m.length){var m=m[0],w=c?null:m.getAttribute("content");null!=w&&"<"!=w.charAt(0)&&"%"!=w.charAt(0)&&(w=unescape(window.atob?atob(w):Base64.decode(w,!0))),null!=w&&"%"==w.charAt(0)&&(w=decodeURIComponent(w)),null==w||"<mxfile "!==w.substring(0,8)&&"<mxGraphModel "!==w.substring(0,14)?y(s,mxUtils.bind(this,function(){try{if(h.substring(0,v+1),null!=g){var e=g.getElementsByTagName("svg");if(0<e.length){var o=e[0],f=parseFloat(o.getAttribute("width")),l=parseFloat(o.getAttribute("height")),c=o.getAttribute("viewBox");if(null==c||0==c.length)o.setAttribute("viewBox","0 0 "+f+" "+l);else if(isNaN(f)||isNaN(l)){var p=c.split(" ");3<p.length&&(f=parseFloat(p[2]),l=parseFloat(p[3]))}h=this.createSvgDataUri(mxUtils.getXml(o));var m=Math.min(1,Math.min(r/Math.max(1,f)),r/Math.max(1,l)),y=i(h,u.type,t+s*d,n+s*d,Math.max(1,Math.round(f*m)),Math.max(1,Math.round(l*m)),u.name);if(isNaN(f)||isNaN(l)){var w=new Image;w.onload=mxUtils.bind(this,function(){f=Math.max(1,w.width),l=Math.max(1,w.height),y[0].geometry.width=f,y[0].geometry.height=l,o.setAttribute("viewBox","0 0 "+f+" "+l),h=this.createSvgDataUri(mxUtils.getXml(o));var e=h.indexOf(";");0<e&&(h=h.substring(0,e)+h.substring(h.indexOf(",",e+1))),a.setCellStyles("image",h,[y[0]])}),w.src=this.createSvgDataUri(mxUtils.getXml(o))}return y}}}catch(E){}return null})):y(s,mxUtils.bind(this,function(){return i(w,"text/xml",t+s*d,n+s*d,0,0,u.name)}))}else y(s,mxUtils.bind(this,function(){return null}))}else{m=!1;if("image/png"==u.type){var E=c?null:this.extractGraphModelFromPng(e.target.result);if(null!=E&&0<E.length){var S=new Image;S.src=e.target.result,y(s,mxUtils.bind(this,function(){return i(E,"text/xml",t+s*d,n+s*d,S.width,S.height,u.name)})),m=!0}}m||(mxClient.IS_CHROMEAPP?(this.spinner.stop(),this.showError(mxResources.get("error"),mxResources.get("dragAndDropNotSupported"),mxResources.get("cancel"),mxUtils.bind(this,function(){}),null,mxResources.get("ok"),mxUtils.bind(this,function(){this.actions.get("import").funct()}))):this.loadImage(e.target.result,mxUtils.bind(this,function(o){this.resizeImage(o,e.target.result,mxUtils.bind(this,function(o,a,c){y(s,mxUtils.bind(this,function(){if(null!=o&&o.length<f){var h=p&&this.isResampleImage(e.target.result,l)?Math.min(1,Math.min(r/a,r/c)):1;return i(o,u.type,t+s*d,n+s*d,Math.round(a*h),Math.round(c*h),u.name)}return this.handleError({message:mxResources.get("imageTooBig")}),null}))}),p,r,l)}),mxUtils.bind(this,function(){this.handleError({message:mxResources.get("invalidOrMissingFile")})})))}else i(e.target.result,u.type,t+s*d,n+s*d,240,160,u.name,function(e){y(s,function(){return e})})}),/(\.v(dx|sdx?))($|\?)/i.test(u.name)||/(\.vs(x|sx?))($|\?)/i.test(u.name)?i(null,u.type,t+s*d,n+s*d,240,160,u.name,function(e){y(s,function(){return e})},u):"image"==u.type.substring(0,5)?h.readAsDataURL(u):h.readAsText(u)})(w)});d?this.confirmImageResize(function(e){p=e,g()},a):g()},EditorUi.prototype.confirmImageResize=function(e,t){t=null!=t?t:!1;var n=null!=this.spinner&&null!=this.spinner.pause?this.spinner.pause():function(){},r=isLocalStorage||mxClient.IS_CHROMEAPP?mxSettings.getResizeImages():null,i=function(r,i){if(r||t)mxSettings.setResizeImages(r?i:null),mxSettings.save();n(),e(i)};null==r||t?this.showDialog((new ConfirmDialog(this,mxResources.get("resizeLargeImages"),function(e){i(e,!0)},function(e){i(e,!1)},mxResources.get("resize"),mxResources.get("actualSize"),'<img style="margin-top:8px;" src="'+Editor.loResImage+'"/>','<img style="margin-top:8px;" src="'+Editor.hiResImage+'"/>',isLocalStorage||mxClient.IS_CHROMEAPP)).container,340,isLocalStorage||mxClient.IS_CHROMEAPP?220:200,!0,!0):i(!1,r)},EditorUi.prototype.parseFile=function(e,t,n){n=null!=n?n:e.name;var r=new FormData;r.append("format","xml"),r.append("upfile",e,n);var i=new XMLHttpRequest;i.open("POST",OPEN_URL),i.onreadystatechange=function(){t(i)},i.send(r)},EditorUi.prototype.isResampleImage=function(e,t){return t=null!=t?t:this.resampleThreshold,e.length>t},EditorUi.prototype.resizeImage=function(e,t,n,r,i,s){i=null!=i?i:this.maxImageSize;var o=Math.max(1,e.width),u=Math.max(1,e.height);if(r&&this.isResampleImage(t,s))try{var a=Math.max(o/i,u/i);if(1<a){var f=Math.round(o/a),l=Math.round(u/a),c=document.createElement("canvas");c.width=f,c.height=l,c.getContext("2d").drawImage(e,0,0,f,l);var h=c.toDataURL();if(h.length<t.length){var p=document.createElement("canvas");p.width=f,p.height=l;var d=p.toDataURL();h!==d&&(t=h,o=f,u=l)}}}catch(v){}n(t,o,u)},EditorUi.prototype.crcTable=[];for(var n=0;256>n;n++)for(var r=n,i=0;8>i;i++)r=1==(r&1)?3988292384^r>>>1:r>>>1,EditorUi.prototype.crcTable[n]=r;EditorUi.prototype.updateCRC=function(e,t,n,r){for(var i=0;i<r;i++)e=EditorUi.prototype.crcTable[(e^t[n+i])&255]^e>>>8;return e},EditorUi.prototype.crc32=function(e){this.crcTable=this.crcTable||this.createCrcTable();for(var t=-1,n=0;n<e.length;n++)t=t>>>8^this.crcTable[(t^e.charCodeAt(n))&255];return(t^-1)>>>0},EditorUi.prototype.writeGraphModelToPng=function(e,t,n,r,i){function s(e,t){var n=a;return a+=t,e.substring(n,a)}function o(e){return e=s(e,4),e.charCodeAt(3)+(e.charCodeAt(2)<<8)+(e.charCodeAt(1)<<16)+(e.charCodeAt(0)<<24)}function u(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}e=e.substring(e.indexOf(",")+1),e=window.atob?atob(e):Base64.decode(e,!0);var a=0;if(s(e,8)!=String.fromCharCode(137)+"PNG"+String.fromCharCode(13,10,26,10))null!=i&&i();else{if(s(e,4),"IHDR"==s(e,4)){s(e,17),i=e.substring(0,a);do{var f=o(e);if("IDAT"==s(e,4)){i=e.substring(0,a-8),n=n+String.fromCharCode(0)+("zTXt"==t?String.fromCharCode(0):"")+r,r=4294967295,r=this.updateCRC(r,t,0,4),r=this.updateCRC(r,n,0,n.length),i+=u(n.length)+t+n+u(r^4294967295),i+=e.substring(a-8,e.length);break}i+=e.substring(a-8,a-4+f),s(e,f),s(e,4)}while(f);return"data:image/png;base64,"+(window.btoa?btoa(i):Base64.encode(i,!0))}null!=i&&i()}},EditorUi.prototype.extractGraphModelFromPng=function(e){var t=null;try{var n=e.substring(e.indexOf(",")+1),r=window.atob&&!mxClient.IS_SF?atob(n):Base64.decode(n,!0);EditorUi.parsePng(r,mxUtils.bind(this,function(e,n,i){e=r.substring(e+8,e+8+i),"zTXt"==n?(i=e.indexOf(String.fromCharCode(0)),"mxGraphModel"==e.substring(0,i)&&(e=this.editor.graph.bytesToString(pako.inflateRaw(e.substring(i+2))).replace(/\+/g," "),null!=e&&0<e.length&&(t=e))):"tEXt"==n&&(e=e.split(String.fromCharCode(0)),1<e.length&&"mxGraphModel"==e[0]&&(t=e[1]));if(null!=t||"IDAT"==n)return!0}))}catch(i){}return null!=t&&"%"==t.charAt(0)&&(t=decodeURIComponent(t)),null!=t&&"%"==t.charAt(0)&&(t=decodeURIComponent(t)),t},EditorUi.prototype.loadImage=function(e,t,n){var r=new Image;r.onload=function(){t(r)},null!=n&&(r.onerror=n),r.src=e};var s=EditorUi.prototype.init;EditorUi.prototype.init=function(){mxStencilRegistry.allowEval=mxStencilRegistry.allowEval&&!this.isOfflineApp(),"undefined"!=typeof window.mxSettings&&(this.formatWidth=mxSettings.getFormatWidth());var e=this,t=this.editor.graph;t.getLinkTitle=function(t){return e.getLinkTitle(t)},t.customLinkClicked=function(t){var n=!1;try{e.handleCustomLink(t),n=!0}catch(r){e.handleError(r)}return n};var n=this.clearDefaultStyle;this.clearDefaultStyle=function(){n.apply(this,arguments)},this.isOffline()||"undefined"==typeof window.EditDataDialog||(EditDataDialog.placeholderHelpLink="https://desk.draw.io/support/solutions/articles/16000051979");var r=e.editor.getEditBlankUrl;this.editor.getEditBlankUrl=function(t){t=null!=t?t:"";if(null!=e.pages&&null!=e.currentPage)for(var n=0;n<e.pages.length;n++)if(e.pages[n]==e.currentPage){0<n&&(t+=(0<t.length?"&":"?")+"page="+n);break}return"1"==urlParams.dev&&(t+=(0<t.length?"&":"?")+"dev=1&drawdev=1"),r.apply(this,arguments)};var i=t.addClickHandler;t.addClickHandler=function(e,n,r){var s=n;n=function(e,n){if(null==n){var r=mxEvent.getSource(e);"a"==r.nodeName.toLowerCase()&&(n=r.getAttribute("href"))}null!=n&&t.isCustomLink(n)&&(mxEvent.isTouchEvent(e)||!mxEvent.isPopupTrigger(e))&&t.customLinkClicked(n)&&mxEvent.consume(e),null!=s&&s(e,n)},i.call(this,e,n,r)},s.apply(this,arguments),mxClient.IS_SVG&&this.editor.graph.addSvgShadow(t.view.canvas.ownerSVGElement,null,!0),e.actions.get("print").funct=function(){e.showDialog((new PrintDialog(e)).container,360,null!=e.pages&&1<e.pages.length?420:360,!0,!0)},this.defaultFilename=mxResources.get("untitledDiagram");var o=t.getGlobalVariable;t.getGlobalVariable=function(t){return"page"==t&&null!=e.currentPage?e.currentPage.getName():"pagenumber"==t?null!=e.currentPage&&null!=e.pages?mxUtils.indexOf(e.pages,e.currentPage)+1:1:o.apply(this,arguments)};var u=t.labelLinkClicked;t.labelLinkClicked=function(e,n,r){var i=n.getAttribute("href");if(null==i||!t.isCustomLink(i)||!mxEvent.isTouchEvent(r)&&mxEvent.isPopupTrigger(r))u.apply(this,arguments);else{if(!t.isEnabled()||null!=e&&t.isCellLocked(e.cell))t.customLinkClicked(i),t.getRubberband().reset();mxEvent.consume(r)}},this.editor.getOrCreateFilename=function(){var t=e.defaultFilename,n=e.getCurrentFile();return null!=n&&(t=null!=n.getTitle()?n.getTitle():t),t};var a=this.actions.get("print");a.setEnabled(!mxClient.IS_IOS||!navigator.standalone),a.visible=a.isEnabled();if(!this.editor.chromeless||this.editor.editable){var f=function(){window.setTimeout(function(){l.innerHTML="&nbsp;",l.focus(),document.execCommand("selectAll",!1,null)},0)};this.keyHandler.bindAction(70,!0,"find"),this.keyHandler.bindAction(67,!0,"copyStyle",!0),this.keyHandler.bindAction(86,!0,"pasteStyle",!0),this.keyHandler.bindAction(77,!0,"editGeometry",!0),this.keyHandler.bindAction(88,!0,"insertText",!0),this.keyHandler.bindAction(75,!0,"insertRectangle"),this.keyHandler.bindAction(75,!0,"insertEllipse",!0),mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||(this.altShiftActions[83]="synchronize"),mxClient.IS_IE||t.container.addEventListener("paste",mxUtils.bind(this,function(e){var t=this.editor.graph;if(!mxEvent.isConsumed(e))try{for(var n=e.clipboardData||e.originalEvent.clipboardData,r=!1,i=0;i<n.types.length;i++)if("text/"===n.types[i].substring(0,5)){r=!0;break}if(!r){var s=n.items;for(index in s){var o=s[index];if("file"===o.kind){if(t.isEditing())this.importFiles([o.getAsFile()],0,0,this.maxImageSize,function(e,n,r,i,s,o){t.insertImage(e,s,o)},function(){},function(e){return"image/"==e.type.substring(0,6)},function(e){for(var t=0;t<e.length;t++)e[t]()});else{var u=this.editor.graph.getInsertPoint();this.importFiles([o.getAsFile()],u.x,u.y,this.maxImageSize),mxEvent.consume(e)}break}}}}catch(a){}}),!1);var l=document.createElement("div");l.style.position="absolute",l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.display="block",l.contentEditable=!0,mxUtils.setOpacity(l,0),l.style.width="1px",l.style.height="1px",l.innerHTML="&nbsp;";var c=!1;this.keyHandler.bindControlKey(88,null),this.keyHandler.bindControlKey(67,null),this.keyHandler.bindControlKey(86,null),mxEvent.addListener(document,"keydown",mxUtils.bind(this,function(e){var n=mxEvent.getSource(e);null==t.container||!t.isEnabled()||t.isMouseDown||t.isEditing()||null!=this.dialog||"INPUT"==n.nodeName||"TEXTAREA"==n.nodeName||!(224==e.keyCode||!mxClient.IS_MAC&&17==e.keyCode||mxClient.IS_MAC&&91==e.keyCode)||c||(l.style.left=t.container.scrollLeft+10+"px",l.style.top=t.container.scrollTop+10+"px",t.container.appendChild(l),c=!0,mxClient.IS_QUIRKS?window.setTimeout(function(){l.focus(),document.execCommand("selectAll",!1,null)},0):(l.focus(),document.execCommand("selectAll",!1,null)))})),mxEvent.addListener(document,"keyup",mxUtils.bind(this,function(e){var n=e.keyCode;window.setTimeout(mxUtils.bind(this,function(){!c||224!=n&&17!=n&&91!=n||(c=!1,t.isEditing()||null!=this.dialog||null==t.container||t.container.focus(),l.parentNode.removeChild(l),null==this.dialog&&mxUtils.clearSelection())}),0)})),mxEvent.addListener(l,"copy",mxUtils.bind(this,function(e){t.isEnabled()&&(mxClipboard.copy(t),this.copyCells(l),f())})),mxEvent.addListener(l,"cut",mxUtils.bind(this,function(e){t.isEnabled()&&(mxClipboard.copy(t),this.copyCells(l,!0),f())})),mxEvent.addListener(l,"paste",mxUtils.bind(this,function(e){t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())&&(l.innerHTML="&nbsp;",l.focus(),window.setTimeout(mxUtils.bind(this,function(){this.pasteCells(e,l),l.innerHTML="&nbsp;"}),0))}),!0);var h=this.isSelectionAllowed;this.isSelectionAllowed=function(e){return mxEvent.getSource(e)==l?!0:h.apply(this,arguments)}}this.spinner=this.createSpinner(document.body.clientWidth/2-2,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0)/2,24),Graph.fileSupport&&this.editor.graph.addListener(mxEvent.EDITING_STARTED,mxUtils.bind(this,function(e){var t=this.editor.graph,n=t.cellEditor.text2,r=null;null!=n&&(mxEvent.addListener(n,"dragleave",function(e){null!=r&&(r.parentNode.removeChild(r),r=null),e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(n,"dragover",mxUtils.bind(this,function(e){null==r&&(!mxClient.IS_IE||10<document.documentMode)&&(r=this.highlightElement(n)),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(n,"drop",mxUtils.bind(this,function(e){null!=r&&(r.parentNode.removeChild(r),r=null);if(0<e.dataTransfer.files.length)this.importFiles(e.dataTransfer.files,0,0,this.maxImageSize,function(e,n,r,i,s,o){t.insertImage(e,s,o)},function(){},function(e){return"image/"==e.type.substring(0,6)},function(e){for(var t=0;t<e.length;t++)e[t]()},mxEvent.isControlDown(e));else if(0<=mxUtils.indexOf(e.dataTransfer.types,"text/uri-list")){var n=e.dataTransfer.getData("text/uri-list");/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(n)?this.loadImage(decodeURIComponent(n),mxUtils.bind(this,function(e){var r=Math.max(1,e.width);e=Math.max(1,e.height);var i=this.maxImageSize,i=Math.min(1,Math.min(i/Math.max(1,r)),i/Math.max(1,e));t.insertImage(decodeURIComponent(n),r*i,e*i)})):document.execCommand("insertHTML",!1,e.dataTransfer.getData("text/plain"))}else 0<=mxUtils.indexOf(e.dataTransfer.types,"text/html")?document.execCommand("insertHTML",!1,e.dataTransfer.getData("text/html")):0<=mxUtils.indexOf(e.dataTransfer.types,"text/plain")&&document.execCommand("insertHTML",!1,e.dataTransfer.getData("text/plain"));e.stopPropagation(),e.preventDefault()})))}));if("1"==urlParams.ruler&&"undefined"!=typeof mxRuler){a=document.createElement("div"),a.style.position="absolute",a.style.top="95px",a.style.left="250px",a.style.width="2000px",a.style.height="30px",a.style.background="whiteSmoke",document.body.appendChild(a);var p=document.createElement("div");p.style.position="absolute",p.style.top="125px",p.style.left="220px",p.style.width="30px",p.style.height="1000px",p.style.background="whiteSmoke",document.body.appendChild(p);var d=document.createElement("div");d.style.position="absolute",d.style.top="95px",d.style.left="220px",d.style.width="30px",d.style.height="30px",d.style.background="whiteSmoke",document.body.appendChild(d),this.vRuler=new mxRuler(this.editor.graph,p,!0),this.hRuler=new mxRuler(this.editor.graph,a,!1)}if("1"==urlParams.styledev){a=document.getElementById("geFooter"),null!=a&&(this.styleInput=document.createElement("input"),this.styleInput.setAttribute("type","text"),this.styleInput.style.position="absolute",this.styleInput.style.top="14px",this.styleInput.style.left="2px",this.styleInput.style.width="98%",this.styleInput.style.visibility="hidden",this.styleInput.style.opacity="0.9",mxEvent.addListener(this.styleInput,"change",mxUtils.bind(this,function(){this.editor.graph.getModel().setStyle(this.editor.graph.getSelectionCell(),this.styleInput.value)})),a.appendChild(this.styleInput),this.editor.graph.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(e,t){if(0<this.editor.graph.getSelectionCount()){var n=this.editor.graph.getSelectionCell(),n=this.editor.graph.getModel().getStyle(n);this.styleInput.value=n||"",this.styleInput.style.visibility="visible"}else this.styleInput.style.visibility="hidden"})));var v=this.isSelectionAllowed;this.isSelectionAllowed=function(e){return mxEvent.getSource(e)==this.styleInput?!0:v.apply(this,arguments)}}a=document.getElementById("geInfo"),null!=a&&a.parentNode.removeChild(a);if(Graph.fileSupport&&(!this.editor.chromeless||this.editor.editable)){var g=null;mxEvent.addListener(t.container,"dragleave",function(e){t.isEnabled()&&(null!=g&&(g.parentNode.removeChild(g),g=null),e.stopPropagation(),e.preventDefault())}),mxEvent.addListener(t.container,"dragover",mxUtils.bind(this,function(e){null==g&&(!mxClient.IS_IE||10<document.documentMode)&&(g=this.highlightElement(t.container)),null!=this.sidebar&&this.sidebar.hideTooltip(),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(t.container,"drop",mxUtils.bind(this,function(e){null!=g&&(g.parentNode.removeChild(g),g=null);if(t.isEnabled()){var n=mxUtils.convertPoint(t.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),r=t.view.translate,i=t.view.scale,s=n.x/i-r.x,o=n.y/i-r.y;mxEvent.isAltDown(e)&&(o=s=0);if(0<e.dataTransfer.files.length)this.importFiles(e.dataTransfer.files,s,o,this.maxImageSize,null,null,null,null,mxEvent.isControlDown(e),null,null,mxEvent.isShiftDown(e));else{var u=0<=mxUtils.indexOf(e.dataTransfer.types,"text/uri-list")?e.dataTransfer.getData("text/uri-list"):null,n=this.extractGraphModelFromEvent(e,null!=this.pages);if(null!=n)t.setSelectionCells(this.importXml(n,s,o,!0));else if(0<=mxUtils.indexOf(e.dataTransfer.types,"text/html")){var a=e.dataTransfer.getData("text/html"),n=document.createElement("div");n.innerHTML=a;var f=null,r=n.getElementsByTagName("img");null!=r&&1==r.length?(a=r[0].getAttribute("src"),/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(a)||(f=!0)):(n=n.getElementsByTagName("a"),null!=n&&1==n.length&&(a=n[0].getAttribute("href")));var l=!0,c=mxUtils.bind(this,function(){t.setSelectionCells(this.insertTextAt(a,s,o,!0,f,null,l))});f&&a.length>this.resampleThreshold?this.confirmImageResize(function(e){l=e,c()},mxEvent.isControlDown(e)):c()}else null!=u&&/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(u)?this.loadImage(decodeURIComponent(u),mxUtils.bind(this,function(e){var n=Math.max(1,e.width);e=Math.max(1,e.height);var r=this.maxImageSize,r=Math.min(1,Math.min(r/Math.max(1,n)),r/Math.max(1,e));t.setSelectionCell(t.insertVertex(null,null,"",s,o,n*r,e*r,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image="+u+";"))}),mxUtils.bind(this,function(e){t.setSelectionCells(this.insertTextAt(u,s,o,!0))})):0<=mxUtils.indexOf(e.dataTransfer.types,"text/plain")&&t.setSelectionCells(this.insertTextAt(e.dataTransfer.getData("text/plain"),s,o,!0))}}e.stopPropagation(),e.preventDefault()}),!1)}this.initPages(),this.editUpdateListener=mxUtils.bind(this,function(e,t){var n=t.getProperty("edit");null!=n&&this.updateEditReferences(n)}),this.editor.undoManager.addListener(mxEvent.BEFORE_UNDO,this.editUpdateListener),this.editor.undoManager.addListener(mxEvent.BEFORE_REDO,this.editUpdateListener),"1"==urlParams.embed&&this.initializeEmbedMode(),this.installSettings()},EditorUi.prototype.getLinkTitle=function(e){var t=Graph.prototype.getLinkTitle.apply(this,arguments);if("data:page/id,"==e.substring(0,13)){var n=e.indexOf(",");0<n&&(t=this.getPageById(e.substring(n+1)),t=null!=t?t.getName():mxResources.get("pageNotFound"))}else"data:"==e.substring(0,5)&&(t=mxResources.get("action"));return t},EditorUi.prototype.handleCustomLink=function(e){if("data:page/id,"==e.substring(0,13)){var t=e.indexOf(",");if(!(e=this.getPageById(e.substring(t+1))))throw Error(mxResources.get("pageNotFound")||"Page not found");this.selectPage(e)}else this.editor.graph.handleCustomLink(e)},EditorUi.prototype.isSettingsEnabled=function(){return"undefined"!=typeof window.mxSettings&&(isLocalStorage||mxClient.IS_CHROMEAPP)},EditorUi.prototype.installSettings=function(){if(this.isSettingsEnabled()){ColorDialog.recentColors=mxSettings.getRecentColors(),this.fireEvent(new mxEventObject("styleChanged","keys",[],"values",[],"cells",[])),this.editor.graph.connectionHandler.setCreateTarget(mxSettings.isCreateTarget()),this.fireEvent(new mxEventObject("copyConnectChanged")),this.addListener("copyConnectChanged",mxUtils.bind(this,function(e,t){mxSettings.setCreateTarget(this.editor.graph.connectionHandler.isCreateTarget()),mxSettings.save()})),this.editor.graph.pageFormat=mxSettings.getPageFormat(),this.addListener("pageFormatChanged",mxUtils.bind(this,function(e,t){mxSettings.setPageFormat(this.editor.graph.pageFormat),mxSettings.save()})),this.editor.graph.view.gridColor=mxSettings.getGridColor(),this.addListener("gridColorChanged",mxUtils.bind(this,function(e,t){mxSettings.setGridColor(this.editor.graph.view.gridColor),mxSettings.save()}));if(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp)this.editor.addListener("autosaveChanged",mxUtils.bind(this,function(e,t){mxSettings.setAutosave(this.editor.autosave),mxSettings.save()})),this.editor.autosave=mxSettings.getAutosave();null!=this.sidebar&&this.sidebar.showPalette("search",mxSettings.settings.search),this.editor.chromeless&&!this.editor.editable||null==this.sidebar||!(mxSettings.settings.isNew||8>=parseInt(mxSettings.settings.version||0))||(this.toggleScratchpad(),mxSettings.save()),this.addListener("formatWidthChanged",function(){mxSettings.setFormatWidth(this.formatWidth),mxSettings.save()})}},EditorUi.prototype.copyCells=function(e,t){var n=this.editor.graph;if(n.isSelectionEmpty())e.innerHTML="";else{var r=mxUtils.sortCells(n.model.getTopmostCells(n.getSelectionCells())),i=mxUtils.getXml(this.editor.graph.encodeCells(r));mxUtils.setTextContent(e,encodeURIComponent(i)),t?(n.removeCells(r,!1),n.lastPasteXml=null):(n.lastPasteXml=i,n.pasteCounter=0),e.focus(),document.execCommand("selectAll",!1,null)}},EditorUi.prototype.pasteCells=function(e,t){if(!mxEvent.isConsumed(e)){var n=t.getElementsByTagName("span");if(null!=n&&0<n.length&&"application/vnd.lucid.chart.objects"===n[0].getAttribute("data-lucid-type")){var r=n[0].getAttribute("data-lucid-content");null!=r&&0<r.length&&(this.convertLucidChart(r,mxUtils.bind(this,function(e){this.editor.graph.setSelectionCells(this.importXml(e,0,0))}),mxUtils.bind(this,function(e){this.handleError(e)})),mxEvent.consume(e))}else{var r=this.editor.graph,i=mxUtils.trim(mxClient.IS_QUIRKS||8==document.documentMode?mxUtils.getTextContent(t):t.textContent),s=!1;try{var o=i.lastIndexOf("%3E");0<=o&&o<i.length-3&&(i=i.substring(0,o+3))}catch(u){}try{var n=t.getElementsByTagName("span"),a=null!=n&&0<n.length?mxUtils.trim(decodeURIComponent(n[0].textContent)):decodeURIComponent(i);this.isCompatibleString(a)&&(s=!0,i=a)}catch(u){}r.lastPasteXml==i?r.pasteCounter++:(r.lastPasteXml=i,r.pasteCounter=0),n=r.pasteCounter*r.gridSize;if(null!=i&&0<i.length&&(s||this.isCompatibleString(i)?r.setSelectionCells(this.importXml(i,n,n)):(s=r.getInsertPoint(),r.isMouseInsertPoint()&&(n=0,r.lastPasteXml==i&&0<r.pasteCounter&&r.pasteCounter--),r.setSelectionCells(this.insertTextAt(i,s.x+n,s.y+n,!0))),!r.isSelectionEmpty())){r.scrollCellToVisible(r.getSelectionCell()),null!=this.hoverIcons&&this.hoverIcons.update(r.view.getState(r.getSelectionCell()));try{mxEvent.consume(e)}catch(u){}}}}},EditorUi.prototype.addFileDropHandler=function(e){if(Graph.fileSupport)for(var t=null,n=0;n<e.length;n++)mxEvent.addListener(e[n],"dragleave",function(e){null!=t&&(t.parentNode.removeChild(t),t=null),e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(e[n],"dragover",mxUtils.bind(this,function(e){(this.editor.graph.isEnabled()||"1"!=urlParams.embed)&&null==t&&(!mxClient.IS_IE||10<document.documentMode&&12>document.documentMode)&&(t=this.highlightElement()),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(e[n],"drop",mxUtils.bind(this,function(e){null!=t&&(t.parentNode.removeChild(t),t=null);if(this.editor.graph.isEnabled()||"1"!=urlParams.embed)if(0<e.dataTransfer.files.length)this.hideDialog(),"1"==urlParams.embed?this.importFiles(e.dataTransfer.files,0,0,this.maxImageSize,null,null,null,null,!mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)):this.openFiles(e.dataTransfer.files,!0);else{var n=this.extractGraphModelFromEvent(e);if(null==n){var r=null!=e.dataTransfer?e.dataTransfer:e.clipboardData;null!=r&&(10==document.documentMode||11==document.documentMode?n=r.getData("Text"):(n=null,n=0<=mxUtils.indexOf(r.types,"text/uri-list")?e.dataTransfer.getData("text/uri-list"):0<=mxUtils.indexOf(r.types,"text/html")?r.getData("text/html"):null,null!=n&&0<n.length?(r=document.createElement("div"),r.innerHTML=n,r=r.getElementsByTagName("img"),0<r.length&&(n=r[0].getAttribute("src"))):0<=mxUtils.indexOf(r.types,"text/plain")&&(n=r.getData("text/plain"))),null!=n&&("data:image/png;base64,"==n.substring(0,22)?(n=this.extractGraphModelFromPng(n),null!=n&&0<n.length&&this.openLocalFile(n,null,!0)):!this.isOffline()&&this.isRemoteFileFormat(n)?(new mxXmlRequest(OPEN_URL,"format=xml&data="+encodeURIComponent(n))).send(mxUtils.bind(this,function(e){200<=e.getStatus()&&299>=e.getStatus()&&this.openLocalFile(e.getText(),null,!0)})):/^https?:\/\//.test(n)&&(null==this.getCurrentFile()?window.location.hash="#U"+encodeURIComponent(n):window.openWindow((mxClient.IS_CHROMEAPP?"https://www.draw.io/":"https://"+location.host+"/")+window.location.search+"#U"+encodeURIComponent(n)))))}else this.openLocalFile(n,null,!0)}e.stopPropagation(),e.preventDefault()}))},EditorUi.prototype.highlightElement=function(e){var t=0,n=0,r,i;if(null==e){i=document.body;var s=document.documentElement;r=(i.clientWidth||s.clientWidth)-3,i=Math.max(i.clientHeight||0,s.clientHeight)-3}else t=e.offsetTop,n=e.offsetLeft,r=e.clientWidth,i=e.clientHeight;return s=document.createElement("div"),s.style.zIndex=mxPopupMenu.prototype.zIndex+2,s.style.border="3px dotted rgb(254, 137, 12)",s.style.pointerEvents="none",s.style.position="absolute",s.style.top=t+"px",s.style.left=n+"px",s.style.width=Math.max(0,r-3)+"px",s.style.height=Math.max(0,i-3)+"px",null!=e&&e.parentNode==this.editor.graph.container?this.editor.graph.container.appendChild(s):document.body.appendChild(s),s},EditorUi.prototype.stringToCells=function(e){e=mxUtils.parseXml(e);var t=this.editor.extractGraphModel(e.documentElement);e=[];if(null!=t){var n=new mxCodec(t.ownerDocument),r=new mxGraphModel;n.decode(t,r),t=r.getChildAt(r.getRoot(),0);for(n=0;n<r.getChildCount(t);n++)e.push(r.getChildAt(t,n))}return e},EditorUi.prototype.openFiles=function(e,t){if(this.spinner.spin(document.body,mxResources.get("loading")))for(var n=0;n<e.length;n++)mxUtils.bind(this,function(e){var n=new FileReader;n.onload=mxUtils.bind(this,function(n){try{var r=n.target.result,i=e.name;if(null!=i&&0<i.length){!this.useCanvasForExport&&/(\.png)$/i.test(i)&&(i=i.substring(0,i.length-4)+".xml");var s=mxUtils.bind(this,function(e){i=0<=i.lastIndexOf(".")?i.substring(0,i.lastIndexOf("."))+".xml":i+".xml";if("<mxlibrary"==e.substring(0,10)){null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.openLocalFile(this.emptyDiagramXml,this.defaultFilename,t);try{this.loadLibrary(new LocalLibrary(this,e,i))}catch(n){this.handleError(n,mxResources.get("errorLoadingFile"))}}else this.openLocalFile(e,i,t)});if(/(\.v(dx|sdx?))($|\?)/i.test(i)||/(\.vs(x|sx?))($|\?)/i.test(i))this.importVisio(e,mxUtils.bind(this,function(e){this.spinner.stop(),s(e)}));else if(/(\.*<graphml )/.test(r))this.importGraphML(r,mxUtils.bind(this,function(e){this.spinner.stop(),s(e)}));else if(Graph.fileSupport&&!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat(r,i))this.parseFile(e,mxUtils.bind(this,function(e){4==e.readyState&&(this.spinner.stop(),200<=e.status&&299>=e.status?s(e.responseText):this.handleError({message:mxResources.get(413==e.status?"drawingTooLarge":"invalidOrMissingFile")},mxResources.get("errorLoadingFile")))}));else if(this.isLucidChartData(r))/(\.json)$/i.test(i)&&(i=i.substring(0,i.length-5)+".xml"),this.convertLucidChart(r,mxUtils.bind(this,function(e){this.spinner.stop(),this.openLocalFile(e,i,t)}),mxUtils.bind(this,function(e){this.spinner.stop(),this.handleError(e)}));else if("<mxlibrary"==n.target.result.substring(0,10)){this.spinner.stop(),null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.openLocalFile(this.emptyDiagramXml,this.defaultFilename,t);try{this.loadLibrary(new LocalLibrary(this,n.target.result,e.name))}catch(o){this.handleError(o,mxResources.get("errorLoadingFile"))}}else"image/png"==e.type.substring(0,9)&&(r=this.extractGraphModelFromPng(r)),this.spinner.stop(),this.openLocalFile(r,i,t)}}catch(o){this.handleError(o)}}),n.onerror=mxUtils.bind(this,function(e){this.spinner.stop(),this.handleError(e),window.openFile=null}),"image"===e.type.substring(0,5)&&"image/svg"!==e.type.substring(0,9)?n.readAsDataURL(e):n.readAsText(e)})(e[n])},EditorUi.prototype.openLocalFile=function(e,t,n){var r=this.getCurrentFile(),i=mxUtils.bind(this,function(){window.openFile=null;if(null==t&&null!=this.getCurrentFile()&&this.isDiagramEmpty()){var r=mxUtils.parseXml(e);null!=r&&(this.editor.setGraphXml(r.documentElement),this.editor.graph.selectAll())}else this.fileLoaded(new LocalFile(this,e,t||this.defaultFilename,n))});if(!(null!=e&&0<e.length))throw Error(mxResources.get("notADiagramFile"));null==r||!r.isModified()&&(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp)?i():(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp)&&null!=r&&r.isModified()?this.confirm(mxResources.get("allChangesLost"),null,i,mxResources.get("cancel"),mxResources.get("discardChanges")):(window.openFile=new OpenFile(function(){window.openFile=null}),window.openFile.setData(e,t),window.openWindow(this.getUrl(),null,mxUtils.bind(this,function(){null!=r&&r.isModified()?this.confirm(mxResources.get("allChangesLost"),null,i,mxResources.get("cancel"),mxResources.get("discardChanges")):i()})))},EditorUi.prototype.getBasenames=function(){var e={};if(null!=this.pages)for(var t=0;t<this.pages.length;t++)this.updatePageRoot(this.pages[t]),this.addBasenamesForCell(this.pages[t].root,e);else this.addBasenamesForCell(this.editor.graph.model.getRoot(),e);var t=[],n;for(n in e)t.push(n);return t},EditorUi.prototype.addBasenamesForCell=function(e,t){function n(e){if(null!=e){var n=e.lastIndexOf(".");0<n&&(e=e.substring(n+1,e.length)),null==t[e]&&(t[e]=!0)}}var r=this.editor.graph,i=r.getCellStyle(e);n(mxStencilRegistry.getBasenameForStencil(i[mxConstants.STYLE_SHAPE])),r.model.isEdge(e)&&(n(mxMarker.getPackageForType(i[mxConstants.STYLE_STARTARROW])),n(mxMarker.getPackageForType(i[mxConstants.STYLE_ENDARROW])));for(var i=r.model.getChildCount(e),s=0;s<i;s++)this.addBasenamesForCell(r.model.getChildAt(e,s),t)},EditorUi.prototype.setGraphEnabled=function(e){this.diagramContainer.style.visibility=e?"":"hidden",this.formatContainer.style.visibility=e?"":"hidden",this.sidebarFooterContainer.style.display=e?"":"none",this.sidebarContainer.style.display=e?"":"none",this.hsplit.style.display=e?"":"none",this.editor.graph.setEnabled(e),null!=this.tabContainer&&(this.tabContainer.style.visibility=e?"":"hidden"),e||(null!=this.actions.outlineWindow&&this.actions.outlineWindow.window.setVisible(!1),null!=this.actions.layersWindow&&this.actions.layersWindow.window.setVisible(!1),null!=this.menus.tagsWindow&&this.menus.tagsWindow.window.setVisible(!1),null!=this.menus.findWindow&&this.menus.findWindow.window.setVisible(!1))},EditorUi.prototype.initializeEmbedMode=function(){this.setGraphEnabled(!1),(window.opener||window.parent)!=window&&("1"!=urlParams.spin||this.spinner.spin(document.body,mxResources.get("loading")))&&this.installMessageHandler(mxUtils.bind(this,function(e,t,n){this.spinner.stop(),this.addEmbedButtons(),this.setGraphEnabled(!0),null!=e&&0<e.length?(this.setFileData(e),this.editor.isChromelessView()?this.editor.graph.isLightboxView()&&this.lightboxFit():this.showLayersDialog(),this.chromelessResize&&this.chromelessResize()):(this.editor.graph.model.clear(),this.editor.fireEvent(new mxEventObject("resetGraphView"))),this.editor.undoManager.clear(),this.editor.modified=null!=n?n:!1,this.updateUi(),window.self!==window.top&&window.focus(),null!=this.format&&this.format.refresh()}))},EditorUi.prototype.showLayersDialog=function(){1<this.editor.graph.getModel().getChildCount(this.editor.graph.getModel().getRoot())&&(null==this.actions.layersWindow?this.actions.get("layers").funct():this.actions.layersWindow.window.setVisible(!0))},EditorUi.prototype.getPublicUrl=function(e,t){null!=e?e.getPublicUrl(t):t(null)},EditorUi.prototype.createLoadMessage=function(e){var t=this.editor.graph;return{event:e,pageVisible:t.pageVisible,translate:t.view.translate,bounds:t.getGraphBounds(),currentPage:this.getSelectedPageIndex(),scale:t.view.scale,page:t.view.getBackgroundPageBounds()}},EditorUi.prototype.installMessageHandler=function(e){var t=null,n=!1,r=!1,i=null,s=mxUtils.bind(this,function(e,t){this.editor.modified&&"0"!=urlParams.modified?null!=urlParams.modified&&this.editor.setStatus(mxUtils.htmlEntities(mxResources.get(urlParams.modified))):this.editor.setStatus("")});this.editor.graph.model.addListener(mxEvent.CHANGE,s),mxEvent.addListener(window,"message",mxUtils.bind(this,function(s){if(s.source==(window.opener||window.parent)){var u=s.data,a=mxUtils.bind(this,function(e){if(null!=e&&"function"==typeof e.charAt&&"<"!=e.charAt(0))try{"data:image/png;base64,"==e.substring(0,22)?e=this.extractGraphModelFromPng(e):"data:image/svg+xml;base64,"==e.substring(0,26)?e=atob(e.substring(26)):"data:image/svg+xml;utf8,"==e.substring(0,24)&&(e=e.substring(24)),null!=e&&("%"==e.charAt(0)?e=decodeURIComponent(e):"<"!=e.charAt(0)&&(e=this.editor.graph.decompress(e)))}catch(t){}return e});if("json"==urlParams.proto){try{u=JSON.parse(u)}catch(h){u=null}if(null==u)return;if("dialog"==u.action){this.showError(null!=u.titleKey?mxResources.get(u.titleKey):u.title,null!=u.messageKey?mxResources.get(u.messageKey):u.message,null!=u.buttonKey?mxResources.get(u.buttonKey):u.button),null!=u.modified&&(this.editor.modified=u.modified);return}if("prompt"==u.action){this.spinner.stop(),a=new FilenameDialog(this,u.defaultValue||"",null!=u.okKey?mxResources.get(u.okKey):null,function(e){null!=e&&o.postMessage(JSON.stringify({event:"prompt",value:e,message:u}),"*")},null!=u.titleKey?mxResources.get(u.titleKey):u.title),this.showDialog(a.container,300,80,!0,!1),a.init();return}if("draft"==u.action){var p=a(u.xml);this.spinner.stop(),a=new DraftDialog(this,mxResources.get("draftFound",[u.name||this.defaultFilename]),p,mxUtils.bind(this,function(){this.hideDialog(),o.postMessage(JSON.stringify({event:"draft",result:"edit",message:u}),"*")}),mxUtils.bind(this,function(){this.hideDialog(),o.postMessage(JSON.stringify({event:"draft",result:"discard",message:u}),"*")}),u.editKey?mxResources.get(u.editKey):null,u.discardKey?mxResources.get(u.discardKey):null,u.ignore?mxUtils.bind(this,function(){this.hideDialog(),o.postMessage(JSON.stringify({event:"draft",result:"ignore",message:u}),"*")}):null),this.showDialog(a.container,640,480,!0,!1,mxUtils.bind(this,function(e){e&&this.actions.get("exit").funct()}));try{a.init()}catch(h){o.postMessage(JSON.stringify({event:"draft",error:h.toString(),message:u}),"*")}return}if("template"==u.action){this.spinner.stop(),a=1==u.enableRecent,p=1==u.enableSearch,a=new NewDialog(this,!1,null!=u.callback,mxUtils.bind(this,function(t,n){t=t||this.emptyDiagramXml,null!=u.callback?o.postMessage(JSON.stringify({event:"template",xml:t,blank:t==this.emptyDiagramXml,name:n}),"*"):(e(t,s,t!=this.emptyDiagramXml),this.editor.modified||this.editor.setStatus(""))}),null,null,null,null,null,null,null,a?mxUtils.bind(this,function(e){this.recentReadyCallback=e,o.postMessage(JSON.stringify({event:"recentDocs"}),"*")}):null,p?mxUtils.bind(this,function(e,t){this.searchReadyCallback=t,o.postMessage(JSON.stringify({event:"searchDocs",searchStr:e}),"*")}):null,function(e,t,n){o.postMessage(JSON.stringify({event:"template",docUrl:e,info:t,name:n}),"*")}),this.showDialog(a.container,620,440,!0,!1,mxUtils.bind(this,function(e){e&&this.actions.get("exit").funct()})),a.init();return}if("searchDocsList"==u.action)this.searchReadyCallback(u.list,u.errorMsg);else if("recentDocsList"==u.action)this.recentReadyCallback(u.list,u.errorMsg);else{if("textContent"==u.action){this.editor.graph.setEnabled(!1);var v=this.editor.graph,a="";if(null!=this.pages)for(p=0;p<this.pages.length;p++){var m=v;this.currentPage!=this.pages[p]&&(m=this.createTemporaryGraph(v.getStylesheet()),m.model.setRoot(this.pages[p].root)),a+=this.pages[p].getName()+" "+m.getIndexableText()+" "}else a=v.getIndexableText();this.editor.graph.setEnabled(!0),o.postMessage(JSON.stringify({event:"textContent",data:a,message:u}),"*");return}if("status"==u.action){null!=u.messageKey?this.editor.setStatus(mxUtils.htmlEntities(mxResources.get(u.messageKey))):null!=u.message&&this.editor.setStatus(mxUtils.htmlEntities(u.message)),null!=u.modified&&(this.editor.modified=u.modified);return}if("spinner"==u.action){var g=null!=u.messageKey?mxResources.get(u.messageKey):u.message;null==u.show||u.show?this.spinner.spin(document.body,g):this.spinner.stop();return}if("export"==u.action){if("png"==u.format||"xmlpng"==u.format){if(null==u.spin&&null==u.spinKey||this.spinner.spin(document.body,null!=u.spinKey?mxResources.get(u.spinKey):u.spin)){var y=null!=u.xml?u.xml:this.getFileData(!0);this.editor.graph.setEnabled(!1);var v=this.editor.graph,w=mxUtils.bind(this,function(e){this.editor.graph.setEnabled(!0),this.spinner.stop();var t=this.createLoadMessage("export");t.format=u.format,t.message=u,t.data=e,t.xml=encodeURIComponent(y),o.postMessage(JSON.stringify(t),"*")}),E=mxUtils.bind(this,function(e){null==e&&(e=Editor.blankImage),"xmlpng"==u.format&&(e=this.writeGraphModelToPng(e,"zTXt","mxGraphModel",atob(this.editor.graph.compress(y)))),v!=this.editor.graph&&v.container.parentNode.removeChild(v.container),w(e)});if(this.isExportToCanvas()){if(null!=this.pages&&this.currentPage!=this.pages[0]){var v=this.createTemporaryGraph(v.getStylesheet()),S=v.getGlobalVariable,x=this.pages[0];v.getGlobalVariable=function(e){return"page"==e?x.getName():"pagenumber"==e?1:S.apply(this,arguments)},document.body.appendChild(v.container),v.model.setRoot(x.root)}this.exportToCanvas(mxUtils.bind(this,function(e){E(e.toDataURL("image/png"))}),null,null,null,mxUtils.bind(this,function(){E(null)}),null,null,null,null,null,null,v)}else(new mxXmlRequest(EXPORT_URL,"format=png&embedXml="+("xmlpng"==u.format?"1":"0")+"&base64=1&xml="+encodeURIComponent(encodeURIComponent(y)))).send(mxUtils.bind(this,function(e){200<=e.getStatus()&&299>=e.getStatus()?w("data:image/png;base64,"+e.getText()):E(null)}),mxUtils.bind(this,function(){E(null)}))}}else{null!=u.xml&&0<u.xml.length&&this.setFileData(u.xml),g=this.createLoadMessage("export");if("html2"==u.format||"html"==u.format&&("0"!=urlParams.pages||null!=this.pages&&1<this.pages.length))a=this.getXmlFileData(),g.xml=mxUtils.getXml(a),g.data=this.getFileData(null,null,!0,null,null,null,a),g.format=u.format;else if("html"==u.format)y=this.editor.getGraphXml(),g.data=this.getHtml(y,this.editor.graph),g.xml=mxUtils.getXml(y),g.format=u.format;else{mxSvgCanvas2D.prototype.foAltText=null,a=this.editor.graph.background,a==mxConstants.NONE&&(a=null),g.xml=this.getFileData(!0),g.format="svg";if(u.embedImages||null==u.embedImages){if(null==u.spin&&null==u.spinKey||this.spinner.spin(document.body,null!=u.spinKey?mxResources.get(u.spinKey):u.spin))this.editor.graph.setEnabled(!1),"xmlsvg"==u.format?this.getEmbeddedSvg(g.xml,this.editor.graph,null,!0,mxUtils.bind(this,function(e){this.editor.graph.setEnabled(!0),this.spinner.stop(),g.data=this.createSvgDataUri(e),o.postMessage(JSON.stringify(g),"*")})):this.convertImages(this.editor.graph.getSvg(a),mxUtils.bind(this,function(e){this.editor.graph.setEnabled(!0),this.spinner.stop(),g.data=this.createSvgDataUri(mxUtils.getXml(e)),o.postMessage(JSON.stringify(g),"*")}));return}a="xmlsvg"==u.format?this.getEmbeddedSvg(this.getFileData(!0),this.editor.graph,null,!0):mxUtils.getXml(this.editor.graph.getSvg(a)),g.data=this.createSvgDataUri(a)}o.postMessage(JSON.stringify(g),"*")}return}if("load"!=u.action){o.postMessage(JSON.stringify({error:"unknownMessage",data:JSON.stringify(u)}),"*");return}r=1==u.autosave,this.hideDialog(),null!=u.modified&&null==urlParams.modified&&(urlParams.modified=u.modified),null!=u.saveAndExit&&null==urlParams.saveAndExit&&(urlParams.saveAndExit=u.saveAndExit),null!=u.title&&null!=this.buttonContainer&&(p=document.createElement("span"),mxUtils.write(p,u.title),"atlas"==uiTheme?(this.buttonContainer.style.paddingRight="12px",this.buttonContainer.style.paddingTop="12px"):"min"!=uiTheme&&(this.buttonContainer.style.paddingRight="38px",this.buttonContainer.style.paddingTop="6px"),null!=this.embedFilenameSpan&&this.embedFilenameSpan.parentNode.removeChild(this.embedFilenameSpan),this.buttonContainer.appendChild(p),this.embedFilenameSpan=p),u=null!=u.xmlpng?this.extractGraphModelFromPng(u.xmlpng):u.xml}}var T=mxUtils.bind(this,function(s,u){n=!0;try{e(s,u)}catch(a){this.handleError(a)}n=!1,null!=urlParams.modified&&this.editor.setStatus("");var h=mxUtils.bind(this,function(){return"0"!=urlParams.pages||null!=this.pages&&1<this.pages.length?this.getFileData(!0):mxUtils.getXml(this.editor.getGraphXml())});i=h(),r&&null==t&&(t=mxUtils.bind(this,function(e,t){var r=h();if(r!=i&&!n){var s=this.createLoadMessage("autosave");s.xml=r,r=JSON.stringify(s),(window.opener||window.parent).postMessage(r,"*")}i=r}),this.editor.graph.model.addListener(mxEvent.CHANGE,t),this.editor.graph.addListener("gridSizeChanged",t),this.editor.graph.addListener("shadowVisibleChanged",t),this.addListener("pageFormatChanged",t),this.addListener("pageScaleChanged",t),this.addListener("backgroundColorChanged",t),this.addListener("backgroundImageChanged",t),this.addListener("foldingEnabledChanged",t),this.addListener("mathEnabledChanged",t),this.addListener("gridEnabledChanged",t),this.addListener("guidesEnabledChanged",t),this.addListener("pageViewChanged",t)),"1"!=urlParams.returnbounds&&"json"!=urlParams.proto||o.postMessage(JSON.stringify(this.createLoadMessage("load")),"*")});null!=u&&"function"==typeof u.substring&&"data:application/vnd.visio;base64,"==u.substring(0,34)?(a="0M8R4KGxGuE"==u.substring(34,45)?"raw.vsd":"raw.vsdx",this.importVisio(this.base64ToBlob(u.substring(u.indexOf(",")+1)),function(e){T(e,s)},mxUtils.bind(this,function(e){this.handleError(e)}),a)):null!=u&&"function"==typeof u.substring&&!this.isOffline()&&(new XMLHttpRequest).upload&&this.isRemoteFileFormat(u,"")?this.parseFile(new Blob([u],{type:"application/octet-stream"}),mxUtils.bind(this,function(e){4==e.readyState&&200<=e.status&&299>=e.status&&"<mxGraphModel"==e.responseText.substring(0,13)&&T(e.responseText,s)}),""):null!=u&&"function"==typeof u.substring&&this.isLucidChartData(u)?this.convertLucidChart(u,mxUtils.bind(this,function(e){T(e)}),mxUtils.bind(this,function(e){this.handleError(e)})):(u=a(u),T(u,s))}}));var o=window.opener||window.parent,s="json"==urlParams.proto?JSON.stringify({event:"init"}):urlParams.ready||"ready";o.postMessage(s,"*")},EditorUi.prototype.addEmbedButtons=function(){if(null!=this.menubar){var e=document.createElement("div");e.style.display="inline-block",e.style.position="absolute",e.style.paddingTop="atlas"==uiTheme?"2px":"3px",e.style.paddingLeft="8px",e.style.paddingBottom="2px";var t=document.createElement("button");mxUtils.write(t,mxResources.get("save")),t.setAttribute("title",mxResources.get("save")+" ("+Editor.ctrlKey+"+S)"),t.className="geBigButton",t.style.fontSize="12px",t.style.padding="4px 6px 4px 6px",t.style.borderRadius="3px",mxEvent.addListener(t,"click",mxUtils.bind(this,function(){this.actions.get("save").funct()})),e.appendChild(t),"1"==urlParams.saveAndExit&&(t=document.createElement("a"),mxUtils.write(t,mxResources.get("saveAndExit")),t.setAttribute("title",mxResources.get("saveAndExit")),t.style.fontSize="12px",t.style.marginLeft="6px",t.style.padding="4px",t.style.cursor="pointer",mxEvent.addListener(t,"click",mxUtils.bind(this,function(){this.actions.get("saveAndExit").funct()})),e.appendChild(t)),t=document.createElement("a"),mxUtils.write(t,mxResources.get("exit")),t.setAttribute("title",mxResources.get("exit")),t.style.fontSize="12px",t.style.marginLeft="6px",t.style.marginRight="20px",t.style.padding="4px",t.style.cursor="pointer",mxEvent.addListener(t,"click",mxUtils.bind(this,function(){this.actions.get("exit").funct()})),e.appendChild(t),this.toolbar.container.appendChild(e),this.toolbar.staticElements.push(e),e.style.right="atlas"!=uiTheme?"52px":"42px"}},EditorUi.prototype.showImportCsvDialog=function(){null==this.importCsvDialog&&(this.importCsvDialog=new TextareaDialog(this,mxResources.get("csv")+":",Editor.defaultCsvValue,mxUtils.bind(this,function(e){this.importCsv(e)}),null,null,620,430,null,!0,!0,mxResources.get("import"))),this.showDialog(this.importCsvDialog.container,640,520,!0,!0),this.importCsvDialog.init()},EditorUi.prototype.importCsv=function(e,t){try{var n=e.split("\n"),r=[];if(0<n.length){var i={},s=null,o=null,u=null,a=null,f="",l="auto",c="auto",h=null,p=null,d=40,v=40,m=100,g=0,y=this.editor.graph;y.getGraphBounds();for(var b=function(){null!=t?t(U):(y.setSelectionCells(U),y.scrollCellToVisible(y.getSelectionCell()))},w=y.getFreeInsertPoint(),E=w.x,S=w.y,w=S,x=null,T="auto",a=null,N=[],C=null,k=null,L=0;L<n.length&&"#"==n[L].charAt(0);){e=n[L];for(L++;L<n.length&&"\\"==e.charAt(e.length-1)&&"#"==n[L].charAt(0);)e=e.substring(0,e.length-1)+mxUtils.trim(n[L].substring(1)),L++;if("#"!=e.charAt(1)){var A=e.indexOf(":");if(0<A){var O=mxUtils.trim(e.substring(1,A)),M=mxUtils.trim(e.substring(A+1));"label"==O?x=y.sanitizeHtml(M):"style"==O?s=M:"parentstyle"==O?o=M:"identity"==O&&0<M.length&&"-"!=M?u=M:"parent"==O&&0<M.length&&"-"!=M?a=M:"namespace"==O&&0<M.length&&"-"!=M?f=M:"width"==O?l=M:"height"==O?c=M:"left"==O&&0<M.length?h=M:"top"==O&&0<M.length?p=M:"ignore"==O?k=M.split(","):"connect"==O?N.push(JSON.parse(M)):"link"==O?C=M:"padding"==O?g=parseFloat(M):"edgespacing"==O?d=parseFloat(M):"nodespacing"==O?v=parseFloat(M):"levelspacing"==O?m=parseFloat(M):"layout"==O&&(T=M)}}}var _=this.editor.csvToArray(n[L]),O=A=null;if(null!=u||null!=a)for(var D=0;D<_.length;D++)u==_[D]&&(A=D),a==_[D]&&(O=D);null==x&&(x="%"+_[0]+"%");if(null!=N)for(var P=0;P<N.length;P++)null==i[N[P].to]&&(i[N[P].to]={});y.model.beginUpdate();try{for(D=L+1;D<n.length;D++){var H=this.editor.csvToArray(n[D]);if(null==H){var B=40<n[D].length?n[D].substring(0,40)+"...":n[D];throw Error(D+" ("+B+") "+mxResources.get("containsValidationErrors"))}if(H.length==_.length){var j=null,F=null!=A?f+H[A]:null;null!=F&&(j=y.model.getCell(F)),null==j&&(j=new mxCell(x,new mxGeometry(E,w,0,0),s||"whiteSpace=wrap;html=1;"),j.vertex=!0,j.id=F);for(var I=0;I<H.length;I++)y.setAttributeForCell(j,_[I],H[I]);y.setAttributeForCell(j,"placeholders","1"),j.style=y.replacePlaceholders(j,j.style);for(P=0;P<N.length;P++)i[N[P].to][j.getAttribute(N[P].to)]=j;null!=C&&"link"!=C&&(y.setLinkForCell(j,j.getAttribute(C)),y.setAttributeForCell(j,C,null)),y.fireEvent(new mxEventObject("cellsInserted","cells",[j]));var q=this.editor.graph.getPreferredSizeForCell(j);j.vertex&&(null!=h&&null!=j.getAttribute(h)&&(j.geometry.x=E+parseFloat(j.getAttribute(h))),null!=p&&null!=j.getAttribute(p)&&(j.geometry.y=S+parseFloat(j.getAttribute(p))),"@"==l.charAt(0)&&null!=j.getAttribute(l.substring(1))?j.geometry.width=parseFloat(j.getAttribute(l.substring(1))):j.geometry.width="auto"==l?q.width+g:parseFloat(l),"@"==c.charAt(0)&&null!=j.getAttribute(c.substring(1))?j.geometry.height=parseFloat(j.getAttribute(c.substring(1))):j.geometry.height="auto"==c?q.height+g:parseFloat(c),w+=j.geometry.height+v),a=null!=O?y.model.getCell(f+H[O]):null,null!=a?(a.style=y.replacePlaceholders(a,o),y.addCell(j,a)):r.push(y.addCell(j))}}for(var R=r.slice(),U=r.slice(),P=0;P<N.length;P++)for(var z=N[P],D=0;D<r.length;D++){var j=r[D],W=j.getAttribute(z.from);if(null!=W){y.setAttributeForCell(j,z.from,null);for(var X=W.split(","),I=0;I<X.length;I++){var V=i[z.to][X[I]];null!=V&&(x=z.label,null!=z.fromlabel&&(x=(j.getAttribute(z.fromlabel)||"")+(x||"")),null!=z.tolabel&&(x=(x||"")+(V.getAttribute(z.tolabel)||"")),U.push(y.insertEdge(null,null,x||"",z.invert?V:j,z.invert?j:V,z.style||y.createCurrentEdgeStyle())),mxUtils.remove(z.invert?j:V,R))}}}if(null!=k)for(D=0;D<r.length;D++)for(j=r[D],I=0;I<k.length;I++)y.setAttributeForCell(j,mxUtils.trim(k[I]),null);var $=new mxParallelEdgeLayout(y);$.spacing=d;var J=function(){$.execute(y.getDefaultParent());for(var e=0;e<r.length;e++){var t=y.getCellGeometry(r[e]);t.x=Math.round(y.snap(t.x)),t.y=Math.round(y.snap(t.y)),"auto"==l&&(t.width=Math.round(y.snap(t.width))),"auto"==c&&(t.height=Math.round(y.snap(t.height)))}};if("circle"==T){var K=new mxCircleLayout(y);K.resetEdges=!1;var Q=K.isVertexIgnored;K.isVertexIgnored=function(e){return Q.apply(this,arguments)||0>mxUtils.indexOf(r,e)},this.executeLayout(function(){K.execute(y.getDefaultParent()),J()},!0,b),b=null}else if("horizontaltree"==T||"verticaltree"==T||"auto"==T&&U.length==2*r.length-1&&1==R.length){y.view.validate();var G=new mxCompactTreeLayout(y,"horizontaltree"==T);G.levelDistance=v,G.edgeRouting=!1,G.resetEdges=!1,this.executeLayout(function(){G.execute(y.getDefaultParent(),0<R.length?R[0]:null)},!0,b),b=null}else if("horizontalflow"==T||"verticalflow"==T||"auto"==T&&1==R.length){y.view.validate();var Y=new mxHierarchicalLayout(y,"horizontalflow"==T?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH);Y.intraCellSpacing=v,Y.parallelEdgeSpacing=d,Y.interRankCellSpacing=m,Y.disableEdgeStyle=!1,this.executeLayout(function(){Y.execute(y.getDefaultParent(),U),y.moveCells(U,E,S)},!0,b),b=null}else if("organic"==T||"auto"==T&&U.length>r.length){y.view.validate();var Z=new mxFastOrganicLayout(y);Z.forceConstant=3*v,Z.resetEdges=!1;var et=Z.isVertexIgnored;Z.isVertexIgnored=function(e){return et.apply(this,arguments)||0>mxUtils.indexOf(r,e)},$=new mxParallelEdgeLayout(y),$.spacing=d,this.executeLayout(function(){Z.execute(y.getDefaultParent()),J()},!0,b),b=null}this.hideDialog()}finally{y.model.endUpdate()}null!=b&&b()}}catch(tt){this.handleError(tt)}},EditorUi.prototype.getSearch=function(e){var t="";if("1"!=urlParams.offline&&"1"!=urlParams.demo&&null!=e&&0<window.location.search.length){var n="?",r;for(r in urlParams)0>mxUtils.indexOf(e,r)&&null!=urlParams[r]&&(t+=n+r+"="+urlParams[r],n="&")}else t=window.location.search;return t},EditorUi.prototype.getUrl=function(e){e=null!=e?e:window.location.pathname;var t=0<e.indexOf("?")?1:0;if("1"==urlParams.offline)e+=window.location.search;else{var n="tmp libs clibs state fileId code share notitle data url embed client create title splash".split(" "),r;for(r in urlParams)0>mxUtils.indexOf(n,r)&&(e=0==t?e+"?":e+"&",null!=urlParams[r]&&(e+=r+"="+urlParams[r],t++))}return e},EditorUi.prototype.showLinkDialog=function(e,t,n){e=new LinkDialog(this,e,t,n,!0),this.showDialog(e.container,480,130,!0,!0),e.init()};var o=EditorUi.prototype.createOutline;EditorUi.prototype.createOutline=function(e){var t=o.apply(this,arguments),n=this.editor.graph,r=t.getSourceGraphBounds;t.getSourceGraphBounds=function(){if(mxUtils.hasScrollbars(n.container)&&n.pageVisible&&null!=this.source.minimumGraphSize){var e=this.source.getPagePadding(),t=this.source.view.scale;return new mxRectangle(0,0,Math.ceil(this.source.minimumGraphSize.width-2*e.x/t),Math.ceil(this.source.minimumGraphSize.height-2*e.y/t))}return r.apply(this,arguments)};var i=t.getSourceContainerSize;t.getSourceContainerSize=function(){if(mxUtils.hasScrollbars(n.container)&&null!=this.source.minimumGraphSize){var e=this.source.getPagePadding(),t=this.source.view.scale;return new mxRectangle(0,0,Math.ceil(this.source.minimumGraphSize.width*t-2*e.x),Math.ceil(this.source.minimumGraphSize.height*t-2*e.y))}return i.apply(this,arguments)},t.getOutlineOffset=function(e){if(mxUtils.hasScrollbars(n.container)&&null!=this.source.minimumGraphSize){var r=this.source.getPagePadding();return new mxPoint(Math.round(Math.max(0,(t.outline.container.clientWidth/e-(this.source.minimumGraphSize.width-2*r.x))/2)-r.x),Math.round(Math.max(0,(t.outline.container.clientHeight/e-(this.source.minimumGraphSize.height-2*r.y))/2)-r.y-5/e))}return new mxPoint(8/e,8/e)};var s=t.init;return t.init=function(){s.apply(this,arguments),t.outline.view.getBackgroundPageBounds=function(){var e=n.getPageLayout(),t=n.getPageSize();return new mxRectangle(this.scale*(this.translate.x+e.x*t.width),this.scale*(this.translate.y+e.y*t.height),this.scale*e.width*t.width,this.scale*e.height*t.height)},t.outline.view.validateBackgroundPage()},this.editor.addListener("pageSelected",function(e,n){var r=n.getProperty("change"),i=t.source,s=t.outline;s.pageScale=i.pageScale,s.pageFormat=i.pageFormat,s.background=i.background,s.pageVisible=i.pageVisible,s.background=i.background;var o=mxUtils.getCurrentStyle(i.container);s.container.style.backgroundColor=o.backgroundColor,null!=i.view.backgroundPageShape&&null!=s.view.backgroundPageShape&&(s.view.backgroundPageShape.fill=i.view.backgroundPageShape.fill),t.outline.view.clear(r.previousPage.root,!0),t.outline.view.validate()}),t},EditorUi.prototype.getServiceCount=function(e,t){var n=0;return null==this.drive&&"function"!=typeof window.DriveClient||n++,t||null==this.dropbox&&"function"!=typeof window.DropboxClient||n++,null==this.oneDrive&&"function"!=typeof window.OneDriveClient||n++,t||null==this.gitHub||n++,t||null==this.trello&&"function"!=typeof window.TrelloClient||n++,n++,n},EditorUi.prototype.updateUi=function(){this.updateButtonContainer(),this.updateActionStates();var e=this.getCurrentFile(),t=null!=e||"1"==urlParams.embed&&this.editor.graph.isEnabled();this.menus.get("viewPanels").setEnabled(t),this.menus.get("viewZoom").setEnabled(t);var n=("1"!=urlParams.embed||!this.editor.graph.isEnabled())&&(null==e||e.isRestricted());this.actions.get("makeCopy").setEnabled(!n),this.actions.get("print").setEnabled(!n),this.menus.get("exportAs").setEnabled(!n),this.menus.get("embed").setEnabled(!n),n="1"!=urlParams.embed||this.editor.graph.isEnabled(),this.menus.get("extras").setEnabled(n),Editor.enableCustomLibraries&&(this.menus.get("openLibraryFrom").setEnabled(n),this.menus.get("newLibrary").setEnabled(n)),e="1"==urlParams.embed&&this.editor.graph.isEnabled()||null!=e&&e.isEditable(),this.actions.get("image").setEnabled(t),this.actions.get("zoomIn").setEnabled(t),this.actions.get("zoomOut").setEnabled(t),this.actions.get("resetView").setEnabled(t),this.actions.get("undo").setEnabled(this.canUndo()&&e),this.actions.get("redo").setEnabled(this.canRedo()&&e),this.menus.get("edit").setEnabled(t),this.menus.get("view").setEnabled(t),this.menus.get("importFrom").setEnabled(e),this.menus.get("arrange").setEnabled(e),null!=this.toolbar&&(null!=this.toolbar.edgeShapeMenu&&this.toolbar.edgeShapeMenu.setEnabled(e),null!=this.toolbar.edgeStyleMenu&&this.toolbar.edgeStyleMenu.setEnabled(e));if(this.isAppCache()){var r=applicationCache;if(null!=r&&null==this.offlineStatus){this.offlineStatus=document.createElement("div"),this.offlineStatus.className="geItem",this.offlineStatus.style.position="absolute",this.offlineStatus.style.fontSize="8pt",this.offlineStatus.style.top="2px",this.offlineStatus.style.right="12px",this.offlineStatus.style.color="#666",this.offlineStatus.style.margin="4px",this.offlineStatus.style.padding="2px",this.offlineStatus.style.verticalAlign="middle",this.offlineStatus.innerHTML="",this.menubarContainer.appendChild(this.offlineStatus),mxEvent.addListener(this.offlineStatus,"click",mxUtils.bind(this,function(){var e=this.offlineStatus.getElementsByTagName("img");null!=e&&0<e.length&&this.alert(e[0].getAttribute("title"))}));var r=window.applicationCache,i=null,t=mxUtils.bind(this,function(){var e=r.status,t;e==r.CHECKING&&(e=r.DOWNLOADING);switch(e){case r.UNCACHED:t="";break;case r.IDLE:t="min"==uiTheme?"":'<img title="draw.io is up to date." border="0" src="'+IMAGE_PATH+'/checkmark.gif"/>';break;case r.DOWNLOADING:t='<img title="Downloading new version..." border="0" src="'+IMAGE_PATH+'/spin.gif"/>';break;case r.UPDATEREADY:t='<img title="'+mxUtils.htmlEntities(mxResources.get("restartForChangeRequired"))+'" border="0" src="'+IMAGE_PATH+'/download.png"/>';break;case r.OBSOLETE:t='<img title="Obsolete" border="0" src="'+IMAGE_PATH+'/clear.gif"/>';break;default:t='<img title="Unknown" border="0" src="'+IMAGE_PATH+'/clear.gif"/>'}e!=i&&(this.offlineStatus.innerHTML=t,i=e)});mxEvent.addListener(r,"checking",t),mxEvent.addListener(r,"noupdate",t),mxEvent.addListener(r,"downloading",t),mxEvent.addListener(r,"progress",t),mxEvent.addListener(r,"cached",t),mxEvent.addListener(r,"updateready",t),mxEvent.addListener(r,"obsolete",t),mxEvent.addListener(r,"error",t),t()}}else this.updateUserElement()},EditorUi.prototype.updateButtonContainer=function(){},EditorUi.prototype.updateUserElement=function(){},EditorUi.prototype.isDiagramActive=function(){var e=this.getCurrentFile();return null!=e&&e.isEditable()||"1"==urlParams.embed&&this.editor.graph.isEnabled()};var u=EditorUi.prototype.updateActionStates;EditorUi.prototype.updateActionStates=function(){u.apply(this,arguments);var e=this.editor.graph,t=this.isDiagramActive(),n=this.getCurrentFile();this.actions.get("pageSetup").setEnabled(t),this.actions.get("autosave").setEnabled(null!=n&&n.isEditable()&&n.isAutosaveOptional()),this.actions.get("guides").setEnabled(t),this.actions.get("editData").setEnabled(t),this.actions.get("shadowVisible").setEnabled(t),this.actions.get("connectionArrows").setEnabled(t),this.actions.get("connectionPoints").setEnabled(t),this.actions.get("copyStyle").setEnabled(t&&!e.isSelectionEmpty()),this.actions.get("pasteStyle").setEnabled(t&&!e.isSelectionEmpty()),this.actions.get("editGeometry").setEnabled(e.getModel().isVertex(e.getSelectionCell())),this.actions.get("createShape").setEnabled(t),this.actions.get("createRevision").setEnabled(t),this.actions.get("moveToFolder").setEnabled(null!=n),this.actions.get("makeCopy").setEnabled(null!=n&&!n.isRestricted()),this.actions.get("editDiagram").setEnabled(t&&(null==n||!n.isRestricted())),this.actions.get("publishLink").setEnabled(null!=n&&!n.isRestricted()),this.actions.get("tags").setEnabled("hidden"!=this.diagramContainer.style.visibility),this.actions.get("find").setEnabled("hidden"!=this.diagramContainer.style.visibility),this.actions.get("layers").setEnabled("hidden"!=this.diagramContainer.style.visibility),this.actions.get("outline").setEnabled("hidden"!=this.diagramContainer.style.visibility),this.actions.get("rename").setEnabled(null!=n&&n.isRenamable()||"1"==urlParams.embed),this.actions.get("close").setEnabled(null!=n),this.menus.get("publish").setEnabled(null!=n&&!n.isRestricted()),e=e.view.getState(e.getSelectionCell()),this.actions.get("editShape").setEnabled(t&&null!=e&&null!=e.shape&&null!=e.shape.stencil)};var a=EditorUi.prototype.destroy;EditorUi.prototype.destroy=function(){this.editUpdateListener&&(this.editor.undoManager.removeListener(this.editUpdateListener),this.editUpdateListener=null),null!=this.exportDialog&&(this.exportDialog.parentNode.removeChild(this.exportDialog),this.exportDialog=null),a.apply(this,arguments)},null!=window.ExportDialog&&(ExportDialog.showXmlOption=!1,ExportDialog.showGifOption=!1,ExportDialog.exportFile=function(e,t,n,r,i,s){var o=e.editor.graph;if("xml"==n)e.hideDialog(),e.saveData(t,"xml",mxUtils.getXml(e.editor.getGraphXml()),"text/xml");else if("svg"==n)e.hideDialog(),e.saveData(t,"svg",mxUtils.getXml(o.getSvg(r,i,s)),"image/svg+xml");else{var u=e.getFileData(!0,null,null,null,null,!0),a=o.getGraphBounds(),f=Math.floor(a.width*i/o.view.scale),l=Math.floor(a.height*i/o.view.scale);u.length<=MAX_REQUEST_SIZE&&f*l<MAX_AREA?(e.hideDialog(),e.saveRequest(t,n,function(e,t){return new mxXmlRequest(EXPORT_URL,"format="+n+"&base64="+(t||"0")+(null!=e?"&filename="+encodeURIComponent(e):"")+"&bg="+(null!=r?r:"none")+"&w="+f+"&h="+l+"&border="+s+"&xml="+encodeURIComponent(u))})):mxUtils.alert(mxResources.get("drawingTooLarge"))}}),EditorUi.prototype.updateEditReferences=function(e){for(var t=0;t<e.changes.length;t++){var n=e.changes[t];if(null!=n&&n.constructor==mxChildChange&&null!=n.child){var r=n.child;if(null!=r.source&&null!=r.source.id){var i=this.getFutureCellForEdit(n.model,e,r.source.id);i!=r.source&&(r.source=i)}null!=r.target&&null!=r.target.id&&(n=this.getFutureCellForEdit(n.model,e,r.target.id),n!=r.target&&(r.target=n))}}},EditorUi.prototype.getFutureCellForEdit=function(e,t,n){var r=e.getCell(n);if(null==r)for(var i=t.changes.length-1;0<=i;i--){var s=t.changes[i];if(s.constructor==mxChildChange&&null!=s.child&&s.child.id==n){e.contains(s.previous)&&(r=s.child);break}}return r}}(),DiagramPage.prototype.node=null,DiagramPage.prototype.root=null,DiagramPage.prototype.viewState=null,DiagramPage.prototype.getId=function(){return this.node.getAttribute("id")},DiagramPage.prototype.getName=function(){return this.node.getAttribute("name")},DiagramPage.prototype.setName=function(e){null==e?this.node.removeAttribute("name"):this.node.setAttribute("name",e)},RenamePage.prototype.execute=function(){var e=this.page.getName();this.page.setName(this.previous),this.name=this.previous,this.previous=e,this.ui.editor.graph.updatePlaceholders(),this.ui.editor.fireEvent(new mxEventObject("pageRenamed"))},MovePage.prototype.execute=function(){this.ui.pages.splice(this.newIndex,0,this.ui.pages.splice(this.oldIndex,1)[0]);var e=this.oldIndex;this.oldIndex=this.newIndex,this.newIndex=e,this.ui.editor.graph.updatePlaceholders(),this.ui.editor.fireEvent(new mxEventObject("pageMoved"))},SelectPage.prototype.execute=function(){var e=mxUtils.indexOf(this.ui.pages,this.previousPage);if(null!=this.page&&0<=e){var e=this.ui.currentPage,t=this.ui.editor,n=t.graph,r=t.graph.compress(n.zapGremlins(mxUtils.getXml(t.getGraphXml(!0))));mxUtils.setTextContent(e.node,r),e.viewState=n.getViewState(),e.root=n.model.root,null!=e.model&&e.model.rootChanged(e.root),n.view.clear(e.root,!0),n.clearSelection(),this.ui.currentPage=this.previousPage,this.previousPage=e,e=this.ui.currentPage,n.model.rootChanged(e.root),n.setViewState(e.viewState),t.fireEvent(new mxEventObject("setViewState","change",this)),n.gridEnabled=n.gridEnabled&&(!this.ui.editor.isChromelessView()||"1"==urlParams.grid),t.updateGraphComponents(),n.view.validate(),n.sizeDidChange(),this.neverShown&&(this.neverShown=!1,n.selectUnlockedLayer()),t.graph.fireEvent(new mxEventObject(mxEvent.ROOT)),t.fireEvent(new mxEventObject("pageSelected","change",this))}},mxUtils.extend(ChangePage,SelectPage),ChangePage.prototype.execute=function(){this.ui.editor.fireEvent(new mxEventObject("beforePageChange","change",this)),this.previousIndex=this.index;if(null==this.index){var e=mxUtils.indexOf(this.ui.pages,this.relatedPage);this.ui.pages.splice(e,1),this.index=e}else this.ui.pages.splice(this.index,0,this.relatedPage),this.index=null;SelectPage.prototype.execute.apply(this,arguments)},EditorUi.prototype.getSelectedPageIndex=function(){var e=null;if(null!=this.pages&&null!=this.currentPage)for(var t=0;t<this.pages.length;t++)if(this.pages[t]==this.currentPage){e=t;break}return e},EditorUi.prototype.getPageById=function(e){if(null!=this.pages)for(var t=0;t<this.pages.length;t++)if(this.pages[t].getId()==e)return this.pages[t];return null},EditorUi.prototype.initPages=function(){this.actions.addAction("previousPage",mxUtils.bind(this,function(){this.selectNextPage(!1)})),this.actions.addAction("nextPage",mxUtils.bind(this,function(){this.selectNextPage(!0)})),this.keyHandler.bindAction(33,!0,"previousPage",!0),this.keyHandler.bindAction(34,!0,"nextPage",!0);var e=this.editor.graph,t=e.view.validateBackground;e.view.validateBackground=mxUtils.bind(this,function(){if(null!=this.tabContainer){var n=this.tabContainer.style.height;this.tabContainer.style.height=null==this.fileNode||null==this.pages||1==this.pages.length&&"0"==urlParams.pages?"0px":"30px",n!=this.tabContainer.style.height&&this.refresh(!1)}t.apply(e.view,arguments)});var n=null,r=mxUtils.bind(this,function(){this.updateTabContainer();var t=this.currentPage;null!=t&&t!=n&&(null==t.viewState||null==t.viewState.scrollLeft?(this.resetScrollbars(),e.isLightboxView()&&this.lightboxFit(),null!=this.chromelessResize&&(e.container.scrollLeft=0,e.container.scrollTop=0,this.chromelessResize())):(e.container.scrollLeft=e.view.translate.x*e.view.scale+t.viewState.scrollLeft,e.container.scrollTop=e.view.translate.y*e.view.scale+t.viewState.scrollTop),n=t),null!=this.actions.layersWindow&&this.actions.layersWindow.refreshLayers(),"undefined"!=typeof MathJax&&"undefined"!=typeof MathJax.Hub?1!=MathJax.Hub.queue.pending||null==this.editor||this.editor.graph.mathEnabled||MathJax.Hub.Queue(mxUtils.bind(this,function(){null!=this.editor&&this.editor.graph.refresh()})):"undefined"==typeof Editor.MathJaxClear||null!=this.editor&&this.editor.graph.mathEnabled||Editor.MathJaxClear()});this.editor.graph.model.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(e,t){for(var n=t.getProperty("edit").changes,i=0;i<n.length;i++)if(n[i]instanceof SelectPage||n[i]instanceof RenamePage||n[i]instanceof MovePage||n[i]instanceof mxRootChange){r();break}})),null!=this.toolbar&&this.editor.addListener("pageSelected",this.toolbar.updateZoom)},EditorUi.prototype.restoreViewState=function(e,t,n){e=null!=e?this.getPageById(e.getId()):null;var r=this.editor.graph;null!=e&&null!=this.currentPage&&null!=this.pages&&(e!=this.currentPage?this.selectPage(e,!0,t):(r.setViewState(t),this.editor.updateGraphComponents(),r.view.revalidate(),r.sizeDidChange()),r.container.scrollLeft=r.view.translate.x*r.view.scale+t.scrollLeft,r.container.scrollTop=r.view.translate.y*r.view.scale+t.scrollTop,r.restoreSelection(n))},Graph.prototype.createViewState=function(e){var t=e.getAttribute("page"),n=parseFloat(e.getAttribute("pageScale")),r=parseFloat(e.getAttribute("pageWidth")),i=parseFloat(e.getAttribute("pageHeight")),s=e.getAttribute("background"),o=e.getAttribute("backgroundImage"),o=null!=o&&0<o.length?JSON.parse(o):null;return{gridEnabled:"0"!=e.getAttribute("grid"),gridSize:parseFloat(e.getAttribute("gridSize"))||mxGraph.prototype.gridSize,guidesEnabled:"0"!=e.getAttribute("guides"),foldingEnabled:"0"!=e.getAttribute("fold"),shadowVisible:"1"==e.getAttribute("shadow"),pageVisible:this.isLightboxView()?!1:null!=t?"0"!=t:this.defaultPageVisible,background:null!=s&&0<s.length?s:null,backgroundImage:null!=o?new mxImage(o.src,o.width,o.height):null,pageScale:isNaN(n)?mxGraph.prototype.pageScale:n,pageFormat:isNaN(r)||isNaN(i)?mxSettings.getPageFormat():new mxRectangle(0,0,r,i),tooltips:"0"!=e.getAttribute("tooltips"),connect:"0"!=e.getAttribute("connect"),arrows:"0"!=e.getAttribute("arrows"),mathEnabled:"1"==e.getAttribute("math"),selectionCells:null,defaultParent:null,scrollbars:this.defaultScrollbars,scale:1}},Graph.prototype.saveViewState=function(e,t,n){n||(t.setAttribute("grid",null==e||e.gridEnabled?"1":"0"),t.setAttribute("gridSize",null!=e?e.gridSize:mxGraph.prototype.gridSize),t.setAttribute("guides",null==e||e.guidesEnabled?"1":"0"),t.setAttribute("tooltips",null==e||e.tooltips?"1":"0"),t.setAttribute("connect",null==e||e.connect?"1":"0"),t.setAttribute("arrows",null==e||e.arrows?"1":"0"),t.setAttribute("page",null==e&&this.defaultPageVisible||null!=e&&e.pageVisible?"1":"0"),t.setAttribute("fold",null==e||e.foldingEnabled?"1":"0")),t.setAttribute("pageScale",null!=e&&null!=e.pageScale?e.pageScale:mxGraph.prototype.pageScale),n=null!=e?e.pageFormat:mxSettings.getPageFormat(),null!=n&&(t.setAttribute("pageWidth",n.width),t.setAttribute("pageHeight",n.height)),null!=e&&null!=e.background&&t.setAttribute("background",e.background),null!=e&&null!=e.backgroundImage&&t.setAttribute("backgroundImage",JSON.stringify(e.backgroundImage)),t.setAttribute("math",null!=e&&e.mathEnabled?"1":"0"),t.setAttribute("shadow",null!=e&&e.shadowVisible?"1":"0")},Graph.prototype.getViewState=function(){return{defaultParent:this.defaultParent,currentRoot:this.view.currentRoot,gridEnabled:this.gridEnabled,gridSize:this.gridSize,guidesEnabled:this.graphHandler.guidesEnabled,foldingEnabled:this.foldingEnabled,shadowVisible:this.shadowVisible,scrollbars:this.scrollbars,pageVisible:this.pageVisible,background:this.background,backgroundImage:this.backgroundImage,pageScale:this.pageScale,pageFormat:this.pageFormat,tooltips:this.tooltipHandler.isEnabled(),connect:this.connectionHandler.isEnabled(),arrows:this.connectionArrowsEnabled,scale:this.view.scale,scrollLeft:this.container.scrollLeft-this.view.translate.x*this.view.scale,scrollTop:this.container.scrollTop-this.view.translate.y*this.view.scale,translate:this.view.translate.clone(),lastPasteXml:this.lastPasteXml,pasteCounter:this.pasteCounter,mathEnabled:this.mathEnabled}},Graph.prototype.setViewState=function(e){null!=e?(this.lastPasteXml=e.lastPasteXml,this.pasteCounter=e.pasteCounter||0,this.mathEnabled=e.mathEnabled,this.gridEnabled=e.gridEnabled,this.gridSize=e.gridSize,this.graphHandler.guidesEnabled=e.guidesEnabled,this.foldingEnabled=e.foldingEnabled,this.setShadowVisible(e.shadowVisible,!1),this.scrollbars=e.scrollbars,this.pageVisible=e.pageVisible,this.background=e.background,this.backgroundImage=e.backgroundImage,this.pageScale=e.pageScale,this.pageFormat=e.pageFormat,this.view.currentRoot=e.currentRoot,this.defaultParent=e.defaultParent,this.connectionArrowsEnabled=e.arrows,this.setTooltips(e.tooltips),this.setConnectable(e.connect),this.view.scale=null!=e.scale?e.scale:1,null==this.view.currentRoot||this.model.contains(this.view.currentRoot)||(this.view.currentRoot=null),null==this.defaultParent||this.model.contains(this.defaultParent)||(this.setDefaultParent(null),this.selectUnlockedLayer()),null!=e.translate&&(this.view.translate=e.translate)):(this.view.currentRoot=null,this.view.scale=1,this.gridEnabled=!0,this.gridSize=mxGraph.prototype.gridSize,this.pageScale=mxGraph.prototype.pageScale,this.pageFormat=mxSettings.getPageFormat(),this.pageVisible=this.defaultPageVisible,this.backgroundImage=this.background=null,this.scrollbars=this.defaultScrollbars,this.foldingEnabled=this.graphHandler.guidesEnabled=!0,this.setShadowVisible(!1,!1),this.defaultParent=null,this.setTooltips(!0),this.setConnectable(!0),this.lastPasteXml=null,this.pasteCounter=0,this.mathEnabled=!1,this.connectionArrowsEnabled=!0),this.preferPageSize=this.pageBreaksVisible=this.pageVisible},EditorUi.prototype.updatePageRoot=function(e){if(null==e.root){var t=this.editor.extractGraphModel(e.node);if(null!=t){e.graphModelNode=t,e.viewState=this.editor.graph.createViewState(t);var n=new mxCodec(t.ownerDocument);e.root=n.decode(t).root}else e.root=this.editor.graph.model.createRoot()}else null==e.viewState&&(null==e.graphModelNode&&(t=this.editor.extractGraphModel(e.node),null!=t&&(e.graphModelNode=t)),null!=e.graphModelNode&&(e.viewState=this.editor.graph.createViewState(e.graphModelNode)));return e},EditorUi.prototype.selectPage=function(e,t,n){this.editor.graph.isEditing()&&this.editor.graph.stopEditing(!1),t=null!=t?t:!1,this.editor.graph.isMouseDown=!1,this.editor.graph.reset();var r=this.editor.graph.model.createUndoableEdit();r.ignoreEdit=!0,e=new SelectPage(this,e,n),e.execute(),r.add(e),r.notify(),this.editor.graph.tooltipHandler.hide(),t||this.editor.graph.model.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",r))},EditorUi.prototype.selectNextPage=function(e){var t=this.currentPage;null!=t&&null!=this.pages&&(t=mxUtils.indexOf(this.pages,t),e?this.selectPage(this.pages[mxUtils.mod(t+1,this.pages.length)]):e||this.selectPage(this.pages[mxUtils.mod(t-1,this.pages.length)]))},EditorUi.prototype.insertPage=function(e,t){if(this.editor.graph.isEnabled()){this.editor.graph.isEditing()&&this.editor.graph.stopEditing(!1),e=null!=e?e:this.createPage(),t=null!=t?t:this.pages.length;var n=new ChangePage(this,e,e,t);this.editor.graph.model.execute(n)}return e},EditorUi.prototype.createPage=function(e){var t=new DiagramPage(this.fileNode.ownerDocument.createElement("diagram"));return t.setName(null!=e?e:this.createPageName()),t},EditorUi.prototype.createPageName=function(){for(var e={},t=0;t<this.pages.length;t++){var n=this.pages[t].getName();null!=n&&0<n.length&&(e[n]=n)}t=this.pages.length;do n=mxResources.get("pageWithNumber",[++t]);while(null!=e[n]);return n},EditorUi.prototype.removePage=function(e){var t=this.editor.graph,n=mxUtils.indexOf(this.pages,e);if(t.isEnabled()&&0<=n){this.editor.graph.isEditing()&&this.editor.graph.stopEditing(!1),t.model.beginUpdate();try{var r=this.currentPage;r==e&&1<this.pages.length?(n==this.pages.length-1?n--:n++,r=this.pages[n]):1>=this.pages.length&&(r=this.insertPage(),t.model.execute(new RenamePage(this,r,mxResources.get("pageWithNumber",[1])))),t.model.execute(new ChangePage(this,e,r))}finally{t.model.endUpdate()}}return e},EditorUi.prototype.duplicatePage=function(e,t){var n=this.editor.graph,r=null;return n.isEnabled()&&(n.isEditing()&&n.stopEditing(),r=e.node.cloneNode(!1),r.removeAttribute("id"),r=new DiagramPage(r),r.root=n.cloneCell(n.model.root),r.viewState=n.getViewState(),r.viewState.scale=1,r.viewState.scrollLeft=null,r.viewState.scrollTop=null,r.viewState.currentRoot=null,r.viewState.defaultParent=null,r.setName(t),r=this.insertPage(r,mxUtils.indexOf(this.pages,e)+1)),r},EditorUi.prototype.renamePage=function(e){if(this.editor.graph.isEnabled()){var t=new FilenameDialog(this,e.getName(),mxResources.get("rename"),mxUtils.bind(this,function(t){null!=t&&0<t.length&&this.editor.graph.model.execute(new RenamePage(this,e,t))}),mxResources.get("rename"));this.showDialog(t.container,300,80,!0,!0),t.init()}return e},EditorUi.prototype.movePage=function(e,t){this.editor.graph.model.execute(new MovePage(this,e,t))},EditorUi.prototype.createTabContainer=function(){var e=document.createElement("div");return e.style.backgroundColor="dark"==uiTheme?"#2a2a2a":"#dcdcdc",e.style.position="absolute",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.height="0px",e},EditorUi.prototype.updateTabContainer=function(){if(null!=this.tabContainer&&null!=this.pages){var e=this.editor.graph,t=document.createElement("div");t.style.position="relative",t.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",t.style.verticalAlign="top",t.style.height=this.tabContainer.style.height,t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.fontSize="12px",t.style.marginLeft="30px";for(var n=this.editor.isChromelessView()?29:59,r=Math.min(140,Math.max(20,(this.tabContainer.clientWidth-n)/this.pages.length)+1),i=null,s=0;s<this.pages.length;s++)mxUtils.bind(this,function(n,r){this.pages[n]==this.currentPage?(r.className="geActivePage",r.style.backgroundColor="dark"==uiTheme?"#2a2a2a":"#eeeeee",r.style.fontWeight="bold",r.style.borderTopStyle="none"):r.className="geInactivePage",r.setAttribute("draggable","true"),mxEvent.addListener(r,"dragstart",mxUtils.bind(this,function(t){e.isEnabled()?(mxClient.IS_FF&&t.dataTransfer.setData("Text","<diagram/>"),i=n):mxEvent.consume(t)})),mxEvent.addListener(r,"dragend",mxUtils.bind(this,function(e){i=null,e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(r,"dragover",mxUtils.bind(this,function(e){null!=i&&(e.dataTransfer.dropEffect="move"),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(r,"drop",mxUtils.bind(this,function(e){null!=i&&n!=i&&this.movePage(i,n),e.stopPropagation(),e.preventDefault()})),t.appendChild(r)})(s,this.createTabForPage(this.pages[s],r,this.pages[s]!=this.currentPage));this.tabContainer.innerHTML="",this.tabContainer.appendChild(t),r=this.createPageMenuTab(),this.tabContainer.appendChild(r),r=null,this.isPageInsertTabVisible()&&(r=this.createPageInsertTab(),this.tabContainer.appendChild(r));if(t.clientWidth>this.tabContainer.clientWidth-n){null!=r&&(r.style.position="absolute",r.style.right="0px",t.style.marginRight="30px");var o=this.createControlTab(4,"&nbsp;&#10094;&nbsp;");o.style.position="absolute",o.style.right=this.editor.chromeless?"29px":"55px",o.style.fontSize="13pt",this.tabContainer.appendChild(o);var u=this.createControlTab(4,"&nbsp;&#10095;");u.style.position="absolute",u.style.right=this.editor.chromeless?"0px":"29px",u.style.fontSize="13pt",this.tabContainer.appendChild(u);var a=Math.max(0,this.tabContainer.clientWidth-(this.editor.chromeless?86:116));t.style.width=a+"px",mxEvent.addListener(o,"click",mxUtils.bind(this,function(e){t.scrollLeft-=Math.max(20,a-20),mxUtils.setOpacity(o,0<t.scrollLeft?100:50),mxUtils.setOpacity(u,t.scrollLeft<t.scrollWidth-t.clientWidth?100:50),mxEvent.consume(e)})),mxUtils.setOpacity(o,0<t.scrollLeft?100:50),mxUtils.setOpacity(u,t.scrollLeft<t.scrollWidth-t.clientWidth?100:50),mxEvent.addListener(u,"click",mxUtils.bind(this,function(e){t.scrollLeft+=Math.max(20,a-20),mxUtils.setOpacity(o,0<t.scrollLeft?100:50),mxUtils.setOpacity(u,t.scrollLeft<t.scrollWidth-t.clientWidth?100:50),mxEvent.consume(e)}))}}},EditorUi.prototype.isPageInsertTabVisible=function(){return 1==urlParams.embed||null!=this.getCurrentFile()&&this.getCurrentFile().isEditable()},EditorUi.prototype.createTab=function(e){var t=document.createElement("div");return t.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",t.style.whiteSpace="nowrap",t.style.boxSizing="border-box",t.style.position="relative",t.style.overflow="hidden",t.style.marginLeft="-1px",t.style.height=this.tabContainer.clientHeight+"px",t.style.padding="8px 4px 8px 4px",t.style.border="dark"==uiTheme?"1px solid #505759":"1px solid #c0c0c0",t.style.borderBottomStyle="solid",t.style.backgroundColor=this.tabContainer.style.backgroundColor,t.style.cursor="move",t.style.color="gray",e&&(mxEvent.addListener(t,"mouseenter",mxUtils.bind(this,function(e){this.editor.graph.isMouseDown||(t.style.backgroundColor="dark"==uiTheme?"black":"#d3d3d3",mxEvent.consume(e))})),mxEvent.addListener(t,"mouseleave",mxUtils.bind(this,function(e){t.style.backgroundColor=this.tabContainer.style.backgroundColor,mxEvent.consume(e)}))),t},EditorUi.prototype.createControlTab=function(e,t){var n=this.createTab(!0);return n.style.paddingTop=e+"px",n.style.cursor="pointer",n.style.width="30px",n.style.lineHeight="30px",n.innerHTML=t,null!=n.firstChild&&null!=n.firstChild.style&&mxUtils.setOpacity(n.firstChild,40),n},EditorUi.prototype.createPageMenuTab=function(){var e=this.createControlTab(3,'<div class="geSprite geSprite-dots" style="display:inline-block;width:21px;height:21px;"></div>');return e.setAttribute("title",mxResources.get("pages")),e.style.position="absolute",e.style.top="0px",e.style.left="1px",mxEvent.addListener(e,"click",mxUtils.bind(this,function(e){this.editor.graph.popupMenuHandler.hideMenu();var t=new mxPopupMenu(mxUtils.bind(this,function(e,t){for(var n=0;n<this.pages.length;n++)mxUtils.bind(this,function(n){var r=e.addItem(this.pages[n].getName(),null,mxUtils.bind(this,function(){this.selectPage(this.pages[n])}),t);this.pages[n]==this.currentPage&&e.addCheckmark(r,Editor.checkmarkImage)})(n);if(this.editor.graph.isEnabled()){e.addSeparator(t),e.addItem(mxResources.get("insertPage"),null,mxUtils.bind(this,function(){this.insertPage()}),t);var r=this.currentPage;null!=r&&(e.addSeparator(t),e.addItem(mxResources.get("delete"),null,mxUtils.bind(this,function(){this.removePage(r)}),t),e.addItem(mxResources.get("rename"),null,mxUtils.bind(this,function(){this.renamePage(r,r.getName())}),t),e.addSeparator(t),e.addItem(mxResources.get("duplicate"),null,mxUtils.bind(this,function(){this.duplicatePage(r,mxResources.get("copyOf",[r.getName()]))}),t))}}));t.div.className+=" geMenubarMenu",t.smartSeparators=!0,t.showDisabled=!0,t.autoExpand=!0,t.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(t,arguments),t.destroy()});var n=mxEvent.getClientX(e),r=mxEvent.getClientY(e);t.popup(n,r,null,e),this.setCurrentMenu(t),mxEvent.consume(e)})),e},EditorUi.prototype.createPageInsertTab=function(){var e=this.createControlTab(4,'<div class="geSprite geSprite-plus" style="display:inline-block;width:21px;height:21px;"></div>');return e.setAttribute("title",mxResources.get("insertPage")),mxEvent.addListener(e,"click",mxUtils.bind(this,function(e){this.insertPage(),mxEvent.consume(e)})),e},EditorUi.prototype.createTabForPage=function(e,t,n){n=this.createTab(n);var r=e.getName()||mxResources.get("untitled"),i=e.getId();return n.setAttribute("title",r+(null!=i?" ("+i+")":"")),mxUtils.write(n,r),n.style.maxWidth=t+"px",n.style.width=t+"px",this.addTabListeners(e,n),42<t&&(n.style.textOverflow="ellipsis"),n},EditorUi.prototype.addTabListeners=function(e,t){mxEvent.disableContextMenu(t);var n=this.editor.graph;mxEvent.addListener(t,"dblclick",mxUtils.bind(this,function(t){this.renamePage(e),mxEvent.consume(t)}));var r=!1,i=!1;mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){r=null!=this.currentMenu,i=e==this.currentPage,n.isMouseDown||i||this.selectPage(e)}),null,mxUtils.bind(this,function(s){if(n.isEnabled()&&!n.isMouseDown&&(mxEvent.isTouchEvent(s)&&i||mxEvent.isPopupTrigger(s))){n.popupMenuHandler.hideMenu(),this.hideCurrentMenu();if(!mxEvent.isTouchEvent(s)||!r){var o=new mxPopupMenu(this.createPageMenu(e));o.div.className+=" geMenubarMenu",o.smartSeparators=!0,o.showDisabled=!0,o.autoExpand=!0,o.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(o,arguments),this.resetCurrentMenu(),o.destroy()});var u=mxEvent.getClientX(s),c=mxEvent.getClientY(s);o.popup(u,c,null,s),this.setCurrentMenu(o,t)}mxEvent.consume(s)}}))},EditorUi.prototype.createPageMenu=function(e,t){return mxUtils.bind(this,function(n,r){n.addItem(mxResources.get("insert"),null,mxUtils.bind(this,function(){this.insertPage(null,mxUtils.indexOf(this.pages,e)+1)}),r),n.addItem(mxResources.get("delete"),null,mxUtils.bind(this,function(){this.removePage(e)}),r),n.addItem(mxResources.get("rename"),null,mxUtils.bind(this,function(){this.renamePage(e,t)}),r),n.addSeparator(r),n.addItem(mxResources.get("duplicate"),null,mxUtils.bind(this,function(){this.duplicatePage(e,mxResources.get("copyOf",[e.getName()]))}),r)})},function(){var e=EditorUi.prototype.refresh;EditorUi.prototype.refresh=function(t){e.apply(this,arguments),this.updateTabContainer()}}(),function(){mxCodecRegistry.getCodec(ChangePageSetup).exclude.push("page")}(),function(){var e=new mxObjectCodec(new MovePage,["ui"]);e.beforeDecode=function(e,t,n){return n.ui=e.ui,t},e.afterDecode=function(e,t,n){return e=n.oldIndex,n.oldIndex=n.newIndex,n.newIndex=e,n},mxCodecRegistry.register(e)}(),function(){var e=new mxObjectCodec(new RenamePage,["ui","page"]);e.beforeDecode=function(e,t,n){return n.ui=e.ui,t},e.afterDecode=function(e,t,n){return e=n.previous,n.previous=n.name,n.name=e,n},mxCodecRegistry.register(e)}(),function(){var e=new mxObjectCodec(new ChangePage,"ui relatedPage index neverShown page previousPage".split(" ")),t="defaultParent currentRoot scrollLeft scrollTop scale translate lastPasteXml pasteCounter".split(" ");e.afterEncode=function(e,n,r){return r.setAttribute("relatedPage",n.relatedPage.getId()),null==n.index&&(r.setAttribute("name",n.relatedPage.getName()),null!=n.relatedPage.viewState&&r.setAttribute("viewState",JSON.stringify(n.relatedPage.viewState,function(e,n){return 0>mxUtils.indexOf(t,e)?n:void 0})),null!=n.relatedPage.root&&e.encodeCell(n.relatedPage.root,r)),r},e.beforeDecode=function(e,t,n){n.ui=e.ui,n.relatedPage=n.ui.getPageById(t.getAttribute("relatedPage"));if(null==n.relatedPage){var r=t.ownerDocument.createElement("diagram");r.setAttribute("id",t.getAttribute("relatedPage")),r.setAttribute("name",t.getAttribute("name")),n.relatedPage=new DiagramPage(r),r=t.getAttribute("viewState"),null!=r&&(n.relatedPage.viewState=JSON.parse(r),t.removeAttribute("viewState")),t=t.cloneNode(!0),r=t.firstChild;if(null!=r)for(n.relatedPage.root=e.decodeCell(r,!1),n=r.nextSibling,r.parentNode.removeChild(r),r=n;null!=r;){n=r.nextSibling;if(r.nodeType==mxConstants.NODETYPE_ELEMENT){var i=r.getAttribute("id");null==e.lookup(i)&&e.decodeCell(r)}r.parentNode.removeChild(r),r=n}}return t},e.afterDecode=function(e,t,n){return n.index=n.previousIndex,n},mxCodecRegistry.register(e)}(),function(){var e=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAMAAABhEH5lAAAASFBMVEUAAAAAAAB/f3/9/f319fUfHx/7+/s+Pj69vb0AAAAAAAAAAAAAAAAAAAAAAAAAAAB2dnZ1dXUAAAAAAAAVFRX///8ZGRkGBgbOcI1hAAAAE3RSTlMA+vr9/f38+fb1893Bo00u+/tFvPJUBQAAAIRJREFUGNM0jEcSxCAQAxlydGqD///TNWxZBx1aXVIrWysplbapL3sFxgDq/idXBnHgBPK1nIxwc55vCXl6dRFtrV6svs/A/UjsPcpzA5tqyByD92HqQlMFh45BG6ND1DiKSoPDdm96N77bg5F+wyaEqRGb8ZiOwHQqdg9hehszcLAEIQB2lQ4p/sEpnAAAAABJRU5ErkJggg==":IMAGE_PATH+"/move.png";EditorUi.prototype.altShiftActions[68]="selectDescendants";var t=Graph.prototype.foldCells;Graph.prototype.foldCells=function(e,n,r,i,s){n=null!=n?n:!1,null==r&&(r=this.getFoldableCells(this.getSelectionCells(),e)),this.stopEditing(),this.model.beginUpdate();try{for(var o=r.slice(),u=[],a=0;a<r.length;a++){var f=this.view.getState(r[a]),l=null!=f?f.style:this.getCellStyle(r[a]);"1"==mxUtils.getValue(l,"treeFolding","0")&&(this.traverse(r[a],!0,mxUtils.bind(this,function(e,t){return null!=t&&u.push(t),e!=r[a]&&u.push(e),e==r[a]||!this.model.isCollapsed(e)})),this.model.setCollapsed(r[a],e))}for(a=0;a<u.length;a++)this.model.setVisible(u[a],!e);r=o,r=t.apply(this,arguments)}finally{this.model.endUpdate()}return r};var n=EditorUi.prototype.init;EditorUi.prototype.init=function(){n.apply(this,arguments),this.editor.isChromelessView()&&!this.editor.editable||this.addTrees()},EditorUi.prototype.addTrees=function(){function t(e){return p.isVertex(e)&&n(e)}function n(e){var t=!1;return null!=e&&(e=p.getParent(e),t=h.view.getState(e),h.view.getState(e),t="tree"==(null!=t?t.style:h.getCellStyle(e)).containerType),t}function r(e){var t=!1;return null!=e&&(e=p.getParent(e),t=h.view.getState(e),h.view.getState(e),t=null!=(null!=t?t.style:h.getCellStyle(e)).childLayout),t}function i(e){e=h.view.getState(e);if(null!=e){var t=h.getIncomingEdges(e.cell);if(0<t.length&&(t=h.view.getState(t[0]),null!=t&&(t=t.absolutePoints,null!=t&&0<t.length&&(t=t[t.length-1],null!=t)))){if(t.y==e.y&&Math.abs(t.x-e.getCenterX())<e.width/2)return mxConstants.DIRECTION_SOUTH;if(t.y==e.y+e.height&&Math.abs(t.x-e.getCenterX())<e.width/2)return mxConstants.DIRECTION_NORTH;if(t.x>e.getCenterX())return mxConstants.DIRECTION_WEST}}return mxConstants.DIRECTION_EAST}function s(e,t){t=null!=t?t:!0,h.model.beginUpdate();try{var n=h.model.getParent(e),r=h.getIncomingEdges(e),s=h.cloneCells([r[0],e]);h.model.setTerminal(s[0],h.model.getTerminal(r[0],!0),!0);var o=i(e),u=n.geometry;o==mxConstants.DIRECTION_SOUTH||o==mxConstants.DIRECTION_NORTH?s[1].geometry.x+=t?e.geometry.width+10:-s[1].geometry.width-10:s[1].geometry.y+=t?e.geometry.height+10:-s[1].geometry.height-10,h.view.currentRoot!=n&&(s[1].geometry.x-=u.x,s[1].geometry.y-=u.y);var a=h.view.getState(e),f=h.view.scale;if(null!=a){var l=mxRectangle.fromRectangle(a);o==mxConstants.DIRECTION_SOUTH||o==mxConstants.DIRECTION_NORTH?l.x+=(t?e.geometry.width+10:-s[1].geometry.width-10)*f:l.y+=(t?e.geometry.height+10:-s[1].geometry.height-10)*f;var c=h.getOutgoingEdges(h.model.getTerminal(r[0],!0));if(null!=c){for(var p=o==mxConstants.DIRECTION_SOUTH||o==mxConstants.DIRECTION_NORTH,d=u=r=0;d<c.length;d++){var v=h.model.getTerminal(c[d],!1);if(o==i(v)){var m=h.view.getState(v);v!=e&&null!=m&&(p&&t!=m.getCenterX()<a.getCenterX()||!p&&t!=m.getCenterY()<a.getCenterY())&&mxUtils.intersects(l,m)&&(r=10+Math.max(r,(Math.min(l.x+l.width,m.x+m.width)-Math.max(l.x,m.x))/f),u=10+Math.max(u,(Math.min(l.y+l.height,m.y+m.height)-Math.max(l.y,m.y))/f))}}p?u=0:r=0;for(d=0;d<c.length;d++)if(v=h.model.getTerminal(c[d],!1),o==i(v)&&(m=h.view.getState(v),v!=e&&null!=m&&(p&&t!=m.getCenterX()<a.getCenterX()||!p&&t!=m.getCenterY()<a.getCenterY()))){var g=[];h.traverse(m.cell,!0,function(e,t){return null!=t&&g.push(t),g.push(e),!0}),h.moveCells(g,(t?1:-1)*r,(t?1:-1)*u)}}}return h.addCells(s,n)}finally{h.model.endUpdate()}}function o(e){h.model.beginUpdate();try{var t=i(e),n=h.getIncomingEdges(e),r=h.cloneCells([n[0],e]);h.model.setTerminal(n[0],r[1],!1),h.model.setTerminal(r[0],r[1],!0),h.model.setTerminal(r[0],e,!1);var s=h.model.getParent(e),o=s.geometry,u=[];h.view.currentRoot!=s&&(r[1].geometry.x-=o.x,r[1].geometry.y-=o.y),h.traverse(e,!0,function(e,t){return null!=t&&u.push(t),u.push(e),!0});var a=e.geometry.width+40,f=e.geometry.height+40;return t==mxConstants.DIRECTION_SOUTH?a=0:t==mxConstants.DIRECTION_NORTH?(a=0,f=-40):t==mxConstants.DIRECTION_WEST?(a=-40,f=0):t==mxConstants.DIRECTION_EAST&&(f=0),h.moveCells(u,a,f),h.addCells(r,s)}finally{h.model.endUpdate()}}function u(e){h.model.beginUpdate();try{var t=h.model.getParent(e),n=h.getIncomingEdges(e),r=h.cloneCells([n[0],e]);h.model.setTerminal(r[0],e,!0);var n=h.getOutgoingEdges(e),s=t.geometry,o=[];h.view.currentRoot==t&&(s=new mxRectangle);for(var u=0;u<n.length;u++){var a=h.model.getTerminal(n[u],!1);null!=a&&o.push(a)}var f=h.view.getBounds(o),l=i(e),c=h.view.translate,p=h.view.scale;return l==mxConstants.DIRECTION_SOUTH?(r[1].geometry.x=null==f?e.geometry.x+(e.geometry.width-r[1].geometry.width)/2:(f.x+f.width)/p-c.x-s.x+10,r[1].geometry.y+=e.geometry.height-s.y+40):l==mxConstants.DIRECTION_NORTH?(r[1].geometry.x=null==f?e.geometry.x+(e.geometry.width-r[1].geometry.width)/2:(f.x+f.width)/p-c.x+ -s.x+10,r[1].geometry.y-=r[1].geometry.height-s.y+40):(r[1].geometry.x=l==mxConstants.DIRECTION_WEST?r[1].geometry.x-(r[1].geometry.width-s.x+40):r[1].geometry.x+(e.geometry.width-s.x+40),r[1].geometry.y=null==f?e.geometry.y+(e.geometry.height-r[1].geometry.height)/2:(f.y+f.height)/p-c.y+ -s.y+10),h.addCells(r,t)}finally{h.model.endUpdate()}}function f(e,t,n){e=h.getOutgoingEdges(e),n=h.view.getState(n);var r=[];if(null!=n&&null!=e){for(var i=0;i<e.length;i++){var s=h.view.getState(h.model.getTerminal(e[i],!1));null!=s&&(!t&&Math.min(s.x+s.width,n.x+n.width)>=Math.max(s.x,n.x)||t&&Math.min(s.y+s.height,n.y+n.height)>=Math.max(s.y,n.y))&&r.push(s)}r.sort(function(e,n){return t?e.x+e.width-n.x-n.width:e.y+e.height-n.y-n.height})}return r}function l(e,t){var n=i(e),r=t==mxConstants.DIRECTION_EAST||t==mxConstants.DIRECTION_WEST;(n==mxConstants.DIRECTION_EAST||n==mxConstants.DIRECTION_WEST)==r&&n!=t?c.actions.get("selectParent").funct():n==t?(r=h.getOutgoingEdges(e),null!=r&&0<r.length&&h.setSelectionCell(h.model.getTerminal(r[0],!1))):(n=h.getIncomingEdges(e),null!=n&&0<n.length&&(r=f(h.model.getTerminal(n[0],!0),r,e),n=h.view.getState(e),null!=n&&(n=mxUtils.indexOf(r,n),0<=n&&(n+=t==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_WEST?-1:1,0<=n&&n<=r.length-1&&h.setSelectionCell(r[n].cell)))))}var c=this,h=c.editor.graph,p=h.getModel();mxResources.parse("selectChildren=Select Children"),mxResources.parse("selectSiblings=Select Siblings"),mxResources.parse("selectDescendants=Select Descendants"),mxResources.parse("selectParent=Select Parent");var d=c.menus.createPopupMenu;c.menus.createPopupMenu=function(e,n,r){d.apply(this,arguments);if(1==h.getSelectionCount()){n=h.getSelectionCell();var i=h.getOutgoingEdges(n);e.addSeparator(),null!=i&&0<i.length&&(t(h.getSelectionCell())&&this.addMenuItems(e,["selectChildren"],null,r),this.addMenuItems(e,["selectDescendants"],null,r)),t(h.getSelectionCell())&&(e.addSeparator(),0<h.getIncomingEdges(n).length&&this.addMenuItems(e,["selectSiblings","selectParent"],null,r))}},c.actions.addAction("selectChildren",function(){if(h.isEnabled()&&1==h.getSelectionCount()){var e=h.getSelectionCell(),e=h.getOutgoingEdges(e);if(null!=e){for(var t=[],n=0;n<e.length;n++)t.push(h.model.getTerminal(e[n],!1));h.setSelectionCells(t)}}},null,null,"Alt+Shift+X"),c.actions.addAction("selectSiblings",function(){if(h.isEnabled()&&1==h.getSelectionCount()){var e=h.getSelectionCell(),e=h.getIncomingEdges(e);if(null!=e&&0<e.length&&(e=h.getOutgoingEdges(h.model.getTerminal(e[0],!0)),null!=e)){for(var t=[],n=0;n<e.length;n++)t.push(h.model.getTerminal(e[n],!1));h.setSelectionCells(t)}}},null,null,"Alt+Shift+S"),c.actions.addAction("selectParent",function(){if(h.isEnabled()&&1==h.getSelectionCount()){var e=h.getSelectionCell(),e=h.getIncomingEdges(e);null!=e&&0<e.length&&h.setSelectionCell(h.model.getTerminal(e[0],!0))}},null,null,"Alt+Shift+P"),c.actions.addAction("selectDescendants",function(){if(h.isEnabled()&&1==h.getSelectionCount()){var e=h.getSelectionCell(),t=[];h.traverse(e,!0,function(e,n){return null!=n&&t.push(n),t.push(e),!0}),h.setSelectionCells(t)}},null,null,"Alt+Shift+D");var v=h.removeCells;h.removeCells=function(e,r){r=null!=r?r:!0,null==e&&(e=this.getDeletableCells(this.getSelectionCells())),r&&(e=this.getDeletableCells(this.addAllEdges(e)));for(var i=[],s=0;s<e.length;s++){var o=e[s];p.isEdge(o)&&n(o)&&(i.push(o),o=p.getTerminal(o,!1)),t(o)?(h.traverse(o,!0,function(e,t){return null!=t&&i.push(t),i.push(e),!0}),o=h.getIncomingEdges(e[s]),e=e.concat(o)):i.push(e[s])}return e=i,v.apply(this,arguments)},c.hoverIcons.getStateAt=function(e,n,r){return t(e.cell)?null:this.graph.view.getState(this.graph.getCellAt(n,r))};var m=h.duplicateCells;h.duplicateCells=function(e,n){e=null!=e?e:this.getSelectionCells();for(var r=e.slice(0),i=0;i<r.length;i++){var s=h.view.getState(r[i]);if(null!=s&&t(s.cell))for(var o=h.getIncomingEdges(s.cell),s=0;s<o.length;s++)mxUtils.remove(o[s],e)}this.model.beginUpdate();try{var u=m.call(this,e,n);if(u.length==e.length)for(i=0;i<e.length;i++)if(t(e[i])){var a=h.getIncomingEdges(u[i]),o=h.getIncomingEdges(e[i]);if(0==a.length&&0<o.length){var f=this.cloneCell(o[0]);this.addEdge(f,h.getDefaultParent(),this.model.getTerminal(o[0],!0),u[i])}}}finally{this.model.endUpdate()}return u};var g=h.moveCells;h.moveCells=function(e,n,r,i,s,o,u){var a=null;this.model.beginUpdate();try{var f=s,l=this.view.getState(s),c=null!=l?l.style:this.getCellStyle(s);if(null!=e&&t(s)&&"1"==mxUtils.getValue(c,"treeFolding","0")){for(var p=0;p<e.length;p++)if(t(e[p])||h.model.isEdge(e[p])&&null==h.model.getTerminal(e[p],!0)){s=h.model.getParent(e[p]);break}if(null!=f&&s!=f&&null!=this.view.getState(e[0])){var d=h.getIncomingEdges(e[0]);if(0<d.length){var v=h.view.getState(h.model.getTerminal(d[0],!0));if(null!=v){var m=h.view.getState(f);null!=m&&(n=(m.getCenterX()-v.getCenterX())/h.view.scale,r=(m.getCenterY()-v.getCenterY())/h.view.scale)}}}}a=g.apply(this,arguments);if(null!=a&&null!=e&&a.length==e.length)for(p=0;p<a.length;p++)if(this.model.isEdge(a[p]))t(f)&&0>mxUtils.indexOf(a,this.model.getTerminal(a[p],!0))&&this.model.setTerminal(a[p],f,!0);else if(t(e[p])&&(d=h.getIncomingEdges(e[p]),0<d.length))if(!i)t(f)&&0>mxUtils.indexOf(e,this.model.getTerminal(d[0],!0))&&this.model.setTerminal(d[0],f,!0);else if(0==h.getIncomingEdges(a[p]).length){l=f;if(null==l||l==h.model.getParent(e[p]))l=h.model.getTerminal(d[0],!0);i=this.cloneCell(d[0]),this.addEdge(i,h.getDefaultParent(),l,a[p])}}finally{this.model.endUpdate()}return a};if(null!=c.sidebar){var y=c.sidebar.dropAndConnect;c.sidebar.dropAndConnect=function(e,n,r,i){var s=h.model,o=null;s.beginUpdate();try{if(o=y.apply(this,arguments),t(e))for(var u=0;u<o.length;u++)if(s.isEdge(o[u])&&null==s.getTerminal(o[u],!0)){s.setTerminal(o[u],e,!0);var a=h.getCellGeometry(o[u]);a.points=null,null!=a.getTerminalPoint(!0)&&a.setTerminalPoint(null,!0)}}finally{s.endUpdate()}return o}}var b={88:c.actions.get("selectChildren"),84:c.actions.get("selectSubtree"),80:c.actions.get("selectParent"),83:c.actions.get("selectSiblings")},w=c.onKeyDown;c.onKeyDown=function(e){try{if(h.isEnabled()&&!h.isEditing()&&t(h.getSelectionCell())&&1==h.getSelectionCount()){var n=null;0<h.getIncomingEdges(h.getSelectionCell()).length&&(9==e.which?n=mxEvent.isShiftDown(e)?o(h.getSelectionCell()):u(h.getSelectionCell()):13==e.which&&(n=s(h.getSelectionCell(),!mxEvent.isShiftDown(e))));if(null!=n&&0<n.length)1==n.length&&h.model.isEdge(n[0])?h.setSelectionCell(h.model.getTerminal(n[0],!1)):h.setSelectionCell(n[n.length-1]),null!=c.hoverIcons&&c.hoverIcons.update(h.view.getState(h.getSelectionCell())),h.startEditingAtCell(h.getSelectionCell()),mxEvent.consume(e);else if(mxEvent.isAltDown(e)&&mxEvent.isShiftDown(e)){var r=b[e.keyCode];null!=r&&(r.funct(e),mxEvent.consume(e))}else 37==e.keyCode?(l(h.getSelectionCell(),mxConstants.DIRECTION_WEST),mxEvent.consume(e)):38==e.keyCode?(l(h.getSelectionCell(),mxConstants.DIRECTION_NORTH),mxEvent.consume(e)):39==e.keyCode?(l(h.getSelectionCell(),mxConstants.DIRECTION_EAST),mxEvent.consume(e)):40==e.keyCode&&(l(h.getSelectionCell(),mxConstants.DIRECTION_SOUTH),mxEvent.consume(e))}}catch(i){console.log("error",i)}mxEvent.isConsumed(e)||w.apply(this,arguments)};var E=h.connectVertex;h.connectVertex=function(e,n,r,a,f,l){var c=h.getIncomingEdges(e);return t(e)&&0<c.length?(r=i(e),a=r==mxConstants.DIRECTION_EAST||r==mxConstants.DIRECTION_WEST,f=n==mxConstants.DIRECTION_EAST||n==mxConstants.DIRECTION_WEST,r==n?u(e):a==f?o(e):s(e,n!=mxConstants.DIRECTION_NORTH&&n!=mxConstants.DIRECTION_WEST)):E.call(this,e,n,r,a,f,l)},h.getSubtree=function(e){var n=[e];return t(e)&&!r(e)&&h.traverse(e,!0,function(e,t){return null!=t&&0>mxUtils.indexOf(n,t)&&n.push(t),0>mxUtils.indexOf(n,e)&&n.push(e),!0}),n};var S=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){S.apply(this,arguments),t(this.state.cell)&&0<this.graph.getOutgoingEdges(this.state.cell).length&&(this.moveHandle=mxUtils.createImage(e),this.moveHandle.setAttribute("title","Move Subtree"),this.moveHandle.style.position="absolute",this.moveHandle.style.cursor="pointer",this.moveHandle.style.width="18px",this.moveHandle.style.height="18px",this.graph.container.appendChild(this.moveHandle),mxEvent.addGestureListeners(this.moveHandle,mxUtils.bind(this,function(e){this.graph.graphHandler.start(this.state.cell,mxEvent.getClientX(e),mxEvent.getClientY(e)),this.graph.graphHandler.cells=this.graph.getSubtree(this.state.cell),this.graph.graphHandler.bounds=this.state.view.getBounds(this.graph.graphHandler.cells),this.graph.graphHandler.pBounds=this.graph.graphHandler.getPreviewBounds(this.graph.graphHandler.cells),this.graph.graphHandler.cellWasClicked=!0,this.graph.isMouseTrigger=mxEvent.isMouseEvent(e),this.graph.isMouseDown=!0,mxEvent.consume(e)})))};var x=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){x.apply(this,arguments),null!=this.moveHandle&&(this.moveHandle.style.left=this.state.x+this.state.width+(40>this.state.width?10:0)+2+"px",this.moveHandle.style.top=this.state.y+this.state.height+(40>this.state.height?10:0)+2+"px")};var T=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(e,t){T.apply(this,arguments),null!=this.moveHandle&&(this.moveHandle.parentNode.removeChild(this.moveHandle),this.moveHandle=null)}};if("undefined"!=typeof Sidebar){var r=Sidebar.prototype.createAdvancedShapes;Sidebar.prototype.createAdvancedShapes=function(){var e=r.apply(this,arguments),t=this.graph;return e.concat([this.addEntry("tree container",function(){var e=new mxCell("Tree Container",new mxGeometry(0,0,220,160),"swimlane;html=1;startSize=20;horizontal=1;containerType=tree;");return e.vertex=!0,sb.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree mindmap central idea branch topic",function(){var e=new mxCell("Mindmap",new mxGeometry(0,0,420,126),"swimlane;html=1;startSize=20;horizontal=1;containerType=tree;");e.vertex=!0;var t=new mxCell("Central Idea",new mxGeometry(160,60,100,40),"ellipse;whiteSpace=wrap;html=1;align=center;container=1;recursiveResize=0;treeFolding=1;");t.vertex=!0;var n=new mxCell("Topic",new mxGeometry(320,40,80,20),"whiteSpace=wrap;html=1;rounded=1;arcSize=50;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;");n.vertex=!0;var r=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");r.geometry.relative=!0,r.edge=!0,t.insertEdge(r,!0),n.insertEdge(r,!1);var i=new mxCell("Branch",new mxGeometry(320,80,72,26),"whiteSpace=wrap;html=1;shape=partialRectangle;top=0;left=0;bottom=1;right=0;points=[[0,1],[1,1]];strokeColor=#000000;fillColor=none;align=center;verticalAlign=bottom;routingCenterY=0.5;snapToPoint=1;container=1;recursiveResize=0;autosize=1;treeFolding=1;");i.vertex=!0;var s=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");s.geometry.relative=!0,s.edge=!0,t.insertEdge(s,!0),i.insertEdge(s,!1);var o=new mxCell("Topic",new mxGeometry(20,40,80,20),"whiteSpace=wrap;html=1;rounded=1;arcSize=50;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;");o.vertex=!0;var u=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");u.geometry.relative=!0,u.edge=!0,t.insertEdge(u,!0),o.insertEdge(u,!1);var a=new mxCell("Branch",new mxGeometry(20,80,72,26),"whiteSpace=wrap;html=1;shape=partialRectangle;top=0;left=0;bottom=1;right=0;points=[[0,1],[1,1]];strokeColor=#000000;fillColor=none;align=center;verticalAlign=bottom;routingCenterY=0.5;snapToPoint=1;container=1;recursiveResize=0;autosize=1;treeFolding=1;");a.vertex=!0;var f=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");return f.geometry.relative=!0,f.edge=!0,t.insertEdge(f,!0),a.insertEdge(f,!1),e.insert(r),e.insert(s),e.insert(u),e.insert(f),e.insert(t),e.insert(n),e.insert(i),e.insert(o),e.insert(a),sb.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree mindmap central idea",function(){var e=new mxCell("Central Idea",new mxGeometry(0,0,100,40),"ellipse;whiteSpace=wrap;html=1;align=center;container=1;recursiveResize=0;treeFolding=1;");return e.vertex=!0,sb.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree mindmap branch",function(){var e=new mxCell("Branch",new mxGeometry(0,0,80,20),"whiteSpace=wrap;html=1;shape=partialRectangle;top=0;left=0;bottom=1;right=0;points=[[0,1],[1,1]];strokeColor=#000000;fillColor=none;align=center;verticalAlign=bottom;routingCenterY=0.5;snapToPoint=1;container=1;recursiveResize=0;autosize=1;treeFolding=1;");e.vertex=!0;var t=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");return t.geometry.setTerminalPoint(new mxPoint(-40,40),!0),t.geometry.relative=!0,t.edge=!0,e.insertEdge(t,!1),sb.createVertexTemplateFromCells([e,t],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree mindmap sub topic",function(){var e=new mxCell("Sub Topic",new mxGeometry(0,0,72,26),"whiteSpace=wrap;html=1;rounded=1;arcSize=50;align=center;verticalAlign=middle;container=1;recursiveResize=0;strokeWidth=1;autosize=1;spacing=4;treeFolding=1;");e.vertex=!0;var t=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=entityRelationEdgeStyle;startArrow=none;endArrow=none;segment=10;curved=1;");return t.geometry.setTerminalPoint(new mxPoint(-40,40),!0),t.geometry.relative=!0,t.edge=!0,e.insertEdge(t,!1),sb.createVertexTemplateFromCells([e,t],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree orgchart organization division",function(){var e=new mxCell("Orgchart",new mxGeometry(0,0,280,220),"swimlane;html=1;startSize=20;horizontal=1;containerType=tree;");e.vertex=!0;var n=new mxCell("Organization",new mxGeometry(80,40,120,60),"whiteSpace=wrap;html=1;align=center;treeFolding=1;container=1;recursiveResize=0;");t.setAttributeForCell(n,"treeRoot","1"),n.vertex=!0;var r=new mxCell("Division",new mxGeometry(20,140,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");r.vertex=!0;var i=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=elbowEdgeStyle;elbow=vertical;startArrow=none;endArrow=none;rounded=0;");i.geometry.relative=!0,i.edge=!0,n.insertEdge(i,!0),r.insertEdge(i,!1);var s=new mxCell("Division",new mxGeometry(160,140,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");s.vertex=!0;var o=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=elbowEdgeStyle;elbow=vertical;startArrow=none;endArrow=none;rounded=0;");return o.geometry.relative=!0,o.edge=!0,n.insertEdge(o,!0),s.insertEdge(o,!1),e.insert(i),e.insert(o),e.insert(n),e.insert(r),e.insert(s),sb.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree root",function(){var e=new mxCell("Organization",new mxGeometry(0,0,120,60),"whiteSpace=wrap;html=1;align=center;treeFolding=1;container=1;recursiveResize=0;");return t.setAttributeForCell(e,"treeRoot","1"),e.vertex=!0,sb.createVertexTemplateFromCells([e],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree division",function(){var e=new mxCell("Division",new mxGeometry(20,40,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");e.vertex=!0;var t=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=elbowEdgeStyle;elbow=vertical;startArrow=none;endArrow=none;rounded=0;");return t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.relative=!0,t.edge=!0,e.insertEdge(t,!1),sb.createVertexTemplateFromCells([e,t],e.geometry.width,e.geometry.height,e.value)}),this.addEntry("tree sub sections",function(){var e=new mxCell("Sub Section",new mxGeometry(0,0,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");e.vertex=!0;var t=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;startArrow=none;endArrow=none;rounded=0;targetPortConstraint=eastwest;sourcePortConstraint=northsouth;");t.geometry.setTerminalPoint(new mxPoint(110,-40),!0),t.geometry.relative=!0,t.edge=!0,e.insertEdge(t,!1);var n=new mxCell("Sub Section",new mxGeometry(120,0,100,60),"whiteSpace=wrap;html=1;align=center;verticalAlign=middle;container=1;recursiveResize=0;treeFolding=1;");n.vertex=!0;var r=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;startArrow=none;endArrow=none;rounded=0;targetPortConstraint=eastwest;sourcePortConstraint=northsouth;");return r.geometry.setTerminalPoint(new mxPoint(110,-40),!0),r.geometry.relative=!0,r.edge=!0,n.insertEdge(r,!1),sb.createVertexTemplateFromCells([t,r,e,n],220,60,"Sub Sections")})])}}}(),EditorUi.initMinimalTheme=function(){function e(e){var t=e.editor.graph;t.popupMenuHandler.hideMenu(),null==e.formatWindow?(e.formatWindow=new s(e,mxResources.get("format"),Math.max(20,e.diagramContainer.clientWidth-240-12),56,240,Math.min(566,t.container.clientHeight-10),function(t){return t=e.createFormat(t),t.init(),t}),e.formatWindow.window.minimumSize=new mxRectangle(0,0,240,80),e.formatWindow.window.setVisible(!0)):e.formatWindow.window.setVisible(!e.formatWindow.window.isVisible()),e.formatWindow.window.isVisible()&&e.formatWindow.window.fit()}function t(e){var t=e.editor.graph;t.popupMenuHandler.hideMenu(),new mxRectangle;if(null==e.sidebarWindow){var n=Math.min(t.container.clientWidth-10,266);e.sidebarWindow=new s(e,mxResources.get("shapes"),10,56,n-6,Math.min(650,t.container.clientHeight-30),function(t){function n(n,r){var s=e.menus.get(n),o=i.addMenu(r,mxUtils.bind(this,function(){s.funct.apply(this,arguments)}));return o.style.cssText="position:absolute;border-top:1px solid lightgray;width:50%;height:24px;bottom:0px;text-align:center;cursor:pointer;padding:6px 0 0 0;cusor:pointer;",o.className="geTitle",t.appendChild(o),o}var r=document.createElement("div");r.style.cssText="position:absolute;left:0;right:0;border-top:1px solid lightgray;height:24px;bottom:31px;text-align:center;cursor:pointer;padding:6px 0 0 0;",r.className="geTitle",r.innerHTML='<span style="font-size:18px;margin-right:5px;">+</span>',mxUtils.write(r,mxResources.get("moreShapes")),t.appendChild(r),mxEvent.addListener(r,"click",function(){e.actions.get("shapes").funct()});var i=new Menubar(e,t);if(!Editor.enableCustomLibraries||"1"==urlParams.embed&&"1"!=urlParams.libraries)r.style.bottom="0";else if(null!=e.actions.get("newLibrary")){r=document.createElement("div"),r.style.cssText="position:absolute;left:0px;width:50%;border-top:1px solid lightgray;height:30px;bottom:0px;text-align:center;cursor:pointer;padding:0px;",r.className="geTitle";var s=document.createElement("span");s.style.cssText="position:relative;top:6px;",mxUtils.write(s,mxResources.get("newLibrary")),r.appendChild(s),t.appendChild(r),mxEvent.addListener(r,"click",e.actions.get("newLibrary").funct),r=document.createElement("div"),r.style.cssText="position:absolute;left:50%;width:50%;border-top:1px solid lightgray;height:30px;bottom:0px;text-align:center;cursor:pointer;padding:0px;border-left: 1px solid lightgray;",r.className="geTitle",s=document.createElement("span"),s.style.cssText="position:relative;top:6px;",mxUtils.write(s,mxResources.get("openLibrary")),r.appendChild(s),t.appendChild(r),mxEvent.addListener(r,"click",e.actions.get("openLibrary").funct)}else r=n("newLibrary",mxResources.get("newLibrary")),r.style.left="0",r=n("openLibraryFrom",mxResources.get("openLibraryFrom")),r.style.borderLeft="1px solid lightgray",r.style.left="50%";return t.appendChild(e.sidebar.container),t.style.overflow="hidden",t}),e.sidebarWindow.window.minimumSize=new mxRectangle(0,0,90,90),e.sidebarWindow.window.setVisible(!0),e.getLocalData("sidebar",function(t){e.sidebar.showEntries(t,null,!0)}),e.restoreLibraries()}else e.sidebarWindow.window.setVisible(!e.sidebarWindow.window.isVisible());e.sidebarWindow.window.isVisible()&&e.sidebarWindow.window.fit()}if("1"==urlParams.lightbox||"0"==urlParams.chrome||"undefined"==typeof window.Format||"undefined"==typeof window.Menus)window.uiTheme=null;else{var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;try{var r=document.createElement("style");r.type="text/css",r.innerHTML="* { -webkit-font-smoothing: antialiased; }html body .mxWindow button.geBtn { font-size:12px !important; margin-left: 0; }html body table.mxWindow td.mxWindowPane div.mxWindowPane * { font-size:9pt; }html body div.diagramContainer button, html body button.geBtn { font-size:14px; font-weight:700;border-radius: 5px; }html body button.geBtn:active { opacity: 0.6; }html body a.geMenuItem { opacity: 0.75; }html body a.geMenuItem[disabled] { opacity: 0.2; }html body a.geMenuItem[disabled]:active { opacity: 0.2; }html body div.geActivePage { opacity: 0.7; }html body a.geMenuItem:active { opacity: 0.2; }html body .geToolbarButton { opacity: 0.3; }html body .geToolbarButton:active { opacity: 0.15; }html body .geStatus:active { opacity: 0.5; }html table.mxPopupMenu tr.mxPopupMenuItemHover:active { opacity:0.7; }html body .geDialog input, html body .geToolbarContainer input, html body .mxWindow input {padding:2px;display:inline-block; }div.geDialog { border-radius: 5px; }html body div.geDialog button.geBigButton { color: #fff !important; }.mxWindow button, .geDialog select, .mxWindow select { display:inline-block; }html body .mxWindow .geColorBtn, html body .geDialog .geColorBtn { background: none; }html body div.diagramContainer button, html body .mxWindow button, html body .geDialog button { min-width: 0px; border-radius: 5px; color: #353535 !important; border-style: solid; border-width: 1px; border-color: rgb(216, 216, 216); }html body div.diagramContainer button:hover, html body .mxWindow button:hover, html body .geDialog button:hover { border-color: rgb(177, 177, 177); }html body div.diagramContainer button:active, html body .mxWindow button:active, html body .geDialog button:active { opacity: 0.6; }div.diagramContainer button.geBtn, .mxWindow button.geBtn, .geDialog button.geBtn { min-width:72px; font-weight: 600; background: none; }div.diagramContainer button.gePrimaryBtn, .mxWindow button.gePrimaryBtn, .geDialog button.gePrimaryBtn, html body .gePrimaryBtn { background: #29b6f2; color: #fff !important; border: none; box-shadow: none; }html body .gePrimaryBtn:hover { background: #29b6f2; border: none; box-shadow: inherit; }html body button.gePrimaryBtn:hover { background: #29b6f2; border: none; }.geBtn button { min-width:72px !important; }div.geToolbarContainer a.geButton { margin:2px; padding: 0 2px 4px 2px; } .geDialog, .mxWindow td.mxWindowPane *, div.geSprite, td.mxWindowTitle, .geDiagramContainer { box-sizing:content-box; }.mxWindow div button.geStyleButton { box-sizing: border-box; }table.mxWindow td.mxWindowPane button.geColorBtn { padding:0px; box-sizing: border-box; }td.mxWindowPane .geSidebarContainer button { padding:2px 0 2px 0; box-sizing: border-box; }html body .geMenuItem { font-size:14px; text-decoration: none; font-weight: normal; padding: 6px 10px 6px 10px; border: none; border-radius: 5px; color: #353535; box-shadow: inset 0 0 0 1px rgba(0,0,0,.11), inset 0 -1px 0 0 rgba(0,0,0,.08), 0 1px 2px 0 rgba(0,0,0,.04); }.geToolbarContainer { background:#fff !important; }div.mxWindow .geSidebarContainer .geTitle { background-color:#fdfdfd; }div.mxWindow .geSidebarContainer .geTitle:hover { background-color:#fafafa; }div.geSidebar { background-color: #fff !important;}div.mxWindow td.mxWindowPane button { background-image: none; float: none; }td.mxWindowTitle { height: 22px !important; background: none !important; font-size: 13px !important; text-align:center !important; border-bottom:1px solid lightgray; }div.mxWindow, div.mxWindowTitle { background-image: none !important; background-color:#fff !important; }div.mxWindow { border-radius:5px; box-shadow: 0px 0px 2px #C0C0C0 !important;}div.mxWindow * { font-family: inherit !important; }html div.geVerticalHandle { position:absolute;bottom:0px;left:50%;cursor:row-resize;width:11px;height:11px;background:white;margin-bottom:-6px; margin-left:-6px; border: none; border-radius: 6px; box-shadow: inset 0 0 0 1px rgba(0,0,0,.11), inset 0 -1px 0 0 rgba(0,0,0,.08), 0 1px 2px 0 rgba(0,0,0,.04); }html div.geInactivePage { background: rgb(249, 249, 249) !important; color:lightgray !important; } html div.geActivePage { background: white !important;color: #353535 !important; } html div.mxRubberband { border:1px solid; border-color: #29b6f2 !important; background:rgba(41,182,242,0.5) !important; } html body div.mxPopupMenu { border-radius:5px; border:1px solid #c0c0c0; padding:5px 0 5px 0; box-shadow: 0px 4px 17px -4px rgba(96,96,96,1); } html table.mxPopupMenu td.mxPopupMenuItem { color: #353535; font-size: 14px; padding-top: 4px; padding-bottom: 4px; }html table.mxPopupMenu tr.mxPopupMenuItemHover { background-color: #29b6f2; }html tr.mxPopupMenuItemHover td.mxPopupMenuItem, html tr.mxPopupMenuItemHover td.mxPopupMenuItem span { color: #fff !important; }html tr.mxPopupMenuItem, html td.mxPopupMenuItem { transition-property: none !important; }html table.mxPopupMenu hr { height: 2px; background-color: rgba(0,0,0,.07); margin: 5px 0; }"+(mxClient.IS_IOS?"html input[type=checkbox], html input[type=radio] { height:12px; }":""),document.getElementsByTagName("head")[0].appendChild(r)}catch(i){}var s=function(e,t,n,r,i,s,o){e=document.createElement("div"),e.className="geSidebarContainer",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.border="1px solid whiteSmoke",e.style.overflowX="hidden",e.style.overflowY="auto",o(e),this.window=new mxWindow(t,e,n,r,i,s,!0,!0),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e=Math.max(0,Math.min(e,(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-this.table.clientWidth)),t=Math.max(0,Math.min(t,n-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)}};Editor.checkmarkImage=Graph.createSvgImage(22,18,'<path transform="translate(4 0)" d="M7.181,15.007a1,1,0,0,1-.793-0.391L3.222,10.5A1,1,0,1,1,4.808,9.274L7.132,12.3l6.044-8.86A1,1,0,1,1,14.83,4.569l-6.823,10a1,1,0,0,1-.8.437H7.181Z" fill="#29b6f2"/>').src,mxWindow.prototype.closeImage=Graph.createSvgImage(18,10,'<path d="M 5 1 L 13 9 M 13 1 L 5 9" stroke="#C0C0C0" stroke-width="2"/>').src,mxWindow.prototype.minimizeImage=Graph.createSvgImage(14,10,'<path d="M 3 7 L 7 3 L 11 7" stroke="#C0C0C0" stroke-width="2" fill="#ffffff"/>').src,mxWindow.prototype.normalizeImage=Graph.createSvgImage(14,10,'<path d="M 3 3 L 7 7 L 11 3" stroke="#C0C0C0" stroke-width="2" fill="#ffffff"/>').src,mxConstraintHandler.prototype.pointImage=Graph.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="#29b6f2"/>'),mxOutline.prototype.sizerImage=null,mxConstants.VERTEX_SELECTION_COLOR="#C0C0C0",mxConstants.EDGE_SELECTION_COLOR="#C0C0C0",mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants.DEFAULT_VALID_COLOR="#29b6f2",mxConstants.GUIDE_COLOR="#C0C0C0",mxConstants.HIGHLIGHT_STROKEWIDTH=5,mxConstants.HIGHLIGHT_OPACITY=35,mxConstants.OUTLINE_COLOR="#29b6f2",mxConstants.OUTLINE_HANDLE_FILLCOLOR="#29b6f2",mxConstants.OUTLINE_HANDLE_STROKECOLOR="#fff",Graph.prototype.svgShadowColor="#3D4574",Graph.prototype.svgShadowOpacity="0.4",Graph.prototype.svgShadowSize="0.6",Graph.prototype.svgShadowBlur="1.2",Format.prototype.inactiveTabBackgroundColor="#f0f0f0",mxGraphHandler.prototype.previewColor="#C0C0C0",mxRubberband.prototype.defaultOpacity=50,HoverIcons.prototype.inactiveOpacity=25,Format.prototype.showCloseButton=!1,EditorUi.prototype.closableScratchpad=!1,EditorUi.prototype.toolbarHeight=46,EditorUi.prototype.footerHeight=0,Graph.prototype.editAfterInsert=!0,Editor.prototype.isChromelessView=function(){return!1},Graph.prototype.isLightboxView=function(){return!1};var o=EditorUi.prototype.updateTabContainer;EditorUi.prototype.updateTabContainer=function(){null!=this.tabContainer&&(this.tabContainer.style.right="70px",this.diagramContainer.style.bottom="30px"),o.apply(this,arguments)};var u=EditorUi.prototype.updateActionStates;EditorUi.prototype.updateActionStates=function(){u.apply(this,arguments),this.menus.get("save").setEnabled(null!=this.getCurrentFile()||"1"==urlParams.embed)};var a=Menus.prototype.addShortcut;Menus.prototype.addShortcut=function(e,t){null!=t.shortcut&&900>n&&!mxClient.IS_IOS?e.firstChild.nextSibling.setAttribute("title",t.shortcut):a.apply(this,arguments)};var f=App.prototype.updateUserElement;App.prototype.updateUserElement=function(){f.apply(this,arguments);if(null!=this.userElement){var e=this.userElement;e.style.cssText="display:inline-block;position:relative;margin-right:4px;cursor:pointer;",e.className="geToolbarButton",e.innerHTML="",e.style.backgroundImage="url("+Editor.userImage+")",e.style.backgroundPosition="center center",e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="24px 24px",e.style.height="24px",e.style.width="24px",e.style.cssFloat="right",e.setAttribute("title",mxResources.get("changeUser"))}};var l=App.prototype.updateButtonContainer;App.prototype.updateButtonContainer=function(){l.apply(this,arguments);if(null!=this.shareButton){var e=this.shareButton;e.style.cssText="display:inline-block;position:relative;box-sizing:border-box;margin-right:4px;cursor:pointer;",e.className="geToolbarButton",e.innerHTML="",e.style.backgroundImage="url("+Editor.shareImage+")",e.style.backgroundPosition="center center",e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="24px 24px",e.style.height="24px",e.style.width="24px"}null!=this.syncButton&&(e=this.syncButton,e.style.cssText="display:inline-block;position:relative;box-sizing:border-box;margin-right:4px;cursor:pointer;",e.className="geToolbarButton",e.innerHTML="",e.style.backgroundImage="url("+Editor.syncImage+")",e.style.backgroundPosition="center center",e.style.backgroundRepeat="no-repeat",e.style.backgroundSize="24px 24px",e.style.height="24px",e.style.width="24px")},EditorUi.prototype.addEmbedButtons=function(){if(null!=this.buttonContainer){var e=document.createElement("div");e.style.display="inline-block",e.style.position="relative",e.style.marginTop="2px";var t=document.createElement("button");mxUtils.write(t,mxResources.get("save")),t.setAttribute("title",mxResources.get("save")+" ("+Editor.ctrlKey+"+S)"),t.className="1"==urlParams.saveAndExit?"geMenuItem":"geMenuItem gePrimaryBtn",t.style.fontSize="14px",t.style.padding="6px",t.style.borderRadius="3px",t.style.marginLeft="8px",t.style.cursor="pointer",mxEvent.addListener(t,"click",mxUtils.bind(this,function(){this.actions.get("save").funct()})),e.appendChild(t),"1"==urlParams.saveAndExit&&(t=document.createElement("a"),mxUtils.write(t,mxResources.get("saveAndExit")),t.setAttribute("title",mxResources.get("saveAndExit")),t.className="geMenuItem gePrimaryBtn",t.style.fontSize="14px",t.style.marginLeft="6px",t.style.padding="6px",t.style.cursor="pointer",mxEvent.addListener(t,"click",mxUtils.bind(this,function(){this.actions.get("saveAndExit").funct()})),e.appendChild(t)),t=document.createElement("a"),mxUtils.write(t,mxResources.get("exit")),t.setAttribute("title",mxResources.get("exit")),t.className="geMenuItem",t.style.fontSize="14px",t.style.marginLeft="6px",t.style.padding="6px",t.style.cursor="pointer",mxEvent.addListener(t,"click",mxUtils.bind(this,function(){this.actions.get("exit").funct()})),e.appendChild(t),this.buttonContainer.appendChild(e),this.buttonContainer.style.top="6px"}},Sidebar.prototype.getTooltipOffset=function(){var e=mxUtils.getOffset(this.editorUi.sidebarWindow.window.div);return e.y+=40,e};var c=Menus.prototype.createPopupMenu;Menus.prototype.createPopupMenu=function(e,t,n){var r=this.editorUi.editor.graph;e.smartSeparators=!0,c.apply(this,arguments),mxUtils.bind(this,function(e,t){var n=new FilenameDialog(this.editorUi,e,mxResources.get("apply"),function(e){t(parseFloat(e))},mxResources.get("spacing"));this.editorUi.showDialog(n.container,300,80,!0,!0),n.init()}),1==r.getSelectionCount()?(this.addMenuItems(e,["editTooltip","-","editStyle","editGeometry","-"],null,n),r.isCellFoldable(r.getSelectionCell())&&this.addMenuItems(e,r.isCellCollapsed(t)?["expand"]:["collapse"],null,n),this.addMenuItems(e,["collapsible","-","lockUnlock","enterGroup"],null,n),e.addSeparator(),this.addSubmenu("layout",e)):r.isSelectionEmpty()&&r.isEnabled()?(e.addSeparator(),this.addMenuItems(e,["editData"],null,n),e.addSeparator(),this.addSubmenu("layout",e),this.addSubmenu("view",e,null,mxResources.get("options")),this.addMenuItems(e,["-","exitGroup"],null,n)):r.isEnabled()&&this.addMenuItems(e,["-","lockUnlock"],null,n)},EditorUi.prototype.toggleFormatPanel=function(t){null!=this.formatWindow?this.formatWindow.window.setVisible(t?!1:!this.formatWindow.window.isVisible()):e(this)},DiagramFormatPanel.prototype.isMathOptionVisible=function(){return!0};var h=EditorUi.prototype.destroy;EditorUi.prototype.destroy=function(){null!=this.sidebarWindow&&(this.sidebarWindow.window.setVisible(!1),this.sidebarWindow.window.destroy(),this.sidebarWindow=null),null!=this.formatWindow&&(this.formatWindow.window.setVisible(!1),this.formatWindow.window.destroy(),this.formatWindow=null),null!=this.actions.outlineWindow&&(this.actions.outlineWindow.window.setVisible(!1),this.actions.outlineWindow.window.destroy(),this.actions.outlineWindow=null),null!=this.actions.layersWindow&&(this.actions.layersWindow.window.setVisible(!1),this.actions.layersWindow.window.destroy(),this.actions.layersWindow=null),null!=this.menus.tagsWindow&&(this.menus.tagsWindow.window.setVisible(!1),this.menus.tagsWindow.window.destroy(),this.menus.tagsWindow=null),null!=this.menus.findWindow&&(this.menus.findWindow.window.setVisible(!1),this.menus.findWindow.window.destroy(),this.menus.findWindow=null),h.apply(this,arguments)};var p=EditorUi.prototype.setGraphEnabled;EditorUi.prototype.setGraphEnabled=function(e){p.apply(this,arguments),e||(null!=this.sidebarWindow&&this.sidebarWindow.window.setVisible(!1),null!=this.formatWindow&&this.formatWindow.window.setVisible(!1))},EditorUi.prototype.chromelessWindowResize=function(){};var d=Menus.prototype.init;Menus.prototype.init=function(){d.apply(this,arguments);var n=this.editorUi,r=n.editor.graph;n.actions.get("editDiagram").label=mxResources.get("formatXml")+"...",n.actions.get("createShape").label=mxResources.get("shape")+"...",n.actions.get("outline").label=mxResources.get("outline")+"...",n.actions.get("layers").label=mxResources.get("layers")+"...",n.actions.put("importFile",new Action("File...",function(){r.popupMenuHandler.hideMenu();var e=document.createElement("input");e.setAttribute("type","file"),mxEvent.addListener(e,"change",function(){null!=e.files&&n.importFiles(e.files,null,null,n.maxImageSize)}),e.click()})),n.actions.put("importCsv",new Action(mxResources.get("csv")+"...",function(){r.popupMenuHandler.hideMenu(),n.showImportCsvDialog()})),n.actions.put("importText",new Action(mxResources.get("text")+"...",function(){var e=new ParseDialog(n,"Insert from Text");n.showDialog(e.container,620,420,!0,!1),e.init()})),n.actions.put("formatSql",new Action(mxResources.get("formatSql")+"...",function(){var e=new ParseDialog(n,"Insert from Text","formatSql");n.showDialog(e.container,620,420,!0,!1),e.init()})),n.actions.put("toggleShapes",new Action(mxResources.get("shapes")+"...",function(){t(n)})),n.actions.put("toggleFormat",new Action(mxResources.get("format")+"...",function(){e(n)})),EditorUi.enablePlantUml&&!n.isOffline()&&n.actions.put("plantUml",new Action(mxResources.get("plantUml")+"...",function(){var e=new ParseDialog(n,"Insert from Text","plantUml");n.showDialog(e.container,620,420,!0,!1),e.init()})),this.put("diagram",new Menu(mxUtils.bind(this,function(e,t){var r=n.getCurrentFile();n.menus.addSubmenu("extras",e,t,mxResources.get("preferences")),e.addSeparator(t),mxClient.IS_CHROMEAPP||EditorUi.isElectronApp?(n.menus.addMenuItems(e,["new","open","-"],t),EditorUi.isElectronApp&&n.menus.addMenuItems(e,["synchronize","-"],t),n.menus.addMenuItems(e,["save","saveAs","-"],t)):"1"==urlParams.embed?(n.menus.addMenuItems(e,["-","save"],t),"1"==urlParams.saveAndExit&&n.menus.addMenuItems(e,["saveAndExit"],t),e.addSeparator(t)):(n.menus.addMenuItems(e,["new"],t),n.menus.addSubmenu("openFrom",e,t),isLocalStorage&&this.addSubmenu("openRecent",e,t),e.addSeparator(t),null!=r&&r.constructor==DriveFile&&n.menus.addMenuItems(e,["share"],t),mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||null==r||r.constructor==LocalFile||n.menus.addMenuItems(e,["synchronize"],t),e.addSeparator(t),n.menus.addSubmenu("save",e,t)),n.menus.addSubmenu("exportAs",e,t),n.menus.addMenuItems(e,"- outline layers - find tags".split(" "),t),mxClient.IS_IOS&&navigator.standalone||n.menus.addMenuItems(e,["-","print","-"],t),n.menus.addSubmenu("help",e,t),"1"==urlParams.embed?n.menus.addMenuItems(e,["-","exit"],t):n.menus.addMenuItems(e,["-","close"])}))),this.put("save",new Menu(mxUtils.bind(this,function(e,t){var r=n.getCurrentFile();null!=r&&r.constructor==DriveFile?n.menus.addMenuItems(e,["save","makeCopy","-","rename","moveToFolder"],t):(n.menus.addMenuItems(e,["save","saveAs","-","rename"],t),n.isOfflineApp()?navigator.onLine&&"1"!=urlParams.stealth&&this.addMenuItems(e,["upload"],t):n.menus.addMenuItems(e,["makeCopy"],t)),n.menus.addMenuItems(e,["-","autosave"],t),null!=r&&r.isRevisionHistorySupported()&&n.menus.addMenuItems(e,["-","revisionHistory"],t)})));var i=this.get("exportAs");this.put("exportAs",new Menu(mxUtils.bind(this,function(e,t){i.funct(e,t),mxClient.IS_CHROMEAPP||EditorUi.isElectronApp||n.menus.addMenuItems(e,["publishLink"],t),e.addSeparator(t),n.menus.addSubmenu("embed",e,t)})));var s=this.get("language");this.put("extras",new Menu(mxUtils.bind(this,function(e,t){"1"!=urlParams.embed&&n.menus.addSubmenu("theme",e,t),null!=s&&n.menus.addSubmenu("language",e,t),e.addSeparator(t),n.menus.addMenuItems(e,["scrollbars","tooltips"],t),"1"!=urlParams.embed&&(isLocalStorage||mxClient.IS_CHROMEAPP)&&n.menus.addMenuItems(e,["-","search","scratchpad","-","showStartScreen"],t),!n.isOfflineApp()&&isLocalStorage&&(e.addSeparator(t),n.menus.addMenuItem(e,"plugins",t)),e.addSeparator(t)}))),this.put("insertAdvanced",new Menu(mxUtils.bind(this,function(e,t){n.menus.addMenuItems(e,"importText plantUml - formatSql importCsv - createShape editDiagram".split(" "),t)}))),mxResources.parse("insertLayout="+mxResources.get("layout")),mxResources.parse("insertAdvanced="+mxResources.get("advanced")),this.put("insert",new Menu(mxUtils.bind(this,function(e,t){n.menus.addMenuItems(e,"insertRectangle insertEllipse insertRhombus - insertText insertLink - insertImage".split(" "),t),n.insertTemplateEnabled&&!n.isOffline()&&n.menus.addMenuItems(e,["insertTemplate"],t),e.addSeparator(t),n.menus.addSubmenu("insertLayout",e,t),n.menus.addSubmenu("insertAdvanced",e,t),e.addSeparator(t),mxClient.IS_CHROMEAPP||EditorUi.isElectronApp?n.menus.addMenuItems(e,["import"],t):n.menus.addSubmenu("importFrom",e,t)})));var o="horizontalFlow verticalFlow - horizontalTree verticalTree radialTree - organic circle".split(" "),u=function(e,t,r,i){e.addItem(r,null,mxUtils.bind(this,function(){var e=new CreateGraphDialog(n,r,i);n.showDialog(e.container,620,420,!0,!1),e.init()}),t)};this.put("insertLayout",new Menu(mxUtils.bind(this,function(e,t){for(var n=0;n<o.length;n++)"-"==o[n]?e.addSeparator(t):u(e,t,mxResources.get(o[n])+"...",o[n])}))),this.put("view",new Menu(mxUtils.bind(this,function(e,t){n.menus.addMenuItems(e,"grid guides - connectionArrows connectionPoints -".split(" "),t);if("undefined"!=typeof MathJax){var r=n.menus.addMenuItem(e,"mathematicalTypesetting",t);n.menus.addLinkToItem(r,"https://desk.draw.io/support/solutions/articles/16000032875")}n.menus.addMenuItems(e,["copyConnect","collapseExpand","-","pageScale"],t)})))};var v=EditorUi.prototype.init;EditorUi.prototype.init=function(){function e(e,t,n){var r=o.menus.get(e),i=l.addMenu(mxResources.get(e),mxUtils.bind(this,function(){r.funct.apply(this,arguments)}),f);return i.className="geMenuItem",i.style.display="inline-block",i.style.boxSizing="border-box",i.style.top="6px",i.style.marginRight="6px",i.style.height="30px",i.style.paddingTop="6px",i.style.paddingBottom="6px",i.style.cursor="pointer",i.setAttribute("title",mxResources.get(e)),o.menus.menuCreated(r,i,"geMenuItem"),null!=n?(i.style.backgroundImage="url("+n+")",i.style.backgroundPosition="center center",i.style.backgroundRepeat="no-repeat",i.style.backgroundSize="24px 24px",i.style.width="34px",i.innerHTML=""):t||(i.style.backgroundImage="url("+mxWindow.prototype.normalizeImage+")",i.style.backgroundPosition="right 6px center",i.style.backgroundRepeat="no-repeat",i.style.paddingRight="22px"),i}function t(e,t,n,r,i,s){var u=document.createElement("a");return u.className="geMenuItem",u.style.display="inline-block",u.style.boxSizing="border-box",u.style.height="30px",u.style.padding="6px",u.style.position="relative",u.style.verticalAlign="top",u.style.top="0px",null!=o.statusContainer?a.insertBefore(u,o.statusContainer):a.appendChild(u),null!=s?(u.style.backgroundImage="url("+s+")",u.style.backgroundPosition="center center",u.style.backgroundRepeat="no-repeat",u.style.backgroundSize="24px 24px",u.style.width="34px"):mxUtils.write(u,e),mxEvent.addListener(u,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(e){e.preventDefault()})),mxEvent.addListener(u,"click",function(e){"disabled"!=u.getAttribute("disabled")&&t(e),mxEvent.consume(e)}),null==n&&(u.style.marginRight="4px"),null!=r&&u.setAttribute("title",r),null!=i&&(e=function(){i.isEnabled()?(u.removeAttribute("disabled"),u.style.cursor="pointer"):(u.setAttribute("disabled","disabled"),u.style.cursor="default")},i.addListener("stateChanged",e),e()),u}function r(e,t){var n=document.createElement("div");n.className="geMenuItem",n.style.display="inline-block",n.style.verticalAlign="top",n.style.marginRight="6px",n.style.padding="0 4px 0 4px",n.style.height="30px",n.style.position="relative",n.style.top="0px";for(var r=0;r<e.length;r++)null!=e[r]&&(e[r].style.margin="0px",e[r].style.boxShadow="none",n.appendChild(e[r]));return null!=t&&mxUtils.setOpacity(n,t),null!=o.statusContainer?a.insertBefore(n,o.statusContainer):a.appendChild(n),n}function i(){for(var i=a.firstChild;null!=i;){var s=i.nextSibling;"geMenuItem"!=i.className&&"geItem"!=i.className||i.parentNode.removeChild(i),i=s}f=a.firstChild,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,(i=900>n)||e("diagram"),r([i?e("diagram",null,IMAGE_PATH+"/drawlogo.svg"):null,t(mxResources.get("shapes"),o.actions.get("toggleShapes").funct,null,mxResources.get("shapes"),o.actions.get("image"),i?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTMgMTN2OGg4di04aC04ek0zIDIxaDh2LThIM3Y4ek0zIDN2OGg4VjNIM3ptMTMuNjYtMS4zMUwxMSA3LjM0IDE2LjY2IDEzbDUuNjYtNS42Ni01LjY2LTUuNjV6Ii8+PC9zdmc+":null),t(mxResources.get("format"),o.actions.get("toggleFormat").funct,null,mxResources.get("format")+" ("+o.actions.get("formatPanel").shortcut+")",o.actions.get("image"),i?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgM2MtNC45NyAwLTkgNC4wMy05IDlzNC4wMyA5IDkgOWMuODMgMCAxLjUtLjY3IDEuNS0xLjUgMC0uMzktLjE1LS43NC0uMzktMS4wMS0uMjMtLjI2LS4zOC0uNjEtLjM4LS45OSAwLS44My42Ny0xLjUgMS41LTEuNUgxNmMyLjc2IDAgNS0yLjI0IDUtNSAwLTQuNDItNC4wMy04LTktOHptLTUuNSA5Yy0uODMgMC0xLjUtLjY3LTEuNS0xLjVTNS42NyA5IDYuNSA5IDggOS42NyA4IDEwLjUgNy4zMyAxMiA2LjUgMTJ6bTMtNEM4LjY3IDggOCA3LjMzIDggNi41UzguNjcgNSA5LjUgNXMxLjUuNjcgMS41IDEuNVMxMC4zMyA4IDkuNSA4em01IDBjLS44MyAwLTEuNS0uNjctMS41LTEuNVMxMy42NyA1IDE0LjUgNXMxLjUuNjcgMS41IDEuNVMxNS4zMyA4IDE0LjUgOHptMyA0Yy0uODMgMC0xLjUtLjY3LTEuNS0xLjVTMTYuNjcgOSAxNy41IDlzMS41LjY3IDEuNSAxLjUtLjY3IDEuNS0xLjUgMS41eiIvPjwvc3ZnPg==":null)],i?60:null),s=e("insert",!0,i?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeiIvPjwvc3ZnPg==":null),r([s,t(mxResources.get("delete"),o.actions.get("delete").funct,null,mxResources.get("delete"),o.actions.get("delete"),i?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNNiAxOWMwIDEuMS45IDIgMiAyaDhjMS4xIDAgMi0uOSAyLTJWN0g2djEyek0xOSA0aC0zLjVsLTEtMWgtNWwtMSAxSDV2MmgxNFY0eiIvPjwvc3ZnPg==":null)],i?60:null);if(411<=n&&(s=o.actions.get("undo"),i=o.actions.get("redo"),s=t("",s.funct,null,mxResources.get("undo")+" ("+s.shortcut+")",s,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIuNSA4Yy0yLjY1IDAtNS4wNS45OS02LjkgMi42TDIgN3Y5aDlsLTMuNjItMy42MmMxLjM5LTEuMTYgMy4xNi0xLjg4IDUuMTItMS44OCAzLjU0IDAgNi41NSAyLjMxIDcuNiA1LjVsMi4zNy0uNzhDMjEuMDggMTEuMDMgMTcuMTUgOCAxMi41IDh6Ii8+PC9zdmc+"),i=t("",i.funct,null,mxResources.get("redo")+" ("+i.shortcut+")",i,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTguNCAxMC42QzE2LjU1IDguOTkgMTQuMTUgOCAxMS41IDhjLTQuNjUgMC04LjU4IDMuMDMtOS45NiA3LjIyTDMuOSAxNmMxLjA1LTMuMTkgNC4wNS01LjUgNy42LTUuNSAxLjk1IDAgMy43My43MiA1LjEyIDEuODhMMTMgMTZoOVY3bC0zLjYgMy42eiIvPjwvc3ZnPg=="),r([s,i],60),480<=n)){var i=o.actions.get("zoomIn"),s=o.actions.get("zoomOut"),c=o.actions.get("resetView");r([t("",function(){u.popupMenuHandler.hideMenu();var e=u.view.scale,t=u.view.translate.x,n=u.view.translate.y;o.actions.get("resetView").funct(),1e-5>Math.abs(e-u.view.scale)&&t==u.view.translate.x&&n==u.view.translate.y&&o.actions.get(u.pageVisible?"fitPage":"fitWindow").funct()},!0,mxResources.get("fit")+" ("+Editor.ctrlKey+"+H)",c,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMyA1djRoMlY1aDRWM0g1Yy0xLjEgMC0yIC45LTIgMnptMiAxMEgzdjRjMCAxLjEuOSAyIDIgMmg0di0ySDV2LTR6bTE0IDRoLTR2Mmg0YzEuMSAwIDItLjkgMi0ydi00aC0ydjR6bTAtMTZoLTR2Mmg0djRoMlY1YzAtMS4xLS45LTItMi0yeiIvPjwvc3ZnPg=="),640<=n?t("",i.funct,!0,mxResources.get("zoomIn")+" ("+Editor.ctrlKey+" +)",i,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHptMi41LTRoLTJ2Mkg5di0ySDdWOWgyVjdoMXYyaDJ2MXoiLz48L3N2Zz4="):null,640<=n?t("",s.funct,!0,mxResources.get("zoomOut")+" ("+Editor.ctrlKey+" -)",s,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTUuNSAxNGgtLjc5bC0uMjgtLjI3QzE1LjQxIDEyLjU5IDE2IDExLjExIDE2IDkuNSAxNiA1LjkxIDEzLjA5IDMgOS41IDNTMyA1LjkxIDMgOS41IDUuOTEgMTYgOS41IDE2YzEuNjEgMCAzLjA5LS41OSA0LjIzLTEuNTdsLjI3LjI4di43OWw1IDQuOTlMMjAuNDkgMTlsLTQuOTktNXptLTYgMEM3LjAxIDE0IDUgMTEuOTkgNSA5LjVTNy4wMSA1IDkuNSA1IDE0IDcuMDEgMTQgOS41IDExLjk5IDE0IDkuNSAxNHpNNyA5aDV2MUg3eiIvPjwvc3ZnPg=="):null],60)}i=o.menus.get("language"),null!=i&&!mxClient.IS_CHROMEAPP&&!EditorUi.isElectronApp&&540<=n?(null==g&&(s=l.addMenu("",i.funct),s.setAttribute("title",mxResources.get("language")),s.className="geToolbarButton",s.style.backgroundImage="url("+Editor.globeImage+")",s.style.backgroundPosition="center center",s.style.backgroundRepeat="no-repeat",s.style.backgroundSize="24px 24px",s.style.position="absolute",s.style.height="24px",s.style.width="24px",s.style.zIndex="1",s.style.top="11px",s.style.right="14px",s.style.cursor="pointer",a.appendChild(s),g=s),o.buttonContainer.style.right="40px"):o.buttonContainer.style.right="14px"}v.apply(this,arguments);var s=document.createElement("div");s.style.cssText="position:absolute;left:0px;right:0px;top:0px;overflow-y:auto;overflow-x:hidden;",s.style.bottom="1"!=urlParams.embed||"1"==urlParams.libraries?"63px":"32px",this.sidebar=this.createSidebar(s);var o=this,u=o.editor.graph;o.toolbar=this.createToolbar(o.createDiv("geToolbar")),o.defaultLibraryName=mxResources.get("untitledLibrary");var a=document.createElement("div");a.style.cssText="position:absolute;left:0px;right:0px;top:0px;height:30px;padding:8px;border-bottom:1px solid lightgray;background-color:#ffffff;text-align:left;white-space:nowrap;";var f=null,l=new Menubar(o,a);o.statusContainer=o.createStatusContainer(),o.statusContainer.style.position="relative",o.statusContainer.style.maxWidth="",o.statusContainer.style.marginTop="7px",o.statusContainer.style.marginLeft="6px",o.statusContainer.style.color="gray",o.statusContainer.style.cursor="default",o.editor.addListener("statusChanged",mxUtils.bind(this,function(){o.setStatusText(o.editor.getStatus())}));var c=o.descriptorChanged;o.descriptorChanged=function(){c.apply(this,arguments);var e=o.getCurrentFile();if(null!=e&&null!=e.getTitle()){var t=e.getMode();"google"==t?t="googleDrive":"github"==t?t="gitHub":"onedrive"==t&&(t="oneDrive"),t=mxResources.get(t),a.setAttribute("title",e.getTitle()+(null!=t?" ("+t+")":""))}else a.removeAttribute("title")},o.setStatusText(o.editor.getStatus()),a.appendChild(o.statusContainer),o.buttonContainer=document.createElement("div"),o.buttonContainer.style.cssText="position:absolute;right:40px;top:12px;white-space:nowrap;",a.appendChild(o.buttonContainer),o.menubarContainer=o.buttonContainer,o.tabContainer=document.createElement("div"),o.tabContainer.style.cssText="position:absolute;left:0px;right:0px;bottom:0px;height:30px;white-space:nowrap;border-bottom:1px solid lightgray;background-color:#ffffff;border-top:1px solid lightgray;margin-bottom:-2px;visibility:hidden;";var s=o.diagramContainer.parentNode,h=document.createElement("div");h.style.cssText="position:absolute;top:0px;left:0px;right:0px;bottom:0px;overflow:hidden;",o.diagramContainer.style.top="47px";var p=o.menus.get("viewZoom");if(null!=p){this.tabContainer.style.right="70px";var d=l.addMenu("100%",p.funct);d.setAttribute("title",mxResources.get("zoom")+" (Alt+Mousewheel)"),d.style.whiteSpace="nowrap",d.style.backgroundImage="url("+mxWindow.prototype.minimizeImage+")",d.style.backgroundPosition="right 6px center",d.style.backgroundRepeat="no-repeat",d.style.backgroundColor="#ffffff",d.style.paddingRight="10px",d.style.display="block",d.style.position="absolute",d.style.textDecoration="none",d.style.textDecoration="none",d.style.right="0px",d.style.bottom="0px",d.style.overflow="hidden",d.style.visibility="hidden",d.style.textAlign="center",d.style.color="#000",d.style.fontSize="12px",d.style.color="#707070",d.style.width="59px",d.style.borderTop="1px solid lightgray",d.style.borderLeft="1px solid lightgray",d.style.height=parseInt(o.tabContainer.style.height)-1+"px",d.style.lineHeight=parseInt(o.tabContainer.style.height)+1+"px",h.appendChild(d),p=mxUtils.bind(this,function(){d.innerHTML=Math.round(100*o.editor.graph.view.scale)+"%"}),o.editor.graph.view.addListener(mxEvent.EVENT_SCALE,p),o.editor.addListener("resetGraphView",p),o.editor.addListener("pageSelected",p);var m=o.setGraphEnabled;o.setGraphEnabled=function(){m.apply(this,arguments),null!=this.tabContainer&&(d.style.visibility=this.tabContainer.style.visibility,this.diagramContainer.style.bottom="hidden"!=this.tabContainer.style.visibility?"30px":"0px")}}h.appendChild(o.tabContainer),h.appendChild(a),h.appendChild(o.diagramContainer),s.appendChild(h),o.updateTabContainer();var g=null;i(),mxEvent.addListener(window,"resize",function(){i(),null!=o.sidebarWindow&&o.sidebarWindow.window.fit(),null!=o.formatWindow&&o.formatWindow.window.fit(),null!=o.actions.outlineWindow&&o.actions.outlineWindow.window.fit(),null!=o.actions.layersWindow&&o.actions.layersWindow.window.fit(),null!=o.menus.tagsWindow&&o.menus.tagsWindow.window.fit(),null!=o.menus.findWindow&&o.menus.findWindow.window.fit()})}}},function(){var e=!1;"min"!=uiTheme||e||mxClient.IS_CHROMEAPP||(EditorUi.initMinimalTheme(),e=!0);var t=EditorUi.initTheme;EditorUi.initTheme=function(){t.apply(this,arguments),"min"!=uiTheme||e||(this.initMinimalTheme(),e=!0)}}(),mxResources.parse("# *DO NOT DIRECTLY EDIT THIS FILE, IT IS AUTOMATICALLY GENERATED AND IT IS BASED ON:*\n# https://docs.google.com/spreadsheet/ccc?key=0AmQEO36liL4FdDJLWVNMaVV2UmRKSnpXU09MYkdGbEE\naboutDrawio=About draw.io\naccessDenied=Access Denied\naction=Action\nactualSize=Actual Size\nadd=Add\naddedFile=Added {1}\naddImages=Add Images\naddImageUrl=Add Image URL\naddLayer=Add Layer\naddProperty=Add Property\naddress=Address\naddToExistingDrawing=Add to Existing Drawing\naddWaypoint=Add Waypoint\nadjustTo=Adjust to\nadvanced=Advanced\nalign=Align\nalignment=Alignment\nallChangesLost=All changes will be lost!\nallPages=All Pages\nallProjects=All Projects\nallSpaces=All Spaces\nallTags=All Tags\nanchor=Anchor\nandroid=Android\nangle=Angle\narc=Arc\nareYouSure=Are you sure?\nensureDataSaved=Please ensure your data is saved before closing.\nallChangesSaved=All changes saved\nallChangesSavedInDrive=All changes saved in Drive\nallowPopups=Allow pop-ups to avoid this dialog.\nallowRelativeUrl=Allow relative URL\nalreadyConnected=Nodes already connected\napply=Apply\narchiMate21=ArchiMate 2.1\narrange=Arrange\narrow=Arrow\narrows=Arrows\nasNew=As New\natlas=Atlas\nauthor=Author\nauthorizationRequired=Authorization required\nauthorizeThisAppIn=Authorize this app in {1}:\nauthorize=Authorize\nauthorizing=Authorizing\nautomatic=Automatic\nautosave=Autosave\nautosize=Autosize\nattachments=Attachments\naws=AWS\naws3d=AWS 3D\nazure=Azure\nbackground=Background\nbackgroundColor=Background Color\nbackgroundImage=Background Image\nbasic=Basic\nblankDrawing=Blank Drawing\nblankDiagram=Blank Diagram\nblock=Block\nblockquote=Blockquote\nblog=Blog\nbold=Bold\nbootstrap=Bootstrap\nborder=Border\nborderColor=Border Color\nborderWidth=Borderwidth\nbottom=Bottom\nbottomAlign=Bottom Align\nbottomLeft=Bottom Left\nbottomRight=Bottom Right\nbpmn=BPMN\nbrowser=Browser\nbulletedList=Bulleted List\nbusiness=Business\nbusy=Operation in progress\ncabinets=Cabinets\ncancel=Cancel\ncenter=Center\ncannotLoad=Load attempts failed. Please try again later.\ncannotLogin=Log in attempts failed. Please try again later.\ncannotOpenFile=Cannot open file\nchange=Change\nchangeOrientation=Change Orientation\nchangeUser=Change user\nchangesNotSaved=Changes have not been saved\nuserJoined={1} has joined\nuserLeft={1} has left\nchatWindowTitle=Chat\nchooseAnOption=Choose an option\nchromeApp=Chrome App\ncollaborativeEditingNotice=Important Notice for Collaborative Editing\ncompressed=Compressed\ncommitMessage=Commit Message\ncsv=CSV\ndark=Dark\ndraftFound=A draft for '{1}' has been found. Load it into the editor or discard it to continue.\ndragAndDropNotSupported=Drag and drop not supported for images. Would you like to import instead?\ndropboxCharsNotAllowed=The following characters are not allowed:  / : ? * \" |\ncheck=Check\nchecksum=Checksum\ncircle=Circle\ncisco=Cisco\nclassic=Classic\nclearDefaultStyle=Clear Default Style\nclearWaypoints=Clear Waypoints\nclipart=Clipart\nclose=Close\ncollaborator=Collaborator\ncollaborators=Collaborators\ncollapse=Collapse\ncollapseExpand=Collapse/Expand\ncollapse-expand=Click to collapse/expand\nShift-click to move neighbors \nAlt-click to protect group size\ncollapsible=Collapsible\ncomic=Comic\ncomment=Comment\ncommentsNotes=Comments/Notes\ncompress=Compress\nconnect=Connect\nconnecting=Connecting\nconnectWithDrive=Connect with Google Drive\nconnection=Connection\nconnectionArrows=Connection Arrows\nconnectionPoints=Connection Points\nconstrainProportions=Constrain Proportions\ncontainsValidationErrors=Contains validation errors\ncopiedToClipboard=Copied to clipboard\ncopy=Copy\ncopyConnect=Copy on connect\ncopyOf=Copy of {1}\ncopyOfDrawing=Copy of Drawing\ncopySize=Copy Size\ncopyStyle=Copy Style\ncreate=Create\ncreateNewDiagram=Create New Diagram\ncreateRevision=Create Revision\ncreateShape=Create Shape\ncrop=Crop\ncurved=Curved\ncustom=Custom\ncurrent=Current\ncut=Cut\ndashed=Dashed\ndecideLater=Decide later\ndefault=Default\ndelete=Delete\ndeleteColumn=Delete Column\ndeleteLibrary401=Insufficient permissions to delete this library\ndeleteLibrary404=Selected library could not be found\ndeleteLibrary500=Error deleting library\ndeleteLibraryConfirm=You are about to permanently delete this library. Are you sure you want to do this?\ndeleteRow=Delete Row\ndescription=Description\ndevice=Device\ndiagram=Diagram\ndiagramContent=Diagram Content\ndiagramLocked=Diagram has been locked to prevent further data loss.\ndiagramLockedBySince=The diagram is locked by {1} since {2} ago\ndiagramName=Diagram Name\ndiagramIsPublic=Diagram is public\ndiagramIsNotPublic=Diagram is not public\ndiamond=Diamond\ndiamondThin=Diamond (thin)\ndidYouKnow=Did you know...\ndirection=Direction\ndiscard=Discard\ndiscardChangesAndReconnect=Discard Changes and Reconnect\ngoogleDriveMissingClickHere=Google Drive missing? Click here!\ndiscardChanges=Discard Changes\ndisconnected=Disconnected\ndistribute=Distribute\ndone=Done\ndotted=Dotted\ndoubleClickOrientation=Doubleclick to change orientation\ndoubleClickTooltip=Doubleclick to insert text\ndoubleClickChangeProperty=Doubleclick to change property name\ndownload=Download\ndownloadDesktop=Download draw.io Desktop\ndownloadAs=Download as\nclickHereToSave=Click here to save.\ndraftDiscarded=Draft discarded\ndraftSaved=Draft saved\ndragElementsHere=Drag elements here\ndragImagesHere=Drag images or URLs here\ndragUrlsHere=Drag URLs here\ndraw.io=draw.io\ndrawing=Drawing{1}\ndrawingEmpty=Drawing is empty\ndrawingTooLarge=Drawing is too large\ndrawioForWork=Draw.io for GSuite\ndropbox=Dropbox\nduplicate=Duplicate\nduplicateIt=Duplicate {1}\ndivider=Divider\ndx=Dx\ndy=Dy\neast=East\nedit=Edit\neditData=Edit Data\neditDiagram=Edit Diagram\neditGeometry=Edit Geometry\neditImage=Edit Image\neditImageUrl=Edit Image URL\neditLink=Edit Link\neditShape=Edit Shape\neditStyle=Edit Style\neditText=Edit Text\neditTooltip=Edit Tooltip\nglass=Glass\ngoogleImages=Google Images\nimageSearch=Image Search\neip=EIP\nembed=Embed\nembedImages=Embed Images\nmainEmbedNotice=Paste this into the page\nelectrical=Electrical\nellipse=Ellipse\nembedNotice=Paste this once at the end of the page\nenterGroup=Enter Group\nenterName=Enter Name\nenterPropertyName=Enter Property Name\nenterValue=Enter Value\nentityRelation=Entity Relation\nerror=Error\nerrorDeletingFile=Error deleting file\nerrorLoadingFile=Error loading file\nerrorRenamingFile=Error renaming file\nerrorRenamingFileNotFound=Error renaming file. File was not found.\nerrorRenamingFileForbidden=Error renaming file. Insufficient access rights.\nerrorSavingDraft=Error saving draft\nerrorSavingFile=Error saving file\nerrorSavingFileUnknown=Error authorizing with Google's servers. Please refresh the page to re-attempt.\nerrorSavingFileForbidden=Error saving file. Insufficient access rights.\nerrorSavingFileNameConflict=Could not save diagram. Current page already contains file named '{1}'.\nerrorSavingFileNotFound=Error saving file. File was not found.\nerrorSavingFileReadOnlyMode=Could not save diagram while read-only mode is active.\nerrorSavingFileSessionTimeout=Your session has ended. Please <a target='_blank' href='{1}'>{2}</a> and return to this tab to try to save again.\nerrorSendingFeedback=Error sending feedback.\nerrorUpdatingPreview=Error updating preview.\nexit=Exit\nexitGroup=Exit Group\nexpand=Expand\nexport=Export\nexporting=Exporting\nexportAs=Export as\nexportOptionsDisabled=Export options disabled\nexportOptionsDisabledDetails=The owner has disabled options to download, print or copy for commenters and viewers on this file.\nexternalChanges=External Changes\nextras=Extras\nfacebook=Facebook\nfailedToSaveTryReconnect=Failed to save, trying to reconnect\nfeatureRequest=Feature Request\nfeedback=Feedback\nfeedbackSent=Feedback successfully sent.\nfloorplans=Floorplans\nfile=File\nfileChangedOverwriteDialog=The file has been modified. Do you want to save the file and overwrite those changes?\nfileChangedSyncDialog=The file has been modified. Do you want to synchronize those changes?\nfileChangedSync=The file has been modified. Click here to synchronize.\noverwrite=Overwrite\nsynchronize=Synchronize\nfilename=Filename\nfileExists=File already exists\nfileNearlyFullSeeFaq=File nearly full, please see FAQ\nfileNotFound=File not found\nrepositoryNotFound=Repository not found\nfileNotFoundOrDenied=The file was not found. It does not exist or you do not have read access.\nfileNotLoaded=File not loaded\nfileNotSaved=File not saved\nfileOpenLocation=How would you like to open these file(s)?\nfileWillBeSavedInAppFolder={1} will be saved in the app folder.\nfill=Fill\nfillColor=Fill Color\nfilterCards=Filter Cards\nfind=Find\nfit=Fit\nfitContainer=Resize Container\nfitIntoContainer=Fit into Container\nfitPage=Fit Page\nfitPageWidth=Fit Page Width\nfitTo=Fit to\nfitToSheetsAcross=sheet(s) across\nfitToBy=by\nfitToSheetsDown=sheet(s) down\nfitTwoPages=Two Pages\nfitWindow=Fit Window\nflip=Flip\nflipH=Flip Horizontal\nflipV=Flip Vertical\nflowchart=Flowchart\nfolder=Folder\nfont=Font\nfontColor=Font Color\nfontFamily=Font Family\nfontSize=Font Size\nforbidden=You are not authorized to access this file\nformat=Format\nformatPanel=Format Panel\nformatted=Formatted\nformattedText=Formatted Text\nformatPng=PNG\nformatGif=GIF\nformatJpg=JPEG\nformatPdf=PDF\nformatSql=SQL\nformatSvg=SVG\nformatHtmlEmbedded=HTML\nformatSvgEmbedded=SVG (with XML)\nformatVsdx=VSDX\nformatVssx=VSSX\nformatXmlPlain=XML (Plain)\nformatXml=XML\nforum=Discussion/Help Forums\nfromTemplate=From Template\nfromTemplateUrl=From Template URL\nfromText=From Text\nfromUrl=From URL\nfromThisPage=From this page\nfullscreen=Fullscreen\ngap=Gap\ngcp=GCP\ngeneral=General\ngithub=GitHub\ngliffy=Gliffy\nglobal=Global\ngoogleDocs=Google Docs\ngoogleDrive=Google Drive\ngoogleGadget=Google Gadget\ngooglePlus=Google+\ngoogleSlides=Google Slides\ngoogleSites=Google Sites\ngradient=Gradient\ngradientColor=Color\ngrid=Grid\ngridColor=Grid Color\ngridSize=Grid Size\ngroup=Group\nguides=Guides\nhateApp=I hate draw.io\nheading=Heading\nheight=Height\nhelp=Help\nhelpTranslate=Help us translate this application\nhide=Hide\nhideIt=Hide {1}\nhidden=Hidden\nhome=Home\nhorizontal=Horizontal\nhorizontalFlow=Horizontal Flow\nhorizontalTree=Horizontal Tree\nhowTranslate=How good is the translation in your language?\nhtml=HTML\nhtmlText=HTML Text\nid=ID\niframe=IFrame\nignore=Ignore\nimage=Image\nimageUrl=Image URL\nimages=Images\nimagePreviewError=This image couldn't be loaded for preview. Please check the URL.\nimageTooBig=Image too big\nimgur=Imgur\nimport=Import\nimportFrom=Import from\nincludeCopyOfMyDiagram=Include a copy of my diagram\nincreaseIndent=Increase Indent\ndecreaseIndent=Decrease Indent\ninsert=Insert\ninsertColumnBefore=Insert Column Left\ninsertColumnAfter=Insert Column Right\ninsertEllipse=Insert Ellipse\ninsertImage=Insert Image\ninsertHorizontalRule=Insert Horizontal Rule\ninsertLink=Insert Link\ninsertPage=Insert Page\ninsertRectangle=Insert Rectangle\ninsertRhombus=Insert Rhombus\ninsertRowBefore=Insert Row Above\ninsertRowAfter=Insert Row After\ninsertText=Insert Text\ninserting=Inserting\ninvalidFilename=Diagram names must not contain the following characters:  / | : ; { } < > & + ? = \"\ninvalidLicenseSeeThisPage=Your license is invalid, please see this <a target=\"_blank\" href=\"https://support.draw.io/display/DFCS/Licensing+your+draw.io+plugin\">page</a>.\ninvalidName=Invalid name\ninvalidOrMissingFile=Invalid or missing file\ninvalidPublicUrl=Invalid public URL\nisometric=Isometric\nios=iOS\nitalic=Italic\nkennedy=Kennedy\nkeyboardShortcuts=Keyboard Shortcuts\nlayers=Layers\nlandscape=Landscape\nlanguage=Language\nleanMapping=Lean Mapping\nlastChange=Last change {1} ago\nlessThanAMinute=less than a minute\nlicensingError=Licensing Error\nlicenseHasExpired=The license for {1} has expired on {2}. Click here.\nlicenseWillExpire=The license for {1} will expire on {2}. Click here.\nlineJumps=Line jumps\nlinkAccountRequired=If the diagram is not public a Google account is required to view the link.\nlinkText=Link Text\nlist=List\nminute=minute\nminutes=minutes\nhours=hours\ndays=days\nmonths=months\nyears=years\nrestartForChangeRequired=Changes will take effect after page refresh.\nlaneColor=Lanecolor\nlastModified=Last modified\nlayout=Layout\nleft=Left\nleftAlign=Left Align\nleftToRight=Left to right\nlibraryTooltip=Drag and drop shapes here or click + to insert. Double click to edit.\nlightbox=Lightbox\nline=Line\nlineend=Line end\nlineheight=Line Height\nlinestart=Line start\nlinewidth=Linewidth\nlink=Link\nlinks=Links\nloading=Loading\nlockUnlock=Lock/Unlock\nloggedOut=Logged Out\nlogIn=log in\nloveIt=I love {1}\nlucidchart=Lucidchart\nmaps=Maps\nmathematicalTypesetting=Mathematical Typesetting\nmakeCopy=Make a Copy\nmanual=Manual\nmiddle=Middle\nminimal=Minimal\nmisc=Misc\nmockups=Mockups\nmodificationDate=Modification date\nmodifiedBy=Modified by\nmore=More\nmoreResults=More Results\nmoreShapes=More Shapes\nmove=Move\nmoveToFolder=Move to Folder\nmoving=Moving\nmoveSelectionTo=Move selection to {1}\nname=Name\nnavigation=Navigation\nnetwork=Network\nnetworking=Networking\nnew=New\nnewLibrary=New Library\nnextPage=Next Page\nno=No\nnoPickFolder=No, pick folder\nnoAttachments=No attachments found\nnoColor=No Color\nnoFiles=No Files\nnoFileSelected=No file selected\nnoLibraries=No libraries found\nnoMoreResults=No more results\nnone=None\nnoOtherViewers=No other viewers\nnoPlugins=No plugins\nnoPreview=No preview\nnoResponse=No response from server\nnoResultsFor=No results for '{1}'\nnoRevisions=No revisions\nnoSearchResults=No search results found\nnoPageContentOrNotSaved=No anchors found on this page or it hasn't been saved yet\nnormal=Normal\nnorth=North\nnotADiagramFile=Not a diagram file\nnotALibraryFile=Not a library file\nnotAvailable=Not available\nnotAUtf8File=Not a UTF-8 file\nnotConnected=Not connected\nnote=Note\nnotUsingService=Not using {1}?\nnumberedList=Numbered list\noffline=Offline\nok=OK\noneDrive=OneDrive\nonline=Online\nopacity=Opacity\nopen=Open\nopenArrow=Open Arrow\nopenExistingDiagram=Open Existing Diagram\nopenFile=Open File\nopenFrom=Open from\nopenLibrary=Open Library\nopenLibraryFrom=Open Library from\nopenLink=Open Link\nopenInNewWindow=Open in New Window\nopenInThisWindow=Open in This Window\nopenIt=Open {1}\nopenRecent=Open Recent\nopenSupported=Supported formats are files saved from this software (.xml), .vsdx and .gliffy\noptions=Options\norganic=Organic\northogonal=Orthogonal\notherViewer=other viewer\notherViewers=other viewers\noutline=Outline\noval=Oval\npage=Page\npageContent=Page Content\npageNotFound=Page not found\npageWithNumber=Page-{1}\npages=Pages\npageView=Page View\npageSetup=Page Setup\npageScale=Page Scale\npan=Pan\npanTooltip=Space+Drag to pan\npaperSize=Paper Size\npattern=Pattern\npaste=Paste\npasteHere=Paste here\npasteSize=Paste Size\npasteStyle=Paste Style\nperimeter=Perimeter\npermissionAnyone=Anyone can edit\npermissionAuthor=Owner and admins can edit\npickFolder=Pick a folder\npickLibraryDialogTitle=Select Library\npublicDiagramUrl=Public URL of the diagram\nplaceholders=Placeholders\nplantUml=PlantUML\nplugins=Plugins\npluginUrl=Plugin URL\npluginWarning=The page has requested to load the following plugin(s):\n \n {1}\n \n Would you like to load these plugin(s) now?\n \n NOTE : Only allow plugins to run if you fully understand the security implications of doing so.\n\nplusTooltip=Click to connect and clone (ctrl+click to clone, shift+click to connect). Drag to connect (ctrl+drag to clone).\nportrait=Portrait\nposition=Position\nposterPrint=Poster Print\npreferences=Preferences\npreview=Preview\npreviousPage=Previous Page\nprint=Print\nprintAllPages=Print All Pages\nprocEng=Proc. Eng.\nproject=Project\npriority=Priority\nproperties=Properties\npublish=Publish\nquickStart=Quick Start Video\nrack=Rack\nradialTree=Radial Tree\nreadOnly=Read-only\nreconnecting=Reconnecting\nrecentlyUpdated=Recently Updated\nrecentlyViewed=Recently Viewed\nrectangle=Rectangle\nredirectToNewApp=This file was created or modified in a newer version of this app. You will be redirected now.\nrealtimeTimeout=It looks like you've made a few changes while offline. We're sorry, these changes cannot be saved.\nredo=Redo\nrefresh=Refresh\nregularExpression=Regular Expression\nrelative=Relative\nrelativeUrlNotAllowed=Relative URL not allowed\nrememberMe=Remember me\nrememberThisSetting=Remember this setting\nremoveFormat=Clear Formatting\nremoveFromGroup=Remove from Group\nremoveIt=Remove {1}\nremoveWaypoint=Remove Waypoint\nrename=Rename\nrenamed=Renamed\nrenameIt=Rename {1}\nrenaming=Renaming\nreplace=Replace\nreplaceIt={1} already exists. Do you want to replace it?\nreplaceExistingDrawing=Replace existing drawing\nrequired=required\nreset=Reset\nresetView=Reset View\nresize=Resize\nresizeLargeImages=Do you want to resize large images to make the application run faster?\nretina=Retina\nresponsive=Responsive\nrestore=Restore\nrestoring=Restoring\nretryingIn=Retrying in {1} second(s)\nretryingLoad=Load failed. Retrying...\nretryingLogin=Login time out. Retrying...\nreverse=Reverse\nrevision=Revision\nrevisionHistory=Revision History\nrhombus=Rhombus\nright=Right\nrightAlign=Right Align\nrightToLeft=Right to left\nrotate=Rotate\nrotateTooltip=Click and drag to rotate, click to turn shape only by 90 degrees\nrotation=Rotation\nrounded=Rounded\nsave=Save\nsaveAndExit=Save & Exit\nsaveAs=Save as\nsaveAsXmlFile=Save as XML file?\nsaved=Saved\nsaveDiagramsTo=Save diagrams to\nsaveLibrary403=Insufficient permissions to edit this library\nsaveLibrary500=There was an error while saving the library\nsaving=Saving\nscratchpad=Scratchpad\nscrollbars=Scrollbars\nsearch=Search\nsearchShapes=Search Shapes\nselectAll=Select All\nselectionOnly=Selection Only\nselectCard=Select Card\nselectEdges=Select Edges\nselectFile=Select File\nselectFolder=Select Folder\nselectFont=Select Font\nselectNone=Select None\nselectTemplate=Select Template\nselectVertices=Select Vertices\nsendMessage=Send\nsendYourFeedbackToDrawIo=Send your feedback to draw.io\nserviceUnavailableOrBlocked=Service unavailable or blocked\nsessionExpired=Your session has expired. Please refresh the browser window.\nsessionTimeoutOnSave=Your session has timed out and you have been disconnected from the Google Drive. Press OK to login and save. \nsetAsDefaultStyle=Set as Default Style\nshadow=Shadow\nshape=Shape\nshapes=Shapes\nshare=Share\nshareLink=Link for shared editing\nsharp=Sharp\nshow=Show\nshowStartScreen=Show Start Screen\nsidebarTooltip=Click to expand. Drag and drop shapes into the diagram. Shift+click to change selection. Alt+click to insert and connect.\nsigns=Signs\nsignOut=Sign out\nsimple=Simple\nsimpleArrow=Simple Arrow\nsize=Size\nsolid=Solid\nsourceSpacing=Source Spacing\nsouth=South\nsoftware=Software\nspace=Space\nspacing=Spacing\nspecialLink=Special Link\nstandard=Standard\nstarting=Starting\nstraight=Straight\nstrokeColor=Line Color\nstyle=Style\nsubscript=Subscript\nsummary=Summary\nsuperscript=Superscript\nsupport=Support\nsysml=SysML\ntags=Tags\ntable=Table\ntables=Tables\ntakeOver=Take Over\ntargetSpacing=Target Spacing\ntemplate=Template\ntemplates=Templates\ntext=Text\ntextAlignment=Text Alignment\ntextOpacity=Text Opacity\ntheme=Theme\ntimeout=Timeout\ntitle=Title\nto=to\ntoBack=To Back\ntoFront=To Front\ntooltips=Tooltips\ntop=Top\ntopAlign=Top Align\ntopLeft=Top Left\ntopRight=Top Right\ntransparent=Transparent\ntransparentBackground=Transparent Background\ntrello=Trello\ntryAgain=Try again\ntryOpeningViaThisPage=Try opening via this page.\nturn=Rotate shape only by 90\ntype=Type\ntwitter=Twitter\numl=UML\nunderline=Underline\nundo=Undo\nungroup=Ungroup\nunsavedChanges=Unsaved changes\nunsavedChangesClickHereToSave=Unsaved changes. Click here to save.\nuntitled=Untitled\nuntitledDiagram=Untitled Diagram\nuntitledLayer=Untitled Layer\nuntitledLibrary=Untitled Library\nunknownError=Unknown error\nupdateFile=Update {1}\nupdatingDocument=Updating Document. Please wait...\nupdatingPreview=Updating Preview. Please wait...\nupdatingSelection=Updating Selection. Please wait...\nupload=Upload\nurl=URL\nuseOffline=Use Offline\nuseRootFolder=Use root folder?\nuserManual=User Manual\nvertical=Vertical\nverticalFlow=Vertical Flow\nverticalTree=Vertical Tree\nview=View\nviewUrl=Link to view: {1}\nvoiceAssistant=Voice Assistant (beta)\nwarning=Warning\nwaypoints=Waypoints\nwest=West\nwidth=Width\nwiki=Wiki\nwordWrap=Word Wrap\nwritingDirection=Writing Direction\nyes=Yes\nyourEmailAddress=Your email address\nzoom=Zoom\nzoomIn=Zoom In\nzoomOut=Zoom Out\nbasic=Basic\nbusinessprocess=Business Processes\ncharts=Charts\nengineering=Engineering\nflowcharts=Flowcharts\ngmdl=Material Design\nmindmaps=Mindmaps\nmockups=Mockups\nnetworkdiagrams=Network Diagrams\nnothingIsSelected=Nothing is selected\nother=Other\nsoftwaredesign=Software Design\nvenndiagrams=Venn Diagrams\nwebEmailOrOther=Web, email or any other internet address\nwebLink=Web Link\nwireframes=Wireframes\nproperty=Property\nvalue=Value\nshowMore=Show More\nshowLess=Show Less\nmyDiagrams=My Diagrams\nallDiagrams=All Diagrams\nrecentlyUsed=Recently used\nlistView=List view\ngridView=Grid view\nresultsFor=Results for '{1}'\n"),Graph.prototype.defaultThemes[Graph.prototype.defaultThemeName]=mxUtils.parseXml('<mxStylesheet><add as="defaultVertex"><add as="shape" value="label"/><add as="perimeter" value="rectanglePerimeter"/><add as="fontSize" value="12"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="fillColor" value="#ffffff"/><add as="strokeColor" value="#000000"/><add as="fontColor" value="#000000"/></add><add as="defaultEdge"><add as="shape" value="connector"/><add as="labelBackgroundColor" value="#ffffff"/><add as="endArrow" value="classic"/><add as="fontSize" value="11"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="rounded" value="1"/><add as="strokeColor" value="#000000"/><add as="fontColor" value="#000000"/></add><add as="fancy"><add as="shadow" value="1"/><add as="glass" value="1"/></add><add as="gray" extend="fancy"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="blue" extend="fancy"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="green" extend="fancy"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="turquoise" extend="fancy"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="yellow" extend="fancy"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="orange" extend="fancy"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="red" extend="fancy"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="pink" extend="fancy"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="purple" extend="fancy"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add><add as="plain-gray"><add as="gradientColor" value="#B3B3B3"/><add as="fillColor" value="#F5F5F5"/><add as="strokeColor" value="#666666"/></add><add as="plain-blue"><add as="gradientColor" value="#7EA6E0"/><add as="fillColor" value="#DAE8FC"/><add as="strokeColor" value="#6C8EBF"/></add><add as="plain-green"><add as="gradientColor" value="#97D077"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#82B366"/></add><add as="plain-turquoise"><add as="gradientColor" value="#67AB9F"/><add as="fillColor" value="#D5E8D4"/><add as="strokeColor" value="#6A9153"/></add><add as="plain-yellow"><add as="gradientColor" value="#FFD966"/><add as="fillColor" value="#FFF2CC"/><add as="strokeColor" value="#D6B656"/></add><add as="plain-orange"><add as="gradientColor" value="#FFA500"/><add as="fillColor" value="#FFCD28"/><add as="strokeColor" value="#D79B00"/></add><add as="plain-red"><add as="gradientColor" value="#EA6B66"/><add as="fillColor" value="#F8CECC"/><add as="strokeColor" value="#B85450"/></add><add as="plain-pink"><add as="gradientColor" value="#B5739D"/><add as="fillColor" value="#E6D0DE"/><add as="strokeColor" value="#996185"/></add><add as="plain-purple"><add as="gradientColor" value="#8C6C9C"/><add as="fillColor" value="#E1D5E7"/><add as="strokeColor" value="#9673A6"/></add><add as="text"><add as="fillColor" value="none"/><add as="gradientColor" value="none"/><add as="strokeColor" value="none"/><add as="align" value="left"/><add as="verticalAlign" value="top"/></add><add as="label"><add as="fontStyle" value="1"/><add as="align" value="left"/><add as="verticalAlign" value="middle"/><add as="spacing" value="2"/><add as="spacingLeft" value="52"/><add as="imageWidth" value="42"/><add as="imageHeight" value="42"/><add as="rounded" value="1"/></add><add as="icon" extend="label"><add as="align" value="center"/><add as="imageAlign" value="center"/><add as="verticalLabelPosition" value="bottom"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="4"/><add as="labelBackgroundColor" value="#ffffff"/><add as="spacing" value="0"/><add as="spacingLeft" value="0"/><add as="spacingTop" value="6"/><add as="fontStyle" value="0"/><add as="imageWidth" value="48"/><add as="imageHeight" value="48"/></add><add as="swimlane"><add as="shape" value="swimlane"/><add as="fontSize" value="12"/><add as="fontStyle" value="1"/><add as="startSize" value="23"/></add><add as="group"><add as="verticalAlign" value="top"/><add as="fillColor" value="none"/><add as="strokeColor" value="none"/><add as="gradientColor" value="none"/><add as="pointerEvents" value="0"/></add><add as="ellipse"><add as="shape" value="ellipse"/><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombus"><add as="shape" value="rhombus"/><add as="perimeter" value="rhombusPerimeter"/></add><add as="triangle"><add as="shape" value="triangle"/><add as="perimeter" value="trianglePerimeter"/></add><add as="line"><add as="shape" value="line"/><add as="strokeWidth" value="4"/><add as="labelBackgroundColor" value="#ffffff"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="8"/></add><add as="image"><add as="shape" value="image"/><add as="labelBackgroundColor" value="white"/><add as="verticalAlign" value="top"/><add as="verticalLabelPosition" value="bottom"/></add><add as="roundImage" extend="image"><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombusImage" extend="image"><add as="perimeter" value="rhombusPerimeter"/></add><add as="arrow"><add as="shape" value="arrow"/><add as="edgeStyle" value="none"/><add as="fillColor" value="#ffffff"/></add></mxStylesheet>').documentElement,Graph.prototype.defaultThemes.darkTheme=mxUtils.parseXml('<mxStylesheet><add as="defaultVertex"><add as="shape" value="label"/><add as="perimeter" value="rectanglePerimeter"/><add as="fontSize" value="12"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="fillColor" value="#2a2a2a"/><add as="strokeColor" value="#f0f0f0"/><add as="fontColor" value="#f0f0f0"/></add><add as="defaultEdge"><add as="shape" value="connector"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="endArrow" value="classic"/><add as="fontSize" value="11"/><add as="fontFamily" value="Helvetica"/><add as="align" value="center"/><add as="verticalAlign" value="middle"/><add as="rounded" value="1"/><add as="strokeColor" value="#f0f0f0"/><add as="fontColor" value="#f0f0f0"/></add><add as="text"><add as="fillColor" value="none"/><add as="gradientColor" value="none"/><add as="strokeColor" value="none"/><add as="align" value="left"/><add as="verticalAlign" value="top"/></add><add as="label"><add as="fontStyle" value="1"/><add as="align" value="left"/><add as="verticalAlign" value="middle"/><add as="spacing" value="2"/><add as="spacingLeft" value="52"/><add as="imageWidth" value="42"/><add as="imageHeight" value="42"/><add as="rounded" value="1"/></add><add as="icon" extend="label"><add as="align" value="center"/><add as="imageAlign" value="center"/><add as="verticalLabelPosition" value="bottom"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="4"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="spacing" value="0"/><add as="spacingLeft" value="0"/><add as="spacingTop" value="6"/><add as="fontStyle" value="0"/><add as="imageWidth" value="48"/><add as="imageHeight" value="48"/></add><add as="swimlane"><add as="shape" value="swimlane"/><add as="fontSize" value="12"/><add as="fontStyle" value="1"/><add as="startSize" value="23"/></add><add as="group"><add as="verticalAlign" value="top"/><add as="fillColor" value="none"/><add as="strokeColor" value="none"/><add as="gradientColor" value="none"/><add as="pointerEvents" value="0"/></add><add as="ellipse"><add as="shape" value="ellipse"/><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombus"><add as="shape" value="rhombus"/><add as="perimeter" value="rhombusPerimeter"/></add><add as="triangle"><add as="shape" value="triangle"/><add as="perimeter" value="trianglePerimeter"/></add><add as="line"><add as="shape" value="line"/><add as="strokeWidth" value="4"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="verticalAlign" value="top"/><add as="spacingTop" value="8"/></add><add as="image"><add as="shape" value="image"/><add as="labelBackgroundColor" value="#2a2a2a"/><add as="verticalAlign" value="top"/><add as="verticalLabelPosition" value="bottom"/></add><add as="roundImage" extend="image"><add as="perimeter" value="ellipsePerimeter"/></add><add as="rhombusImage" extend="image"><add as="perimeter" value="rhombusPerimeter"/></add><add as="arrow"><add as="shape" value="arrow"/><add as="edgeStyle" value="none"/><add as="fillColor" value="#2a2a2a"/></add></mxStylesheet>').documentElement,GraphViewer=function(e,t,n){this.init(e,t,n)},mxUtils.extend(GraphViewer,mxEventSource),GraphViewer.prototype.editBlankUrl="https://www.draw.io/",GraphViewer.prototype.imageBaseUrl="https://www.draw.io/",GraphViewer.prototype.toolbarHeight="BackCompat"==document.compatMode?28:30,GraphViewer.prototype.lightboxChrome=!0,GraphViewer.prototype.lightboxZIndex=999,GraphViewer.prototype.toolbarZIndex=999,GraphViewer.prototype.autoFit=!0,GraphViewer.prototype.allowZoomIn=!1,GraphViewer.prototype.showTitleAsTooltip=!1,GraphViewer.prototype.checkVisibleState=!0,GraphViewer.prototype.init=function(e,t,n){this.graphConfig=null!=n?n:{},this.autoFit=null!=this.graphConfig["auto-fit"]?this.graphConfig["auto-fit"]:this.autoFit,this.allowZoomIn=null!=this.graphConfig["allow-zoom-in"]?this.graphConfig["allow-zoom-in"]:this.allowZoomIn,this.checkVisibleState=null!=this.graphConfig["check-visible-state"]?this.graphConfig["check-visible-state"]:this.checkVisibleState,this.toolbarItems=null!=this.graphConfig.toolbar?this.graphConfig.toolbar.split(" "):[],this.zoomEnabled=0<=mxUtils.indexOf(this.toolbarItems,"zoom"),this.layersEnabled=0<=mxUtils.indexOf(this.toolbarItems,"layers"),this.lightboxEnabled=0<=mxUtils.indexOf(this.toolbarItems,"lightbox"),this.lightboxClickEnabled=0!=this.graphConfig.lightbox,this.initialWidth=null!=e?e.style.width:null,this.widthIsEmpty=null!=this.initialWidth?""==this.initialWidth:!0,this.currentPage=parseInt(this.graphConfig.page)||0,this.editor=null;if(null!=t&&(this.xmlDocument=t.ownerDocument,this.xmlNode=t,this.xml=mxUtils.getXml(t),null!=e)){var r=mxUtils.bind(this,function(){this.graph=new Graph(e),this.graph.transparentBackground=!1,this.graphConfig.move&&(this.graph.isMoveCellsEvent=function(e){return!0}),this.lightboxClickEnabled&&(e.style.cursor="pointer"),this.editor=new Editor(!0,null,null,this.graph),this.editor.editBlankUrl=this.editBlankUrl,this.graph.lightbox=!0,this.graph.centerZoom=!1,this.graph.autoExtend=!1,this.graph.autoScroll=!1,this.graph.setEnabled(!1);var n=this;this.graph.getImageFromBundles=function(e){return n.getImageUrl(e)},mxClient.IS_SVG&&this.editor.graph.addSvgShadow(this.graph.view.canvas.ownerSVGElement,null,!0);if("mxfile"==t.nodeName){var r=t.getElementsByTagName("diagram");if(0<r.length){var i=this.graph.getGlobalVariable,n=this;this.graph.getGlobalVariable=function(e){var t=r[n.currentPage];return"page"==e?t.getAttribute("name")||"Page-"+(n.currentPage+1):"pagenumber"==e?n.currentPage+1:i.apply(this,arguments)}}}this.diagrams=[];var s=null;this.selectPage=function(e){this.currentPage=mxUtils.mod(e,this.diagrams.length),this.updateGraphXml(mxUtils.parseXml(this.graph.decompress(mxUtils.getTextContent(this.diagrams[this.currentPage]))).documentElement)},this.selectPageById=function(e){for(var t=!1,n=0;n<this.diagrams.length;n++)if(this.diagrams[n].getAttribute("id")==e){this.selectPage(n),t=!0;break}return t};var o=mxUtils.bind(this,function(){if(null==this.xmlNode||"mxfile"!=this.xmlNode.nodeName)this.diagrams=[];this.xmlNode!=s&&(this.diagrams=this.xmlNode.getElementsByTagName("diagram"),s=this.xmlNode)});this.addListener("xmlNodeChanged",o),o(),urlParams.page=n.currentPage,this.graph.getModel().beginUpdate();try{urlParams.nav=0!=this.graphConfig.nav?"1":"0",this.editor.setGraphXml(this.xmlNode),this.graph.border=null!=this.graphConfig.border?this.graphConfig.border:8,this.graph.view.scale=this.graphConfig.zoom||1}finally{this.graph.getModel().endUpdate()}this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.panningHandler.isForcePanningEvent=function(e){return!mxEvent.isPopupTrigger(e.getEvent())&&"auto"==this.graph.container.style.overflow},this.graph.panningHandler.usePopupTrigger=!1,this.graph.panningHandler.pinchEnabled=!1,this.graph.panningHandler.ignoreCell=!0,this.graph.setPanning(!1),this.addSizeHandler(),this.showLayers(this.graph),this.addClickHandler(this.graph),this.graph.setTooltips(0!=this.graphConfig.tooltips),this.graph.initialViewState={translate:this.graph.view.translate.clone(),scale:this.graph.view.scale},n=this,this.graph.customLinkClicked=function(e){var t=!0;if("data:page/id,"==e.substring(0,13)){var r=e.indexOf(",");n.selectPageById(e.substring(r+1))||(t=!1,alert(mxResources.get("pageNotFound")||"Page not found"))}else this.handleCustomLink(e);return t},null!=this.graphConfig.toolbar?this.addToolbar():null!=this.graphConfig.title&&this.showTitleAsTooltip&&e.setAttribute("title",this.graphConfig.title),this.fireEvent(new mxEventObject("render"))});n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(this.checkVisibleState&&0==e.offsetWidth&&"undefined"!=typeof n){var i=this.getObservableParent(e),s=new n(mxUtils.bind(this,function(t){0<e.offsetWidth&&(s.disconnect(),r())}));s.observe(i,{attributes:!0})}else r()}},GraphViewer.prototype.getObservableParent=function(e){for(e=e.parentNode;e!=document.body&&null!=e.parentNode&&"none"!==mxUtils.getCurrentStyle(e).display;)e=e.parentNode;return e},GraphViewer.prototype.getImageUrl=function(e){return null!=e&&"http://"!=e.substring(0,7)&&"https://"!=e.substring(0,8)&&"data:image"!=e.substring(0,10)&&("/"==e.charAt(0)&&(e=e.substring(1,e.length)),e=this.imageBaseUrl+e),e},GraphViewer.prototype.setXmlNode=function(e){this.xmlDocument=e.ownerDocument,this.xml=mxUtils.getXml(e),this.xmlNode=e,this.updateGraphXml(e),this.fireEvent(new mxEventObject("xmlNodeChanged"))},GraphViewer.prototype.setFileNode=function(e){null==this.xmlNode&&(this.xmlDocument=e.ownerDocument,this.xml=mxUtils.getXml(e),this.xmlNode=e),this.setGraphXml(e)},GraphViewer.prototype.updateGraphXml=function(e){this.setGraphXml(e),this.fireEvent(new mxEventObject("graphChanged"))},GraphViewer.prototype.setGraphXml=function(e){null!=this.graph&&(this.graph.view.translate=new mxPoint,this.graph.view.scale=1,this.graph.getModel().clear(),this.editor.setGraphXml(e),this.widthIsEmpty?(this.graph.container.style.width="",this.graph.container.style.height=""):this.graph.container.style.width=this.initialWidth,this.positionGraph(),this.graph.initialViewState={translate:this.graph.view.translate.clone(),scale:this.graph.view.scale})},GraphViewer.prototype.addSizeHandler=function(){var e=this.graph.container,t=this.graph.getGraphBounds(),n=!1;e.style.overflow="hidden";var r=mxUtils.bind(this,function(){if(!n){n=!0;var t=this.graph.getGraphBounds();e.style.overflow=e.offsetWidth<=t.width+2*this.graph.border*this.graph.view.scale?"auto":"hidden";if(null!=this.toolbar){var t=e.getBoundingClientRect(),r=mxUtils.getScrollOrigin(document.body),r="relative"===document.body.style.position?document.body.getBoundingClientRect():{left:-r.x,top:-r.y},t={left:t.left-r.left,top:t.top-r.top,bottom:t.bottom-r.top,right:t.right-r.left};this.toolbar.style.left=t.left+"px","bottom"==this.graphConfig["toolbar-position"]?this.toolbar.style.top=t.bottom-1+"px":"inline"!=this.graphConfig["toolbar-position"]?(this.toolbar.style.width=Math.max(this.minToolbarWidth,e.offsetWidth)+"px",this.toolbar.style.top=t.top+1+"px"):this.toolbar.style.top=t.top+"px"}n=!1}}),i=null,s=!1;this.fitGraph=function(t){var n=e.offsetWidth;n==i||s||(s=!0,this.graph.maxFitScale=null!=t?t:this.graphConfig.zoom||(this.allowZoomIn?null:1),this.graph.fit(null,null,null,null,!1,!0),this.graph.maxFitScale=null,t=this.graph.getGraphBounds(),this.updateContainerHeight(e,t.height+2*this.graph.border+1),this.graph.initialViewState={translate:this.graph.view.translate.clone(),scale:this.graph.view.scale},i=n,window.setTimeout(function(){s=!1},0))},GraphViewer.useResizeSensor&&(mxClient.IS_QUIRKS||9>=document.documentMode?(mxEvent.addListener(window,"resize",r),this.graph.addListener("size",r)):new ResizeSensor(this.graph.container,r));if(this.graphConfig.resize||(this.zoomEnabled||!this.autoFit)&&0!=this.graphConfig.resize)this.graph.minimumContainerSize=new mxRectangle(0,0,100,1),this.graph.resizeContainer=!0;else if(this.widthIsEmpty&&this.updateContainerWidth(e,t.width+2*this.graph.border),this.updateContainerHeight(e,t.height+2*this.graph.border+1),!this.zoomEnabled&&this.autoFit){var o=i=null,r=mxUtils.bind(this,function(){window.clearTimeout(o),s||(o=window.setTimeout(mxUtils.bind(this,this.fitGraph),100))});GraphViewer.useResizeSensor&&(mxClient.IS_QUIRKS||9>=document.documentMode?mxEvent.addListener(window,"resize",r):new ResizeSensor(this.graph.container,r))}else mxClient.IS_QUIRKS||9>=document.documentMode||this.graph.addListener("size",r);var u=mxUtils.bind(this,function(){var n=e.style.minWidth;this.widthIsEmpty&&(e.style.minWidth="100%");if(0<e.offsetWidth&&(this.allowZoomIn||t.width+2*this.graph.border>e.offsetWidth||t.height+2*this.graph.border>this.graphConfig["max-height"])){var r=null;null!=this.graphConfig["max-height"]&&(r=this.graphConfig["max-height"]/(t.height+2*this.graph.border)),this.fitGraph(r)}else this.graph.view.setTranslate(Math.floor((this.graph.border-t.x)/this.graph.view.scale),Math.floor((this.graph.border-t.y)/this.graph.view.scale)),i=e.offsetWidth;e.style.minWidth=n});mxClient.IS_QUIRKS||8==document.documentMode?window.setTimeout(u,0):u(),this.positionGraph=function(){t=this.graph.getGraphBounds(),i=null,u()}},GraphViewer.prototype.updateContainerWidth=function(e,t){e.style.width=t+"px"},GraphViewer.prototype.updateContainerHeight=function(e,t){if(this.zoomEnabled||!this.autoFit||"BackCompat"==document.compatMode||mxClient.IS_QUIRKS||8==document.documentMode)e.style.height=t+"px"},GraphViewer.prototype.showLayers=function(e,t){var n=this.graphConfig.layers;if(null!=n||null!=t)if(n=null!=n?n.split(" "):null,null!=t||0<n.length){var r=null!=t?t.getModel():null,i=e.getModel();i.beginUpdate();try{for(var s=i.getChildCount(i.root),o=0;o<s;o++)i.setVisible(i.getChildAt(i.root,o),null!=t?r.isVisible(r.getChildAt(r.root,o)):!1);if(null==r)for(o=0;o<n.length;o++)i.setVisible(i.getChildAt(i.root,parseInt(n[o])),!0)}finally{i.endUpdate()}}},GraphViewer.prototype.addToolbar=function(){function e(e,t,r,i){var s=document.createElement("div");return s.style.borderRight="1px solid #d0d0d0",s.style.padding="3px 6px 3px 6px",mxEvent.addListener(s,"click",e),null!=r&&s.setAttribute("title",r),s.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",e=document.createElement("img"),e.setAttribute("border","0"),e.setAttribute("src",t),null==i||i?(mxEvent.addListener(s,"mouseenter",function(){s.style.backgroundColor="#ddd"}),mxEvent.addListener(s,"mouseleave",function(){s.style.backgroundColor="#eee"}),mxUtils.setOpacity(e,60),s.style.cursor="pointer"):mxUtils.setOpacity(s,30),s.appendChild(e),n.appendChild(s),l++,s}var t=this.graph.container;"bottom"==this.graphConfig["toolbar-position"]?t.style.marginBottom=this.toolbarHeight+"px":"inline"!=this.graphConfig["toolbar-position"]&&(t.style.marginTop=this.toolbarHeight+"px");var n=t.ownerDocument.createElement("div");n.style.position="absolute",n.style.overflow="hidden",n.style.boxSizing="border-box",n.style.whiteSpace="nowrap",n.style.zIndex=this.toolbarZIndex,n.style.backgroundColor="#eee",n.style.height=this.toolbarHeight+"px",this.toolbar=n;if("inline"==this.graphConfig["toolbar-position"]){mxUtils.setPrefixedStyle(n.style,"transition","opacity 100ms ease-in-out"),mxUtils.setOpacity(n,30);var r=null,i=null,s=mxUtils.bind(this,function(e){null!=r&&(window.clearTimeout(r),fadeThead=null),null!=i&&(window.clearTimeout(i),fadeThead2=null),r=window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity(n,0),r=null,i=window.setTimeout(mxUtils.bind(this,function(){n.style.display="none",i=null}),100)}),e||200)}),o=mxUtils.bind(this,function(e){null!=r&&(window.clearTimeout(r),fadeThead=null),null!=i&&(window.clearTimeout(i),fadeThead2=null),n.style.display="",mxUtils.setOpacity(n,e||30)});mxEvent.addListener(this.graph.container,mxClient.IS_POINTER?"pointermove":"mousemove",mxUtils.bind(this,function(e){mxEvent.isTouchEvent(e)||(o(30),s())})),mxEvent.addListener(n,mxClient.IS_POINTER?"pointermove":"mousemove",function(e){mxEvent.consume(e)}),mxEvent.addListener(n,"mouseenter",mxUtils.bind(this,function(e){o(100)})),mxEvent.addListener(n,"mousemove",mxUtils.bind(this,function(e){o(100),mxEvent.consume(e)})),mxEvent.addListener(n,"mouseleave",mxUtils.bind(this,function(e){mxEvent.isTouchEvent(e)||o(30)}));var u=this.graph,a=u.getTolerance();u.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(e,t){this.startX=t.getGraphX(),this.startY=t.getGraphY(),this.scrollLeft=u.container.scrollLeft,this.scrollTop=u.container.scrollTop},mouseMove:function(e,t){},mouseUp:function(e,t){mxEvent.isTouchEvent(t.getEvent())&&Math.abs(this.scrollLeft-u.container.scrollLeft)<a&&Math.abs(this.scrollTop-u.container.scrollTop)<a&&Math.abs(this.startX-t.getGraphX())<a&&Math.abs(this.startY-t.getGraphY())<a&&(0<parseFloat(n.style.opacity||0)?s():o(30))}})}for(var f=this.toolbarItems,l=0,c=null,h=null,p=0;p<f.length;p++){var d=f[p];if("pages"==d){h=t.ownerDocument.createElement("div"),h.style.cssText="display:inline-block;position:relative;padding:3px 4px 0 4px;vertical-align:top;font-family:Helvetica,Arial;font-size:12px;top:4px;cursor:default;",mxUtils.setOpacity(h,70);var v=e(mxUtils.bind(this,function(){this.selectPage(this.currentPage-1)}),Editor.previousImage,mxResources.get("previousPage")||"Previous Page");v.style.borderRightStyle="none",v.style.paddingLeft="0px",v.style.paddingRight="0px",n.appendChild(h);var m=e(mxUtils.bind(this,function(){this.selectPage(this.currentPage+1)}),Editor.nextImage,mxResources.get("nextPage")||"Next Page");m.style.paddingLeft="0px",m.style.paddingRight="0px",d=mxUtils.bind(this,function(){h.innerHTML="",mxUtils.write(h,this.currentPage+1+" / "+this.diagrams.length),h.style.display=1<this.diagrams.length?"inline-block":"none",v.style.display=h.style.display,m.style.display=h.style.display}),this.addListener("graphChanged",d),d()}else if("zoom"==d)this.zoomEnabled&&(e(mxUtils.bind(this,function(){this.graph.zoomOut()}),Editor.zoomOutImage,mxResources.get("zoomOut")||"Zoom Out"),e(mxUtils.bind(this,function(){this.graph.zoomIn()}),Editor.zoomInImage,mxResources.get("zoomIn")||"Zoom In"),e(mxUtils.bind(this,function(){this.graph.view.scaleAndTranslate(this.graph.initialViewState.scale,this.graph.initialViewState.translate.x,this.graph.initialViewState.translate.y)}),Editor.zoomFitImage,mxResources.get("fit")||"Fit"));else if("layers"==d){if(this.layersEnabled){var g=this.graph.getModel(),y=e(mxUtils.bind(this,function(e){if(null!=c)c.parentNode.removeChild(c),c=null;else{c=this.graph.createLayersDialog(),mxEvent.addListener(c,"mouseleave",function(){c.parentNode.removeChild(c),c=null}),e=y.getBoundingClientRect(),c.style.width="140px",c.style.padding="2px 0px 2px 0px",c.style.border="1px solid #d0d0d0",c.style.backgroundColor="#eee",c.style.fontFamily="Helvetica Neue,Helvetica,Arial Unicode MS,Arial",c.style.fontSize="11px",c.style.zIndex=this.toolbarZIndex+1,mxUtils.setOpacity(c,80);var t=mxUtils.getDocumentScrollOrigin(document);c.style.left=t.x+e.left+"px",c.style.top=t.y+e.bottom+"px",document.body.appendChild(c)}}),Editor.layersImage,mxResources.get("layers")||"Layers");g.addListener(mxEvent.CHANGE,function(){y.style.display=1<g.getChildCount(g.root)?"inline-block":"none"}),y.style.display=1<g.getChildCount(g.root)?"inline-block":"none"}}else"lightbox"==d?this.lightboxEnabled&&e(mxUtils.bind(this,function(){this.showLightbox()}),Editor.maximizeImage,mxResources.get("show")||"Show"):null!=this.graphConfig["toolbar-buttons"]&&(d=this.graphConfig["toolbar-buttons"][d],null!=d&&e(null==d.enabled||d.enabled?d.handler:function(){},d.image,d.title,d.enabled))}null!=this.graph.minimumContainerSize&&(this.graph.minimumContainerSize.width=34*l),null!=this.graphConfig.title&&(f=t.ownerDocument.createElement("div"),f.style.cssText="display:inline-block;position:relative;padding:3px 6px 0 6px;vertical-align:top;font-family:Helvetica,Arial;font-size:12px;top:4px;cursor:default;",f.setAttribute("title",this.graphConfig.title),mxUtils.write(f,this.graphConfig.title),mxUtils.setOpacity(f,70),n.appendChild(f)),this.minToolbarWidth=34*l;var b=t.style.border,f=mxUtils.bind(this,function(){var e=t.getBoundingClientRect(),r=mxUtils.getScrollOrigin(document.body),r="relative"===document.body.style.position?document.body.getBoundingClientRect():{left:-r.x,top:-r.y},e={left:e.left-r.left,top:e.top-r.top,bottom:e.bottom-r.top,right:e.right-r.left};n.style.left=e.left+"px",n.style.width="inline"==this.graphConfig["toolbar-position"]?"auto":Math.max(this.minToolbarWidth,t.offsetWidth)+"px",n.style.border="1px solid #d0d0d0","bottom"==this.graphConfig["toolbar-position"]?n.style.top=e.bottom-1+"px":"inline"!=this.graphConfig["toolbar-position"]?(n.style.marginTop=-this.toolbarHeight+"px",n.style.top=e.top+1+"px"):n.style.top=e.top+"px","1px solid transparent"==b&&(t.style.border="1px solid #d0d0d0"),document.body.appendChild(n);var i=mxUtils.bind(this,function(){1!=this.graphConfig["toolbar-nohide"]&&(null!=n.parentNode&&n.parentNode.removeChild(n),null!=c&&(c.parentNode.removeChild(c),c=null),t.style.border=b)});mxEvent.addListener(document,"mousemove",function(e){for(e=mxEvent.getSource(e);null!=e;){if(e==t||e==n||e==c)return;e=e.parentNode}i()}),mxEvent.addListener(document,"mouseleave",function(e){i()})});mxEvent.addListener(t,"mouseenter",f)},GraphViewer.prototype.addClickHandler=function(e,t){e.linkPolicy=this.graphConfig.target||e.linkPolicy,e.addClickHandler(this.graphConfig.highlight,mxUtils.bind(this,function(n,r){if(null==r){var i=mxEvent.getSource(n);"a"==i.nodeName.toLowerCase()&&(r=i.getAttribute("href"))}null!=t?null==r||e.isExternalProtocol(r)||e.isBlankLink(r)||window.setTimeout(function(){t.destroy()},0):null!=r&&null==t&&e.isCustomLink(r)&&(mxEvent.isTouchEvent(n)||!mxEvent.isPopupTrigger(n))&&e.customLinkClicked(r)&&mxEvent.consume(n)}),mxUtils.bind(this,function(e){null!=t||!this.lightboxClickEnabled||mxEvent.isTouchEvent(e)&&0!=this.toolbarItems.length||this.showLightbox()}))},GraphViewer.prototype.showLightbox=function(e,t,n){if("open"==this.graphConfig.lightbox||window.self!==window.top)if(null==this.lightboxWindow||this.lightboxWindow.closed){e=null!=e?e:null!=this.graphConfig.editable?this.graphConfig.editable:!0,n={client:1,lightbox:1,target:null!=n?n:"blank"},e&&(n.edit=this.graphConfig.edit||"_blank");if(null!=t?t:1)n.close=1;this.layersEnabled&&(n.layers=1),null!=this.graphConfig&&0!=this.graphConfig.nav&&(n.nav=1),null!=this.graphConfig&&null!=this.graphConfig.highlight&&(n.highlight=this.graphConfig.highlight.substring(1)),null!=this.currentPage&&0<this.currentPage&&(n.page=this.currentPage),"undefined"!=typeof window.postMessage&&(null==document.documentMode||10<=document.documentMode)?null==this.lightboxWindow&&mxEvent.addListener(window,"message",mxUtils.bind(this,function(e){"ready"==e.data&&e.source==this.lightboxWindow&&this.lightboxWindow.postMessage(this.xml,"*")})):n.data=encodeURIComponent(this.xml),e="www.draw.io","1"==urlParams.dev&&(n.dev="1",n.drawdev="1",e="test.draw.io"),this.lightboxWindow=window.open("https://"+e+"/#P"+encodeURIComponent(JSON.stringify(n)))}else this.lightboxWindow.focus();else this.showLocalLightbox()},GraphViewer.prototype.showLocalLightbox=function(){var e=mxUtils.getDocumentScrollOrigin(document),t=document.createElement("div");mxClient.IS_QUIRKS?(t.style.position="absolute",t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=document.body.offsetWidth+"px",t.style.height=document.body.offsetHeight+"px"):t.style.cssText="position:fixed;top:0;left:0;bottom:0;right:0;",t.style.zIndex=this.lightboxZIndex,t.style.backgroundColor="#000000",mxUtils.setOpacity(t,70),document.body.appendChild(t);var n=document.createElement("img");n.setAttribute("border","0"),n.setAttribute("src",Editor.closeImage),mxClient.IS_QUIRKS?(n.style.position="absolute",n.style.right="32px",n.style.top=e.y+32+"px"):n.style.cssText="position:fixed;top:32px;right:32px;",n.style.cursor="pointer",mxEvent.addListener(n,"click",function(){r.destroy()}),urlParams.pages="1",urlParams.page=this.currentPage,urlParams.nav=0!=this.graphConfig.nav?"1":"0",urlParams.layers=this.layersEnabled?"1":"0";if(null==document.documentMode||10<=document.documentMode)Editor.prototype.editButtonLink=this.graphConfig.edit,Editor.prototype.editButtonFunc=this.graphConfig.editFunc;EditorUi.prototype.updateActionStates=function(){},EditorUi.prototype.addBeforeUnloadListener=function(){},EditorUi.prototype.addChromelessClickHandler=function(){},Graph.prototype.shadowId="lightboxDropShadow";var r=new EditorUi(new Editor(!0),document.createElement("div"),!0);r.editor.editBlankUrl=this.editBlankUrl,Graph.prototype.shadowId="dropShadow",r.refresh=function(){};var i=mxUtils.bind(this,function(e){27==e.keyCode&&r.destroy()}),s=r.destroy;r.destroy=function(){mxEvent.removeListener(document.documentElement,"keydown",i),document.body.removeChild(t),document.body.removeChild(n),document.body.style.overflow="auto",GraphViewer.resizeSensorEnabled=!0,s.apply(this,arguments)};var o=r.editor.graph,u=o.container;u.style.overflow="hidden",this.lightboxChrome?(u.style.border="1px solid #c0c0c0",u.style.margin="40px",mxEvent.addListener(document.documentElement,"keydown",i)):(t.style.display="none",n.style.display="none");var a=this;o.getImageFromBundles=function(e){return a.getImageUrl(e)};var f=r.createTemporaryGraph;return r.createTemporaryGraph=function(){var e=f.apply(this,arguments);return e.getImageFromBundles=function(e){return a.getImageUrl(e)},e},this.graphConfig.move&&(o.isMoveCellsEvent=function(e){return!0}),mxClient.IS_QUIRKS||(mxUtils.setPrefixedStyle(u.style,"border-radius","4px"),u.style.position="fixed"),GraphViewer.resizeSensorEnabled=!1,document.body.style.overflow="hidden",mxClient.IS_SF||mxClient.IS_EDGE||(mxUtils.setPrefixedStyle(u.style,"transform","rotateY(90deg)"),mxUtils.setPrefixedStyle(u.style,"transition","all .25s ease-in-out")),this.addClickHandler(o,r),window.setTimeout(mxUtils.bind(this,function(){u.style.outline="none",u.style.zIndex=this.lightboxZIndex,n.style.zIndex=this.lightboxZIndex,document.body.appendChild(u),document.body.appendChild(n),r.setFileData(this.xml),mxUtils.setPrefixedStyle(u.style,"transform","rotateY(0deg)"),r.chromelessToolbar.style.bottom="60px",r.chromelessToolbar.style.zIndex=this.lightboxZIndex,document.body.appendChild(r.chromelessToolbar),r.getEditBlankXml=mxUtils.bind(this,function(){return this.xml}),mxClient.IS_QUIRKS&&(u.style.position="absolute",u.style.display="block",u.style.left=e.x+"px",u.style.top=e.y+"px",u.style.width=document.body.clientWidth-80+"px",u.style.height=document.body.clientHeight-80+"px",u.style.backgroundColor="white",r.chromelessToolbar.style.display="block",r.chromelessToolbar.style.position="absolute",r.chromelessToolbar.style.bottom="",r.chromelessToolbar.style.top=e.y+document.body.clientHeight-100+"px"),r.lightboxFit(),r.chromelessResize(),this.showLayers(o,this.graph),mxEvent.addListener(t,"click",function(){r.destroy()})}),0),r},GraphViewer.processElements=function(e){mxUtils.forEach(GraphViewer.getElementsByClassName(e||"mxgraph"),function(e){try{e.innerHTML="",GraphViewer.createViewerForElement(e)}catch(t){throw e.innerHTML=t.message,t}})},GraphViewer.getElementsByClassName=function(e){if(document.getElementsByClassName){var t=document.getElementsByClassName(e);e=[];for(var n=0;n<t.length;n++)e.push(t[n]);return e}for(var r=document.getElementsByTagName("*"),t=[],n=0;n<r.length;n++){var i=r[n].className;null!=i&&0<i.length&&(i=i.split(" "),0<=mxUtils.indexOf(i,e)&&t.push(r[n]))}return t},GraphViewer.createViewerForElement=function(e,t){var n=e.getAttribute("data-mxgraph");if(null!=n){var r=JSON.parse(n),i=function(n){n=mxUtils.parseXml(n),n=new GraphViewer(e,n.documentElement,r),null!=t&&t(n)};null!=r.url?GraphViewer.getUrl(r.url,function(e){i(e)}):i(r.xml)}},GraphViewer.initCss=function(){try{var e=document.createElement("style");e.type="text/css",e.innerHTML="div.mxTooltip {\n-webkit-box-shadow: 3px 3px 12px #C0C0C0;\n-moz-box-shadow: 3px 3px 12px #C0C0C0;\nbox-shadow: 3px 3px 12px #C0C0C0;\nbackground: #FFFFCC;\nborder-style: solid;\nborder-width: 1px;\nborder-color: black;\nfont-family: Arial;\nfont-size: 8pt;\nposition: absolute;\ncursor: default;\npadding: 4px;\ncolor: black;}\ntd.mxPopupMenuIcon div {\nwidth:16px;\nheight:16px;}\nhtml div.mxPopupMenu {\n-webkit-box-shadow:2px 2px 3px #d5d5d5;\n-moz-box-shadow:2px 2px 3px #d5d5d5;\nbox-shadow:2px 2px 3px #d5d5d5;\n_filter:progid:DXImageTransform.Microsoft.DropShadow(OffX=2, OffY=2, Color='#d0d0d0',Positive='true');\nbackground:white;\nposition:absolute;\nborder:3px solid #e7e7e7;\npadding:3px;}\nhtml table.mxPopupMenu {\nborder-collapse:collapse;\nmargin:0px;}\nhtml td.mxPopupMenuItem {\npadding:7px 30px 7px 30px;\nfont-family:Helvetica Neue,Helvetica,Arial Unicode MS,Arial;\nfont-size:10pt;}\nhtml td.mxPopupMenuIcon {\nbackground-color:white;\npadding:0px;}\ntd.mxPopupMenuIcon .geIcon {\npadding:2px;\npadding-bottom:4px;\nmargin:2px;\nborder:1px solid transparent;\nopacity:0.5;\n_width:26px;\n_height:26px;}\ntd.mxPopupMenuIcon .geIcon:hover {\nborder:1px solid gray;\nborder-radius:2px;\nopacity:1;}\nhtml tr.mxPopupMenuItemHover {\nbackground-color: #eeeeee;\ncolor: black;}\ntable.mxPopupMenu hr {\ncolor:#cccccc;\nbackground-color:#cccccc;\nborder:none;\nheight:1px;}\ntable.mxPopupMenu tr {	font-size:4pt;}\n.geDialog { font-family:Helvetica Neue,Helvetica,Arial Unicode MS,Arial;\nfont-size:10pt;\nborder:none;\nmargin:0px;}\n.geDialog {	position:absolute;	background:white;	overflow:hidden;	padding:30px;	border:1px solid #acacac;	-webkit-box-shadow:0px 0px 2px 2px #d5d5d5;	-moz-box-shadow:0px 0px 2px 2px #d5d5d5;	box-shadow:0px 0px 2px 2px #d5d5d5;	_filter:progid:DXImageTransform.Microsoft.DropShadow(OffX=2, OffY=2, Color='#d5d5d5', Positive='true');	z-index: 2;}.geDialogClose {	position:absolute;	width:9px;	height:9px;	opacity:0.5;	cursor:pointer;	_filter:alpha(opacity=50);}.geDialogClose:hover {	opacity:1;}.geDialogTitle {	box-sizing:border-box;	white-space:nowrap;	background:rgb(229, 229, 229);	border-bottom:1px solid rgb(192, 192, 192);	font-size:15px;	font-weight:bold;	text-align:center;	color:rgb(35, 86, 149);}.geDialogFooter {	background:whiteSmoke;	white-space:nowrap;	text-align:right;	box-sizing:border-box;	border-top:1px solid #e5e5e5;	color:darkGray;}\n.geBtn {	background-color: #f5f5f5;	border-radius: 2px;	border: 1px solid #d8d8d8;	color: #333;	cursor: default;	font-size: 11px;	font-weight: bold;	height: 29px;	line-height: 27px;	margin: 0 0 0 8px;	min-width: 72px;	outline: 0;	padding: 0 8px;	cursor: pointer;}.geBtn:hover, .geBtn:focus {	-webkit-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);	-moz-box-shadow: 0px 1px 1px rgba(0,0,0,0.1);	box-shadow: 0px 1px 1px rgba(0,0,0,0.1);	border: 1px solid #c6c6c6;	background-color: #f8f8f8;	background-image: linear-gradient(#f8f8f8 0px,#f1f1f1 100%);	color: #111;}.geBtn:disabled {	opacity: .5;}.gePrimaryBtn {	background-color: #4d90fe;	background-image: linear-gradient(#4d90fe 0px,#4787ed 100%);	border: 1px solid #3079ed;	color: #fff;}.gePrimaryBtn:hover, .gePrimaryBtn:focus {	background-color: #357ae8;	background-image: linear-gradient(#4d90fe 0px,#357ae8 100%);	border: 1px solid #2f5bb7;	color: #fff;}.gePrimaryBtn:disabled {	opacity: .5;}",document.getElementsByTagName("head")[0].appendChild(e)}catch(t){}},GraphViewer.cachedUrls={},GraphViewer.getUrl=function(e,t,n){if(null!=GraphViewer.cachedUrls[e])t(GraphViewer.cachedUrls[e]);else{var r=0<navigator.userAgent.indexOf("MSIE 9")?new XDomainRequest:new XMLHttpRequest;r.open("GET",e),r.onload=function(){t(null!=r.getText?r.getText():r.responseText)},r.onerror=n,r.send()}},GraphViewer.resizeSensorEnabled=!0,GraphViewer.useResizeSensor=!0,function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},t=function(n,r){function i(){this.q=[],this.add=function(e){this.q.push(e)};var e,t;this.call=function(){e=0;for(t=this.q.length;e<t;e++)this.q[e].call()}}function s(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function o(t,n){if(!t.resizedAttached)t.resizedAttached=new i,t.resizedAttached.add(n);else if(t.resizedAttached){t.resizedAttached.add(n);return}t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor",t.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),"static"==s(t,"position")&&(t.style.position="relative");var r=t.resizeSensor.childNodes[0],o=r.childNodes[0],u=t.resizeSensor.childNodes[1],f=function(){o.style.width="100000px",o.style.height="100000px",r.scrollLeft=1e5,r.scrollTop=1e5,u.scrollLeft=1e5,u.scrollTop=1e5};f();var l=!1,c=function(){t.resizedAttached&&(l&&(t.resizedAttached.call(),l=!1),e(c))};e(c);var h,p,d,v,g=function(){if((d=t.offsetWidth)!=h||(v=t.offsetHeight)!=p)l=!0,h=d,p=v;f()},y=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};y(r,"scroll",g),y(u,"scroll",g)}var u=function(){GraphViewer.resizeSensorEnabled&&r()},f=Object.prototype.toString.call(n),l="[object Array]"===f||"[object NodeList]"===f||"[object HTMLCollection]"===f||"undefined"!=typeof jQuery&&n instanceof jQuery||"undefined"!=typeof Elements&&n instanceof Elements;if(l)for(var f=0,c=n.length;f<c;f++)o(n[f],u);else o(n,u);this.detach=function(){if(l)for(var e=0,r=n.length;e<r;e++)t.detach(n[e]);else t.detach(n)}};t.detach=function(e){e.resizeSensor&&(e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)},window.ResizeSensor=t}(),function(){Editor.initMath(),GraphViewer.initCss(),null!=window.onDrawioViewerLoad?window.onDrawioViewerLoad():GraphViewer.processElements()}(),define("drawio-viewer",function(){}),window.console||(window.console={log:function(){}}),define("book-main",["require","bookish-main","jquery","handlebars","text!../../ohc-common/templates/bookish.hbs","text!../../ohc-common/templates/solution.hbs","text!../../ohc-common/templates/embed.hbs","text!../../ohc-common/templates/videomodal.html","drawio-viewer"],function(e,t,n,r,i,s,o,u){function l(){function s(e){var t={};t.href=e;var r=n.parseURL(e);t.isYouTube=!1;switch(r.hostname.toLowerCase()){case"www.youtube.com":case"m.youtube.com":case"youtube.com":case"www.youtu.be":case"youtu.be":t.isYouTube=!0}if(t.isYouTube){var i=r.path.split("/");if(i.length===2&&i[1]!=="watch")var s=i[1];else if(i.length>2)var s=i.pop();else if(i.length===2&&i[1]==="watch")var s=r.params.v;t.href="https://www.youtube.com/watch?v="+s+"&autoplay=0&html5=1",t.embed="https://www.youtube.com/embed/"+s+"?autoplay=0&modestbranding=1&showinfo=1&rel=0&html5=1",t.thumbnail="https://img.youtube.com/vi/"+s+"/mqdefault.jpg"}return t}GraphViewer.processElements();var e=n("head link[rel=prev]"),r=n("head link[rel=next]");!e.length&&!r.length&&n("article .ohc-pager .next").removeClass("disabled").find("a").attr("href","index.html").on("click",t.handleInternalClick);var i=n("<iframe class='ohc-iframe embed-responsive-item' type='text/html' src='' allowfullscreen frameborder='0' />");n("article div.video-container[id]").each(function(){n(this).addClass("embed-responsive"),n(this).addClass("embed-responsive-16by9");var e=n(this).attr("id");if(e&&e.length>0){n(this).html("<a href='http://apexapps.oracle.com/pls/apex/f?p=44785:265:0::::P265_CONTENT_ID:"+e+"'>Play Video</a>");var t="https://apexapps.oracle.com/pls/apex/oll_rest/oll/docsv1/content/",r=n.ajax({url:t+e+"?callback=?",dataType:"json",context:this});r.done(function(e){var t=i.clone();t.attr("src",e.link),n(this).html(t)})}else console.log("Error: invalid video id")}),n("article .video-container a.iframe").each(function(){n(this).removeAttr("target");var e=n(this).attr("href"),t=this,r="P265_CONTENT_ID:";if(e.indexOf(r)>0){var i=e.substr(e.lastIndexOf(r)+r.length,e.length);n.getJSON("https://apexapps.oracle.com/pls/apex/oll_rest/oll/docsv2/content/"+i+"?callback=?",function(e){if(e.link){var r=s(e.link);r.isYouTube&&(n(t).attr("href",r.href),n(t).data("embed",r.embed),n(t).data("thumbnail",r.thumbnail))}e.title&&n(t).attr("title",e.title)})}else{var o=s(e);o.isYouTube&&(n(t).attr("href",o.href),n(t).data("embed",o.embed),n(t).data("thumbnail",o.thumbnail))}n(this).on("click",function(e){if(n(window).width()>=768)return e.preventDefault(),e.stopPropagation(),n(t).data("embed")?n("#videoModal iframe").attr("src",n(t).data("embed")):n("#videoModal iframe").attr("src",n(this).attr("href")),n("#videoModal").modal("show"),!1})})}var a=n.parseURL(window.location.href);if(window.top===window&&typeof a.params.embed=="undefined")if(n("html").hasClass("solution"))var f=r.compile(s);else var f=r.compile(i);else if(typeof a.params.embed!="undefined"&&a.params.embed==0)if(n("html").hasClass("solution"))var f=r.compile(s);else var f=r.compile(i);else var f=r.compile(o);n(function(){var e=t.getTemplateData();e.tabtoc='<p class="text-center"><span class="fa fa-spinner fa-pulse fa-3x fa-fw" aria-hidden="true"></span><span class="sr-only">Loading...</span></p>',e.tabsearch=!0,e.tabprint=!0,e.pubType="book",e.article=n("article").html(),e.disclaimers=n("#disclaimers").html(),n("body").html(f(e)),n(u).appendTo("body"),n("#videoModal").on("hidden.bs.modal",function(e){n("#videoModal iframe").attr("src","")}),n("#videoModal").on("shown.bs.modal",function(e){n("#videoModal .modal-header button.close").focus()}),t.templateInit(),n(document).on("articleload",function(){t.renderArticle(),l(),t.showArticle()}),n(document).on("articlefail",function(e){console.log(e),t.showError()}),t.renderArticle(),l(),t.showArticle(!1),a.protocol.indexOf("http")===0&&setTimeout(function(){n.getScript("https://www.oracleimg.com/us/assets/metrics/ora_docs.js")},200)})}),window.ohcglobal="ohc-book-template",window.onDrawioViewerLoad=function(){},require.config({waitSeconds:0,shim:{debounce:{deps:["jquery"]},bootstrap:{deps:["jquery"]}},paths:{text:"../../requirejs/text",jquery:"../../jquery/jquery.min","jquery-ui":"../../jquery-ui/jquery-ui",debounce:"../../throttle-debounce/jquery.ba-throttle-debounce.min",bootstrap:"../../bootstrap/js/bootstrap.min",handlebars:"../../handlebars/handlebars",highlightjs:"../../highlightjs/highlight.pack","js-cookie":"../../js-cookie/js.cookie","drawio-viewer":"../../drawio-viewer/viewer","win-phone-8":"../../ohc-common/js/win-phone-8","ohc-url":"../../ohc-common/js/ohc-url","ohc-sso":"../../ohc-common/js/ohc-sso",i18n:"../../ohc-common/js/i18n","bookish-main":"../../ohc-common/js/bookish-main"}}),require(["book-main"]),define("book-config",function(){});
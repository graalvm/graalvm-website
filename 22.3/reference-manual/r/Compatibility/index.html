<h1 id="graalvm-r-runtime-compatibility">GraalVM R Runtime Compatibility</h1>

<p>The GraalVM R runtime is based on GNU R and reuses the base packages.
It is currently based on GNU R 4.0.3, and moves to new major versions of R as they become available and stable.
GraalVM’s R runtime developers maintain an extensive set of unit tests for all aspects of the R language and the builtin functionality, and these tests are available as part of the <a href="https://github.com/oracle/fastr">R source code</a>.</p>

<p>GraalVM’s R runtime aims to be fully compatible with GNU R, including its native interface as used by <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html">R extensions</a>.
It can install and run unmodified, complex R packages like <code>ggplot2</code>, <code>Shiny</code>, or <code>Rcpp</code>.
As some packages rely on unspecified behaviour or implementation details of GNU R, support for packages is a work in progress, and <strong>some packages might not install successfully or work as expected</strong>.</p>
<h2 id="installing-packages">Installing Packages</h2>

<p>Packages can be installed using the <code>install.packages</code> function or the <code>R CMD INSTALL</code> shell command.
By default, <strong>GraalVM’s R runtime uses a fixed snapshot of the CRAN repository<a href="#note-1"><sup>1</sup></a></strong>.
This behavior can be overridden by explicitly setting the <code>repos</code> argument of the <code>install.packages</code> function.
This functionality does not interfere with the <code>checkpoint</code> package. If you are behind a proxy server, make sure to configure the proxy either with environment variables or using the JVM options, e.g., <code>--vm.Djava.net.useSystemProxies=true</code>.</p>

<p>The versions of some packages specifically patched for GraalVM’s R runtime can be installed using the <code>install.fastr.packages</code> function that downloads them from the <a href="https://github.com/oracle/fastr/tree/master/com.oracle.truffle.r.pkgs">GitHub repository</a>.
Currently, those are <code>rJava</code> and <code>data.table</code>.</p>

<h2 id="limitations">Limitations</h2>
<p>There are some limitations of the GraalVM R runtime compared to GNU R:</p>
<ul>
  <li>Only small parts of the low-level <code>graphics</code> package are functional. However, the <code>grid</code> package is supported and R can install and run packages based on it, like <code>ggplot2</code>. Support for the <code>graphics</code> package in R is planned for future releases.</li>
  <li>Encoding of character vectors: related builtins (e.g., <code>Encoding</code>) are available,
   but do not execute any useful code. Character vectors are represented as Java Strings and therefore encoded in the UTF-16 format. GraalVM’s R runtime will add support for encoding in future releases.</li>
  <li>Some parts of the native API (e.g., <code>DATAPTR</code>) expose implementation details that are hard to emulate for alternative implementations of R. These are implemented as needed while testing the GraalVM R runtime with various CRAN packages.</li>
</ul>

<p><br />
<br />
<br />
<sup id="note-1">1</sup> More technically, GraalVM’s R runtime uses a fixed MRAN URL from <code>$R_HOME/etc/DEFAULT_CRAN_MIRROR</code>, which is a snapshot of the CRAN repository as it was visible at a given date from the URL string.</p>
